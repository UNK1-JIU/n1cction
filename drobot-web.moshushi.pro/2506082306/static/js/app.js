webpackJsonp([120],{"+TJN":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a={data:function(){return{id:"",row:"",key:"",tableName:"",richTextViewContent:"",richTextViewContentEdit:"",visible:!1,loading:!1,title:"",fieldCanEdit:!0,viewState:!0}},components:{Tinymce:n("5aCZ").a},mounted:function(){},methods:{beforeHideMethod:function(){this.viewState=!0},buttonCacncle:function(){this.viewState=!0},buttonClick:function(){this.fieldCanEdit?this.viewState?this.viewState=!this.viewState:(this.row[this.key]=encodeURIComponent(this.richTextViewContentEdit),this.updateData()):this.$XModal.message({message:"无权限进行编辑！"})},init:function(e,t,n,o,i,a,r){console.log(e,t,n,o,i,a,r,99999),this.id=e,this.extId=t,this.key=o,this.title=i,this.row=n,this.tableName=a;var l=n[o]?n[o]:"";this.richTextViewContent=decodeURIComponent(l),this.richTextViewContentEdit=decodeURIComponent(l),this.fieldCanEdit=!r,this.visible=!0},updateData:function(){var e=this;this.loading=!0,this.$http({url:this.$http.adornUrl("/common/common/update/"+this.tableName),method:"post",data:this.$http.adornData({id:this.id,extId:this.extId,extContent:i()(this.row)})}).then(function(t){var n=t.data;e.loading=!1,e.viewState=!0,e.visible=!1,n&&0===n.code?e.$emit("updateRichtext"):e.$message.error(n.msg)})}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"90%",height:"90%",title:e.title,loading:e.loading,resize:"","before-hide-method":e.beforeHideMethod},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.fieldCanEdit?n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.buttonClick}},[e._v(e._s(e.viewState?"编辑":"保存"))]),e._v(" "),e.viewState?e._e():n("el-button",{on:{click:e.buttonCacncle}},[e._v("取消")])],1):e._e(),e._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[e.viewState?n("div",{staticStyle:{width:"100%",height:"100%"},domProps:{innerHTML:e._s(e.richTextViewContent)}}):n("tinymce",{ref:"tinyDetailView",attrs:{width:"1200",height:600},model:{value:e.richTextViewContentEdit,callback:function(t){e.richTextViewContentEdit=t},expression:"richTextViewContentEdit"}})],1)])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("a8ZZ")},null,null);t.default=l.exports},"+WRv":function(e,t){},"+aBt":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-pinglun",use:"icon-pinglun-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-pinglun"><defs><style type="text/css"></style></defs><path d="M850.879104 96.41591l-676.303067 0c-60.681034 0-110.049418 49.367361-110.049418 110.049418l0 446.200388c0 60.681034 49.367361 110.049418 110.049418 110.049418l90.307795 0L396.936381 931.129846c3.793396 4.838192 9.598612 7.66354 15.746636 7.66354s11.952216-2.825348 15.746636-7.66354l132.052548-168.414711 290.396903 0c60.681034 0 110.049418-49.367361 110.049418-110.049418L960.928522 206.465329C960.928522 145.784294 911.561162 96.41591 850.879104 96.41591zM920.91111 652.665717c0 38.614459-31.416524 70.030983-70.030983 70.030983L550.744419 722.6967c-6.147 0-11.952216 2.825348-15.745612 7.66354L412.683017 886.356107l-122.31579-155.995867c-3.792373-4.838192-9.597589-7.66354-15.745612-7.66354l-100.045577 0c-38.614459 0-70.030983-31.416524-70.030983-70.030983L104.545054 206.465329c0-38.614459 31.416524-70.030983 70.030983-70.030983l676.303067 0c38.614459 0 70.030983 31.416524 70.030983 70.030983L920.910087 652.665717z" p-id="2619" /><path d="M272.621051 344.526731c-44.132126 0-80.035848 35.903721-80.035848 80.035848 0 44.132126 35.903721 80.036871 80.035848 80.036871s80.035848-35.904745 80.035848-80.036871C352.655875 380.430452 316.752154 344.526731 272.621051 344.526731zM272.621051 464.582037c-22.065552 0-40.017412-17.951861-40.017412-40.018436 0-22.065552 17.952884-40.017412 40.017412-40.017412 22.065552 0 40.017412 17.951861 40.017412 40.017412C312.638463 446.629153 294.686602 464.582037 272.621051 464.582037z" p-id="2620" /><path d="M512.727571 344.526731c-44.132126 0-80.035848 35.903721-80.035848 80.035848 0 44.132126 35.903721 80.036871 80.035848 80.036871 44.132126 0 80.035848-35.904745 80.035848-80.036871C592.763418 380.430452 556.859697 344.526731 512.727571 344.526731zM512.727571 464.582037c-22.065552 0-40.017412-17.951861-40.017412-40.018436 0-22.065552 17.951861-40.017412 40.017412-40.017412 22.065552 0 40.017412 17.951861 40.017412 40.017412C552.746006 446.629153 534.793122 464.582037 512.727571 464.582037z" p-id="2621" /><path d="M752.836137 344.526731c-44.131103 0-80.035848 35.903721-80.035848 80.035848 0 44.132126 35.904745 80.036871 80.035848 80.036871s80.035848-35.904745 80.035848-80.036871C832.871985 380.430452 796.96724 344.526731 752.836137 344.526731zM752.836137 464.582037c-22.066575 0-40.017412-17.951861-40.017412-40.018436 0-22.065552 17.951861-40.017412 40.017412-40.017412s40.017412 17.951861 40.017412 40.017412C792.853549 446.629153 774.902712 464.582037 752.836137 464.582037z" p-id="2622" /></symbol>'});r.a.add(l);t.default=l},"+h9K":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgPHBhdGggZD0iTTIyIDdhMSAxIDAgMTAtMiAwdjEzSDdhMSAxIDAgMTAwIDJoMTRhMSAxIDAgMDAxLTFWN3oiIGZpbGw9IiM3NjdFODkiLz4NCjwvc3ZnPg0K"},"+u3E":function(e,t){},"/7NN":function(e,t){},"/90L":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-shoucangfill",use:"icon-shoucangfill-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-shoucangfill"><defs><style type="text/css"></style></defs><path d="M777.312598 940.007027c-3.184529 0-6.380314-0.759293-9.307993-2.297322L512.694825 803.484677 257.385045 937.708682c-6.741541 3.543709-14.909571 2.952238-21.070898-1.52268-6.161327-4.475941-9.246595-12.062733-7.959276-19.568684l48.759517-284.289812L70.566172 430.990988c-5.453199-5.316076-7.4159-13.268188-5.062296-20.511149 2.353604-7.242961 8.614192-12.521175 16.150842-13.616112l285.444101-41.47767L494.753197 96.730065c3.370771-6.828522 10.326183-11.153014 17.941628-11.153014 7.615445 0 14.570857 4.323469 17.941628 11.153014l127.654378 258.655991 285.444101 41.47767c7.53665 1.094938 13.797237 6.373151 16.150842 13.616112 2.353604 7.242961 0.390903 15.19405-5.062296 20.511149l-206.54924 201.335495 48.759517 284.289812c1.287319 7.505951-1.798972 15.092743-7.959276 19.568684C785.589099 938.717661 781.461081 940.007027 777.312598 940.007027z" p-id="2366" /></symbol>'});r.a.add(l);t.default=l},"/Jdy":function(e,t,n){"use strict";var o=n("d7EF"),i=n.n(o),a=n("W3Iv"),r=n.n(a),l=n("mvHQ"),s=n.n(l),c=n("Xxa5"),u=n.n(c),d=n("exGp"),h=n.n(d),f=n("Zrlr"),p=n.n(f),m=n("wxAW"),v=n.n(m),b=function(){function e(){p()(this,e),this.isCloseMessageBox=!0,this.pdList=null,this.roomId=null}return v()(e,[{key:"getRoomId",value:function(){var e=h()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRoomIdDo();case 2:return this.roomId=e.sent,e.abrupt("return",this.roomId);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRoomIdDo",value:function(){var e=h()(u.a.mark(function e(){var t,n,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t={url:"https://eos.douyin.com/data/life/live/status/",method:"GET",data:"null"},!window.$isMobile){e.next=8;break}return e.next=5,window.android_buyinSecHttp(s()(t));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,window.boundAsync.buyinSecHttp(t);case 10:e.t0=e.sent;case 11:if(n=e.t0,!(o=JSON.parse(n))||!o.data||1!==o.data.status){e.next=17;break}return e.abrupt("return",o.data.room_id);case 17:this.isCloseMessageBox&&(this.isCloseMessageBox=!1);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),console.error("Error:",e.t1.message);case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}},e,this,[[0,20]])}));return function(){return e.apply(this,arguments)}}()},{key:"getProductList",value:function(){var e=h()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProductDo();case 2:return t=e.sent,this.pdList=t?t.card_list:null,e.abrupt("return",this.pdList);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getProductDo",value:function(){var e=h()(u.a.mark(function e(){var t,n,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRoomId();case 2:if(!(t=e.sent)){e.next=16;break}if(n={url:"https://eos.douyin.com/data/life/live/shelves/anchor/?agg_card_id=0&room_id="+t,method:"GET",data:"null"},!window.$isMobile){e.next=11;break}return e.next=8,window.android_buyinSecHttp(s()(n));case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,window.boundAsync.buyinSecHttp(n);case 13:e.t0=e.sent;case 14:return o=e.t0,e.abrupt("return",JSON.parse(o));case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getLiveRoomInfo",value:function(){var e=h()(u.a.mark(function e(t){var n,o,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if(n=s()({room_id:t}),o={url:"https://eos.douyin.com/life/api/live_screen/v4/key_index",method:"POST",data:n},!window.$isMobile){e.next=9;break}return e.next=6,window.android_buyinSecHttp(s()(o));case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,window.boundAsync.buyinSecHttp(o);case 11:e.t0=e.sent;case 12:return i=e.t0,e.abrupt("return",JSON.parse(i));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getLiveRoomInfo2",value:function(){var e=h()(u.a.mark(function e(t){var n,o,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if(n=s()({room_id:t}),o={url:"https://eos.douyin.com/life/api/live_screen/v4/room_info",method:"POST",data:n},!window.$isMobile){e.next=9;break}return e.next=6,window.android_buyinSecHttp(s()(o));case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,window.boundAsync.buyinSecHttp(o);case 11:e.t0=e.sent;case 12:return i=e.t0,e.abrupt("return",JSON.parse(i));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"orderList",value:function(e,t,n,o){var i=[],a=[],r=[];n&&o.split(" ").forEach(function(e){var t=parseInt(e);isNaN(t)||i.push(t-1)});e.forEach(function(e,t){i.includes(t)?a.push(e):r.push(e)}),console.log(s()(r),888),r.sort(function(e,n){switch(t){case"show":return parseInt(n.Value.show)-parseInt(e.Value.show);case"click":return parseInt(n.Value.click)-parseInt(e.Value.click);case"order_count":return parseInt(n.Value.order_count)-parseInt(e.Value.order_count);case"gmv":return parseInt(n.Value.gmv)-parseInt(e.Value.gmv);default:return 0}});for(var l=[],c=0,u=0;u<e.length;u++)i.includes(u)?l.push(a[i.indexOf(u)]):l.push(r[c++]);return l}},{key:"orderProductList",value:function(){var e=h()(u.a.mark(function e(t,n,o){var a,l,c,d,h,f,p,m,v,b,y,g,w;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRoomId();case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.getProductDo();case 7:if(l=e.sent){e.next=10;break}return e.abrupt("return");case 10:if(c=l.card_list.map(function(e){return e.product_base_info.product_id}).join(","),d={url:"https://eos.douyin.com/data/life/live/component/stats/?component_ids="+c+"&room_id="+a,method:"GET",data:"null"},!window.$isMobile){e.next=19;break}return e.next=16,window.android_buyinSecHttp(s()(d));case 16:e.t0=e.sent,e.next=22;break;case 19:return e.next=21,window.boundAsync.buyinSecHttp(d);case 21:e.t0=e.sent;case 22:if(h=e.t0,(f=JSON.parse(h))&&f.component_conversion_data){e.next=26;break}return e.abrupt("return");case 26:if(p=f.component_conversion_data,m=[],v=r()(p).map(function(e){var t=i()(e,2);return{Key:t[0],Value:t[1]}}),l.card_list.forEach(function(e){var t=v.find(function(t){return t.Key.toString()===e.product_base_info.product_id});t&&m.push(t)}),b=this.orderList(m,t,n,o),y={agg_card_id:l.agg_card_id,agg_card_type:1,source_type:1,room_id:a},g=b.map(function(e){var t=e.Key.toString(),n=l.card_list.find(function(e){return e.product_base_info.product_id===t});return{card_id:n.card_base_info.card_id,auth_type:n.card_base_info.auth_type,live_card_type:n.card_base_info.live_card_type}}),y.card_data=s()(g),{url:"https://eos.douyin.com/data/life/live/agg/card/save/",method:"POST",data:s()(y)},!window.$isMobile){e.next=41;break}return e.next=38,window.android_buyinSecHttp(s()(d));case 38:e.t1=e.sent,e.next=44;break;case 41:return e.next=43,window.boundAsync.buyinSecHttp(d);case 43:e.t1=e.sent;case 44:return w=e.t1,e.abrupt("return",JSON.parse(w));case 46:case"end":return e.stop()}},e,this)}));return function(t,n,o){return e.apply(this,arguments)}}()},{key:"getBuyinProductList",value:function(){var e=h()(u.a.mark(function e(){var t,n,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("开始执行getBuyinProductList"),t={url:"https://buyin.jinritemai.com/api/anchor/livepc/basic_list?source_type=force",method:"GET",data:"null"},console.log("请求参数:",t),e.next=5,window.android_buyinSecHttp(s()(t));case 5:return n=e.sent,console.log("收到的响应:",n),o=JSON.parse(n),console.log("解析后的响应:",o),e.abrupt("return",o);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"orderPromotions",value:function(e,t,n,o){if(console.log("开始执行orderPromotions，参数：",{promotions:e,type:t,isAutoOrderFixPosition:n,autoOrderFixPosArr:o}),!e||!Array.isArray(e))return console.log("promotions无效"),{promotions:[]};var i=[],a=[],r=[];if(n){var l=o.split(" ");console.log("解析固定位置数组:",l),l.forEach(function(e){var t=parseInt(e);isNaN(t)||i.push(t-1)})}console.log("固定位置索引:",i),e.forEach(function(e,t){i.includes(t)?a.push(e):r.push(e)}),console.log("固定项:",a),console.log("非固定项:",r),r.sort(function(e,n){switch(t){case"show":return n.show_to_click_rate_in_live-e.show_to_click_rate_in_live;case"order_count":return n.pay_order_num-e.pay_order_num;case"gmv":return n.pay_order_gmv-e.pay_order_gmv;default:return 0}}),console.log("排序后的非固定项:",r);for(var s=[],c=0,u=0;u<e.length;u++)i.includes(u)?s.push(a[i.indexOf(u)]):s.push(r[c++]);console.log("最终结果列表:",s);var d={promotions:s.map(function(e){return{promotion_id:e.promotion_id}})};return console.log("返回结果:",d),d}},{key:"getProductListDetail",value:function(){var e=h()(u.a.mark(function e(t){var n,o,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data.basic_list){e.next=2;break}return e.abrupt("return",null);case 2:if(n=t.data.basic_list.map(function(e){return e.promotion_id}).join("%2C"),o={url:"https://buyin.jinritemai.com/api/anchor/livepc/promotions?source_type=force&request_from=&promotion_ids="+n,method:"GET",data:"null"},!window.$isMobile){e.next=10;break}return e.next=7,window.android_buyinSecHttp(s()(o));case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,window.boundAsync.buyinSecHttp(o);case 12:e.t0=e.sent;case 13:return i=e.t0,e.abrupt("return",JSON.parse(i));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"orderProductListDianshang",value:function(){var e=h()(u.a.mark(function e(t,n,o){var i,a,r,l,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBuyinProductList();case 2:return i=e.sent,e.next=5,this.getProductListDetail(i);case 5:if(!(a=e.sent).data.promotions){e.next=20;break}if(r=this.orderPromotions(a.data.promotions,t,n,o),l={url:"https://buyin.jinritemai.com/pc/live/rebind",method:"POST",data:s()(r)},!window.$isMobile){e.next=15;break}return e.next=12,window.android_buyinSecHttp(s()(l));case 12:e.t0=e.sent,e.next=18;break;case 15:return e.next=17,window.boundAsync.buyinSecHttp(l);case 17:e.t0=e.sent;case 18:return c=e.t0,e.abrupt("return",JSON.parse(c));case 20:case"end":return e.stop()}},e,this)}));return function(t,n,o){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();t.a=b},"/TiH":function(e,t){},0:function(e,t){},"06zv":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"braid-table",setting:{type:"braid-table",isEdit:!1,dragable:!0,resizable:!0,width:240,height:60,left:50,top:10,title:"表格",value:[],defaultValue:[],tabelHtml:"",columnsAttr:[],columns:[],selectCol:[],name:"",style:{zIndex:0,Alignment:"left",FontSize:9,FontColor:"#000000",BorderColor:"#000000",AutoHeight:!1,BottomMargin:0}},props:["val"],computed:{columns:function(){return this.val.columns||[]}},methods:{}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"widgets",staticStyle:{position:"absolute",overflow:"hidden"},style:{left:e.val.left+"px",top:e.val.top+"px",width:e.val.width+"px",height:e.val.height+"px",textAlign:e.val.style.Alignment,fontSize:e.val.style.FontSize+"pt",color:e.val.style.FontColor}},[n("table",{staticStyle:{"border-collapse":"collapse","font-size":"12px"},attrs:{border:"1",width:"100%",cellspacing:"0",cellpadding:"2",bordercolor:"#000000"}},[n("tr",e._l(e.columns,function(t){return n("th",{key:t.name,attrs:{width:"_seq"===t.name?40:""}},[e._v(e._s(t.title))])}),0),e._v(" "),n("tr",e._l(e.columns,function(t){return n("td",{key:t.name},[e._v(e._s(t.value))])}),0)])])},staticRenderFns:[]},a=n("VU/8")(o,i,!1,null,null,null);t.default=a.exports},"0I9B":function(e,t,n){"use strict";var o=n("0xDb"),i={props:{baseData:{},value:{},size:{default:"medium"},placeholder:{default:""}},model:{prop:"value",event:"change"},watch:{value:{handler:function(e){"yyyy"==this.baseData.dateType?Array.isArray(e)?(this.year1=e[0],this.year2=e[1]):(this.year1=null,this.year2=null):"string"==typeof e||(this.modelDate=this.value)},deep:!0,immediate:!0}},data:function(){return{modelDate:this.value,dateType:Object(o.m)("dateType"),dataTypeMap:Object(o.n)("dateType"),year1:null,year2:null}},methods:{emit:function(){var e=Object(o.e)(this.modelDate);"dateTime"==this.baseData.type&&e&&e.length&&(e=Date.parse(new Date(e[0]).toString())/1e3+" AND "+Date.parse(new Date(e[1]).toString())/1e3),this.$emit("change",e)},changeYear:function(){if(this.year1&&this.year2&&Number(this.year1)>Number(this.year2)){var e=this.year1;this.year1=this.year2,this.year2=e}!this.year1&&(this.year1=this.year2),!this.year2&&(this.year2=this.year1);var t=[this.year1,this.year2];this.$emit("change",t)}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["yyyy"==e.baseData.dateType?n("div",{staticClass:"row"},[n("el-date-picker",{key:"rangeYear1",staticClass:"col",staticStyle:{"padding-right":"5px"},attrs:{size:e.size,clearable:!1,type:"year","value-format":"yyyy",placeholder:e.placeholder?e.placeholder:"开始年份"},on:{change:e.changeYear},model:{value:e.year1,callback:function(t){e.year1=t},expression:"year1"}}),e._v(" "),n("div",{staticStyle:{"line-height":"35px"}},[e._v("\r\n            -\r\n        ")]),e._v(" "),n("el-date-picker",{key:"rangeYear2",staticClass:"col",staticStyle:{"padding-left":"5px"},attrs:{size:e.size,clearable:!1,type:"year","value-format":"yyyy",placeholder:e.placeholder?e.placeholder:"结束年份"},on:{change:e.changeYear},model:{value:e.year2,callback:function(t){e.year2=t},expression:"year2"}})],1):"HH:mm:ss"==e.baseData.dateType||"HH:mm"==e.baseData.dateType?n("div",[n("el-time-picker",{staticStyle:{width:"100%"},attrs:{size:e.size,"is-range":"","start-placeholder":e.placeholder?e.placeholder:"开始时间","end-placeholder":e.placeholder?e.placeholder:"结束时间","value-format":e.baseData.dateType,placeholder:"选择时间范围"},on:{change:e.emit},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}})],1):n("div",[n("el-date-picker",{key:"range"+e.baseData.key,staticStyle:{width:"100%"},attrs:{size:e.size,type:e.dataTypeMap[e.baseData.dateType].rangeType,"start-placeholder":e.placeholder?e.placeholder:"开始时间","end-placeholder":e.placeholder?e.placeholder:"结束时间","value-format":e.baseData.dateType},on:{change:e.emit},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}})],1)])},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("LlIK")},"data-v-1b9dac97",null);t.a=r.exports},"0TsT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-editor",use:"icon-editor-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-editor"><defs><style type="text/css"></style></defs><path d="M218.316 307.727h87.886v205.06h-29.297v29.295h117.179v-29.294H364.79V307.727h87.882v29.293h29.294v-87.882H189.022v87.882h29.294v-29.293z m322.242 58.59h292.945v58.588H540.558v-58.588z m0 117.177h292.945v58.588H540.558v-58.588z m-351.536 117.18h644.481v58.588h-644.48v-58.587z m0 117.176h644.481v58.588h-644.48V717.85z m351.536-468.713h292.945v58.589H540.558v-58.589z m420.923 713.13H61.045V63.309h900.436v898.958z m-864.62-35.816h828.804V99.125H96.861V926.45z" p-id="1400" /></symbol>'});r.a.add(l);t.default=l},"0eS3":function(e,t){},"0g9E":function(e,t){},"0gdP":function(e,t,n){"use strict";var o={components:{Tinymce:n("5aCZ").a},props:{isEdit:{},itemOption:{}},data:function(){return{richTextViewContent:"asdfsafsafsdfsaf<br />asfsdaf&nbsp;"}},methods:{onCtrDataChange:function(e){}}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"grid-card-dashboard h100 w100"},[t("div",{staticClass:"h100 w100",domProps:{innerHTML:this._s(this.itemOption.richtext)}})])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("CI8t")},"data-v-0e838eda",null);t.a=a.exports},"0tMT":function(e,t,n){e.exports=function(e){return function(){return n("Opzk")("./"+e+".vue")}}},"0xDb":function(e,t,n){"use strict";t.s=function(e){if(!m.a.state.common.needInstruction)return;m.a.commit("common/goInstructionStep",e)},t.B=function(e,t){var n=new h.a;return e.filter(function(e){return!n.has(e[t])&&n.set(e[t],1)})},t.b=function(e){u.a.MessageBox.alert("<p>"+e.data.permName+'不足（<span style="color:#f56c6c">'+e.data.permUsedInfo+"</span>）</p>",e.msg,{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,type:"error",callback:function(e){Window.prototype.UseDetailVisible()}})},t.r=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return("x"===e?16*Math.random()|0:8).toString(16)})},t.w=function(e,t){return Math.floor(Math.random()*(t-e))+e},t.k=function(e){for(var t=0,n=0;n<e.length;n++)e.charCodeAt(n)>127?t+=3:t+=1;return t},t.t=function(e){return-1!==JSON.parse(sessionStorage.getItem("permissions")||"[]").indexOf(e)||!1},t.A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parentId",o=[];if(!e)return o;for(var i={},a=0;a<e.length;a++)i[e[a][t]]=e[a];for(var r=0;r<e.length;r++)i[e[r][n]]&&e[r][t]!==e[r][n]?(i[e[r][n]].children||(i[e[r][n]].children=[]),i[e[r][n]]._level||(i[e[r][n]]._level=1),e[r]._level=i[e[r][n]]._level+1,i[e[r][n]].children.push(e[r])):o.push(e[r]);return o},t.a=function(){f.default.cookie.delete("token"),sessionStorage.clear(),m.a.commit("resetStore"),localStorage.setItem("loginInfo",""),p.a.options.isAddDynamicMenuRoutes=!1},t.e=function(e){var t=r()(e);return JSON.parse(t)},t.c=function(e,t){var n=document.createElement("input");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),t&&t.$message({message:"复制成功",type:"success"});n.remove()},t.x=function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",n=t.length,o="",i=0;i<e;i++)o+=t.charAt(Math.floor(Math.random()*n));return o},t.d=function(e,t){var n=null;return function(){var o=this,i=arguments;n&&clearTimeout(n),n=setTimeout(function(){e.apply(o,i)},t)}},t.y=function(e){function t(e){return(1==String(e).length?"0":"")+e}var n=parseInt((new Date).getTime()/1e3),o=n-e,i=new Date(1e3*n),a=new Date(1e3*e),r=a.getFullYear(),l=a.getMonth()+1,s=a.getDate(),c=a.getHours(),u=a.getMinutes();a.getSeconds();if(o<60)return"刚刚";if(o<3600)return Math.floor(o/60)+"分钟前";if(i.getFullYear()==r&&i.getMonth()+1==l&&i.getDate()==s)return"今天"+t(c)+":"+t(u);var d=new Date(1e3*(n-86400));return d.getFullYear()==r&&d.getMonth()+1==l&&d.getDate()==s?"昨天"+t(c)+":"+t(u):i.getFullYear()==r?t(l)+"月"+t(s)+"日 "+t(c)+":"+t(u):r+"年"+t(l)+"月"+t(s)+"日 "+t(c)+":"+t(u)},t.m=function(e){return b[e]},t.n=function(e){var t={};for(var n in b[e]){var o=b[e][n];t[o.value]=o}return t},t.p=function(){return y},t.q=function(e,t){if(-1!=y.indexOf(e))return{re:!1};var n=[];switch(e){case"integer":case"float":case"formule":case"systemCalc":n=["=","!=",">",">=","<","<=","belong","notBelong"];break;case"dateTime":case"dateYear":case"dateMonth":n=["=","!=",">",">=","<","<=","belong","notBelong","dynamic"];break;case"string":case"autoSerialNum":case"richText":case"select":case"selectId":case"baseData":n=["=","!=","contain","notContain"];break;case"selectStaff":case"multipleRelateTable":n=["=","!=","in","notIn","belong","notBelong","contain","notContain"];break;case"selectInterface":case"selectinterfaceTree":case"relateTable":case"id":case"extId":n=["=","!=","belong","notBelong"];break;case"link":case"location":case"file":case"picture":case"video":n=["=","!="]}return{re:-1!=n.indexOf(t),showList:n}},t.o=function(e){return"string"==e||"autoSerialNum"==e||"richText"==e?"string":"date"==e||"dateYear"==e||"dateMonth"==e||"dateTime"==e?"dateTime":"id"==e||"extId"==e||"selectInterface"==e||"selectId"==e||"selectStaff"==e||"relateTable"==e||"relateVirtualTable"==e||"baseData"==e?"id":"integer"==e||"float"==e||"formule"==e||"systemCalc"==e?"num":e},n.d(t,"j",function(){return g}),t.l=function(e){if(!isNaN(e)||isNaN(Date.parse(e)))return!1;if(e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/))return"yyyy-MM-dd";if(e.match(/^(\d{1,4})\-(\d{1,2})\-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/))return"yyyy-MM-dd HH:mm:ss"},t.z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parentId",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",i=[];if(!Array.isArray(e))return i;e.forEach(function(e){delete e[t]});var a={};return e.forEach(function(e){a[e[o]]=e}),e.forEach(function(e){var o=a[e[n]];o?(o[t]||(o[t]=[])).push(e):i.push(e)}),i},t.u=function(e){try{if("object"==i()(JSON.parse(r()(e))))return!0}catch(e){return console.log(e,9879877123),!1}return!1},t.i=function(e){if(null==e)return"";if(e<1)return e+"秒";var t=parseInt(e),n=0,o=0;t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(o=parseInt(n/60),n=parseInt(n%60)));var i="";t&&(i=parseInt(t)+"秒");n>0&&(i=parseInt(n)+"分"+i);o>0&&(i=parseInt(o)+"小时"+i);return i},t.g=function(e){var t=Math.floor(e/1e3),n=Math.floor(t/86400);t%=86400;var o=Math.floor(t/3600),i=t%3600,a=Math.floor(i/60);return(n?n+"天":"")+o+"小时"+a+"分钟"+i%60+"秒"},t.h=function(e){var t=Math.floor(e/1e3),n=Math.floor(t/86400);t%=86400;var o=Math.floor(t/3600),i=t%3600,a=Math.floor(i/60);return(n?n+"天":"")+(o?o+"时":"")+(a?a+"分":"")+i%60+"秒"},n.d(t,"f",function(){return w});var o=n("pFYg"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("lHA8"),s=(n.n(l),n("c/Tr")),c=(n.n(s),n("qBF2")),u=n.n(c),d=n("ifoU"),h=n.n(d),f=n("7+uW"),p=n("YaEn"),m=n("IcnI"),v=n("ZHXk");n.n(v);var b={selectShowType:[{value:"down",label:"下拉"},{value:"tile",label:"平铺"}],selectType:[{value:"custom",label:"自定义"},{value:"dictionaries",label:"使用选项集"}],httpMethods:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],dateType:[{value:"yyyy-MM-dd",label:"年-月-日",format:"yyyy-MM-dd",type:"date",rangeType:"daterange"},{value:"yyyy-MM",label:"年-月",format:"yyyy-MM",type:"month",rangeType:"monthrange"},{value:"yyyy",label:"年",format:"yyyy",type:"year",rangeType:""},{value:"yyyy-MM-dd HH:mm:ss",label:"年-月-日 时:分:秒",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",rangeType:"datetimerange"},{value:"HH:mm:ss",label:"时:分:秒",format:"HH:mm:ss",type:"time"}],taskTypeEnum:[{value:0,label:"流程中"},{value:1,label:"流程结束"},{value:2,label:"已拒绝"},{value:3,label:"流程待完善"},{value:4,label:"异常结束"}],addRobotRulesEnum:[{value:1,label:"自定义"},{value:2,label:"匹配字段"}],startTypeEnum:[{value:1,label:"所有人可填"},{value:2,label:"指定成员可填"}],approvalTypeEnum:[{value:1,label:"或签（一名负责人通过或拒绝即可）"},{value:2,label:"会签（需所有负责人通过）"}],approvalAdminTypeEnum:[{value:1,label:"常规审批"},{value:2,label:"逐级审批"}],symbolEnum:[{value:"=",label:"等于"},{value:"!=",label:"不等于"},{value:"contain",label:"包含"},{value:"notContain",label:"不包含"},{value:"belong",label:"属于"},{value:"notBelong",label:"不属于"},{value:"in",label:"从属"},{value:"notIn",label:"不从属"},{value:">",label:"大于"},{value:">=",label:"大于等于"},{value:"<",label:"小于"},{value:"<=",label:"小于等于"},{value:"dynamic",label:"动态数据"}],equalEnum:[{value:"=",label:"设为"},{value:"+=",label:"增加"},{value:"-=",label:"减少"}],dateDynamicEnum:[{value:"today",label:"今日"},{value:"yestoday",label:"昨日"},{value:"thisWeek",label:"本周"},{value:"lastWeek",label:"上周"},{value:"lastMonth",label:"上月"},{value:"thisYear",label:"今年"},{value:"lastYear",label:"去年"},{value:"last7days",label:"近7日"},{value:"last30Days",label:"近30日"},{value:"last90Days",label:"近90日"}]};var y=["divider","childrenTable","relateVirtualTable","propTable"];var g=[{name:"逻辑函数",list:[{name:"IF",value:"IF()",context:"根据判断条件，返回正确或错误的值"},{name:"IFS",value:"IFS()",context:"检查是否满足一个或多个条件，且返回符合与第一个 TRUE 条件的值"},{name:"AND",value:"AND()",context:"任何一个参数的逻辑值为false，即返回false；只有当所有参数的逻辑值为true，才返回true。"},{name:"OR",value:"OR()",context:"任何一个参数逻辑值为true，即返回true；只有当所有逻辑参数值为false，才返回false。"},{name:"XOR",value:"XOR()",context:"返回所有参数的异或值。"},{name:"NOT",value:"NOT()",context:"对参数逻辑值求反。"},{name:"ISEMPTY",value:"ISEMPTY()",context:"判断字段值是否为空"}]},{name:"文本函数",list:[{name:"CONCATENATE",value:"CONCATENATE()",context:"连接函数，连接函数中的所有字段"},{name:"MID",value:"MID()",context:"返回文本字符串中从指定位置开始的特定数目的字符，该数目由用户指定。"},{name:"LEFT",value:"LEFT()",context:"从字段左数第一个字符开始返回指定个数的字符"},{name:"RIGHT",value:"RIGHT()",context:"从一个字段的右数第一个字符开始返回指定个数的字符"},{name:"LEN",value:"LEN()",context:"返回字段内容或字符串的长度"},{name:"UPPER",value:"UPPER()",context:"把文本中小写的英文字符转换为大写字符"},{name:"LOWER",value:"LOWER()",context:"把文本中大写的英文字符转换为小写字符"},{name:"SEARCH",value:"SEARCH()",context:"在字段2中查找字段1，并返回字段1字符串的起始位置的编号，该编号从字段2字符串的第一个字符算起(设置了数字参数，则从数字的位置开始)。返回0则表示没有查到。"},{name:"TEXT",value:"TEXT()",context:"将日期字段格式化为目标格式或把其他字段转换为文本类型"}]},{name:"数字函数",list:[{name:"AVERAGE",value:"AVERAGE()",context:"计算所有参与运算字段的平均值"},{name:"COUNT",value:"COUNT()",context:"返回所有参与运算字段中值（字符串）的数量"},{name:"COUNTIF",value:"COUNTIF()",context:'COUNTIF(表格问题.年龄, "18")，可得到表格中年龄填的是"18"的数据条数'},{name:"MAX",value:"MAX()",context:"返回所有参与字段中的最大值"},{name:"MIN",value:"MIN()",context:"返回所有参与字段中的最小值"},{name:"ROUND",value:"ROUND()",context:"将数字四舍五入到指定的位数"},{name:"INT",value:"INT()",context:"将数字向下取整"},{name:"MOD",value:"MOD()",context:"返回两数相除的余数"},{name:"PRODUCT",value:"PRODUCT()",context:"返回所有参与字段中数值的乘积"},{name:"SUM",value:"SUM()",context:"返回所有参与字段中数值的总和"},{name:"SUMPRODUCT",value:"SUMPRODUCT()",context:"在给定的数组中，将数组间对应的元素相乘，并返回乘积之和"},{name:"SUMIF",value:"SUMIF()",context:"统计表格中符合条件的数值，并求和"},{name:"NUM",value:"NUM()",context:"返回文本中的数字"},{name:"RMBUPPER",value:"RMBUPPER()",context:"把数字转换为大写的中文金额"},{name:"ROUNDUP",value:"ROUNDUP()",context:"将数字保留指定的位数，最后一位向上取"},{name:"ROUNDDOWN",value:"ROUNDDOWN()",context:"将数字保留指定的位数，最后一位向下取"},{name:"POWER",value:"POWER()",context:"计算数字的n次方"},{name:"LN",value:"LN()",context:"计算指定数字的自然对数"},{name:"SQRT",value:"SQRT()",context:"计算指定数字的平方根"}]},{name:"时间函数",list:[{name:"YEAR",value:"YEAR()",context:"返回日期中的年份"},{name:"MONTH",value:"MONTH()",context:"返回日期中的月份"},{name:"DAY",value:"DAY()",context:"返回日期中的日期"},{name:"HOUR",value:"HOUR()",context:"返回日期中的时间"},{name:"MINUTE",value:"MINUTE()",context:"返回日期中的分钟"},{name:"SECOND",value:"SECOND()",context:"返回日期中的秒"},{name:"CURDATE",value:"CURDATE()",context:"返回当前日期"},{name:"NOW",value:"NOW()",context:"返回当前日期时间"},{name:"DAYS",value:"DAYS()",context:"返回日期字段1与日期字段2的差值，单位为天"},{name:"DATEDELTA",value:"DATEDELTA()",context:"指定日期加/减指定数量的单位时间，并返回目标时间"},{name:"NETWORKDAYS",value:"NETWORKDAYS()",context:"返回两个日期之间的工作日数，工作日不包括周末和任何其他指定假期"},{name:"DATETOTIMESTAMP",value:"DATETOTIMESTAMP()",context:"日期转时间戳函数，将日期转化为13位毫秒级时间戳"},{name:"TIMESTAMPTODATE",value:"TIMESTAMPTODATE()",context:"时间戳转日期函数，时间戳统一转换为[年-月-日 时:分:秒]格式日期字符串"}]}];Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var w=["#2BAAB1","#EDBC6C","#E36159","#144F9F","#EBEBEB","#23BAE5","#7266BA","#4C5F70","#7500ea","#2d46c4","#484848","#ffffff"]},1:function(e,t,n){n("j1ja"),e.exports=n("NHnr")},"11Ps":function(e,t){},"16XU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),l=n("sO9H"),s=n("ULGN"),c=n("e/7n"),u=n.n(c),d={name:"robotEditDialog",components:{blocklyDom:l.default,titleEdit:s.a},data:function(){return{isAsync:!1,enable:!0,isCrossApp:!1,winshow:!1,isDebugRun:!1,isDebugFinish:!1,robotId:null,robotName:"",robotType:null,flowProp:null,flowTableName:null,recordKey:null,webSocket:null,isListeningDebug:!1}},mounted:function(){},methods:{listeningDebug:function(){this.isListeningDebug?this.webSocket.close():this.initWebSocket(),this.isListeningDebug=!this.isListeningDebug},initWebSocket:function(){var e=this;this.webSocket=new u.a(window.SITE_CONFIG.webSocketUrl+"/api/anon/ws/message/debugRobot_"+this.robotId),this.webSocket.onopen=function(){},this.webSocket.onmessage=function(t){console.log(t,998);var n=JSON.parse(t.data),o=void 0;n.robotDoParam&&(o=n.robotDoParam.initParams),"startDebug"==n.type&&(console.log(o,n,88876),e.debugRunWithTriggerData(n.commonEntity,o),e.webSocket.close(),e.isListeningDebug=!1)}},init:function(e,t,n,o,i,a){var r=this;this.winshow=!0,this.robotName=e,this.robotId=t,this.robotType=n,this.flowProp=o,this.flowTableName=i,this.recordKey=a,this.$nextTick(function(){r.$refs.blocklyDom.initById(t)})},cancle:function(){this.isDebugRun=!1,this.winshow=!1,this.$refs.blocklyDom.cancle()},robotSave:function(){var e=this;return r()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isDebugRun=!1,t.next=3,e.$refs.blocklyDom.save();case 3:case"end":return t.stop()}},t,e)}))()},robotSaveToProd:function(){var e=this;return r()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isDebugRun=!1,t.next=3,e.$refs.blocklyDom.saveToProd();case 3:case"end":return t.stop()}},t,e)}))()},robotSaved:function(e){this.$emit("robotSaved",e,this.recordKey)},isAsyncChanged:function(){this.$refs.blocklyDom.setAsync(this.isAsync)},isEnableChanged:function(){this.$refs.blocklyDom.setRobotEnable(this.enable)},isCrossAppChanged:function(){this.$refs.blocklyDom.setCrossApp(this.isCrossApp)},onGetRobotIsAsync:function(e){this.isAsync=e},onGetRobotIsEnable:function(e){this.enable=e},debugRunGo:function(){this.isDebugRun=!0,this.isDebugFinish=!1},onDebugFinish:function(){this.isDebugFinish=!0},debugRun:function(){var e=this;this.isDebugRun?(this.isDebugRun=!1,this.$nextTick(function(){e.$refs.blocklyDom.stopDebug()})):this.$nextTick(function(){e.$refs.blocklyDom.debugRun()})},debugRunWithTriggerData:function(e,t){var n=this;this.isDebugRun?(this.isDebugRun=!1,this.$nextTick(function(){n.$refs.blocklyDom.stopDebug()})):this.$nextTick(function(){n.$refs.blocklyDom.debugRunWithTriggerData(e,t)})},stepRun:function(){this.$refs.blocklyDom.debugNextRun(!1)},runToSelectBlock:function(){this.$refs.blocklyDom.debugNextRun(!0)},refreshDataList:function(){this.$emit("refreshDataList")},editTitle:function(){this.$refs.titleEdit.editTitle()}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.winshow?n("div",[n("vxe-modal",{attrs:{width:"100%",height:"100%",title:"机器人配置"},on:{close:e.cancle},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[e._v("\n          "+e._s(e.robotName)+"\n          "),1!=e.robotType&&2!=e.robotType?n("el-button",{staticStyle:{padding:"0 0 0 10px","font-size":"16px"},attrs:{type:"text",title:"编辑"},on:{click:e.editTitle}},[n("i",{staticClass:"el-icon-edit"})]):e._e(),e._v(" "),n("div",{staticStyle:{"font-size":"12px","margin-left":"20px","margin-top":"5px"}},[e._v("\n            是否启用\n            "),n("el-switch",{on:{change:e.isEnableChanged},model:{value:e.enable,callback:function(t){e.enable=t},expression:"enable"}})],1),e._v(" "),n("div",{staticStyle:{"font-size":"12px","margin-left":"20px","margin-top":"5px"}},[e._v("\n            是否异步执行\n            "),n("el-switch",{on:{change:e.isAsyncChanged},model:{value:e.isAsync,callback:function(t){e.isAsync=t},expression:"isAsync"}})],1),e._v(" "),n("div",{staticClass:"col"}),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:e.isDebugRun?"el-icon-video-pause":"el-icon-caret-right"},on:{click:function(t){return e.debugRun()}}},[e._v("\n            "+e._s(e.isDebugRun?"停止调试":"调试")+"\n          ")]),e._v(" "),e.isDebugRun?n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:e.isDebugFinish},on:{click:function(t){return e.runToSelectBlock()}}},[e._v("运行到选择的块\n          ")]):e._e(),e._v(" "),e.isDebugRun?n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:e.isDebugFinish},on:{click:function(t){return e.stepRun()}}},[e._v("单步执行\n          ")]):e._e(),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.cancle()}}},[e._v("取消")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.robotSave}},[e._v("保存")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:e.isListeningDebug?"primary":"text",disabled:e.isDebugRun},on:{click:function(t){return e.listeningDebug()}}},[e._v(e._s(e.isListeningDebug?"监听调试中":"开始监听调试"))]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"danger"},on:{click:e.robotSaveToProd}},[e._v("发布到生产环境")])],1)]},proxy:!0}],null,!1,1475060706),model:{value:e.winshow,callback:function(t){e.winshow=t},expression:"winshow"}},[e._v(" "),n("blocklyDom",{ref:"blocklyDom",attrs:{needSave:"",robotName:e.robotName,robotType:e.robotType,flowProp:e.flowProp,flowTableName:e.flowTableName},on:{refreshDataList:e.refreshDataList,onDebugFinish:function(t){return e.onDebugFinish()},robotSaved:e.robotSaved,getRobotIsAsync:e.onGetRobotIsAsync,getRobotIsEnable:e.onGetRobotIsEnable,debugRunGo:e.debugRunGo}})],1),e._v(" "),n("titleEdit",{ref:"titleEdit",model:{value:e.robotName,callback:function(t){e.robotName=t},expression:"robotName"}})],1):e._e()},staticRenderFns:[]};var f=n("VU/8")(d,h,!1,function(e){n("mFfN")},"data-v-5b45a15a",null);t.default=f.exports},"1Ens":function(e,t){},"1TYV":function(e,t){},"1m1e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("bKCO"),i=(n("xstH"),n("5aCZ")),a=n("nKSZ"),r=n("jB3U"),l=n("HAP0"),s=n("0xDb"),c={components:{selectStaffDepRole:o.a,Tinymce:i.a,formule:a.a,insertVariable:l.default},props:{formMap:{},variableMap:{}},watch:{variableMap:{handler:function(e,t){var n=this;this.staffExtList=[];var o=function(t){var o=e[t];if(o.varType==r.g.commonData){var i=n.formMap[e[t].tableName].templateJson;i&&i.length&&i.forEach(function(e){"selectStaff"==e.type&&n.staffExtList.push({id:o.variableName+"@"+e.key,label:o.itemName+"-"+e.name})})}};for(var i in e)o(i)},deep:!0,immediate:!0}},data:function(){return{baseData:{receivers:null,subject:"",mailBody:""},fieldList:[],staffExtList:[]}},methods:{addMailBody:function(e){tinymce.activeEditor.execCommand("mceInsertContent",!1,"["+e.value+"]")},addSubject:function(e){this.$refs.formule.handleClick({value:"["+e.value+"]"})},initOption:function(e){var t=this,n=[],o=[],i=function(e){var i=t.variableMap[e];if(i.varType==r.g.commonData||i.varType==r.g.commonListData){var a={name:i.itemName,templateJson:[]};t.formMap[i.tableName].templateJson.forEach(function(e){a.templateJson.push({name:""+e.name}),o.push({value:i.itemName+"-"+e.name,key:i.variableName+"@"+e.key,name:i.itemName+"-"+e.name})}),n.push(a)}else if(i.varType==r.g.blocklyVar){var l={value:i.itemName,key:i.variableName,name:i.itemName};n.push(l),o.push(l)}};for(var a in this.variableMap)i(a);if(this.fieldList=n,this.initFlist=o,e){var l={fieldList:this.initFlist,methodList:[]};this.baseData.mailBody&&(this.baseData.mailBody=this.initMailBody(this.baseData.mailBody)),setTimeout(function(){t.$refs.formule.init(l,t.baseData.subject)},100)}},init:function(e){!e.receivers&&(e.receivers=null),!e.subject&&(e.subject=""),!e.mailBody&&(e.mailBody=""),this.baseData=e},onShowEvent:function(){this.initOption(!0)},getMailBody:function(){var e=this.baseData.mailBody;return e&&this.initFlist.forEach(function(t){var n=new RegExp("\\["+t.name+"\\]","g");e=e.replace(n,"["+t.key+"]")}),e},initMailBody:function(e){return this.initFlist.forEach(function(t){var n=new RegExp("\\["+t.key+"\\]","g");e=e.replace(n,"["+t.name+"]")}),e},save:function(){var e=Object(s.e)(this.baseData),t=this.$refs.formule.getData();e.subject=t.format,e.mailBody=this.getMailBody(),this.$emit("saveNode",e)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("收件人")]),e._v(" "),n("selectStaffDepRole",{staticStyle:{"margin-top":"10px"},attrs:{menuOpt:["userList","deptList","roleList","extList"],otherExtList:e.staffExtList},model:{value:e.baseData.receivers,callback:function(t){e.$set(e.baseData,"receivers",t)},expression:"baseData.receivers"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title",staticStyle:{display:"flex"}},[n("div",{staticClass:"col"},[e._v("邮件主题")]),e._v(" "),n("insertVariable",{attrs:{fieldList:e.fieldList},on:{clickItem:e.addSubject}})],1),e._v(" "),n("formule",{ref:"formule",staticStyle:{height:"100px"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title",staticStyle:{display:"flex"}},[n("div",{staticClass:"col"},[e._v("邮件内容")]),e._v(" "),n("insertVariable",{attrs:{fieldList:e.fieldList},on:{clickItem:e.addMailBody}})],1),e._v(" "),n("tinymce",{ref:"tinyDetailView",attrs:{id:"mailBody",height:300,width:550,toolbar:["fontsizeselect fontselect bold italic underline alignleft aligncenter\n                  alignright outdent indent undo redo","hr bullist numlist link image charmap\t preview anchor pagebreak\n                      fullscreen insertdatetime media table forecolor backcolor removeformat"]},model:{value:e.baseData.mailBody,callback:function(t){e.$set(e.baseData,"mailBody",t)},expression:"baseData.mailBody"}})],1)])},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(e){n("iruS")},"data-v-026e9ba4",null);t.default=d.exports},2:function(e,t){},"2+9l":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAApxJREFUOE+tlD1oFEEUx/8zbLKNsRKLI4JWfhIFRUVBtBQRGzUBQeTYnQ0HKYQIpvJs/ICIReDIvh0OEYREbYKIpSAoRhQ0GL8ahYQUYmVsLtnMyDt2j7nNkVg4cHA7895v3vvv+6/Af15iPV4QBDuFEIc4zlo7rbX+vFZOR+DQ0JDfaDTuAjgJYCuA2QyyG8APAM983788NjbWKMJXAaMo6rfWkhDihTHmZldX10ytVvvDiZVKZcPy8nKflHLEWntMCKHiOJ50oW1ApRS39hrAeSJ6lAcqpTbxfyL65eydA/AQwGEims73W8BqteotLCzMG2NOaa3fcYBSageAKwDKWULdWns7SZJv/BwEwX4p5dNSqdRbrVZT3msBlVKjAHqIKMpvC8NwRAhxwxhzgveklM8BDBPRHafSGMAiEQ0XgXNSyoHx8fGXTjC3NEtE17OKr1lrjydJ0ryA1+Dg4FFjzAQRbWkBgyBgoT+kabqxXq8vdhoLpVSuWTW/gOPK5XKP53m/jTF7tdYzzZaVUkHWCmu2ajkwciVxOvkCYJSIdBMYhuElIQRrs6cTMAxD1g5uq26cUuqjtXY0SZJ7TSC7QUr5yfO8nnzm3IS1gDybaZouGmN2sYvct/zdWnshSZJXxSqzlnkOW7PpTMIRIcQDItpWfMs1IcSWOI5PF4FhGO7LWn5fPIui6Im1do6IKm3AzL8/WYFiJawRBxc1zirXvu9vzn3dZr3MxxPGmAO5WxgURdHZlZUVaK0f5xVmLnkrhBhw/bzq45D5eQrAlJTy/tLS0kw+mzxz3d3dfcaYiwDO8M/1cVvLrjaZr28B6AfQC+Brdr4dwDyAyVKpdDX3r5v7Lx9YdtFBTjLGvGE3dJrVfG9d4FrJnc7+AoZDMCSwIFI9AAAAAElFTkSuQmCC"},"27uN":function(e,t){},"2Cd2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-dangdifill",use:"icon-dangdifill-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-dangdifill"><defs><style type="text/css"></style></defs><path d="M814.898635 729.554898c-52.181453-15.880689-113.718995-27.296693-179.771363-33.619702 83.378989-122.791627 144.990209-275.473005 144.990209-379.626133 0-144.027278-119.42802-260.733303-266.739087-260.733303-147.317207 0-266.739087 116.706025-266.739087 260.733303 0 102.385878 61.574381 255.895111 145.227616 379.482871-66.636676 6.290263-128.727827 17.752316-181.310416 33.752732-60.22771 18.326391-132.022872 49.885154-132.022872 96.160083 0 89.684602 218.426755 136.608308 434.19496 136.608308 112.413256 0 218.348983-12.394285 298.29478-34.899858 88.904843-25.027 135.898133-60.19701 135.898133-101.707426C946.922531 779.442098 875.128391 747.883335 814.898635 729.554898zM514.324952 181.990914c60.772109 0 110.043279 49.269124 110.043279 110.063745 0 60.753689-49.27117 110.034069-110.043279 110.034069-60.784388 0-110.054535-49.28038-110.054535-110.034069C404.269393 231.260038 453.540563 181.990914 514.324952 181.990914zM883.279025 854.435093c-18.848277 12.544711-47.583738 24.460088-83.099626 34.458813-76.514651 21.538549-178.599677 33.401738-287.450804 33.401738s-210.9382-11.863189-287.451828-33.401738c-35.515888-9.998725-64.250326-21.914102-83.099626-34.458813-15.234983-10.140964-23.626094-20.343327-23.626094-28.729322 0-5.562692 17.591657-31.6877 103.654778-57.875129 56.150858-17.086144 123.93773-28.755927 196.708104-34.169217 24.391527 32.31601 50.161447 61.676711 76.472696 86.332251 4.39203 4.923126 10.781554 8.099469 17.99177 8.099469 7.100722 0 13.407358-3.080152 17.799388-7.869225 26.40744-24.667819 52.311413-54.06229 76.838016-86.449931 72.206532 5.462408 139.457192 17.093307 195.23352 34.06791 86.064145 26.191522 103.655801 52.306296 103.655801 57.865919C906.904095 834.091766 898.514008 844.294129 883.279025 854.435093z" p-id="1861" /></symbol>'});r.a.add(l);t.default=l},"2bBW":function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__=__webpack_require__("BO1k"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__=__webpack_require__("woOf"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_4__views_modules_dataProcess_openRobotDialog_openRobotDialog__=__webpack_require__("e4/+"),__WEBPACK_IMPORTED_MODULE_5__utils__=__webpack_require__("0xDb"),__WEBPACK_IMPORTED_MODULE_6__components_gridLayout_chart_part_vue__=__webpack_require__("Xejj"),__WEBPACK_IMPORTED_MODULE_7__components_gridLayout_table_part_vue__=__webpack_require__("vL2Z"),__WEBPACK_IMPORTED_MODULE_8__components_gridLayout_calendar_part_vue__=__webpack_require__("fFeC"),__WEBPACK_IMPORTED_MODULE_9__components_gridLayout_star_part_vue__=__webpack_require__("ds3v"),__WEBPACK_IMPORTED_MODULE_10__components_gridLayout_richText_part_vue__=__webpack_require__("0gdP"),__WEBPACK_IMPORTED_MODULE_11__components_gridLayout_numCard_part_vue__=__webpack_require__("b2j6"),__WEBPACK_IMPORTED_MODULE_12__components_gridLayout_numContrastCard_part_vue__=__webpack_require__("x0LR"),__WEBPACK_IMPORTED_MODULE_13__components_gridLayout_bi_part_vue__=__webpack_require__("z5rG"),__WEBPACK_IMPORTED_MODULE_14__components_gridLayout_timeTree_vue__=__webpack_require__("3TwM"),__WEBPACK_IMPORTED_MODULE_15__components_gridLayout_timeController_vue__=__webpack_require__("sORg"),__WEBPACK_IMPORTED_MODULE_16__components_gridLayout_userController_vue__=__webpack_require__("m3Uq"),__WEBPACK_IMPORTED_MODULE_17__components_gridLayout_tableController_vue__=__webpack_require__("GoFO"),__WEBPACK_IMPORTED_MODULE_18__components_gridLayout_subGridLayout_vue__=__webpack_require__("yy7n"),__WEBPACK_IMPORTED_MODULE_19__components_gridLayout_textPart_vue__=__webpack_require__("Ojkl"),__WEBPACK_IMPORTED_MODULE_20__components_gridLayout_tableDataFilter_vue__=__webpack_require__("8GzZ"),__WEBPACK_IMPORTED_MODULE_21__components_gridLayout_tableDataDetail_vue__=__webpack_require__("Gr+4"),__WEBPACK_IMPORTED_MODULE_22__components_gridLayout_tableDataForm_vue__=__webpack_require__("CLq8"),__WEBPACK_IMPORTED_MODULE_23__components_gridLayout_data_table_part_vue__=__webpack_require__("aE7v"),__WEBPACK_IMPORTED_MODULE_24__components_gridLayout_cardLink_vue__=__webpack_require__("vzP8"),__WEBPACK_IMPORTED_MODULE_25__components_gridLayout_imagePart_vue__=__webpack_require__("LWUX"),__WEBPACK_IMPORTED_MODULE_26__components_gridLayout_customView_vue__=__webpack_require__("Ovkn"),__WEBPACK_IMPORTED_MODULE_27_vue_grid_layout__=__webpack_require__("SFAN"),__WEBPACK_IMPORTED_MODULE_27_vue_grid_layout___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_27_vue_grid_layout__),__WEBPACK_IMPORTED_MODULE_28__star_setting_vue__=__webpack_require__("W5xu"),__WEBPACK_IMPORTED_MODULE_29__views_modules_common_common_relatetable_dialog__=__webpack_require__("Lmrr"),__WEBPACK_IMPORTED_MODULE_30__views_modules_common_common_basedata_table_dialog__=__webpack_require__("H/gZ"),__WEBPACK_IMPORTED_MODULE_31__components_extForm_tableListWin_vue__=__webpack_require__("uM2P");__webpack_exports__.a={name:"commonLayout",components:{GridLayout:__WEBPACK_IMPORTED_MODULE_27_vue_grid_layout___default.a.GridLayout,GridItem:__WEBPACK_IMPORTED_MODULE_27_vue_grid_layout___default.a.GridItem,ChartPart:__WEBPACK_IMPORTED_MODULE_6__components_gridLayout_chart_part_vue__.a,StarPart:__WEBPACK_IMPORTED_MODULE_9__components_gridLayout_star_part_vue__.a,RichTextPart:__WEBPACK_IMPORTED_MODULE_10__components_gridLayout_richText_part_vue__.a,CalendarPart:__WEBPACK_IMPORTED_MODULE_8__components_gridLayout_calendar_part_vue__.a,TablePart:__WEBPACK_IMPORTED_MODULE_7__components_gridLayout_table_part_vue__.a,timeTree:__WEBPACK_IMPORTED_MODULE_14__components_gridLayout_timeTree_vue__.a,timeController:__WEBPACK_IMPORTED_MODULE_15__components_gridLayout_timeController_vue__.a,userController:__WEBPACK_IMPORTED_MODULE_16__components_gridLayout_userController_vue__.a,subGridLayout:__WEBPACK_IMPORTED_MODULE_18__components_gridLayout_subGridLayout_vue__.a,starSetting:__WEBPACK_IMPORTED_MODULE_28__star_setting_vue__.a,textPart:__WEBPACK_IMPORTED_MODULE_19__components_gridLayout_textPart_vue__.a,tableDataFilter:__WEBPACK_IMPORTED_MODULE_20__components_gridLayout_tableDataFilter_vue__.a,tableDataForm:__WEBPACK_IMPORTED_MODULE_22__components_gridLayout_tableDataForm_vue__.a,tableDataDetail:__WEBPACK_IMPORTED_MODULE_21__components_gridLayout_tableDataDetail_vue__.a,dataTablePart:__WEBPACK_IMPORTED_MODULE_23__components_gridLayout_data_table_part_vue__.a,cardLink:__WEBPACK_IMPORTED_MODULE_24__components_gridLayout_cardLink_vue__.a,imagePart:__WEBPACK_IMPORTED_MODULE_25__components_gridLayout_imagePart_vue__.a,customView:__WEBPACK_IMPORTED_MODULE_26__components_gridLayout_customView_vue__.a,CommonRelatetableDialog:__WEBPACK_IMPORTED_MODULE_29__views_modules_common_common_relatetable_dialog__.default,CommonBasedataTableDialog:__WEBPACK_IMPORTED_MODULE_30__views_modules_common_common_basedata_table_dialog__.default,tableListWin:__WEBPACK_IMPORTED_MODULE_31__components_extForm_tableListWin_vue__.a,numCard:__WEBPACK_IMPORTED_MODULE_11__components_gridLayout_numCard_part_vue__.a,numContrastCard:__WEBPACK_IMPORTED_MODULE_12__components_gridLayout_numContrastCard_part_vue__.a,bi:__WEBPACK_IMPORTED_MODULE_13__components_gridLayout_bi_part_vue__.a},props:{initParamsProp:{},list:{type:Array,default:[]},isEdit:{default:!1},title:{default:"以下为模拟数据 仅作首页设计参考"},idProp:{}},data:function(){return{fullscreenImageSrc:"/static/img/icon/fullscreen.png",fullscreenState:!1,dialogVisible:!1,dialogDashboardItems:[],dashboardItems:[],show:!0,layout:[],activeBox:null,themeColor:localStorage.getItem("theme"),selectWinRef:null,CommonListMap:{},CommonInfoMap:{},starId:"",commonRelateTableDialogVisible:!1,baseDataTableViewVisible:!1,tableListVisible:!1,ctrData:{},dialogDashboardInitParams:{}}},mounted:function(){var e=this;this.idProp&&this.getDashboardDefine(this.idProp),this.$_resizeHandler=function(){console.log("窗口大小发生变化"),e.list.forEach(function(t){"charts"!=t.itemType&&"customView"!=t.itemType||(console.log(e.$refs[t.id],99998),e.$refs[t.id][0].updataEcharts())})},window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.$_resizeHandler)},methods:{toggleFullscreen:function(){console.log(1111111);var e=document.getElementById("chart-container");this.fullscreenState?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this.fullscreenImageSrc="/static/img/icon/fullscreen.png"):(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreenImageSrc="/static/img/icon/noFullscreen.png"),this.fullscreenState=!this.fullscreenState},dialogClose:function(){this.dialogVisible=!1},getDashboardDefine:function(e){var t=this;this.$nextTick(function(){t.$http({url:t.$http.adornUrl("/common/commondashboarddefine/info/"+e),method:"get"}).then(function(e){var n=e.data;n&&0===n.code&&(t.list=JSON.parse(n.commonDashboardDefine.define),t.homeInit())})})},viewDialogDashboard:function(e,t){var n=this;this.dialogVisible=!0,this.dialogDashboardInitParams=t,console.log(this.initParams,this.dialogDashboardInitParams,11111),this.$nextTick(function(){n.$http({url:n.$http.adornUrl("/common/commondashboarddefine/info/"+e),method:"get"}).then(function(e){var t=e.data;t&&0===t.code&&(n.dialogDashboardItems=JSON.parse(t.commonDashboardDefine.define),n.$nextTick(function(){n.$refs.dialogDashBoard.homeInit()}))})})},onTableDataFilter:function(e){this.$emit("onTableDataFilter",e)},timeCtrChanged:function(e,t){var n=this;console.log(e,"时间控件变化"),t&&t.forEach(function(t){null==n.ctrData[t]&&(n.ctrData[t]={}),n.ctrData[t].timeCtrStart=e[0],n.ctrData[t].timeCtrEnd=e[1],console.log(t,n.$refs,9980),n.$refs[t]&&n.$refs[t][0]&&n.$refs[t][0].onCtrDataChange(n.ctrData[t])})},userCtrChanged:function(e,t){var n=this;t&&t.forEach(function(t){if(null==n.ctrData[t]&&(n.ctrData[t]={}),Array.isArray(e)){var o="";e.forEach(function(e){o+=e.userId+","}),o.length>0&&(o=o.substr(0,o.length-1)),n.ctrData[t].userCtrListIds=o}else n.ctrData[t].userCtrId=e.userCtrId,n.ctrData[t].userCtrName=e.userCtrName;n.$refs[t][0].onCtrDataChange(n.ctrData[t])})},tableCtrChanged:function(){},robotDo:function(e){var t=this;!this.isEdit&&e.robotInfo&&Object(__WEBPACK_IMPORTED_MODULE_4__views_modules_dataProcess_openRobotDialog_openRobotDialog__.b)(this,{customBtnKey:e.robotInfo},function(e){t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}})})},goScrollBottom:function(){this.$refs.scrollBox.scrollTop=this.$refs.scrollBox.scrollHeight},getDataList:function(){this.$refs[this.selectWinRef][0].getDataList()},goDate:function(e,t){var n=this;this.selectWinRef=t,this.tableListVisible=!0,this.$nextTick(function(){n.$refs.tableListWin.init(e)})},gotoBaseDataTableForFilter:function(e,t){var n=this;console.log(e,t),this.selectWinRef=t,this.baseDataTableViewVisible=!0,this.$nextTick(function(){n.$refs.baseDataTableDialog.initForFilter(e.tableName,e.key,e.selectedId)})},updateBaseDataFilterData:function(e,t){this.$refs[this.selectWinRef][0].updateBaseDataFilterData(e,t)},showChooseRelateTableForFilter:function showChooseRelateTableForFilter(d,key){var _this9=this;console.log(d,key),this.selectWinRef=key,this.commonRelateTableDialogVisible=!0;var extId=eval(d.relateTableExtId);this.$nextTick(function(){_this9.$refs.commonRelateTableDialog.initForFilter(d.tableName,d.key,d.selectedId,extId)})},updateRelateFilterData:function(e,t,n){this.$refs[this.selectWinRef][0].updateRelateFilterData(e,t,n)},refreshStar:function(){this.$refs[this.starId][0].init()},starEdit:function(e,t,n,o){this.starId=o,this.$refs.starSetting.init(e,t,n)},refreshChart:function(e){this.CommonListMap[e]=null,this.homeInit()},homeInit:function(){var e=this;return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function t(){var n,o,i;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.list.length){t.next=10;break}n=Object(__WEBPACK_IMPORTED_MODULE_5__utils__.e)(e.list),o=__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function t(o){var i,a,r,l;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("charts"!=(i=n[o]).itemType||!i.tableName){t.next=16;break}if(!e.CommonListMap[i.tableName]){t.next=6;break}t.next=8;break;case 6:return t.next=8,e.getCommonList(i.tableName).then(function(t){e.CommonListMap[i.tableName]=t});case 8:if(!e.CommonInfoMap[i.tableName]){t.next=12;break}t.next=14;break;case 12:return t.next=14,e.getCommonInfo(i.tableName).then(function(t){e.CommonInfoMap[i.tableName]=t});case 14:a=e.CommonInfoMap[i.tableName],r=e.CommonListMap[i.tableName],l=e.getChartData(r,i,a),i.chartData=l||null;case 16:case"end":return t.stop()}},t,e)}),i=0;case 4:if(!(i<n.length)){t.next=9;break}return t.delegateYield(o(i),"t0",6);case 6:i++,t.next=4;break;case 9:e.$emit("change",n);case 10:case"end":return t.stop()}},t,e)}))()},getCommonList:function(e){var t=this;return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function n(){var o;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=[],n.next=3,t.$http({url:t.$http.adornUrl("/common/common/list"),method:"post",headers:{tableName:e},data:t.$http.adornParams({page:1,limit:9999,tableName:e})}).then(function(t){var n=t.data;if(!n||0!==n.code||!n.page)return!1;(o=n.page.list).forEach(function(t){t.tableName=e,t.baseTableContent=JSON.parse(t.baseTableContent),t.extContent=JSON.parse(t.extContent),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()(t,t.baseTableContent,t.extContent)})});case 3:return n.abrupt("return",o);case 4:case"end":return n.stop()}},n,t)}))()},getCommonInfo:function(e){var t=this;return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function n(){var o;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={},n.next=3,t.$http({url:t.$http.adornUrl("/common/commondefine/infoByTable/"+e),method:"get",params:t.$http.adornParams()}).then(function(e){var t=e.data;t&&0===t.code&&t.assetExt.templateJson.forEach(function(e){o[e.key]=e.name})});case 3:return n.abrupt("return",o);case 4:case"end":return n.stop()}},n,t)}))()},init:function(e,t){var n=this;return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function e(){var o;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.tableName=t,o=[],e.next=4,n.getCommonList(t).then(function(e){o=e});case 4:return e.next=6,n.$http({url:n.$http.adornUrl("/common/commondefine/infoByTable/"+n.tableName),method:"get",params:n.$http.adornParams()}).then(function(e){var t=e.data;if(t&&0===t.code){var i={};t.assetExt.templateJson.forEach(function(e){i[e.key]=e.name});var a=JSON.parse(t.assetExt.chart);a.forEach(function(e){e.itemType="charts";var t=n.getChartData(o,e,i);e.chartData=t||null}),n.$emit("change",a)}});case 6:case"end":return e.stop()}},e,n)}))()},getChartData:function(e,t,n){if("gant"==t.seriesType){var o=[],i=[],a=[];return e.forEach(function(e){o.push({value:new Date(e[t.startTime])}),i.push({value:new Date(e[t.endTime]),detailInfo:e}),a.push(e[t.taskName])}),{startTime:o,endTime:i,taskName:a}}if("pie"==t.seriesType){var r=[];return e.forEach(function(e){r.push({value:e[t.Y],name:e[t.X]})}),r}var l={},s=[];return t.Y.forEach(function(e){l[n[e]]=[]}),e.forEach(function(e){s.push(e[t.X]),t.Y.forEach(function(t){l[n[t]].push(e[t]?e[t]:0)})}),{x:s,y:l}},resizedEvent:function(e){this.$refs["chart"+e]&&this.$refs["chart"+e][0].updataEcharts()},updataEcharts:function(){var e=this;setTimeout(function(){var t=!0,n=!1,o=void 0;try{for(var i,a=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(e.list);!(t=(i=a.next()).done);t=!0){var r=i.value;e.resizedEvent(r.i)}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}},200)},handleDelete:function(e,t){this.$emit("delete",e,t),this.$emit("select",null)},active:function(e){this.isEdit&&(this.$emit("select",e),this.activeBox=e)}}}},3:function(e,t){},"3IMy":function(e,t){},"3TwM":function(e,t,n){"use strict";var o={components:{titeView:n("lMLl").a},props:{itemOption:{},isEdit:{}},data:function(){return{num:null,reverse:!0,activities:[{content:"活动按期开始",time:"2018-04-15"},{content:"通过审核",time:"2018-04-13"},{content:"创建成功",time:"2018-04-11"}]}},mounted:function(){this.getData()},methods:{getData:function(e){var t=this;this.activities=[],this.itemOption.robotInfo&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.robotInfo),method:"get",params:e}).then(function(e){var n=e.data;0==n.code&&n.data&&(t.activities=JSON.parse(n.data),t.activities.sort(function(e,t){return new Date(t.time)-new Date(e.time)}))})},onCtrDataChange:function(e){this.getData(e)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("titeView",{attrs:{itemOption:e.itemOption},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"block"},[e.activities.length>0?n("el-timeline",e._l(e.activities,function(t,o){return n("el-timeline-item",{key:o,attrs:{timestamp:t.time,placement:"top"}},[e._v("\n            "+e._s(t.content)+"\n            ")])}),1):n("span",{staticStyle:{"margin-left":"18px"}},[e._v(" 暂无数据")])],1)]},proxy:!0}])})],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("U0sc")},"data-v-4bbb84b8",null);t.a=a.exports},"3hj+":function(e,t){},4:function(e,t){},"4/hK":function(e,t){},"42jU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("bKCO"),i=n("0xDb"),a={name:"getUserList",data:function(){return{baseData:null}},components:{selectStaffDepRole:o.a},methods:{init:function(e){this.baseData=e},save:function(){var e=Object(i.e)(this.baseData);this.$emit("saveNode",e)}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",{staticStyle:{margin:"20px","font-size":"14px"}},[e._v("选择用户：")]),e._v(" "),n("selectStaffDepRole",{staticStyle:{"margin-top":"10px"},attrs:{menuOpt:["userList","deptList","roleList","dynamicList"]},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}})],1)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("SdjN")},"data-v-134dc826",null);t.default=l.exports},"4dYU":function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign__=__webpack_require__("woOf"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_4__common_add_or_update__=__webpack_require__("7Wi0"),__WEBPACK_IMPORTED_MODULE_5__common_filelist__=__webpack_require__("Ozts"),__WEBPACK_IMPORTED_MODULE_6__common_batch_upload_file__=__webpack_require__("9lU6"),__WEBPACK_IMPORTED_MODULE_7__xkeshi_vue_qrcode__=__webpack_require__("8Vd+"),__WEBPACK_IMPORTED_MODULE_8__common_dialog__=__webpack_require__("iFqQ"),__WEBPACK_IMPORTED_MODULE_9__common_relatetable_dialog__=__webpack_require__("Lmrr"),__WEBPACK_IMPORTED_MODULE_10__common_relatetable_view_dialog__=__webpack_require__("eBok"),__WEBPACK_IMPORTED_MODULE_11__common_proptable_view_dialog__=__webpack_require__("JTg7"),__WEBPACK_IMPORTED_MODULE_12__common_basedata_table_dialog__=__webpack_require__("H/gZ"),__WEBPACK_IMPORTED_MODULE_13__common_richtext_dialog__=__webpack_require__("+TJN"),__WEBPACK_IMPORTED_MODULE_14__common_fixdata_dialog__=__webpack_require__("VPP1"),__WEBPACK_IMPORTED_MODULE_15__common_excel__=__webpack_require__("BN9O"),__WEBPACK_IMPORTED_MODULE_16__common_define_index_vue__=__webpack_require__("dA9+"),__WEBPACK_IMPORTED_MODULE_17__utils__=__webpack_require__("0xDb"),__WEBPACK_IMPORTED_MODULE_18__common_view_sql_index__=__webpack_require__("O6G6"),__WEBPACK_IMPORTED_MODULE_19__common_chart_chart_view_vue__=__webpack_require__("nqSO"),__WEBPACK_IMPORTED_MODULE_20__utils_validate__=__webpack_require__("E4LH"),__WEBPACK_IMPORTED_MODULE_21__chart_part__=__webpack_require__("S5gw"),__WEBPACK_IMPORTED_MODULE_22__components_baseTimePick__=__webpack_require__("G+jI"),__WEBPACK_IMPORTED_MODULE_23__components_extForm_tableSearch__=__webpack_require__("HEOI"),__WEBPACK_IMPORTED_MODULE_24__components_extForm_filter_js__=__webpack_require__("w4zF"),__WEBPACK_IMPORTED_MODULE_25__common_view_cellType__=__webpack_require__("CGWn"),__WEBPACK_IMPORTED_MODULE_26__components_extForm_location__=__webpack_require__("PYVH"),__WEBPACK_IMPORTED_MODULE_27__components_extForm_relateTableSelectData__=__webpack_require__("jtbG"),__WEBPACK_IMPORTED_MODULE_28__common_view_leftview_index_vue__=__webpack_require__("LZCK"),__WEBPACK_IMPORTED_MODULE_29__common_update_history__=__webpack_require__("Xojz"),__WEBPACK_IMPORTED_MODULE_30__components_custom_custom_buttom_vue__=__webpack_require__("YBOz"),__WEBPACK_IMPORTED_MODULE_31__components_custom_customButtomDo_js__=__webpack_require__("ksld"),__WEBPACK_IMPORTED_MODULE_32__common_print_qrcode_vue__=__webpack_require__("xVjb"),__WEBPACK_IMPORTED_MODULE_33__components_flow_selectStaff__=__webpack_require__("xstH"),__WEBPACK_IMPORTED_MODULE_34_xlsx__=__webpack_require__("uXZL"),__WEBPACK_IMPORTED_MODULE_34_xlsx___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_34_xlsx__),PAGE_SIZE=20;__webpack_exports__.a={computed:{commonSysConfig:{get:function(){return this.$store.state.common.commonSysConfig}},userInfo:{get:function(){return this.$store.state.user}},isEdit:{get:function(){return this.$store.state.common.isEdit},set:function(e){this.$store.commit("common/changeEditMode",e)}}},provide:function(){return{isOpen:this.isOpen,addOrUpdateHandle:this.addOrUpdateHandle}},data:function(){return{tableFontSize:12,tableShowOverFlow:!0,noPublicTable:!1,dashBoardItems:[],openHistoryStyle:!0,cacheEditState:null,cacheTableColumn:null,historyDataDate:null,historyDataDatePickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}},{text:"一月前",onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1),e.$emit("pick",t)}}]},operatePopoverShow:!1,viewUrl:window.origin,shareRow:null,shareVisible:!1,isOpen:!1,showQueryInfo:!1,taskTypeEnum:Object(__WEBPACK_IMPORTED_MODULE_17__utils__.m)("taskTypeEnum"),processCount:{myHaveDoneProcessCount:0,myStartProcessCount:0,myTodoProcessCount:0},process:{processEnable:!1},processCondition:{type:"",taskType:""},isSqlTable:!1,sqlTableOption:{id:""},localTableDataModule:!1,footerData:[],showChart:!1,relateTaleFilter:{},baseTableFilter:{},upImageRow:"",upImageRowProprety:"",parentTableColumns:[],parentTableDatas:[],parentTableFullDatas:[],excelEditVisible:!1,defineAddOrUpdateVisible:!1,commonPrintQrcodeVisible:!1,thisPoint:this,tableData:[],selectRecords:[],tableColumn:[],selectRow:{},selectedRows:[],selectRowId:null,insertedNewRow:{},insertedNewRowState:!1,customView:{},customDialogView:{},customDialogViewVisible:{},apiUrl:null,saveApiUrl:null,updateApiUrl:null,deleteApiUrl:null,excelFileList:[],exceldialogVisible:!1,baseUrl:window.SITE_CONFIG.baseUrl,token:{token:this.$cookie?this.$cookie.get("token"):null},timeValue:"",mohthPickerOptions:{shortcuts:[{text:"本月",onClick:function(e){e.$emit("pick",[new Date,new Date])}},{text:"今年至今",onClick:function(e){var t=new Date,n=new Date((new Date).getFullYear(),0);e.$emit("pick",[n,t])}},{text:"最近六个月",onClick:function(e){var t=new Date,n=new Date;n.setMonth(n.getMonth()-6),e.$emit("pick",[n,t])}}]},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},dialogVisible:!1,dialogImageUrl:"",tableDefine:null,operateCustomBtn:[],toolsCustomBtn:[],extInfo:"",extInfoId:"",uniqueCode:"",tableProp:{openOpt:{privateExts:[],openName:"",canSearch:!1,canEdit:!1,canDelete:!1,canInsert:!1}},tableChart:{},tableName:this.tableNameProp,extId:this.extIdProp,extKey:this.extKeyProp,queryIds:null,queryInfo:[],fuzzySearch:null,dataForm:{creater:"",createdAt:"",updatedAt:""},tableKeyNum:0,formKey:0,apiData:{},pageData:{},dataList:[],parentData:{},pageIndex:1,pageSize:PAGE_SIZE,totalPage:0,pageExt:"",dataListLoading:!1,dataListSelections:[],addOrUpdateVisible:!0,fileListVisible:!1,batchUploadFileVisible:!1,commonDialogVisible:!1,commonRelateTableDialogVisible:!1,commonRelateTableViewVisible:!1,commonPropTableViewVisible:!1,baseDataTableViewVisible:!1,richtextViewVisible:!1,fixdataViewVisible:!1,updateHistoryVisible:!1,fixedData:{creater:{show:!1,query:!1},createdAt:{show:!1,query:!1},updatedAt:{show:!1,query:!1}},staffSelectItemMap:{},staffSelectItem:[],oldRowData:null,activedRowData:null,optionMap:{},interfaceMap:{},isNowApp:!1,dataFilterInfo:null,isMounted:!0,newDataForm:{}}},components:{CommonDialog:__WEBPACK_IMPORTED_MODULE_8__common_dialog__.default,CommonRelatetableDialog:__WEBPACK_IMPORTED_MODULE_9__common_relatetable_dialog__.default,CommonRelatetableViewDialog:__WEBPACK_IMPORTED_MODULE_10__common_relatetable_view_dialog__.default,CommonProptableViewDialog:__WEBPACK_IMPORTED_MODULE_11__common_proptable_view_dialog__.default,CommonBasedataTableDialog:__WEBPACK_IMPORTED_MODULE_12__common_basedata_table_dialog__.default,CommonRichtextDialog:__WEBPACK_IMPORTED_MODULE_13__common_richtext_dialog__.default,CommonFixdataDialog:__WEBPACK_IMPORTED_MODULE_14__common_fixdata_dialog__.default,CommonExcel:__WEBPACK_IMPORTED_MODULE_15__common_excel__.default,DefineAddOrUpdate:__WEBPACK_IMPORTED_MODULE_16__common_define_index_vue__.default,AddOrUpdate:__WEBPACK_IMPORTED_MODULE_4__common_add_or_update__.default,FileList:__WEBPACK_IMPORTED_MODULE_5__common_filelist__.default,BatchUploadFile:__WEBPACK_IMPORTED_MODULE_6__common_batch_upload_file__.default,qrcode:__WEBPACK_IMPORTED_MODULE_7__xkeshi_vue_qrcode__.a,ChartPart:__WEBPACK_IMPORTED_MODULE_21__chart_part__.default,CommonViewSql:__WEBPACK_IMPORTED_MODULE_18__common_view_sql_index__.default,chartView:__WEBPACK_IMPORTED_MODULE_19__common_chart_chart_view_vue__.default,baseTimePick:__WEBPACK_IMPORTED_MODULE_22__components_baseTimePick__.a,tableSearch:__WEBPACK_IMPORTED_MODULE_23__components_extForm_tableSearch__.a,location:__WEBPACK_IMPORTED_MODULE_26__components_extForm_location__.a,leftView:__WEBPACK_IMPORTED_MODULE_28__common_view_leftview_index_vue__.default,relateTableSelectData:__WEBPACK_IMPORTED_MODULE_27__components_extForm_relateTableSelectData__.a,CommonUpdateHistory:__WEBPACK_IMPORTED_MODULE_29__common_update_history__.default,customButtom:__WEBPACK_IMPORTED_MODULE_30__components_custom_custom_buttom_vue__.a,commonPrintQrcode:__WEBPACK_IMPORTED_MODULE_32__common_print_qrcode_vue__.default,selectStaff:__WEBPACK_IMPORTED_MODULE_33__components_flow_selectStaff__.a},props:{isViewProp:{type:Boolean,default:!1,require:!1},noDetail:{type:Boolean,default:!1,require:!1},noSearchBar:{type:Boolean,default:!1,require:!1},noHeadBar:{type:Boolean,default:!1,require:!1},noHeadToolBar:{type:Boolean,default:!1,require:!1},noHeadOperateBar:{type:Boolean,default:!1,require:!1},noOption:{type:Boolean,default:!1,require:!1},noPageInfo:{type:Boolean,default:!1,require:!1},dontShowCustomViewProp:{require:!1},localTableDataProp:{require:!1},isChildView:{require:!1},isHidenTable:{require:!1},tableConfig:{require:!1,default:function(){return{}}},tableNameProp:{require:!1},extIdProp:{require:!1},extKeyProp:{require:!1},radioChoose:{require:!1},selectedIdProp:{require:!1},queryIdsProp:{require:!1},dataFilterInfoProp:{}},watch:{localTableDataProp:function(){this.tableData=this.localTableDataProp},tableNameProp:{handler:function(e){e&&(this.tableName=this.tableNameProp,this.getExtInfo())},immediate:!0,deep:!0},tableData:{handler:function(e){if(null!=this.$refs.xGrid&&this.$refs.xGrid.getActiveRecord()){var t=this.$refs.xGrid.getActiveRecord().row;this.calcRow(t)}},deep:!0},queryInfo:{handler:function(e){},deep:!0}},methods:{getUploadUrl:function(){return this.extId&&"undefined"!=this.extId?this.baseUrl+"/common/common/importExcel?extId="+this.extId+"&extKey="+this.extKey:this.baseUrl+"/common/common/importExcel"},getSelectLabel:function(e,t){var n=void 0;return this.tableDefine.templateJson.forEach(function(o){o.key!=t||n||o.selectItem.forEach(function(t){t.value!=e||(n=t.label)})}),n},getTableDefine:function(){return this.tableDefine},changeFontSize:function(e){this.tableFontSize=e,this.tableFontSize>24?this.tableShowOverFlow=!1:this.tableShowOverFlow=!0},cellStyle:function(e,t){return{fontSize:this.tableFontSize+"px",lineHeight:1.2*this.tableFontSize+"px"}},rowStyle:function rowStyle(rowData,rowIndex){var row=rowData.row;return this.tableProp.rowBgColorCondition&&eval(this.tableProp.rowBgColorConditionContent)?{backgroundColor:this.tableProp.rowBgColor,color:"#ffffff"}:{}},exportImportExcel:function(){this.tableDefine.api&&""!=this.tableDefine.api||this.tableDefine.tablePropJson.sqlTable?this.exportExcelFrontEnd():this.exceldialogVisible=!0},getCellValue:function(e,t){var n=this,o="";switch(e.type){case"baseData":o=t.baseTableContent[e.key];break;case"selectStaff":var i="";Array.isArray(t[e.key])?(t[e.key].forEach(function(e){n.staffSelectItem.forEach(function(t){t.userId==e&&(i+=t.realname+",")})}),i.length>0&&(i=i.substring(0,i.length-1))):this.staffSelectItem.forEach(function(n){n.userId==t[e.key]&&(i=n.realname)}),o=i;break;case"multipleRelateTable":o=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(t[e.key]);break;case"multipleSelect":var a="";t[e.key]&&t[e.key].length>0&&t[e.key].forEach(function(e){a+=e+","}),a&&a.length>0&&(a=a.substr(0,a.length-1)),o=a;break;case"relateTable":console.log(t,e.column,99981),o=this.getRelateTableText(t,e.column);break;case"integer":case"float":case"formule":case"systemCalc":case"dateTime":case"dateYear":case"dateMonth":case"string":case"autoSerialNum":case"richText":case"select":case"selectId":case"selectInterface":case"selectinterfaceTree":case"id":case"extId":case"link":case"location":o=t[e.key];break;case"file":case"picture":case"video":var r="";t[e.key].length>0&&t[e.key].forEach(function(e){r+=e.url+";"}),r.length>0&&(r=r.substring(0,r.length-1)),o=r;break;default:o=t[e.key]}return o},exportExcelFrontEnd:function(){var e=this,t=this.$refs.xGrid.getTableColumn(),n=this.$refs.xGrid.getTableData();console.log(t,123);var o=[],i=[];t.fullColumn.forEach(function(t){if("checkbox"!=t.type&&"操作"!=t.title){var n={};n.key=t.property,n.title=t.title,e.tableDefine.templateJson.forEach(function(e){e.key==n.key&&(n.type=e.type)}),n.column=t,i.push(n)}});var a=[];i.forEach(function(e){o.push(e.title)}),a.push(o),n.fullData.forEach(function(t){var n=[];i.forEach(function(o){2==o.column.level||o.column.params&&o.column.params.type&&"relateTable"==o.column.params.type?n.push(e.getRelateTableText(t,o.column)):1==o.column.level&&n.push(e.getCellValue(o,t))}),a.push(n)});var r=__WEBPACK_IMPORTED_MODULE_34_xlsx___default.a.utils.aoa_to_sheet(a),l=__WEBPACK_IMPORTED_MODULE_34_xlsx___default.a.utils.book_new();__WEBPACK_IMPORTED_MODULE_34_xlsx___default.a.utils.book_append_sheet(l,r,"sheet1"),__WEBPACK_IMPORTED_MODULE_34_xlsx___default.a.writeFile(l,"data.xlsx")},onTableDataFilter:function(e){this.dataFilterInfo=JSON.parse(e),this.getDataList()},getToolbarConfig:function(){var e=this;return this.noHeadBar||this.isViewProp?null:this.noHeadToolBar?{slots:{buttons:"toolbar_buttons",tools:"toolbar_tools"}}:{slots:{buttons:"toolbar_buttons",tools:"toolbar_tools"},refresh:{query:function(){e.getDataList()}},print:!0,zoom:!0,custom:!0}},checkCellCanNotEditDetail:function(e,t){return!this.insertedNewRowState&&(0==this.tableProp.canEdit||null!=t.params.roleCanEditField&&0==t.params.roleCanEditField)},checkCellCanNotEdit:function checkCellCanNotEdit(row,column){return this.tableProp.canNotEditCondition&&!!(this.tableProp.canNotEditConditionContent&&eval(this.tableProp.canNotEditConditionContent)&&this.tableProp.canNotEditConditionFields.indexOf(column.params.key)>-1)||this.checkCellCanNotEditDetail(row,column)},formatShowSeconds:function(e){return Object(__WEBPACK_IMPORTED_MODULE_17__utils__.i)(e)},formatShowPercent:function(e){return null!=e?parseInt(100*parseFloat(e))+"%":""},formatShowRMB:function(e){return Object(__WEBPACK_IMPORTED_MODULE_17__utils__.numToRMP)(e)},isEnableEdit:function(){return!this.isViewProp&&((!this.commonSysConfig||!this.commonSysConfig.noTableEdit||1==this.tableProp.editType)&&(!this.isOpen&&this.tableProp.canEdit&&!this.tableProp.onlyCreaterCanEdit&&!this.isSqlTable))},customButtonShow:function(e){this.$refs["operateCustomButton"+e.id]&&this.$refs["operateCustomButton"+e.id].getEnableInfo()},customBtnClickMethod:function(e){Object(__WEBPACK_IMPORTED_MODULE_31__components_custom_customButtomDo_js__.a)(e,this)},cuscomBtnSuccess:function(){console.log("cuscomBtnSuccess"),this.getDataList()},openHistoryDataStyle:function(){this.openHistoryStyle=!1,this.cacheEditState=this.tableProp.canEdit,this.tableProp.canEdit=!1,this.cacheTableColumn=this.tableColumn;var e=[];this.tableColumn.forEach(function(t){"operateColumn"!=t.field&&"updatedAt"!=t.field&&e.push(t)});e.push({field:"updatedAt",fixed:"right",title:"最后更新时间",width:135,sortable:!0,resizable:!0}),this.tableColumn=e},closeHistoryDataStyle:function(){this.openHistoryStyle=!0,this.tableProp.canEdit=this.cacheEditState,this.tableColumn=this.cacheTableColumn,this.historyDataDate=null,this.getDataList()},getHistoryData:function(){this.getDataList()},leftTreeClick:function(e){this.extId=e.id,this.extKey=e.tableName,this.getDataList(null,null,!0)},copyUrl:function(e){Object(__WEBPACK_IMPORTED_MODULE_17__utils__.c)(e,this)},share:function(e){this.shareRow=e,this.shareVisible=!0},getUserList:function(){var e=this;if(!this.isOpen){var t={url:this.$http.adornUrl("sys/user/list"),method:"post",headers:{token:this.token},data:this.$http.adornParams({page:1,limit:999})};this.$http(t).then(function(t){var n=t.data;e.staffSelectItemMap={},n&&0===n.code?(n.page.list.forEach(function(t){e.staffSelectItemMap[t.userId]=t.realname,t.label=t.realname,t.value=t.userId}),e.$set(e,"staffSelectItem",n.page.list)):e.staffSelectItem=[]})}},setSearchData:function(e,t,n,o){this.$set(this,"queryInfo",null!=e?Object(__WEBPACK_IMPORTED_MODULE_17__utils__.e)(e):null),console.log(e,this.queryInfo,77778888),this.$set(this,"processCondition",null!=t?Object(__WEBPACK_IMPORTED_MODULE_17__utils__.e)(t):null),this.$set(this,"dataForm",null!=n?Object(__WEBPACK_IMPORTED_MODULE_17__utils__.e)(n):null),this.dataFilterInfo=o,null==this.dataFilterInfo&&(this.dataFilterInfo=JSON.parse(this.$getUrlParam("dataFilterInfo")))},search:function(e,t,n,o){this.setSearchData(e,t,n,o),this.reGetDataList()},searchForSqlView:function(e,t,n,o){this.setSearchData(e,t,n,o),this.$refs.sqlTableView.search(this.getConnditionArr())},getSelectColor:function(e,t){var n="";for(var o in t){var i=t[o];if(i.value==e){n=i.color;break}}return n},gridKeydown:function(e){"Enter"==e.$event.key&&document.getElementById("bodyBox").click()},checkRowCanEdit:function(e){return!this.isOpen&&(this.tableProp.onlyCreaterCanEdit?this.tableProp.canEdit&&e&&this.userInfo.id==e.createrId:this.tableProp.canEdit)},checkRowCanDelete:function(e){return this.isOpen?this.tableProp.openOpt.canDelete:this.tableProp.onlyCreaterCanEdit?this.tableProp.canDelete&&e&&this.userInfo.id==e.createrId:this.tableProp.canDelete},checkShowHistory:function(){return this.tableProp.recordUpdateHistory},gotoUpdateHistory:function(e){var t=this;this.operatePopoverShow=!1,this.updateHistoryVisible=!0,this.$nextTick(function(){t.$refs.updateHistoryDialog.init(t.tableName,e.id,t.tableDefine)})},checkStaffMultiple:function(e,t){return t.params.mustMultiple&&!Array.isArray(e[t.property])&&(e[t.property]=[e[t.property]]),!t.params.mustMultiple&&Array.isArray(e[t.property])&&(e[t.property]=e[t.property][0]),""},editActived:function(e){this.activedRowData=e.row,this.oldRowData=Object(__WEBPACK_IMPORTED_MODULE_17__utils__.e)(this.activedRowData),this.insertedNewRow.id==e.row.id?this.insertedNewRowState=!0:this.insertedNewRowState=!1,this.setEditMergeCell(e)},activeMethod:function(e){return!e.column.params.cantEdit&&(console.log(this.checkRowCanEdit(e.row),1231234),this.checkRowCanEdit(e.row))},editClosed:function(e){console.log("editClosed",e),this.insertedNewRowState=!1,this.$refs.xGrid.clearMergeCells(),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(this.activedRowData)!=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(this.oldRowData)&&this.saveRow(this.activedRowData)},watchChart:function(){this.$refs.chartView.init(this.extInfoId,this.tableName)},seniorSearch:function(){},getStaffSpan:function(e,t){return this.staffSelectItemMap[e]},dealwithFloat:function(e,t){var n=e[t.property],o=parseFloat(n);return isNaN(o)||Object(__WEBPACK_IMPORTED_MODULE_20__utils_validate__.b)(o)?n:null!=t.params.decimalNum?o.toFixed(t.params.decimalNum):o.toFixed(3)},footerMethod:function(){return this.footerData},getRelateFilterShowText:function(e){return null==this.relateTaleFilter[e.key]?"选择"+e.name:this.relateTaleFilter[e.key][JSON.parse(e.relateTableProps[0]).key]},getBaseDataFilterShowText:function(e){return null==this.baseTableFilter[e.key]?"选择"+e.name:this.baseTableFilter[e.key].name},showDefineDialog:function(){var e=this;this.defineAddOrUpdateVisible=!0,this.$nextTick(function(){e.$refs.defineAddOrUpdate.init(e.extInfoId,e.tableName,e.tableProp.sqlTable)})},logData:function(){},checkItemDisable:function checkItemDisable(condition,row){if(null==condition)return!1;var keys=this.getExecStrs(condition);try{keys.forEach(function(e){condition=condition.replaceAll(e,row[e])});var reg=/\$\{/g;return condition=condition.replaceAll(reg,"").replaceAll("}",""),eval(condition)}catch(e){return!1}},getExecStrs:function(e){var t=/\$\{(.+?)\}/g,n=[],o=null;do{(o=t.exec(e))&&n.push(o[1])}while(o);return n},calcRow:function(e){var t=this;this.extInfo.forEach(function(n){"formule"==n.type&&(e[n.key+"_haveFixData"]||(e[n.key]=t.execMath(n.formule,e)))})},execMath:function execMath(formula,obj){try{var ret=formula;for(var key in obj)ret=ret.replaceAll(key,obj[key]);return eval(ret)}catch(e){return""}},getCheckbox:function(){return this.selectedRows},getCheckboxTableList:function(){var e=this,t=[];return this.selectedRows.forEach(function(n){e.tableData.forEach(function(e){n==e.id&&t.push(e)})}),t},checkboxChangeEvent:function(e){var t=this;e.row?e.checked?this.selectedRows.push(e.row.id):this.selectedRows.splice(this.selectedRows.indexOf(e.row.id),1):e.checked?e.records.forEach(function(e){-1==t.selectedRows.indexOf(e.id)&&t.selectedRows.push(e.id)}):this.tableData.forEach(function(e){-1!=t.selectedRows.indexOf(e.id)&&t.selectedRows.splice(t.selectedRows.indexOf(e.id),1)})},saveVisableColumns:function(e,t){this.$http({url:this.$http.adornUrl("/common/visablecoloums/saveVisableColumn"),method:"post",data:this.$http.adornData({visableColoums:__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(e),tableName:this.tableName,tableDefineId:this.tableDefine.id,isDefault:t})}).then(function(e){var t=e.data;t&&t.code})},deleteVisableColumns:function(e,t){var n=this;this.$http({url:this.$http.adornUrl("/common/visablecoloums/deleteByDefineId"),method:"post",data:this.$http.adornData({tableName:this.tableName,tableDefineId:this.tableDefine.id,isDefault:t})}).then(function(e){var t=e.data;t&&0===t.code&&n.getExtInfo()})},toolbarCustomEvent:function(e){var t=this,n=this.$refs.xGrid.getTableColumn().fullColumn;switch(e.type){case"confirm":this.isEdit?this.$XModal.confirm({message:"当前处于开发状态下， 可见栏目将保存为系统默认配置，其他用户在没有设置可见栏目的情况下，将使用此配置，是否继续？"}).then(function(e){"confirm"==e&&t.saveVisableColumns(n,!0)}):this.saveVisableColumns(n);break;case"reset":this.isEdit?this.$XModal.confirm({message:"当前处于开发状态下， 系统默认可见栏目配置将删除，其他用户在没有设置可见栏目的情况下，将显示所有栏目，是否继续？"}).then(function(e){"confirm"==e&&t.deleteVisableColumns(n,!0)}):this.deleteVisableColumns(n)}},cellClickEvent:function(e){this.radioChoose&&(this.$refs.xGrid.setRadioRow(e.row),this.radioChangeEvent(e.row))},radioChangeEvent:function(e){this.selectRow=e,this.$emit("selectItem",e)},insertEvent:function(e){var t=this;if(this.process.processEnable)this.addOrUpdateHandle();else if(null!=this.tableProp&&null!=this.tableProp.editType&&2==this.tableProp.editType)this.addOrUpdateHandle();else{var n={};null!=e?(delete e.id,n=e):(this.extInfo.forEach(function(e){n[e.key]=null}),n=__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign___default()(n,this.newDataForm)),this.$refs.xGrid.insertAt(n,0).then(function(e){var n=e.row;t.insertedNewRow=n,t.$refs.xGrid.setActiveRow(n)})}},getRelateTableText:function(e,t){return e.relateTableContent?e.relateTableContent&&e.relateTableContent[t.params.parentCloumnKey]&&null!=e.relateTableContent[t.params.parentCloumnKey][t.property+"_title"]?e.relateTableContent[t.params.parentCloumnKey][t.property+"_title"]:null!=e.relateTableContent[t.params.parentCloumnKey][t.property]?e.relateTableContent[t.params.parentCloumnKey][t.property]:"":""},getRelateTableValue:function(e,t){return e[t.params.key]},getDefaultValue:function(){var e=this;this.newDataForm={},this.extInfo.forEach(function(t){"dateTime"==t.type?t.defaultValueIsNow?e.newDataForm[t.key]=(new Date).Format(t.dateType):e.newDataForm[t.key]=t.defaultValue:t.defaultValue&&("selectStaff"==t.type?e.$http({url:e.$http.adornUrl("/sys/user/queryUserListByUserSelectConfig"),method:"post",data:e.$http.adornParams(t.defaultValue)}).then(function(n){var o=n.data;if(o&&0===o.code&&o.data){var i=[];o.data.forEach(function(e){i.push(e.userId)}),e.$set(e.newDataForm,t.key,i)}}):e.newDataForm[t.key]=t.defaultValue)}),console.log(this.newDataForm)},addTreeNode:function(e){this.addOrUpdateHandle(null,null,e)},processViewEvent:function(e){this.addOrUpdateHandle(e.id,!0)},editRowEvent:function(e){this.addOrUpdateHandle(e.id)},saveRowEvent:function(e){var t=this;this.$refs.xGrid.clearActived().then(function(){t.$refs.xGrid.setActiveRow(e),t.saveRow(e)})},deleteUnNeedData:function(e){return delete e.extContent,delete e.relateTableContent,delete e.baseTableContent,delete e.extId,delete e.extKey,delete e.id,delete e.title,delete e.parentId,delete e.creater,delete e.createrId,delete e.createdAt,delete e.updatedAt,delete e.processTaskInfo,__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(e)},saveRow:function(e){var t=this;if(this.checkData(e)){(e.id+"").indexOf("row_")>=0&&(e.id=null),this.dataListLoading=!0;for(var n=0;n<this.extInfo.length;n++){var o=this.extInfo[n],i=e[o.key];-1!=["integer","float"].indexOf(o.type)&&("number"!=typeof i&&(e[o.key]=0),"number"==typeof o.numMin&&i<o.numMin&&(e[o.key]=o.numMin),"number"==typeof o.numMax&&i>o.numMax&&(e[o.key]=o.numMax))}var a=void 0;a=null==this.saveApiUrl||""==this.saveApiUrl||e.id?null!=this.updateApiUrl&&""!=this.updateApiUrl&&e.id?this.updateApiUrl+"/"+this.tableName:"/common/common/"+(e.id?"update":"save")+"/"+this.tableName:this.saveApiUrl+"/"+this.tableName,this.$http({url:this.$http.adornUrl(a),method:"post",data:this.$http.adornData({id:e.id||void 0,extId:this.extId,extKey:this.extKey,extContent:this.deleteUnNeedData(e)})}).then(function(n){var o=n.data;if(t.dataListLoading=!1,o&&0===o.code){t.getDataList();var i=!e.id;o.id&&(e.id=o.id),t.$emit("saveOk",e,i),t.$message({message:"保存成功",type:"success",duration:1500,onClose:function(){}})}else{if(50004==o.code){for(var a=void 0,r=0;r<t.extInfo.length;r++)t.extInfo[r].key==t.uniqueCode&&(a=t.extInfo[r].name);t.$XModal.alert({message:a+"在此表中必须唯一，请填写或选择其他的值",title:"保存失败",status:"error"})}else t.$XModal.alert({message:o.msg,title:"保存失败",status:"error"});if(tmpId){var l={};l.id=tmpId,t.$refs.xGrid.setActiveRow(l)}}})}},checkData:function(e){var t="";if(this.uniqueCode&&(null==e[this.uniqueCode]||""==e[this.uniqueCode])){for(var n=!1,o=0;o<this.extInfo.length;o++)this.extInfo[o].key==this.uniqueCode&&(t=this.extInfo[o].name,n=!0);if(n)return this.$XModal.alert({message:t+" 必填",title:"数据填写错误",status:"error"}),!1}var i=!1;for(o=0;o<this.extInfo.length;o++){var a=this.extInfo[o],r=e[a.key];null!=a.mustRequired&&1==a.mustRequired&&(null!=r&&""!=r||(i=!0,t+=a.name+"  "))}return!i||(this.$XModal.alert({message:t+" 必填",title:"数据填写错误",status:"error"}),!1)},cancelRowEvent:function(e){var t=this.$refs.xGrid;t.clearActived().then(function(){t.revertData(e)})},refreshDataAndPage:function(e,t,n,o,i,a){this.pageIndex=1,this.pageSize=PAGE_SIZE,this.parentData=i,this.refreshData(e,t,n,null,o,a)},getTableData:function(){return this.$refs.xGrid.getTableData().tableData},getTableName:function(e){e?this.tableName=e:(this.tableName=this.$route.name.split("@")[1],this.tableName=this.tableName.split("?")[0])},refreshData:function(e,t,n,o,i,a){this.thisPoint=this,this.tableColumn=[],null!=this.localTableDataProp&&(this.localTableDataModule=!0),this.getTableName(t),null!=a?this.dataFilterInfo=a:null!=this.dataFilterInfoProp?this.dataFilterInfo=this.dataFilterInfoProp:this.isChildView||null==this.$getUrlParam("dataFilterInfo")||(this.dataFilterInfo=JSON.parse(this.$getUrlParam("dataFilterInfo"))),e&&(this.extId=e),i&&(this.extKey=i),n&&Array.isArray(n)&&(this.selectedRows=n),n&&!Array.isArray(n)&&(this.selectRowId=n),o&&(this.queryIds=o,this.pageIndex=1,this.pageSize=o.split(",").length),this.getExtInfo()},addParentTableData:function(e,t,n){this.parentTableColumns=e,this.parentTableDatas=t,this.parentTableFullDatas=n},fillFilter:function(){var e=this;if(this.localTableDataProp)this.getDataList();else if(this.isOpen)this.tableProp.openOpt.canSearch?this.tableData=[]:this.getDataList();else{for(var t in this.$route.query)if("dataFilterInfo"!=t&&"tableName"!=t&&"token"!=t){var n=!1;if(this.queryInfo.forEach(function(o){t===o.key&&(o.value=e.$route.query[t],n=!0)}),!n){var o={};o.key=t,o.value=this.$route.query[t],this.extInfo.forEach(function(e,n){e.key==t&&(o.name=e.name)}),this.queryInfo.push(o)}}this.getDataList()}},showFileList:function(e,t){var n=this;this.fileListVisible=!0,this.$nextTick(function(){n.$refs.fileList.init(e,t.params,n.activeMethod({column:t},!0))})},uploadImage:function(e,t){this.upImageRow=e,this.upImageRowProprety=t},uploadImageSuccess:function(e,t,n){var o=this;this.insertedNewRow.id==this.upImageRow.id&&(this.insertedNewRow[this.upImageRowProprety]=e.url),this.tableData.forEach(function(t){t.id==o.upImageRow.id&&(t[o.upImageRowProprety]=e.url)})},showRichtextDialog:function(e,t,n,o,i,a){var r=this;this.richtextViewVisible=!0,this.$nextTick(function(){r.$refs.reichtextDialog.init(e,r.extId,t,n,o,r.tableName,r.checkCellCanNotEdit(t,a))})},fileListChange:function(e){this.isEnableEdit()&&this.saveRow(e)},fixdata:function(e,t,n){e[t]=n,e[t+"_haveFixData"]=!0,this.$refs.xGrid.updateData()},cancelFixData:function(e,t){e[t+"_haveFixData"]=!1,this.calcRow(e)},updateRichtext:function(){this.getDataList()},onsuccess:function(e,t,n){var o=this;if(this.$loading.hide(),this.excelFileList=[],0==e.code){if(this.exceldialogVisible=!1,e.duplcateList&&e.duplcateList.length>0){var i="";e.duplcateList.forEach(function(e){var t=JSON.parse(e.extContent);i+=t[o.uniqueCode]+",",e.uniqueCode=t[o.uniqueCode]}),this.$XModal.confirm({message:"检测到重复的唯一编码[重复的编码："+i+"]，请选择跳过或者覆盖！",cancelButtonText:"跳过",confirmButtonText:"覆盖"}).then(function(t){"confirm"==t&&(o.dataListLoading=!0,o.$http({url:o.$http.adornUrl("common/common/rewiteDuplcateList/"+o.tableName),method:"post",data:__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(e.duplcateList)}).then(function(t){var n=t.data;o.dataListLoading=!1,o.$message.success(e.msg),n&&0===n.code&&o.getDataList()}))})}else this.$message.success(e.msg);this.getDataList()}else this.$message.error(e.msg)},onerror:function(e,t,n){this.$loading.hide(),this.$message.error(e.msg)},handleRemove:function(e,t){},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeUpload:function(e){this.$loading.show();var t="xls"===e.name.split(".")[1]||"xlsx"===e.name.split(".")[1],n="application/vnd.ms-excel"==e.type,o="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.type;return n||o||t||this.$message.error("只能上传excel文件"),n||o||t},beforeRemove:function(e,t){if(e&&"success"===e.status)return this.$confirm("确定移除 "+e.name+"？")},exportExcel:function(){var e=this,t=this.getConnditionArr(),n={page:this.pageIndex,limit:this.pageSize,tableName:this.tableName,extId:this.extId,condition:t.length>0?t:null,parentTableFullDatas:this.parentTableFullDatas.length>0?__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(this.parentTableFullDatas):null};n=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(n),this.$http({url:this.$http.adornUrl("/common/common/exportExcelParam"),method:"post",data:this.$http.adornData({params:n})}).then(function(t){var n=t.data;n&&0===n.code&&(window.location.href=window.SITE_CONFIG.baseUrl+"/common/common/exportExcelByParamId?token="+e.$cookie.get("token")+"&paramId="+n.paramId)})},exportExcelForView:function(){var e=this.getConnditionArr(),t={page:this.pageIndex,limit:this.pageSize,tableName:this.tableName,extId:this.extId,condition:e.length>0?e:null,parentTableFullDatas:this.parentTableFullDatas.length>0?__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(this.parentTableFullDatas):null};t=encodeURI(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(t)),window.location.href=window.SITE_CONFIG.baseUrl+"/common/common/exportExcelForView?token="+this.$cookie.get("token")+"&params="+t},exportExcelFront:function(){this.$refs.xGrid.openExport({isPrint:!1})},modelExcel:function(){window.location.href=window.SITE_CONFIG.baseUrl+"/common/common/downloadExcelPattern?token="+this.$cookie.get("token")+"&tableName="+this.tableName},clearSearchData:function(){var e=this;this.processCondition.taskType="",this.queryInfo.forEach(function(t,n){e.$set(e.queryInfo[n],"value",null),e.$set(e.queryInfo[n],"disable",!1)}),this.dataForm.createdAt=null,this.dataForm.updatedAt=null,this.dataForm.creater=null,this.relateTaleFilter={},this.baseTableFilter={},this.isChildView||null==this.$getUrlParam("dataFilterInfo")?this.dataFilterInfo=null:this.dataFilterInfo=JSON.parse(this.$getUrlParam("dataFilterInfo")),this.formKey++,this.reGetDataList()},clearSearchDataForSqlView:function(){var e=this;this.queryInfo.forEach(function(t,n){e.$set(e.queryInfo[n],"value",null),e.$set(e.queryInfo[n],"disable",!1)}),this.$refs.sqlTableView.search(this.queryInfo)},changeInput:function(e){this.$forceUpdate()},forceUpdate:function(){this.$forceUpdate()},matchData:function(e,t){for(var n=null,o=0;o<this.extInfo.length;o++)if("selectinterfaceTree"==this.extInfo[o].type&&this.extInfo[o].key==e&&this.apiData[e])for(var i=0;i<this.apiData[e].length;i++)this.apiData[e][i].id==t&&(n=this.apiData[e][i].title);return n||t},gotoLink:function(e,t,n){var o=e[n.property];n.params.linkPrefix&&(o=n.params.linkPrefix+o),o?window.open(o):this.$message.info("暂无链接")},gotoChildrenTable:function(e,t,n,o,i,a){var r=this;0!=Object(__WEBPACK_IMPORTED_MODULE_20__utils_validate__.b)(t)?(this.commonDialogVisible=!0,this.$nextTick(function(){r.$refs.commonDialog.init(t,n,o,r.dataList,i,e.property,a)})):this.$XModal.message({message:"请先保存，再添加子表格"})},gotoCanFixDataDialog:function(e,t,n,o){var i=this;this.fixdataViewVisible=!0,this.$nextTick(function(){i.$refs.fixdataDialog.init(e,t,n,o)})},gotoPropsChildrenTable:function(e,t,n,o){var i=this;this.commonDialogVisible=!0;for(var a="(",r=0;r<this.tableData.length;r++)null!=this.tableData[r][t]&&""!=this.tableData[r][t]&&(a+=this.tableData[r][t]+",");a=a.substr(0,a.length-1)+")";var l=[];null!=o&&o.split(",").forEach(function(e){i.tableColumn.forEach(function(t){t.field==e&&l.push(t)})});this.$nextTick(function(){i.$refs.commonDialog.initPropsTable(a,e,n,l,i.tableData,i.dataList)})},goDetail:function(e,t,n){var o=this;if(this.noDetail)return!1;this.commonRelateTableViewVisible=!0,this.$nextTick(function(){o.$refs.commonRelateTableView.init(e,t,n)})},showChooseRelateTable:function(e,t,n,o,i,a,r){},setEditMergeCell:function(e){console.log(e,99990);for(var t=[],n=0;n<this.$refs.xGrid.columns.length;n++)null!=this.$refs.xGrid.columns[n].children&&t.push({row:e.rowIndex,col:n,rowspan:1,colspan:this.$refs.xGrid.columns[n].children.length});this.$refs.xGrid.setMergeCells(t)},showChooseRelateTableForFilter:function showChooseRelateTableForFilter(tableName,key,selectedId,relateTableExtId,fieldName){var _this29=this;this.commonRelateTableDialogVisible=!0;var extId=eval(relateTableExtId);this.$nextTick(function(){_this29.$refs.commonRelateTableDialog.initForFilter(tableName,key,selectedId,extId,fieldName)})},gotoPropTable:function(e,t,n,o,i,a,r){this.goDetail(e,t)},gotoPropList:function(e,t,n,o){this.gotoPropsChildrenTable(t.params.relateTableName,t.property,n,o)},gotoBaseDataTable:function(e,t,n,o,i){var a=this;i?(this.baseDataTableViewVisible=!0,this.$nextTick(function(){a.$refs.baseDataTableDialog.init(e,t,n,o)})):this.$XModal.message("无权限进行编辑")},gotoBaseDataTableForFilter:function(e,t,n){var o=this;this.baseDataTableViewVisible=!0,this.$nextTick(function(){o.$refs.baseDataTableDialog.initForFilter(e,t,n)})},showChooseBaseTable:function(e,t,n,o){var i=this;this.baseDataTableViewVisible=!0,this.$nextTick(function(){i.$refs.baseDataTableDialog.init(e,t,o)})},gotoCustomDialog:function(e,t,n){this.customDialogViewVisible[t]=!0,this.$forceUpdate();var o=this;setTimeout(function(){o.$refs[t][0].init(e,t,n)},50)},addCustomView:function(e){e&&(e.toolbarButtonsExtView&&(this.customView.toolbarButtonsExtView=!0,this.$options.components.toolbarButtonsExtView=function(){return __webpack_require__("X7LF")("./"+e.toolbarButtonsExtView+".vue")}),e.operatorButtonsExtView&&(this.customView.operatorButtonsExtView=!0,this.$options.components.operatorButtonsExtView=function(){return __webpack_require__("X7LF")("./"+e.operatorButtonsExtView+".vue")}),e.customListView&&!this.dontShowCustomViewProp&&(this.$set(this,"customView",e),this.$options.components.customListView=function(){return __webpack_require__("ORA6")("./"+e.customListView+"/index.vue")}))},addCustomDialog:function(e){e&&(this.customDialogView[e]=e,this.customDialogViewVisible[e]=!1,this.$options.components[e]=function(){return __webpack_require__("GmwV")("./"+e+".vue")})},getDashBoardData:function(){var e=this;this.$http({url:this.$http.adornUrl("/common/commondashboarddefine/info/"+this.tableProp.dashboard),method:"get"}).then(function(t){var n=t.data;n&&0===n.code&&(e.dashBoardItems=JSON.parse(n.commonDashboardDefine.define),e.$nextTick(function(){e.$refs.dashboard&&e.$refs.dashboard.homeInit()}))})},getExtInfo:function(){var e,t=this;this.isOpen=this.isPublicVist(),this.queryInfo=[],this.$http({url:this.$http.adornUrl("/common/commondefine/"+(this.isOpen?"infoByTableForPublicShare":"infoByTableWithUserColumnConfig")+"/"+this.tableName),method:"get"}).then((e=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function e(n){var o,i,a,r,l,s,c,u,d,h,f,p=n.data;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!p||0!==p.code){e.next=73;break}o=localStorage.getItem("app")?JSON.parse(localStorage.getItem("app")).id+"":"",t.isNowApp=o==p.assetExt.appId,t.$emit("infoByTable",Object(__WEBPACK_IMPORTED_MODULE_17__utils__.e)(p.assetExt)),t.tableDefine=p.assetExt,t.tableName=t.tableDefine.tableName,t.tableDefine.customViewJson=t.tableDefine.customView?JSON.parse(t.tableDefine.customView):null,t.tableDefine.customViewJson&&t.tableDefine.customViewJson.customBtn&&(t.operateCustomBtn=[],t.toolsCustomBtn=[],t.tableDefine.customViewJson.customBtn.forEach(function(e){"operate"==e.position||null==e.position?t.operateCustomBtn.push(e):"tools"==e.position&&t.toolsCustomBtn.push(e)})),t.tableProp=JSON.parse(p.assetExt.tableProp),t.tableProp.dashboard&&""!=t.tableProp.dashboard&&t.getDashBoardData(),t.tableProp.pageSize&&(t.pageSize=t.tableProp.pageSize),t.tableProp.sqlTable&&(t.sqlTableOption={id:t.tableProp.sqlId},t.isSqlTable=!!t.tableProp.sqlTable),t.process={processEnable:p.assetExt.processEnable,processDescribe:JSON.parse(p.assetExt.processDescribe)},t.extInfoId=p.assetExt.id,t.extInfo=JSON.parse(p.assetExt.template),t.getDefaultValue(),t.extFilterMap=Object(__WEBPACK_IMPORTED_MODULE_24__components_extForm_filter_js__.c)(t.extInfo),t.tableChart=JSON.parse(p.assetExt.chart),null==t.tableChart?t.showChart=!1:t.showChart=null!=t.tableChart.show&&t.tableChart.show,t.optionMap={},i=!1,p.assetExt.templateJson.forEach(function(e){t.optionMap[e.key]=e,"selectStaff"==e.type&&(i=!0)}),i&&!t.staffSelectItem.length&&t.getUserList(),null==t.tableProp&&(t.tableProp={},t.tableProp.listType=1),null!=t.tableConfig.isHidePageInfo&&(t.tableProp.isHidePageInfo=t.tableConfig.isHidePageInfo),null!=t.tableConfig.canInsert&&(t.tableProp.canInsert=t.tableConfig.canInsert),null!=t.tableConfig.canDelete&&(t.tableProp.canDelete=t.tableConfig.canDelete),null!=t.tableConfig.canEdit&&(t.tableProp.canEdit=t.tableConfig.canEdit),t.fixedData=JSON.parse(p.assetExt.fixedData||__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(t.fixedData)),(t.fixedData.createdAt.query||t.fixedData.creater.query||t.fixedData.id.query||t.fixedData.updatedAt.query)&&(t.showQueryInfo=!0),t.uniqueCode=p.assetExt.uniqueCode,t.addCustomView(JSON.parse(p.assetExt.customView)),t.apiUrl=p.assetExt.api,t.saveApiUrl=p.assetExt.saveApi,t.updateApiUrl=p.assetExt.updateApi,t.deleteApiUrl=p.assetExt.deleteApi,t.fillFilter(),t.tableColumn=[],t.fixedData.id&&t.fixedData.id.show?(a=2==t.tableProp.listType?{field:"id",title:"ID",width:130,sortable:!0,resizable:!0,treeNode:!0,fixed:"left"}:{field:"id",title:"ID",width:60,sortable:!0,resizable:!0,fixed:"left"},t.tableColumn.push(a)):(null==t.fixedData.seq||t.fixedData.seq.show)&&(2==t.tableProp.listType||(a={type:"seq",width:"50",fixed:"left"},t.tableColumn.push(a))),t.parentTableColumns&&t.parentTableColumns.length>0&&t.parentTableColumns.forEach(function(e){t.tableColumn.push(e)}),e.t0=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.keys(t.extInfo);case 41:if((e.t1=e.t0()).done){e.next=62;break}if(l=e.t1.value,"divider"!=(s=t.extInfo[l]).type&&"describe"!=s.type&&"customFormDetailView"!=s.type){e.next=46;break}return e.abrupt("continue",41);case 46:if(s.query&&(s.value=null,t.$set(t.queryInfo,t.queryInfo.length,s)),!t.isOpen){e.next=51;break}if(-1==(t.tableProp.openOpt.privateExts?t.tableProp.openOpt.privateExts:[]).indexOf(s.key)){e.next=51;break}return e.abrupt("continue",41);case 51:return e.next=53,Object(__WEBPACK_IMPORTED_MODULE_25__common_view_cellType__.a)(s,t);case 53:!(r=e.sent).params&&(r.params={}),r.params=__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign___default()(r.params,s),r.visible=!s.hidden||!s.hidden,r.fixed=s.enableColumnFixed?s.columnFixed:null,0==l&&2==t.tableProp.listType&&(r.treeNode=!0),t.tableColumn.push(r),e.next=41;break;case 62:(null==t.fixedData.selected||t.fixedData.selected.show)&&(t.radioChoose?(c={type:"radio",title:"单选",width:"50",fixed:"left"},t.tableColumn.unshift(c)):(c={type:"checkbox",width:"40",fixed:"left"},t.tableColumn.unshift(c))),console.log(t.tableColumn,88888),t.fixedData.creater.show&&(u={field:"creater",title:"创建人",width:100,sortable:!0,resizable:!0},t.tableColumn.push(u)),t.fixedData.createdAt.show&&(d={field:"createdAt",title:"创建时间",width:135,sortable:!0,resizable:!0},t.tableColumn.push(d)),t.fixedData.updatedAt.show&&(h={field:"updatedAt",title:"更新时间",width:135,sortable:!0,resizable:!0},t.tableColumn.push(h)),f={field:"operateColumn",title:"操作",minWidth:2==t.tableProp.listType?200:120,fixed:"right",resizable:!0,slots:{default:t.process.processEnable?"processCloumn":"operateCloumn"}},t.noOption||t.isSqlTable||t.isViewProp||t.tableColumn.push(f),console.log(t.tableColumn,99981),2==t.tableProp.listType&&(t.tableColumn[0].align="left",t.tableColumn[1].align="left"),e.next=74;break;case 73:901===p.code?t.noPublicTable=!0:t.$emit("getTableFail");case 74:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},getApiData:function(e,t){var n=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function o(){var i;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=[],o.next=3,n.$http({url:n.$http.adornUrl(""+e),method:"get",params:n.$http.adornParams({page:1,limit:9999})}).then(function(e){var o=e.data;if(!o||0!==o.code)return[];o.list?i=o.list:o.page.list&&(i=o.page.list),n.tableKeyNum++,n.tableColumn.forEach(function(e){e.field==t&&(e.datalist=n.treeDataTranslate(i),e.editRender.props.options=e.datalist,e.cellRender.props.options=e.datalist,n.$refs.xGrid.updateData())})});case 3:return o.abrupt("return",i);case 4:case"end":return o.stop()}},o,n)}))()},treeDataTranslate:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parentId",o=[],i={},a=0;a<e.length;a++)i[e[a][t]]=e[a];for(var r=0;r<e.length;r++)i[e[r][n]]&&e[r][t]!==e[r][n]?(i[e[r][n]].children||(i[e[r][n]].children=[]),i[e[r][n]]._level||(i[e[r][n]]._level=1),e[r]._level=i[e[r][n]]._level+1,e[r].title?e[r].label=e[r].title:e[r].name&&(e[r].label=e[r].name),e[r].value=e[r].id,i[e[r][n]].children.push(e[r])):(e[r].title?e[r].label=e[r].title:e[r].name&&(e[r].label=e[r].name),e[r].value=e[r].id,o.push(e[r]));return o},dealTimeString:function(e){var t=e.split(",");return"'"+t[0]+"' AND '"+t[1]+"'"},dealTimeStampString:function(e){var t=e.split(",");return"'"+Date.parse(t[0])/1e3+"' AND '"+(Date.parse(t[1])/1e3-1)+"'"},dealYearTimeStampString:function(e){var t=new Date(e);return t.setFullYear(t.getFullYear()+1),"'"+Date.parse(e)/1e3+"' AND '"+(t.getTime()/1e3-1)+"'"},dealMonthTimeStampString:function(e){var t=new Date(e);return t.setMonth(t.getMonth()+1),"'"+Date.parse(e)/1e3+"' AND '"+(t.getTime()/1e3-1)+"'"},getConnditionArr:function(){var e=[];for(var t in null!=this.queryInfo&&this.queryInfo.forEach(function(t,n){null!==t.value&&""!==t.value&&e.push({key:t.key,value:t.value,type:t.type,name:t.name})}),this.relateTaleFilter)e.push({key:t,value:this.relateTaleFilter[t].id,type:"integer",fieldType:"relateTable",title:this.relateTaleFilter[t].title,name:this.relateTaleFilter[t].fieldName});for(var t in this.baseTableFilter)e.push({key:t,value:this.baseTableFilter[t].id,type:"integer"});return this.dataForm&&this.dataForm.createdAt&&this.dataForm.createdAt.length>0&&e.push({key:"createdAt",value:this.dealTimeString(this.dataForm.createdAt.toString()),type:"createdAt"}),this.dataForm&&this.dataForm.updatedAt&&this.dataForm.updatedAt.length>0&&e.push({key:"updatedAt",value:this.dealTimeString(this.dataForm.updatedAt.toString()),type:"updatedAt"}),this.dataForm&&this.dataForm.creater&&e.push({key:"creater",value:this.dataForm.creater,type:"creater"}),this.queryIds&&e.push({type:"ids",value:this.queryIds}),this.fuzzySearch&&e.push({type:"fuzzySearch",value:this.fuzzySearch}),e},reGetDataList:function(){this.pageIndex=1,this.getDataList()},onAddNewData:function(){console.log("commonView","onAddNewData"),this.$emit("onAddNewData")},getDataList:function(e,t,n){var o=this;if(!t&&this.$emit("getDataList"),null==this.tableProp.canView||0!=this.tableProp.canView)if(!n&&this.tableProp.leftView&&this.$nextTick(function(){o.$refs.leftView.refreshData()}),this.localTableDataModule||null!=this.localTableDataProp)null!=this.tableData&&0!=this.tableData.length||(this.tableData=this.dealWithData(this.localTableDataProp));else{var i=this.getConnditionArr();this.processCondition.type&&i.push({type:this.processCondition.type,value:""}),"number"==typeof this.processCondition.taskType&&i.push({type:"processState",value:this.processCondition.taskType}),this.dataListLoading=!0;var a=void 0;if(null!=e?a=e:null!=this.apiUrl&&""!=this.apiUrl?a=this.apiUrl:(a="/common/common/"+(this.isOpen?"listForPublicShare":"list"),2==this.tableProp.listType&&(this.pageSize=20)),this.isOpen&&this.tableProp.openOpt.canSearch&&i.length<1)return this.dataListLoading=!1,this.$loading.hide(),this.tableData=[],this.pageIndex=1,void(this.totalPage=0);this.$http({url:this.$http.adornUrl(a),method:"post",headers:{tableName:this.tableName},data:this.$http.adornParams({page:this.pageIndex,limit:this.pageSize,tableName:this.tableName,extId:this.extId,extKey:this.extKey,condition:i.length>0?i:null,parentTableFullDatas:(this.parentTableFullDatas&&this.parentTableFullDatas.length)>0?__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(this.parentTableFullDatas):null,dataFilterInfo:this.dataFilterInfo?__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(this.dataFilterInfo):null,historyDataDate:this.historyDataDate})}).then(function(e){var t=e.data;o.dataListLoading=!1,o.$loading.hide(),o.tableData=[],t&&0===t.code&&null!=t.page?(o.$emit("onGetData",t.page),o.pageData=t.page,o.dataList=t.page.list,o.tableData=o.dealWithData(o.dataList),o.totalPage=t.page.totalCount,o.pageExt=t.page.ext,null!=t.totalData?o.footerData=o.dealWithFootData(t.totalData):null!=o.tableProp.showTotalData&&o.tableProp.showTotalData?o.footerData=o.dealWithFootDataWithPageData(o.tableData):o.footerData=[],o.processCount={myHaveDoneProcessCount:t.page.myHaveDoneProcessCount,myStartProcessCount:t.page.myStartProcessCount,myTodoProcessCount:t.page.myTodoProcessCount}):(0!=t.code&&o.$XModal.message({message:t.msg,title:"错误",status:"error"}),o.dataList=[],o.footerData=[],o.totalPage=0),o.$emit("dataHaveLoad",o.dataList,o.tableData,o.extInfo,o.tableChart),null!=o.$refs.chart&&o.$refs.chart.dataHaveLoad(o.dataList,o.tableData,o.extInfo,o.tableChart),setTimeout(function(){o.$refs.xGrid&&o.$refs.xGrid.setAllTreeExpand(!0)},300)})}},dealWithData:function(e){var t=this,n=[],o=0;return e.forEach(function(e){e.extContent?(e.extContentValue=JSON.parse(e.extContent),e.extContentValue.extContent=e.extContent):e.extContentValue={},e.extContentValue.relateTableContent=JSON.parse(e.relateTableContent),e.extContentValue.baseTableContent=JSON.parse(e.baseTableContent),e.extContentValue.id=e.id,e.extContentValue.extId=e.extId,e.extContentValue.title=e.title,e.extContentValue.parentId=e.parentId,e.extContentValue.creater=e.creater,e.extContentValue.createrId=e.createrId,e.extContentValue.createdAt=e.createdAt,e.extContentValue.updatedAt=e.updatedAt,e.extContentValue.processTaskInfo=e.processTaskInfo,e.children&&e.children.length>0&&(e.extContentValue.children=t.dealWithData(e.children));for(var i=0;i<t.extInfo.length;i++){var a=t.extInfo[i].key,r=!1;for(var l in e.extContentValue)if(a==l){r=!0;break}r||(e.extContentValue[a]=null)}if(null!=t.parentTableDatas&&t.parentTableDatas[o])for(var s in t.parentTableDatas[o])if("relateTableContent"==s)for(var c in t.parentTableDatas[o].relateTableContent)e.extContentValue.relateTableContent[c]=t.parentTableDatas[o].relateTableContent[c];else e.extContentValue[s]=t.parentTableDatas[o][s];o++,n.push(e.extContentValue),e.extContentValue.id==t.selectRowId&&t.$refs.xGrid.setRadioRow(e.extContentValue),-1!=t.selectedRows.indexOf(e.extContentValue.id)&&t.$refs.xGrid.setCheckboxRow(e.extContentValue,!0)}),console.log(n,this.tableColumn,898989777),n},dealWithFootData:function(e){var t=this,n=[];return null!=e&&e.forEach(function(e){var o=[];o.push("合计");for(var i=1;i<t.tableColumn.length;i++){var a=t.tableColumn[i].field;if(console.log(t.optionMap[a],123123123),null==t.tableColumn[i].visible||t.tableColumn[i].visible){var r=!1;for(var l in e)if((a+"Total").toLowerCase()==l.toLowerCase()){r=!0,o.push(e[l]);break}r||o.push("")}}n.push(o)}),n},dealWithFootDataWithPageData:function(e){var t=this,n=[],o=[];o.push("合计");for(var i=function(){r=t.tableColumn[a].field;var n=void 0;if(t.optionMap[r]&&null!=t.optionMap[r].showFormatType&&(n=t.optionMap[r].showFormatType),null!=t.tableColumn[a].visible&&!t.tableColumn[a].visible)return"continue";t.tableColumn[a].children&&t.tableColumn[a].children.length?t.tableColumn[a].children.forEach(function(i){if("integer"==i.type||"float"==i.type||"formule"==i.type||"calcResult"==i.type||"childrenTableStatic"==i.type){var a=0;e.forEach(function(e){var t=e.relateTableContent[r][i.key];t&&!isNaN(t)&&(a+=parseFloat(t))}),0==n?o.push(t.formatShowSeconds(parseFloat(a).toFixed(2))):1==n?o.push(t.formatShowPercent(parseFloat(a).toFixed(2))):2==n?o.push(t.formatShowRMB(parseFloat(a).toFixed(2))):o.push(parseFloat(a).toFixed(2))}else o.push("")}):"integer"==t.tableColumn[a].type||"float"==t.tableColumn[a].type||"formule"==t.tableColumn[a].type||"calcResult"==t.tableColumn[a].type||"childrenTableStatic"==t.tableColumn[a].type?(l=0,e.forEach(function(e){e[r]&&!isNaN(e[r])&&(l+=parseFloat(e[r]))}),0==n?o.push(t.formatShowSeconds(parseFloat(l).toFixed(2))):1==n?o.push(t.formatShowPercent(parseFloat(l).toFixed(2))):2==n?o.push(t.formatShowRMB(parseFloat(l).toFixed(2))):o.push(parseFloat(l).toFixed(2))):o.push("")},a=1;a<this.tableColumn.length;a++){var r,l;i()}return n.push(o),n},updateRelateItemData:function(e,t,n,o){console.log(e,t,n,11111),null!=this.insertedNewRow[t]&&(this.insertedNewRow[t]=n),null!=this.activedRowData&&(this.activedRowData[t]=n)},updateRelateFilterData:function(e,t,n,o){this.$set(this.relateTaleFilter,e,n),this.relateTaleFilter[e].fieldName=o},updateBaseDataFilterData:function(e,t){this.$set(this.baseTableFilter,e,t)},updatePropItemDataExc:function(e,t,n,o){for(var i=0;i<o.length;i++)if(null!=o[i].children&&o[i].children.length>0&&this.updatePropItemDataExc(e,t,n,o[i].children),e==o[i].id){o[i][t]=n,this.saveRow(o[i]);break}},updatePropItemData:function(e,t,n){this.updatePropItemDataExc(e,t,n,this.tableData)},updateBaseData:function(e,t,n){for(var o=0;o<this.tableData.length;o++)if(e==this.tableData[o].id){this.tableData[o][t]=n,this.saveRow(this.tableData[o]);break}},handlePictureCardPreview:function(e){this.dialogImageUrl=e||this.cdnUrl+"/static/img/nopic.jpg",this.dialogVisible=!0},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},selectionChangeHandle:function(e){this.dataListSelections=e},addOrUpdateHandle:function(e,t,n,o){var i=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){i.$refs.addOrUpdate.init(e,t,o||i.tableName,i.extId,i.extKey),i.$refs.addOrUpdate.initParentId(n)})},deleteHandle:function(e){var t=this,n=void 0;if(null!=e){if(((n=e.id)+"").indexOf("row")>-1)return void this.$refs.xGrid.remove(e)}else if(0==this.selectedRows.length)return void this.$XModal.alert("没有选中任何项");var o=n?[n]:this.selectedRows;this.$XModal.confirm("确定对选择的"+o.length+"条数据进行["+(n?"删除":"批量删除")+"]操作?").then(function(e){if("cancel"!=e&&"close"!=e)if(t.localTableDataModule)o.forEach(function(e){for(var n=0;n<t.tableData.length;n++)t.tableData[n].id==e&&t.tableData.remove(n)});else{var n=void 0;n=t.deleteApiUrl&&""!=t.deleteApiUrl?t.$http.adornUrl(t.deleteApiUrl+"/"+t.tableName):t.$http.adornUrl("/common/common/delete/"+t.tableName),t.$loading.show(),t.$http({url:n,method:"post",data:t.$http.adornData(o,!1)}).then(function(e){var n=e.data;t.$loading.hide(),n&&0===n.code?(t.selectedRows=[],t.getDataList(),t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}})):t.$message.error(n.msg)})}})},exceEdit:function(){var e=this;this.excelEditVisible=!0,this.$nextTick(function(){e.$refs.excelEdit.init(e.extInfo,e.tableData)})},excelDataSave:function(e){var t=this,n="/common/common/updateBatch/"+this.tableName;this.$http({url:this.$http.adornUrl(""+n),method:"post",data:this.$http.adornParams({dataList:__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(e)})}).then(function(e){var n=e.data;t.$loading.hide(),n&&0===n.code?(t.getDataList(),t.excelEditVisible=!1):t.$XModal.message({message:"保存错误:"+n.message})})},batchPrintQrcode:function(){var e=this;0!=this.selectedRows.length?(this.commonPrintQrcodeVisible=!0,this.$nextTick(function(){var t=[];e.extInfo.forEach(function(t){t.key==e.tableProp.batchPrintQrCodeField&&t.qrCode,"qrCode"==t.type&&t.qrCode}),e.selectedRows.forEach(function(n){e.tableData.forEach(function(e){e.id==n&&t.push(e)})}),console.log(t,9999e3),e.$refs.commonPrintQrcodeView.init(t)})):this.$XModal.alert("没有选中任何项")},batchUploadFile:function(){var e=this;this.batchUploadFileVisible=!0,this.$nextTick(function(){e.$refs.batchUploadFile.init()})},batchUploadFileSuccess:function(e){var t=this.tableProp.batchUploadFileNameField,n=this.tableProp.batchUploadFileUrlField,o={};o[t]=e.name,o[n]=e.url,this.saveRow(o)},getQrCodeContent:function(e,t){return t?(this.extInfo.forEach(function(n){t=t.replace("${"+n.name+"}",e[n.key])}),t.replace("${id}",e.id)):t=e.id,t},copyData:function(e){var t=this;this.$XModal.confirm("您确定要复制此条数据吗？").then(function(n){delete e.id,t.saveRow(e)})},isPublicVist:function(){return!(!this.$route.name||"open-form-view"!=this.$route.name)}},activated:function(){this.isMounted?(this.isMounted=!1,this.isChildView||this.refreshData(this.extIdProp,this.tableNameProp,this.selectedIdProp,this.queryIdsProp,this.extKeyProp)):this.getDataList()},mounted:function(){this.$route.name&&this.$route.query.tb&&(this.isChildView||(this.tableName=this.$route.query.tb,this.getExtInfo()))}}},"4pAz":function(e,t){},"52V+":function(e,t){},"59rQ":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a});var o=function(){return{uuid:"",type:"braid-txt",name:"",isEdit:!0,dragable:!0,resizable:!0,width:120,height:40,left:50,top:0,value:"自定义文本",title:"自定义文本",defaultValue:"自定义文本",style:{zIndex:1}}},i=function(){return["128A","128B","128C","128Auto","EAN8","EAN13","EAN128A","EAN128B","EAN128C","Code39","39Extended","2_5interleaved","2_5industrial","2_5matrix","UPC_A","UPC_E0","UPC_E1","UPCsupp2","UPCsupp5","Code93","93Extended","MSI","PostNet","Codabar","QRCode","PDF417"]},a=function(){return[{label:"普通项",value:0},{label:"页眉页脚",value:1},{label:"页号项",value:2},{label:"页数项",value:3},{label:"多页项",value:4}]}},"5NDU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("8skB"),i=n("VfYd"),a=(n("0xDb"),{components:{selectForm:o.a,rules:i.default},props:{formMap:{},variableMap:{}},data:function(){return{test:"123",baseData:{tableName:"",name:"",formMap:""}}},methods:{save:function(){this.$refs.rules&&this.$refs.rules.saveData(),this.$emit("saveNode",this.baseData)},init:function(e){var t=this;this.baseData=e,this.$nextTick(function(){null!=t.$refs.rules&&t.$refs.rules.getData()})},fresh:function(){this.baseData.formMap="",this.$forceUpdate(),this.$refs.rules&&this.$refs.rules.fresh()}}}),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},["未选择"==e.baseData.tableName?n("div",{staticClass:"text-center row-title",staticStyle:{"padding-top":"20px","font-size":"14px"}},[e._v("\n    请在块中选择表单\n  ")]):null==e.baseData.tableName?n("div",{staticClass:"text-center row-title",staticStyle:{"padding-top":"20px","font-size":"14px"}},[e._v("\n    请插入表单变量 "+e._s(e.baseData.tableName)+"\n  ")]):n("div",{staticClass:"col"},[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("目标表单")]),e._v("\n      "+e._s(e.formMap[e.baseData.tableName]?e.formMap[e.baseData.tableName].name:"")+"\n      ")]),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("创建规则")]),e._v(" "),n("rules",{ref:"rules",attrs:{upDataRuleType:"",modelData:e.baseData,formMap:e.formMap,tableName:e.baseData.tableName,variableMap:e.variableMap},model:{value:e.baseData.rules,callback:function(t){e.$set(e.baseData,"rules",t)},expression:"baseData.rules"}})],1)])])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("dUnL")},"data-v-1056b154",null);t.default=l.exports},"5Xn/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("nKSZ"),i=n("UEqw"),a=n("0xDb"),r=n("jB3U"),l=(n("TQvf"),{components:{formule:o.a,formuleList:i.a},props:{formMap:{},variableMap:{}},watch:{variableMap:{handler:function(e,t){},deep:!0}},data:function(){return{loading:!1,formuleShow:!1,baseData:{formule:""},methodList:a.j,fieldList:[],initFlist:[],initMlist:[],oldInitFlist:[],errorList:[]}},methods:{contrastVariable:function(){var e=[],t=[];this.initFlist.forEach(function(t){e.push(t.key)}),this.oldInitFlist.forEach(function(n){-1==e.indexOf(n.key)&&t.push(n)}),this.errorList=t;this.initFlist,this.initMlist,this.errorList},initCodemirror:function(e){var t=this;this.formuleShow=!0,this.loading=!0,setTimeout(function(){t.loading=!1,t.$refs.formule.init(e,t.baseData.formule)},200)},clickItem:function(e,t){this.$refs.formule.handleClick({name:e.name,value:"field"==t?"["+e.name+"]":e.value})},save:function(){var e=this.$refs.formule.getData();this.oldInitFlist=this.oldInitFlist.concat(e.fieldList),this.oldInitFlist=Object(a.B)(this.oldInitFlist,"key");var t={formule:e.format,oldInitFlist:this.oldInitFlist};this.baseData=t,this.$emit("saveNode",t)},initOption:function(e){var t=this,n=[],o=[],i=function(e){var i=t.variableMap[e];if(i.varType==r.g.commonData||i.varType==r.g.commonListData){var a={name:i.itemName,templateJson:[]};i.tableName&&t.formMap[i.tableName]&&t.formMap[i.tableName].templateJson.forEach(function(e){a.templateJson.push({name:""+e.name}),o.push({value:i.itemName+"-"+e.name,key:i.variableName+"@"+e.key,name:i.itemName+"-"+e.name})}),n.push(a)}else i.varType==r.g.blocklyVar&&(n.push({name:i.itemName}),o.push({value:i.itemName,key:i.variableName,name:i.itemName}))};for(var a in this.variableMap)i(a);this.fieldList=n,this.initFlist=o;var l=[];if(this.methodList.forEach(function(e){l=l.concat(e.list)}),this.initMlist=l,e){var s={fieldList:this.initFlist,methodList:this.initMlist};this.initCodemirror(s)}},onShowEvent:function(){this.initOption(),this.contrastVariable();var e={fieldList:this.initFlist,methodList:this.initMlist,errorList:this.errorList};this.formuleShow=!1,this.initCodemirror(e)},onCloseEvent:function(){this.save()},init:function(e){var t=this;!e.formule&&(e.formule=""),this.baseData=e,this.oldInitFlist=e.oldInitFlist?e.oldInitFlist:[],this.$nextTick(function(){t.initOption(!0)})}}}),s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"h100 row",staticStyle:{padding:"10px 10px 10px 5px"}},[n("div",{staticClass:"col"},[n("formuleList",{attrs:{fieldList:e.fieldList,methodList:e.methodList,isExcelEditor:!0},on:{click:e.clickItem}})],1),e._v(" "),n("div",{staticClass:"column",staticStyle:{"margin-left":"10px",width:"380px"}},[e._m(0),e._v(" "),n("div",{staticClass:"col"},[e.formuleShow?n("formule",{ref:"formule",staticClass:"h100"}):e._e()],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row tips"},[t("i",{staticClass:"el-alert__icon el-icon-info"}),this._v(" "),t("div",{staticClass:"col",staticStyle:{"line-height":"14px","margin-left":"5px"}},[this._v("请在上方选择函数或字段变量，且在英文输入法下编辑。")])])}]};var c=n("VU/8")(l,s,!1,function(e){n("rRUM")},"data-v-d13dc15c",null);t.default=c.exports},"5aCZ":function(e,t,n){"use strict";var o=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor visualblocks visualchars wordcount"],i=["fontsizeselect fontselect bold italic underline strikethrough alignleft aligncenter\n  alignright outdent indent hr bullist numlist link image charmap\t preview anchor pagebreak\n    insertdatetime media table forecolor backcolor removeformat  undo redo  fullscreen wordcount"],a=n("BO1k"),r=n.n(a),l=[];var s=function(e,t){var n=document.getElementById(e),o=t||function(){};if(!n){var i=document.createElement("script");i.src=e,i.id=e,document.body.appendChild(i),l.push(o),("onload"in i?function(t){t.onload=function(){this.onerror=this.onload=null;var e=!0,n=!1,o=void 0;try{for(var i,a=r()(l);!(e=(i=a.next()).done);e=!0){var s=i.value;s(null,t)}}catch(e){n=!0,o=e}finally{try{!e&&a.return&&a.return()}finally{if(n)throw o}}l=null},t.onerror=function(){this.onerror=this.onload=null,o(new Error("Failed to load "+e),t)}}:function(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t=!0,n=!1,o=void 0;try{for(var i,a=r()(l);!(t=(i=a.next()).done);t=!0){var s=i.value;s(null,e)}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}l=null}}})(i)}n&&o&&(window.tinymce?o(null,n):l.push(o))},c={name:"Tinymce",props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:""},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,token:this.$cookie.get("token"),languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"},imageDataReplaceMap:{}}},computed:{language:function(){return this.languageTypeList.zh},containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?e+"px":e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(t.tinymceId).setContent(e||"")})},language:function(){var e=this;this.$nextTick(function(){return e.initTinymce()})}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;s("https://fastly.jsdelivr.net/npm/tinymce-all-in-one@4.9.5/tinymce.min.js",function(t){t?e.$message.error(t.message):e.initTinymce()})},initTinymce:function(){var e=this,t=this;window.tinymce.init({language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body",branding:!1,object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:i,menubar:this.menubar,plugins:o,toolbar_drawer:!0,end_container_on_empty_block:!0,powerpaste_word_import:"clean",paste_data_images:!0,paste_enable_default_filters:!1,code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"default,circle,disc,square",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!0,fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",nonbreaking_force_tab:!0,statusbar:!0,init_instance_callback:function(n){console.log("init_instance_callback",n),t.value&&n.setContent(t.value),t.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",function(){e.hasChange=!0,e.$emit("input",n.getContent())})},setup:function(e){e.on("FullscreenStateChanged",function(e){t.fullscreen=e.state})},convert_urls:!1,images_upload_handler:function(n,o,i,a){var r=new FormData;r.append("file",n.blob()),e.$http({headers:{"Content-Type":"multipart/form-data"},url:window.SITE_CONFIG.baseUrl+"/sys/oss/uploadNoSaveInfo?token="+e.token,method:"post",data:r}).then(function(e){var n=e.data;0==n.code?(o(n.url),t.setContent(t.getContent())):i("HTTP Error: "+n.msg)})}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){return window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach(function(e){return window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'+e.url+'" >')})}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tinymce-container",class:{fullscreen:this.fullscreen},style:{width:this.containerWidth}},[t("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}})])},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(e){n("xQlF")},"data-v-6ecce7d7",null);t.a=d.exports},"5xRT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("TfE6"),i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ext-box"},["divider"==e.baseData.type?n("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[n("div",{staticClass:"main-color",staticStyle:{width:"100%",height:"30px","padding-left":"20px",background:"#efefef",display:"flex","align-items":"center"}},[n("i",{staticClass:"el-icon-s-order"}),e._v(" "),n("span",{staticStyle:{"font-size":"15px","font-weight":"bold","margin-left":"5px"}},[e._v(e._s(e.baseData.name))])]),e._v(" "),n("div",{staticClass:"divider_button"})]):n("el-form-item",{staticStyle:{"{width":"100%}"},attrs:{label:e.nolabel?"":e.baseData.name,prop:e.baseData.key}},["integer"==e.baseData.type?[e.isView?n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,showFormatType:e.baseData.showFormatType}}):n("el-input",{attrs:{type:"number",disabled:e.isView},on:{change:e.changeNumber},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}},[e.baseData.numSuffix?n("template",{slot:"append"},[e._v(e._s(e.baseData.numSuffix))]):e._e()],2)]:"float"==e.baseData.type?[e.isView?n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,showFormatType:e.baseData.showFormatType}}):n("el-input",{attrs:{type:"number",disabled:e.isView},on:{change:e.changeNumber},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}},[e.baseData.numSuffix?n("template",{slot:"append"},[e._v(e._s(e.baseData.numSuffix))]):e._e()],2)]:"select"==e.baseData.type?[e.isView?n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,ext:e.baseData,showFormatType:e.baseData.showFormatType}}):n("div",[e.baseData.selectShowType&&"down"!=e.baseData.selectShowType?n("tileSelect",{attrs:{ext:e.baseData},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}}):n("el-select",{attrs:{clearable:e.clearable,placeholder:"请选择"+e.baseData.name},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}},e._l(e.baseData.selectItem,function(t,o){return n("el-option",{key:o,attrs:{label:t.label,value:t.value}},[n("div",{staticClass:"row"},[t.color?n("div",{staticClass:"ext-select-color",style:"background-color:"+t.color}):e._e(),e._v(" "),n("div",{staticClass:"col"},[e._v(e._s(t.label))])])])}),1)],1)]:"multipleSelect"==e.baseData.type?[e.isView?n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,ext:e.baseData,showFormatType:e.baseData.showFormatType}}):n("div",[e.baseData.selectShowType&&"down"!=e.baseData.selectShowType?n("tileSelectMultiple",{attrs:{ext:e.baseData},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}}):n("el-select",{attrs:{multiple:"",clearable:e.clearable,placeholder:"请选择"+e.baseData.name},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}},e._l(e.baseData.selectItem,function(t,o){return n("el-option",{key:o,attrs:{label:t.label,value:t.value}},[n("div",{staticClass:"row"},[t.color?n("div",{staticClass:"ext-select-color",style:"background-color:"+t.color}):e._e(),e._v(" "),n("div",{staticClass:"col"},[e._v(e._s(t.label))])])])}),1)],1)]:"dateTime"==e.baseData.type?[e.isView?n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,showFormatType:e.baseData.showFormatType}}):n("baseTimePick",{attrs:{baseData:e.baseData},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}})]:"selectStaff"==e.baseData.type?[e.isView?n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,staffDetail:"",showFormatType:e.baseData.showFormatType}}):["selectStaff"==e.baseData.type?n("selectStaff",{attrs:{readOnly:e.isView,fieldDefine:e.baseData,parentPoint:e.parentPoint,single:!e.baseData.mustMultiple},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}}):e._e()]]:"selectInterface"==e.baseData.type?[e.isView?[e.modelDate?n("my-select",{class:{isView:e.isView},attrs:{id:e.modelDate,address:e.baseData.interfaceAddress,disabled:e.isView},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}}):n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,staffDetail:"",showFormatType:e.baseData.showFormatType}})]:[n("my-select",{class:{isView:e.isView},attrs:{id:e.modelDate,address:e.baseData.interfaceAddress,disabled:e.isView},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}})]]:"selectinterfaceTree"==e.baseData.type?[n("my-tree-select",{class:{isView:e.isView},attrs:{id:e.modelDate,address:e.baseData.interfaceAddress,disabled:e.isView},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}})]:"describe"==e.baseData.type?[n("div",{domProps:{innerHTML:e._s(e.baseData.describe)}})]:"picture"==e.baseData.type?[e.isView?e.modelDate?n("div",[n("filesList",{attrs:{modelDate:e.modelDate,isView:""}})],1):n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,showFormatType:e.baseData.showFormatType}}):n("div",[e.modelDate&&Array.isArray(e.modelDate)?n("div",[n("filesList",{attrs:{modelDate:e.modelDate,processMap:e.processMap},on:{delete:e.deleteImage}})],1):e._e(),e._v(" "),n("uploadForAliyuncs",{attrs:{modelDate:e.modelDate,accept:".jpg,.jpeg,.png,.bmp",limit:e.baseData.uploadNum},on:{uploadProcess:e.uploadProcess,onSuccess:e.uploadImageSuccess,beforeUpload:e.beforeUpload}},[n("el-button",{attrs:{size:"primary",type:"text"}},[e._v("上传")])],1)],1)]:"video"==e.baseData.type?[e.isView?e.modelDate?n("div",[n("filesList",{attrs:{modelDate:e.modelDate,isView:""}})],1):n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,showFormatType:e.baseData.showFormatType}}):n("div",[e.modelDate&&Array.isArray(e.modelDate)?n("div",[n("filesList",{attrs:{modelDate:e.modelDate,processMap:e.processMap},on:{delete:e.deleteImage}})],1):e._e(),e._v(" "),e.isView?e._e():n("uploadForAliyuncs",{attrs:{modelDate:e.modelDate,accept:".mp4,.avi",limit:e.baseData.uploadNum},on:{uploadProcess:e.uploadProcess,onSuccess:e.uploadImageSuccess,beforeUpload:e.beforeUpload}},[n("el-button",{attrs:{size:"primary",type:"text"}},[e._v("上传")])],1)],1)]:"file"==e.baseData.type?n("div",[e.isView?e.modelDate?n("div",[n("filesList",{attrs:{modelDate:e.modelDate,isView:""}})],1):n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,showFormatType:e.baseData.showFormatType}}):n("div",[e.modelDate&&Array.isArray(e.modelDate)?n("div",[n("filesList",{attrs:{modelDate:e.modelDate,processMap:e.processMap},on:{delete:e.deleteImage}})],1):e._e(),e._v(" "),e.isView?e._e():n("uploadForAliyuncs",{attrs:{modelDate:e.modelDate,limit:e.baseData.uploadNum},on:{uploadProcess:e.uploadProcess,onSuccess:e.uploadImageSuccess,beforeUpload:e.beforeUpload}},[n("el-button",{attrs:{size:"primary",type:"text"}},[e._v("上传")])],1)],1)],1):"formule"==e.baseData.type?n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,showFormatType:e.baseData.showFormatType}}):"baseData"==e.baseData.type?n("div",[e.isView?e._e():n("el-button",{staticStyle:{"margin-bottom":"15px"},on:{click:function(t){return e.gotoBaseDataTable(e.dataForm.id,e.baseData.baseDataTable,e.baseData.key,e.modelDate,!e.isView)}}},[e._v("\n        "+e._s("选择"+e.baseData.name)+"\n      ")]),e._v(" "),n("div",[n("showText",{attrs:{type:e.baseData.type,value:e.selectBaseData,noneDataText:"暂未选择"+e.baseData.name,showFormatType:e.baseData.showFormatType}})],1)],1):"location"==e.baseData.type?[e.isView?n("showText",{attrs:{ext:e.baseData,type:e.baseData.type,value:e.modelDate&&e.modelDate.address?e.modelDate.address:null,showFormatType:e.baseData.showFormatType}}):n("location",{attrs:{type:e.baseData.locationType},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}})]:"systemCalc"==e.baseData.type?[n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,showFormatType:e.baseData.showFormatType}})]:"richText"==e.baseData.type?n("div",{staticClass:"mod-demo-ueditor"},[e.isView?n("div",{domProps:{innerHTML:e._s(e.modelDate)}}):n("tinymce",{ref:"tinyDetailView",attrs:{height:250,width:"100%"},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}})],1):"childrenTable"==e.baseData.type?n("div",[n("common-view",{ref:"common",attrs:{"append-to-body":!0,isChildView:!0,extIdProp:e.dataForm.id?e.dataForm.id:e.tempChildrenTableExtId,extKeyProp:e.baseData.key,tableNameProp:e.baseData.childrenTableName,isViewProp:e.isView,noSearchBar:!0,tableConfig:{}},on:{onAddNewData:function(t){return e.childrenTableHaveSaveData()}}})],1):"relateTable"==e.baseData.type?n("div",[e.isView?e._e():n("el-button",{staticStyle:{"margin-bottom":"15px"},on:{click:function(t){return e.showChooseRelateTable(e.dataForm.id,e.baseData.relateTableName,e.baseData.key,e.modelDate,e.dataForm.relateTableExtId)}}},[e._v("\n        选择"+e._s(e.baseData.name)+"\n      ")]),e._v(" "),e.selectRow?n("div",{staticClass:"relate-box",staticStyle:{width:"100%"}},e._l(e.baseData.relateTableProps,function(t){return n("div",{staticClass:"row relate-row",attrs:{title:e.selectRow[JSON.parse(t).key]}},[n("div",[e._v("\n            "+e._s(JSON.parse(t).name)+"：\n          ")]),e._v(" "),n("div",{staticClass:"col relate-context"},[e._v("\n            "+e._s(e.getRelateTableShowText(e.selectRow,JSON.parse(t).key))+"\n          ")])])}),0):n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,noneDataText:"暂未选择"+e.baseData.name,showFormatType:e.baseData.showFormatType}})],1):"multipleRelateTable"==e.baseData.type?n("div",[e.isView?e._e():n("el-button",{staticStyle:{"margin-bottom":"15px"},on:{click:function(t){return e.showChooseRelateTable(e.dataForm.id,e.baseData.relateTableName,e.baseData.key,e.modelDate,e.dataForm.relateTableExtId,!0)}}},[e._v("\n        选择"+e._s(e.baseData.name)+"\n      ")]),e._v(" "),e.multipleRows.length?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.multipleRowsLoading,expression:"multipleRowsLoading"}],staticClass:"row",staticStyle:{"flex-wrap":"wrap"}},e._l(e.multipleRows,function(t){return n("div",{staticClass:"relate-box"},e._l(e.baseData.relateTableProps,function(o){return n("div",{staticClass:"row relate-row",attrs:{title:t[JSON.parse(o).key]?t[JSON.parse(o).key]:""}},[n("span",[e._v("\n                          "+e._s(JSON.parse(o).name)+"：\n                      ")]),e._v(" "),n("span",{staticClass:"col"},[e._v("\n                          "+e._s(t[JSON.parse(o).key]?t[JSON.parse(o).key]:"")+"\n                      ")])])}),0)}),0):n("showText",{attrs:{type:e.baseData.type,value:"",noneDataText:"暂未选择"+e.baseData.name,showFormatType:e.baseData.showFormatType}})],1):"propTable"==e.baseData.type?n("el-input",{attrs:{disabled:""},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}}):"autoSerialNum"==e.baseData.type?[n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,noneDataText:"自动生成",showFormatType:e.baseData.showFormatType}})]:"customFormDetailView"==e.baseData.type&&e.showCustomView?n("div",[e.baseData.customFormDetailViewPath?n("customFormDetailView",{ref:"customFormDetailView",tag:"component",attrs:{parentPoint:e.parentPoint,extInfo:e.baseData.customFormDetailViewExtInfo}}):e._e()],1):"qrCode"==e.baseData.type?[n("el-popover",{attrs:{placement:"right",width:"320",height:"320",trigger:"click"}},[n("qrcode",{attrs:{value:e.modelDate,options:{size:300}}}),e._v(" "),n("qrcode",{attrs:{slot:"reference",value:e.modelDate,options:{size:100}},slot:"reference"})],1)]:[e.isView?n("showText",{attrs:{type:e.baseData.type,value:e.modelDate,showFormatType:e.baseData.showFormatType}}):n("el-input",{attrs:{rows:e.baseData.textRow,type:e.baseData.textRow>1?"textarea":""},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}})],e._v(" "),null!=e.baseData.fieldInfo?n("div",{staticClass:"filed-info"},[e._v(e._s(e.baseData.fieldInfo))]):e._e()],2),e._v(" "),e.commonDialogVisible?n("common-dialog",{ref:"commonDialog"}):e._e(),e._v(" "),e.fileListVisible?n("file-list",{ref:"fileList",on:{fileListChange:e.fileListChange}}):e._e(),e._v(" "),e.baseDataTableViewVisible?n("common-basedata-table-dialog",{ref:"baseDataTableDialog",on:{updateBaseData:e.updateBaseData,updateBaseDataFilterData:e.updateBaseDataFilterData}}):e._e(),e._v(" "),e.commonRelateTableViewVisible?n("common-relatetable-view-dialog",{ref:"commonRelateTableView"}):e._e(),e._v(" "),e.commonPropTableViewVisible?n("common-proptable-view-dialog",{ref:"commonPropTableView",on:{updatePropItemData:e.updatePropItemData}}):e._e(),e._v(" "),e.commonRelateTableDialogVisible?n("common-relatetable-dialog",{ref:"commonRelateTableDialog",on:{updateRelateItemData:e.updateRelateItemData}}):e._e(),e._v(" "),e.commonRelateTableDialogMultipleVisible?n("commonRelateTableDialogMultiple",{ref:"commonRelateTableDialogMultiple",on:{updateRelateItemData:e.updateRelateItemDataMultiple}}):e._e()],1)},staticRenderFns:[]};var a=function(e){n("6mQy")},r=n("VU/8")(o.a,i,!1,a,"data-v-0486abee",null);t.default=r.exports},"6f7G":function(e,t){},"6mQy":function(e,t){},"6sdf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-admin",use:"icon-admin-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-admin"><defs><style type="text/css"></style></defs><path d="M491.392 286.464m-286.464 0a4.476 4.476 0 1 0 572.928 0 4.476 4.476 0 1 0-572.928 0Z" p-id="1424" /><path d="M869.312 523.264c-35.392-43.2-101.888-51.2-140.16-10.496-59.648 63.36-143.744 103.232-237.824 103.232-83.264 0-158.976-31.04-216.832-82.048C230.656 495.296 161.856 510.592 129.024 558.976c-49.28 72.768-78.4 160.064-78.4 254.72 0 19.072 1.28 37.76 3.648 56.064C66.176 960.32 150.272 1024 241.536 1024l539.392 0c100.544 0 183.744-77.824 191.232-178.048 0.768-10.624 1.216-21.376 1.216-32.192C973.376 703.296 934.208 602.432 869.312 523.264z" p-id="1425" /></symbol>'});r.a.add(l);t.default=l},"7+Dk":function(e,t,n){"use strict";var o=n("NGEn"),i=n.n(o),a={name:"table-tree-column",props:{prop:{type:String},treeKey:{type:String,default:"id"},parentKey:{type:String,default:"parentId"},levelKey:{type:String,default:"_level"},childKey:{type:String,default:"children"}},methods:{childStyles:function(e){return{"padding-left":(e[this.levelKey]>1?7*e[this.levelKey]:0)+"px"}},iconClasses:function(e){return[e._expanded?"el-icon-caret-bottom":"el-icon-caret-right"]},iconStyles:function(e){return{visibility:this.hasChild(e)?"visible":"hidden"}},hasChild:function(e){return i()(e[this.childKey])&&e[this.childKey].length>=1||!1},toggleHandle:function(e,t){var n=this;if(this.hasChild(t)){var o=this.$parent.store.states.data.slice(0);o[e]._expanded=!o[e]._expanded,o=o[e]._expanded?o.splice(0,e+1).concat(t[this.childKey]).concat(o):this.removeChildNode(o,t[this.treeKey]),this.$parent.store.commit("setData",o),this.$nextTick(function(){n.$parent.doLayout()})}},removeChildNode:function(e,t){var n=i()(t)?t:[t];if(t.length<=0)return e;for(var o=[],a=0;a<e.length;a++)-1!==n.indexOf(e[a][this.parentKey])&&-1===n.indexOf(e[a][this.treeKey])&&(o.push(e.splice(a,1)[0][this.treeKey]),a--);return this.removeChildNode(e,o)}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table-column",e._b({attrs:{prop:e.prop},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{style:e.childStyles(t.row),on:{click:function(n){return n.preventDefault(),e.toggleHandle(t.$index,t.row)}}},[n("i",{class:e.iconClasses(t.row),style:e.iconStyles(t.row)}),e._v("\n      "+e._s(t.row[e.prop])+"\n    ")])]}}])},"el-table-column",e.$attrs,!1))},staticRenderFns:[]},l=n("VU/8")(a,r,!1,null,null,null);t.a=l.exports},"71TV":function(e,t){},"745y":function(e,t){},"7M+i":function(e,t){},"7Wi0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("8JQ2"),i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("vxe-modal",{attrs:{width:"90%",height:"90%",title:e.id?"修改":"新增",resize:"",loading:e.loading,showFooter:!!e.id},on:{close:function(t){return e.cancle()},cancel:function(t){return e.cancle()}},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[e.winTitle?n("span",[e._v(e._s(e.winTitle))]):n("span",[e._v(e._s(e.id?e.isView?"查看":"修改":"新增"))]),e._v(" "),e.id?n("customButtom",{ref:"customButtom",staticStyle:{"margin-left":"15px"},attrs:{btns:e.customBtn,tableName:e.tableName,tableDataId:e.id},on:{success:e.btnSuccess}}):e._e(),e._v(" "),n("div",{staticClass:"col"}),e._v(" "),e.isView?e._e():n("el-button",{on:{click:function(t){return e.cancle()}}},[e._v("取消")]),e._v(" "),e.isView?e._e():n("el-button",{attrs:{type:"primary",loading:e.savebtnLoading},on:{click:function(t){return e.save()}}},[e._v("保存")])],1)]},proxy:!0},{key:"default",fn:function(){return[n("div",{staticClass:"row h100"},[n("common-add-or-update-view",{ref:"commonAddOrUpdateView1",staticClass:"col",attrs:{isChildView:e.isChildView,isOpen:e.isOpen},on:{onAddNewData:e.onAddNewData,refreshDataList:e.refreshDataList,saveError:function(t){e.savebtnLoading=!1},getData:e.initBaseData,getInfoByTable:e.getInfoByTable,close:e.close,changeLoading:function(t){e.loading=t}}}),e._v(" "),e.id&&e.baseData&&e.baseData.processHistory&&e.visible?n("div",{staticClass:"journal-box column h100"},[n("div",{staticStyle:{"font-weight":"bold","font-size":"14px","padding-left":"10px","padding-top":"10px"}},[e._v("\n            日志\n          ")]),e._v(" "),n("div",{staticClass:"col overflow-auto"},[e._l(e.baseData.processHistory,function(t,o){return n("div",{staticClass:"journal-item"},[n("div",{staticClass:"state-box",style:"background:"+e.nodeStateMap[t.state].color}),e._v(" "),o!=e.baseData.processHistory.length-1?n("div",{staticClass:"state-line"}):e._e(),e._v(" "),n("div",{staticClass:"journal-item-right"},[n("div",{staticStyle:{"margin-top":"10px","margin-bottom":"8px","font-size":"13px"}},[e._v("\n                  "+e._s(t.endTime?e.timestampFormat(t.endTime):"")+"\n                ")]),e._v(" "),n("div",{staticClass:"journal-item-detail"},[n("div",{staticClass:"title"},[e._v("\n                    "+e._s(t.taskName)+"\n                  ")]),e._v(" "),n("div",{staticClass:"context row",attrs:{slot:"reference"},slot:"reference"},[n("div",{style:"padding-right:10px;"},[t.assigneeUsers?n("staff-tag",{attrs:{userId:t.assigneeUsers&&t.assigneeUsers[0]?t.assigneeUsers[0].userId:null}},[e._v(e._s(t.assigneeUsers&&t.assigneeUsers[0]?t.assigneeUsers[0].realname:""))]):e._e()],1),e._v(" "),n("div",[t.comments?n("div",e._l(t.comments,function(o){return n("span",{staticStyle:{"font-size":"13px","font-weight":"bold"},style:"color:"+e.nodeStateMap[t.state].color},[e._v(e._s(o.message))])}),0):e._e(),e._v(" "),"pending"==t.state?n("div",{staticStyle:{color:"#F56C6C","font-weight":"bold",cursor:"pointer"}},[n("el-popover",{attrs:{placement:"left",width:"300",trigger:"click"}},[n("div",[n("div",{staticStyle:{"font-size":"18px",padding:"0px 0 10px"}},[e._v(e._s(t.taskName)+e._s(t.approvalType?" ("+e.taskTypeMap[t.approvalType].label+")":""))]),e._v(" "),t.approvalType?n("div",{staticStyle:{padding:"5px",background:"#F9FAFC","margin-bottom":"10px"}},[e._v("\n                              "+e._s(e.taskTypeMap[t.approvalType].text)+"\n                            ")]):e._e(),e._v(" "),e._l(t.assigneeUsers,function(t){return n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{"line-height":"24px","margin-bottom":"5px"}},[n("staff-tag",{attrs:{userId:t.userId}},[e._v(e._s(t.realname))])],1),e._v(" "),n("div",[n("el-alert",{staticStyle:{padding:"2px 5px"},attrs:{title:"处理中",type:"warning",center:"",closable:!1}})],1)])})],2),e._v(" "),n("span",{staticStyle:{"font-size":"13px"},attrs:{slot:"reference",title:"查看详情"},slot:"reference"},[e._v(e._s(t.assigneeUsers.length>1?"等"+t.assigneeUsers.length+"位成员":"")+"待处理")])])],1):e._e()])])])])])}),e._v(" "),n("div",{staticStyle:{"font-weight":"bold","font-size":"13px","padding-left":"35px","padding-top":"20px"}},[e._v("\n              流程状态："+e._s(e.processState[e.baseData.processState])+"\n            ")])],2)]):e._e()],1),e._v(" "),n("vxe-modal",{attrs:{width:"30%",title:"确认",resize:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",[e._v("确认")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"0px",float:"right"},on:{click:function(t){e.winVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px",float:"right"},attrs:{type:"primary",loading:e.btnLoading},on:{click:e.doUrl}},[e._v("确定")])]},proxy:!0}],null,!1,3164534484),model:{value:e.winVisible,callback:function(t){e.winVisible=t},expression:"winVisible"}},[n("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"处理反馈"}},[n("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.dataForm.msg,callback:function(t){e.$set(e.dataForm,"msg",t)},expression:"dataForm.msg"}})],1)],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[e.baseData&&e.baseData.processTaskInfo?n("div",{staticClass:"row",staticStyle:{color:"black","font-size":"13px"}},[n("div",{staticClass:"col"}),e._v(" "),n("div",{staticStyle:{"line-height":"28px"}},[n("span",[e.baseData.startNode.assigneeUsers?n("staff-tag",{attrs:{userId:e.baseData.startNode.assigneeUsers[0].userId}},[e._v(e._s(e.baseData.startNode.assigneeUsers[0].realname))]):e._e(),e._v(" "+e._s(e.timestampFormat(e.baseData.startNode.startTime))+" 发起申请")],1)]),e._v(" "),e._l(e.baseData.processTaskInfo.tasksButtons,function(t,o){return n("div",{staticClass:"row"},[n("div",{staticStyle:{"font-weight":"bold","line-height":"28px","padding-left":"20px","margin-left":"20px"},style:0!=o?"border-left: 1px solid #c5c5c5;":""},[e._v(e._s(t.taskName))]),e._v(" "),e._l(t.operateButton,function(t){return n("el-button",{key:t.type,staticStyle:{"margin-left":"15px"},attrs:{type:e.typeMap[t.type]},on:{click:function(n){return e.beforeCheck(t)}}},[e._v(e._s(t.name))])})],2)})],2):e._e()]},proxy:!0}],null,!1,3214902756),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}):e._e()},staticRenderFns:[]};var a=function(e){n("IxYI")},r=n("VU/8")(o.a,i,!1,a,"data-v-77ca75fc",null);t.default=r.exports},"7aRh":function(e,t){},"7tmk":function(e,t,n){e.exports=n.p+"static/img/xls.b64e941.svg"},"7xC7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("KPhi"),i={props:{data:{}},data:function(){return{option:{video:""},optionFilter:{video:["video"]},selected:""}},methods:{getOption:function(){return{option:this.option,optionFilter:this.optionFilter}},click:function(e){this.selected=e,this.$emit("select",e)}},created:function(){this.optionFilter.mainTitle=Object(o.a)()}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row",staticStyle:{"flex-wrap":"wrap"}},e._l(6,function(t,o){return n("div",{key:o,staticClass:"base-box"},[n("div",{staticClass:"secondary-title cursor-pointer video",class:"video"==e.selected?"selected-box":"normal-box",on:{click:function(t){return e.click("video")}}},[e._m(0,!0)])])}),0),e._v(" "),n("div",{staticClass:"text-center"},[e._v("\r\n    暂无更多\r\n")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"context"},[t("i",{staticClass:"el-icon-video-play"})])}]};var r=n("VU/8")(i,a,!1,function(e){n("x9xu")},"data-v-1c246e30",null);t.default=r.exports},"7xIN":function(e,t){},"8GzZ":function(e,t,n){"use strict";var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"fill-content",style:{background:e.itemOption.backgroundColor},attrs:{shadow:"hover"},nativeOn:{click:function(t){return e.goLink()}}},[n("i",{class:e.itemOption.backgroundIcon,staticStyle:{color:"#f0f0f0",opacity:"0.2","font-size":"100px",position:"absolute",right:"0px",bottom:"10px"}}),e._v(" "),n("div",{staticClass:"flex-center"},[null!=e.itemOption.name&&""!=e.itemOption.name?n("div",{staticClass:"grid-card-dashboard-title  mar-buttom ",style:{color:e.itemOption.titleColor}},[e._v("\n        "+e._s(e.itemOption.name)+"\n      ")]):e._e(),e._v(" "),n("div",{staticClass:"number",style:{color:e.itemOption.numColor}},[e._v("\n        "+e._s(e.num?e.num:0)+"\n      ")])])])},staticRenderFns:[]};var i=n("VU/8")({props:{itemOption:{},isEdit:{}},data:function(){return{num:null}},mounted:function(){this.isEdit?this.num=999:this.getData()},methods:{goLink:function(){this.isEdit||this.itemOption.tableDataFilter&&this.$emit("onTableDataFilter",this.itemOption.tableDataFilter)},getData:function(e){var t=this;this.itemOption.tableDataFilter&&this.$http({url:this.$http.adornUrl("/common/common/listCount"),method:"post",data:{tableName:this.itemOption.tableName,dataFilterInfo:this.itemOption.tableDataFilter}}).then(function(e){var n=e.data;0==n.code&&n.data&&(t.num=n.data)})},onCtrDataChange:function(e){this.getData(e)}}},o,!1,function(e){n("745y")},"data-v-29103bbc",null);t.a=i.exports},"8JQ2":function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_2__common_add_or_update_view_index_vue__=__webpack_require__("gxOO"),__WEBPACK_IMPORTED_MODULE_3__utils__=__webpack_require__("0xDb"),__WEBPACK_IMPORTED_MODULE_4__components_custom_custom_buttom_vue__=__webpack_require__("YBOz"),__WEBPACK_IMPORTED_MODULE_5__dataProcess_openRobotDialog_openRobotDialog__=__webpack_require__("e4/+");__webpack_exports__.a={props:{winTitle:{type:String},isOpen:{default:!1,type:Boolean},isChildView:{require:!1}},data:function(){return{continueAdd:!1,customBtn:[],btnLoading:!1,taskTypeMap:{1:{label:"或签",text:"或签类型需要一个负责人通过"},2:{label:"会签",text:"会签类型需要全部负责人通过"}},winVisible:!1,dataForm:{msg:""},id:null,tableName:"",isView:"",extId:"",extKey:"",visible:!1,loading:!1,savebtnLoading:!1,baseData:{},nodeStateMap:{pending:{color:"rgb(245, 188, 33)"},start_apply:{color:"rgb(82, 120, 166)"},agree:{color:"rgb(54, 219, 178)"},reject:{color:"#F56C6C"},rollback:{color:"#F56C6C"},none:{color:"#F56C6C"}},processState:{0:"流程中",1:"流程结束",2:"流程拒绝",3:"流程待完善",4:"异常结束"},typeMap:{accept:"success",reject:"danger",rollBackTask:"warning",reApply:""}}},components:{CommonAddOrUpdateView:__WEBPACK_IMPORTED_MODULE_2__common_add_or_update_view_index_vue__.default,customButtom:__WEBPACK_IMPORTED_MODULE_4__components_custom_custom_buttom_vue__.a},methods:{getInfoByTable:function(e){var t=this,n=e.customView?JSON.parse(e.customView):null;n&&(this.customBtn=[],n.customBtn&&n.customBtn.forEach(function(e){"operate"==e.position&&t.customBtn.push(e)}),this.$nextTick(function(){t.$refs.customButtom&&t.$refs.customButtom.getEnableInfo()}))},initBaseData:function(e){if(console.log(e,this.baseData,9999999998),e.processHistory)for(var t in e.processHistory){var n=e.processHistory[t];"start_apply"==n.state&&(e.startNode=n)}this.baseData=e,console.log(this.baseData,9999999998)},timestampFormat:function(e){var t=Date.parse(e)/1e3;return Object(__WEBPACK_IMPORTED_MODULE_3__utils__.y)(t)},doRobot:function(e,t){var n=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function o(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:n.$loading.show(),n.$http({url:n.$http.adornUrl("/robot/commonrobot/robotDo"),method:"post",data:n.$http.adornData({tableName:n.tableName,tableDataId:n.id,robotId:e})}).then(function(e){var o=e.data;n.$loading.hide(),o&&0===o.code?o.data.isOpenRobotDialog?Object(__WEBPACK_IMPORTED_MODULE_5__dataProcess_openRobotDialog_openRobotDialog__.a)(n,o.data,null,n.robotDoFinish):n.robotDoFinish(o,t):n.$message.error(o.msg)});case 2:case"end":return o.stop()}},o,n)}))()},robotDoFinish:function robotDoFinish(data,dontDoProcess){data.jsScript&&eval(data.jsScript),dontDoProcess||this.doUrl()},beforeCheck:function(e){var t=this;if(e.agreeIsCanExecRobotId||e.rejectIsCanExecRobotId){var n=e.agreeIsCanExecRobotId||e.rejectIsCanExecRobotId;this.$http({url:this.$http.adornUrl("/robot/commonrobot/robotDo"),method:"post",data:this.$http.adornData({tableName:this.tableName,tableDataId:this.id,robotId:n})}).then(function(n){var o=n.data;if(t.$loading.hide(),o&&0===o.code)if(o.data){var i=JSON.parse(o.data);i.isPass?t.doOption(e):t.$message.error(i.msg)}else t.$message.error(o.msg);else t.$message.error(o.msg)})}else this.doOption(e)},doOption:function(e){this.opt=e;var t=!1;e.agreeFillTableRobotId&&(this.doRobot(e.agreeFillTableRobotId,!1),t=!0),e.rejectFillTableRobotId&&(this.doRobot(e.rejectFillTableRobotId,!1),t=!0),this.dataForm.msg="",t||(this.winVisible=!0)},afterOperateDo:function(){this.opt.afterAgreeRobotId&&this.doRobot(this.opt.afterAgreeRobotId,!0),this.opt.afterRejectRobotId&&this.doRobot(this.opt.afterRejectRobotId,!0)},doUrl:function(){var e=this;this.btnLoading=!0,this.$http({url:this.$http.adornUrl(this.opt.url),method:"post",data:{commonDataId:this.id,commonDataTableName:this.tableName,msg:this.dataForm.msg}}).then(function(t){var n=t.data;e.btnLoading=!1,e.$loading.hide(),n&&0===n.code?(e.afterOperateDo(),e.visible=!1,e.refreshDataList(),e.$message.success(e.opt.name+"成功")):e.$message.error(n.msh),e.winVisible=!1})},onAddNewData:function(){this.$emit("onAddNewData")},refreshDataList:function(){this.savebtnLoading=!1,this.$emit("refreshDataList")},cancle:function(){this.visible=!1,this.$refs.commonAddOrUpdateView1.cancle()},save:function(){this.savebtnLoading=!0,this.$refs.commonAddOrUpdateView1.save()},saveAndAdd:function(){this.continueAdd=!0,this.save()},close:function(){this.continueAdd?this.init(this.id,this.isView,this.tableName,this.extId,this.extKey):this.cancle()},init:function(e,t,n,o,i){var a=this;this.continueAdd=!1,this.savebtnLoading=!1,this.tableName=n,this.id=e,this.isView=t,this.extId=o,this.extKey=i,this.visible=!0,this.baseData.processHistory=null,this.$nextTick(function(){a.$refs.commonAddOrUpdateView1.init(e,t,n,o,i)})},btnSuccess:function(){this.$emit("refreshDataList"),this.init(this.id,this.isView,this.tableName,this.extId)},initParentId:function(e){var t=this;this.$nextTick(function(){t.$refs.commonAddOrUpdateView1.initParentId(e)})}}}},"8L6u":function(e,t){},"8Qdk":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={computed:{isEdit:{get:function(){return this.$store.state.common.isEdit},set:function(e){this.$store.commit("common/changeEditMode",e)}}},data:function(){return{url:"",editUrl:""}},methods:{goWin:function(){window.open(this.url)},edit:function(){window.open(this.editUrl)}},mounted:function(){this.url=this.$route.meta.iviewUrl,this.editUrl=this.url.replace("preview","home"),console.log(this.$route,this.url,this.editUrl)}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h100"},[n("el-button",{staticStyle:{position:"absolute",top:"10px",left:"30px","z-index":"999"},style:e.isEdit?"top:40px":"",attrs:{type:"primary"},on:{click:function(t){return e.goWin()}}},[e._v("新窗口打开")]),e._v(" "),e.isEdit?n("div",{staticClass:"edit-mode-text row cursor-pointer",staticStyle:{width:"85px","line-height":"20px",margin:"5px","margin-left":"15px",position:"absolute",top:"5px"},on:{click:function(t){return e.edit()}}},[n("i",{staticClass:"el-icon-edit",staticStyle:{"line-height":"20px"}}),e._v(" "),n("div",{staticClass:"col text-center"},[e._v("编辑大屏")])]):e._e(),e._v(" "),n("iframe",{attrs:{src:e.url,width:"100%",height:"100%",frameborder:"0",scrolling:"yes"}})],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("ygPG")},null,null);t.default=a.exports},"8RPk":function(e,t){},"8skB":function(e,t,n){"use strict";var o={props:{value:{},exts:{},dataForm:{}},watch:{value:{handler:function(e){this.text=e},deep:!0,immediate:!0},text:{handler:function(e){this.$emit("change",e)},deep:!0,immediate:!0}},model:{prop:"value",event:"change"},data:function(){return{options:[],text:"",optMap:{}}},methods:{selectOpt:function(e){this.$emit("tableName",this.optMap[e])}},mounted:function(){var e=this;this.$http({url:this.$http.adornUrl("/common/commondefine/list"),method:"post",data:this.$http.adornParams({page:1,limit:999,tableType:"dataTable",appId:JSON.parse(localStorage.getItem("app")).appId})}).then(function(t){var n=t.data;if(n&&0===n.code&&n.page){var o=[];if(e.dataForm)for(var i in n.page.list){var a=n.page.list[i];a.id!=e.dataForm.id&&o.push(a)}for(var r in e.$set(e,"options",o),e.options){var l=e.options[r];e.optMap[l.id]=l.tableName}}})}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:e.selectOpt},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},e._l(e.options,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("bT2Z")},"data-v-171a6763",null);t.a=a.exports},"91v6":function(e,t){},"9B1S":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a={components:{bi:n("qmgD").default},data:function(){return{showMenu:!1,select:null,typeList:[{name:"时间控制器",icon:"el-icon-time",info:{itemType:"timeController"}},{name:"人员控制器",icon:"el-icon-user",info:{itemType:"userController"}},{name:"表单控制器",icon:"el-icon-user",info:{itemType:"tableController"}},{name:"图表",icon:"el-icon-data-analysis",info:{itemType:"charts"}},{name:"表格",icon:"el-icon-s-grid",info:{itemType:"table"}},{name:"数据表格",icon:"el-icon-s-grid",info:{itemType:"dataTable"}},{name:"图片",icon:"el-icon-picture",info:{itemType:"picture"}},{name:"文本",icon:"el-icon-chat-line-square",info:{itemType:"text",color:"#000000",text:"文本",weight:300,size:18,w:6,h:2}},{name:"富文本框",icon:"el-icon-edit-outline",info:{itemType:"richText"}},{name:"常用",icon:"el-icon-star-off",info:{itemType:"star",name:"常用"}},{name:"时间树",icon:"el-icon-sort-up",info:{itemType:"timeTree",name:"时间树",w:12,h:24}},{name:"指标卡",icon:"el-icon-crop",info:{itemType:"numCard",name:"指标卡",w:6,h:8}},{name:"对比指标卡",icon:"el-icon-c-scale-to-original",info:{itemType:"numContrastCard",name:"对比指标卡",w:6,h:8}},{name:"日程",icon:"el-icon-date",info:{itemType:"calendar",w:24,h:22}},{name:"网页",icon:"el-icon-monitor",info:{itemType:"iframe"}},{name:"数据分析",icon:"el-icon-s-data",info:{itemType:"bi"},showMenu:!0},{name:"子门户",icon:"el-icon-s-data",info:{itemType:"component"}},{name:"表格数据筛选器",icon:"el-icon-s-data",info:{itemType:"tableDataFilter"}},{name:"表单详情",icon:"el-icon-s-data",info:{itemType:"tableDataDetail"}},{name:"填写表单",icon:"el-icon-s-data",info:{itemType:"tableDataForm"}},{name:"卡片链接",icon:"el-icon-s-data",info:{itemType:"cardLink"}},{name:"自定义视图",icon:"el-icon-s-data",info:{itemType:"customView"}}]}},methods:{addItemByInfo:function(e){var t=i()(this.select,e);this.$emit("addItem",t),this.showMenu=!1,document.removeEventListener("click",this.checkClick)},addItem:function(e){var t=this;e.showMenu?(this.select=e.info,this.$set(this,"showMenu",!0),document.removeEventListener("click",this.checkClick),setTimeout(function(){document.addEventListener("click",t.checkClick)},1)):this.$emit("addItem",e.info)},checkClick:function(e){var t=this.$refs.menu;console.log(t),console.log(t.contains(e.target)),t.contains(e.target)||this.showMenu&&(this.$set(this,"showMenu",!1),document.removeEventListener("click",this.checkClick))}},mounted:function(){},beforeDestroy:function(){document.removeEventListener("click",this.checkClick)}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"position-relative"},[n("div",{staticClass:"left-box"},e._l(e.typeList,function(t,o){return n("el-tooltip",{key:o,attrs:{effect:"dark",content:t.name,placement:"right"}},[n("div",{staticClass:"text-center btn",on:{click:function(n){return e.addItem(t)}}},[n("i",{class:t.icon,staticStyle:{"font-size":"26px"}})])])}),1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],ref:"menu",staticClass:"position-absolute menu-box"},[e.showMenu&&e.select&&"bi"==e.select.itemType?n("bi",{on:{addItem:e.addItemByInfo}}):e._e()],1)])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("52V+")},"data-v-72231907",null);t.default=l.exports},"9Clw":function(e,t){},"9Gyk":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("8U58"),i=n("I9bT"),a=(n("4/hK"),n("tPrY"),n("epNC"),n("/TiH"),n("zdrL"),{data:function(){return{CodeMirrorEditor:null,theme:"night",activeIndex:0,posLeft:0,posTop:0,tipShow:!1,tipShowType:null,dropList:[],blurFlag:!1,fieldList:[],methodList:[],errorList:[],normalList:[]}},methods:{setValue:function(e){var t=this;this.$nextTick(function(){t.CodeMirrorEditor.setValue(e||"")})},getValue:function(){return this.CodeMirrorEditor.getValue()},setData:function(e){var t=e;t&&(this.fieldList.forEach(function(e){var n=new RegExp("\\["+e.key+"\\]","g");t=t.replace(n,"["+e.name+"]")}),this.errorList.forEach(function(e){var n=new RegExp("\\["+e.key+"\\]","g");t=t.replace(n,"["+e.name+"]")})),this.setValue(t)},getData:function(){var e=this.CodeMirrorEditor.getValue(),t=[];return this.fieldList.forEach(function(n){var o=new RegExp("\\["+n.name+"\\]","g");if(e.match(o)&&t.push(n),n.key.indexOf("@")>-1){var i=n.key.split("@");e="ID"==i[1]?e.replace(o,i[0]+"@ID"):e.replace(o,i[0]+"@"+i[1])}else e=e.replace(o,""+n.key)}),{jscode:e+=";",fieldList:t,str:this.CodeMirrorEditor.getValue()}},getArrTypeData:function(e,t){var n=[];for(var o in e){var i=e[o];n.push("@"==t?"["+i.name+"]":i.name)}return n.sort(function(e,t){return t.length-e.length}),n},init:function(e,t){var n=this;this.setState(e);var a={codemirrorFieldList:this.getArrTypeData(this.fieldList?this.fieldList:[],"@"),codemirrorMethodList:this.getArrTypeData(this.methodList?this.methodList:[],"#"),codemirrorErrorList:this.getArrTypeData(this.errorList?this.errorList:[],"@")};this.fieldList.sort(function(e,t){return t.name.length-e.name.length}),Object(i.a)(a),this.CodeMirrorEditor=o.fromTextArea(this.$refs.codemirror,{mode:"defineScript",theme:"3024-day",lineNumbers:!1,lineWrapping:!0}),this.CodeMirrorEditor.setSize("auto","100%"),this.setData(t),this.CodeMirrorEditor.on("cursorActivity",function(e){n.cursorActivity(e)}),this.CodeMirrorEditor.on("changes",function(e){}),this.CodeMirrorEditor.addKeyMap({Up:function(e){n.tipShow?n.enterFuc("up"):e.execCommand("goLineUp")},Down:function(e){n.tipShow?n.enterFuc("down"):e.execCommand("goLineDown")},Enter:function(e){n.tipShow?n.enterFuc("enter"):e.execCommand("newlineAndIndent")},Esc:function(){},F9:function(){}})},handleClick:function(e,t){var n=this,o=this.CodeMirrorEditor.getCursor(),i=this.CodeMirrorEditor.getLine(o.line).substring(0,o.ch);if(t){if("#"==t){var a=i.lastIndexOf(" ",o.ch);this.CodeMirrorEditor.setSelection({line:o.line,ch:a+1},{line:o.line,ch:o.ch});var r=e.value;this.CodeMirrorEditor.replaceSelection(r),this.CodeMirrorEditor.setCursor(o.line,a+1+r.length)}else if("@"==t){var l=i.lastIndexOf("[",o.ch);this.CodeMirrorEditor.setSelection({line:o.line,ch:l},{line:o.line,ch:o.ch});var s="["+e.value+"]";this.CodeMirrorEditor.replaceSelection(s),this.CodeMirrorEditor.setCursor(o.line,l+s.length+1)}}else{var c=e.value;this.CodeMirrorEditor.setSelection({line:o.line,ch:o.ch},{line:o.line,ch:o.ch}),-1!=c.indexOf("[")&&-1!=c.indexOf("]")&&(c=c),this.CodeMirrorEditor.replaceSelection(c)}this.CodeMirrorEditor.focus(),setTimeout(function(){n.setState({tipShow:!1,tipShowType:null})},100)},enterFuc:function(e){if("up"===e)0!=this.activeIndex&&this.activeIndex--;else if("down"===e)this.activeIndex!=this.dropList.length-1&&this.activeIndex++;else if("enter"===e){var t=this.dropList[this.activeIndex];this.handleClick({name:t.name,value:t.value},this.tipShowType)}},setState:function(e){for(var t in e)this.$set(this,t,e[t])},search:function(e,t){var n=[];("@"===t?this.fieldList:this.methodList).forEach(function(t){var o=new RegExp(e,"i");t.name.match(o)&&n.push(t)}),this.setState({dropList:n,activeIndex:0})},hasSpecialStr:function(e){for(var t="~·`!！@#$￥%^…&*()（）—-_=+[]{}【】、|\\;:；：'\"“‘,./<>《》?？，。",n=t.length,o=0;o<n;o++)if(-1!=e.indexOf(t.substring(o,o+1)))return!0;return!1},cursorActivity:function(e){var t=this.fieldList,n=this.methodList,o=e.getCursor(),i=e.cursorCoords(o),a=e.getLine(o.line).substring(0,o.ch),r=a.lastIndexOf(" ",o.ch),l=a.lastIndexOf("[",o.ch);if(t.length>0&&-1!==l&&l>r){var s=a.substring(l+1,o.ch);t.find(function(e){return e.name.includes(s)})?(this.setState({posLeft:i.left,posTop:i.top+20,tipShow:!0,tipShowType:"@"}),this.search(s,"@")):this.setState({tipShow:!1,tipShowType:null})}else if(n.length>0){var c="";if((c=r?a.substring(r+1,o.ch):a.substring(0,o.ch))&&!this.hasSpecialStr(c))n.find(function(e){var t=new RegExp(c,"i");return!!e.name.match(t)})?(this.setState({posLeft:i.left,posTop:i.top+20,tipShow:!0,tipShowType:"#"}),this.search(c,"#")):this.setState({tipShow:!1,tipShowType:null});else this.setState({tipShow:!1,tipShowType:null})}}},mounted:function(){}}),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-codemirror",on:{click:function(t){return e.setState({tipShow:!1,tipShowType:null})}}},[n("textarea",{ref:"codemirror",staticClass:"h100"}),e._v(" "),n("div",{class:"codemirror-tip-"+e.theme,style:{left:e.posLeft+"px",top:e.posTop+"px",display:e.tipShow?"inline-block":"none"}},[n("ul",{staticClass:"cm-field-ul"},e._l(e.dropList,function(t,o){return n("li",{class:{"cm-active":o==e.activeIndex},on:{click:function(n){return e.handleClick({name:t.name,value:t.value},e.tipShowType)}}},[e._v("\n        "+e._s(t.name)+"\n      ")])}),0)])])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("AWc0")},"data-v-308c839c",null).exports,s=n("UEqw"),c=n("0xDb"),u=n("jB3U"),d=(n("TQvf"),{components:{sqlCodeView:l,formuleList:s.a},props:{formMap:{},variableMap:{}},watch:{variableMap:{handler:function(e,t){},deep:!0}},data:function(){return{loading:!1,jsCodeShow:!1,baseData:{formule:"",dataType:1},methodList:[],fieldList:[],initFlist:[],initMlist:[],oldInitFlist:[],errorList:[]}},methods:{contrastVariable:function(){var e=[],t=[];this.initFlist.forEach(function(t){e.push(t.key)}),this.oldInitFlist.forEach(function(n){-1==e.indexOf(n.key)&&t.push(n)}),this.errorList=t;this.initFlist,this.initMlist,this.errorList},initCodemirror:function(e){var t=this;this.jsCodeShow=!0,this.loading=!0,setTimeout(function(){t.loading=!1,t.$refs.formule.init(e,t.baseData.orgStr)},200)},clickItem:function(e,t){this.$refs.formule.handleClick({name:e.name,value:"field"==t?"["+e.name+"]":e.value})},save:function(){var e=this.$refs.formule.getData();this.oldInitFlist=this.oldInitFlist.concat(e.fieldList),this.oldInitFlist=Object(c.B)(this.oldInitFlist,"key");var t={sql:e.jscode,oldInitFlist:this.oldInitFlist,orgStr:e.str,dataType:this.baseData.dataType};this.baseData=t,this.$emit("saveNode",t)},initOption:function(e){var t=this,n=[],o=[],i=function(e){var i=t.variableMap[e];if(i.varType==u.g.commonData||i.varType==u.g.commonListData){var a={name:i.itemName,templateJson:[]};i.tableName&&t.formMap[i.tableName]&&(o.push({value:i.itemName+"-ID",key:i.variableName+"@ID",name:i.itemName+"-ID"}),a.templateJson.push({name:"ID"}),t.formMap[i.tableName].templateJson.forEach(function(e){a.templateJson.push({name:""+e.name}),o.push({value:i.itemName+"-"+e.name,key:i.variableName+"@"+e.key,name:i.itemName+"-"+e.name})})),n.push(a)}else i.varType==u.g.blocklyVar&&(n.push({name:i.itemName}),o.push({value:i.itemName,key:i.variableName,name:i.itemName}))};for(var a in this.variableMap)i(a);this.fieldList=n,this.initFlist=o;var r=[];if(this.methodList.forEach(function(e){r=r.concat(e.list)}),this.initMlist=r,e){var l={fieldList:this.initFlist,methodList:this.initMlist};this.initCodemirror(l)}},onShowEvent:function(){this.initOption(),this.contrastVariable();var e={fieldList:this.initFlist,methodList:this.initMlist,errorList:this.errorList};this.jsCodeShow=!1,this.initCodemirror(e)},onCloseEvent:function(){this.save()},init:function(e){var t=this;!e.formule&&(e.formule=""),this.baseData=e,this.oldInitFlist=e.oldInitFlist?e.oldInitFlist:[],this.$nextTick(function(){t.initOption(!0)})}}}),h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"h100 row",staticStyle:{padding:"10px 10px 10px 5px"}},[n("div",{staticClass:"col"},[n("formuleList",{attrs:{fieldList:e.fieldList,methodList:e.methodList,defaultActived:"1"},on:{click:e.clickItem}})],1),e._v(" "),n("div",{staticClass:"column",staticStyle:{"margin-left":"10px",width:"380px"}},[e._m(0),e._v(" "),n("div",[n("el-radio",{attrs:{label:"1"},model:{value:e.baseData.dataType,callback:function(t){e.$set(e.baseData,"dataType",t)},expression:"baseData.dataType"}},[e._v("返回单条数据")]),e._v(" "),n("el-radio",{attrs:{label:"2"},model:{value:e.baseData.dataType,callback:function(t){e.$set(e.baseData,"dataType",t)},expression:"baseData.dataType"}},[e._v("返回列表数据")])],1),e._v(" "),n("div",{staticClass:"col"},[e.jsCodeShow?n("sqlCodeView",{ref:"formule",staticClass:"h100"}):e._e()],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row tips"},[t("i",{staticClass:"el-alert__icon el-icon-info"}),this._v(" "),t("div",{staticClass:"col",staticStyle:{"line-height":"14px","margin-left":"5px"}},[this._v("请在上方选择函数或字段变量，且在英文输入法下编辑。")])])}]};var f=n("VU/8")(d,h,!1,function(e){n("OHUO")},"data-v-7048aa4c",null);t.default=f.exports},"9Qg/":function(e,t){},"9Rh0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-system",use:"icon-system-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-system"><defs><style type="text/css"></style></defs><path d="M1004.676033 537.329798l-0.876604-49.259057c-0.430701-24.140556-10.23549-46.667755-27.609475-63.433691-17.372971-16.764922-40.190007-25.769114-64.376167-25.331318l-23.766606 0.422594c-8.056648-26.214003-18.738041-51.493637-31.933716-75.575415l20.776018-19.146447c17.755029-16.362597 28.074632-38.657724 29.059672-62.782065 0.984026-24.124341-7.484069-47.186624-23.845652-64.941652l-33.38594-36.229582c-33.775091-36.649136-91.073569-38.990124-127.723718-5.213006l-27.83344 25.650544c-22.645769-12.353527-46.355624-22.49477-70.891411-30.322387L622.268994 106.945672c0-49.840757-40.548756-90.389514-90.389514-90.389514l-49.266151 0c-49.840757 0-90.389514 40.548756-90.389514 90.389514l0 18.869785c-26.46533 7.091877-52.096619 16.835861-76.618219 29.129597l-17.051719-15.714011c-17.755029-16.361583-40.820351-24.828665-64.941652-23.845652-24.124341 0.984026-46.420482 11.304643-62.782065 29.058658l-33.386953 36.228569c-33.776105 36.651163-31.437143 93.947613 5.21402 127.723718l4.22898 3.89658c-16.881465 28.479998-30.128824 58.726379-39.587026 90.394581-23.988544-0.322266-46.671809 8.673818-63.942425 25.338412-17.373985 16.764922-27.178774 39.293135-27.608462 63.432678l-0.877617 49.258044c-0.430701 24.139542 8.566396 47.003196 25.332332 64.376167 16.764922 17.373985 39.293135 27.17776 63.432678 27.608462l2.429155 0.043577c8.783267 30.587901 21.105378 59.927276 36.82243 87.676602l-5.402515 5.853484c-16.373744 17.743881-24.858054 40.801097-23.888216 64.925438 0.968825 24.125355 11.274241 46.427576 29.017108 62.80132l36.207287 33.411275c17.350676 16.010942 39.331645 23.920645 61.26397 23.919631 24.367561-0.002027 48.674317-9.77236 66.462788-29.049538l1.405606-1.522149c27.445302 14.50298 56.320532 25.748845 86.298358 33.610918l0 2.270049c0 49.841771 40.548756 90.389514 90.389514 90.389514l49.266151 0c49.841771 0 90.389514-40.548756 90.389514-90.389514l0-8.817723c28.435408-9.227142 55.671947-21.541147 81.430926-36.812296l7.274292 7.882341c16.372731 17.743881 38.675966 28.049297 62.80132 29.018122 24.135489 0.981999 47.183583-7.514471 64.925438-23.887202l36.207287-33.411275c17.743881-16.372731 28.049297-38.676979 29.018122-62.80132 0.968825-24.125355-7.514471-47.18257-23.888216-64.925438l-19.026864-20.619953c11.64515-23.244697 21.007077-47.497742 27.988492-72.510848l24.888456-0.443876C965.743673 628.426675 1005.563784 587.162448 1004.676033 537.329798zM931.325064 556.584681c-4.563407 4.414435-10.742198 6.763531-17.090229 6.87602l-49.751577 0.886738c-15.358303 0.273622-28.488106 11.128309-31.644893 26.161305l0 0.001013c-7.414143 35.300281-20.350384 69.05713-38.447947 100.33314l-0.001013 0.001013c-7.226662 12.488312-5.482575 28.226645 4.301946 38.830005l34.960787 37.886515c4.441797 4.812707 6.742249 11.066491 6.480788 17.61011-0.263488 6.54362-3.058486 12.592693-7.871193 17.034491l-36.207287 33.411275c-4.813721 4.440784-11.086759 6.747316-17.611124 6.479775-6.54362-0.263488-12.592693-3.058486-17.034491-7.871193l-25.994092-28.169893c-11.131349-12.062677-29.445783-14.08748-42.943456-4.748862l0 0c-33.364658 23.083564-70.130337 39.866728-109.27754 49.884334l0 0c-14.575946 3.729367-24.7709 16.86221-24.7709 31.907368l0 33.546059c0 13.54125-10.97731 24.517546-24.517546 24.517546l-49.265138 0c-13.54125 0-24.517546-10.97731-24.517546-24.517546l0-28.561072c0-15.801165-11.221543-29.375857-26.740978-32.34719l-0.001013 0c-40.672393-7.789107-79.216614-22.794741-114.563512-44.602416l-0.001013 0c-13.412546-8.275546-30.808826-5.888954-41.497313 5.694378l-19.181917 20.787166c-9.168364 9.935519-24.710095 10.559783-34.644601 1.391419l-36.207287-33.411275c-4.812707-4.440784-7.607706-10.490871-7.871193-17.034491-0.262474-6.54362 2.037977-12.797403 6.479775-17.61011l22.234323-24.094952c10.230423-11.086759 11.620828-27.706763 3.373658-40.338979l0 0c-22.693399-34.763171-38.679006-72.876691-47.51193-113.284583l0-0.001013c-3.259142-14.907333-16.331181-25.624195-31.588142-25.896804l-27.59326-0.491506c-13.516928-0.240179-24.317903-11.432333-24.077724-24.949261l0.868497-48.743229c0.113502-6.361205 2.469692-12.55317 6.897302-17.122658 4.779265-4.93229 11.225597-7.581357 18.062093-7.470895l25.408338 0.452996c15.585307 0.277676 29.229925-10.407771 32.696818-25.60494l0-0.001013c9.661897-42.354662 27.137224-82.014653 51.93954-117.878392l0-0.001013c9.339632-13.504767 7.305708-31.826294-4.76913-42.952576l-24.538828-22.614353c-9.9416-9.162284-10.575998-24.703001-1.414727-34.644601l33.386953-36.228569c4.437744-4.815748 10.485804-7.615813 17.029424-7.882341 6.542606-0.265515 12.798417 2.02987 17.614164 6.468627l34.320308 31.628678c10.605387 9.773373 26.336626 11.510366 38.817844 4.284718l0.001013-0.001013c32.520484-18.824181 67.672806-32.050259 104.480034-39.310363l0.001013 0c15.435322-3.044298 26.561604-16.580481 26.561604-32.31172L458.092743 106.945672c0-13.540236 10.97731-24.517546 24.517546-24.517546l49.266151 0c13.540236 0 24.517546 10.97731 24.517546 24.517546l0 49.089817c0 15.11407 10.287174 28.28745 24.949261 31.951958l0.001013 0c34.914169 8.725502 68.109587 22.898109 98.661006 42.123603l0.001013 0.001013c12.587626 7.920851 28.922861 6.42201 39.859634-3.656401l45.763789-42.174274c9.940587-9.162284 25.482317-8.5289 34.644601 1.413714l33.38594 36.229582c4.438757 4.815748 6.735155 11.071558 6.468627 17.614164s-3.06558 12.590666-7.881328 17.029424l-40.377489 37.210568c-11.745478 10.824284-14.031742 28.516481-5.42177 41.970577l0 0c20.707106 32.361377 35.680311 67.672806 44.506141 104.954312l0 0.001013c3.56722 15.069479 17.152047 25.619128 32.636013 25.342466l49.395868-0.879644c6.541593-0.119583 12.749773 2.32376 17.461138 6.871966 4.712379 4.547193 7.37158 10.658084 7.489136 17.204744l0 0 0.876604 49.260071C938.936823 545.341856 936.268501 551.80339 931.325064 556.584681z" p-id="5784" /><path d="M509.272222 371.354736c-79.069669 0-143.398206 64.328536-143.398206 143.398206s64.328536 143.398206 143.398206 143.398206 143.398206-64.328536 143.398206-143.398206S588.341891 371.354736 509.272222 371.354736zM509.272222 592.27918c-42.747867 0-77.526238-34.777358-77.526238-77.526238 0-42.747867 34.778372-77.526238 77.526238-77.526238 42.74888 0 77.526238 34.778372 77.526238 77.526238C586.79846 557.501821 552.020088 592.27918 509.272222 592.27918z" p-id="5785" /></symbol>'});r.a.add(l);t.default=l},"9lU6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),l=n("//Fk"),s=n.n(l),c=n("mvHQ"),u=n.n(c),d=n("0xDb"),h={data:function(){return{fileDialogVisible:!1,fileList:[],formData:{},processMap:{},url:""}},watch:{fileDialogVisible:function(){this.fileDialogVisible||(this.fileList=this.fileList.filter(function(e){return e.url}),this.needSave?u()(this.needSave[this.saveKey])==u()(this.fileList)||(this.needSave[this.saveKey]=Object(d.e)(this.fileList),this.$emit("fileListChange",this.needSave)):this.$emit("fileListChange",this.fileList))}},methods:{close:function(e){var t,n=this;return new s.a((t=r()(i.a.mark(function e(t,o){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in a=!1,n.processMap)n.processMap[r]<100&&(a=!0);if(!a){e.next=7;break}return e.next=5,n.$confirm("文件没有上传完毕，关闭将结束未上传的文件，确定关闭?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t()}).catch(function(e){o()});case 5:e.next=8;break;case 7:t();case 8:case"end":return e.stop()}},e,n)})),function(e,n){return t.apply(this,arguments)}))},successHandle:function(e,t,n){for(var o in this.fileList){var i=this.fileList[o];if(i.uid&&i.uid==t.uid){var a={name:i.name,size:i.size,status:"success",uid:t.uuid,url:this.url+"/"+e.filename};this.$set(this.fileList,o,a),this.$emit("batchUploadFileSuccess",a)}}},uploadProcess:function(e,t,n){this.$set(this.processMap,t.uid,new Number(e.percent.toFixed(0)))},beforeAvatarUpload:function(e){var t=this;return r()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.fileList.push(e),t.$set(t.processMap,e.uid,1),n.next=4,t.$http({url:t.$http.adornUrl("/sys/oss/getUploadToken"),method:"get",data:{}}).then(function(n){var o=n.data.data;t.url=o.url,t.formData={key:o.dir+"/"+e.name,policy:o.policy,OSSAccessKeyId:o.accessid,signature:o.signature,callback:o.callback}});case 4:case"end":return n.stop()}},n,t)}))()},init:function(){this.fileDialogVisible=!0,this.fileList=[],this.processMap={}},handlePreviewFile:function(e){if(e){var t=document.createElement("a");t.style.display="none",t.href=e.url||e.response.url,t.target="_blank",t.setAttribute("download",e.name),document.body.appendChild(t),t.click(),document.body.removeChild(t)}}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"50%",title:"文件","before-hide-method":e.close},model:{value:e.fileDialogVisible,callback:function(t){e.fileDialogVisible=t},expression:"fileDialogVisible"}},[n("el-upload",{attrs:{action:e.url,multiple:"",data:e.formData,"show-file-list":!1,"before-upload":e.beforeAvatarUpload,"on-success":e.successHandle,"on-progress":e.uploadProcess}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("批量新增文件")])],1),e._v(" "),n("div",{staticStyle:{height:"600px",overflow:"auto"}},e._l(e.fileList,function(t,o){return n("div",{key:t.uid,class:["el-upload-list__item","is-"+t.status],attrs:{tabindex:"0"}},[n("a",{staticClass:"el-upload-list__item-name",on:{click:function(n){return e.handlePreviewFile(t)}}},[n("i",{staticClass:"el-icon-document"}),e._v(e._s(t.name)+"\n      ")]),e._v(" "),n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{class:{"el-icon-upload-success":!0}})]),e._v(" "),e.processMap[t.uid]>-1&&e.processMap[t.uid]<100?n("el-progress",{attrs:{type:"line","stroke-width":2,percentage:e.processMap[t.uid]}}):e._e()],1)}),0)],1)},staticRenderFns:[]};var p=n("VU/8")(h,f,!1,function(e){n("w+Zr")},null,null);t.default=p.exports},"9uud":function(e,t,n){"use strict";var o=n("0xDb"),i=n("H/gZ"),a=n("0I9B"),r=n("G+jI"),l=n("bKCO"),s={components:{CommonBasedataTableDialog:i.default,datePickerRange:a.a,baseTimePick:r.a,selectStaffDepRole:l.a},props:{exts:{default:{type:""}},variable:{default:""},value:{default:""},isRange:{default:!1},noClear:{type:Boolean,default:!1},symbol:{}},model:{prop:"value",event:"change"},watch:{symbol:{handler:function(e,t){if(this.exts&&"selectStaff"==this.exts.type){var n=["notBelong","belong"];if(-1!=n.indexOf(e)&&-1!=n.indexOf(t))return;-1!=n.indexOf(e)?this.$set(this,"baseData",[]):-1!=n.indexOf(t)&&this.$set(this,"baseData","")}else{var o=["notContain","contain"];if(-1!=o.indexOf(e)&&-1!=o.indexOf(t))return;-1!=o.indexOf(e)?this.$set(this,"baseData",[]):-1!=o.indexOf(t)&&this.$set(this,"baseData","")}},deep:!0},isRange:{handler:function(e,t){this.baseData=""},deep:!0},exts:{handler:function(e,t){this.noClear||(this.baseData="")},deep:!0},value:{handler:function(e){this.baseData=e},deep:!0,immediate:!0},baseData:{handler:function(e){this.$emit("change",e),console.log(e,7778)},deep:!0}},data:function(){return{baseDataTableViewVisible:!1,key:Object(o.r)(),baseData:this.value,dataTypeMap:Object(o.n)("dateType"),dateDynamic:Object(o.n)("dateDynamicEnum"),depListMap:{}}},methods:{updateBaseDataFilterData:function(e,t){this.baseData=t.id},updateBaseData:function(e,t,n){this.baseData=n},gotoBaseDataTable:function(e){var t=this;this.baseDataTableViewVisible=!0,this.$nextTick(function(){t.$refs.baseDataTableDialog.initForFilter("dept",t.key,t.baseData)})}},mounted:function(){var e=this;this.$http({url:this.$http.adornUrl("/sys/dept/list/dept"),method:"get",params:this.$http.adornParams({page:1,limit:9999})}).then(function(t){var n=t.data;if(n&&0===n.code){var o={};n.page.list.forEach(function(e){o[e.id]=e}),e.depListMap=o}})}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.exts?n("div",["integer"==e.exts.type?n("el-input",{staticStyle:{width:"100%"},attrs:{type:"number",placeholder:"请输入(默认空值)"},model:{value:e.baseData,callback:function(t){e.baseData=e._n(t)},expression:"baseData"}}):"select"==e.exts.type?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择(默认空值)",multiple:"contain"==e.symbol||"notContain"==e.symbol},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}},e._l(e.exts.selectItem,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[n("div",{staticClass:"row"},[t.color?n("div",{staticClass:"ext-select-color",style:"background-color:"+t.color}):e._e(),e._v(" "),n("div",{staticClass:"col"},[e._v(e._s(t.label))])])])}),1):"dateTime"==e.exts.type&&"dynamic"==e.symbol?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择动态范围"},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}},e._l(e.dateDynamic,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e.isRange&&"dateTime"==e.exts.type?n("datePickerRange",{key:"rangeYear"+e.key,attrs:{baseData:e.exts},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}}):"dateTime"==e.exts.type&&"currentTime"==e.variable?n("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}},[e._v("\n      加 "),n("el-input",{attrs:{type:"number"},model:{value:e.baseData,callback:function(t){e.baseData=e._n(t)},expression:"baseData"}}),e._v(" 小时\n    ")],1):"dateTime"==e.exts.type&&"currentDay"==e.variable?n("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}},[e._v("\n      加 "),n("el-input",{attrs:{type:"number"},model:{value:e.baseData,callback:function(t){e.baseData=e._n(t)},expression:"baseData"}}),e._v(" 天\n    ")],1):"dateTime"==e.exts.type?n("baseTimePick",{attrs:{baseData:e.exts},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}}):"in"!=e.symbol&&"notIn"!=e.symbol||"selectStaff"!=e.exts.type?"selectStaff"==e.exts.type?n("selectStaffDepRole",{attrs:{single:!("belong"==e.symbol||"notBelong"==e.symbol||e.exts.mustMultiple)},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}}):"selectInterface"==e.exts.type?n("my-select",{staticStyle:{width:"100%"},attrs:{address:e.exts.interfaceAddress},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}}):"selectinterfaceTree"==e.exts.type?n("my-tree-select",{attrs:{address:e.exts.interfaceAddress},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}}):Array.isArray(e.baseData)?e._e():n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入(默认空值)"},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}}):n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.gotoBaseDataTable(e.exts.key)}}},[e._v("\n      "+e._s(e.depListMap[e.baseData]?e.depListMap[e.baseData].name:"选择部门")+"\n    ")])],1):n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入(默认空值)"},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}}),e._v(" "),e.baseDataTableViewVisible?n("common-basedata-table-dialog",{ref:"baseDataTableDialog",on:{getDataList:function(t){e.depListMap=t},updateBaseData:e.updateBaseData,updateBaseDataFilterData:e.updateBaseDataFilterData}}):e._e()],1)},staticRenderFns:[]};var u=n("VU/8")(s,c,!1,function(e){n("qjKg")},"data-v-d2be6cd8",null);t.a=u.exports},A2oB:function(e,t){},AWc0:function(e,t){},Al5W:function(e,t){},AlKv:function(e,t){},"B+42":function(e,t){},B8FD:function(e,t){},BAPo:function(e,t,n){"use strict";var o=n("PYVH"),i=n("0xDb"),a={components:{location:o.a},props:{themeColor:localStorage.getItem("theme"),staffDetail:{type:Boolean,default:!1},type:{},value:{},ext:{},noneDataText:{default:"暂无数据"},interfaceMap:{},baseTableContent:{},showFormatType:null},watch:{value:{handler:function(e){this.getText()},deep:!0,immediate:!0}},data:function(){return{text:""}},methods:{getSelectColor:function(e){var t="";for(var n in this.ext.selectItem){var o=this.ext.selectItem[n];if(o.value==e){t=o.color;break}}return t},getText:function(){if(this.value&&this.type)switch(this.type){case"selectInterface":this.text=this.interfaceMap[this.ext.key]?this.interfaceMap[this.ext.key][this.value]:"";break;case"baseData":this.ext&&this.ext.key&&(this.text=this.baseTableContent[this.ext.key]||"");break;case"location":this.text=this.value;break;default:null!=this.showFormatType&&0==this.showFormatType?this.text=Object(i.i)(this.value):this.text=this.value}}},mounted:function(){}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"showtext-box"},["selectStaff"==e.type?n("div",[Array.isArray(e.value)&&e.value.length?n("div",{staticClass:"showtext-value-box"},e._l(e.value,function(t){return n("staff-tag",{key:t,staticStyle:{"margin-right":"10px"},attrs:{nodetail:!e.staffDetail,userId:t}})}),1):!Array.isArray(e.value)&&e.value?n("div",{staticClass:"showtext-value-box",attrs:{nodetail:!e.staffDetail}},[n("staff-tag",{attrs:{userId:[e.value],nodetail:!e.staffDetail}})],1):e.noneDataText?n("div",{staticClass:"nonedatatext-box"},[e._v(e._s(e.noneDataText))]):n("div",{staticClass:"none-data-box"})]):"select"==e.type&&e.value?n("div",{staticClass:"showtext-value-box"},[n("div",{staticClass:"ext-select-show-box",style:"background-color:"+(e.getSelectColor(e.value)?e.getSelectColor(e.value):e.themeColor)},[e._v("\n      "+e._s(e.value)+"\n    ")])]):"multipleSelect"==e.type&&e.value&&e.value.length?n("div",{staticClass:"showtext-value-box"},e._l(e.value,function(t){return n("div",{key:t,staticClass:"ext-select-show-box",staticStyle:{"margin-right":"10px"},style:"background-color:"+(e.getSelectColor(t)?e.getSelectColor(t):e.themeColor)},[e._v("\n      "+e._s(t)+"\n    ")])}),0):n("div",[e.text?n("div",{staticClass:"showtext-value-box"},[e._v("\n      "+e._s(e.text)+"\n    ")]):e.value?n("div",{staticClass:"showtext-value-box"},[e._v("\n      "+e._s(e.value)+"\n    ")]):e.noneDataText?n("div",{staticClass:"nonedatatext-box"},[e._v(e._s(e.noneDataText))]):n("div",{staticClass:"none-data-box"})])])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("uFDB")},"data-v-1d67f8a4",null);t.a=l.exports},BClt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-zonghe",use:"icon-zonghe-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-zonghe"><defs><style type="text/css"></style></defs><path d="M483.882616 483.757772 184.580902 483.757772c-60.681034 0-110.049418-49.367361-110.049418-110.049418L74.531484 184.456059c0-60.681034 49.367361-110.049418 110.049418-110.049418l189.252295 0c60.681034 0 110.049418 49.367361 110.049418 110.049418L483.882616 483.757772zM184.580902 114.424052c-38.614459 0-70.030983 31.416524-70.030983 70.030983l0 189.253318c0 38.614459 31.416524 70.030983 70.030983 70.030983l259.283278 0L443.86418 184.456059c0-38.614459-31.416524-70.030983-70.030983-70.030983L184.580902 114.425076z" p-id="2748" /><path d="M840.875263 483.757772 539.619034 483.757772 539.619034 184.456059c0-60.681034 49.367361-110.049418 110.049418-110.049418L840.875263 74.40664c60.681034 0 110.049418 49.367361 110.049418 110.049418l0 189.253318C950.924681 434.390411 901.556297 483.757772 840.875263 483.757772zM579.636446 443.74036 840.875263 443.74036c38.614459 0 70.030983-31.416524 70.030983-70.030983L910.906246 184.456059c0-38.614459-31.416524-70.030983-70.030983-70.030983L649.667429 114.425076c-38.615483 0-70.030983 31.416524-70.030983 70.030983L579.636446 443.74036z" p-id="2749" /><path d="M373.83422 950.798814 184.580902 950.798814c-60.681034 0-110.049418-49.367361-110.049418-110.049418L74.531484 649.541563c0-60.681034 49.367361-110.049418 110.049418-110.049418l299.301713 0 0 301.257252C483.882616 901.43043 434.515255 950.798814 373.83422 950.798814zM184.580902 579.509557c-38.614459 0-70.030983 31.416524-70.030983 70.030983l0 191.208856c0 38.614459 31.416524 70.030983 70.030983 70.030983l189.252295 0c38.614459 0 70.030983-31.416524 70.030983-70.030983l0-261.239839L184.580902 579.509557z" p-id="2750" /><path d="M840.875263 950.798814 649.667429 950.798814c-60.681034 0-110.049418-49.367361-110.049418-110.049418L539.618011 539.492144 840.875263 539.492144c60.681034 0 110.049418 49.367361 110.049418 110.049418l0 191.208856C950.924681 901.43043 901.556297 950.798814 840.875263 950.798814zM579.636446 579.509557l0 261.239839c0 38.614459 31.4155 70.030983 70.030983 70.030983L840.875263 910.780379c38.614459 0 70.030983-31.416524 70.030983-70.030983L910.906246 649.541563c0-38.614459-31.416524-70.030983-70.030983-70.030983L579.636446 579.51058z" p-id="2751" /></symbol>'});r.a.add(l);t.default=l},BHiT:function(e,t){},BN9O:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{visible:!0,data:[["","Ford","Volvo","Toyota","Honda",123],["2016",10,11,12,13],["2017",20,11,14,13],["2018",30,15,12,13]],orgData:[],tableData:[],changedTableData:[],coloumKeys:[],columns:[]}},components:{HotTable:n("Gr2z").a},methods:{init:function(e,t){var n=this;this.tableData=t,this.visible=!0,this.data=[];var o=[];this.coloumKeys=[],o.push("id"),this.coloumKeys.push("id"),this.columns.push({type:"numeric",readOnly:!0}),e.forEach(function(e){var t=e.name;o.push(t),n.coloumKeys.push(e.key),"integer"==e.type||"float"==e.type||"selectId"==e.type||"relateTable"==e.type||"propTable"==e.type||"baseData"==e.type?n.columns.push({type:"numeric",readOnly:!1}):n.columns.push({})}),console.log(this.columns),this.data.push(o),t.forEach(function(e){for(var t=[],o=0;o<n.coloumKeys.length;o++)e[n.coloumKeys[o]]?t.push(e[n.coloumKeys[o]]):t.push("");n.data.push(t)}),this.orgData=this.clone(this.data),this.$refs.hotTableComponent.hotInstance.loadData(this.data)},clone:function(e){for(var t=[],n=0;n<e.length;n++){for(var o=[],i=0;i<e[n].length;i++)o.push(e[n][i]);t.push(o)}return t},close:function(){},restore:function(){this.data=this.clone(this.orgData),this.$refs.hotTableComponent.hotInstance.loadData(this.data)},saveData:function(){this.$refs.hotTableComponent.hotInstance.deselectCell();var e=this;setTimeout(function(){e.saveDataTrue()},100)},saveDataTrue:function(){this.data=this.$refs.hotTableComponent.hotInstance.getData(),this.changedTableData=[];for(var e=1;e<this.data.length;e++){for(var t=!1,n={},o=1;o<this.coloumKeys.length;o++)this.orgData[e][o]!=this.data[e][o]&&(t=!0),n[this.coloumKeys[o]]=this.data[e][o],null!=this.tableData[e-1][this.coloumKeys[o]+"_haveFixData"]&&(n[this.coloumKeys[o]+"_haveFixData"]=this.tableData[e-1][this.coloumKeys[o]+"_haveFixData"]);if(1==t){var i={};i.id=this.data[e][0],i.extContent=n,this.changedTableData.push(i)}}this.$emit("excelDataSave",this.changedTableData),this.$loading.show()}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{title:"Excel编辑",width:"90%",height:"90%",resize:"",fullscreen:""},on:{close:e.close},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",[n("span",{staticStyle:{"margin-left":"15px","margin-right":"15px"}},[e._v("Excel编辑")]),e._v(" "),n("vxe-button",{attrs:{status:"primary"},on:{click:e.restore}},[e._v("恢复")]),e._v(" "),n("vxe-button",{attrs:{status:"success"},on:{click:e.saveData}},[e._v("保存")])],1)]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(" "),n("hot-table",{ref:"hotTableComponent",attrs:{data:e.data,columns:e.columns,rowHeaders:!0,colHeaders:!0,licenseKey:"02294-b1d14-25a11-8fc0e-7943a"}})],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("7M+i")},null,null);t.default=a.exports},BS5Q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("woOf"),r=n.n(a),l={name:"CommonFieldPermDialog",data:function(){return{showChildDialog:!1,showView:!1,type:null,exts:[],roleId:null,visible:!1,dataForm:{id:0,name:"",api:"",saveApi:"",updateApi:"",template:"",createdAt:"",updatedAt:"",createrShow:!1},difinePermId:null}},mounted:function(){},components:{},methods:{setChildFieldPerm:function(e){var t=this;this.showChildDialog=!0,this.$nextTick(function(){var n=void 0;"childrenTable"==e.type?n=e.childrenTableName:"relateTable"!=e.type&&"relateVirtualTable"!=e.type&&"propTable"!=e.type||(n=e.relateTableName),t.$refs.childFieldPerm.init(null,t.roleId,t.type,!0,n)})},permChanged:function(e,t){"view"==this.type?(null==t.perm&&(t.perm={}),t.perm[this.roleId]=!e):"edit"==this.type&&(null==t.permEdit&&(t.permEdit={}),t.permEdit[this.roleId]=!e)},judgeStatue:function(e){var t=!0;if("view"==this.type)for(var n in e.perm)n==this.roleId&&e.perm[n]&&(t=!1);else if("edit"==this.type&&null!=e.permEdit)for(var o in e.permEdit)o==this.roleId&&e.permEdit[o]&&(t=!1);return t},init:function(e,t,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments[4];r()(this.$data,this.$options.data()),this.type=n,this.dataForm.id=e||0,this.roleId=t,this.visible=!0,this.$nextTick(function(){var e=void 0;e=i?o.$http.adornUrl("/common/commondefine/infoByTableWithoutPerm/"+a):o.$http.adornUrl("/common/commondefine/infoById/"+o.dataForm.id),(o.dataForm.id||a)&&(o.$loading.show(),o.$http({url:e,method:"get",params:o.$http.adornParams()}).then(function(e){var t=e.data;o.$loading.hide(),t&&0===t.code&&(o.exts=JSON.parse(t.assetExt.template),o.dataForm.id=t.assetExt.id,o.$loading.show(),o.$http({url:o.$http.adornUrl("/common/commondefineperm/infoByDefineId/"+t.assetExt.id),method:"get",params:o.$http.adornParams()}).then(function(e){var t=e.data;if(o.$loading.hide(),t&&0===t.code&&null!=t.data){o.difinePermId=t.data.id;var n=t.data.template;null==n?o.exts.forEach(function(e){e.permEdit={},e.perm={}}):(n=JSON.parse(n),o.exts.forEach(function(e){n.forEach(function(t){t.key==e.key&&(null!=t.permEdit?e.permEdit=t.permEdit:e.permEdit={},null!=t.perm?e.perm=t.perm:e.perm={})})}))}else o.exts.forEach(function(e){e.permEdit={},e.perm={}});o.showView=!0}))}))})},cancle:function(){this.visible=!1,this.$emit("permDialogClose")},dataFormSubmit:function(){var e=this;this.$loading.show(),this.$http({url:this.$http.adornUrl("/common/commondefineperm/"+(this.difinePermId?"update":"save")),method:"post",data:this.$http.adornData({id:this.difinePermId||void 0,defineId:this.dataForm.id,template:i()(this.exts)})}).then(function(t){var n=t.data;e.$loading.hide(),n&&0===n.code?(e.$XModal.message("操作成功"),e.visible=!1,e.$emit("refreshDataList")):e.$XModal.message(n.msg)}),this.$emit("permDialogClose")}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"80%",height:"80%",resize:"",title:"设置字段可"+("view"==e.type?"查看":"编辑")+"权限"},on:{close:e.cancle},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.showView?n("div",{staticStyle:{display:"flex","justify-items":"start","flex-wrap":"wrap"}},e._l(e.exts,function(t,o){return n("div",{key:o,staticStyle:{width:"24%",height:"40px"}},[n("el-checkbox",{key:t.key,attrs:{checked:e.judgeStatue(t)},on:{change:function(n){e.permChanged(n,t)}}},[e._v(e._s(t.name)+"\n        ")]),e._v(" "),"childrenTable"==t.type||"relateTable"==t.type||"relateVirtualTable"==t.type||"propTable"==t.type?n("el-button",{on:{click:function(n){return e.setChildFieldPerm(t)}}},[e._v("\n          子表")]):e._e()],1)}),0):e._e(),e._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{on:{click:e.cancle}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1),e._v(" "),e.showChildDialog?n("common-field-perm-children-dialog",{ref:"childFieldPerm"}):e._e()],1)},staticRenderFns:[]};var c=n("VU/8")(l,s,!1,function(e){n("8RPk")},"data-v-abc730a2",null);t.default=c.exports},BUU0:function(e,t,n){"use strict";var o=n("2bBW"),i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w100 h100 column dashboard",attrs:{id:"chart-container"}},[e.isEdit?n("div",[n("el-alert",{attrs:{title:e.title,type:"success",center:""}})],1):e._e(),e._v(" "),n("div",{ref:"scrollBox",staticClass:"col",staticStyle:{overflow:"auto"}},[n("grid-layout",{staticStyle:{"margin-top":"-20px"},attrs:{layout:e.list,"col-num":24,"row-height":10,"is-draggable":e.isEdit,"is-resizable":e.isEdit,"is-mirrored":!1,"vertical-compact":!1,margin:[10,10],"use-css-transforms":!0}},e._l(e.list,function(t,o){return n("grid-item",{key:o,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i},on:{resized:function(n){return e.resizedEvent(t.i)}}},[n("div",{staticClass:"component-box",class:{"active-box":e.activeBox==t,"text-box":"text"==t.itemType},style:{border:e.activeBox==t?"2px "+e.themeColor+" solid":""},on:{mousedown:function(n){return e.active(t,o)}}},[e.isEdit?n("div",{staticClass:"btns"},[n("i",{staticClass:"el-icon-delete col",attrs:{title:"删除"},on:{click:function(n){return n.stopPropagation(),e.handleDelete(t,o)}}})]):e._e(),e._v(" "),"bi"==t.itemType?n("bi",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),e.isEdit||"iframe"!=t.itemType?e._e():n("iframe",{ref:t.id,refInFor:!0,staticClass:"h100 w100",attrs:{initParamsProp:e.initParamsProp,src:t.url?t.url:"",frameborder:"0"}}),e._v(" "),"text"==t.itemType?n("textPart",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),"picture"==t.itemType?n("imagePart",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp},on:{robotDo:e.robotDo}}):e._e(),e._v(" "),"customView"==t.itemType?n("customView",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp},on:{userCtrChanged:e.userCtrChanged,viewDialogDashboard:e.viewDialogDashboard}}):e._e(),e._v(" "),"numCard"==t.itemType?n("numCard",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),"cardLink"==t.itemType?n("cardLink",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),"dataTable"==t.itemType?n("dataTablePart",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp},on:{userCtrChanged:e.userCtrChanged,viewDialogDashboard:e.viewDialogDashboard}}):e._e(),e._v(" "),"tableDataDetail"==t.itemType?n("tableDataDetail",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),"tableDataForm"==t.itemType?n("tableDataForm",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),"tableDataFilter"==t.itemType?n("tableDataFilter",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp},on:{onTableDataFilter:e.onTableDataFilter}}):e._e(),e._v(" "),"numContrastCard"==t.itemType?n("numContrastCard",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),"charts"==t.itemType?n("chart-part",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp},on:{refreshChart:e.refreshChart}}):e._e(),e._v(" "),"table"==t.itemType?n("table-part",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp},on:{refreshChart:e.refreshChart}}):e._e(),e._v(" "),"timeTree"==t.itemType?n("timeTree",{ref:t.id,refInFor:!0,staticClass:"h100 w100",attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),"timeController"==t.itemType?n("timeController",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp},on:{timeCtrChanged:e.timeCtrChanged}}):e._e(),e._v(" "),"userController"==t.itemType?n("userController",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp},on:{userCtrChanged:e.userCtrChanged}}):e._e(),e._v(" "),"tableController"==t.itemType?n("tableController",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp},on:{userCtrChanged:e.tableCtrChanged}}):e._e(),e._v(" "),"component"==t.itemType?n("subGridLayout",{ref:t.id,refInFor:!0,attrs:{itemOption:t,isEdit:e.isEdit,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),"richText"==t.itemType?n("RichTextPart",{ref:t.id,refInFor:!0,attrs:{isEdit:e.isEdit,itemOption:t,initParamsProp:e.initParamsProp}}):e._e(),e._v(" "),"calendar"==t.itemType?n("CalendarPart",{ref:t.id,refInFor:!0,attrs:{isEdit:e.isEdit,itemOption:t,initParamsProp:e.initParamsProp},on:{goDate:function(n){return e.goDate(n,"calendar"+t.i)},gotoBaseDataTableForFilter:function(n){return e.gotoBaseDataTableForFilter(n,"calendar"+t.i)},showChooseRelateTableForFilter:function(n){return e.showChooseRelateTableForFilter(n,"calendar"+t.i)}}}):e._e(),e._v(" "),"star"==t.itemType?n("StarPart",{ref:t.id,refInFor:!0,attrs:{isEdit:e.isEdit,itemOption:t,initParamsProp:e.initParamsProp},on:{starSetting:function(n,o,i){return e.starEdit(n,o,i,t.id)}}}):e._e()],1)])}),1)],1),e._v(" "),n("starSetting",{ref:"starSetting",on:{refresh:e.refreshStar}}),e._v(" "),e.commonRelateTableDialogVisible?n("CommonRelatetableDialog",{ref:"commonRelateTableDialog",on:{updateRelateFilterData:e.updateRelateFilterData}}):e._e(),e._v(" "),e.baseDataTableViewVisible?n("common-basedata-table-dialog",{ref:"baseDataTableDialog",on:{updateBaseDataFilterData:e.updateBaseDataFilterData}}):e._e(),e._v(" "),e.tableListVisible?n("tableListWin",{ref:"tableListWin",attrs:{title:"日程列表"},on:{getDataList:e.getDataList}}):e._e(),e._v(" "),e.dialogVisible?n("vxe-modal",{attrs:{width:"90%",height:"90%",resize:"",remember:"",title:"查看"},on:{close:e.dialogClose},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[e.dialogDashboardItems.length>0?n("CommonGridLayout",{ref:"dialogDashBoard",attrs:{initParamsProp:e.dialogDashboardInitParams,list:e.dialogDashboardItems,isEdit:!1}}):e._e()],1):e._e()],1)},staticRenderFns:[]};var a=function(e){n("cPZB")},r=n("VU/8")(o.a,i,!1,a,"data-v-d8c19dcc",null);t.a=r.exports},"BUm/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("Xxa5"),s=n.n(l),c=n("exGp"),u=n.n(c),d=n("0xDb"),h=n("16XU"),f=n("Wncs"),p=n("veIK"),m=n("IMY8"),v=n("GFDk"),b=n("F3T4"),y=n("dVxt"),g=n("reZG"),w=n("NSUx"),_=n("cTe8"),C=n("ULGN"),k={name:"发起人",type:"start",id:1,nextNode:{name:"结束",type:"end",id:2}},x={components:{process:f.default,flowApproval:p.default,flowWrite:m.default,flowStart:v.default,flowBranch:b.default,addRobot:y.default,emailRobot:g.default,messageRobot:w.default,updataRobot:_.default,robotEditDialog:h.default,titleEdit:C.a},props:{exts:{default:[]},dataForm:{}},data:function(){return{tableName:"",processEnable:!1,typeMap:{approval:p.default,write:m.default,start:v.default,branch:b.default},robotTypeMap:{add:y.default,email:g.default,message:w.default,updata:_.default},drawer:!1,winshow:!1,proportion:100,prop:null,show:!0,d:Object(d.e)(k),parentMap:{},staffExtList:[],oldData:null}},methods:{editRobotTitle:function(){this.$refs.titleEdit.editTitle()},robotSave:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.$set(t.prop,"info",e.robotId),t.winshow=!1;case 2:case"end":return n.stop()}},n,t)}))()},robotCancle:function(){this.winshow=!1},init:function(e){this.tableName=e.tableName,this.processEnable=!!e.processEnable&&e.processEnable,this.d=e.processDescribe?JSON.parse(e.processDescribe):Object(d.e)(k),this.oldData=this.getOldData()},contrast:function(){return this.oldData==this.getOldData()},getOldData:function(){return r()({processEnable:this.processEnable,d:this.d})},save:function(){var e=this;if(console.log(this.contrast()),this.contrast())this.$emit("saveSuccess");else{var t=this.getSaveData();this.$http({url:this.$http.adornUrl("/common/commondefine/updateProcessDesign"),method:"post",data:this.$http.adornParams({commonDefineId:this.dataForm.id,process:null!=t?t.process:null,processDescribe:null!=t?t.processDescribe:null,processEnable:null!=t?t.processEnable:null})}).then(function(t){var n=t.data;n&&0===n.code?(e.$emit("saveSuccess"),e.oldData=e.getOldData()):e.$message.error(n.msg)})}},delItem:function(e){var t=this;this.loop(this.d,e.id,function(n){var o=t.parentMap[e.id].id;"branch"==n.type?t.loop(t.d,o,function(n){if(n.branches.length>2)for(var o in n.branches){n.branches[o].id==e.id&&n.branches.splice(o,1)}else t.loop(t.d,t.parentMap[n.id].id,function(e){e.nextNode=n.nextNode})}):(n.type,t.loop(t.d,o,function(e){e.nextNode=n.nextNode}))})},getSaveData:function(e){var t={startEvent:{},userTask:[],sequenceFlow:[],endEvent:{},inclusiveGateway:[]};this.loopSaveData(this.d,t);var n={},o=[];for(var i in t.userTask){var a=t.userTask[i];"branch"==a.type&&(n[a.id]=a,o.push(a.id))}var l={},s={},c=[],u=function(e,t){for(var n in e){var o=e[n];if(o.sourceRef==t)return o.targetRef}};for(var h in t.sequenceFlow){t.sequenceFlow[h].id=Object(d.r)();var f=t.sequenceFlow[h];-1!=o.indexOf(f.targetRef)?(f.id=n[f.targetRef].id,f.info=n[f.targetRef].info,f.targetRef=u(t.sequenceFlow,f.targetRef),c.push(f)):-1!=o.indexOf(f.sourceRef)||c.push(f),l[f.sourceRef]?l[f.sourceRef].push(f):l[f.sourceRef]=[f],s[f.targetRef]?s[f.targetRef].push(f):s[f.targetRef]=[f]}for(var p in t.sequenceFlow=c,t.startEvent={id:t.startEvent.id,name:t.startEvent.name},t.endEvent={id:t.endEvent.id,name:t.endEvent.name},t.inclusiveGateway){var m=t.inclusiveGateway[p];t.inclusiveGateway[p]={id:m.id}}var v=[],b=[];for(var y in t.userTask){var g=t.userTask[y],w={id:g.id,name:g.name,type:g.type,info:g.info};"branch"==g.type||("robot"==g.type?b.push(w):v.push(w))}return t.userTask=v,t.serviceTask=b,{process:r()(t),processDescribe:r()(this.d),processEnable:this.processEnable}},loopGetFrom:function(e){return e.fromBranche?this.loopGetFrom(e.fromBranche):e},loopSaveData:function(e,t,n,o){var i=Object(d.e)(e);if("start"==i.type){var a=Object(d.r)();t.startEvent={id:a,name:"开始事件"},t.userTask.push({id:1,name:"发起人"}),t.sequenceFlow.push({sourceRef:a,targetRef:1})}else if("end"==i.type)t.endEvent=i;else if(n&&i.name)t.userTask.push(i),t.sequenceFlow.push({sourceRef:n.child&&-1==n.child.indexOf(i.id)?n.endGatewayId:n.id,targetRef:i.id}),n.branches&&(i.fromBranche=n),i.nextNode&&"end"==i.nextNode.type&&t.sequenceFlow.push({sourceRef:i.id,targetRef:i.nextNode.id}),o&&!i.nextNode&&t.sequenceFlow.push({sourceRef:i.id,targetRef:o[o.length-1].endGatewayId});else if(!i.name&&i.branches){i.fromBranche=n;var r=""+Object(d.r)();t.inclusiveGateway.push({id:r}),i.endGatewayId=r,t.inclusiveGateway.push(i),t.sequenceFlow.push({sourceRef:n.endGatewayId?n.endGatewayId:n.id,targetRef:i.id}),i.nextNode&&"end"==i.nextNode.type&&t.sequenceFlow.push({sourceRef:i.endGatewayId,targetRef:i.nextNode.id}),o&&!i.nextNode&&t.sequenceFlow.push({sourceRef:i.endGatewayId,targetRef:o[o.length-1].endGatewayId})}if(i.branches){o&&o.push(i),i.child=[];for(var l=0;l<i.branches.length;l++){var s=i.branches[l];i.child.push(s.id),this.loopSaveData(s,t,i,o||[i])}}i.nextNode&&this.loopSaveData(i.nextNode,t,i,o||null)},changeScreen:function(e){if(e)this.proportion=this.proportion+10;else{if(this.proportion-10==0)return!1;this.proportion=this.proportion-10}},selectItem:function(e){var t=this;if("robot"==e.type)this.winshow=!0,this.$set(this,"prop",e),this.$nextTick(function(){t.$refs.robotEdit.init("流程机器人配置","number"==typeof e.info?e.info:null,1,t.prop,t.tableName)});else if("start"==e.type);else{this.$set(this,"drawer",!0);var n={formId:""};e.info?(i()(n,e.info),e.info=n):e.info=n,this.$set(this,"prop",e)}},loop:function(e,t,n,o){if(o&&(this.parentMap[e.id]=o),e.id==t)return n(e);if(e.branches)for(var i=0;i<e.branches.length;i++){if(this.parentMap[e.branches[i].id]=e,e.branches[i].id==t)return n(e.branches[i],i,e);e.branches[i].nextNode&&this.loop(e.branches[i].nextNode,t,n,e.branches[i])}e.nextNode&&this.loop(e.nextNode,t,n,e)},addItem:function(e,t,n,o){var a=this,r=Object(d.r)(),l={name:"新节点"+r,id:r,info:{}};switch(o.type){case"approval":l.info.adminType=1,l.info.approvalType=1}t?this.loop(this.d,e.id,function(e){l.type="branch",l.name="分支",e.branches.push(l)}):this.loop(this.d,e.id,function(e){var t=e.nextNode,r=e.branches;"branch"==o.type?(delete l.name,l.branches=[{id:Object(d.r)(),type:"branch",name:"分支"},{id:Object(d.r)(),type:"branch",name:"分支"}],l.nextNode=t,n||delete e.branches,a.$set(e,"nextNode",l)):(i()(l,o),n?t&&(l.nextNode=t):(t&&(l.nextNode=t),r&&(e.branches=null,l.branches=r)),a.$set(e,"nextNode",l))}),this.$forceUpdate()}},mounted:function(){if(this.exts){var e=[];this.exts.forEach(function(t){"selectStaff"==t.type&&e.push({id:t.key,label:t.name})}),this.staffExtList=e}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w100 h100 column"},[n("div",{staticStyle:{"padding-bottom":"10px"}},[n("span",{staticStyle:{"font-size":"14px",position:"relative",top:"2px","padding-right":"10px"}},[e._v("是否开启流程")]),e._v(" "),n("el-switch",{model:{value:e.processEnable,callback:function(t){e.processEnable=t},expression:"processEnable"}})],1),e._v(" "),e.processEnable?n("div",{staticClass:"col overflow-auto"},[n("div",{staticClass:"w100 h100 position-relative",staticStyle:{"background-color":"#f9fafc",overflow:"hidden"}},[n("div",{staticClass:"position-absolute screen-opt-box row"},[n("div",{staticClass:"opt-btn",on:{click:function(t){return e.changeScreen(!1)}}},[n("i",{staticClass:"el-icon-minus"})]),e._v(" "),n("div",{staticClass:"opt-text"},[e._v(e._s(e.proportion)+"%")]),e._v(" "),n("div",{staticClass:"opt-btn",on:{click:function(t){return e.changeScreen(!0)}}},[n("i",{staticClass:"el-icon-plus"})])]),e._v(" "),n("div",{staticClass:"w100 h100 overflow-auto"},[n("div",{staticClass:"screen",style:"transform: scale("+e.proportion/100+");"},[n("process",{ref:"process",attrs:{d:e.d,staffExtList:e.staffExtList,isBranches:!1},on:{select:e.selectItem,delItem:e.delItem,addItem:e.addItem}})],1)]),e._v(" "),n("el-drawer",{attrs:{title:"标题",visible:e.drawer,size:700,modal:!0,"modal-append-to-body":!1,"with-header":!1},on:{"update:visible":function(t){e.drawer=t}}},[e.drawer&&e.prop?n("robot"==e.prop.type?e.robotTypeMap[e.prop.robotType]:e.typeMap[e.prop.type],{tag:"component",attrs:{d:e.prop,tableName:e.tableName,exts:e.exts,dataForm:e.dataForm},on:{close:function(t){e.drawer=!1}},model:{value:e.prop,callback:function(t){e.prop=t},expression:"prop"}}):e._e()],1),e._v(" "),e.winshow?n("robotEditDialog",{ref:"robotEdit",on:{robotSaved:e.robotSave}}):e._e(),e._v(" "),e.prop&&e.prop.name?n("titleEdit",{ref:"titleEdit",model:{value:e.prop.name,callback:function(t){e.$set(e.prop,"name",t)},expression:"prop.name"}}):e._e()],1)]):e._e()])},staticRenderFns:[]};var T=n("VU/8")(x,S,!1,function(e){n("11Ps")},"data-v-54e41f40",null);t.default=T.exports},BVIN:function(e,t){},BYJN:function(e,t,n){e.exports=n.p+"static/img/file.d47554b.svg"},CGWn:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o,i=n("Xxa5"),a=n.n(i),r=n("woOf"),l=n.n(r),s=n("exGp"),c=n.n(s),u=n("0xDb"),d=(o=c()(a.a.mark(function e(t,n){var o,i,r,s,c,d,h,f,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=void 0,i=100,"integer"!=t.type){e.next=6;break}o={type:"integer",field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,slots:{default:"defaultView",edit:"intEditView"},editRender:{name:"input"},sortable:!0,resizable:!0},e.next=60;break;case 6:if("multipleRelateTable"!=t.type){e.next=10;break}o={type:"multipleRelateTable",field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,slots:{default:"relateTableViewMultiple",edit:"relateTableViewMultiple"},sortable:!0,resizable:!0},e.next=60;break;case 10:if("selectStaff"!=t.type){e.next=14;break}o={type:"selectStaff",field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,slots:{default:"defaultView",edit:"selectStaffView"},params:{mustMultiple:t.mustMultiple,fieldDefine:t},editRender:!0,sortable:!0,resizable:!0},e.next=60;break;case 14:if("location"!=t.type){e.next=18;break}o={type:"location",field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,slots:{default:"defaultView"},sortable:!0,resizable:!0},e.next=60;break;case 18:if("float"!=t.type){e.next=22;break}o={type:"float",field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,slots:{default:"defaultView",edit:"floatEditView"},editRender:{name:"input"},sortable:!0,resizable:!0},e.next=60;break;case 22:if("autoSerialNum"!=t.type){e.next=26;break}o={type:"autoSerialNum",field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,editRender:!0,sortable:!0,resizable:!0,slots:{default:"defaultView",edit:"defaultEditView"}},e.next=60;break;case 26:if("richText"!=t.type){e.next=30;break}o={field:t.key,params:{fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},title:t.name,minWidth:t.coloumWidth?t.coloumWidth:100,slots:{default:"richTextView",edit:"richTextView"},editRender:{name:"input"}},e.next=60;break;case 30:if("select"!=t.type&&"multipleSelect"!=t.type&&"selectId"!=t.type){e.next=42;break}if(r=[],t.selectType&&"custom"!=t.selectType){e.next=36;break}r=r.concat(t.selectItem),e.next=39;break;case 36:if("dictionaries"!=t.selectType||!t.selectSet){e.next=39;break}return e.next=39,n.$http({url:n.$http.adornUrl("/common/commonselectset/info/"+t.selectSet),method:"GET"}).then(function(e){var t=e.data;if(t&&0===t.code){var n=JSON.parse(t.commonSelectSet.selectList);r=r.concat(n)}});case 39:o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:"multipleSelect"==t.type?220:150,sortable:!0,resizable:!0,slots:{default:"defaultView",edit:"selectView"},editRender:!0,params:{selectItems:r,multiple:"multipleSelect"==t.type}},e.next=60;break;case 42:if("selectInterface"!=t.type){e.next=52;break}return e.next=45,n.getApiData(t.interfaceAddress,t.key);case 45:s=e.sent,c={},s.forEach(function(e){c[e.id+""]=e.name}),n.interfaceMap[t.key]=c,o={field:t.key,title:t.name,width:t.coloumWidth?t.coloumWidth:i,sortable:!0,resizable:!0,editRender:{name:"select",options:s,optionProps:{value:"id",label:"name"},defaultValue:"",props:{clearable:!1}}},e.next=60;break;case 52:if("selectinterfaceTree"!=t.type){e.next=59;break}return e.next=55,n.getApiData(t.interfaceAddress,t.key);case 55:e.sent,o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,params:{datalist:[],fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},editRender:{name:"ElCascader",props:{filterable:!0,showAllLevels:!1,props:{options:[],multiple:!1,checkStrictly:!0},clearable:!0}},cellRender:{name:"ElCascader",sortable:!0,resizable:!0,props:{filterable:!0,showAllLevels:!1,props:{options:[],multiple:!1,checkStrictly:!0},clearable:!0}}},e.next=60;break;case 59:"dateTime"==t.type?(d=Object(u.n)("dateType"),o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,sortable:!0,resizable:!0,params:{fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField,baseData:t,viewType:d[t.dateType].type,viewValueFormat:d[t.dateType].format},slots:{default:"defaultView",edit:"dateTimePicker"},editRender:!0}):"date"==t.type?o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,sortable:!0,resizable:!0,editRender:{name:"$input",enable:null==t.roleCanEditField||1==t.roleCanEditField,props:{type:"datetime"}}}:"dateMonth"==t.type?o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,sortable:!0,resizable:!0,editRender:{name:"$input",enable:null==t.roleCanEditField||1==t.roleCanEditField,props:{type:"month",valueFormat:"yyyy-MM-dd"}}}:"dateYear"==t.type?o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,sortable:!0,resizable:!0,editRender:{name:"$input",enable:null==t.roleCanEditField||1==t.roleCanEditField,props:{type:"year"}}}:"formule"==t.type?o={type:"formule",field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,slots:{default:"defaultView",edit:"defaultView"},editRender:!1,sortable:!0,resizable:!0}:"systemCalc"==t.type?o={type:"calcResult",field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,sortable:!0,resizable:!0,params:{canFixData:t.canFixedData,decimalNum:t.decimalNum,fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},slots:{default:"canFixDataView",edit:"canFixDataView"},editRender:{name:"input"}}:"childrenTable"==t.type?o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,params:{childrenTableName:t.childrenTableName,fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},slots:{default:"childrenTableView",edit:"childrenTableView"},editRender:{name:"input"}}:"relateTable"==t.type?(h=[],f=t.commonDefine.templateJson,p={},f.forEach(function(e){p[e.key]=e}),t.relateTableProps.forEach(function(e){var n=JSON.parse(e);console.log(e,n,8888);var o={field:n.key,title:n.name,type:n.type,minWidth:t.coloumWidth?t.coloumWidth:100,params:{parentCloumnKey:t.key,relateTableName:t.relateTableName,relateTableExtId:t.relateTableExtId,disableCondition:t.disableCondition,dataFilterRobotId:t.dataFilterRobotId,fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},slots:{default:"relateTableView",edit:"relateTableEditView"},editRender:{name:"input"},resizable:!0};(o=l()(o,p[n.key])).params=l()(o.params,t),o.visible=!n.hidden||!n.hidden,h.push(o)}),1==h.length?(o=h[0]).title=t.name:o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,children:h,resizable:!0}):"propTable"==t.type?t.relateTableProps.length>0?(h=[],t.relateTableProps.forEach(function(e){var n=JSON.parse(e),o={field:n.key,title:n.name,minWidth:t.coloumWidth?t.coloumWidth:100,params:{parentCloumnKey:t.key,relateTableName:t.relateTableName,parentTableInfo:t.parentTableInfo,disableCondition:t.disableCondition,fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},slots:{default:"propTableView",edit:"propTableView"},editRender:{name:"input"}};null!=t.roleCanEditField&&0==t.roleCanEditField&&(o.slots.edit="noPermEdit"),o.visible=!n.hidden||!n.hidden,h.push(o)}),o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,params:{parentTableInfo:t.parentTableInfo,relateTableName:t.relateTableName,disableCondition:t.disableCondition,fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},slots:{header:"propsHeader"},children:h}):o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,params:{parentCloumnKey:t.key,relateTableName:t.relateTableName,parentTableInfo:t.parentTableInfo,disableCondition:t.disableCondition,fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},slots:{header:"propsHeader",default:"propTableViewLink",edit:"propTableViewLink"},editRender:{name:"input"}}:"file"==t.type?o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:100,params:{fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},slots:{default:"defaultView",edit:"defaultView"}}:"link"==t.type?o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:100,params:{linkPrefix:t.linkPrefix,url:t.url,fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField},slots:{default:"linkView",edit:"linkView"},editRender:{name:"input"}}:"baseData"==t.type?o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,params:{fieldCanEdit:null==t.roleCanEditField||1==t.roleCanEditField,baseDataTable:t.baseDataTable},slots:{default:"baseDataTableView",edit:"baseDataTableView"},editRender:{name:"input"}}:"customDialog"==t.type?(n.addCustomDialog(t.customDialog),o={field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,params:{customDialog:t.customDialog},slots:{default:"customDialogViewSlot",edit:"customDialogViewSlot"}}):o="picture"==t.type?{field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,params:{},slots:{default:"pictureView",edit:"defaultView"}}:"video"==t.type?{field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,params:{},slots:{default:"defaultView",edit:"defaultView"}}:"qrCode"==t.type?{field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,params:{qrCode:t.qrCode},slots:{default:"qrCodeView",edit:"qrCodeView"}}:"childrenTableStatic"==t.type?{type:"float",field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,slots:{default:"defaultView",edit:"floatEditView"},editRender:{name:"input"},sortable:!0,resizable:!0}:{field:t.key,title:t.name,minWidth:t.coloumWidth?t.coloumWidth:i,editRender:{name:"input"},sortable:!0,resizable:!0,slots:{default:"defaultView",edit:"defaultEditView"}};case 60:return o.resizable=!0,e.abrupt("return",o);case 62:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},CI8t:function(e,t){},CLq8:function(e,t,n){"use strict";var o={components:{titeView:n("lMLl").a},props:{itemOption:{},isEdit:{}},data:function(){return{tableDataId:null,savebtnLoading:!1,ifSavedData:!1}},mounted:function(){this.getData()},methods:{onceMore:function(){var e=this;this.ifSavedData=!1,this.$nextTick(function(){e.$refs.CommonAddOrUpdateView.init(null,!1,e.itemOption.tableName,null)})},close:function(){this.savebtnLoading=!1},savedData:function(){this.savebtnLoading=!1,this.ifSavedData=!0},save:function(){this.savebtnLoading=!0,this.$refs.CommonAddOrUpdateView.save()},getData:function(e){var t=this;this.itemOption.robotInfo?this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.robotInfo),method:"get",params:e}).then(function(e){var n=e.data;0==n.code&&n.data&&(t.tableDataId=n.data,t.$nextTick(function(){t.$refs.CommonAddOrUpdateView.init(null,!1,t.itemOption.tableName,null)}))}):this.$nextTick(function(){t.$refs.CommonAddOrUpdateView.init(null,!1,t.itemOption.tableName,null)})},onCtrDataChange:function(e){}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("titeView",{attrs:{itemOption:e.itemOption},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"flex-center",staticStyle:{height:"42px","margin-bottom":"2px","border-radius":"4px 4px 0px 0px"},style:{background:e.itemOption.titleBackgroundColor}},[n("span",{staticClass:"grid-card-dashboard-title",staticStyle:{"margin-left":"30px"},style:{color:e.itemOption.titleColor}},[e._v(" "+e._s(e.itemOption.name))]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.savebtnLoading},on:{click:function(t){return e.save()}}},[e._v("提交")])],1)]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticStyle:{"margin-top":"50px",padding:"0 20px 20px 20px"}},[e.ifSavedData?n("div",{staticStyle:{width:"100%",height:"100%","margin-top":"50px",display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}},[n("span",{staticStyle:{"font-size":"28px"}},[e._v(" 提交成功！")]),e._v(" "),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.onceMore()}}},[e._v("再填一份")])],1):n("common-add-or-update-view",{ref:"CommonAddOrUpdateView",on:{saveError:function(t){e.savebtnLoading=!1},savedData:e.savedData}})],1)]},proxy:!0}])})},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("aK36")},"data-v-9e66d8fc",null);t.a=a.exports},CgmL:function(e,t){},Ch7m:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("JC7v"),i=n("VfYd"),a=(n("0xDb"),{components:{rules:i.default,rulesScreen:o.default},props:{formMap:{},variableMap:{}},data:function(){return{test:"123",baseData:{name:"",selectTableName:""}}},methods:{selectOpt:function(e){this.selectTableName=e},save:function(){this.$refs.rulesScreen.saveData(),this.$refs.rules.saveData(),this.$refs.addRules&&this.$refs.addRules.saveData(),this.$emit("saveNode",this.baseData)},init:function(e){var t=this;console.log(e),this.baseData=e,this.$nextTick(function(){t.$refs.rulesScreen.getData(),t.$refs.rules.getData(),t.$refs.addRules&&t.$refs.addRules.getData()})},fresh:function(){this.$refs.rulesScreen.fresh(),this.$refs.rules.fresh()}}}),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[n("div",{staticClass:"col"},[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("目标表单")]),e._v("\r\n            "+e._s(e.formMap[e.baseData.tableName]?e.formMap[e.baseData.tableName].name:"")+"\r\n            ")]),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("更新哪些数据")]),e._v(" "),n("rulesScreen",{ref:"rulesScreen",attrs:{modelData:e.baseData,formMap:e.formMap,tableName:e.baseData.tableName,variableMap:e.variableMap},model:{value:e.baseData.dataRules,callback:function(t){e.$set(e.baseData,"dataRules",t)},expression:"baseData.dataRules"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("更新数据规则")]),e._v(" "),n("rules",{ref:"rules",attrs:{upDataRuleType:"",btnText:"更新为",modelData:e.baseData,formMap:e.formMap,tableName:e.baseData.tableName,variableMap:e.variableMap},model:{value:e.baseData.rules,callback:function(t){e.$set(e.baseData,"rules",t)},expression:"baseData.rules"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("el-checkbox",{on:{change:function(t){e.baseData.addRules=[]}},model:{value:e.baseData.noMatchAdd,callback:function(t){e.$set(e.baseData,"noMatchAdd",t)},expression:"baseData.noMatchAdd"}},[e._v("当没有符合条件的数据时，新增一条数据")])],1),e._v(" "),e.baseData.noMatchAdd?n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("新增数据规则")]),e._v(" "),n("rules",{ref:"addRules",attrs:{modelData:e.baseData,formMap:e.formMap,tableName:e.baseData.tableName,variableMap:e.variableMap},model:{value:e.baseData.addRules,callback:function(t){e.$set(e.baseData,"addRules",t)},expression:"baseData.addRules"}})],1):e._e()])])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("wFR5")},"data-v-73a66ca5",null);t.default=l.exports},CiIj:function(e,t){},D6CK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("8skB"),i=n("VfYd"),a=(n("0xDb"),{components:{selectForm:o.a,rules:i.default},props:{formMap:{},variableMap:{}},data:function(){return{test:"123",test2:!1,baseData:{tableName:"",name:"",formMap:"",ignorePreCheckData:!1},thisIgnorePreCheckData:!1}},methods:{ignorePreCheckDataChanged:function(e){this.baseData.ignorePreCheckData=e},save:function(){this.$refs.rules&&this.$refs.rules.saveData(),this.$emit("saveNode",this.baseData)},init:function(e){var t=this;this.baseData=e,null==this.baseData.ignorePreCheckData?this.baseData.ignorePreCheckData=!1:this.thisIgnorePreCheckData=this.baseData.ignorePreCheckData,this.$nextTick(function(){null!=t.$refs.rules&&t.$refs.rules.getData()})},fresh:function(){this.baseData.formMap="",this.$forceUpdate(),this.$refs.rules&&this.$refs.rules.fresh()}}}),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},["未选择"==e.baseData.tableName?n("div",{staticClass:"text-center row-title",staticStyle:{"padding-top":"20px","font-size":"14px"}},[e._v("\n    请在块中选择表单\n  ")]):null==e.baseData.tableName?n("div",{staticClass:"text-center row-title",staticStyle:{"padding-top":"20px","font-size":"14px"}},[e._v("\n    请插入表单变量 "+e._s(e.baseData.tableName)+"\n  ")]):n("div",{staticClass:"col"},[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("目标表单")]),e._v("\n      "+e._s(e.formMap[e.baseData.tableName]?e.formMap[e.baseData.tableName].name:"")+"\n      "),e._v(" "),n("el-checkbox",{staticStyle:{"margin-left":"20px"},on:{change:e.ignorePreCheckDataChanged},model:{value:e.thisIgnorePreCheckData,callback:function(t){e.thisIgnorePreCheckData=t},expression:"thisIgnorePreCheckData"}},[e._v("忽略添加数据前的机器人合法检测")])],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("创建规则")]),e._v(" "),n("rules",{ref:"rules",attrs:{modelData:e.baseData,formMap:e.formMap,tableName:e.baseData.tableName,variableMap:e.variableMap},model:{value:e.baseData.rules,callback:function(t){e.$set(e.baseData,"rules",t)},expression:"baseData.rules"}})],1)])])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("NTPB")},"data-v-6aa724a0",null);t.default=l.exports},D6cd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("xstH"),i=n("bKCO"),a=n("5aCZ"),r=n("HAP0"),l=n("jB3U"),s={components:{selectStaff:o.a,selectStaffDepRole:i.a,Tinymce:a.a,insertVariable:r.default},props:{formMap:{},variableMap:{}},watch:{variableMap:{handler:function(e){for(var t in this.type=[],e)this.type.push({value:e[t].variableName,label:e[t].itemName});this.type.push({value:"",label:"自定义"})},deep:!0,immediate:!0}},data:function(){return{formVisible:!1,baseData:{doNotSendSameContent:!1,staff:null,varStaff:[],rules:null,notifyBody:""},type:[],selectedId:"",selectedRow:{smsTemplate:""},showList:[],fieldList:[]}},methods:{addNotifyBody:function(e){tinymce.activeEditor.execCommand("mceInsertContent",!1,"["+e.value+"]")},addVarStaff:function(){this.baseData.varStaff.push({variable:"",field:"",value:""})},getMatchingList:function(e){return e&&this.variableMap[e]&&this.formMap[this.variableMap[e].tableName]?this.formMap[this.variableMap[e].tableName].templateJson:""},initOption:function(e){var t=this,n=[],o=[],i=function(e){var i=t.variableMap[e];if(i.varType==l.g.commonData||i.varType==l.g.commonListData){var a={name:i.itemName,templateJson:[]};t.formMap[i.tableName].templateJson.forEach(function(e){a.templateJson.push({name:""+e.name}),o.push({value:i.itemName+"-"+e.name,key:i.variableName+"@"+e.key,name:i.itemName+"-"+e.name})}),n.push(a)}else if(i.varType==l.g.blocklyVar){var r={value:i.itemName,key:i.variableName,name:i.itemName};n.push(r),o.push(r)}};for(var a in this.variableMap)i(a);if(this.fieldList=n,this.initFlist=o,e){this.initFlist;this.baseData.notifyBody&&(this.baseData.notifyBody=this.initNotifyBody(this.baseData.notifyBody))}},init:function(e){!e.staff&&(e.staff=null),!e.rules&&(e.rules=[]),!e.varStaff&&(e.varStaff=[]),!e.notifyBody&&(e.notifyBody=""),this.baseData=e,this.initOption(!0)},getNotifyBody:function(){var e=this.baseData.notifyBody;return e&&(console.log(this.initFlist,9998),this.initFlist.forEach(function(t){var n=new RegExp("\\["+t.name+"\\]","g");e=e.replace(n,"["+t.key+"]")})),e},initNotifyBody:function(e){return this.initFlist.forEach(function(t){var n=new RegExp("\\["+t.key+"\\]","g");e=e.replace(n,"["+t.name+"]")}),e},onShowEvent:function(){this.initOption(!0)},save:function(){console.log(this.baseData),this.baseData.notifyBody=this.getNotifyBody(),this.$emit("saveNode",this.baseData)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("如有相同内容的通知已发送， 不发送此条通知")]),e._v(" "),n("el-switch",{model:{value:e.baseData.doNotSendSameContent,callback:function(t){e.$set(e.baseData,"doNotSendSameContent",t)},expression:"baseData.doNotSendSameContent"}}),e._v(" "),n("div",{staticClass:"blockly-row-title"},[e._v("接收人")]),e._v(" "),n("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{"line-height":"30px"}},[e._v("系统成员:")]),e._v(" "),n("div",{staticClass:"col"},[n("selectStaffDepRole",{model:{value:e.baseData.staff,callback:function(t){e.$set(e.baseData,"staff",t)},expression:"baseData.staff"}})],1)]),e._v(" "),n("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{"line-height":"30px"}},[e._v("变量成员:")]),e._v(" "),n("div",{staticClass:"col"},[n("el-button",{staticStyle:{margin:"0 10px"},attrs:{title:"增加接收人",type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.addVarStaff}})],1)]),e._v(" "),e._l(e.baseData.varStaff,function(t,o){return n("el-row",{key:o,staticStyle:{"margin-top":"10px"}},[n("el-col",{staticStyle:{"padding-right":"10px","line-height":"36px"},attrs:{span:6}},[n("div",{staticClass:"symbol-box"},[e._v("\n          接收人\n        ")])]),e._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"symbol-box"},[e._v("\n          等于\n        ")])]),e._v(" "),n("el-col",{attrs:{span:5}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:10}},[t.variable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getMatchingList(t.variable),function(e){return n("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1):n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)})],2),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title",staticStyle:{display:"flex"}},[n("div",{staticClass:"col"},[e._v("通知内容")]),e._v(" "),n("insertVariable",{attrs:{fieldList:e.fieldList},on:{clickItem:e.addNotifyBody}})],1),e._v(" "),n("tinymce",{ref:"tinyDetailView",attrs:{id:"notifyBody",height:300,width:550,toolbar:["fontsizeselect fontselect bold italic underline alignleft aligncenter\n                  alignright outdent indent undo redo","hr bullist numlist link image charmap\t preview anchor pagebreak\n                      fullscreen insertdatetime media table forecolor backcolor removeformat"]},model:{value:e.baseData.notifyBody,callback:function(t){e.$set(e.baseData,"notifyBody",t)},expression:"baseData.notifyBody"}})],1)])},staticRenderFns:[]};var u=n("VU/8")(s,c,!1,function(e){n("GHQE")},"data-v-0d6805f4",null);t.default=u.exports},DeBA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-tixing",use:"icon-tixing-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-tixing"><defs><style type="text/css"></style></defs><path d="M925.007405 706.493669c-9.007141-8.121981-23.219841-18.370393-42.243103-30.456662-5.865591-3.725858-9.318226-10.111289-9.238408-17.07898l0.031722-2.539846c0.60989-51.78134 1.529843-130.034589-12.19167-209.543434-16.686031-96.679923-51.42216-172.286901-103.242386-224.720088-40.829917-41.314964-92.434226-68.674079-154.064888-81.818447-3.056616-19.094894-12.19781-36.341696-26.516934-49.569976-17.135262-15.8285-40.165792-24.546046-64.846914-24.546046-24.679076 0-47.709605 8.718569-64.844867 24.546046-14.31503 13.222139-23.455201 30.463826-26.514887 49.552579-61.343113 13.07069-112.581078 40.223097-152.97302 81.204463-117.15014 118.866225-114.199948 322.050834-112.614847 431.207929l0.085958 5.973038c0.099261 6.963599-3.508917 13.56597-9.417487 17.231453-19.403932 12.038174-33.983999 22.151509-43.334971 30.05655-24.833595 20.99415-39.076994 51.64831-39.076994 84.102467 0 28.354791 23.067368 51.42216 51.42216 51.42216l277.239232 0c0.540306 65.73412 54.174853 119.045303 120.032794 119.045303s119.492488-53.312206 120.032794-119.045303l275.389094 0c29.375028 0 53.272297-23.898293 53.272297-53.272297C961.390034 757.14221 948.130032 727.34558 925.007405 706.493669zM512.693802 106.235556c14.58723 0 27.973098 4.945639 37.694507 13.925151 4.253884 3.929496 7.624654 8.439206 10.070356 13.418614-15.392572-1.550309-31.31317-2.334161-47.76384-2.334161-16.395412 0-32.256658 0.775666-47.586808 2.308579C473.319026 117.106138 491.085668 106.235556 512.693802 106.235556zM512.695848 920.54579c-43.792389 0-79.464843-35.363416-80.005149-79.029938l160.010297 0C592.160691 885.183398 556.488237 920.54579 512.695848 920.54579zM908.117736 801.500487 115.422799 801.500487c-6.28924 0-11.406794-5.117554-11.406794-11.406794 0-20.652366 9.073656-40.169885 24.896017-53.543474 7.752568-6.553253 21.099551-15.755846 38.59911-26.614148 17.772782-11.026124 28.628014-30.875195 28.331255-51.798736l-0.085958-5.986341c-1.500167-103.306854-4.29277-295.599392 101.104699-402.537959 51.240011-51.990095 123.857912-78.352509 215.832673-78.352509 92.148723 0 165.147294 26.586518 216.96752 79.022775 45.958728 46.502104 77.003791 114.936729 92.27152 203.39848 13.098319 75.896574 12.20395 151.944598 11.611455 202.266703l-0.029676 2.541893c-0.246617 20.922519 10.143011 40.107463 27.78788 51.321876 16.656355 10.584056 29.764907 19.958564 36.906561 26.39823 14.722306 13.276375 23.165606 32.242332 23.165606 52.033074C921.375691 795.553031 915.427212 801.500487 908.117736 801.500487z" p-id="2113" /><path d="M450.672236 213.276455c-24.200168 0-58.362222 22.532179-82.263585 43.620473-19.808138 17.477047-54.381561 53.168943-63.362096 95.835695-2.275833 10.812253 4.644787 21.423939 15.45704 23.698748 1.38965 0.292666 2.774183 0.433882 4.140297 0.433882 9.260921 0 17.575284-6.467295 19.558451-15.890922 4.823865-22.910802 23.295566-49.909713 50.681286-74.070996 26.590612-23.462365 49.811476-33.610492 55.788607-33.610492 11.048637 0 20.007683-8.958022 20.007683-20.007683C470.679919 222.234477 461.720873 213.276455 450.672236 213.276455z" p-id="2114" /></symbol>'});r.a.add(l);t.default=l},Dg1o:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),l=n("UEqw"),s=n("nKSZ"),c=n("G+jI"),u=n("5xRT"),d=n("0xDb"),h={components:{baseTimePick:c.a,extItem:u.default},data:function(){return{visible:!1,fieldList:[],form:{},result:"",numType:[],loading:!1}},methods:{getMatchType:function(e){return Object(d.o)(e)},init:function(e){var t=this;this.visible=!0,this.fieldList=e.fieldList,this.formule=e.format,this.form={},this.result="",e.fieldList.forEach(function(e){t.$set(t.form,e.key,"")})},check:function(){var e=this;this.loading=!0,this.fieldList.forEach(function(t){"num"==Object(d.o)(t.type)&&(e.form[t.key]=Number(e.form[t.key]))}),this.$http({url:this.$http.adornUrl("/common/common/checkFormula"),method:"POST",data:this.$http.adornParams({formula:this.formule,valueMap:this.form})}).then(function(t){var n=t.data;e.loading=!1,0==n.code&&(e.result=n.data)})}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.visible?n("vxe-modal",{attrs:{width:"500",title:"验证公式"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},e._l(e.fieldList,function(t){return n("el-form-item",{key:t.key,attrs:{label:t.name}},["dateTime"==t.type?n("baseTimePick",{attrs:{size:"mini",baseData:t},model:{value:e.form[t.key],callback:function(n){e.$set(e.form,t.key,n)},expression:"form[i.key]"}}):n("el-input",{attrs:{type:"num"==e.getMatchType(t.type)?"number":""},model:{value:e.form[t.key],callback:function(n){e.$set(e.form,t.key,n)},expression:"form[i.key]"}})],1)}),1),e._v(" "),n("div",{staticStyle:{"margin-left":"20px"}},[n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",loading:e.loading},on:{click:e.check}},[e._v("验证")])],1),e._v(" "),n("div",{staticStyle:{margin:"20px","margin-left":"20px",color:"black","font-weight":"bold"}},[e._v("\r\n            验证结果："+e._s(e.result)+"\r\n        ")])],1):e._e()],1)},staticRenderFns:[]};var p=n("VU/8")(h,f,!1,function(e){n("zU7u")},"data-v-5c9216c7",null).exports,m={props:{dataForm:{},exts:{type:Array,default:[]}},components:{formule:s.a,formuleList:l.a,checkFormule:p},data:function(){return{loading:!1,ext:{name:""},visible:!1,robotInfo:null,fieldList:[],methodList:d.j,notHandleType:["multipleRelateTable","file","picture","video"]}},methods:{checkData:function(){var e=this.$refs.formule.getData();this.$refs.checkFormule.init(e)},dataSave:function(){var e=this.$refs.formule.getData();this.$emit("saveData",e),this.visible=!1,console.log(e)},clickItem:function(e,t){this.$refs.formule.handleClick({name:e.name,value:"field"==t?"["+e.name+"]":e.value})},init:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"formuleContext";this.$set(this,"ext",e),this.visible=!0,this.$nextTick(r()(i.a.mark(function o(){var a,r,l,s,c;return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a=[],t.methodList.forEach(function(e){a=a.concat(e.list)}),r=[],l=i.a.mark(function e(n){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.exts[n],-1!=t.notHandleType.indexOf(o.type)){e.next=10;break}if(o.value=o.name,"relateTable"!=o.type||!o.relateTableName){e.next=9;break}return t.loading=!0,e.next=7,t.$http({url:t.$http.adornUrl("/common/commondefine/infoByTable/"+o.relateTableName),method:"get",params:t.$http.adornParams()}).then(function(e){var n=e.data;t.loading=!1,0==n.code?n.assetExt.templateJson&&(o.templateJson=n.assetExt.templateJson,n.assetExt.templateJson.forEach(function(e){r.push({value:o.name+"-"+e.name,key:o.key+"@"+e.key,name:o.name+"-"+e.name,type:o.type})})):t.$message.error(n.msg)});case 7:e.next=10;break;case 9:r.push(o);case 10:case"end":return e.stop()}},e,t)}),o.t0=i.a.keys(t.exts);case 5:if((o.t1=o.t0()).done){o.next=10;break}return s=o.t1.value,o.delegateYield(l(s),"t2",8);case 8:o.next=5;break;case 10:c={fieldList:r,methodList:a},t.$refs.formule.init(c,e[n]?e[n]:"");case 12:case"end":return o.stop()}},o,t)})))}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.visible?n("vxe-modal",{attrs:{width:"1000",height:"600",title:"设置计算公式"},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[e._v("\r\n                设置计算公式\r\n                "),n("div",{staticClass:"col text-center"}),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.checkData()}}},[e._v("验证公式")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataSave()}}},[e._v("保存")])],1)]},proxy:!0}],null,!1,1030055013),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"h100 row"},[n("div",{staticStyle:{width:"280px"}},[n("formuleList",{attrs:{fieldList:e.exts,methodList:e.methodList},on:{click:e.clickItem}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"col column",staticStyle:{"padding-left":"20px",background:"white","border-left":"1px solid #F9FAFC"}},[n("div",[n("div",{staticStyle:{"font-size":"20px","margin-bottom":"10px",color:"black","margin-top":"5px"}},[e._v("\r\n                        "+e._s(e.ext.name)+" =\r\n                    ")]),e._v(" "),n("div",{staticClass:"row",staticStyle:{"font-size":"12px",color:"#767e89","margin-bottom":"15px"}},[n("i",{staticClass:"el-alert__icon el-icon-info"}),e._v(" "),n("div",{staticClass:"col",staticStyle:{"line-height":"14px","margin-left":"5px"}},[e._v("请在左侧选择函数或字段变量，且在英文输入法下编辑。")])])]),e._v(" "),n("formule",{ref:"formule",staticClass:"col"})],1)])]):e._e(),e._v(" "),n("checkFormule",{ref:"checkFormule"})],1)},staticRenderFns:[]};var b=n("VU/8")(m,v,!1,function(e){n("+WRv")},"data-v-02b7ec32",null);t.default=b.exports},DsnQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-config",use:"icon-config-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-config"><defs><style type="text/css"></style></defs><path d="M993.889598 704.576038l-41.044193 12.788439c1.179981 8.865801 2.455635 17.508362 2.455636 26.661186 0 9.057149-1.435112 17.859167-2.806441 26.533619l41.394998 12.884114c9.694976 2.806441 17.859167 9.376063 22.57909 18.241864 4.688031 8.865801 5.644772 19.262387 2.423745 28.829798-6.665296 19.708867-28.574668 30.360584-49.080819 24.046093l-41.873369-12.979788a207.389579 207.389579 0 0 1-32.178392 43.27659l25.544987 33.741069a36.388053 36.388053 0 0 1-8.61067 52.174281 39.896104 39.896104 0 0 1-54.438568-8.227973l-25.672553-33.900526a218.009405 218.009405 0 0 1-52.748326 17.093774v41.139867c0 20.601825-17.476471 37.408577-38.939363 37.408577-21.558566 0-39.003146-16.711078-39.003145-37.408577v-41.139867a217.818057 217.818057 0 0 1-52.780218-17.093774l-25.60877 33.900526a40.183126 40.183126 0 0 1-54.47046 8.227973 36.164814 36.164814 0 0 1-8.578778-52.174281l25.800118-34.059983a201.138871 201.138871 0 0 1-33.29459-42.702545l-40.916628 12.78844c-20.601825 6.442057-42.511196-4.337226-49.11271-24.046093a36.930206 36.930206 0 0 1 24.970943-47.071662l41.076084-12.724657c-1.148089-8.833909-2.519418-17.604036-2.519418-26.693077 0-9.184715 1.498894-17.859167 2.838332-26.661185l-41.42689-12.820331c-20.569934-6.442057-31.66813-27.490361-24.970942-47.135445 6.601514-19.613193 28.510885-30.296802 49.112709-24.014201l41.841478 13.04357a211.057087 211.057087 0 0 1 32.178392-43.372263l-25.513096-33.645396a36.451836 36.451836 0 0 1 8.578779-52.206172 39.959887 39.959887 0 0 1 54.47046 8.291756l25.640661 33.900526a214.469463 214.469463 0 0 1 52.748326-17.125665v-41.139868c0-20.633716 17.412688-37.408577 39.003146-37.408577 21.494783 0 38.971254 16.647295 38.971254 37.408577v41.076085a216.733751 216.733751 0 0 1 52.716435 17.157557l25.672553-33.932418a40.119343 40.119343 0 0 1 54.438568-8.291756c17.348905 12.182503 21.271544 35.495095 8.642561 52.238064l-25.832009 34.028092c12.724657 12.916005 24.365007 26.980099 33.358373 42.60687l40.884736-12.660874c20.538042-6.314491 42.415522 4.401009 49.080819 24.077985 6.76097 19.613193-4.528575 40.661497-25.002835 47.071662z m-252.898564-91.273101c-75.327416 0-136.463172 58.616338-136.463172 130.8184 0 72.265844 61.135756 130.754617 136.463172 130.754617 75.231742 0 136.39939-58.488773 136.39939-130.754617 0-72.202062-61.071974-130.8184-136.39939-130.8184z" p-id="4162" /><path d="M441.690527 895.669127H99.528018a49.750537 49.750537 0 0 1-49.782429-49.782429V99.596749c0-27.45847 22.292068-49.782429 49.782429-49.782429h447.818617v223.909309a99.532966 99.532966 0 0 0 99.532966 99.532966h199.002149v36.451836a322.102837 322.102837 0 0 1 49.782429 32.018935V348.381326l-8.802018-8.770127 1.530785-8.802018-307.05011-330.713507H99.559909A99.532966 99.532966 0 0 0 0.026943 99.62864v746.321841a99.532966 99.532966 0 0 0 99.532966 99.532966h390.446043a322.963904 322.963904 0 0 1-48.315425-49.81432z" p-id="4163" /><path d="M597.129064 91.145536l217.818057 232.32863h-168.06752a49.750537 49.750537 0 0 1-49.782428-49.750537V91.145536h0.031891zM174.185715 423.007132h248.784577v-49.750537H174.185715v49.750537zM422.970292 223.9412H174.185715v49.782429h248.784577V223.9412zM174.185715 744.057554h248.784577v-49.750537H174.185715v49.750537zM514.115828 545.023514H174.185715v49.750537h339.930113v-49.750537z" p-id="4164" /></symbol>'});r.a.add(l);t.default=l},E4LH:function(e,t,n){"use strict";t.a=function(e){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(e)},t.c=function(e){return/^1[3456789]\d{9}$/.test(e)},t.d=function(e){return/^http[s]?:\/\/.*/.test(e)},t.b=function(e){return parseInt(e,10)===e}},ELti:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-shoucang",use:"icon-shoucang-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-shoucang"><defs><style type="text/css"></style></defs><path d="M248.482281 938.000324c-4.306072 0-8.592702-1.336438-12.211113-3.967358-6.395664-4.646833-9.600659-12.521175-8.264221-20.314675l48.430012-282.363949L71.288626 431.382914c-5.66093-5.519714-7.698333-13.772678-5.255701-21.291932 2.444679-7.519254 8.943696-13.000082 16.768919-14.137998l283.508006-41.195238L493.099535 97.853655c3.498684-7.089465 10.720156-11.577686 18.627243-11.577686 7.907087 0 15.127536 4.489244 18.627243 11.577686l126.788661 256.904091 283.510052 41.195238c7.823176 1.137916 14.322194 6.618744 16.766872 14.137998 2.442632 7.519254 0.405229 15.773242-5.255701 21.291932L747.012502 631.354342l48.430012 282.363949c1.336438 7.7935-1.868557 15.667841-8.264221 20.314675-6.399757 4.646833-14.878872 5.257747-21.874193 1.582031L511.726777 802.298666 258.146385 935.614997C255.107165 937.211355 251.789607 938.000324 248.482281 938.000324zM130.422422 431.011454 313.25654 609.228415c4.894474 4.7727 7.128351 11.647271 5.974062 18.385742l-43.163055 251.64532 225.994104-118.811989c6.048763-3.180436 13.282514-3.180436 19.331277 0l225.992057 118.811989-43.163055-251.64532c-1.154289-6.738471 1.079588-13.613042 5.974062-18.385742l182.833095-178.216961-252.665557-36.71418c-6.767124-0.983397-12.614296-5.233188-15.641235-11.362792L511.726777 153.97893 398.729214 382.934482c-3.025916 6.129604-8.874111 10.379395-15.639189 11.362792L130.422422 431.011454z" p-id="3386" /></symbol>'});r.a.add(l);t.default=l},EkDd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-oss",use:"icon-oss-usage",viewBox:"0 0 1291 1024",content:'<symbol class="icon" viewBox="0 0 1291 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-oss"><defs><style type="text/css"></style></defs><path d="M779.656047 669.379378a31.50762 31.50762 0 0 1-22.37041-9.294747L645.906202 548.705195l-111.379436 111.379436a31.50762 31.50762 0 0 1-44.583281-44.583282l133.749845-133.592307a31.50762 31.50762 0 0 1 44.425744 0l133.749845 133.592307a31.50762 31.50762 0 0 1-22.212872 53.878029z" fill="" p-id="1509" /><path d="M960.982398 1023.997637H787.69049a31.50762 31.50762 0 0 1 0-63.015239h166.360231a29.302086 29.302086 0 0 1 5.356296 0 283.568576 283.568576 0 0 0 54.980796-557.527329 31.50762 31.50762 0 0 1-23.630715-27.411629 346.583816 346.583816 0 0 0-689.701793 0 31.50762 31.50762 0 0 1-23.788253 27.411629A283.568576 283.568576 0 0 0 332.405387 960.982398a31.50762 31.50762 0 0 1 5.513833 0H645.906202a31.50762 31.50762 0 0 1 0 63.015239H330.830006a33.398077 33.398077 0 0 1-8.979672-1.260305 346.583816 346.583816 0 0 1-80.817044-675.05075 409.599055 409.599055 0 0 1 809.745824 0 346.583816 346.583816 0 0 1-81.132121 675.208288A31.50762 31.50762 0 0 1 960.982398 1023.997637z" fill="" p-id="1510" /><path d="M645.906202 1008.243827a31.50762 31.50762 0 0 1-31.50762-31.507619V551.383343a31.50762 31.50762 0 0 1 63.015239 0v425.352865a31.50762 31.50762 0 0 1-31.507619 31.507619z" fill="" p-id="1511" /></symbol>'});r.a.add(l);t.default=l},EkEb:function(e,t){},"F/IF":function(e,t){},F3T4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xf8N"),i=n("xstH"),a=n("8skB"),r=n("TN+i"),l=n("9uud"),s=n("0xDb"),c={formId:"",symbol:"",value:""},u={components:{selectStaff:i.a,clickInput:o.a,selectForm:a.a,rules:r.a,customFromItem:l.a},props:{d:{},exts:{default:[]}},model:{prop:"d",event:"change"},watch:{d:{handler:function(e){this.getData()},deep:!0,immediate:!0},exts:{handler:function(e){var t=this;this.extsMap={},e.forEach(function(e){t.extsMap[e.key]=e})},deep:!0,immediate:!0}},data:function(){return{extsMap:{},orList:[],noshowlist:Object(s.p)(),symbolEnum:Object(s.m)("symbolEnum")}},beforeDestroy:function(){this.save()},methods:{getggg:function(e){return e},getShowSymbol:function(e,t,n,o){if(!e||!this.extsMap||!this.extsMap[e])return!1;var i=Object(s.q)(this.extsMap[e].type,t);return-1==i.showList.indexOf(this.orList[n][o].symbol)&&(this.orList[n][o].symbol=""),i.re},deleteItem:function(e,t){this.orList[e].splice(t,1),0==this.orList[e].length&&this.orList.splice(e,1)},addItem:function(e,t){e?this.orList[t].push(Object(s.e)(c)):this.orList.push([Object(s.e)(c)])},formatValue:function(e){if("belong"==e.symbol||"notBelong"==e.symbol){e.arrayValue=e.value;-1!=["dateTime","date","dateYear","dateMonth"].indexOf(this.extsMap[e.formId].type)&&(e.timeRange=e.value)}},save:function(){for(var e in this.orList)for(var t in this.orList[e]){var n=this.orList[e][t];if(!n.formId)return this.$message.error("关联表单字段不能为空"),!1;if(!n.symbol)return this.$message.error("判断符不能为空"),!1;this.formatValue(this.orList[e][t])}this.$set(this.d.info,"condition",this.orList),this.$emit("close")},getData:function(){this.orList=Object(s.e)(this.d.info.condition?this.d.info.condition:[[Object(s.e)(c)]])}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[e._m(0),e._v(" "),n("div",{staticClass:"col",staticStyle:{overflow:"auto",padding:"0 20px"}},[e._l(e.orList,function(t,o){return n("div",{key:o},[0!=o?n("div",{staticStyle:{padding:"14px 20px","font-weight":"bold"}},[e._v("\r\n                或\r\n            ")]):e._e(),e._v(" "),n("div",{staticClass:"or-box"},[e._l(t,function(t,i){return n("div",{key:"or"+i,staticStyle:{"padding-bottom":"5px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[n("el-select",{attrs:{placeholder:"关联表单字段"},model:{value:t.formId,callback:function(n){e.$set(t,"formId",n)},expression:"item.formId"}},e._l(e.exts,function(t){return-1==e.noshowlist.indexOf(e.extsMap[t.key].type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[n("el-select",{attrs:{placeholder:"判断符"},model:{value:t.symbol,callback:function(n){e.$set(t,"symbol",n)},expression:"item.symbol"}},e._l(e.symbolEnum,function(a){return e.getShowSymbol(t.formId,a.value,o,i)?n("el-option",{key:a.value,attrs:{label:a.label,value:a.value}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:12}},[n("customFromItem",{attrs:{isRange:"belong"==t.symbol||"notBelong"==t.symbol,symbol:t.symbol,exts:e.extsMap[t.formId]?e.extsMap[t.formId]:null},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(o,i)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)}),e._v(" "),n("el-button",{on:{click:function(t){return e.addItem(!0,o)}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 且条件")])],2)])}),e._v(" "),n("div",{staticStyle:{padding:"10px 20px"}},[n("el-button",{on:{click:function(t){return e.addItem(!1)}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 或条件")])],1)],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"top-title"},[t("div",{staticClass:"t-title"},[this._v("\r\n                筛选数据\r\n                ")])]),this._v(" "),t("div",{staticClass:"tips"},[t("div",[this._v("当关联目标应用的表单字段时，在筛选中选择了表格子字段，则表格中只要有一行满足条件，该数据就会被筛选出来.")]),this._v(" "),t("div",[this._v("当关联目标应用的表格子字段时，对同一表格进行筛选，可筛选出符合条件的表格行数据.")])])])}]};var h=n("VU/8")(u,d,!1,function(e){n("bh2v")},"data-v-7d904d68",null);t.default=h.exports},FCXA:function(e,t){},FkmU:function(e,t){},FmGb:function(e,t){},Fydw:function(e,t){},"G+jI":function(e,t,n){"use strict";var o=n("0xDb"),i={props:{size:{default:"medium"},isView:{},baseData:{},value:{}},model:{prop:"value",event:"change"},data:function(){return{modelDate:this.value,dateType:Object(o.m)("dateType"),dataTypeMap:Object(o.n)("dateType")}},watch:{value:function(e){this.modelDate=e},modelDate:function(e){this.$emit("change",e)}},methods:{changeTime:function(){}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["HH:mm:ss"==e.baseData.dateType||"HH:mm"==e.baseData.dateType?n("el-time-picker",{staticStyle:{width:"100%"},attrs:{size:e.size,placeholder:"任意时间点","value-format":e.baseData.dateType,readonly:e.isView},on:{change:e.changeTime},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}}):n("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:e.size,type:e.dataTypeMap[e.baseData.dateType].type,"value-format":e.baseData.dateType,placeholder:"请选择"+e.baseData.name,readonly:e.isView},on:{change:e.changeTime},model:{value:e.modelDate,callback:function(t){e.modelDate=t},expression:"modelDate"}})],1)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("A2oB")},"data-v-58d4a536",null);t.a=r.exports},GFDk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xf8N"),i=n("xstH"),a=n("8skB"),r=n("TN+i"),l=n("0xDb"),s={components:{selectStaff:i.a,clickInput:o.a,selectForm:a.a,rules:r.a},props:{d:{}},model:{prop:"d",event:"change"},watch:{d:{handler:function(e){this.getData()},deep:!0,immediate:!0}},methods:{save:function(){this.$set(this.d,"info",this.baseData.info),this.$set(this.d,"name",this.baseData.name),this.$message.success("保存配置成功"),this.$emit("close")},getData:function(){this.baseData=Object(l.e)(this.d)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[n("div",{staticClass:"col"},[n("div",{staticClass:"top-title blue-head"},[n("div",{staticClass:"t-title"},[n("clickInput",{model:{value:e.baseData.name,callback:function(t){e.$set(e.baseData,"name",t)},expression:"baseData.name"}})],1)])]),e._v(" "),n("div",{staticClass:"foot-box"},[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.save}},[e._v("保存配置")])],1)])},staticRenderFns:[]};var u=n("VU/8")(s,c,!1,function(e){n("71TV")},"data-v-0544a604",null);t.default=u.exports},GHQE:function(e,t){},GIrI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-shouye",use:"icon-shouye-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-shouye"><defs><style type="text/css"></style></defs><path d="M958.400956 451.54921c-0.058328-5.760191-2.597151-11.215436-6.965645-14.97097L524.345166 69.511143c-7.498788-6.445806-18.581194-6.445806-26.079982 0L309.582871 231.6755l0-102.017488c0-11.04966-8.901741-19.532869-19.951401-19.532869l-88.034009 0c-11.048637 0-19.928888 8.482185-19.928888 19.532869l0 211.954343L71.176063 436.57824c-4.423753 3.800559-6.967692 9.341762-6.967692 15.173584l0 105.500822c0 7.819083 4.554736 14.921851 11.660574 18.183128 2.670829 1.226944 5.51562 1.824555 8.343015 1.824555 4.699022 0 9.346879-1.654686 13.048177-4.836145l53.29788-45.825698 0 324.100516c0 60.677964 49.364291 110.042255 110.042255 110.042255L764.792447 960.741257c60.677964 0 110.042255-49.364291 110.042255-110.042255L874.834702 527.026228l51.585889 44.335764c5.955642 5.119601 14.356986 6.282077 21.481244 2.965541 7.122211-3.313465 11.645225-10.488889 11.565407-18.342764L958.400956 451.54921zM221.578538 150.034085l48.095391 0 0 115.941616-48.095391 41.336454L221.578538 150.034085zM570.718333 920.725892 436.666244 920.725892 436.666244 700.642404c0-11.031241 8.976442-20.007683 20.007683-20.007683l94.0357 0c11.031241 0 20.007683 8.976442 20.007683 20.007683L570.71731 920.725892zM834.818313 495.895207l0 354.803795c0 38.612413-31.414477 70.02689-70.02689 70.02689l-154.058748 0L610.732675 700.642404c0-33.096792-26.926256-60.023048-60.023048-60.023048l-94.0357 0c-33.096792 0-60.023048 26.926256-60.023048 60.023048l0 220.084511L260.59925 920.726915c-38.612413 0-70.02689-31.414477-70.02689-70.02689L190.57236 495.895207c0-1.172709-0.121773-2.314719-0.315178-3.432169l322.113255-276.958846 322.70268 277.348726C834.921667 493.848595 834.818313 494.858598 834.818313 495.895207zM525.411451 173.947727c-7.502881-6.445806-18.587334-6.446829-26.086122 0.00307L104.223736 513.663896l0-52.726875 407.081439-349.870436 407.176606 349.9523 0.521886 51.205219L525.411451 173.947727z" p-id="2240" /></symbol>'});r.a.add(l);t.default=l},GRRO:function(e,t){},GTcl:function(e,t){},GZDk:function(e,t){},GZwR:function(e,t){},Gfl2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={components:{rulesScreen:n("N2OJ").a},data:function(){return{model:null,loading:!1,visible:!1,tableName:"",ext:{key:""},exts:[]}},methods:{closeWindow:function(){this.visible=!1},save:function(){this.$refs.rulesScreen.saveData(),this.$emit("save",this.model),this.visible=!1},init:function(e,t){var n=this;this.visible=!0,this.model=e.dataFilterInfo,this.exts=t,this.ext=e,this.tableName=e.relateTableName,this.$nextTick(function(){n.$refs.rulesScreen.getData()})}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vxe-modal",{attrs:{width:"750",height:"70%",title:"设置筛选条件",loading:e.loading},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("span",[e._v("设置筛选条件")]),e._v(" "),n("div",{staticClass:"col text-center"}),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},on:{click:e.closeWindow}},[e._v("取消")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存")])],1)]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(" "),n("rulesScreen",{ref:"rulesScreen",attrs:{exts:e.exts,filterExtKey:e.ext.key,tableName:e.tableName},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("z+ZM")},"data-v-78f04ae6",null);t.default=a.exports},Gg4Z:function(e,t,n){"use strict";var o={props:{value:{},colorList:{type:Array,default:function(){return["#2BAAB1","#EDBC6C","#E36159","#144F9F","#EBEBEB","#23BAE5","#7266BA","#4C5F70","#7500ea","#2d46c4","#484848"]}}},model:{prop:"value",event:"change"},methods:{select:function(e){this.$emit("change",e)},getNextColor:function(){return this.value&&this.colorList.indexOf(this.value)!=this.colorList.length-1?this.colorList[this.colorList.indexOf(this.value)+1]:this.colorList[0]}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e._l(e.colorList,function(t){return n("div",{staticStyle:{padding:"2px",height:"26px",display:"inline-block","margin-right":"10px",cursor:"pointer","border-radius":"4px"},style:e.value==t?"border:1px solid "+t:"border:1px solid white",on:{click:function(n){return e.select(t)}}},[n("div",{staticClass:"ext-select-color",staticStyle:{display:"inline-block"},style:"background-color:"+t})])}),e._v(" "),n("div",{attrs:{slot:"reference"},slot:"reference"},[n("div",{staticClass:"ext-select-color cursor-pointer",staticStyle:{"margin-top":"4px"},style:"background-color:"+e.value})])],2)],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("lqTw")},"data-v-2231f2ec",null);t.a=a.exports},GmwV:function(e,t,n){var o={"./ayb/operateBook.vue":["lCCx",41],"./chatGpt/chat.vue":["7pWS",40],"./chatGpt/chatBossZhiPing.vue":["43/A",39],"./common/appstore/appdetail.vue":["UtNw",0],"./common/appstore/appstore.vue":["DVN+",0,38],"./common/appstore/index.vue":["KaeB",0,13],"./common/appstore/mycenter.vue":["ax/a",0,37],"./common/appstore/storemocoinhistory-add-or-update.vue":["JiUU",64],"./common/appstore/storemocoinhistory.vue":["h/Ir",47],"./common/appstore/storewithdrawcashhistory-add-or-update.vue":["Jx2R",63],"./common/appstore/storewithdrawcashhistory.vue":["yEmj",46],"./common/chart-config.vue":["3Rxy",36],"./common/chart-part.vue":["S5gw"],"./common/chart.vue":["0+rB",35],"./common/common-add-or-update-view/extComponent.vue":["5xRT"],"./common/common-add-or-update-view/index.vue":["gxOO"],"./common/common-add-or-update.vue":["7Wi0"],"./common/common-basedata-table-dialog.vue":["H/gZ"],"./common/common-batch-upload-file.vue":["9lU6"],"./common/common-chart/chart-view-edit.vue":["vkpF",34],"./common/common-chart/chart-view.vue":["nqSO"],"./common/common-chart/chart.vue":["hxNb",48],"./common/common-component.vue":["K1Fd"],"./common/common-define-add-or-update.vue":["h4XL",14],"./common/common-define-add-or-update/baseComponent.vue":["NKzj"],"./common/common-define-add-or-update/chartsComponent.vue":["crIV"],"./common/common-define-add-or-update/customBtn/customBtn.vue":["nHdu"],"./common/common-define-add-or-update/customBtn/customBtnWin.vue":["dLb2"],"./common/common-define-add-or-update/excel/addFromExcel.vue":["45bb",0],"./common/common-define-add-or-update/excel/setExcel.vue":["QyQl",0],"./common/common-define-add-or-update/ext.vue":["SYAo"],"./common/common-define-add-or-update/extDefaultValue.vue":["vpfm"],"./common/common-define-add-or-update/flowComponent.vue":["BUm/"],"./common/common-define-add-or-update/formuleWin.vue":["Dg1o"],"./common/common-define-add-or-update/index.vue":["LokH"],"./common/common-define-add-or-update/phoneCompnent.vue":["VGMx"],"./common/common-define-add-or-update/phoneTamplate/fieldConfig.vue":["bvjD"],"./common/common-define-add-or-update/phoneTamplate/tamplate1.vue":["w2O1"],"./common/common-define-add-or-update/phoneTamplate/tamplate2.vue":["7xC7"],"./common/common-define-add-or-update/phoneTamplate/tamplate3.vue":["xea2"],"./common/common-define-add-or-update/phoneTamplate/tamplate4.vue":["y01D"],"./common/common-define-add-or-update/process/addBtn.vue":["skRJ"],"./common/common-define-add-or-update/process/baseProcess.vue":["Wncs"],"./common/common-define-add-or-update/process/flowApproval.vue":["veIK"],"./common/common-define-add-or-update/process/flowBranch.vue":["F3T4"],"./common/common-define-add-or-update/process/flowRobot.vue":["FgUk",33],"./common/common-define-add-or-update/process/flowStart.vue":["GFDk"],"./common/common-define-add-or-update/process/flowWrite.vue":["IMY8"],"./common/common-define-add-or-update/process/robot/addRobot.vue":["dVxt"],"./common/common-define-add-or-update/process/robot/emailRobot.vue":["reZG"],"./common/common-define-add-or-update/process/robot/messageRobot.vue":["NSUx"],"./common/common-define-add-or-update/process/robot/updataRobot.vue":["cTe8"],"./common/common-define-add-or-update/rulesScreen.vue":["Gfl2"],"./common/common-define-add-or-update/seniorComponent.vue":["XUmz"],"./common/common-define-menu.vue":["HLDT",0],"./common/common-define.vue":["s3Vr",0],"./common/common-define/index.vue":["dA9+"],"./common/common-detail.vue":["kNFi",62],"./common/common-dialog-view.vue":["h2v7"],"./common/common-dialog.vue":["iFqQ"],"./common/common-excel.vue":["BN9O"],"./common/common-field-perm-children-dialog.vue":["InBC"],"./common/common-field-perm-dialog.vue":["BS5Q"],"./common/common-filelist.vue":["Ozts"],"./common/common-fixdata-dialog.vue":["VPP1"],"./common/common-print-qrcode.vue":["xVjb"],"./common/common-print-template-designer.vue":["/ZI6",32],"./common/common-proptable-view-dialog.vue":["JTg7"],"./common/common-relatetable-dialog-multiple.vue":["s3ry"],"./common/common-relatetable-dialog.vue":["Lmrr"],"./common/common-relatetable-view-dialog.vue":["eBok"],"./common/common-richtext-dialog.vue":["+TJN"],"./common/common-sql-define/baseComponent.vue":["gf9G"],"./common/common-sql-define/index.vue":["KmbY"],"./common/common-sql-define/sqlComponent.vue":["N8cm"],"./common/common-sys-config.vue":["rFEY",31],"./common/common-update-history.vue":["Xojz"],"./common/common-view-custom-xuanpin.vue":["/uvE",65],"./common/common-view-leftview/index.vue":["LZCK"],"./common/common-view-leftview/tree.vue":["i8PB"],"./common/common-view-sql/index.vue":["O6G6"],"./common/common-view.vue":["SYqL"],"./common/common.vue":["jpLM",0],"./common/mobi/cash.vue":["Zr/R",0],"./common/mobi/cashlist.vue":["ydt2",0],"./common/mobi/consumption.vue":["vcck",0],"./common/mobi/mobi.vue":["TvV2",0,30],"./common/open-common-view/index.vue":["E2ge",29],"./common/open-detail-view/index.vue":["fBiJ",28],"./common/open-form-view/index.vue":["JW8g",27],"./customView/appstore-view/index.vue":["nUMR",7],"./customView/bxyz/dashboard/timeStatis.vue":["Kecx",11],"./customView/bxyz/dashboard/timeStatisDetail.vue":["OViX",10],"./customView/bxyz/dashboard/timeStatisDetailDetail.vue":["Vd9n",9],"./customView/bxyz/dashboard/timeStatisRankChart.vue":["PGBO",12],"./customView/common-card-view-zhifu/index.vue":["q4s/",6],"./customView/common-card-view/index.vue":["0a1z",5],"./customView/customFormDetail/bom.vue":["kjcC",4],"./customView/customFormDetail/template.vue":["/954",3],"./customView/douyin/qushitu.vue":["hGwm",8],"./dataProcess/blockly.vue":["sO9H"],"./dataProcess/blocklyDebugger.vue":["HCHy"],"./dataProcess/blocklyXML.vue":["JRhF"],"./dataProcess/commonrobotrunlog.vue":["roSp",61],"./dataProcess/components/add.vue":["D6CK"],"./dataProcess/components/addBatchData.vue":["OWS8"],"./dataProcess/components/addByForm.vue":["X3VA"],"./dataProcess/components/condition.vue":["kN15"],"./dataProcess/components/conditionGetOneData.vue":["mdla"],"./dataProcess/components/conditionLogic.vue":["dcie"],"./dataProcess/components/delete.vue":["kp+h"],"./dataProcess/components/doHttp.vue":["RzKZ"],"./dataProcess/components/formule.vue":["5Xn/"],"./dataProcess/components/getUserListConfig.vue":["42jU"],"./dataProcess/components/insertVariable.vue":["HAP0"],"./dataProcess/components/jsCodeEditor.vue":["qvXg"],"./dataProcess/components/leftMenu.vue":["U5AP"],"./dataProcess/components/openDashBoardConfig.vue":["llCV"],"./dataProcess/components/params.vue":["j0+m"],"./dataProcess/components/rules.vue":["VfYd"],"./dataProcess/components/rulesScreen.vue":["JC7v"],"./dataProcess/components/sendMail.vue":["1m1e"],"./dataProcess/components/sendMessage.vue":["sZk8"],"./dataProcess/components/sendNotify.vue":["D6cd"],"./dataProcess/components/sqlEditor.vue":["9Gyk"],"./dataProcess/components/updata.vue":["Ch7m"],"./dataProcess/components/updataByForm.vue":["YjV2"],"./dataProcess/components/updataData.vue":["5NDU"],"./dataProcess/components/updataForm.vue":["OW9u"],"./dataProcess/condition1copy.vue":["ZwZe",26],"./dataProcess/debugger/variableDetail.vue":["S6Bm"],"./dataProcess/processList.vue":["hOEw",17],"./dataProcess/robotEditDialog.vue":["16XU"],"./job/schedule-add-or-update.vue":["lJxs",60],"./job/schedule-log.vue":["Nnw2",59],"./job/schedule.vue":["ynw1",25],"./newCommon/index.vue":["8yC+",24],"./oss/oss-config.vue":["C+ej",0],"./oss/oss-upload-update.vue":["l8Wc",58],"./oss/oss-upload.vue":["AytH",0],"./oss/oss.vue":["dIih",0,57],"./oss/ossall.vue":["RpLK",0,56],"./oss/ossmold.vue":["hUPR",0,45],"./pay/Pay.vue":["jsBg",0],"./pay/PayBarCode.vue":["ggGq",0],"./pay/PayBuyMoCoin.vue":["VXiD",0,23],"./pay/PayModal.vue":["Rd6/",0],"./print/components/panel/index.vue":["sg1D"],"./print/components/panel/layers.vue":["stQF"],"./print/components/panel/options/index.vue":["t4jf"],"./print/components/panel/page.vue":["uBQ/"],"./print/components/panel/style.vue":["JbnW"],"./print/components/viewport/index.vue":["M0rx"],"./print/components/viewport/size-control.vue":["TngT"],"./print/components/widgets/bar-code/index.vue":["iS5C"],"./print/components/widgets/html/index.vue":["hUfn"],"./print/components/widgets/image/index.vue":["oh3/"],"./print/components/widgets/table/index.vue":["06zv"],"./print/components/widgets/txt/index.vue":["jRWI"],"./print/index.vue":["chHq"],"./print/printTemplates.vue":["X6Qn"],"./singlePage/singleCommonView.vue":["zSnU",22],"./statistic/injecterUseRate.vue":["421b",21],"./statistic/order.vue":["RDpA",20],"./statistic/profitAndOut.vue":["Khen",19],"./sys/appRole-add-or-update.vue":["L6uE",55],"./sys/appRole.vue":["KSOr",44],"./sys/com/customer.vue":["JnxA",0],"./sys/com/openAcount.vue":["vMkZ",0],"./sys/com/provider.vue":["o3Gg",0],"./sys/company.vue":["NCIY",0],"./sys/companyUpdataServer.vue":["uebk",0],"./sys/companyUseDetail.vue":["oqm7",0],"./sys/companyinfo-add-or-update.vue":["+D7D",54],"./sys/companyinfo.vue":["82EO",0],"./sys/config-add-or-update.vue":["/caQ",53],"./sys/config.vue":["MKmw",43],"./sys/dept-add-or-update.vue":["QowZ"],"./sys/dept.vue":["iPNa"],"./sys/log.vue":["jbja",52],"./sys/menu-add-or-update.vue":["cFZF",18],"./sys/menu.vue":["gpws",16],"./sys/role-add-or-update.vue":["2OCm",0],"./sys/role.vue":["rE8r",0],"./sys/sendSysnotify.vue":["SEG1",51],"./sys/sysext-add-or-update.vue":["TiFm",50],"./sys/sysext.vue":["kRRB",42],"./sys/sysnotify.vue":["ZE5n",15],"./sys/sysnotifyDetail.vue":["vEUy",49],"./sys/user-add-or-update.vue":["INS3",0],"./sys/user-apply-confirm-update.vue":["sPqF",0],"./sys/user.vue":["JnAV",0]};function i(e){var t=o[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}i.keys=function(){return Object.keys(o)},i.id="GmwV",e.exports=i},GoFO:function(e,t,n){"use strict";var o={props:{itemOption:{},isEdit:{}},components:{CommonRelatetableDialog:n("Lmrr").default},data:function(){return{commonRelateTableDialogVisible:!1,selectItem:null,selectedId:null}},mounted:function(){this.getUserList()},methods:{getRelateFilterShowText:function(){},showChooseRelateTableForFilter:function(){var e=this;this.commonRelateTableDialogVisible=!0,this.$nextTick(function(){e.$refs.commonRelateTableDialog.initForFilter(e.itemOption.tableName,null,e.selectedId,null,null)})},updateRelateItemData:function(e,t,n,o){console.log(e,t,n,11111)},updateRelateFilterData:function(e,t,n,o){console.log(e,t,n,o,22222)},getUserList:function(){var e=this;this.$http({url:this.$http.adornUrl("/sys/user/list"),method:"post",data:this.$http.adornParams({page:1,limit:9999})}).then(function(t){var n=t.data;n&&0===n.code?e.staffList=n.page.list:e.staffList=[]})},userSelectChanged:function(e){var t=void 0;this.staffList.forEach(function(n){n.userId==e&&(t={userCtrName:n.realname,userCtrId:n.userId})}),this.$emit("userCtrChanged",t,this.itemOption.affectBlock)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid-card-dashboard row"},[n("span",{staticClass:"grid-card-dashboard-title",staticStyle:{"margin-right":"15px"}},[e._v(e._s(e.itemOption.name||"选择"))]),e._v(" "),n("el-button",{on:{click:function(t){return e.showChooseRelateTableForFilter()}},model:{value:e.selectItem,callback:function(t){e.selectItem=t},expression:"selectItem"}},[e._v(e._s(e.getRelateFilterShowText())+"\n  ")]),e._v(" "),e.commonRelateTableDialogVisible?n("common-relatetable-dialog",{ref:"commonRelateTableDialog",on:{updateRelateItemData:e.updateRelateItemData,updateRelateFilterData:e.updateRelateFilterData}}):e._e()],1)},staticRenderFns:[]};n("VU/8")(o,i,!1,function(e){n("m6A7")},"data-v-ad103818",null).exports},"Gr+4":function(e,t,n){"use strict";var o={components:{titeView:n("lMLl").a},props:{itemOption:{},isEdit:{}},data:function(){return{tableDataId:null}},mounted:function(){this.getData()},methods:{getData:function(e){var t=this;this.itemOption.robotInfo&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.robotInfo),method:"get",params:e}).then(function(e){var n=e.data;0==n.code&&n.data&&(t.tableDataId=n.data,t.$nextTick(function(){t.$refs.CommonAddOrUpdateView.init(t.tableDataId,!0,t.itemOption.tableName,null)}))})},onCtrDataChange:function(e){}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("titeView",{attrs:{itemOption:e.itemOption},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticStyle:{padding:"20px 20px 50px 20px"}},[n("common-add-or-update-view",{ref:"CommonAddOrUpdateView",on:{close:e.close}})],1)]},proxy:!0}])})},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("rCi/")},"data-v-5e4d11c1",null);t.a=a.exports},"H/gZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{visible:!1,tableName:"",selectedId:"",selectedRow:{},rowId:"",key:"",showType:"forRow"}},components:{BaseDataView:n("iPNa").default},methods:{init:function(e,t,n,o){var i=this;this.rowId=e,this.key=n,this.selectedId=o,this.tableName=t,this.visible=!0,this.$nextTick(function(){i.$refs.common.refreshDataAndPage(null,t,o)})},initForFilter:function(e,t,n){var o=this;this.showType="forFilter",this.key=t,this.selectedId=n,this.tableName=e,this.visible=!0,this.$nextTick(function(){o.$refs.common.refreshDataAndPage(null,e,n)})},selectItem:function(e){this.selectedId=e.id,this.selectedRow=e},confirm:function(){"forFilter"==this.showType?this.$emit("updateBaseDataFilterData",this.key,this.selectedRow):this.$emit("updateBaseData",this.rowId,this.key,this.selectedId,this.selectedRow),this.visible=!1}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"90%",height:"90%",resize:"",remember:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("BaseDataView",{ref:"common",attrs:{radioChoose:"true","append-to-body":!0,tableNameProp:e.tableName,selectedIdProp:e.selectedId},on:{selectItem:e.selectItem}}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"success"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("/7NN")},"data-v-44db3332",null);t.default=a.exports},H1qO:function(e,t){},HAP0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={components:{formuleList:n("UEqw").a},props:{fieldList:{type:Array,default:function(){return[]}}},methods:{clickItem:function(e,t){this.$emit("clickItem",e)}}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-popover",{attrs:{placement:"right",title:"",width:"200",trigger:"hover",content:""}},[t("formuleList",{attrs:{fieldList:this.fieldList,defaultActived:"1"},on:{click:this.clickItem}}),this._v(" "),t("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[this._v("插入变量")])],1)],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("KHQK")},"data-v-ff0a7366",null);t.default=a.exports},HCHy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("jB3U"),i=n("S6Bm"),a=n("R0ti"),r=n.n(a),l={components:{variableDetail:i.default,JsonViewer:r.a},props:{debugList:{type:Array,default:function(){return[]}},variableMap:{}},watch:{debugList:{handler:function(e){this.goStep(e.length-1)},deep:!0,immediate:!0}},data:function(){return{themeColor:localStorage.getItem("theme"),varTypeEnum:o.g,tableData:[],selectStep:null,longTextVarValue:"",longTextShow:!1}},methods:{showLangText:function(e){this.longTextVarValue=e,this.longTextShow=!0},showValueOrBtn:function(e){var t=this.variableMap[e.key].varType;return t==o.g.commonData||t==o.g.commonListData?"btn":"value"},goDetail:function(e){this.$refs.variableDetail.init(e,this.variableMap[e.key])},goStep:function(e){var t=this.debugList[e];this.tableData=[],this.selectStep=e;var n=[];for(var i in this.variableMap){var a=this.variableMap[i],r={name:a.itemName,key:i,varType:o.h[a.varType],value:null};if(t&&t.jsVarMap){var l=JSON.parse(t.jsVarMap);r.value=l[i].object}n.push(r)}this.$set(this,"tableData",n),console.log(n,this.variableMap,77777),console.log(t,this.variableMap)}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"10px"}},[n("div",{staticClass:"blockly-row-title"},[e._v("调试步数")]),e._v(" "),n("div",{staticStyle:{"margin-bottom":"20px"}},e._l(e.debugList,function(t,o){return n("span",{staticClass:"debug-step",style:"border: 1px solid "+(o==e.selectStep?e.themeColor:"#dcdfe6")+";",on:{click:function(t){return e.goStep(o)}}},[e._v("\n                "+e._s(o+1)+"\n            ")])}),0),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"name",label:"变量"}}),e._v(" "),n("el-table-column",{attrs:{prop:"varType",label:"类型"}}),e._v(" "),n("el-table-column",{attrs:{prop:"value",label:"值",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["btn"==e.showValueOrBtn(t.row)?n("div",[t.row.value?n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.goDetail(t.row)}}},[e._v("查看")]):e._e()],1):e._e(),e._v(" "),"value"==e.showValueOrBtn(t.row)&&null!=t.row.value?n("div",[JSON.stringify(t.row.value).length<100?n("div",[e._v("\n              "+e._s(t.row.value)+"\n            ")]):n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.showLangText(t.row.value)}}},[e._v("\n              查看\n            ")])],1):e._e()]}}])})],1),e._v(" "),n("variableDetail",{ref:"variableDetail"}),e._v(" "),e.longTextShow?n("vxe-modal",{attrs:{width:"90%",height:"90%",title:"变量详情"},model:{value:e.longTextShow,callback:function(t){e.longTextShow=t},expression:"longTextShow"}},[n("json-viewer",{attrs:{value:e.longTextVarValue,"expand-depth":5,boxed:"",sort:"","show-array-index":!1,copyable:""}},[n("template",{slot:"copy"},[n("i",{staticClass:"el-icon-document-copy",attrs:{title:"复制"}})])],2)],1):e._e()],1)},staticRenderFns:[]};var c=n("VU/8")(l,s,!1,function(e){n("xDEe")},"data-v-2504c09e",null);t.default=c.exports},HEOI:function(e,t,n){"use strict";var o=n("0I9B"),i=n("i/7v"),a=n("0xDb"),r=n("5xRT"),l=n("W43c"),s={components:{datePickerRange:o.a,extItem:r.default,tableConditionSearch:l.a,numberRange:i.a},data:function(){return{taskTypeEnum:Object(a.m)("taskTypeEnum"),baseData:[],oldBaseData:[],baseProcessCondition:{taskType:""},oldBaseProcessCondition:null,baseDataForm:{creater:"",createdAt:"",updatedAt:""},oldBaseDataForm:{creater:"",createdAt:"",updatedAt:""},staffSelectItemMap:{},staffSelectItem:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]}}},props:{isOpen:{default:!1,type:Boolean},queryInfo:{type:Array,default:function(){return[]}},tableDefine:{},fixedData:{default:function(){return{creater:{show:!1,query:!1},createdAt:{show:!1,query:!1},updatedAt:{show:!1,query:!1}}}},process:{default:null},processCondition:{},relateTaleFilter:{},baseTableFilter:{},dataForm:{},token:{token:this.$cookie?this.$cookie.get("token"):null},showFuzzySearch:{default:!1},showSeniorSearch:{default:!1}},watch:{queryInfo:{handler:function(){this.queryInfo&&(this.$set(this,"baseData",Object(a.e)(this.queryInfo)),this.$set(this,"oldBaseData",Object(a.e)(this.queryInfo)))},immediate:!0,deep:!0}},methods:{addSearchItem:function(){this.$refs.tableConditionSearchView.addItem(!1)},showChooseRelateTableForFilter:function(e,t,n,o,i){this.$emit("showChooseRelateTableForFilter",e,t,n,o,i)},gotoBaseDataTableForFilter:function(e,t,n){this.$emit("gotoBaseDataTableForFilter",e,t,n)},getBaseDataFilterShowText:function(e){return null==this.baseTableFilter[e.key]?"选择"+e.name:this.baseTableFilter[e.key].name},getRelateFilterShowText:function(e){return null==this.relateTaleFilter[e.key]?"选择"+e.name:this.relateTaleFilter[e.key][JSON.parse(e.relateTableProps[0]).key]},changeInput:function(){},clear:function(){this.$refs.tableConditionSearchView&&this.$refs.tableConditionSearchView.fresh(),this.$set(this,"baseData",Object(a.e)(this.oldBaseData)),this.$set(this,"baseProcessCondition",Object(a.e)(this.oldBaseProcessCondition)),this.$set(this,"baseDataForm",Object(a.e)(this.oldBaseDataForm)),this.$emit("clear",this.baseData,this.baseProcessCondition,this.baseDataForm)},search:function(){var e=Object(a.e)(this.baseData),t=void 0;this.$refs.tableConditionSearchView&&(t=this.$refs.tableConditionSearchView.getData()),this.$emit("search",e,this.baseProcessCondition,this.baseDataForm,t)}},mounted:function(){var e=this;if(!this.isOpen){var t={url:this.$http.adornUrl("sys/user/list"),method:"post",headers:{token:this.token},data:this.$http.adornParams({page:1,limit:999})};this.$http(t).then(function(t){var n=t.data;e.staffSelectItemMap={},n&&0===n.code?(n.page.list.forEach(function(t){e.staffSelectItemMap[t.userId]=t.realname,t.label=t.realname,t.value=t.userId}),e.$set(e,"staffSelectItem",n.page.list)):e.staffSelectItem=[]})}this.queryInfo&&(this.$set(this,"baseData",Object(a.e)(this.queryInfo)),this.$set(this,"oldBaseData",Object(a.e)(this.queryInfo))),this.processCondition&&(this.$set(this,"baseProcessCondition",Object(a.e)(this.processCondition)),this.$set(this,"oldBaseProcessCondition",Object(a.e)(this.processCondition))),this.dataForm&&(this.$set(this,"baseDataForm",Object(a.e)(this.dataForm)),this.$set(this,"oldBaseDataForm",Object(a.e)(this.dataForm)))}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{inline:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[e.showSeniorSearch?n("div",{staticStyle:{"margin-bottom":"5px"}},[n("tableConditionSearch",{ref:"tableConditionSearchView",attrs:{tableDefine:e.tableDefine}})],1):e._e(),e._v(" "),n("div",[e.process&&e.process.processEnable?n("el-form-item",[n("el-select",{attrs:{placeholder:"流程状态"},model:{value:e.baseProcessCondition.taskType,callback:function(t){e.$set(e.baseProcessCondition,"taskType",t)},expression:"baseProcessCondition.taskType"}},e._l(e.taskTypeEnum,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),e._l(e.baseData,function(t,o){return n("el-form-item",{key:o},["integer"==t.type||"float"==t.type?n("numberRange",{attrs:{size:"mini",placeholder:t.name,baseData:t},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):"dateTime"==t.type?n("datePickerRange",{attrs:{size:"mini",placeholder:t.name,baseData:t},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):"select"==t.type?n("extItem",{attrs:{clearable:"",nolabel:"",dataForm:e.dataForm,baseData:t},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):"selectStaff"==t.type?n("el-select",{attrs:{filterable:"",placeholder:t.name,clearable:""},on:{change:function(t){return e.changeInput(t)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}},e._l(e.staffSelectItem,function(e){return n("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1):"selectInterface"==t.type?n("my-select",{attrs:{id:t.value,address:t.interfaceAddress,place:t.name},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):"selectinterfaceTree"==t.type?n("my-tree-select",{attrs:{id:t.value,address:t.interfaceAddress,place:t.name},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):"baseData"==t.type?n("el-button",{attrs:{placeholder:t.name,disabled:null!=t.disable&&t.disable,clearable:""},on:{click:function(n){return e.gotoBaseDataTableForFilter(t.baseDataTable,t.key,null==e.baseTableFilter[t.key]?null:e.baseTableFilter[t.key].id)},input:function(t){return e.changeInput(t)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}},[e._v(e._s(e.getBaseDataFilterShowText(t))+"\n          ")]):"relateTable"==t.type?n("el-button",{attrs:{placeholder:t.name,disabled:null!=t.disable&&t.disable,clearable:""},on:{click:function(n){return e.showChooseRelateTableForFilter(t.relateTableName,t.key,null==e.relateTaleFilter[t.key]?null:e.relateTaleFilter[t.key].id,t.relateTableExtId,t.name)},input:function(t){return e.changeInput(t)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}},[e._v(e._s(e.getRelateFilterShowText(t))+"\n          ")]):n("el-input",{attrs:{placeholder:t.name,clearable:""},on:{input:function(t){return e.changeInput(t)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)}),e._v(" "),e.fixedData?[e.fixedData&&e.fixedData.creater.query?n("el-form-item",[n("el-select",{attrs:{placeholder:"创建人",clearable:""},on:{change:function(t){return e.changeInput(t)}},model:{value:e.baseDataForm.creater,callback:function(t){e.$set(e.baseDataForm,"creater",t)},expression:"baseDataForm.creater"}},e._l(e.staffSelectItem,function(e){return n("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),e.fixedData&&e.fixedData.createdAt.query?n("el-form-item",[n("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",align:"right"},on:{input:function(t){return e.changeInput(t)}},model:{value:e.baseDataForm.createdAt,callback:function(t){e.$set(e.baseDataForm,"createdAt",t)},expression:"baseDataForm.createdAt"}})],1):e._e(),e._v(" "),e.fixedData&&e.fixedData.updatedAt.query?n("el-form-item",[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"更新开始日期","end-placeholder":"更新结束日期",align:"right"},on:{input:function(t){return e.changeInput(t)}},model:{value:e.baseDataForm.updatedAt,callback:function(t){e.$set(e.baseDataForm,"updatedAt",t)},expression:"baseDataForm.updatedAt"}})],1):e._e()]:e._e(),e._v(" "),e.baseData.length>0||e.process&&e.process.processEnable||e.showSeniorSearch?n("el-form-item",[e.showSeniorSearch?n("el-button",{on:{click:function(t){return e.addSearchItem()}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 查询条件组")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询\n          ")]),e._v(" "),n("el-button",{attrs:{icon:"el-icon-circle-close"},on:{click:e.clear}},[e._v("清空\n          ")])],1):e._e()],2)])],1)},staticRenderFns:[]};var u=n("VU/8")(s,c,!1,function(e){n("VOTY")},"data-v-6a1ad6a0",null);t.a=u.exports},HRKG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-suoding",use:"icon-suoding-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-suoding"><defs><style type="text/css"></style></defs><path d="M757.810429 373.751333 325.645708 373.751333l0-83.895759c0-103.694687 81.507362-184.922686 185.559183-184.922686 78.121242 0 146.053424 46.74565 173.062568 119.090329 3.865028 10.352789 15.384385 15.609513 25.742291 11.746532 10.351766-3.866051 15.609513-15.390525 11.744485-25.742291C688.844707 121.877815 606.198405 64.918545 511.204891 64.918545c-61.918211 0-119.246895 23.662933-161.423483 66.63156-41.3692 42.142819-64.151066 98.363262-64.151066 158.305469l0 83.895759-20.007683 0c-60.774155 0-110.042255 49.267077-110.042255 110.042255l0 366.139981c0 60.774155 49.267077 110.042255 110.042255 110.042255l492.187769 0c60.775178 0 110.042255-49.267077 110.042255-110.042255L867.852684 483.793588C867.852684 423.01841 818.585607 373.751333 757.810429 373.751333zM827.837318 849.933569c0 38.674834-31.352055 70.02689-70.02689 70.02689L265.62266 919.960459c-38.674834 0-70.02689-31.352055-70.02689-70.02689L195.59577 483.793588c0-38.674834 31.352055-70.02689 70.02689-70.02689l492.187769 0c38.674834 0 70.02689 31.352055 70.02689 70.02689L827.837318 849.933569z" p-id="1734" /><path d="M509.715981 583.832002c-11.048637 0-20.007683 8.959046-20.007683 20.007683l0 110.042255c0 11.048637 8.958022 20.007683 20.007683 20.007683s20.007683-8.958022 20.007683-20.007683L529.723663 603.839685C529.723663 592.790024 520.765641 583.832002 509.715981 583.832002z" p-id="1735" /></symbol>'});r.a.add(l);t.default=l},HwRv:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMcAAAA5CAIAAAAN/6j4AAABzklEQVR4Ae3SQWrEMBQD0Kb0/ofLhdKA4cu4XQ1avq40HltTHrqe5/nyR6Aq8PO2Xde1d66dzeExuznfn7x5vzZ35nBO1qs5fz8eX03tfme/dpyv+1Oyvp2P69sPnsy/sTcctXNn+o8L//4zf1+9J/Nwqta1OZ9XKxzNx8f9zvHwKDx+bl0+7kzD8Svz9rj/nn/PG4FAS8CqWpJ6ImBVsZBaAlbVktQTAauKhdQSsKqWpJ4IWFUspJaAVbUk9UTAqmIhtQSsqiWpJwJWFQupJWBVLUk9EbCqWEgtAatqSeqJgFXFQmoJWFVLUk8ErCoWUkvAqlqSeiJgVbGQWgJW1ZLUEwGrioXUErCqlqSeCFhVLKSWgFW1JPVEwKpiIbUErKolqScCVhULqSVgVS1JPRGwqlhILQGraknqiYBVxUJqCVhVS1JPBKwqFlJLwKpaknoiYFWxkFoCVtWS1BMBq4qF1BKwqpaknghYVSykloBVtST1RMCqYiG1BKyqJaknAlYVC6klYFUtST0RsKpYSC0Bq2pJ6omAVcVCaglYVUtSTwSsKhZSS8CqWpJ6ImBVsZBaAlbVktQTAauKhdQSsKqWpJ4IXPd955NEoCHwC4UgR+Z0RU3nAAAAAElFTkSuQmCC"},I4ar:function(e,t){},I9bT:function(e,t,n){"use strict";t.a=function(e){o.defineMode("defineScript",function(){var t=[">=","<=","!=","=",">","<","+","-","*","/","(",")",";",",",":","{","}"];return{token:function(n){if(n.eatSpace())return null;if(n.match("//"))return n.skipToEnd(),"comment";for(var o=0;o<t.length;o++)if(n.match(t[o]))return"mark-keyword";if(n.match("true")||n.match("false"))return"boolean-keyword";if(n.match(/^[0-9\.+-]/,!1)){if(n.match(/^[+-]?0x[0-9a-fA-F]+/))return"number";if(n.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?/))return"number";if(n.match(/^[+-]?\d+([EeDd][+-]?\d+)?/))return"number"}if(n.match(/^"([^"]|(""))*"/))return"string";if(n.match(/^'([^']|(''))*'/))return"string";if(e.codemirrorErrorList)for(var i=e.codemirrorErrorList,a=0;a<i.length;a++)if(n.match(i[a]))return"field-error";for(var r=e.codemirrorFieldList,l=0;l<r.length;l++)if(n.match(r[l]))return"field-keyword";for(var s=e.codemirrorMethodList,c=0;c<s.length;c++)if(n.match(s[c]))return"function-keyword";return n.next(),"nomal-keyword"}}}),o.defineMIME("text/x-defineScript","defineScript")};var o=n("8U58");n.n(o)},IMY8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xf8N"),i=n("xstH"),a=n("8skB"),r=n("TN+i"),l=n("0xDb"),s={components:{selectStaff:i.a,clickInput:o.a,selectForm:a.a,rules:r.a},props:{d:{}},model:{prop:"d",event:"change"},watch:{d:{handler:function(e){this.getData()},deep:!0,immediate:!0}},data:function(){return{baseData:{name:"",info:{}}}},beforeDestroy:function(){this.save()},methods:{save:function(){this.$set(this.d,"info",this.baseData.info),this.$set(this.d,"name",this.baseData.name),this.$emit("close")},getData:function(){this.baseData=Object(l.e)(this.d)}},mounted:function(){}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[n("div",{staticClass:"col"},[n("div",{staticClass:"top-title write-head"},[n("div",{staticClass:"t-title"},[n("clickInput",{model:{value:e.baseData.name,callback:function(t){e.$set(e.baseData,"name",t)},expression:"baseData.name"}})],1)]),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("负责人")]),e._v(" "),n("selectStaff",{model:{value:e.baseData.info.adminId,callback:function(t){e.$set(e.baseData.info,"adminId",t)},expression:"baseData.info.adminId"}})],1)])])},staticRenderFns:[]};var u=n("VU/8")(s,c,!1,function(e){n("u6HO")},"data-v-0927fede",null);t.default=u.exports},Ib3M:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={ADD_OR_UPDATE_COMMON_DATA:"ADD_OR_UPDATE_COMMON_DATA",SELECT_ONE_UPDATE_COMMON_DATA:"SELECT_ONE_UPDATE_COMMON_DATA",SELECT_ONE_COMMON_DATA:"SELECT_ONE_COMMON_DATA",SELECT_MULTI_COMMON_DATA:"SELECT_MULTI_COMMON_DATA",VIEW_COMMON_DATA:"VIEW_COMMON_DATA",VIEW_COMMON_LIST_DATA:"VIEW_COMMON_LIST_DATA",QRCODE_SCAN:"QRCODE_SCAN",OPEN_CONFIRM_DIALOG:"OPEN_CONFIRM_DIALOG",OPEN_MSG_BOX:"OPEN_MSG_BOX",SHOW_TOAST:"SHOW_TOAST",MOBILE_NAVIGATE_TO:"MOBILE_NAVIGATE_TO",OPEN_DASHBOARD:"OPEN_DASHBOARD"}},IcnI:function(e,t,n){"use strict";var o=n("fZjL"),i=n.n(o),a=n("7+uW"),r=n("NYxO"),l=n("kvU2"),s=n.n(l);var c=localStorage.getItem("sidebarLayoutSkin"),u=JSON.parse(localStorage.getItem("sidebarFold")),d={namespaced:!0,state:{theme:localStorage.getItem("theme")||"#409EFF",layoutType:localStorage.getItem("layoutType")||(decodeURIComponent((new RegExp("[?|&]"+"layout"+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null)||"default",documentClientHeight:0,documentClientWidth:0,navbarLayoutType:"default",sidebarLayoutSkin:c||"dark",sidebarFold:u,menuList:[],nowApp:null,updateMenu:!1,menuActiveName:"",contentIsNeedRefresh:!1,mainTabs:[],mainTabsActiveName:"",isEdit:!1,needInstruction:!1,instructionStep:1,commonSysConfig:{},informNum:{meInformNum:0,allInformNum:0},channelType:"douyin"},mutations:{updateTheme:function(e,t){e.theme=t,localStorage.setItem("theme",t)},updateLayoutType:function(e,t){e.layoutType=t,localStorage.setItem("layoutType",t)},commonSysConfig:function(e,t){e.commonSysConfig=t},updateNowApp:function(e,t){e.nowApp=t},updateNeedInstruction:function(e,t){e.needInstruction=t},goInstructionStep:function(e,t){e.instructionStep==t&&(e.instructionStep++,10==t&&(e.needInstruction=!1))},updateDocumentClientHeight:function(e,t){e.documentClientHeight=t},updateDocumentClientWidth:function(e,t){e.documentClientWidth=t},updateNavbarLayoutType:function(e,t){e.navbarLayoutType=t},updateSidebarLayoutSkin:function(e,t){localStorage.setItem("sidebarLayoutSkin",t),e.sidebarLayoutSkin=t},updateSidebarFold:function(e,t){localStorage.setItem("sidebarFold",t),e.sidebarFold=t},updateUpdateMenu:function(e,t){e.updateMenu=t},updateMenuList:function(e,t){e.menuList=t},updateMenuActiveName:function(e,t){e.menuActiveName=t},updateContentIsNeedRefresh:function(e,t){e.contentIsNeedRefresh=t},updateMainTabs:function(e,t){e.mainTabs=t},updateMainTabsActiveName:function(e,t){e.mainTabsActiveName=t},changeEditMode:function(e,t){e.isEdit=t},updateInformNum:function(e,t){e.informNum=t},updateChannelType:function(e,t){e.channelType=t}}},h=n("bREw"),f=n("mvHQ"),p=n.n(f),m={namespaced:!0,state:{isEosLogin:0,isBuYinLogin:0,permInfoText:"",runState:{},isPermAllow:0,oemContacter:"抖音助手",computerId:"",eosProductCount:"",zbblState:0,eosRoomInfo:null,wsOffline:!1,roomId:"",roomStatus:-1,hudongMsg:"",wsPort:0,appType:0,appTitle:"",pushUrl:"",RoomOfflineEvent:0,RoomOnLineEvent:null,liveRoomTitle:"",douyinUserInfo:"",liveMsgEnterlive:null,liveMsgLikelive:null,liveMsgFollowlive:null,liveMsgShareRoom:null,liveMsgChatMessage:null,tongyiqianwenToken:localStorage.getItem("tongyiqianwenToken")||null,aiAudioGenTextModel:null,isLivePlaying:0},mutations:{setEosLoginState:function(e,t){e.isEosLogin=t},setBuYinLoginState:function(e,t){e.isBuYinLogin=t},setPermInfoText:function(e,t){e.permInfoText=t},setRunState:function(e,t){var n=JSON.parse(p()(e.runState));for(var o in t)n[o]=t[o];e.runState=n},setIsPermAllow:function(e,t){e.isPermAllow=t},setOemContacter:function(e,t){e.oemContacter=t},setComputerId:function(e,t){e.computerId=t},setEosProductCount:function(e,t){e.eosProductCount=t},setZbblState:function(e,t){e.zbblState=t},setEosRoomInfo:function(e,t){e.eosRoomInfo=t},setWsOffline:function(e,t){e.wsOffline=t},setHudongMsg:function(e,t){console.log("setHudongMsg:state:"+t),e.hudongMsg=t},setRoomId:function(e,t){e.roomId=t},setWsPort:function(e,t){e.wsPort=t},setAppType:function(e,t){e.appType=t},setAppTitle:function(e,t){e.appTitle=t},setPushUrl:function(e,t){e.pushUrl=t},setRoomOfflineEvent:function(e,t){e.RoomOfflineEvent=1,e.RoomOnLineEvent=0},setRoomOnLineEvent:function(e,t){e.RoomOnLineEvent=1,e.RoomOfflineEvent=0,e.roomId=t},setDouyinUserInfo:function(e,t){e.douyinUserInfo=t},setLiveMsgEnterlive:function(e,t){e.liveMsgEnterlive=t},setLiveMsgLikeLive:function(e,t){e.liveMsgLikelive=t},setLiveMsgFollowLive:function(e,t){e.liveMsgFollowlive=t},setLiveMsgShareRoom:function(e,t){e.liveMsgShareRoom=t},setLiveMsgChatMessage:function(e,t){e.liveMsgChatMessage=t},setRoomTitle:function(e,t){e.liveRoomTitle=t},setTongyiqianwenToken:function(e,t){e.tongyiqianwenToken=t,localStorage.setItem("tongyiqianwenToken",t)},setAiAudioGenTextModel:function(e,t){e.aiAudioGenTextModel=t},setRoomStatus:function(e,t){e.roomStatus=t},setIsLivePlaying:function(e,t){e.isLivePlaying=t}}},v={namespaced:!0,state:{selectedChannel:"douyin"},mutations:{SET_CHANNEL:function(e,t){e.selectedChannel=t}},actions:{setChannel:function(e,t){(0,e.commit)("SET_CHANNEL",t)}}};a.default.use(r.a);t.a=new r.a.Store({modules:{common:d,user:h.a,userInterface:{namespaced:!0,state:{staffList:[]},mutations:{setStaffList:function(e,t){e.staffList=t}}},robotAction:{namespaced:!0,state:{runAiTextToVoice:1,runAutoHuakuaiCheck:1,runAutoProductWindow:1,runAutoReplay:1,runLimitSpeed:1,runRandomAudio:1,runRulerBreakReminder:1,runAutoProductDianshangWindow:1,runAutoReplayDianshang:1,EosOffLine:1,setTimeOnOffStop:1,setTimeOnOffStart:1,haveRuleBreak:1,innerLog:"",switchAiAudio:1,switchAiAudioReplay:1,switchAutoTextChangkong:1,switchAutoPopProduct:1,switchAutoMiaosha:1,switchAutoYouhuiquan:1,switchAutoFudai:1},mutations:{setSwitchAiAudio:function(e,t){e.switchAiAudio++},setSwitchAiAudioReplay:function(e,t){e.switchAiAudioReplay++},setSwitchAutoTextChangkong:function(e,t){e.switchAutoTextChangkong++},setSwitchAutoPopProduct:function(e,t){e.switchAutoPopProduct++},setSwitchAutoMiaosha:function(e,t){e.switchAutoMiaosha++},setSwitchAutoYouhuiquan:function(e,t){e.switchAutoYouhuiquan++},setSwitchAutoFudai:function(e,t){e.switchAutoFudai++},setRunAiTextToVoice:function(e,t){e.runAiTextToVoice++},setRunAutoHuakuaiCheck:function(e,t){e.runAutoHuakuaiCheck++},setRunAutoMiaosha:function(e,t){e.runAutoMiaosha++},setRunAutoProductWindow:function(e,t){e.runAutoProductWindow++},setRunAutoReplay:function(e,t){e.runAutoReplay++},setAutoTextChangkong:function(e,t){e.runAutoTextChangkong++},setRunAutoYouhuiquan:function(e,t){e.runAutoYouhuiquan++},setRunAutoFudai:function(e,t){e.runAutoFudai++},setRunLimitSpeed:function(e,t){e.runLimitSpeed++},setRunRandomAudio:function(e,t){e.runRandomAudio++},setRunRulerBreakReminder:function(e,t){e.runRulerBreakReminder++},setEosOffLine:function(e,t){e.EosOffLine++},setSetTimeOnOffStop:function(e,t){e.setTimeOnOffStop++},setSetTimeOnOffStart:function(e,t){e.setTimeOnOffStart++},setHaveRuleBreak:function(e,t){e.haveRuleBreak++},setRunAutoProductDianshangWindow:function(e,t){e.runAutoProductDianshangWindow++},setRunAutoReplayDianshang:function(e,t){e.runAutoReplayDianshang++},setLogInfo:function(e,t){e.innerLog=t}}},douyin:m,channel:v},mutations:{resetStore:function(e){i()(e).forEach(function(t){e[t]=s()(window.SITE_CONFIG.storeState[t])})}},strict:!1})},IeK1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-zhedie",use:"icon-zhedie-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-zhedie"><defs><style type="text/css"></style></defs><path d="M914.7391013 783.78649017l-807.02687634-0.00282656c-21.54153523 0-39.00084656 17.44942036-39.00084655 38.97400023 0 21.5231659 17.45789872 38.97541285 39.00084655 38.97541284l807.02687634 0c21.54012263 0 39.00084656-17.45224693 39.00084656-38.97541284C953.73994786 801.23308533 936.28063653 783.78649017 914.7391013 783.78649017zM914.7391013 471.61156444l-807.02687634 0c-21.54153523 0-39.00084656 17.45224693-39.00084655 38.97541285 0 21.52457851 17.45789872 38.97258627 39.00084655 38.97258628l807.02687634 0c21.54012263 0 39.00084656-17.44518117 39.00084656-38.97258628C953.73994786 489.06239742 936.28063653 471.61156444 914.7391013 471.61156444zM107.71363893 237.38605044l807.02687634 0c21.54012263 0 39.00084656-17.44800775 39.00084656-38.97258626 0-21.52740509-17.45931133-38.97400026-39.00084656-38.97400025L107.71363893 159.43946393c-21.54153523 0-39.00084656 17.44659517-39.00084654 38.97258627C68.71279101 219.93945529 86.17068973 237.38605044 107.71363893 237.38605044z" p-id="4138" /></symbol>'});r.a.add(l);t.default=l},InBC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("woOf"),r=n.n(a),l={name:"common-field-perm-children-dialog",data:function(){return{visible:!1,fieldPermDialogVisable:!1,id:null,roleId:null,type:null,byTableName:!1,tableName:"",viewChecked:!0,editChecked:!0,saveChecked:!0,deleteChecked:!0,exportExcelChecked:!0,importExcelChecked:!0}},components:{},methods:{init:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments[4];r()(this.$data,this.$options.data()),this.id=e,this.roleId=t,this.type=n,this.byTableName=o,this.tableName=i,this.visible=!0,this.getTableInfo()},isHavePerm:function(e,t){var n=this,o=!1;return null!=e[t]&&e[t].forEach(function(e){e==n.roleId&&(o=!0)}),o},getTableInfo:function(){var e=this;this.$loading.show(),this.$http({url:this.$http.adornUrl("/common/commondefineperm/infoByDefineName/"+this.tableName),method:"post",data:this.$http.adornParams({})}).then(function(t){var n=t.data;if(e.$loading.hide(),n&&0===n.code){var o=JSON.parse(n.data.tableProp);e.isHavePerm(o,"roleCanNotView")&&(e.viewChecked=!1),e.isHavePerm(o,"roleCanNotEdit")&&(e.editChecked=!1),e.isHavePerm(o,"roleCanNotInsert")&&(e.saveChecked=!1),e.isHavePerm(o,"roleCanNotDelete")&&(e.deleteChecked=!1),e.isHavePerm(o,"roleCanNotExportExcel")&&(e.exportExcelChecked=!1),e.isHavePerm(o,"roleCanNotImportExcel")&&(e.importExcelChecked=!1)}})},gotoChildPerm:function(e){var t=this;this.fieldPermDialogVisable=!0,this.$nextTick(function(){t.$refs.fieldPermDialog.init(t.id,t.roleId,e,t.byTableName,t.tableName)})},cancle:function(){this.visible=!1},save:function(){var e=this,t=[];this.viewChecked?t.push({operateType:"roleCanNotView",forbidden:!1}):t.push({operateType:"roleCanNotView",forbidden:!0}),this.editChecked?t.push({operateType:"roleCanNotEdit",forbidden:!1}):t.push({operateType:"roleCanNotEdit",forbidden:!0}),this.saveChecked?t.push({operateType:"roleCanNotInsert",forbidden:!1}):t.push({operateType:"roleCanNotInsert",forbidden:!0}),this.deleteChecked?t.push({operateType:"roleCanNotDelete",forbidden:!1}):t.push({operateType:"roleCanNotDelete",forbidden:!0}),this.exportExcelChecked?t.push({operateType:"roleCanNotExportExcel",forbidden:!1}):t.push({operateType:"roleCanNotExportExcel",forbidden:!0}),this.importExcelChecked?t.push({operateType:"roleCanNotImportExcel",forbidden:!1}):t.push({operateType:"roleCanNotImportExcel",forbidden:!0}),this.$loading.show(),this.$http({url:this.$http.adornUrl("/sys/sysroleapp/updateCommonPerm"),method:"post",data:this.$http.adornData({roleId:this.roleId,tableName:this.tableName,commonPermList:i()(t)})}).then(function(t){var n=t.data;e.$loading.hide(),n&&0===n.code?(e.visible=!1,e.$XModal.message("保存成功！")):e.$XModal.message("保存失败！")})}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"70%",height:"80%",resize:"",title:"设置子表权限"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",[n("div",{staticClass:"checkItem"},[n("el-checkbox",{model:{value:e.viewChecked,callback:function(t){e.viewChecked=t},expression:"viewChecked"}},[e._v("查看")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.gotoChildPerm("view")}}},[e._v("字段权限")])],1),e._v(" "),n("div",{staticClass:"checkItem"},[n("el-checkbox",{model:{value:e.editChecked,callback:function(t){e.editChecked=t},expression:"editChecked"}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.gotoChildPerm("edit")}}},[e._v("字段权限")])],1),e._v(" "),n("div",{staticClass:"checkItem"},[n("el-checkbox",{model:{value:e.saveChecked,callback:function(t){e.saveChecked=t},expression:"saveChecked"}},[e._v("新增")])],1),e._v(" "),n("div",{staticClass:"checkItem"},[n("el-checkbox",{model:{value:e.deleteChecked,callback:function(t){e.deleteChecked=t},expression:"deleteChecked"}},[e._v("删除")])],1),e._v(" "),n("div",{staticClass:"checkItem"},[n("el-checkbox",{model:{value:e.exportExcelChecked,callback:function(t){e.exportExcelChecked=t},expression:"exportExcelChecked"}},[e._v("导出Excel")])],1),e._v(" "),n("div",{staticClass:"checkItem"},[n("el-checkbox",{model:{value:e.importExcelChecked,callback:function(t){e.importExcelChecked=t},expression:"importExcelChecked"}},[e._v("导入Excel")])],1)]),e._v(" "),n("el-button",{on:{click:e.cancle}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),e.fieldPermDialogVisable?n("common-field-perm-dialog",{ref:"fieldPermDialog"}):e._e()],1)},staticRenderFns:[]};var c=n("VU/8")(l,s,!1,function(e){n("KIdX")},"data-v-4db3b792",null);t.default=c.exports},IxYI:function(e,t){},J7ii:function(e,t){},JC7v:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("0xDb"),i={symbol:"",destField:"",variable:"",field:"",value:""},a={components:{customFromItem:n("9uud").a},props:{modelData:{},value:{},tableName:{},formMap:{},variableMap:{}},model:{prop:"value",event:"change"},watch:{tableName:{handler:function(e){this.changeForm()},deep:!0,immediate:!0},variableMap:{handler:function(e){for(var t in this.type=[],e)this.type.push({value:e[t].variableName,label:e[t].itemName});this.type.push({value:"",label:"自定义"}),this.type.push({value:"currentTime",label:"当前时间"}),this.type.push({value:"currentDay",label:"当天"})},deep:!0,immediate:!0}},data:function(){return{orList:[],symbolEnum:Object(o.m)("symbolEnum"),valueType:Object(o.m)("addRobotRulesEnum"),noshowlist:Object(o.p)(),targetMap:{},targetList:[],first:!0}},methods:{getShowVariable:function(e,t,n){if("currentTime"!=t.value&&"currentDay"!=t.value||!this.targetMap[n])return""==e.variableName||e.variableName!=t.value;var o=this.targetMap[n].type;return"dateTime"==o||"dateYear"==o||"dateMonth"==o||void 0},matchTypeChange:function(e){e.field="",e.value="",console.log(e,88876)},checkShow:function(e,t){return!!this.targetMap[t]&&Object(o.o)(e.type)==Object(o.o)(this.targetMap[t].type)},getMatchingList:function(e){if(console.log(this.variableMap[e]),"v_type_common_data"==this.variableMap[e].varType){var t=this.formMap[this.variableMap[e].tableName].templateJson;return t[0]&&"id"!=t[0].key?[{name:"ID",key:"id",type:"id"},{name:"父ID",key:"extId",type:"extId"}].concat(this.formMap[this.variableMap[e].tableName].templateJson):t}return[]},getShowSymbol:function(e,t,n,i){if(!e||!this.targetMap||!this.targetMap[e])return!1;var a=Object(o.q)(this.targetMap[e].type,t);return-1==a.showList.indexOf(this.orList[n][i].symbol)&&(this.orList[n][i].symbol=""),a.re},deleteItem:function(e,t){this.orList[e].splice(t,1),0==this.orList[e].length&&this.orList.splice(e,1)},addItem:function(e,t){e?this.orList[t].push(Object(o.e)(i)):this.orList.push([Object(o.e)(i)])},getData:function(){this.orList=Object(o.e)(this.value&&this.value.length?this.value:[[Object(o.e)(i)]]),console.log(this.orList,9999999998)},saveData:function(){for(var e in this.orList){var t=this.orList[e].filter(function(e,t,n){return e.destField&&e.symbol});t.forEach(function(e){null!=e.value&&null!=e.value.deptList&&null!=e.value.dynamicList&&null!=e.value.extList&&null!=e.value.roleList&&null!=e.value.userList&&(e.valueType=3)}),this.orList[e]=t}this.orList=this.orList.filter(function(e,t,n){return e.length}),this.$emit("change",this.orList)},changeForm:function(){var e=this;if(!this.tableName)return!1;this.formMap[this.tableName]?(this.targetList=Object(o.e)(this.formMap[this.tableName].templateJson),this.targetList[0]&&"id"!=this.targetList[0].key&&(this.targetList.unshift({name:"父ID",key:"extId",type:"extId"}),this.targetList.unshift({name:"ID",key:"id",type:"id"})),this.targetList.forEach(function(t){e.targetMap[t.key]=t})):this.targetList=[]},fresh:function(){this.orList=[],this.addItem(!1)}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v("\n        "+e._s(e.variableMap)+"\n    ")]),e._v(" "),e._l(e.orList,function(t,o){return n("div",{key:o},[0!=o?n("div",{staticStyle:{padding:"14px 20px","font-weight":"bold"}},[e._v("\n            或\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"or-box"},[e._l(t,function(t,i){return n("div",{key:"or"+i,staticStyle:{"padding-bottom":"5px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[n("el-select",{attrs:{placeholder:"目标字段"},model:{value:t.destField,callback:function(n){e.$set(t,"destField",n)},expression:"item.destField"}},e._l(e.targetList,function(t){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[n("el-select",{attrs:{placeholder:"判断符"},model:{value:t.symbol,callback:function(n){e.$set(t,"symbol",n)},expression:"item.symbol"}},e._l(e.symbolEnum,function(a){return e.getShowSymbol(t.destField,a.value,o,i)?n("el-option",{key:a.value,attrs:{label:a.label,value:a.value}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"5px"},attrs:{span:6}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},on:{change:function(n){return e.matchTypeChange(t)}},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(o){return e.getShowVariable(e.modelData,o,t.destField)?n("el-option",{key:o.value,attrs:{label:o.label,value:o.value}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:6}},[t.variable&&"currentTime"!=t.variable&&"currentDay"!=t.variable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getMatchingList(t.variable),function(o){return e.checkShow(o,t.destField)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()}),1):n("customFromItem",{attrs:{variable:t.variable,exts:e.targetMap[t.destField]?e.targetMap[t.destField]:null,noClear:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(o,i)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)}),e._v(" "),n("el-button",{on:{click:function(t){return e.addItem(!0,o)}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 且条件")])],2)])}),e._v(" "),n("div",{staticStyle:{padding:"10px 10px"}},[n("el-button",{on:{click:function(t){return e.addItem(!1)}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 或条件")])],1)],2)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("UoV7")},"data-v-954d90c0",null);t.default=l.exports},JD0x:function(e,t){},JRhF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW");o.default.config.ignoredElements.push("xml"),o.default.config.ignoredElements.push("block"),o.default.config.ignoredElements.push("field"),o.default.config.ignoredElements.push("category"),o.default.config.ignoredElements.push("sep"),o.default.config.ignoredElements.push("value"),o.default.config.ignoredElements.push("statement"),o.default.config.ignoredElements.push("mutation");var i={props:{hasRobotType:{type:Array,default:function(){return[]}}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("xml",{staticStyle:{display:"none"},attrs:{id:"toolbox"}},[-1!=e.hasRobotType.indexOf("flowEvent")?n("category",{attrs:{name:"事件",colour:"20"}},[n("block",{attrs:{type:"flow_data_event"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1)],1):-1!=e.hasRobotType.indexOf("getValueEvent")?n("category",{attrs:{name:"事件",colour:"20"}},[n("block",{attrs:{type:"action_event"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1)],1):-1!=e.hasRobotType.indexOf("btnEvent")?n("category",{attrs:{name:"事件",colour:"20"}},[n("block",{attrs:{type:"btn_data_event"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1)],1):-1!=e.hasRobotType.indexOf("btnTableEvent")?n("category",{attrs:{name:"事件",colour:"20"}},[n("block",{attrs:{type:"btn_table_event"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"variables_get"}})],1)],1)],1):-1!=e.hasRobotType.indexOf("conditionEvent")?n("category",{attrs:{name:"事件",colour:"20"}},[n("block",{attrs:{type:"condition_event"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1)],1):-1!=e.hasRobotType.indexOf("normalEvent")?n("category",{attrs:{name:"事件",colour:"20"}},[n("block",{attrs:{type:"table_data_event"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"table_data_before_do_event"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"time_arrive_event"}}),e._v(" "),n("block",{attrs:{type:"qrcode_event"}}),e._v(" "),n("block",{attrs:{type:"functioncall_event"}})],1):n("category",{attrs:{name:"事件",colour:"20"}}),e._v(" "),n("category",{attrs:{name:"动作",colour:"150"}},[n("block",{attrs:{type:"tableAddData"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"subTableAddData"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"tableUpdateData"}}),e._v(" "),n("block",{attrs:{type:"tableUpdateDataForm"}}),e._v(" "),n("block",{attrs:{type:"tableDeleteData"}}),e._v(" "),n("block",{attrs:{type:"genBatchAddTableList"}},[n("value",{attrs:{name:"tableListVariable"}},[n("block",{attrs:{type:"batchDataListVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"tableBatchAddData"}}),e._v(" "),n("block",{attrs:{type:"tableBatchUpdateData"}}),e._v(" "),n("block",{attrs:{type:"getTableDataList"}},[n("value",{attrs:{name:"tableListVariable"}},[n("block",{attrs:{type:"tableListDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"getTableDataListCount"}}),e._v(" "),n("block",{attrs:{type:"getTableDataItem"}},[n("value",{attrs:{name:"tableDataVariable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"setTimeFunctionCall"}}),e._v(" "),n("block",{attrs:{type:"sendMessageEvent"}}),e._v(" "),n("block",{attrs:{type:"sendNotifyEvent"}}),e._v(" "),n("block",{attrs:{type:"sendMailEvent"}}),e._v(" "),n("block",{attrs:{type:"httpEvent"}}),e._v(" "),n("block",{attrs:{type:"returnVarData"}}),e._v(" "),n("block",{attrs:{type:"returnMsgSuccess"}}),e._v(" "),n("block",{attrs:{type:"returnMsgFail"}}),e._v(" "),n("block",{attrs:{type:"outLog"}})],1),e._v(" "),n("category",{attrs:{name:"弹框",colour:"40"}},[n("block",{attrs:{type:"formAddData"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"formEditData"}}),e._v(" "),n("block",{attrs:{type:"formDetailData"}}),e._v(" "),n("block",{attrs:{type:"selectTableDataList"}},[n("value",{attrs:{name:"variable"}},[n("block",{attrs:{type:"tableListDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"openQrcodeScan"}},[n("value",{attrs:{name:"qrCodeString"}},[n("block",{attrs:{type:"objectVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"openConfirmDialog"}}),e._v(" "),n("block",{attrs:{type:"openMsgBox"}}),e._v(" "),n("block",{attrs:{type:"openToast"}}),e._v(" "),n("block",{attrs:{type:"openDashBoard"}}),e._v(" "),n("block",{attrs:{type:"mobileNavigateTo"}})],1),e._v(" "),n("category",{attrs:{name:"逻辑",colour:"%{BKY_LOGIC_HUE}"}},[n("block",{attrs:{type:"controls_if"}}),e._v(" "),n("block",{attrs:{type:"controls_ifelse"}}),e._v(" "),n("block",{attrs:{type:"tableDataCondition"}}),e._v(" "),n("block",{attrs:{type:"logic_compare"}}),e._v(" "),n("block",{attrs:{type:"logic_operation"}}),e._v(" "),n("block",{attrs:{type:"logic_negate"}}),e._v(" "),n("block",{attrs:{type:"logic_boolean"}}),e._v(" "),n("block",{attrs:{type:"logic_null"}}),e._v(" "),n("block",{attrs:{type:"logic_ternary"}})],1),e._v(" "),n("category",{attrs:{name:"循环",colour:"%{BKY_LOGIC_HUE}"}},[n("block",{attrs:{type:"forEachTableDataList"}},[n("value",{attrs:{name:"tableData"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"forEachTableDataChildrenTableList"}},[n("value",{attrs:{name:"tableData"}},[n("block",{attrs:{type:"tableDataVar"}})],1)],1),e._v(" "),n("block",{attrs:{type:"controls_repeat_ext"}}),e._v(" "),n("block",{attrs:{type:"controls_repeat"}}),e._v(" "),n("block",{attrs:{type:"controls_whileUntil"}}),e._v(" "),n("block",{attrs:{type:"controls_for"}}),e._v(" "),n("block",{attrs:{type:"controls_forEach"}}),e._v(" "),n("block",{attrs:{type:"controls_flow_statements"}})],1),e._v(" "),n("category",{attrs:{name:"计算",colour:"%{BKY_MATH_HUE}"}},[n("block",{attrs:{type:"formuleData"}}),e._v(" "),n("block",{attrs:{type:"jsCodeBlock"}}),e._v(" "),n("block",{attrs:{type:"functionCall"}}),e._v(" "),n("block",{attrs:{type:"execSql"}}),e._v(" "),n("block",{attrs:{type:"getUserList"}}),e._v(" "),n("block",{attrs:{type:"tableListCount"}}),e._v(" "),n("block",{attrs:{type:"timeDiff"}}),e._v(" "),n("block",{attrs:{type:"math_number"}},[n("field",{attrs:{name:"NUM"}},[e._v("0")])],1),e._v(" "),n("block",{attrs:{type:"math_arithmetic"}}),e._v(" "),n("block",{attrs:{type:"math_single"}}),e._v(" "),n("block",{attrs:{type:"math_trig"}}),e._v(" "),n("block",{attrs:{type:"math_constant"}}),e._v(" "),n("block",{attrs:{type:"math_number_property"}}),e._v(" "),n("block",{attrs:{type:"math_round"}}),e._v(" "),n("block",{attrs:{type:"math_on_list"}}),e._v(" "),n("block",{attrs:{type:"math_modulo"}}),e._v(" "),n("block",{attrs:{type:"math_constrain"}}),e._v(" "),n("block",{attrs:{type:"math_random_int"}}),e._v(" "),n("block",{attrs:{type:"math_random_float"}}),e._v(" "),n("block",{attrs:{type:"math_atan2"}})],1),e._v(" "),n("category",{attrs:{name:"文本",colour:"%{BKY_MATH_HUE}"}},[n("block",{attrs:{type:"text"}}),e._v(" "),n("block",{attrs:{type:"text_multiline"}}),e._v(" "),n("block",{attrs:{type:"timestampToTime"}}),e._v(" "),n("block",{attrs:{type:"timeTextToTimestamp"}}),e._v(" "),n("block",{attrs:{type:"formatTimeText"}}),e._v(" "),n("block",{attrs:{type:"text_join"}}),e._v(" "),n("block",{attrs:{type:"text_join"}}),e._v(" "),n("block",{attrs:{type:"text_create_join_container"}}),e._v(" "),n("block",{attrs:{type:"text_create_join_item"}}),e._v(" "),n("block",{attrs:{type:"text_append"}}),e._v(" "),n("block",{attrs:{type:"text_length"}}),e._v(" "),n("block",{attrs:{type:"text_isEmpty"}}),e._v(" "),n("block",{attrs:{type:"text_indexOf"}}),e._v(" "),n("block",{attrs:{type:"text_charAt"}})],1),e._v(" "),n("category",{attrs:{name:"变量",colour:"330",custom:"VARIABLE"}}),e._v(" "),n("category",{attrs:{name:"表单",colour:"330"}},[n("block",{attrs:{type:"tableDataVar"}}),e._v(" "),n("block",{attrs:{type:"tableUpdateDataForm"}})],1),e._v(" "),n("category",{attrs:{name:"表单字段",colour:"330"}},[n("block",{attrs:{type:"tableDataFieldVar"}},[n("mutation",{attrs:{storeinfo:""}})],1)],1),e._v(" "),n("category",{attrs:{name:"表单列表字段",colour:"330"}},[n("block",{attrs:{type:"tableListDataVar"}})],1)],1)],1)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("9Qg/")},null,null);t.default=r.exports},JTg7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{id:null,tableName:null,key:null,selectedId:null,relateTableContent:null,visible:!1,title:"",fieldCanEdit:!0}},components:{},methods:{init:function(e,t,n,o,i,a,r){var l=this;console.log(e,t,n,o,i,a,r,77765),this.id=e,this.tableName=t,this.key=n,this.selectedId=o,this.relateTableContent=i,this.title=a,this.fieldCanEdit=r,this.visible=!0,this.$nextTick(function(){l.$refs.CommonAddOrUpdateView.init(e,!1,t,null)})},cancle:function(){this.$refs.CommonAddOrUpdateView.cancle()},save:function(){this.$refs.CommonAddOrUpdateView.save()},close:function(){this.visible=!1},savedData:function(e){this.$emit("updatePropItemData",this.id,this.key,e),this.visible=!1},updatedData:function(e){this.$emit("updatePropItemData",this.id,this.key,e),this.visible=!1}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"90%",height:"90%",title:e.title,resize:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("span",[e._v(e._s(e.title))]),e._v(" "),n("div",{staticClass:"col"}),e._v(" "),e.fieldCanEdit?n("div",[n("el-button",{staticStyle:{"margin-right":"20px",float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px",float:"right"},on:{click:function(t){return e.cancle()}}},[e._v("取消")])],1):n("span",[e._v("无权限进行编辑")])])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(" "),n("common-add-or-update-view",{ref:"CommonAddOrUpdateView",on:{savedData:e.savedData,updatedData:e.updatedData,close:e.close}})],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("KrAp")},"data-v-7bfce1a4",null);t.default=a.exports},JbnW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("59rQ"),i={data:function(){return{codeTypeArray:Object(o.a)(),itemTypeArray:Object(o.c)()}},computed:{activeElement:function(){return this.$vptd.state.activeElement},height:function(){return this.$vptd.state.page.height}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{staticClass:"kr-form",attrs:{"label-width":"80px",model:e.activeElement,size:"mini"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"宽度"}},[n("el-input-number",{staticClass:"min-input",attrs:{"controls-position":"right",min:1},model:{value:e.activeElement.width,callback:function(t){e.$set(e.activeElement,"width",t)},expression:"activeElement.width"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"高度"}},[n("el-input-number",{staticClass:"min-input",attrs:{"controls-position":"right",min:1},model:{value:e.activeElement.height,callback:function(t){e.$set(e.activeElement,"height",t)},expression:"activeElement.height"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"横坐标"}},[n("el-input-number",{staticClass:"min-input",attrs:{"controls-position":"right",min:0},model:{value:e.activeElement.left,callback:function(t){e.$set(e.activeElement,"left",t)},expression:"activeElement.left"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"纵坐标"}},[n("el-input-number",{staticClass:"min-input",attrs:{"controls-position":"right",min:0},model:{value:e.activeElement.top,callback:function(t){e.$set(e.activeElement,"top",t)},expression:"activeElement.top"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"字号"}},[n("el-input-number",{staticClass:"min-input",attrs:{disabled:void 0===e.activeElement.style.FontSize,"controls-position":"right",min:0},model:{value:e.activeElement.style.FontSize,callback:function(t){e.$set(e.activeElement.style,"FontSize",t)},expression:"activeElement.style.FontSize"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"加粗"}},[n("el-switch",{attrs:{disabled:void 0===e.activeElement.style.Bold,"active-value":!0,"inactive-value":!1},model:{value:e.activeElement.style.Bold,callback:function(t){e.$set(e.activeElement.style,"Bold",t)},expression:"activeElement.style.Bold"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"字体颜色"}},[n("el-color-picker",{attrs:{disabled:void 0===e.activeElement.style.FontColor},model:{value:e.activeElement.style.FontColor,callback:function(t){e.$set(e.activeElement.style,"FontColor",t)},expression:"activeElement.style.FontColor"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"边框颜色"}},[n("el-color-picker",{attrs:{disabled:void 0===e.activeElement.style.BorderColor},model:{value:e.activeElement.style.BorderColor,callback:function(t){e.$set(e.activeElement.style,"BorderColor",t)},expression:"activeElement.style.BorderColor"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"条码值"}},[n("el-switch",{attrs:{disabled:void 0===e.activeElement.style.ShowBarText,"active-value":!0,"inactive-value":!1},model:{value:e.activeElement.style.ShowBarText,callback:function(t){e.$set(e.activeElement.style,"ShowBarText",t)},expression:"activeElement.style.ShowBarText"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-form-item",{attrs:{label:"对齐方式"}},[n("el-radio-group",{attrs:{disabled:void 0===e.activeElement.style.Alignment},model:{value:e.activeElement.style.Alignment,callback:function(t){e.$set(e.activeElement.style,"Alignment",t)},expression:"activeElement.style.Alignment"}},[n("el-radio",{attrs:{label:"left"}},[e._v("左对齐")]),e._v(" "),n("el-radio",{attrs:{label:"center"}},[e._v("居中")]),e._v(" "),n("el-radio",{attrs:{label:"right"}},[e._v("右对齐")])],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"条码类型"}},[n("el-select",{staticClass:"min-input",attrs:{disabled:void 0===e.activeElement.style.codeType},model:{value:e.activeElement.style.codeType,callback:function(t){e.$set(e.activeElement.style,"codeType",t)},expression:"activeElement.style.codeType"}},e._l(e.codeTypeArray,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"打印类型"}},[n("el-select",{staticClass:"min-input",attrs:{disabled:void 0===e.activeElement.style.ItemType},model:{value:e.activeElement.style.ItemType,callback:function(t){e.$set(e.activeElement.style,"ItemType",t)},expression:"activeElement.style.ItemType"}},e._l(e.itemTypeArray,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"高度自动"}},[n("el-switch",{attrs:{disabled:void 0===e.activeElement.style.AutoHeight,"active-value":!0,"inactive-value":!1},model:{value:e.activeElement.style.AutoHeight,callback:function(t){e.$set(e.activeElement.style,"AutoHeight",t)},expression:"activeElement.style.AutoHeight"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"下边距"}},[n("el-input-number",{staticClass:"min-input",attrs:{disabled:void 0===e.activeElement.style.BottomMargin||!e.activeElement.style.AutoHeight,"controls-position":"right",min:0},model:{value:e.activeElement.style.BottomMargin,callback:function(t){e.$set(e.activeElement.style,"BottomMargin",t)},expression:"activeElement.style.BottomMargin"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("mozX")},"data-v-4f273f56",null);t.default=r.exports},Jc5F:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_3__customButtomDo_js__=__webpack_require__("ksld"),__WEBPACK_IMPORTED_MODULE_4__views_modules_dataProcess_openRobotDialog_openRobotDialog__=__webpack_require__("e4/+");__webpack_exports__.a={props:{btns:{default:[]},tableName:"",extInfo:{},tableDataId:"",tableData:"",btnStyle:{default:"detail"},parentPoint:{}},data:function(){return{btnShowMap:{}}},methods:{customBtnTable:function(e){var t=this;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function n(){var o;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e,989898),"operate"!=e.position){n.next=3;break}return n.abrupt("return",t.customBtn(e));case 3:if(0!=t.parentPoint.selectedRows.length){n.next=6;break}return t.$XModal.alert("没有选中任何项"),n.abrupt("return");case 6:if("confirm"!=e.clickAction){n.next=12;break}return o=!1,n.next=10,t.$confirm(e.tipsText,"提示",{confirmButtonText:e.confirmText,cancelButtonText:e.cancelText,type:"warning"}).then(function(){o=!0}).catch(function(){});case 10:if(o){n.next=12;break}return n.abrupt("return");case 12:t.$loading.show(),t.$http({url:t.$http.adornUrl("/robot/commonrobot/robotDo"),method:"post",data:t.$http.adornData({customBtnKey:e.id,tableName:t.tableName,initParams:{selectRowIds:t.parentPoint.selectedRows},robotId:e.robotId,extInfo:__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(t.extInfo)})}).then(function(n){var o=n.data;t.$loading.hide(),o&&0===o.code?o.data.isOpenRobotDialog?Object(__WEBPACK_IMPORTED_MODULE_4__views_modules_dataProcess_openRobotDialog_openRobotDialog__.a)(t,o.data,null,t.robotDoFinish):t.robotDoFinish(o,e):t.$message.error(o.msg)});case 14:case"end":return n.stop()}},n,t)}))()},customBtn:function(e){var t=this;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function n(){var o;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("confirm"!=e.clickAction){n.next=6;break}return o=!1,n.next=4,t.$confirm(e.tipsText,"提示",{confirmButtonText:e.confirmText,cancelButtonText:e.cancelText,type:"warning"}).then(function(){o=!0}).catch(function(){});case 4:if(o){n.next=6;break}return n.abrupt("return");case 6:t.$loading.show(),t.$http({url:t.$http.adornUrl("/robot/commonrobot/robotDo"),method:"post",data:t.$http.adornData({customBtnKey:e.id,tableName:t.tableName,tableDataId:t.tableDataId,robotId:e.robotId,extInfo:__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(t.extInfo)})}).then(function(n){var o=n.data;t.$loading.hide(),o&&0===o.code?o.data.isOpenRobotDialog?Object(__WEBPACK_IMPORTED_MODULE_4__views_modules_dataProcess_openRobotDialog_openRobotDialog__.a)(t,o.data,null,t.robotDoFinish):t.robotDoFinish(o,e):t.$message.error(o.msg)});case 8:case"end":return n.stop()}},n,t)}))()},robotDoFinish:function robotDoFinish(data,btn){console.log(data,8888881234),data.jsScript&&eval(data.jsScript),this.$emit("success",btn,this.tableData),this.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}})},getEnableInfo:function(){var e=this,t=function(t){var n=e.btns[t];"condition"==n.openCondition&&n.conditionRuleRobotId&&e.$http({url:e.$http.adornUrl("/robot/commonrobot/robotDo"),method:"post",data:e.$http.adornData({customBtnKey:n.id,tableName:e.tableName,tableDataId:e.tableDataId,robotId:n.conditionRuleRobotId})}).then(function(t){var o=t.data;e.$set(e.btnShowMap,n.id,1==o.data)})};for(var n in this.btns)t(n)}},activated:function(){},mounted:function(){}}},JlXI:function(e,t){},K1Fd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={model:{prop:"value",event:"change"},props:{value:{}},watch:{value:function(e){this.list=e},list:{handler:function(e,t){this.$emit("change",this.list)},deep:!0}},components:{Tinymce:n("5aCZ").a},mounted:function(){},data:function(){return{list:this.value,selectValue:"",customBtn:["relateTable","relateVirtualTable","propTable"],tableList:[],inputList:["string","integer","float","autoSerialNum","systemCalc","formule","customDialog","link"],selectList:["multipleSelect","select","location","selectId","selectInterface","selectinterfaceTree","selectStaff"],dateList:["dateTime","date","dateYear","dateMonth"],fileList:["file","picture","video"],extKey:"",titleKey:null}},methods:{handleCopy:function(e,t){this.$emit("copy",e,t)},handleDelete:function(e,t){this.$emit("delect",e,t)},clear:function(){this.extKey=""},handleAdd:function(e){this.$emit("addItem",e)},setCurrentWidget:function(e){this.$emit("select",e),this.extKey=e.key},haveSetTitle:function(e){return this.titleKey&&this.titleKey.indexOf(e.key)>-1},init:function(e){this.titleKey=e},setTitle:function(e){null==this.titleKey||""==this.titleKey?this.titleKey=e.key:this.titleKey=this.titleKey+"|"+e.key,this.$emit("setTitleKey",this.titleKey)},unSetTitle:function(e){this.titleKey=this.titleKey.replace("|"+e.key,""),this.titleKey=this.titleKey.replace(e.key+"|",""),this.titleKey=this.titleKey.replace(e.key,""),this.$emit("setTitleKey",this.titleKey)},canSetTitle:function(e){return!["multipleRelateTable","childrenTable","relateVirtualTable","propTable","divider"].includes(e.type)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("draggable",{staticClass:"el-row draggable-box",attrs:{group:"people",sort:!0},on:{add:e.handleAdd},model:{value:e.list,callback:function(t){e.list=t},expression:"list"}},[0===e.list.length?n("div",{staticClass:"form-area-placeholder"},[e._v("\n            从左侧拖拽来添加表单项\n        ")]):e._l(e.list,function(t,o){return n("el-col",{key:t.key,staticClass:"form-item",class:{"form-item-active":t.key==e.extKey},attrs:{span:t.spanWidth?parseInt(t.spanWidth):24},nativeOn:{mousedown:function(n){return e.setCurrentWidget(t)}}},[n("div",{staticClass:"btns"},[e.canSetTitle(t)&&!e.haveSetTitle(t)?n("i",{staticClass:"el-icon-s-flag col",attrs:{title:"设为标题"},on:{click:function(n){return n.stopPropagation(),e.setTitle(t)}}}):e._e(),e._v(" "),e.haveSetTitle(t)?n("i",{staticClass:"el-icon-s-flag col",staticStyle:{color:"#409eff"},attrs:{title:"取消设为标题"},on:{click:function(n){return n.stopPropagation(),e.unSetTitle(t)}}}):e._e(),e._v(" "),n("i",{staticClass:"el-icon-document col",attrs:{title:"复制"},on:{click:function(n){return n.stopPropagation(),e.handleCopy(t,o)}}}),e._v(" "),n("i",{staticClass:"el-icon-delete col",attrs:{title:"删除"},on:{click:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"parent",void 0,n.key,void 0)?null:(n.stopPropagation(),e.handleDelete(t,o))}}})]),e._v(" "),n("div",{staticStyle:{width:"100%"}},["divider"!=t.type?n("div",{staticClass:"row position-relative"},[t.mustRequired?n("span",{staticStyle:{color:"#F56C6C","margin-right":"4px"}},[e._v("*")]):e._e(),e._v(" "),n("div",{staticStyle:{"font-weight":"600",color:"black",float:"none","line-height":"32px","font-size":"14px","padding-right":"10px"}},[e._v("\n                        "+e._s(t.name)+"\n                    ")]),e._v(" "),n("div",{staticClass:"col"},[e.haveSetTitle(t)?n("i",{staticClass:"el-icon-s-flag col",staticStyle:{"font-size":"16px","line-height":"30px",color:"#409eff","margin-right":"5px"}}):e._e(),e._v(" "),t.hidden?n("i",{staticClass:"icon-eyeslash-fill iconfont",staticStyle:{"font-size":"16px","line-height":"30px"}}):e._e()])]):e._e(),e._v(" "),e.inputList.includes(t.type)?n("div",[n("el-input",{attrs:{placeholder:"请输入"+t.name,size:"medium",rows:t.textRow,type:t.textRow>1?"textarea":""}})],1):e._e(),e._v(" "),"describe"==t.type?n("div",[n("div",{domProps:{innerHTML:e._s(t.describe)}})]):e._e(),e._v(" "),e.selectList.includes(t.type)?n("div",[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"+t.name,size:"medium"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}})],1):e._e(),e._v(" "),e.dateList.includes(t.type)?n("div",[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"medium"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}})],1):e._e(),e._v(" "),e.fileList.includes(t.type)?n("div",[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1):e._e(),e._v(" "),"richText"==t.type?n("div",[n("tinymce",{ref:"tinyDetailView",refInFor:!0,attrs:{height:350,width:600}})],1):e._e(),e._v(" "),"childrenTable"==t.type?n("div",[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("子表格")])],1):e._e(),e._v(" "),"baseData"==t.type?n("div",[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("基础数据")])],1):e._e(),e._v(" "),"relateTable"==t.type?n("div",[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("关联表单")])],1):e._e(),e._v(" "),"multipleRelateTable"==t.type?n("div",[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("多选关联表单")])],1):e._e(),e._v(" "),"relateVirtualTable"==t.type?n("div",[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("关联虚拟表单")])],1):e._e(),e._v(" "),"propTable"==t.type?n("div",[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("展示项")])],1):e._e()]),e._v(" "),"divider"==t.type?n("div",{staticStyle:{width:"100%",height:"30px",background:"#efefef",display:"flex","align-items":"center","margin-top":"10px","margin-bottom":"10px"}},[n("span",{staticStyle:{"font-size":"15px",color:"#46a0fc","font-weight":"bold","margin-left":"20px"}},[e._v(e._s(t.name))])]):e._e(),e._v(" "),e.tableList.includes(t.type)?n("div",{staticStyle:{width:"100%"}},[n("div",{staticClass:"el-form-item__label",staticStyle:{float:"none","text-align":"left"}},[e._v("\n                    "+e._s(t.name)+"\n                ")]),e._v(" "),n("common-view")],1):e._e()])})],2)],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("+u3E")},"data-v-9402b4a6",null);t.default=a.exports},KHQK:function(e,t){},KIdX:function(e,t){},KPhi:function(e,t,n){"use strict";t.a=function(){return["string","integer","float","autoSerialNum","select","dateTime","formule","systemCalc","link","selectStaff"]}},KmbY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("exGp"),s=n.n(l),c=n("woOf"),u=n.n(c),d=n("0xDb"),h=n("ULGN"),f=n("gf9G"),p=n("NKzj"),m=n("XUmz"),v=n("BUm/"),b=n("VGMx"),y={components:{titleEdit:h.a,sqlBaseComponent:f.default,tableBaseComponent:p.default,seniorComponent:m.default,flowComponent:v.default,phoneCompnent:b.default},provide:function(){return{dataForm:this.dataForm,exts:this.exts,allFormInfo:null}},data:function(){return{winShow:!1,dataForm:{id:"",name:"",type:""},exts:[],themeColor:localStorage.getItem("theme"),activeTab:0,btnLoading:!1,tabMap:{},headTabs:[{value:"sql设计",id:0},{value:"表单设计",id:1},{value:"移动端设计",id:4},{value:"高级选项",id:2}]}},methods:{init:function(e,t,n){this.dataForm.id=e||"",this.dataForm.tableName=t||"",this.dataForm.name=n||"",this.winShow=!0,this.getBaseData()},getBaseData:function(){var e=this;this.dataForm.id?(this.$loading.show(),this.$http({url:this.$http.adornUrl("common/commondefine/infoByTableWithoutPerm/"+this.dataForm.tableName),method:"get",params:this.$http.adornParams()}).then(function(t){var n=t.data;if(e.$loading.hide(),n&&0===n.code){var o=n.assetExt,i=JSON.parse(n.assetExt.mobileConfig);e.$refs.sqlBaseComponent.init(o),e.$refs.tableBaseComponent.init(o.templateJson,o.tablePropJson,o.uniqueCode),e.$refs.phoneCompnent.init(i),e.$refs.seniorComponent.init(o),u()(e.dataForm,o)}})):this.$nextTick(function(){e.newForm()})},newForm:function(){var e=this;return s()(i.a.mark(function t(){var n,o,a,l,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$refs.flowComponent.getSaveData(),t.next=3,e.$refs.seniorComponent.getSaveData();case 3:return o=t.sent,a=e.$refs.phoneCompnent.getSaveData(),o.tableProp.sqlTable=!0,e.loading=!0,l=e.$http.adornData({id:e.dataForm.id||void 0,name:e.dataForm.name,dbTableName:null!=e.dataForm.tableName&&""!=e.dataForm.tableName?e.dataForm.tableName:Object(d.x)(6),customView:r()(o.customView),tableProp:r()(o.tableProp),template:[],fixedData:o.fixedData,appId:JSON.parse(localStorage.getItem("app")).appId,process:null!=n?n.process:null,processDescribe:null!=n?n.processDescribe:null,processEnable:null!=n?n.processEnable:null,mobileConfig:r()(a)}),s=null,t.next=11,e.$http({url:e.$http.adornUrl("/common/commondefine/save"),method:"post",data:l}).then(function(t){var n=t.data;s=n,e.loading=!1});case 11:if(0!=s.code){t.next=18;break}return e.dataForm.tableName=s.assetExt.tableName,e.dataForm.id=s.assetExt.id,e.$emit("refreshDataList"),t.abrupt("return",!0);case 18:return e.$message({message:s.msg,type:"error",duration:1500}),t.abrupt("return",!1);case 20:case"end":return t.stop()}},t,e)}))()},changeName:function(){var e=this;this.dataForm.id&&this.$http({url:this.$http.adornUrl("/common/commondefine/updateTableDefineName"),method:"post",data:this.$http.adornParams({commonDefineId:this.dataForm.id,configInfo:this.dataForm.name})}).then(function(t){var n=t.data;n&&0===n.code?e.$emit("refreshDataList"):e.$message.error(n.msg)})},tabClick:function(e){var t=this,n=!1;switch(this.activeTab){case 0:n=this.$refs.sqlBaseComponent.contrast();break;case 1:n=this.$refs.tableBaseComponent.contrast();break;case 4:n=this.$refs.phoneCompnent.contrast();break;case 2:n=!0}n?this.activeTab=e:this.$confirm("即将离开当前页面，是否保存已有更改？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"保存并离开",cancelButtonText:"不保存并离开"}).then(function(){t.dataFormSubmit(),t.activeTab=e}).catch(function(n){"cancel"===n&&(t.getBaseData(),t.activeTab=e)})},dataFormSubmit:function(){switch(this.btnLoading=!0,this.activeTab){case 0:this.$refs.sqlBaseComponent.save();break;case 1:this.$refs.tableBaseComponent.save();break;case 4:this.$refs.phoneCompnent.save()}},editTitle:function(){this.$refs.titleEdit.editTitle()},saveSuccess:function(e){this.btnLoading=!1,this.$message.success(this.tabMap[e].value+"保存成功")},closeLoading:function(){this.btnLoading=!1}},created:function(){var e=this;this.tabMap={},this.headTabs.forEach(function(t){e.tabMap[t.id]=t})}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.winShow?n("vxe-modal",{attrs:{width:"100%",height:"100%",title:"sql表单",resize:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("span",{on:{click:function(t){return e.titleClick()}}},[e._v(e._s(e.dataForm.name))]),e._v(" "),n("el-button",{staticStyle:{padding:"0 0 0 10px","font-size":"16px"},attrs:{type:"text",title:"编辑"},on:{click:e.editTitle}},[n("i",{staticClass:"el-icon-edit"})]),e._v(" "),n("div",{staticClass:"col text-center"},[n("div",{staticClass:"row tabs"},e._l(e.headTabs,function(t,o){return n("div",{key:o,staticClass:"col tab",class:{"tab-active":e.activeTab==t.id},style:{color:e.activeTab==t.id?""+e.themeColor:"#aaaeb3"},on:{click:function(n){return e.tabClick(t.id)}}},[e._v("\n              "+e._s(t.value)+"\n              "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.activeTab==t.id,expression:"activeTab == i.id"}],staticClass:"tab-active-box",style:"background:"+e.themeColor})])}),0)]),e._v(" "),n("div",{staticStyle:{width:"130px"}},[2!=e.activeTab?n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("保存"+e._s(e.tabMap[e.activeTab].value)+"\n          ")]):e._e()],1)],1)]},proxy:!0}],null,!1,3990709846),model:{value:e.winShow,callback:function(t){e.winShow=t},expression:"winShow"}},[n("sql-base-component",{directives:[{name:"show",rawName:"v-show",value:0==e.activeTab,expression:"activeTab == 0"}],ref:"sqlBaseComponent",staticStyle:{height:"100%"},attrs:{dataForm:e.dataForm},on:{saveSuccess:function(t){return e.saveSuccess(0)},closeLoading:e.closeLoading}}),e._v(" "),n("table-base-component",{directives:[{name:"show",rawName:"v-show",value:1==e.activeTab,expression:"activeTab == 1"}],ref:"tableBaseComponent",staticStyle:{height:"100%"},attrs:{dataForm:e.dataForm},on:{saveSuccess:function(t){return e.saveSuccess(0)},closeLoading:e.closeLoading}}),e._v(" "),n("phoneCompnent",{directives:[{name:"show",rawName:"v-show",value:4==e.activeTab,expression:"activeTab == 4"}],ref:"phoneCompnent",staticStyle:{height:"100%"},attrs:{exts:e.exts,dataForm:e.dataForm},on:{saveSuccess:function(t){return e.saveSuccess(4)},closeLoading:e.closeLoading}}),e._v(" "),n("seniorComponent",{directives:[{name:"show",rawName:"v-show",value:2==e.activeTab,expression:"activeTab == 2"}],ref:"seniorComponent",staticStyle:{height:"100%"},attrs:{exts:e.exts,dataForm:e.dataForm},on:{closeLoading:e.closeLoading}}),e._v(" "),n("flowComponent",{directives:[{name:"show",rawName:"v-show",value:3==e.activeTab,expression:"activeTab == 3"}],ref:"flowComponent",attrs:{exts:e.exts,dataForm:e.dataForm},on:{saveSuccess:function(t){return e.saveSuccess(3)},closeLoading:e.closeLoading}})],1):e._e(),e._v(" "),n("titleEdit",{ref:"titleEdit",on:{change:e.changeName},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1)},staticRenderFns:[]};var w=n("VU/8")(y,g,!1,function(e){n("joBp")},"data-v-3354e62e",null);t.default=w.exports},KrAp:function(e,t){},LWUX:function(e,t,n){"use strict";var o={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("img",{staticClass:"w100 h100",class:e.itemOption.robotInfo?"cursor-pointer":"",staticStyle:{"object-fit":"cover"},attrs:{src:e.itemOption.img[0].url,alt:""},on:{click:function(t){return e.robotDo(e.item)}}})},staticRenderFns:[]};var i=n("VU/8")({props:{itemOption:{},isEdit:{}},data:function(){return{num:null}},mounted:function(){},methods:{goLink:function(){this.isEdit||this.itemOption.link&&""!=this.itemOption.link&&this.$router.push({name:this.itemOption.link,query:{dataFilterInfo:this.itemOption.linkParams}})},robotDo:function(){this.$emit("robotDo")}}},o,!1,function(e){n("GTcl")},"data-v-0a6f4fa3",null);t.a=i.exports},LZCK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={components:{tree:n("i8PB").default},props:{tableProp:{}},methods:{refreshData:function(){"tree"==this.tableProp.leftView&&this.$refs.tree.init()}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h100",staticStyle:{width:"260px","padding-right":"10px"}},["tree"==e.tableProp.leftView&&e.tableProp.treeTable?n("tree",{ref:"tree",attrs:{tableProp:e.tableProp},on:{treeClick:function(t){return e.$emit("treeClick",t)}}}):e._e()],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("eVS/")},"data-v-7984ae2c",null);t.default=a.exports},Lf8v:function(e,t){},Lj8k:function(e,t){},LlIK:function(e,t){},LlQS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-bianji",use:"icon-bianji-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-bianji"><defs><style type="text/css"></style></defs><path d="M908.785955 492.415966c-11.04966 0-20.008706 8.958022-20.008706 20.008706l0 338.328565c0 38.614459-31.416524 70.030983-70.030983 70.030983L202.707748 920.78422c-38.614459 0-70.030983-31.416524-70.030983-70.030983l0-676.303067c0-38.614459 31.416524-70.030983 70.030983-70.030983l362.378308 0c11.04966 0 20.008706-8.958022 20.008706-20.008706 0-11.050684-8.959046-20.008706-20.008706-20.008706L202.707748 64.401776c-60.681034 0-110.049418 49.367361-110.049418 110.049418l0 676.303067c0 60.681034 49.367361 110.049418 110.049418 110.049418l616.038518 0c60.681034 0 110.049418-49.367361 110.049418-110.049418L928.795685 512.425695C928.795685 501.373988 919.836639 492.415966 908.785955 492.415966z" p-id="2492" /><path d="M942.576549 117.985158 907.20597 82.614579c-23.405059-23.405059-61.486376-23.400966-84.891436 0l-422.369633 422.36861c-1.295506 1.296529-2.407839 2.76395-3.304256 4.363378L269.318842 736.416166c-4.457522 7.951089-2.977821 17.909905 3.598968 24.221658 3.830235 3.675716 8.823969 5.572926 13.859659 5.572926 3.613294 0 7.247054-0.977257 10.488889-2.973728l219.285309-135.104047c1.327228-0.816598 2.552126-1.784646 3.654226-2.885723l422.369633-422.36861C965.979562 179.471534 965.979562 141.390217 942.576549 117.985158zM418.556794 552.080857l55.42124 55.279001-132.025942 81.343633L418.556794 552.080857zM914.279063 174.579107 505.926678 582.930469l-63.748906-63.586201L850.612021 110.912066c7.798617-7.800663 20.493753-7.804756 28.29544 0l35.371602 35.371602C922.081773 154.084331 922.081773 166.777421 914.279063 174.579107z" p-id="2493" /></symbol>'});r.a.add(l);t.default=l},Lmrr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"common-dialog-view",data:function(){return{visible:!1,tableName:"",selectedId:"",selectedRow:"",rowId:"",key:"",fieldName:"",showType:"",title:"选择",dataFilterInfo:null,selectData:null}},methods:{init:function(e,t,n,o,i,a,r){var l=this;console.log(t,a,r,6666666666667),a&&(this.title=a.name,this.dataFilterInfo=a.dataFilterInfo),this.rowId=e,this.selectedId=o,this.key=n,this.tableName=t,this.selectData=r,this.visible=!0,this.showType="forRow",this.$nextTick(function(){l.$refs.common&&l.$refs.common.refreshDataAndPage(i,t,o)})},initForFilter:function(e,t,n,o,i){var a=this;this.selectedId=n,this.tableName=e,this.key=t,this.fieldName=i,this.visible=!0,this.showType="forFilter",this.$nextTick(function(){a.$refs.common&&a.$refs.common.refreshDataAndPage(o,e,n)})},selectItem:function(e){this.selectedId=e.id,this.selectedRow=e},confirm:function(){"forFilter"==this.showType?this.$emit("updateRelateFilterData",this.key,this.selectedId,this.selectedRow,this.fieldName):(this.$emit("updateRelateItemData",this.rowId,this.key,this.selectedId,this.selectedRow,this.tableName),this.dataFilterInfo&&this.$emit("clearDataFilter",this.dataFilterInfo)),this.visible=!1}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("vxe-modal",{attrs:{width:"70%",height:"85%",resize:"",remember:"",title:e.title},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v(e._s(e.title))]),e._v(" "),n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(" 取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(" 确定")])],1)]},proxy:!0}],null,!1,3203727170),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?n("common-view",{ref:"common",attrs:{radioChoose:"true","append-to-body":!0,dontShowCustomViewProp:!0,isChildView:!0,tableConfig:{canEdit:!1,canDelete:!1},noOption:"",noHeadToolBar:"",localTableDataProp:e.selectData,dataFilterInfoProp:e.dataFilterInfo},on:{selectItem:e.selectItem}}):e._e()],1):e._e()},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("0eS3")},"data-v-555921a1",null);t.default=a.exports},LokH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("exGp"),s=n.n(l),c=n("woOf"),u=n.n(c),d=n("KmbY"),h=n("BUm/"),f=n("VGMx"),p=n("NKzj"),m=n("crIV"),v=n("XUmz"),b=n("0xDb"),y=n("ULGN"),g={name:"addOrUpdateWin",components:{baseComponent:p.default,phoneCompnent:f.default,chartsComponent:m.default,seniorComponent:v.default,flowComponent:h.default,titleEdit:y.a,AddOrUpdateSqlTable:d.default},provide:function(){return{dataForm:this.dataForm,exts:this.exts,allFormInfo:this.allFormInfo}},watch:{visible:function(){this.visible||(Object(b.s)(7),this.$emit("refreshDataList"))}},data:function(){return{allFormInfo:{list:[]},titleClickCount:0,devModel:"on"==localStorage.getItem("devModel"),btnLoading:!1,headTabs:[{value:"表单设计",id:0},{value:"移动端设计",id:4},{value:"图表设计",id:1},{value:"流程配置",id:3},{value:"高级选项",id:2}],tabMap:{},activeTab:0,exts:[],visible:!1,dataForm:{id:"",name:"",api:"",saveApi:"",updateApi:"",deleteApi:"",template:"",createdAt:"",updatedAt:"",createrShow:!1},loading:!1,themeColor:localStorage.getItem("theme"),oldBaseComponentData:null}},mounted:function(){this.getFormList()},methods:{getFormList:function(){var e=this;this.$http({url:this.$http.adornUrl("/common/commondefine/list"),method:"post",data:this.$http.adornParams({page:1,limit:999,tableType:"dataTable",appId:JSON.parse(localStorage.getItem("app")).appId})}).then(function(t){var n=t.data;n&&0===n.code&&null!=n.page&&e.$set(e.allFormInfo,"list",n.page.list)})},titleClick:function(){var e=this;this.titleClickCount++,this.titleClickCount>5&&null==localStorage.getItem("devModel")&&this.$alert("打开高级开发者编辑模式，可编辑高级字段，非专业人士请勿随意修改。","开发者模式",{confirmButtonText:"确定",callback:function(t){"confirm"==t&&(localStorage.setItem("devModel","on"),e.devModel=!0)}})},editTitle:function(){this.$refs.titleEdit.editTitle()},init:function(e,t,n){var o=this;this.tabMap={},this.headTabs.forEach(function(e){o.tabMap[e.id]=e}),this.dataForm.id=e||"",this.dataForm.tableName=t||"",this.dataForm.name=n||"",this.activeTab=0,this.visible=!0,this.getBaseData()},getBaseData:function(){var e=this;this.dataForm.id?(this.$loading.show(),this.$http({url:this.$http.adornUrl("common/commondefine/infoByTableWithoutPerm/"+this.dataForm.tableName),method:"get",params:this.$http.adornParams()}).then(function(t){var n=t.data;if(e.$loading.hide(),n&&0===n.code){var o=n.assetExt,i=JSON.parse(n.assetExt.template),a=JSON.parse(n.assetExt.chart),r=(n.assetExt.customView&&JSON.parse(n.assetExt.customView),JSON.parse(n.assetExt.mobileConfig));e.$set(e,"exts",i),e.$refs.baseComponent.init(i,JSON.parse(n.assetExt.tableProp),n.assetExt.uniqueCode),e.$refs.chartsComponent.init(a),e.$refs.seniorComponent.init(o),e.$refs.flowComponent.init(o),e.$refs.phoneCompnent.init(r),u()(e.dataForm,o)}})):this.$nextTick(function(){e.newForm()})},changeName:function(){var e=this;this.dataForm.id&&this.$http({url:this.$http.adornUrl("/common/commondefine/updateTableDefineName"),method:"post",data:this.$http.adornParams({commonDefineId:this.dataForm.id,configInfo:this.dataForm.name})}).then(function(t){var n=t.data;n&&0===n.code?e.$emit("refreshDataList"):e.$message.error(n.msg)})},tabClick:function(e){var t=this,n=!1;switch(this.activeTab){case 0:n=this.$refs.baseComponent.contrast();break;case 4:n=this.$refs.phoneCompnent.contrast();break;case 1:n=this.$refs.chartsComponent.contrast();break;case 3:n=this.$refs.flowComponent.contrast();break;case 2:n=!0}n?this.activeTab=e:this.$confirm("即将离开当前页面，是否保存已有更改？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"保存并离开",cancelButtonText:"不保存并离开"}).then(function(){t.dataFormSubmit(),t.activeTab=e}).catch(function(n){"cancel"===n&&(t.getBaseData(),t.activeTab=e)})},newForm:function(){var e=this;return s()(i.a.mark(function t(){var n,o,a,l,s,c,u,d,h;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.dataForm.name,8889990),n=e.$refs.flowComponent.getSaveData(),t.next=4,e.$refs.seniorComponent.getSaveData();case 4:return o=t.sent,a=e.$refs.baseComponent.getSaveData().exts,l=e.$refs.chartsComponent.getSaveData(),s=e.$refs.baseComponent.getBtnList(),c=e.$refs.phoneCompnent.getSaveData(),u=e.$refs.baseComponent.getUniqueKey(),o.customView.customBtn=s,o.tableProp.titleKey=e.$refs.baseComponent.getSaveData().titleKey,e.loading=!0,d=e.$http.adornData({id:e.dataForm.id||void 0,name:e.dataForm.name,chart:l,dbTableName:null!=e.dataForm.tableName&&""!=e.dataForm.tableName?e.dataForm.tableName:Object(b.x)(6),api:e.dataForm.api,saveApi:e.dataForm.saveApi,updateApi:e.dataForm.updateApi,deleteApi:e.dataForm.deleteApi,uniqueCode:u,customView:r()(o.customView),tableProp:r()(o.tableProp),createdAt:e.dataForm.createdAt,updatedAt:e.dataForm.updatedAt,template:a,fixedData:o.fixedData,appId:JSON.parse(localStorage.getItem("app")).appId,process:null!=n?n.process:null,processDescribe:null!=n?n.processDescribe:null,processEnable:null!=n?n.processEnable:null,mobileConfig:r()(c)}),h=null,t.next=13,e.$http({url:e.$http.adornUrl("/common/commondefine/save"),method:"post",data:d}).then(function(t){var n=t.data;h=n,e.loading=!1});case 13:if(0!=h.code){t.next=20;break}return e.dataForm.tableName=h.assetExt.tableName,e.dataForm.id=h.assetExt.id,e.$emit("refreshDataList"),t.abrupt("return",!0);case 20:return e.$message({message:h.msg,type:"error",duration:1500}),t.abrupt("return",!1);case 22:case"end":return t.stop()}},t,e)}))()},saveSuccess:function(e){this.btnLoading=!1,this.$message.success(this.tabMap[e].value+"保存成功")},closeLoading:function(){this.btnLoading=!1},dataFormSubmit:function(){var e=this;return s()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.btnLoading=!0,t.t0=e.activeTab,t.next=0===t.t0?4:4===t.t0?6:1===t.t0?8:3===t.t0?10:12;break;case 4:return e.$refs.baseComponent.save(),t.abrupt("break",12);case 6:return e.$refs.phoneCompnent.save(),t.abrupt("break",12);case 8:return e.$refs.chartsComponent.save(),t.abrupt("break",12);case 10:return e.$refs.flowComponent.save(),t.abrupt("break",12);case 12:case"end":return t.stop()}},t,e)}))()},closeWindow:function(){this.visible=!1}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"base"},[e.visible?n("vxe-modal",{attrs:{width:"100%",height:"100%",resize:"",loading:e.loading},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("span",{on:{click:function(t){return e.titleClick()}}},[e._v(e._s(e.dataForm.name))]),e._v(" "),n("el-button",{staticStyle:{padding:"0 0 0 10px","font-size":"16px"},attrs:{type:"text",title:"编辑"},on:{click:e.editTitle}},[n("i",{staticClass:"el-icon-edit"})]),e._v(" "),1==e.devModel?n("el-tag",[e._v("开发者模式")]):e._e(),e._v(" "),n("div",{staticClass:"col text-center"},[n("div",{staticClass:"row tabs"},e._l(e.headTabs,function(t,o){return n("div",{key:o,staticClass:"col tab",class:{"tab-active":e.activeTab==t.id},style:{color:e.activeTab==t.id?""+e.themeColor:"#aaaeb3"},on:{click:function(n){return e.tabClick(t.id)}}},[e._v("\n                            "+e._s(t.value)+"\n                            "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.activeTab==t.id,expression:"activeTab == i.id"}],staticClass:"tab-active-box",style:"background:"+e.themeColor})])}),0)]),e._v(" "),n("div",{staticStyle:{width:"130px"}},[2!=e.activeTab?n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("保存"+e._s(e.tabMap[e.activeTab].value))]):e._e()],1)],1)]},proxy:!0}],null,!1,558696521),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("baseComponent",{directives:[{name:"show",rawName:"v-show",value:0==e.activeTab,expression:"activeTab == 0"}],ref:"baseComponent",staticStyle:{height:"100%"},attrs:{dataForm:e.dataForm},on:{saveSuccess:function(t){return e.saveSuccess(0)},getFormList:e.getFormList,closeLoading:e.closeLoading},model:{value:e.exts,callback:function(t){e.exts=t},expression:"exts"}}),e._v(" "),n("chartsComponent",{directives:[{name:"show",rawName:"v-show",value:1==e.activeTab,expression:"activeTab == 1"}],ref:"chartsComponent",staticStyle:{height:"100%"},attrs:{exts:e.exts,dataForm:e.dataForm},on:{saveSuccess:function(t){return e.saveSuccess(1)},closeLoading:e.closeLoading}}),e._v(" "),n("phoneCompnent",{directives:[{name:"show",rawName:"v-show",value:4==e.activeTab,expression:"activeTab == 4"}],ref:"phoneCompnent",staticStyle:{height:"100%"},attrs:{exts:e.exts,dataForm:e.dataForm},on:{saveSuccess:function(t){return e.saveSuccess(4)},closeLoading:e.closeLoading}}),e._v(" "),n("seniorComponent",{directives:[{name:"show",rawName:"v-show",value:2==e.activeTab,expression:"activeTab == 2"}],ref:"seniorComponent",staticStyle:{height:"100%"},attrs:{exts:e.exts,dataForm:e.dataForm}}),e._v(" "),n("flowComponent",{directives:[{name:"show",rawName:"v-show",value:3==e.activeTab,expression:"activeTab == 3"}],ref:"flowComponent",attrs:{exts:e.exts,dataForm:e.dataForm},on:{saveSuccess:function(t){return e.saveSuccess(3)}}})],1):e._e(),e._v(" "),n("titleEdit",{ref:"titleEdit",on:{change:e.changeName},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1)},staticRenderFns:[]};var _=n("VU/8")(g,w,!1,function(e){n("d9tQ")},"data-v-0b6a62f8",null);t.default=_.exports},LqJT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-daohang",use:"icon-daohang-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-daohang"><defs><style type="text/css"></style></defs><path d="M605.848435 958.708971c-0.36225 0-0.724501-0.008186-1.088798-0.026606-9.098215-0.468674-16.872273-6.712889-19.288299-15.495926L476.898551 548.458353 80.07064 437.83486c-8.760524-2.442632-14.976086-10.218736-15.427364-19.304671-0.451278-9.083889 4.965082-17.437138 13.44215-20.73423L929.251056 66.728774c7.80885-3.038196 16.669658-1.174756 22.597671 4.750187 5.922896 5.92392 7.788383 14.789844 4.751211 22.597671L625.531729 945.241238C622.361527 953.390849 614.518908 958.708971 605.848435 958.708971zM152.537092 414.172951l347.232352 96.79658c7.148817 1.9934 12.726859 7.591909 14.696724 14.746866l94.821599 344.730369 290.525839-746.93166L152.537092 414.172951z" p-id="3765" /></symbol>'});r.a.add(l);t.default=l},LuTs:function(e,t){},"M/w1":function(e,t){},M0rx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("TngT"),i={methods:{initmovement:function(e){var t=this.$vptd.state.activeElement;this.$vptd.commit("initmove",{startX:e.pageX,startY:e.pageY,originX:t.left,originY:t.top}),document.addEventListener("mousemove",this.handlemousemove,!0),document.addEventListener("mouseup",this.handlemouseup,!0)},handlemousemove:function(e){e.stopPropagation(),e.preventDefault(),this.$vptd.commit("move",{x:e.pageX,y:e.pageY})},handlemouseup:function(){document.removeEventListener("mousemove",this.handlemousemove,!0),document.removeEventListener("mouseup",this.handlemouseup,!0),this.$vptd.commit("stopmove")}}},a=n("jRWI"),r=n("iS5C"),l=n("06zv"),s=n("oh3/"),c=n("hUfn"),u={components:{control:o.default,braidTxt:a.default,barCode:r.default,table:l.default,image:s.default,html:c.default},mixins:[i],data:function(){return{}},computed:{widgetStore:function(){return this.$vptd.state.page.tempItems},backImg:function(){return this.$vptd.state.page.imageUrl?this.$vptd.state.page.imageUrl:""},page:function(){return this.$vptd.state.page},widgetId:function(){return this.$vptd.state.uuid}},mounted:function(){var e=this,t=document.getElementById("viewport");t?t.addEventListener("mousedown",this.handleSelection,!1):console.error("未找的‘viewport’节点"),document.addEventListener("keydown",function(t){t.stopPropagation();var n=e.$vptd.state.activeElement;if(37!==t.keyCode||!n.left)return 38===t.keyCode&&n.top?(t.preventDefault(),void(n.top-=1)):void(39===t.keyCode&&n.left?n.left+=1:40===t.keyCode&&n.top&&(t.preventDefault(),n.top+=1));n.left-=1},!0)},methods:{handleSelection:function(e){var t=this.selectTarget(e.target);if(t){var n=t.getAttribute("data-uuid");this.$vptd.commit("select",{uuid:n||-1}),(t=this.$vptd.state.activeElement).dragable&&this.initmovement(e)}else this.$vptd.commit("select",{uuid:-1})},selectTarget:function(e){var t=e.getAttribute("data-type");return t?"viewport"!==t&&e:this.selectTarget(e.parentNode)}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"holder",attrs:{id:"viewport","data-type":"viewport"}},[n("div",{staticClass:"screen",style:{height:e.page.height+"px",width:e.page.width+"px",backgroundImage:"url("+e.backImg+")"}},[e._l(e.widgetStore,function(t){return n(t.type,{key:t.uuid,tag:"component",staticClass:"layer",class:{active:e.widgetId===t.uuid},attrs:{"data-title":t.type,val:t,"data-type":t.type,"data-uuid":t.uuid}})}),e._v(" "),n("control")],2)])},staticRenderFns:[]};var h=n("VU/8")(u,d,!1,function(e){n("JlXI")},"data-v-7a5cffe3",null);t.default=h.exports},MSZQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-sousuo",use:"icon-sousuo-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-sousuo"><defs><style type="text/css"></style></defs><path d="M955.069071 864.311021 740.015134 649.258107c-3.752464-3.751441-8.841366-5.860475-14.149255-5.860475-5.306866 0-10.395768 2.108011-14.149255 5.860475l-16.692171 16.692171-38.34226-38.34226c53.03796-59.810201 85.298711-138.442072 85.298711-224.478588 0-186.774871-151.952784-338.727655-338.727655-338.727655S64.527642 216.35456 64.527642 403.12943c0 186.775894 151.952784 338.728678 338.727655 338.728678 86.36909 0 165.276231-32.510438 225.170343-85.913718l38.303374 38.303374-17.34504 17.34504c-7.812943 7.813966-7.812943 20.48352 0 28.297486l215.051891 215.052914c3.753487 3.751441 8.841366 5.860475 14.149255 5.860475 5.306866 0 10.395768-2.108011 14.149255-5.860475l62.334697-62.334697C962.883037 884.794541 962.883037 872.124987 955.069071 864.311021zM104.546078 403.12943c0-164.709319 133.9999-298.709219 298.709219-298.709219s298.709219 133.9999 298.709219 298.709219S567.964616 701.839673 403.255297 701.839673 104.546078 567.838749 104.546078 403.12943zM878.585119 912.496463 691.829691 725.741036l34.036187-34.036187 186.755428 186.755428L878.585119 912.496463z" p-id="2877" /></symbol>'});r.a.add(l);t.default=l},MT6L:function(e,t,n){e.exports=n.p+"static/img/docx.e922cb7.svg"},MtQs:function(e,t,n){e.exports=n.p+"static/fonts/element-icons.535877f.woff"},Mw6F:function(e,t){},N2OJ:function(e,t,n){"use strict";var o=n("0xDb"),i={destField:"",symbol:"",value:"",field:"",valueType:1},a={components:{customFromItem:n("9uud").a},props:{opt:{default:function(){return{disableValueType:!1,placeholder1:""}}},exts:{},value:{},formId:{},tableName:{},filterExtKey:"",initTargetList:{type:Array,default:function(){return[]}}},model:{prop:"value",event:"change"},watch:{exts:{handler:function(e){},deep:!0,immediate:!0},formId:{handler:function(e){e&&this.changeForm()},deep:!0,immediate:!0},tableName:{handler:function(e){e&&this.changeForm()},deep:!0,immediate:!0}},data:function(){return{newExts:[],orList:[],symbolEnum:Object(o.m)("symbolEnum"),valueType:Object(o.m)("addRobotRulesEnum"),noshowlist:Object(o.p)(),targetMap:{},targetList:[],first:!0}},methods:{openRelateExt:function(){var e=this,t=this.exts;this.newExts=Object(o.e)(t),this.newExts.forEach(function(t){"relateTable"==t.type&&t.relateTableName&&t.key!=e.filterExtKey&&e.$http({url:e.$http.adornUrl("/common/commondefine/infoByTable/"+t.relateTableName),method:"get"}).then(function(n){var o=n.data;if(0==o.code){var i=o.assetExt.templateJson;i.forEach(function(e){e.key=t.key+"@"+e.key,e.name=t.name+"-"+e.name}),e.newExts=e.newExts.concat(i)}})})},checkShow:function(e,t){return!!this.targetMap[t]&&("dateTime"==this.targetMap[t].type?e.dateType==this.targetMap[t].dateType:e.type==this.targetMap[t].type)},getShowSymbol:function(e,t,n,i){if(!e||!this.targetMap||!this.targetMap[e])return!1;var a=Object(o.q)(this.targetMap[e].type,t);return-1==a.showList.indexOf(this.orList[n][i].symbol)&&(this.orList[n][i].symbol=""),a.re},deleteItem:function(e,t){this.orList[e].splice(t,1),0==this.orList[e].length&&this.orList.splice(e,1)},addItem:function(e,t){e?this.orList[t].push(Object(o.e)(i)):this.orList.push([Object(o.e)(i)])},getData:function(){this.first=!0,this.orList=Object(o.e)(this.value?this.value:[[Object(o.e)(i)]])},saveData:function(){for(var e in this.orList){var t=this.orList[e].filter(function(e,t,n){return e.destField&&e.symbol});this.orList[e]=t}this.orList=this.orList.filter(function(e,t,n){return e.length}),this.$emit("change",this.orList)},changeForm:function(){var e=this;if(!this.formId&&!this.tableName)return!1;this.openRelateExt(),this.$http({url:this.$http.adornUrl(this.formId?"/common/commondefine/infoById/"+this.formId:"/common/commondefine/infoByTable/"+this.tableName),method:"get"}).then(function(t){var n=t.data;n&&0===n.code&&(e.first||(e.orList=[[Object(o.e)(i)]]),e.$set(e,"targetList",n.assetExt.templateJson),e.targetList.forEach(function(t){e.targetMap[t.key]=t}),e.first=!1)})},init:function(){var e=this;this.initTargetList.length&&(this.$set(this,"targetList",this.initTargetList),this.targetList.forEach(function(t){e.targetMap[t.key]=t})),this.value||(this.orList=[[Object(o.e)(i)]])}},mounted:function(){this.init()}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.orList,function(t,o){return n("div",{key:o},[0!=o?n("div",{staticStyle:{padding:"14px 20px","font-weight":"bold"}},[e._v("\r\n            或\r\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"or-box"},[e._l(t,function(t,i){return n("div",{key:"or"+i,staticStyle:{"padding-bottom":"5px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[n("el-select",{attrs:{placeholder:e.opt.placeholder1?e.opt.placeholder1:"关联表单字段"},on:{change:function(e){t.value=null}},model:{value:t.destField,callback:function(n){e.$set(t,"destField",n)},expression:"item.destField"}},e._l(e.targetList,function(t){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[n("el-select",{attrs:{placeholder:"判断符"},model:{value:t.symbol,callback:function(n){e.$set(t,"symbol",n)},expression:"item.symbol"}},e._l(e.symbolEnum,function(a){return e.getShowSymbol(t.destField,a.value,o,i)?n("el-option",{key:a.value,attrs:{label:a.label,value:a.value}}):e._e()}),1)],1),e._v(" "),e.opt.disableValueType?e._e():n("el-col",{staticStyle:{"padding-right":"5px"},attrs:{span:4}},[n("el-select",{attrs:{placeholder:""},model:{value:t.valueType,callback:function(n){e.$set(t,"valueType",n)},expression:"item.valueType"}},e._l(e.valueType,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:8}},[2==t.valueType?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.newExts,function(o){return e.checkShow(o,t.destField)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()}),1):n("customFromItem",{attrs:{noClear:"",isRange:"belong"==t.symbol||"notBelong"==t.symbol,symbol:t.symbol,exts:e.targetMap[t.destField]?e.targetMap[t.destField]:null},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(o,i)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)}),e._v(" "),n("el-button",{on:{click:function(t){return e.addItem(!0,o)}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 且条件")])],2)])}),e._v(" "),n("div",{staticStyle:{padding:"10px 20px"}},[n("el-button",{on:{click:function(t){return e.addItem(!1)}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 或条件")])],1)],2)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("8L6u")},"data-v-1a809300",null);t.a=l.exports},N8cm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("8U58");n("4/hK"),n("tPrY"),n("epNC"),n("/TiH"),n("zdrL");var i={data:function(){return{CodeMirrorEditor:null,wait:null}},methods:{init:function(e){!function(e){o.defineMode("defineScript",function(){var t=[">=","<=","!=","=",">","<","+","-","*","/","(",")",";",",",":","{","}"];return{token:function(n){if(n.eatSpace())return null;if(n.match("//"))return n.skipToEnd(),"comment";for(var o=0;o<t.length;o++)if(n.match(t[o]))return"mark-keyword";if(n.match("true")||n.match("false"))return"boolean-keyword";if(n.match(/^[0-9\.+-]/,!1)){if(n.match(/^[+-]?0x[0-9a-fA-F]+/))return"number";if(n.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?/))return"number";if(n.match(/^[+-]?\d+([EeDd][+-]?\d+)?/))return"number"}for(var i=e.tableList,a=0;a<i.length;a++)if(n.match(i[a].name))return"table-keyword";for(var r=e.fieidList,l=0;l<r.length;l++)if(n.match(r[l]))return"field-keyword";return n.next(),"nomal-keyword"}}}),o.defineMIME("text/x-defineScript","defineScript")}(e),this.CodeMirrorEditor=o.fromTextArea(this.$refs.codemirror,{mode:"defineScript",theme:"3024-day",lineNumbers:!1,lineWrapping:!0}),this.CodeMirrorEditor.setSize("auto","100%"),this.CodeMirrorEditor=o.fromTextArea(this.$refs.codemirror,{mode:"defineScript",theme:"3024-day",lineNumbers:!1,lineWrapping:!0}),this.wait&&this.setValue(this.wait)},setValue:function(e){var t=this;this.$nextTick(function(){t.CodeMirrorEditor?t.CodeMirrorEditor.setValue(e||""):t.wait=e})},getValue:function(){var e=this.CodeMirrorEditor.getValue();return console.log(e,999980),e}}},a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-codemirror"},[t("textarea",{ref:"codemirror",staticClass:"h100"})])},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("zhSc")},"data-v-765d8bd4",null);t.default=r.exports},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("gi6J"),i=n.n(o),a=n("Xxa5"),r=n.n(a),l=n("pFYg"),s=n.n(l),c=n("//Fk"),u=n.n(c),d=n("exGp"),h=n.n(d),f=n("mvHQ"),p=n.n(f),m=n("7+uW"),v=n("Dd8w"),b=n.n(v),y=n("NYxO"),g={name:"ChannelSelector",data:function(){return{selectedChannel:""}},methods:b()({},Object(y.b)("channel",["setChannel"]),{handleChannelChange:function(e){window.platform=e,this.setChannel(e),this.$emit("close")}})},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"请选择频道",visible:!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"30%",center:""}},[n("div",{staticClass:"channel-selector"},[n("el-radio-group",{on:{change:e.handleChannelChange},model:{value:e.selectedChannel,callback:function(t){e.selectedChannel=t},expression:"selectedChannel"}},[n("el-radio",{staticClass:"channel-selector-item",attrs:{label:"douyin"}},[e._v("抖音")]),e._v(" "),n("el-radio",{staticClass:"channel-selector-item",attrs:{label:"ks"}},[e._v("快手")])],1)],1)])},staticRenderFns:[]};var _=n("VU/8")(g,w,!1,function(e){n("GRRO")},"data-v-34ae6cad",null).exports,C=n("fXrb"),k=(n("/dO2"),{name:"App",components:{ChannelSelector:_},provide:function(){return{reload:this.reload}},mounted:function(){window.appType=Object(C.a)("appType")},data:function(){return{isRouterAlice:!0,showChannelSelector:!1}},computed:b()({},Object(y.c)("channel",["selectedChannel"])),methods:{closeChannelSelector:function(){this.showChannelSelector=!1},reload:function(){this.isRouterAlice=!1,this.$nextTick(function(){this.isRouterAlice=!0})}}}),x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.showChannelSelector?e._e():n("transition",{attrs:{name:"fade",id:"fade"}},[e.isRouterAlice?n("router-view"):e._e()],1),e._v(" "),e.showChannelSelector?n("channel-selector",{on:{close:e.closeChannelSelector}}):e._e()],1)},staticRenderFns:[]},S=n("VU/8")(k,x,!1,null,null,null).exports,T=n("YaEn"),E=n("IcnI"),O=n("K/Lq"),D=n.n(O),I=n("2X9z"),R=n.n(I),M=n("yg6k"),P=n.n(M),A=n("+TD8"),L=n.n(A),N=n("nu7/"),V=n.n(N),F=n("fM7S"),B=n.n(F),H=n("yUdt"),j=n.n(H),$=n("h2ff"),U=n.n($),z=n("f65a"),W=n.n(z),q=n("mWcH"),K=n.n(q),G=n("oTyR"),J=n.n(G),Y=n("cgIP"),X=n.n(Y),Q=n("6mNG"),Z=n.n(Q),ee=n("eDZK"),te=n.n(ee),ne=n("1ZIF"),oe=n.n(ne),ie=n("pkKZ"),ae=n.n(ie),re=n("uEG6"),le=n.n(re),ce=n("YnkO"),ue=n.n(ce),de=n("y7os"),he=n.n(de),fe=n("ARSI"),pe=n.n(fe),me=n("9Y4M"),ve=n.n(me),be=n("raHz"),ye=n.n(be),ge=n("IMy7"),we=n.n(ge),_e=n("LQMI"),Ce=n.n(_e),ke=n("wZaX"),xe=n.n(ke),Se=n("GegP"),Te=n.n(Se),Ee=n("wOhx"),Oe=n.n(Ee),De=n("91Nw"),Ie=n.n(De),Re=n("ajQY"),Me=n.n(Re),Pe=n("ttjG"),Ae=n.n(Pe),Le=n("g2bL"),Ne=n.n(Le),Ve=n("D3wm"),Fe=n.n(Ve),Be=n("855/"),He=n.n(Be),je=n("orbS"),$e=n.n(je),Ue=n("LaeV"),ze=n.n(Ue),We=n("NoPp"),qe=n.n(We),Ke=n("Mezo"),Ge=n.n(Ke),Je=n("vqwl"),Ye=n.n(Je),Xe=n("OSLW"),Qe=n.n(Xe),Ze=n("V1RD"),et=n.n(Ze),tt=n("aMwW"),nt=n.n(tt),ot=n("SXzR"),it=n.n(ot),at=n("4ZDJ"),rt=n.n(at),lt=n("bFD8"),st=n.n(lt),ct=n("tLa+"),ut=n.n(ct),dt=n("q4le"),ht=n.n(dt),ft=n("LR6y"),pt=n.n(ft),mt=n("zAL+"),vt=n.n(mt),bt=n("mtrD"),yt=n.n(bt),gt=n("YJmC"),wt=n.n(gt),_t=n("STLj"),Ct=n.n(_t),kt=n("e0Bm"),xt=n.n(kt),St=n("wxbk"),Tt=n.n(St),Et=n("s3ue"),Ot=n.n(Et),Dt=n("L6k1"),It=n.n(Dt),Rt=n("EKTV"),Mt=n.n(Rt),Pt=n("eBGF"),At=n.n(Pt),Lt=n("fDPO"),Nt=n.n(Lt),Vt=n("RDoK"),Ft=n.n(Vt),Bt=n("0kY3"),Ht=n.n(Bt),jt=n("HJMx"),$t=n.n(jt),Ut=n("D8db"),zt=n.n(Ut),Wt=n("ACGT"),qt=n.n(Wt),Kt=n("exT9"),Gt=n.n(Kt),Jt=n("SExR"),Yt=n.n(Jt),Xt=n("BrEC"),Qt=n.n(Xt),Zt=n("+nRk"),en=n.n(Zt),tn=n("o6kb"),nn=n.n(tn),on=n("+vil"),an=n.n(on),rn=n("qubY"),ln=n.n(rn),sn=n("6oiW"),cn=n.n(sn),un=n("OE6e"),dn=n.n(un),hn=n("kTMX"),fn=n.n(hn);m.default.use(fn.a),m.default.use(dn.a),m.default.use(cn.a),m.default.use(ln.a),m.default.use(an.a),m.default.use(nn.a),m.default.use(en.a),m.default.use(Qt.a),m.default.use(Yt.a),m.default.use(Gt.a),m.default.use(qt.a),m.default.use(zt.a),m.default.use($t.a),m.default.use(Ht.a),m.default.use(Ft.a),m.default.use(Nt.a),m.default.use(At.a),m.default.use(Mt.a),m.default.use(It.a),m.default.use(Ot.a),m.default.use(Tt.a),m.default.use(xt.a),m.default.use(Ct.a),m.default.use(wt.a),m.default.use(yt.a),m.default.use(vt.a),m.default.use(pt.a),m.default.use(ht.a),m.default.use(ut.a),m.default.use(st.a),m.default.use(rt.a),m.default.use(it.a),m.default.use(nt.a),m.default.use(et.a),m.default.use(Qe.a),m.default.use(Ye.a),m.default.use(Ge.a),m.default.use(qe.a),m.default.use(ze.a),m.default.use($e.a),m.default.use(He.a),m.default.use(Fe.a),m.default.use(Ne.a),m.default.use(Ae.a),m.default.use(Me.a),m.default.use(Ie.a),m.default.use(Oe.a),m.default.use(Te.a),m.default.use(xe.a),m.default.use(Ce.a),m.default.use(we.a),m.default.use(ye.a),m.default.use(ve.a),m.default.use(pe.a),m.default.use(he.a),m.default.use(ue.a),m.default.use(le.a),m.default.use(ae.a),m.default.use(oe.a),m.default.use(te.a),m.default.use(Z.a),m.default.use(X.a),m.default.use(J.a),m.default.use(K.a),m.default.use(W.a),m.default.use(U.a),m.default.use(j.a),m.default.use(B.a),m.default.use(V.a.directive),m.default.prototype.$loading=V.a.service,m.default.prototype.$msgbox=L.a,m.default.prototype.$alert=L.a.alert,m.default.prototype.$confirm=L.a.confirm,m.default.prototype.$prompt=L.a.prompt,m.default.prototype.$notify=P.a,m.default.prototype.$message=R.a,m.default.prototype.$ELEMENT={size:"mini",zIndex:3100};n("Q7M0"),n("Oxjj"),n("7xIN"),n("1Ens"),n("eoWL");var pn=n("lYQe"),mn=n("boTX"),vn=(n("d4tr"),n("Rk3H")),bn=n("0xDb"),yn=n("kvU2"),gn=n.n(yn),wn=n("Up7w"),_n=n.n(wn),Cn=n("w/TU"),kn=n.n(Cn),xn=n("mtWM"),Sn=n.n(xn),Tn=(n("pODJ"),n("ZHXk"),n("Ynfa")),En=n.n(Tn);m.default.use(En.a),En.a.setup({zIndex:2e3,size:"mini",pager:{size:null,autoHidden:!1,perfect:!0,pageSize:10,pagerCount:7,pageSizes:[10,15,20,50,100,200,500,800,1e3],layouts:["PrevJump","PrevPage","Jump","PageCount","NextPage","NextJump","Sizes","Total"]}}),m.default.prototype.$XModal=En.a.modal;var On=n("woOf"),Dn=n.n(On),In={name:"my-select",props:{size:{default:"medium"},disabled:{type:Boolean,default:!1},placeholder:{default:"请选择"},httpOption:{default:function(){return{}}},id:{require:!0},address:{require:!0},keyName:{require:!0,default:"name"},idName:{default:"id"},multiple:{}},model:{prop:"id",event:"change"},data:function(){return{options:[],choosedId:this.id,thisKeyName:this.keyName}},watch:{id:function(e){this.choosedId=e},keyName:function(e){this.thisKeyName=e}},mounted:function(){var e=this;this.options=[];var t=Dn()({url:this.$http.adornUrl(this.address),method:"get",headers:{token:this.token},params:this.$http.adornParams({page:1,limit:999})},this.httpOption);this.$http(t).then(function(t){var n=t.data;if(n&&0===n.code){var o=[];n.list?o=n.list:n.page.list&&(o=n.page.list),o.forEach(function(t){var n={};n.value=t[e.idName]+"",n.label=t[e.thisKeyName]+"",e.options.push(n)})}})},methods:{change:function(){this.$emit("change",this.choosedId)}}},Rn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{attrs:{size:e.size,placeholder:e.placeholder,multiple:e.multiple,filterable:"",disabled:e.disabled},on:{change:function(t){return e.change()}},model:{value:e.choosedId,callback:function(t){e.choosedId=t},expression:"choosedId"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)},staticRenderFns:[]};var Mn=n("VU/8")(In,Rn,!1,function(e){n("ykAp")},"data-v-7e0e2630",null).exports,Pn={name:"my-tree-select",props:{size:{default:"small"},id:{require:!0},address:{require:!0},place:{require:!1}},model:{prop:"id",event:"change"},data:function(){return{options:[],choosedId:this.id?this.id:"",choosedName:"",popovershow:!1}},watch:{id:function(e){this.choosedId=e,this.findLabel(this.options),null!=e&&""!=e||(this.choosedName="")},choosedId:function(e){this.$emit("change",e)},address:function(e){this.getData()}},mounted:function(){this.getData()},methods:{findLabel:function(e){var t=this;e.forEach(function(e){t.choosedId!=e.id?e.children&&e.children.length>0&&t.findLabel(e.children):t.choosedName=e.label})},treeDataTranslate:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parentId",o=[],i={},a=0;a<e.length;a++)i[e[a][t]]=e[a];for(var r=0;r<e.length;r++)i[e[r][n]]&&e[r][t]!==e[r][n]?(i[e[r][n]].children||(i[e[r][n]].children=[]),i[e[r][n]]._level||(i[e[r][n]]._level=1),e[r]._level=i[e[r][n]]._level+1,e[r].title?e[r].label=e[r].title:e[r].name&&(e[r].label=e[r].name),i[e[r][n]].children.push(e[r])):(e[r].title?e[r].label=e[r].title:e[r].name&&(e[r].label=e[r].name),o.push(e[r]));return o},getData:function(){var e=this;this.options=[],this.$http({url:this.$http.adornUrl(this.address),method:"get",headers:{token:this.token},params:this.$http.adornParams({page:1,limit:999})}).then(function(t){var n=t.data;if(n&&0===n.code){var o="parentId";n.page.list[0].parentid&&(o="parentid"),e.options=JSON.parse(p()(e.treeDataTranslate(n.page.list,"id",o))),e.findLabel(e.options)}})},change:function(e,t){this.choosedId=e.id,this.choosedName=e.label,this.popovershow=!1}}},An={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-popover",{ref:"menuListPopover",attrs:{placement:"bottom-start",trigger:"click","popper-class":"addGrouppopover"},model:{value:e.popovershow,callback:function(t){e.popovershow=t},expression:"popovershow"}},[n("el-tree",{ref:"menuListTree",staticClass:"video-tree",attrs:{data:e.options,"node-key":"id","default-expand-all":!0,"highlight-current":!0},on:{"current-change":e.change}})],1),e._v(" "),n("el-input",{directives:[{name:"popover",rawName:"v-popover:menuListPopover",arg:"menuListPopover"}],attrs:{readonly:!0,placeholder:e.place?e.place:"请选择",clearable:"",size:e.size},model:{value:e.choosedName,callback:function(t){e.choosedName=t},expression:"choosedName"}})],1)},staticRenderFns:[]};var Ln=n("VU/8")(Pn,An,!1,function(e){n("tzKF")},"data-v-963cc862",null).exports,Nn={name:"my-tree-select",props:{id:{require:!0},datalist:{require:!0},place:{require:!1}},model:{prop:"id",event:"change"},data:function(){return{options:[],choosedId:this.id?this.id:"",choosedName:"",popovershow:!1}},watch:{id:function(e){this.choosedId=e,this.findLabel(this.options),null!=e&&""!=e||(this.choosedName="")},choosedId:function(e){this.$emit("change",e)},datalist:function(e){this.getData(),this.findLabel(this.options)}},mounted:function(){this.getData()},methods:{findLabel:function(e){var t=this;e.forEach(function(e){t.choosedId!=e.id?e.children&&e.children.length>0&&t.findLabel(e.children):t.choosedName=e.label})},treeDataTranslate:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parentId",o=[],i={},a=0;a<e.length;a++)i[e[a][t]]=e[a];for(var r=0;r<e.length;r++)i[e[r][n]]&&e[r][t]!==e[r][n]?(i[e[r][n]].children||(i[e[r][n]].children=[]),i[e[r][n]]._level||(i[e[r][n]]._level=1),e[r]._level=i[e[r][n]]._level+1,e[r].title?e[r].label=e[r].title:e[r].name&&(e[r].label=e[r].name),i[e[r][n]].children.push(e[r])):(e[r].title?e[r].label=e[r].title:e[r].name&&(e[r].label=e[r].name),o.push(e[r]));return o},getData:function(){this.options=JSON.parse(p()(this.treeDataTranslate(this.datalist,"id")))},change:function(e,t){this.choosedId=e.id,this.choosedName=e.label,this.popovershow=!1}}},Vn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-popover",{ref:"menuListPopover",attrs:{placement:"bottom-start",trigger:"click","popper-class":"addGrouppopover"},model:{value:e.popovershow,callback:function(t){e.popovershow=t},expression:"popovershow"}},[n("el-tree",{ref:"menuListTree",staticClass:"video-tree",attrs:{data:e.options,"default-expand-all":!0,"highlight-current":!0},on:{"current-change":e.change}})],1),e._v(" "),n("div",{directives:[{name:"popover",rawName:"v-popover:menuListPopover",arg:"menuListPopover"}],staticStyle:{"min-width":"100px","min-height":"45px",display:"flex","align-items":"center"}},[n("span",[e._v(e._s(e.choosedName))])])],1)},staticRenderFns:[]};var Fn=n("VU/8")(Nn,Vn,!1,function(e){n("qaIW")},"data-v-94b24fc4",null).exports,Bn=n("SYqL"),Hn=n("h2v7"),jn=n("gxOO"),$n=n("BUU0"),Un=n("BS5Q"),zn=n("InBC"),Wn={props:{userId:{},closable:{default:!1,type:Boolean},nodetail:{default:!1,type:Boolean}},data:function(){return{visible:!1,loading:!1}},computed:{msg:function(){var e=this.$store.state.userInterface.staffList;for(var t in e){var n=e[t];if(n.userId==this.userId)return n}return null}},methods:{detail:function(e){if(this.nodetail)return!1;e&&(this.visible=!0)}},mounted:function(){}},qn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"inline-block"}},[n("el-tag",{attrs:{size:"medium",closable:e.closable},on:{close:function(t){return e.$emit("close")}}},[n("div",{staticStyle:{display:"inline-block"},style:{cursor:e.nodetail?"":"pointer"},on:{click:function(t){return e.detail(!0)}}},[e._t("default",[e._v(e._s(e.msg?e.msg.realname:""))])],2)]),e._v(" "),e.visible?n("vxe-modal",{attrs:{width:"30%",height:"30%",title:"员工信息",resize:"",loading:e.loading},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.msg?n("div",{staticStyle:{"font-size":"14px"}},[n("p",[e._v("\r\n                姓名："+e._s(e.msg.realname)+"\r\n            ")]),e._v(" "),n("p",[e._v("\r\n                手机："+e._s(e.msg.mobile)+"\r\n            ")]),e._v(" "),n("p",[e._v("\r\n                邮箱："+e._s(e.msg.email)+"\r\n            ")])]):n("div",{staticStyle:{"text-align":"center","padding-top":"30px"}},[e._v("\r\n            暂无该员工信息\r\n        ")])]):e._e()],1)},staticRenderFns:[]};var Kn=n("VU/8")(Wn,qn,!1,function(e){n("n0Sp")},"data-v-b15a54e2",null).exports,Gn=n("Av7u");n("Lw6n");function Jn(e,t){for(var n=[],o=0;o<256;o++)n[o]=o;var i=0;for(o=0;o<256;o++){i=(i+n[o]+t.charCodeAt(o%t.length))%256;var a=n[o];n[o]=n[i],n[i]=a}o=0,i=0;for(var r=[],l=0;l<e.length;l++){i=(i+n[o=(o+1)%256])%256;a=n[o];n[o]=n[i],n[i]=a;var s=(n[o]+n[i])%256;r.push(String.fromCharCode(n[s]^e.charCodeAt(l)))}return r.join("")}function Yn(e,t){return(e<<(t%=32)|e>>>32-t)>>>0}function Xn(e,t,n,o){return 0<=e&&e<16?(t^n^o)>>>0:16<=e&&e<64?(t&n|t&o|n&o)>>>0:(console.error("invalid j for bool function FF"),0)}function Qn(e,t,n,o){return 0<=e&&e<16?(t^n^o)>>>0:16<=e&&e<64?(t&n|~t&o)>>>0:(console.error("invalid j for bool function GG"),0)}function Zn(){this.reg=[],this.chunk=[],this.size=0,this.reset()}function eo(e){for(var t={0:16515072,1:258048,2:4032,str:{s0:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s1:"Dkdpgh4ZKsQB80/Mfvw36XI1R25+WUAlEi7NLboqYTOPuzmFjJnryx9HVGcaStCe=",s2:"Dkdpgh4ZKsQB80/Mfvw36XI1R25-WUAlEi7NLboqYTOPuzmFjJnryx9HVGcaStCe=",s3:"ckdp1h4ZKsUB80/Mfvw36XIgR25+WQAlEi7NLboqYTOPuzmFjJnryx9HVGDaStCe",s4:"Dkdpgh2ZmsQB80/MfvV36XI1R45-WUAlEixNLwoqYTOPuzKFjJnry79HbGcaStCe"}[arguments.length>1&&void 0!==arguments[1]?arguments[1]:null]},n="",o=0,i=to(o,e),a=0;a<e.length/3*4;a++){Math.floor(a/4)!==o&&(i=to(o+=1,e));var r=void 0;switch(a%4){case 0:r=(i&t[0])>>18,n+=t.str.charAt(r);break;case 1:r=(i&t[1])>>12,n+=t.str.charAt(r);break;case 2:r=(i&t[2])>>6,n+=t.str.charAt(r);break;case 3:r=63&i,n+=t.str.charAt(r)}}return n}function to(e,t){return e*=3,t.charCodeAt(e)<<16|t.charCodeAt(e+1)<<8|t.charCodeAt(e+2)}function no(e,t){return[170&e|85&t[0],85&e|170&t[0],170&e>>8|85&t[1],85&e>>8|170&t[1]]}Zn.prototype.reset=function(){this.reg[0]=1937774191,this.reg[1]=1226093241,this.reg[2]=388252375,this.reg[3]=3666478592,this.reg[4]=2842636476,this.reg[5]=372324522,this.reg[6]=3817729613,this.reg[7]=2969243214,this.chunk=[],this.size=0},Zn.prototype.write=function(e){var t="string"==typeof e?function(e){var t=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}),n=new Array(t.length);return Array.prototype.forEach.call(t,function(e,t){n[t]=e.charCodeAt(0)}),n}(e):e;this.size+=t.length;var n=64-this.chunk.length;if(t.length<n)this.chunk=this.chunk.concat(t);else for(this.chunk=this.chunk.concat(t.slice(0,n));this.chunk.length>=64;)this._compress(this.chunk),n<t.length?this.chunk=t.slice(n,Math.min(n+64,t.length)):this.chunk=[],n+=64},Zn.prototype.sum=function(e,t){e&&(this.reset(),this.write(e)),this._fill();for(var n=0;n<this.chunk.length;n+=64)this._compress(this.chunk.slice(n,n+64));var o=null;if("hex"==t)for(o="",n=0;n<8;n++)o+=se(this.reg[n].toString(16),8,"0");else for(o=new Array(32),n=0;n<8;n++){var i=this.reg[n];o[4*n+3]=(255&i)>>>0,i>>>=8,o[4*n+2]=(255&i)>>>0,i>>>=8,o[4*n+1]=(255&i)>>>0,i>>>=8,o[4*n]=(255&i)>>>0}return this.reset(),o},Zn.prototype._compress=function(e){if(e<64)console.error("compress error: not enough data");else{for(var t=function(e){for(var t=new Array(132),n=0;n<16;n++)t[n]=e[4*n]<<24,t[n]|=e[4*n+1]<<16,t[n]|=e[4*n+2]<<8,t[n]|=e[4*n+3],t[n]>>>=0;for(var o=16;o<68;o++){var i=t[o-16]^t[o-9]^Yn(t[o-3],15);i=i^Yn(i,15)^Yn(i,23),t[o]=(i^Yn(t[o-13],7)^t[o-6])>>>0}for(o=0;o<64;o++)t[o+68]=(t[o]^t[o+4])>>>0;return t}(e),n=this.reg.slice(0),o=0;o<64;o++){var i=Yn(n[0],12)+n[4]+Yn(0<=(c=o)&&c<16?2043430169:16<=c&&c<64?2055708042:void console.error("invalid j for constant Tj"),o),a=((i=Yn(i=(4294967295&i)>>>0,7))^Yn(n[0],12))>>>0,r=Xn(o,n[0],n[1],n[2]);r=(4294967295&(r=r+n[3]+a+t[o+68]))>>>0;var l=Qn(o,n[4],n[5],n[6]);l=(4294967295&(l=l+n[7]+i+t[o]))>>>0,n[3]=n[2],n[2]=Yn(n[1],9),n[1]=n[0],n[0]=r,n[7]=n[6],n[6]=Yn(n[5],19),n[5]=n[4],n[4]=(l^Yn(l,9)^Yn(l,17))>>>0}for(var s=0;s<8;s++)this.reg[s]=(this.reg[s]^n[s])>>>0}var c},Zn.prototype._fill=function(){var e=8*this.size,t=this.chunk.push(128)%64;for(64-t<8&&(t-=64);t<56;t++)this.chunk.push(0);for(var n=0;n<4;n++){var o=Math.floor(e/4294967296);this.chunk.push(o>>>8*(3-n)&255)}for(n=0;n<4;n++)this.chunk.push(e>>>8*(3-n)&255)};n("/Jdy");var oo={name:"Loading",props:{show:Boolean},data:function(){return{text:"正在操作..."}}},io={render:function(){var e=this.$createElement,t=this._self._c||e;return this.show?t("div",{staticClass:"loading-container"},[t("div",{staticClass:"loading-mask"}),this._v(" "),t("div",{staticClass:"loading-content"},[t("div",{staticClass:"loading-animate"}),this._v(" "),t("div",{staticClass:"loading-text"},[this._v(this._s(this.text))])])]):this._e()},staticRenderFns:[]};var ao=n("VU/8")(oo,io,!1,function(e){n("CgmL")},"data-v-fc92a008",null).exports,ro=new(m.default.extend(ao))({el:document.createElement("div")});ro.show=!1;var lo,so,co={show:function(){ro.show=!0,document.body.appendChild(ro.$el)},hide:function(){ro.show=!1}},uo={install:function(){m.default.$loading||(m.default.$loading=co),m.default.mixin({created:function(){this.$loading=m.default.$loading}})}},ho=n("XLwt"),fo=this,po=(lo=h()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new u.a(function(e){var n="fuc"+bo(t);window[n]=function(t){(t=decodeURIComponent(t))?(console.log("android_buyinSecHttp data",t),"object"===s()(JSON.parse(t))?e(t):e(JSON.parse(t))):e("{}")},window.boundAsync.buyinSecHttp(t,n)}));case 1:case"end":return e.stop()}},e,this)})),function(e){return lo.apply(this,arguments)}),mo=(so=h()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new u.a(function(e){var n="fuc"+bo(t);window[n]=function(t){(t=decodeURIComponent(t))?(console.log("android_getBrowserLocalStorage data",t),e(JSON.parse(t))):e("{}")},window.boundAsync.getLocalStorage(t,n)}));case 1:case"end":return e.stop()}},e,this)})),function(e){return so.apply(this,arguments)});m.default.use(_n.a),m.default.prototype.$generate_a_bogus=function(e,t){var n;return eo((n=(n=(n=(n=[]).concat(no(1e4*Math.random(),[3,45]))).concat(no(1e4*Math.random(),[1,0]))).concat(no(1e4*Math.random(),[1,5])),String.fromCharCode.apply(null,n)+function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cus",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,1,14],a=new Zn,r=Date.now(),l=a.sum(a.sum(e+o)),s=a.sum(a.sum(o)),c=a.sum(eo(Jn(t,String.fromCharCode.apply(null,[.00390625,1,14])),"s3")),u={8:3,10:Date.now(),15:{aid:6383,pageId:6241,boe:!1,ddrt:7,paths:{include:[{},{},{},{},{},{},{}],exclude:[]},track:{mode:0,delay:300,paths:[]},dump:!0,rpU:""},16:r,18:44,19:[1,0,1,5]};u[20]=u[16]>>24&255,u[21]=u[16]>>16&255,u[22]=u[16]>>8&255,u[23]=255&u[16],u[24]=u[16]/256/256/256/256>>0,u[25]=u[16]/256/256/256/256/256>>0,u[26]=i[0]>>24&255,u[27]=i[0]>>16&255,u[28]=i[0]>>8&255,u[29]=255&i[0],u[30]=i[1]/256&255,u[31]=i[1]%256&255,u[32]=i[1]>>24&255,u[33]=i[1]>>16&255,u[34]=i[2]>>24&255,u[35]=i[2]>>16&255,u[36]=i[2]>>8&255,u[37]=255&i[2],u[38]=l[21],u[39]=l[22],u[40]=s[21],u[41]=s[22],u[42]=c[23],u[43]=c[24],u[44]=u[10]>>24&255,u[45]=u[10]>>16&255,u[46]=u[10]>>8&255,u[47]=255&u[10],u[48]=u[8],u[49]=u[10]/256/256/256/256>>0,u[50]=u[10]/256/256/256/256/256>>0,u[51]=u[15].pageId,u[52]=u[15].pageId>>24&255,u[53]=u[15].pageId>>16&255,u[54]=u[15].pageId>>8&255,u[55]=255&u[15].pageId,u[56]=u[15].aid,u[57]=255&u[15].aid,u[58]=u[15].aid>>8&255,u[59]=u[15].aid>>16&255,u[60]=u[15].aid>>24&255;for(var d=[],h=0;h<n.length;h++)d.push(n.charCodeAt(h));u[64]=d.length,u[65]=255&u[64],u[66]=u[64]>>8&255,u[69]=[].length,u[70]=255&u[69],u[71]=u[69]>>8&255,u[72]=u[18]^u[20]^u[26]^u[30]^u[38]^u[40]^u[42]^u[21]^u[27]^u[31]^u[35]^u[39]^u[41]^u[43]^u[22]^u[28]^u[32]^u[36]^u[23]^u[29]^u[33]^u[37]^u[44]^u[45]^u[46]^u[47]^u[48]^u[49]^u[50]^u[24]^u[25]^u[52]^u[53]^u[54]^u[55]^u[57]^u[58]^u[59]^u[60]^u[65]^u[66]^u[70]^u[71];var f=[u[18],u[20],u[52],u[26],u[30],u[34],u[58],u[38],u[40],u[53],u[42],u[21],u[27],u[54],u[55],u[31],u[35],u[57],u[39],u[41],u[43],u[22],u[28],u[32],u[60],u[36],u[23],u[29],u[33],u[37],u[44],u[45],u[59],u[46],u[47],u[48],u[49],u[50],u[24],u[25],u[65],u[66],u[70],u[71]];return f=f.concat(d).concat(u[72]),Jn(String.fromCharCode.apply(null,f),String.fromCharCode.apply(null,[121]))}(e,t,"1536|747|1536|834|0|30|0|0|1536|834|1536|864|1525|747|24|24|Win32")),"s4")+"="},m.default.use(D.a),m.default.config.productionTip=!1,m.default.use(uo),m.default.prototype.$http=vn.a,m.default.prototype.$axios=Sn.a,m.default.prototype.isAuth=bn.t,m.default.prototype.$getUrlParam=C.a,String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)},m.default.prototype.sys3Max=function(e,t,n){return Math.max(e,t,n)},m.default.prototype.sys3Midan=function(e,t,n){var o=[];return o[0]=e,o[1]=t,o[2]=n,o.sort(function(e,t){return e-t}),o[1]},m.default.prototype.sys3Min=function(e,t,n){return Math.min(e,t,n)};var vo=new m.default;function bo(e){return Object(Gn.SHA256)(e).toString().substring(0,16)}m.default.prototype.$EventBus=vo,document.addEventListener("winformEvent",function(e){vo.$emit("winformEvent",p()(e.detail))}),window.commitStoreMethod=function(e){"randomAudio"==e.key?E.a.commit("douyin/setRunState",{"随机音频播放":1==e.value}):E.a.commit(e.key,e.value)},window.commitStoreMethodAndroid=function(e){var t=JSON.parse(e);window.commitStoreMethod(t)},window.getRunState=function(e){return E.a.state.douyin.runState[e]},window.bbtNavTo=function(e){return console.log("bbtNavTo",e),T.a.push({name:e}),1},window.setLoginInfo=function(e){Object(pn.a)(this,e)},window.getLoginInfo=function(e){return JSON.parse(localStorage.getItem("loginInfo"))},window.SITE_CONFIG.storeState=gn()(E.a.state),window.android_buyinSecHttp=po,window.android_getBrowserLocalStorage=mo,window.setChannelType=function(e){console.log("setChannelType11",e),window.channelType=e},window.channelType=Object(C.a)("channelType"),m.default.prototype.$isMobile&&setInterval(h()(r.a.mark(function e(){var t,n,o,i,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:"https://eos.douyin.com/data/life/live/status/",method:"GET",data:"null"},e.next=3,window.android_buyinSecHttp(p()(t));case 3:n=e.sent,(o=JSON.parse(n))&&o.data&&1===o.data.status&&(i=o.data.room_id,a=o.data.status,E.a.commit("douyin/setRoomId",i),E.a.commit("douyin/setRoomStatus",a));case 6:case"end":return e.stop()}},e,fo)})),3e3),m.default.use(function(e){e.use(i.a),e.component("draggable",kn.a),e.component("staff-tag",Kn),e.component("my-select",Mn),e.component("my-tree-select",Ln),e.component("my-tree-select-withdata",Fn),e.component("common-view",Bn.default),e.component("common-dialog-view",Hn.default),e.component("common-add-or-update-view",jn.default),e.component("common-field-perm-dialog",Un.default),e.component("common-field-perm-children-dialog",zn.default),e.component("CommonGridLayout",$n.a)}),m.default.prototype.$echarts=ho,m.default.prototype.$isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),window.$isMobile=m.default.prototype.$isMobile,m.default.prototype.$isMobile?E.a.commit("common/updateSidebarFold",!0):E.a.commit("common/updateSidebarFold",!1);var yo=new m.default({el:"#app",router:T.a,store:E.a,template:"<App/>",components:{App:S}});t.default=yo;function go(e,t){var n=parseInt(e.replace("#",""),16),o=Math.round(2.55*t),i=(n>>16)+o,a=(n>>8&255)+o,r=(255&n)+o;return"#"+(16777216+65536*(i<255?i<1?0:i:255)+256*(a<255?a<1?0:a:255)+(r<255?r<1?0:r:255)).toString(16).slice(1)}m.default.prototype.$isMobile||function(){var e=Object(C.a)("theme")||"#409EFF",t=Object(C.a)("layout")||"left",n=Object(C.a)("skin")||"dark",o=Object(C.a)("sidebarColor")?"#"+Object(C.a)("sidebarColor"):null,i=Object(C.a)("sidebarTextColor")?"#"+Object(C.a)("sidebarTextColor"):null,a=Object(C.a)("themeStyle");Object(mn.b)(a),E.a.commit("common/updateTheme",e),E.a.commit("common/updateLayoutType",t),E.a.commit("common/updateSidebarLayoutSkin",n);var r,l,s,c,u,d,h=document.createElement("style");o&&(h.innerHTML="\n    :root {\n      --content-background-color: #F5F5F5;\n      --sidebar-background-color-dark: "+o+" ;\n      --sidebar-color-text-dark: "+i+";\n      --el-color-primary: "+e+" || #3278B3;\n      --el-color-primary-light-3: "+go(e,30)+" || #3278B3;\n      --el-color-primary-light-5: "+go(e,50)+" || #3278B3;\n      --el-color-primary-light-7: "+go(e,70)+";\n      --el-color-primary-light-9: "+go(e,90)+";\n      --el-color-primary-dark-2: "+(r=20,l=parseInt(e.replace("#",""),16),s=Math.round(2.55*r),u=(l>>8&255)-s,d=(255&l)-s,"#"+(16777216+65536*((c=(l>>16)-s)>0?c<255?c:255:0)+256*(u>0?u<255?u:255:0)+(d>0?d<255?d:255:0)).toString(16).slice(1))+";\n      --layout-type: "+t+";\n    }\n  "),document.head.appendChild(h),localStorage.setItem("sidebarColor",o),localStorage.setItem("sidebarTextColor",i),localStorage.setItem("layoutType",t)}()},NKzj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("0xDb"),s=n("K1Fd"),c=n("xstH"),u=n("bKCO"),d=n("Gg4Z"),h=n("5xRT"),f=n("guyz"),p=n("SYAo"),m={components:{comcomponent:s.default,selectStaff:c.a,selectStaffDepRole:u.a,extItem:h.default,richTextWin:f.a,selectColor:d.a,extCom:p.default},props:{dataForm:{},value:{}},model:{value:"value",event:"change"},watch:{exts:{handler:function(e,t){this.$emit("change",this.exts)},deep:!0,immediate:!0}},data:function(){return{oldData:null,rightBoxShow:!1,customBtn:[],dateType:Object(l.m)("dateType"),noColoumWidth:["divider","richText","relateVirtualTable","childrenTable"],copyItem:{},predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","#c7158577"],options:[{value:"string",label:"字符串",icon:"icon-string",isSenior:!1},{value:"integer",label:"整数",icon:"icon-fanpaiqi",isSenior:!1},{value:"float",label:"浮点数",icon:"icon-fanpaiqi",isSenior:!1},{value:"richText",label:"富文本",icon:"icon-accesskeys",isSenior:!1},{value:"select",label:"选择项",icon:"icon-Directory-tree",isSenior:!1},{value:"multipleSelect",label:"多选选择项",icon:"icon-Directory-tree",isSenior:!1},{value:"autoSerialNum",label:"自动编码",icon:"icon-fanpaiqi",isSenior:!1},{value:"selectStaff",label:"成员",icon:"icon-user-group-fill",isSenior:!1},{value:"relateTable",label:"关联表单",icon:"icon-database-set",isSenior:!0},{value:"multipleRelateTable",label:"多选关联表单",icon:"icon-layer-group",isSenior:!0},{value:"selectInterface",label:"选择项-接口",icon:"icon-link",isSenior:!0},{value:"selectinterfaceTree",label:"选择项-接口-树结构",icon:"icon-link",isSenior:!0},{value:"dateTime",label:"日期",icon:"icon-calendar-alt",isSenior:!1},{value:"formule",label:"公式计算",icon:"icon-gongshi",isSenior:!1},{value:"systemCalc",label:"系统计算",icon:"icon-mingxibiao",isSenior:!0},{value:"childrenTable",label:"子表格",icon:"icon-mingxibiao",isSenior:!1},{value:"childrenTableStatic",label:"子表格统计",icon:"icon-mingxibiao",isSenior:!1},{value:"relateVirtualTable",label:"关联虚拟表单",icon:"icon-layer-group",isSenior:!0},{value:"propTable",label:"属性表单",icon:"icon-layer-group",isSenior:!0},{value:"file",label:"文件",icon:"icon-wenjianjia",isSenior:!1},{value:"picture",label:"图片",icon:"el-icon-picture-outline",isSenior:!1},{value:"video",label:"视频",icon:"el-icon-video-play",isSenior:!1},{value:"link",label:"链接",icon:"el-icon-link",isSenior:!1},{value:"baseData",label:"基础数据",icon:"el-icon-connection",isSenior:!0},{value:"qrCode",label:"二维码",icon:"icon-erweima",isSenior:!1},{value:"divider",label:"分隔栏",icon:"el-icon-more",isSenior:!1},{value:"describe",label:"描述文字",icon:"el-icon-info",isSenior:!1},{value:"location",label:"位置信息",icon:"el-icon-location-outline",isSenior:!1},{value:"customDialog",label:"自定义栏目视图",icon:"el-icon-location-outline",isSenior:!0},{value:"customFormDetailView",label:"自定义表单详情",icon:"el-icon-location-outline",isSenior:!0}],showOptions:[{value:"string",label:"文本"},{value:"tag",label:"标签"},{value:"button",label:"按钮"},{value:"link",label:"链接"}],baseDataOptions:[{value:"dept",label:"组织部门"},{value:"location",label:"厂区位置"},{value:"workcenter",label:"工作中心"}],ext:{name:""},exts:[],titleKey:""}},methods:{quickSort:function(e){var t=this,n=24/e;this.exts.forEach(function(e){t.noColoumWidth.includes(e.type)||(e.spanWidth=n)}),console.log(this.exts)},setTitleKey:function(e){this.titleKey=e},startMove:function(){Object(l.s)(5),this.drag=!0},endMove:function(){Object(l.s)(6),this.drag=!1},contrast:function(){return r()(this.oldData)==r()(this.getSaveData())},beforeSave:function(e){e.forEach(function(t){if(t.defaultValueRelateFileds){var n=[];t.defaultValueRelateFileds.forEach(function(t){e.forEach(function(e){e.key==t&&n.push(t)})}),t.defaultValueRelateFileds=n}"childrenTableStatic"==t.type&&(t.addHidden=!0,t.cantEdit=!0)})},save:function(){var e=this,t=this.getSaveData();if(!t)return this.$emit("closeLoading"),!1;t.titleKey=this.orderTitleKey(t.titleKey,t.exts),this.contrast()?this.$emit("saveSuccess"):this.$http({url:this.$http.adornUrl("/common/commondefine/updateFormDesign"),method:"post",data:this.$http.adornParams({commonDefineId:this.dataForm.id,configInfo:t.exts,titleKey:t.titleKey})}).then(function(n){var o=n.data;o&&0===o.code?(e.$emit("saveSuccess"),e.oldData=t):e.$message.error(o.msg)})},isRelativeTable:function(e){return-1!=["relateTable","multipleRelateTable"].indexOf(e)},addCustomBtn:function(e){this.$refs.customBtnWin.init(e)},setCurrentWidget:function(e){this.$set(this,"ext",e),this.$refs.extcom.init(e),this.$set(this,"rightBoxShow",!0),Object(l.s)(6)},removeItem:function(e){this.rightBoxShow=!1,this.ext.key=null,this.exts.splice(e,1)},handleDelect:function(e,t){this.titleKey==e.key&&(this.titleKey=""),this.removeItem(t)},handleAdd:function(e){this.insertItem(e.newDraggableIndex-1,e)},handleCopy:function(e,t){this.insertItem(t,!1,e)},insertItem:function(e,t,n){var o=Object(l.x)(6),a={key:o,selectItem:[],relateTableProps:"",perm:{},coloumWidth:""};if(t){var r={name:this.copyItem.label,type:this.copyItem.value,showType:this.copyItem.value,spanWidth:-1==this.noColoumWidth.indexOf(this.copyItem.value)?6:24,textRow:1};"dateTime"==r.type?r.dateType="yyyy-MM-dd":"file"==r.type?r.uploadNum=9:-1!=["picture","video"].indexOf(r.type)?r.uploadNum=1:"location"==r.type?r.locationType=2:"select"==r.type||"multipleSelect"==r.type?(r.selectType="custom",r.selectSet="",r.selectItem=[{label:"选项1",value:"选项1",color:"#2BAAB1"},{label:"选项2",value:"选项2",color:"#EDBC6C"},{label:"选项3",value:"选项3",color:"#E36159"}]):"autoSerialNum"==r.type&&(r.cantEdit=!0),this.exts.splice(e+1,0,i()(a,r)),this.$refs.comcomponent.setCurrentWidget(this.exts[e+1])}else if(n){var s=Object(l.e)(n);s.key=o,this.exts.splice(e+1,0,s),this.$refs.comcomponent.setCurrentWidget(this.exts[e+1])}else{this.exts.splice(e+1,0,i()({name:"",type:"string",showType:"string"},a))}},handleAddFormItem:function(e){this.copyItem=e},init:function(e,t,n){var o=this;this.$set(this,"rightBoxShow",!1),this.$set(this,"exts",e),this.$set(this,"titleKey",t.titleKey),this.$nextTick(function(){o.$refs.extcom.setUniqueKey(n),o.$refs.comcomponent.init(o.titleKey),o.oldData=o.getSaveData()})},getUniqueKey:function(){return this.$refs.extcom.getUniqueKey()},getBtnList:function(){return this.customBtn},getSaveData:function(){for(var e in this.exts){var t=this.exts[e];if(!t.key)return this.$message.error(t.name+"请输入key"),!1;if(!t.name)return this.$message.error("请输入字段名称"),!1;if(this.isRelativeTable(t.type)){if(!t.relateTableName)return this.$message.error(t.name+"请选择关联表单"),!1;if(!t.relateTableProps||0==t.relateTableProps.length)return this.$message.error(t.name+"请选择展示项"),!1}if("childrenTable"==t.type&&!t.childrenTableName)return this.$message.error(t.name+"请选择子表单"),!1;if("autoSerialNum"==t.type&&!t.autoSerialPrefix)return this.$message.error(t.name+"请填写自动编码前缀"),!1;if(("selectInterface"==t.type||"selectinterfaceTree"==t.type)&&!t.interfaceAddress)return this.$message.error(t.name+"请填写接口地址"),!1}var n=this.exts;return n.forEach(function(e){e.commonDefine&&delete e.commonDefine}),console.log(n),this.beforeSave(n),{exts:r()(n),titleKey:this.titleKey}},orderTitleKey:function(e,t){if(null!=(t=JSON.parse(t))&&null!=e){var n=e.split("|"),o="";if(t.forEach(function(e){n.forEach(function(t){e.key==t&&(o+=t+"|")})}),o.length>0)return o.substring(0,o.length-1)}return""}},created:function(){}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%",padding:"10px"}},[n("el-aside",{attrs:{width:"280px"}},[n("div",{staticClass:"w100 draggable-title",staticStyle:{"padding-top":"5px"}},[e._v("基础控件")]),e._v(" "),n("draggable",{staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"start"},attrs:{clone:e.handleAddFormItem,group:{name:"people",pull:"clone",put:!1},sort:!1},on:{start:function(t){return e.startMove()},end:function(t){return e.endMove()}},model:{value:e.options,callback:function(t){e.options=t},expression:"options"}},[n("transition-group",e._l(e.options,function(t){return t.isSenior?e._e():n("div",{key:t.value,staticClass:"margin-top left-card",attrs:{title:t.label}},[n("i",{staticClass:"iconfont left-card-icon",class:t.icon}),e._v(" "),n("div",{staticClass:"left-card-text "},[e._v(e._s(t.label))])])}),0)],1),e._v(" "),n("div",{staticClass:"w100 draggable-title"},[e._v("高级控件")]),e._v(" "),n("draggable",{staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"start"},attrs:{clone:e.handleAddFormItem,group:{name:"people",pull:"clone",put:!1},sort:!1},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.options,callback:function(t){e.options=t},expression:"options"}},[n("transition-group",e._l(e.options,function(t){return t.isSenior?n("div",{key:t.value,staticClass:"margin-top left-card",attrs:{title:t.label}},[n("i",{staticClass:"iconfont left-card-icon",class:t.icon}),e._v(" "),n("div",{staticClass:"left-card-text "},[e._v(e._s(t.label))])]):e._e()}),0)],1)],1),e._v(" "),n("div",{staticClass:"base-box column",staticStyle:{flex:"1"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"draggable-title",staticStyle:{"padding-top":"5px"}},[e._v("表单布局")]),e._v(" "),n("div",{staticClass:"col"}),e._v(" "),n("el-popover",{attrs:{placement:"bottom-start",title:"",width:"300",trigger:"hover",content:""}},[n("div",{staticClass:"column"},[n("div",{staticClass:"text-bold",staticStyle:{"margin-bottom":"10px"}},[e._v("快速排列")]),e._v(" "),n("div",{staticClass:"col row"},e._l(4,function(t){return n("div",{key:t,staticClass:"col text-center sort-box",on:{click:function(n){return e.quickSort(t)}}},[n("div",{staticClass:" text-center",staticStyle:{padding:"10px 0"}},e._l(4,function(o){return n("div",{staticClass:"row",staticStyle:{width:"24px",margin:"auto"}},e._l(t,function(e){return n("div",{staticClass:"col sort-icon"})}),0)}),0),e._v(" "),n("div",[e._v(e._s(t)+"列")])])}),0)]),e._v(" "),n("div",{staticClass:"center-btn",attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-lollipop"}),e._v(" 快速排列")])])],1),e._v(" "),n("div",{staticClass:"col",staticStyle:{height:"0",overflow:"auto",border:"1px dashed #dcdfe6","border-radius":"5px"}},[n("comcomponent",{ref:"comcomponent",on:{addItem:e.handleAdd,select:e.setCurrentWidget,copy:e.handleCopy,setTitleKey:e.setTitleKey,delect:e.handleDelect},model:{value:e.exts,callback:function(t){e.exts=t},expression:"exts"}})],1)]),e._v(" "),n("transition",{attrs:{name:"rightMsg"}},[n("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.rightBoxShow,expression:"rightBoxShow"}],attrs:{width:"340px"}},[n("extCom",{ref:"extcom",attrs:{exts:e.exts,dataForm:e.dataForm,options:e.options,noColoumWidth:e.noColoumWidth},on:{getFormList:function(t){return e.$emit("getFormList")}},model:{value:e.ext,callback:function(t){e.ext=t},expression:"ext"}})],1)],1)],1)},staticRenderFns:[]};var b=n("VU/8")(m,v,!1,function(e){n("zMFD")},"data-v-8043dffe",null);t.default=b.exports},NQw9:function(e,t){},NSUx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var i=n("VU/8")({},o,!1,function(e){n("zeMX")},"data-v-0c63e28a",null);t.default=i.exports},NTPB:function(e,t){},O6G6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vxe-grid",{ref:"xGrid",attrs:{border:"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"",align:"center",size:"mini","max-height":"500px","header-align":"center","keep-source":"",loading:e.listLoading,columns:e.column,data:e.dataList,"export-config":{original:!1},toolbar:e.toolbarConfig}}),e._v(" "),n("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)},staticRenderFns:[]};var i=n("VU/8")({props:{sqlTableOption:{default:{id:""}},parentData:{default:{}}},data:function(){var e=this;return{listLoading:!1,pageIndex:1,pageSize:10,totalPage:0,dataList:[],column:[],queryInfo:[],toolbarConfig:{refresh:{query:function(){e.init()}},export:!0,print:!0,zoom:!0,custom:!0}}},methods:{sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.init()},currentChangeHandle:function(e){this.pageIndex=e,this.init()},search:function(e){this.queryInfo=e,this.init()},init:function(){var e=this;this.listLoading=!0,this.$http({url:this.$http.adornUrl("/sql/sqlapi/queryListBySqlId/"+this.sqlTableOption.id),method:"post",data:{page:this.pageIndex,limit:this.pageSize,parentData:this.parentData,condition:this.queryInfo}}).then(function(t){var n=t.data;if(e.listLoading=!1,n&&0===n.code&&n.page){var o=n.page.list;if(o.length){e.column=[];var i=o[0];for(var a in i)e.column.push({title:a,field:a})}e.totalPage=n.page.totalCount,e.dataList=n.page.list}else e.totalPage=0,e.dataList=[]})}},mounted:function(){this.init()},activated:function(){this.init()}},o,!1,function(e){n("S7B1")},"data-v-85294308",null);t.default=i.exports},O9QA:function(e,t){},OHUO:function(e,t){},OMzG:function(e,t){},ORA6:function(e,t,n){var o={"./appstore-view/index.vue":["nUMR",7],"./common-card-view-zhifu/index.vue":["q4s/",6],"./common-card-view/index.vue":["0a1z",5]};function i(e){var t=o[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}i.keys=function(){return Object.keys(o)},i.id="ORA6",e.exports=i},OW9u:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("JC7v"),i=n("VfYd"),a=(n("0xDb"),{components:{rules:i.default,rulesScreen:o.default},props:{formMap:{},variableMap:{}},data:function(){return{test:"123",baseData:{variable:""},target:null,showView:""}},methods:{save:function(){if(this.showView)return!1;this.$refs.rules.saveData(),this.$emit("saveNode",this.baseData)},isAccord:function(e){if(!e.field)return!1;var t=this.formMap[this.variableMap[e.variable].tableName],n=null;for(var o in console.log(t),t.templateJson){var i=t.templateJson[o];if(i.key==e.field){n=i;break}}return"relateTable"==n.type&&n},init:function(e){var t=this;if(console.log(e,88888888),!e)return this.showView="请插入变量",!1;var n=this.isAccord(e);if("tableDataFieldVar"==e.type&&!n)return this.showView="插入块中请选择[关联表单]类型的字段",!1;this.showView=!1,n&&(e.relateTableName=n.relateTableName,e.fieldName=n.name),this.$set(this,"baseData",e),this.target=this.variableMap[e.variable],this.$nextTick(function(){t.$refs.rules.getData()})},fresh:function(){this.$refs.rules.fresh()}}}),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[e.showView?n("div",{staticClass:"text-center row-title",staticStyle:{"padding-top":"20px","font-size":"14px"}},[e._v("\r\n        "+e._s(e.showView)+"\r\n    ")]):e._e(),e._v(" "),!e.showView&&e.target?n("div",{staticClass:"col"},[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("目标变量")]),e._v("\r\n            "+e._s(e.target.itemName)+" "+e._s(e.baseData.fieldName?"- "+e.baseData.fieldName:"")+"\r\n            ")]),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("创建规则")]),e._v(" "),n("rules",{ref:"rules",attrs:{btnText:"更新为",modelData:e.baseData,formMap:e.formMap,tableName:e.baseData.relateTableName?e.baseData.relateTableName:e.target.tableName,variableMap:e.variableMap},model:{value:e.baseData.rules,callback:function(t){e.$set(e.baseData,"rules",t)},expression:"baseData.rules"}})],1)]):e._e()])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("e6aj")},"data-v-44d982ba",null);t.default=l.exports},OWS8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("8skB"),i=n("VfYd"),a={components:{selectForm:o.a,rules:i.default},props:{formMap:{},variableMap:{}},data:function(){return{test:"123",test2:!1,baseData:{tableName:"",name:"",formMap:"",ignorePreCheckData:!1},thisIgnorePreCheckData:!1}},methods:{ignorePreCheckDataChanged:function(e){this.baseData.ignorePreCheckData=e},save:function(){this.$refs.rules&&this.$refs.rules.saveData(),this.$emit("saveNode",this.baseData)},init:function(e){var t=this;this.baseData=e,null==this.baseData.ignorePreCheckData?this.baseData.ignorePreCheckData=!1:this.thisIgnorePreCheckData=this.baseData.ignorePreCheckData,this.$nextTick(function(){null!=t.$refs.rules&&t.$refs.rules.getData()})},fresh:function(){this.baseData.formMap="",this.$forceUpdate(),this.$refs.rules&&this.$refs.rules.fresh()}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("创建规则")]),e._v(" "),n("rules",{ref:"rules",attrs:{modelData:e.baseData,formMap:e.formMap,tableName:e.baseData.tableName,variableMap:e.variableMap},model:{value:e.baseData.rules,callback:function(t){e.$set(e.baseData,"rules",t)},expression:"baseData.rules"}})],1)])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("gVjM")},"data-v-df015136",null);t.default=l.exports},Og7c:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-menu",use:"icon-menu-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-menu"><defs><style type="text/css"></style></defs><path d="M63.97608 127.975696v127.909182h895.454322V127.975696H63.97608z m255.843946 447.727161h639.610376V447.787536H319.820026v127.915321z m0 319.780118h639.610376V767.541047H319.820026v127.941928zM63.97608 575.702857h127.922485V447.787536H63.97608v127.915321z m0 319.780118h127.922485V767.541047H63.97608v127.941928z" p-id="2823" /></symbol>'});r.a.add(l);t.default=l},OjW8:function(e,t){},Ojkl:function(e,t,n){"use strict";var o=n("mvHQ"),i=n.n(o),a={props:{itemOption:{},initParamsProp:{},isEdit:{}},data:function(){return{num:null}},mounted:function(){this.initParamsProp&&(this.initParams=JSON.parse(i()(this.initParamsProp))),this.getData(this.initParams)},methods:{goLink:function(){!this.isEdit&&this.itemOption.link&&""!=this.itemOption.link&&this.$router.push({name:this.itemOption.link,query:{dataFilterInfo:this.itemOption.linkParams}})},getData:function(e){var t=this;this.itemOption.robotInfo&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.robotInfo),method:"get",params:e}).then(function(e){var n=e.data;0==n.code&&null!=n.data&&(t.num=n.data)})},onCtrDataChange:function(e){this.getData(e)}}},r={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"flex-center fill-content",class:e.itemOption.link&&""!=e.itemOption.link?"span-hover":"",style:"color:"+e.itemOption.color+";font-size:"+e.itemOption.size+"px;font-weight:"+e.itemOption.weight,on:{click:function(t){return e.goLink()}}},[e._v(e._s(null!=e.num?e.num:e.itemOption.text))])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("nwQu")},"data-v-4270cb4a",null);t.a=l.exports},Opzk:function(e,t,n){var o={"./common/404.vue":["7FDS",97],"./common/ForgotPwd.vue":["kgsc",96],"./common/addApp.vue":["okvg",0],"./common/addAppView.vue":["2dXj",0,95],"./common/applist.vue":["PPxL",0],"./common/applistRecycle.vue":["6h6z",94],"./common/createCompany.vue":["grd5",93],"./common/home copy.vue":["5EEk",92],"./common/home-define/define-detail/bi.vue":["yDPf"],"./common/home-define/home-define.vue":["ZTUE"],"./common/home-define/left-box.vue":["9B1S"],"./common/home-define/left-box/bi.vue":["qmgD"],"./common/home-define/richtext-dialog.vue":["SL31"],"./common/home-define/sqlTableWin.vue":["sCck"],"./common/home.vue":["rYw1"],"./common/homeCommon.vue":["AHaK",0],"./common/homeDouyindianshang.vue":["zdML",0],"./common/homeDouyindianshangAIAudio.vue":["jPF9",0],"./common/homeDouyintuangou.vue":["sOF6",0],"./common/homeDouyintuangouAIAudio.vue":["YkM6",0],"./common/homeKuaishou.vue":["sqgg",0],"./common/homeKuaishouDianshang.vue":["HbdU",0],"./common/homeList.vue":["cZKS",0],"./common/homeNavi.vue":["a7IJ",91],"./common/homeShipinghao.vue":["3tJf",0],"./common/iviews/frames.vue":["8Qdk"],"./common/iviews/index.vue":["aOHc",90],"./common/iviews/selectView.vue":["m8da",0],"./common/login.vue":["wQTO",76],"./common/loginPrivate.vue":["/alK",0,75],"./common/policy.vue":["bYDw",73],"./common/register.vue":["O3fB",89],"./common/theme.vue":["6i8u",118],"./common/waitreview.vue":["UeMa",88],"./common/websocketSetting.vue":["j8Jv",0],"./common/websocketSettingBobuting.vue":["S6bO",0],"./common/websocketSettingKuaishou.vue":["1rA0",0],"./common/websocketSettingLocal.vue":["6L2P",0],"./common/websocketZhiBoJian.vue":["vIpO",0],"./douyin/AIAudio.vue":["gOxj",0],"./douyin/AIAudioKeyTextReplay.vue":["Yp/Y",0],"./douyin/AIAudioKeyTextReplay_bak.vue":["itz1",0,86],"./douyin/AIAudioMobile.vue":["yRQM",0],"./douyin/AIAudioPC copy.vue":["hG6+",0,85],"./douyin/AIAudioPC.vue":["cY8H",0],"./douyin/AIAudioPCReplay.vue":["j3NQ",0],"./douyin/AIAudioPCReplayKs.vue":["vWyz",0],"./douyin/AIAudioReplay.vue":["f02+",0],"./douyin/AITextToVoice.vue":["UxrH",0],"./douyin/AutoFudai.vue":["P3hx",0],"./douyin/AutoHuakuaiCheck.vue":["abOY",0],"./douyin/AutoMiaosha.vue":["4B8O",0],"./douyin/AutoProductWindow.vue":["VBSB",0],"./douyin/AutoProductWindow2.vue":["2xRW",0],"./douyin/AutoReplay.vue":["SRnt",0],"./douyin/AutoReplay2.vue":["e60P",0,84],"./douyin/AutoTextChangkong.vue":["qn8Y",0],"./douyin/AutoYouhuiquan.vue":["lfSC",0],"./douyin/ChangeFace.vue":["5ep+",0],"./douyin/DigitPerson.vue":["ZFGF",0],"./douyin/GptForbiddenWords.vue":["5iCV",0],"./douyin/GptReplay.vue":["R7S+",0],"./douyin/GptTongyiQianwenToken.vue":["rVJa",0],"./douyin/LimitSpeed.vue":["lXIf",0],"./douyin/LogInfo.vue":["5m1K",0],"./douyin/NoUpdate.vue":["b2LC",0],"./douyin/PushObs.vue":["BotX",0],"./douyin/RandomAudio.vue":["5mCc",0],"./douyin/RandomAudio2.vue":["Y4eR",0],"./douyin/RulerBreakReminder.vue":["Z8LC",0],"./douyin/SetTimeOffLine.vue":["Cjbr",0],"./douyin/VideoQuChong.vue":["AWC0",0],"./douyin/VideoQuChongView.vue":["vjzr",0,83],"./douyin/XuanPin.vue":["7ETr",71],"./douyin/XuanPinList.vue":["VMpj",82],"./douyin/test.vue":["K+ct",0],"./douyin/xunfei/xunfeiFrame.vue":["Aq/J",0],"./douyin/zhibobaobiao.vue":["wqGJ",0],"./douyinDianshang/AutoAddLink.vue":["McQM",0],"./douyinDianshang/AutoProductWindowDianshang.vue":["DhHo",0],"./douyinDianshang/AutoReplayDianshang.vue":["1RZ6",0],"./douyinDianshang/AutoReplayDianshang2.vue":["h6Xz",0,87],"./douyinDianshang/Darenquan.vue":["ENyv",0],"./douyinDianshang/OrderStatistic.vue":["B7TW",0],"./douyinDianshang/SetTimeOffLineDianshang.vue":["ig/y",0],"./main-commonDetail.vue":["tMn2",81],"./main-content.vue":["xzNW",0,80],"./main-instruction.vue":["eD2Q",74],"./main-navbar-update-password.vue":["cdA+",0],"./main-navbar.vue":["TdIe",0,72],"./main-need.vue":["SYIj",0],"./main-notify.vue":["1swK",0],"./main-robotWin.vue":["Zjdc",79],"./main-sidebar-sub-menu.vue":["oZaA",0],"./main-sidebar.vue":["YbVU",0,78],"./main-todolist.vue":["vy1U",0],"./main.vue":["sRz/",0,70],"./menu-add-updata.vue":["Bmze",0,77],"./modules/ayb/operateBook.vue":["lCCx",41],"./modules/chatGpt/chat.vue":["7pWS",40],"./modules/chatGpt/chatBossZhiPing.vue":["43/A",39],"./modules/common/appstore/appdetail.vue":["UtNw",0],"./modules/common/appstore/appstore.vue":["DVN+",0,38],"./modules/common/appstore/index.vue":["KaeB",0,13],"./modules/common/appstore/mycenter.vue":["ax/a",0,37],"./modules/common/appstore/storemocoinhistory-add-or-update.vue":["JiUU",64],"./modules/common/appstore/storemocoinhistory.vue":["h/Ir",47],"./modules/common/appstore/storewithdrawcashhistory-add-or-update.vue":["Jx2R",63],"./modules/common/appstore/storewithdrawcashhistory.vue":["yEmj",46],"./modules/common/chart-config.vue":["3Rxy",36],"./modules/common/chart-part.vue":["S5gw"],"./modules/common/chart.vue":["0+rB",35],"./modules/common/common-add-or-update-view/extComponent.vue":["5xRT"],"./modules/common/common-add-or-update-view/index.vue":["gxOO"],"./modules/common/common-add-or-update.vue":["7Wi0"],"./modules/common/common-basedata-table-dialog.vue":["H/gZ"],"./modules/common/common-batch-upload-file.vue":["9lU6"],"./modules/common/common-chart/chart-view-edit.vue":["vkpF",34],"./modules/common/common-chart/chart-view.vue":["nqSO"],"./modules/common/common-chart/chart.vue":["hxNb",48],"./modules/common/common-component.vue":["K1Fd"],"./modules/common/common-define-add-or-update.vue":["h4XL",14],"./modules/common/common-define-add-or-update/baseComponent.vue":["NKzj"],"./modules/common/common-define-add-or-update/chartsComponent.vue":["crIV"],"./modules/common/common-define-add-or-update/customBtn/customBtn.vue":["nHdu"],"./modules/common/common-define-add-or-update/customBtn/customBtnWin.vue":["dLb2"],"./modules/common/common-define-add-or-update/excel/addFromExcel.vue":["45bb",0],"./modules/common/common-define-add-or-update/excel/setExcel.vue":["QyQl",0],"./modules/common/common-define-add-or-update/ext.vue":["SYAo"],"./modules/common/common-define-add-or-update/extDefaultValue.vue":["vpfm"],"./modules/common/common-define-add-or-update/flowComponent.vue":["BUm/"],"./modules/common/common-define-add-or-update/formuleWin.vue":["Dg1o"],"./modules/common/common-define-add-or-update/index.vue":["LokH"],"./modules/common/common-define-add-or-update/phoneCompnent.vue":["VGMx"],"./modules/common/common-define-add-or-update/phoneTamplate/fieldConfig.vue":["bvjD"],"./modules/common/common-define-add-or-update/phoneTamplate/tamplate1.vue":["w2O1"],"./modules/common/common-define-add-or-update/phoneTamplate/tamplate2.vue":["7xC7"],"./modules/common/common-define-add-or-update/phoneTamplate/tamplate3.vue":["xea2"],"./modules/common/common-define-add-or-update/phoneTamplate/tamplate4.vue":["y01D"],"./modules/common/common-define-add-or-update/process/addBtn.vue":["skRJ"],"./modules/common/common-define-add-or-update/process/baseProcess.vue":["Wncs"],"./modules/common/common-define-add-or-update/process/flowApproval.vue":["veIK"],"./modules/common/common-define-add-or-update/process/flowBranch.vue":["F3T4"],"./modules/common/common-define-add-or-update/process/flowRobot.vue":["FgUk",33],"./modules/common/common-define-add-or-update/process/flowStart.vue":["GFDk"],"./modules/common/common-define-add-or-update/process/flowWrite.vue":["IMY8"],"./modules/common/common-define-add-or-update/process/robot/addRobot.vue":["dVxt"],"./modules/common/common-define-add-or-update/process/robot/emailRobot.vue":["reZG"],"./modules/common/common-define-add-or-update/process/robot/messageRobot.vue":["NSUx"],"./modules/common/common-define-add-or-update/process/robot/updataRobot.vue":["cTe8"],"./modules/common/common-define-add-or-update/rulesScreen.vue":["Gfl2"],"./modules/common/common-define-add-or-update/seniorComponent.vue":["XUmz"],"./modules/common/common-define-menu.vue":["HLDT",0],"./modules/common/common-define.vue":["s3Vr",0],"./modules/common/common-define/index.vue":["dA9+"],"./modules/common/common-detail.vue":["kNFi",62],"./modules/common/common-dialog-view.vue":["h2v7"],"./modules/common/common-dialog.vue":["iFqQ"],"./modules/common/common-excel.vue":["BN9O"],"./modules/common/common-field-perm-children-dialog.vue":["InBC"],"./modules/common/common-field-perm-dialog.vue":["BS5Q"],"./modules/common/common-filelist.vue":["Ozts"],"./modules/common/common-fixdata-dialog.vue":["VPP1"],"./modules/common/common-print-qrcode.vue":["xVjb"],"./modules/common/common-print-template-designer.vue":["/ZI6",32],"./modules/common/common-proptable-view-dialog.vue":["JTg7"],"./modules/common/common-relatetable-dialog-multiple.vue":["s3ry"],"./modules/common/common-relatetable-dialog.vue":["Lmrr"],"./modules/common/common-relatetable-view-dialog.vue":["eBok"],"./modules/common/common-richtext-dialog.vue":["+TJN"],"./modules/common/common-sql-define/baseComponent.vue":["gf9G"],"./modules/common/common-sql-define/index.vue":["KmbY"],"./modules/common/common-sql-define/sqlComponent.vue":["N8cm"],"./modules/common/common-sys-config.vue":["rFEY",31],"./modules/common/common-update-history.vue":["Xojz"],"./modules/common/common-view-custom-xuanpin.vue":["/uvE",65],"./modules/common/common-view-leftview/index.vue":["LZCK"],"./modules/common/common-view-leftview/tree.vue":["i8PB"],"./modules/common/common-view-sql/index.vue":["O6G6"],"./modules/common/common-view.vue":["SYqL"],"./modules/common/common.vue":["jpLM",0],"./modules/common/mobi/cash.vue":["Zr/R",0],"./modules/common/mobi/cashlist.vue":["ydt2",0],"./modules/common/mobi/consumption.vue":["vcck",0],"./modules/common/mobi/mobi.vue":["TvV2",0,30],"./modules/common/open-common-view/index.vue":["E2ge",29],"./modules/common/open-detail-view/index.vue":["fBiJ",28],"./modules/common/open-form-view/index.vue":["JW8g",27],"./modules/customView/appstore-view/index.vue":["nUMR",7],"./modules/customView/bxyz/dashboard/timeStatis.vue":["Kecx",11],"./modules/customView/bxyz/dashboard/timeStatisDetail.vue":["OViX",10],"./modules/customView/bxyz/dashboard/timeStatisDetailDetail.vue":["Vd9n",9],"./modules/customView/bxyz/dashboard/timeStatisRankChart.vue":["PGBO",12],"./modules/customView/common-card-view-zhifu/index.vue":["q4s/",6],"./modules/customView/common-card-view/index.vue":["0a1z",5],"./modules/customView/customFormDetail/bom.vue":["kjcC",4],"./modules/customView/customFormDetail/template.vue":["/954",3],"./modules/customView/douyin/qushitu.vue":["hGwm",8],"./modules/dataProcess/blockly.vue":["sO9H"],"./modules/dataProcess/blocklyDebugger.vue":["HCHy"],"./modules/dataProcess/blocklyXML.vue":["JRhF"],"./modules/dataProcess/commonrobotrunlog.vue":["roSp",61],"./modules/dataProcess/components/add.vue":["D6CK"],"./modules/dataProcess/components/addBatchData.vue":["OWS8"],"./modules/dataProcess/components/addByForm.vue":["X3VA"],"./modules/dataProcess/components/condition.vue":["kN15"],"./modules/dataProcess/components/conditionGetOneData.vue":["mdla"],"./modules/dataProcess/components/conditionLogic.vue":["dcie"],"./modules/dataProcess/components/delete.vue":["kp+h"],"./modules/dataProcess/components/doHttp.vue":["RzKZ"],"./modules/dataProcess/components/formule.vue":["5Xn/"],"./modules/dataProcess/components/getUserListConfig.vue":["42jU"],"./modules/dataProcess/components/insertVariable.vue":["HAP0"],"./modules/dataProcess/components/jsCodeEditor.vue":["qvXg"],"./modules/dataProcess/components/leftMenu.vue":["U5AP"],"./modules/dataProcess/components/openDashBoardConfig.vue":["llCV"],"./modules/dataProcess/components/params.vue":["j0+m"],"./modules/dataProcess/components/rules.vue":["VfYd"],"./modules/dataProcess/components/rulesScreen.vue":["JC7v"],"./modules/dataProcess/components/sendMail.vue":["1m1e"],"./modules/dataProcess/components/sendMessage.vue":["sZk8"],"./modules/dataProcess/components/sendNotify.vue":["D6cd"],"./modules/dataProcess/components/sqlEditor.vue":["9Gyk"],"./modules/dataProcess/components/updata.vue":["Ch7m"],"./modules/dataProcess/components/updataByForm.vue":["YjV2"],"./modules/dataProcess/components/updataData.vue":["5NDU"],"./modules/dataProcess/components/updataForm.vue":["OW9u"],"./modules/dataProcess/condition1copy.vue":["ZwZe",26],"./modules/dataProcess/debugger/variableDetail.vue":["S6Bm"],"./modules/dataProcess/processList.vue":["hOEw",17],"./modules/dataProcess/robotEditDialog.vue":["16XU"],"./modules/job/schedule-add-or-update.vue":["lJxs",60],"./modules/job/schedule-log.vue":["Nnw2",59],"./modules/job/schedule.vue":["ynw1",25],"./modules/newCommon/index.vue":["8yC+",24],"./modules/oss/oss-config.vue":["C+ej",0],"./modules/oss/oss-upload-update.vue":["l8Wc",58],"./modules/oss/oss-upload.vue":["AytH",0],"./modules/oss/oss.vue":["dIih",0,57],"./modules/oss/ossall.vue":["RpLK",0,56],"./modules/oss/ossmold.vue":["hUPR",0,45],"./modules/pay/Pay.vue":["jsBg",0],"./modules/pay/PayBarCode.vue":["ggGq",0],"./modules/pay/PayBuyMoCoin.vue":["VXiD",0,23],"./modules/pay/PayModal.vue":["Rd6/",0],"./modules/print/components/panel/index.vue":["sg1D"],"./modules/print/components/panel/layers.vue":["stQF"],"./modules/print/components/panel/options/index.vue":["t4jf"],"./modules/print/components/panel/page.vue":["uBQ/"],"./modules/print/components/panel/style.vue":["JbnW"],"./modules/print/components/viewport/index.vue":["M0rx"],"./modules/print/components/viewport/size-control.vue":["TngT"],"./modules/print/components/widgets/bar-code/index.vue":["iS5C"],"./modules/print/components/widgets/html/index.vue":["hUfn"],"./modules/print/components/widgets/image/index.vue":["oh3/"],"./modules/print/components/widgets/table/index.vue":["06zv"],"./modules/print/components/widgets/txt/index.vue":["jRWI"],"./modules/print/index.vue":["chHq"],"./modules/print/printTemplates.vue":["X6Qn"],"./modules/singlePage/singleCommonView.vue":["zSnU",22],"./modules/statistic/injecterUseRate.vue":["421b",21],"./modules/statistic/order.vue":["RDpA",20],"./modules/statistic/profitAndOut.vue":["Khen",19],"./modules/sys/appRole-add-or-update.vue":["L6uE",55],"./modules/sys/appRole.vue":["KSOr",44],"./modules/sys/com/customer.vue":["JnxA",0],"./modules/sys/com/openAcount.vue":["vMkZ",0],"./modules/sys/com/provider.vue":["o3Gg",0],"./modules/sys/company.vue":["NCIY",0],"./modules/sys/companyUpdataServer.vue":["uebk",0],"./modules/sys/companyUseDetail.vue":["oqm7",0],"./modules/sys/companyinfo-add-or-update.vue":["+D7D",54],"./modules/sys/companyinfo.vue":["82EO",0],"./modules/sys/config-add-or-update.vue":["/caQ",53],"./modules/sys/config.vue":["MKmw",43],"./modules/sys/dept-add-or-update.vue":["QowZ"],"./modules/sys/dept.vue":["iPNa"],"./modules/sys/log.vue":["jbja",52],"./modules/sys/menu-add-or-update.vue":["cFZF",18],"./modules/sys/menu.vue":["gpws",16],"./modules/sys/role-add-or-update.vue":["2OCm",0],"./modules/sys/role.vue":["rE8r",0],"./modules/sys/sendSysnotify.vue":["SEG1",51],"./modules/sys/sysext-add-or-update.vue":["TiFm",50],"./modules/sys/sysext.vue":["kRRB",42],"./modules/sys/sysnotify.vue":["ZE5n",15],"./modules/sys/sysnotifyDetail.vue":["vEUy",49],"./modules/sys/user-add-or-update.vue":["INS3",0],"./modules/sys/user-apply-confirm-update.vue":["sPqF",0],"./modules/sys/user.vue":["JnAV",0],"./select-audio-device.vue":["2Het",0],"./selfInfo.vue":["3bIG",0],"./theme.vue":["/SA7",0]};function i(e){var t=o[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}i.keys=function(){return Object.keys(o)},i.id="Opzk",e.exports=i},Ovkn:function(e,t,n){"use strict";var o=n("mvHQ"),i=n.n(o),a=(n("0xDb"),{props:{itemOption:{},isEdit:{},initParamsProp:{}},data:function(){return{viewShow:!1,data:null,initParams:null}},mounted:function(){var e=this;this.isEdit||(this.$options.components[this.itemOption.customViewPath]=function(){return n("X7LF")("./"+e.itemOption.customViewPath+".vue")},this.viewShow=!0,this.initParamsProp&&(this.initParams=JSON.parse(i()(this.initParamsProp))),this.getData(this.initParams))},methods:{goLink:function(){console.log(this.isEdit,this.itemOption,9888938),this.isEdit||this.itemOption.link&&""!=this.itemOption.link&&this.$router.push({name:this.itemOption.link,query:{dataFilterInfo:this.itemOption.linkParams}})},getData:function(e){var t=this;this.itemOption.robotInfo&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.robotInfo),method:"get",params:e}).then(function(n){var o=n.data;0==o.code&&o.data&&(console.log(t.itemOption.customViewPath,t.$options.components,t.$refs.customView.onData,8888888888889),t.$refs.customView.onData(o.data,e))})},onViewDialogDashboard:function(e,t){console.log(e,t,0x6522c47aa9ea),this.$emit("viewDialogDashboard",e,t)},onCtrDataChange:function(e){this.getData(e)},updataEcharts:function(){this.$refs.customView.updataEcharts()}}}),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"grid-card-dashboard h100"},[this.viewShow?t(this.itemOption.customViewPath,{ref:"customView",tag:"component",on:{viewDialogDashboard:this.onViewDialogDashboard}}):this._e()],1)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("hXSF")},"data-v-59454e21",null);t.a=l.exports},Oxjj:function(e,t){window._iconfont_svg_string_3593376='<svg><symbol id="icon-mobile-alt" viewBox="0 0 1024 1024"><path d="M272 85.312v853.376h480V85.312h-480zM232 0h560c22.08 0 40 19.072 40 42.688v938.624c0 23.616-17.92 42.688-40 42.688h-560C209.92 1024 192 1004.928 192 981.312V42.688C192 19.072 209.92 0 232 0z m40 810.688h480v170.624h-480v-170.624z m240 128c22.08 0 40-19.136 40-42.688 0-23.552-17.92-42.688-40-42.688s-40 19.136-40 42.688c0 23.552 17.92 42.688 40 42.688z"  ></path></symbol><symbol id="icon-database-set" viewBox="0 0 1024 1024"><path d="M0 311.936l469.632 222.272V1024L0 800.96V311.936z m85.44 431.68l298.752 141.888V591.68l-298.752-141.44v293.376zM512.832 0l509.632 223.04L513.28 461.696 0 222.016 512.832 0z m-0.128 96.576L215.68 225.088l297.472 138.88 294.784-138.112-295.296-129.28zM1024 311.936v489.024L555.2 1022.72V534.208L1024 311.936z m-383.36 279.68v292.8l297.92-140.928v-293.12L640.64 591.552z"  ></path></symbol><symbol id="icon-layer-group" viewBox="0 0 1024 1024"><path d="M199.296 479.36L151.04 512 512 755.328 873.024 512l-48.32-32.64L512 690.176 199.296 479.424z m700.864-50.816l46.08 31.104L1024 512l-123.84 83.456L1024 678.912 512 1024l-512-345.088 123.84-83.456L0 512l79.104-53.312 44.736-30.144L0 345.088 512 0l512 345.088-123.84 83.456z m-75.52 217.792L512 857.088l-312.704-210.752-48.32 32.64L512 922.24l361.024-243.328-48.32-32.576zM512 101.696L150.976 345.152 512 588.416l361.024-243.328L512 101.76z"  ></path></symbol><symbol id="icon-picture" viewBox="0 0 1024 1024"><path d="M0 64l1024-0.128V960H0V64z m74.56 74.688v746.624H948.48V138.688H74.56z m623.36 271.552a85.12 85.12 0 1 1-0.064-170.368 85.12 85.12 0 0 1 0.128 170.368z m-305.28 179.392l62.72-73.664 152.32 166.72 119.232-89.536L948.48 832v53.312h-82.048l-151.04-163.392-119.744 89.856-203.008-222.144z m0 0l-251.904 295.744H74.56V816l252.8-297.792 65.28 71.424zM323.904 522.112l66.048-77.568 68.032 74.24-2.752-2.816-62.72 73.6 0.256 0.32-0.128 0.192-0.256-0.256 0.128-0.192-65.28-71.424-3.328 3.904z"  ></path></symbol><symbol id="icon-calendar-alt" viewBox="0 0 1024 1024"><path d="M929.28 102.528H1024V1024H0V102.528h94.72l4.864-0.128h113.728V0H312.96v102.4h398.208V0h99.584v102.4h113.728c1.664 0 3.2 0 4.864 0.128zM924.416 921.6v-512H99.584v512h824.832z m0-614.4V204.8H99.584v102.4h824.832zM192 512h128v128H192V512z m256 0h128v128H448V512z m256 0h128v128h-128V512z m-512 192h128v128H192v-128z m256 0h128v128H448v-128z m256 0h128v128h-128v-128z"  ></path></symbol><symbol id="icon-training" viewBox="0 0 1024 1024"><path d="M85.301337 259.231596v679.787027h853.269342V259.295588H85.301337zM792.604924 174.186227H1023.872016V1024H0V174.186227h231.267092L155.308586 42.746657 229.091364 0.127984 329.750781 174.186227h364.370454l100.595425-174.186227 73.84677 42.618673-75.958506 131.567554zM383.952006 385.99975v401.485814l341.269341-200.742907L383.952006 386.063742z"  ></path></symbol><symbol id="icon-process" viewBox="0 0 1024 1024"><path d="M354.88 125.888A164.16 164.16 0 0 1 513.856 0c76.416 0 140.608 52.928 158.656 124.544a463.616 463.616 0 0 1 301.44 435.84c0 29.504-2.816 58.496-8.064 86.528 35.584 30.4 58.112 75.776 58.112 126.528 0 91.456-73.28 165.568-163.712 165.568-22.4 0-43.776-4.48-63.232-12.8A453.12 453.12 0 0 1 515.456 1024c-104.128 0-200.256-35.2-277.248-94.4-22.336 11.52-47.68 18.112-74.496 18.112C73.28 947.712 0 873.536 0 782.08c0-54.208 25.792-102.4 65.6-132.544a471.232 471.232 0 0 1-8.448-89.216 463.68 463.68 0 0 1 297.728-434.432z m7.872 103.616a364.672 364.672 0 0 0-208.64 330.56c0 19.2 1.536 38.08 4.352 56.512l5.248-0.064c90.432 0 163.712 74.112 163.712 165.568a166.4 166.4 0 0 1-18.816 77.12 355.712 355.712 0 0 0 205.696 65.216 355.712 355.712 0 0 0 205.824-65.28 166.272 166.272 0 0 1-23.552-85.76c0-91.392 73.28-165.568 163.712-165.568 3.712 0 7.424 0.128 11.072 0.384a371.84 371.84 0 0 0 3.136-48.128c0-146.752-85.76-273.216-209.408-330.88a163.776 163.776 0 0 1-151.232 102.016 163.776 163.776 0 0 1-151.04-101.76z"  ></path></symbol><symbol id="icon-news" viewBox="0 0 1024 1024"><path d="M85.312 85.312v853.376h853.376V85.312H85.312zM0 0h1024v1024H0V0z m170.688 170.688V512h426.624V170.688H170.688z m512 0V512h170.624V170.688h-170.624z m-512 426.624v85.376h682.624V597.312H170.688z m0 170.688v85.312h682.624V768H170.688z"  ></path></symbol><symbol id="icon-save" viewBox="0 0 1024 1024"><path d="M85.312 85.312v853.376h853.376v-512L597.312 85.312h-512zM0 0h640l384 384v640H0V0z m170.688 512v341.312h170.624V512H170.688z m256 0v341.312h170.624V512H426.688z m256 0v341.312h170.624V512h-170.624z m-512-341.312v256h680.192l-253.568-256H170.688z"  ></path></symbol><symbol id="icon-print" viewBox="0 0 1024 1024"><path d="M832 768v192H192v-192H0V352A32 32 0 0 1 32 320h960a32 32 0 0 1 32 32V768h-192z m0-512H192V96a32 32 0 0 1 32-32h576a32 32 0 0 1 32 32V256z m-512 384v192h384v-192H320z m544-95.232a64 64 0 1 0 0-128 64 64 0 0 0 0 128z"  ></path></symbol><symbol id="icon-release" viewBox="0 0 1024 1024"><path d="M64 601.6L624 512 64 422.4V64l896 448-896 448V601.6z"  ></path></symbol><symbol id="icon-user-circle" viewBox="0 0 1024 1024"><path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m-292.544-232.064s585.088 0 585.088 1.472V637.696C804.544 553.856 609.536 512 512 512c-97.536 0-292.544 41.92-292.544 125.696v154.24zM512 438.848a146.304 146.304 0 1 0 0-292.544 146.304 146.304 0 0 0 0 292.544z"  ></path></symbol><symbol id="icon-cloud-machine" viewBox="0 0 1024 1024"><path d="M320 934.976V1024H64v-311.68h256.96L320 712.704v88.64H153.6v133.632H320z m640-356.224H448v89.088H64v-311.68h896v222.592zM153.6 445.248v133.504h716.8V445.248H153.6zM64 0h896v311.68H64V0z m89.6 89.024v133.568h716.8V89.024H153.6z m44.8 44.544h89.6v44.544H198.4v-44.544z m0 356.16h89.6v44.544H198.4v-44.544z m0 356.16h89.6v44.544H198.4v-44.544z m825.6 28.864C1024 958.08 958.912 1024 876.288 1024h-320C461.44 1024 384 945.6 384 849.92c0-84.928 59.136-155.2 141.504-171.84A204.608 204.608 0 0 1 704 576c95.232 0 176.32 63.232 202.112 152.32A151.488 151.488 0 0 1 1024 874.752z m-96 0a55.552 55.552 0 0 0-41.984-52.544l-56.128-12.032-16-55.168A114.24 114.24 0 0 0 704 672c-40.32 0-76.096 20.608-95.232 53.952l-21.696 37.632-42.56 8.576c-38.4 7.744-64.512 39.296-64.512 77.696 0 43.008 34.752 78.144 76.288 78.144h320c29.312 0 51.712-22.656 51.712-53.248z"  ></path></symbol><symbol id="icon-accesskeys" viewBox="0 0 1024 1024"><path d="M272 122.24h480v157.056h96V0.448h-96L272 0c-52.8 0-96 0.448-96 0.448v278.848h96v-157.12z m403.648 603.392L896 512 675.648 298.368 608 364.48 760.128 512 608 659.52l67.648 66.112zM416 659.52L263.808 512 416 364.48l-67.712-66.112L128 512l220.288 213.632L416 659.52z m336 242.304H272v-157.12h-96V1024h672V744.704h-96v157.12z"  ></path></symbol><symbol id="icon-shoppingcart" viewBox="0 0 1024 1024"><path d="M384 960c-47.104 0-85.312-36.48-85.312-81.472S336.896 797.12 384 797.12s85.312 36.48 85.312 81.408C469.312 923.52 431.104 960 384 960z m426.688 0c-47.168 0-85.376-36.48-85.376-81.472s38.208-81.408 85.376-81.408c47.104 0 85.312 36.48 85.312 81.408C896 923.52 857.792 960 810.688 960zM262.272 186.24H1024l-91.968 407.232h-577.92l13.12 58.56h554.112l-18.56 81.408H298.24l-31.552-139.968h-0.256l-59.52-265.6-41.152-182.4H0V64h234.752l27.52 122.24z m18.368 81.408L335.68 512h527.424l55.232-244.352H280.64z"  ></path></symbol><symbol id="icon-structured-data" viewBox="0 0 1024 1024"><path d="M85.312 256h853.376V85.312H85.312V256z m0 85.312v597.376h853.376V341.312H85.312zM0 0h1024v1024H0V0z m341.312 85.312h85.376V256H341.312V85.312zM256 512h341.312v170.688H256V512z"  ></path></symbol><symbol id="icon-vector" viewBox="0 0 1024 1024"><path d="M85.312 880.256L916.352 49.28l60.352 60.288L147.648 938.688H1024V1024H0V0h85.312v880.256zM339.2 298.688l60.352 60.288-211.2 211.2L128 509.824l211.2-211.2zM509.824 128l60.352 60.352-90.496 90.496-60.352-60.352L509.824 128z m303.872 384l60.352 60.352-301.696 301.696L512 813.696 813.696 512z"  ></path></symbol><symbol id="icon-home" viewBox="0 0 1024 1024"><path d="M169.024 596.032v280.512h149.12v-167.488h382.528v167.488h149.12V593.536L509.632 351.744 169.024 596.032z m340.352-347.52l425.536 302.4V960h-319.36v-167.488H403.264V960H83.84V553.664L509.44 248.448zM49.664 491.008L0 423.168 509.248 64 1024 423.168l-49.28 67.968-465.152-324.48L49.664 491.008z"  ></path></symbol><symbol id="icon-monitoring" viewBox="0 0 1024 1024"><path d="M0 0h1024v853.312H0V0z m85.312 85.312V768h853.376V85.312H85.312z m85.376 853.376h682.624V1024H170.688v-85.312z m480.32-423.424L449.536 358.848 339.84 515.2H170.688V429.888h124.8l135.68-193.408 249.024 193.408h173.12v85.376h-202.304z"  ></path></symbol><symbol id="icon-diagnose" viewBox="0 0 1024 1024"><path d="M883.584 674.944C732.16 864 512.448 1024 512.448 1024s-224.32-157.44-375.808-349.056h112.64c20.608 23.104 42.944 46.528 66.816 70.144a2134.336 2134.336 0 0 0 195.584 170.24 2402.88 2402.88 0 0 0 196.736-174.912c22.016-22.016 42.752-43.904 62.08-65.472h113.088z m126.4-218.24H919.04c13.056-32 19.52-60.8 19.52-85.504 0-122.56-89.6-219.904-197.44-219.904-62.592 0-120.704 32.96-158.208 88.896L512.448 345.28l-70.4-105.088c-37.568-55.936-95.616-88.96-158.272-88.96C159.488 151.296 86.4 223.36 86.4 371.2c0 25.472 5.952 54.08 17.92 85.504H14.08A305.536 305.536 0 0 1 0.96 371.2c0-211.2 126.656-307.2 282.88-307.2 94.08 0 177.152 50.112 228.608 126.848C563.904 114.112 647.04 64 741.12 64 897.28 64 1024 201.6 1024 371.2c0 27.776-4.992 56.384-14.08 85.504zM544.64 615.04h-55.808L382.72 448.384 272.64 614.976H0V527.68h227.2l156.864-237.184L522.24 507.392l114.944-137.408 134.4 157.696H1024v87.296h-291.328l-94.912-111.36-93.12 111.36z"  ></path></symbol><symbol id="icon-Directory-tree" viewBox="0 0 1024 1024"><path d="M213.312 682.688v170.624h469.312V768H1024v256h-341.312l-0.064-85.376H128v-256h85.312zM1024 384v256h-341.312l-0.064-85.376h-341.12V469.376h341.12V384H1024z m-85.312 85.312H768v85.376h170.688V469.312zM1024 0v256h-341.312l-0.064-85.376H213.312v170.688H128v-256h554.624V0H1024z m-85.312 85.312H768v85.376h170.688V85.312z m-170.688 768v85.376h170.688v-85.376H768z m-768-512h341.312v341.376H0V341.312z m85.312 85.376v170.624H256V426.688H85.312z"  ></path></symbol><symbol id="icon-application" viewBox="0 0 1024 1024"><path d="M512 0l448 256v512l-448 256-448-256V256l448-256z m0 98.24l-362.88 207.36v412.8L512 925.76l362.88-207.36v-412.8L512 98.24z m224 200.448l64.64 37.312v74.688L736 448l-30.784-17.792-155.968 78.08v185.216l27.392 15.808v74.688L512 821.312l-64.64-37.312v-74.688l27.392-15.808V508.352L318.72 430.208 288 448l-64.64-37.312V336l64.64-37.312 64.64 37.312v27.712L512 443.52l159.36-79.872V336l64.64-37.312z"  ></path></symbol><symbol id="icon-applicationgroup" viewBox="0 0 1024 1024"><path d="M284.804377 360.254363l177.952351-104.775683a7.675874 7.675874 0 0 0 0-13.240883l-179.167697-104.903614a7.483977 7.483977 0 0 0-7.547943 0L98.152703 242.237797a7.675874 7.675874 0 0 0 0 13.240883l179.103731 104.839649a7.483977 7.483977 0 0 0 7.547943 0z m464.390391 0l177.95235-104.775683a7.675874 7.675874 0 0 0 0-13.240883l-179.103732-104.903614a7.483977 7.483977 0 0 0-7.611908 0L562.543093 242.237797a7.675874 7.675874 0 0 0 0 13.240883l179.103732 104.839649a7.483977 7.483977 0 0 0 7.611908 0z m-22.963657 39.402821l-0.639657 208.527917a7.675874 7.675874 0 0 1-3.710005 6.588458 7.483977 7.483977 0 0 1-7.547943 0L535.165808 509.933911a7.675874 7.675874 0 0 1-3.837937-6.588459l0.639656-208.527916c0-5.948803 6.332596-9.594843 11.321915-6.652425l179.167697 104.903615a7.675874 7.675874 0 0 1 3.837937 6.588458z m-429.465163 0l0.639656 208.527917c0 5.884837 6.268631 9.530877 11.257949 6.588458L487.831251 509.933911a7.675874 7.675874 0 0 0 3.837937-6.588459l-0.639657-208.527916a7.675874 7.675874 0 0 0-3.837937-6.652425 7.483977 7.483977 0 0 0-7.483977 0l-179.167697 104.903615a7.675874 7.675874 0 0 0-3.837937 6.588458z m422.684807 295.265295l2.494659 0.895519a7.675874 7.675874 0 0 1 3.773972 6.588459l0.639656 208.527916a7.675874 7.675874 0 0 1-3.837937 6.652424l-179.103732 104.839649a7.547943 7.547943 0 0 1-11.38588-6.588459l-0.639656-208.527916a7.675874 7.675874 0 0 1 3.837937-6.652424l179.103732-104.839649a7.483977 7.483977 0 0 1 7.611908 0z m-410.851167 0.895519l179.167697 104.903614a7.675874 7.675874 0 0 1 3.837937 6.588459l-0.639656 208.527916a7.675874 7.675874 0 0 1-3.837937 6.588459 7.483977 7.483977 0 0 1-7.483978 0L300.411988 917.586797a7.675874 7.675874 0 0 1-3.837937-6.588459l0.639656-208.527916c0-5.948803 6.332596-9.594843 11.321915-6.652424z m643.81395-137.206252l2.494659 0.895519a7.675874 7.675874 0 0 1 3.773971 6.652424L959.257859 774.62364a7.675874 7.675874 0 0 1-3.773972 6.588458l-179.103732 104.903615a7.547943 7.547943 0 0 1-11.38588-6.652425l-0.639656-208.527916c0-2.750522 1.471209-5.245181 3.837937-6.652424l179.103732-104.839649a7.483977 7.483977 0 0 1 7.611909 0zM75.636805 559.507265l179.167697 104.903614c2.366728 1.279312 3.837937 3.837937 3.837938 6.588459l-0.639657 208.527916a7.675874 7.675874 0 0 1-3.837937 6.588459 7.483977 7.483977 0 0 1-7.483977 0L67.513171 781.276064A7.675874 7.675874 0 0 1 63.7392 774.687605l0.639656-208.527916c0-5.884837 6.268631-9.594843 11.257949-6.652424z m436.885174-18.358133l2.558625 0.895519 179.103732 104.903614a7.675874 7.675874 0 0 1 0 13.176918l-177.888385 104.775683a7.675874 7.675874 0 0 1-7.547943 0L329.58031 660.125183a7.675874 7.675874 0 0 1 0-13.240883l177.888385-104.775683a7.483977 7.483977 0 0 1 7.547943 0z m439.187937-253.943505l2.430693 0.959484a7.675874 7.675874 0 0 1 3.837937 6.652425l0.575691 208.527916a7.675874 7.675874 0 0 1-3.837937 6.588459l-179.103732 104.839648a7.547943 7.547943 0 0 1-11.321914-6.588458l-0.639657-208.527917c0-2.750522 1.407244-5.309146 3.837938-6.652424l179.103731-104.839649a7.483977 7.483977 0 0 1 7.547943 0zM76.404392 288.229077l179.103732 104.903614c2.430694 1.279312 3.837937 3.837937 3.837937 6.588459l-0.639656 208.527916a7.675874 7.675874 0 0 1-3.773971 6.588459 7.483977 7.483977 0 0 1-7.547943 0l-179.103732-104.839649a7.675874 7.675874 0 0 1-3.837937-6.588459l0.639656-208.527916c0-5.948803 6.268631-9.594843 11.321914-6.652424zM512.585945 0.127931l2.430693 0.895519 179.167698 104.839649a7.675874 7.675874 0 0 1 0 13.240883L516.295951 223.879665a7.356046 7.356046 0 0 1-7.547943 0L329.58031 119.040016a7.675874 7.675874 0 0 1 0-13.240883L507.468695 1.02345a7.483977 7.483977 0 0 1 7.547943 0z"  ></path></symbol><symbol id="icon-mail-fill" viewBox="0 0 1024 1024"><path d="M513.92 537.216L99.968 278.592v96.96L513.92 637.44v-0.32l412.48-265.664V277.12L513.92 537.216zM0 128h1024v768H0V128z"  ></path></symbol><symbol id="icon-heart-fill" viewBox="0 0 1024 1024"><path d="M760.384 64c47.808 0 91.968 11.968 132.352 35.84a264.32 264.32 0 0 1 95.872 97.152A263.68 263.68 0 0 1 1024 330.88c0 34.752-6.592 68.544-19.712 101.312a262.4 262.4 0 0 1-57.536 87.424L512 960 77.248 519.68A268.8 268.8 0 0 1 0 330.88c0-48.384 11.776-93.056 35.392-133.952A264.32 264.32 0 0 1 131.2 99.84 255.296 255.296 0 0 1 263.68 64 260.736 260.736 0 0 1 449.92 142.208l62.08 62.912 62.144-62.912a258.944 258.944 0 0 1 86.336-58.24A259.584 259.584 0 0 1 760.512 64h-0.128z"  ></path></symbol><symbol id="icon-collection-fill" viewBox="0 0 1024 1024"><path d="M512 822.976L828.416 1024l-83.968-378.88L1024 390.208l-368.128-32.896L512 0 368.128 357.312 0 390.208l279.552 254.912L195.584 1024z"  ></path></symbol><symbol id="icon-user-group-fill" viewBox="0 0 1024 1024"><path d="M409.6 128c113.152 0 204.8 93.056 204.8 208S522.752 544 409.6 544c-113.152 0-204.8-93.056-204.8-208S296.448 128 409.6 128z m0 475.456c136.704 0 409.6 68.224 409.6 203.712V960H0v-152.832C0 671.68 272.896 603.52 409.6 603.52zM887.488 960v-168c0-115.456-133.12-197.248-276.288-214.464 24.832-3.008 74.368 0 94.592 0 136.704 0 318.208 78.976 318.208 214.464V960h-136.512zM576 532.16a207.808 207.808 0 0 0 136.512-196.16c0-90.624-56.96-167.68-136.512-196.16 21.376-7.68 44.352-11.84 68.288-11.84 113.152 0 204.8 93.056 204.8 208s-91.648 208-204.8 208c-23.936 0-46.912-4.16-68.288-11.84z"  ></path></symbol><symbol id="icon-userplus-fill" viewBox="0 0 1024 1024"><path d="M592.64 581.568A255.296 255.296 0 0 0 512 768a255.36 255.36 0 0 0 86.656 192H64v-164.544C64 649.536 362.496 576 512 576c23.68 0 51.2 1.856 80.64 5.568zM512 64c123.776 0 224 100.224 224 224S635.776 512 512 512a223.936 223.936 0 0 1-224-224C288 164.224 388.224 64 512 64z m320 512v128h128v128h-128v128h-128v-128H576v-128h128V576h128z"  ></path></symbol><symbol id="icon-user-fill" viewBox="0 0 1024 1024"><path d="M512 512c123.776 0 224-100.224 224-224S635.776 64 512 64a223.936 223.936 0 0 0-224 224C288 411.776 388.224 512 512 512z m0 64c-149.504 0-448 85.76-448 256v128h896v-128c0-170.24-298.496-256-448-256z"  ></path></symbol><symbol id="icon-cog-fill" viewBox="0 0 1024 1024"><path d="M903.232 562.176l119.232 94.912-127.168 209.728-143.168-50.176a407.296 407.296 0 0 1-88.96 50.176L633.92 1024H394.688l-33.664-157.184a387.328 387.328 0 0 1-88.96-50.176l-144 50.176-127.872-209.728L120.96 562.176A395.136 395.136 0 0 1 117.312 512c0-16.896 1.6-33.792 3.712-50.176L0.192 359.168l116.032-204.544 155.84 52.736a407.296 407.296 0 0 1 88.96-50.176L396.352 0h237.568l29.248 157.184c32.128 12.8 61.568 29.696 88.96 50.176l158.08-52.736 113.664 204.544-120.64 102.656c2.048 16.384 3.648 32.768 3.648 50.176 0 11.584-1.28 28.352-3.648 50.176zM512 320a192 192 0 1 0 0 384 192 192 0 1 0 0-384z"  ></path></symbol><symbol id="icon-clock-fill" viewBox="0 0 1024 1024"><path d="M533.312 556.416V219.52H438.848v392.32h1.472l243.84 140.8 47.296-81.728-198.144-114.432zM511.488 0C794.624 0 1024 229.376 1024 512s-229.376 512-512.512 512C228.864 1024 0 794.624 0 512s228.864-512 511.488-512z"  ></path></symbol><symbol id="icon-calendaralt-fill" viewBox="0 0 1024 1024"><path d="M929.28 102.528H1024V1024H0V102.528h94.72l4.864-0.128h113.728V0H312.96v102.4h398.208V0h99.584v102.4h113.728c1.664 0 3.2 0 4.864 0.128zM924.416 307.2V204.8H99.584v102.4h824.832zM192 512v128h128V512H192z m256 0v128h128V512H448z m256 0v128h128V512h-128z m-512 192v128h128v-128H192z m256 0v128h128v-128H448z m256 0v128h128v-128h-128z"  ></path></symbol><symbol id="icon-clouddownload-fill" viewBox="0 0 1024 1024"><path d="M1024 640.192C1024 782.912 919.872 896 787.648 896h-512C123.904 896 0 761.6 0 597.504 0 451.968 94.656 331.52 226.432 302.976 284.16 195.456 391.808 128 512 128c152.32 0 282.112 108.416 323.392 261.12C941.888 413.44 1024 519.04 1024 640.192zM341.312 570.176L512 756.48l170.688-186.24H341.312z m213.376 0v-256H469.312v256h85.376z"  ></path></symbol><symbol id="icon-cloudupload-fill" viewBox="0 0 1024 1024"><path d="M1024 640.192C1024 782.912 919.872 896 787.648 896h-512C123.904 896 0 761.6 0 597.504 0 451.968 94.656 331.52 226.432 302.976 284.16 195.456 391.808 128 512 128c152.32 0 282.112 108.416 323.392 261.12C941.888 413.44 1024 519.04 1024 640.192z m-341.312-139.84L512 314.24 341.312 500.48h341.376z m-213.376 0v256h85.376v-256H469.312z"  ></path></symbol><symbol id="icon-exchange-fill" viewBox="0 0 1024 1024"><path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024zM387.392 406.272v404.48H472.96v-512h-0.448l-0.064-85.44-259.2 240.64 58.496 58.432 115.584-106.112z m254.208 212.288v-405.12H555.904v498.944h0.064l0.512 98.496 253.12-233.856-52.928-63.36-115.072 104.896z"  ></path></symbol><symbol id="icon-info-circle-fill" viewBox="0 0 1024 1024"><path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024zM448 448v384h128V448H448z m0-256v128h128V192H448z"  ></path></symbol><symbol id="icon-question-circle-fill" viewBox="0 0 1024 1024"><path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m-63.168-320.128V832h130.624v-128.128H448.832zM311.04 416.576h122.304c0-14.976 1.664-28.992 4.992-41.984a101.12 101.12 0 0 1 15.36-34.112c7.04-9.728 15.872-17.472 26.688-23.296 10.816-5.824 23.68-8.768 38.656-8.768 22.208 0 39.552 6.08 52.032 18.304 12.48 12.16 18.688 31.04 18.688 56.576 0.576 14.976-2.048 27.52-7.872 37.44-5.824 9.984-13.44 19.2-22.912 27.52-9.408 8.32-19.648 16.64-30.72 24.96-11.136 8.32-21.696 18.112-31.68 29.44a171.904 171.904 0 0 0-26.24 41.216c-7.424 16.064-12.032 36.032-13.696 59.904v37.44H568.96v-31.616c2.24-16.64 7.68-30.528 16.256-41.6 8.576-11.072 18.432-20.928 29.504-29.504 11.136-8.64 22.912-17.216 35.392-25.792a162.048 162.048 0 0 0 59.904-75.264c6.912-17.28 10.368-39.168 10.368-65.792a149.312 149.312 0 0 0-44.928-104c-16.064-16.064-37.248-29.504-63.616-40.32-26.368-10.88-59.2-16.256-98.56-16.256-30.528 0-58.112 5.12-82.816 15.36a183.68 183.68 0 0 0-63.232 42.88A195.392 195.392 0 0 0 326.4 334.208c-9.728 24.96-14.848 52.48-15.36 82.368z"  ></path></symbol><symbol id="icon-exclamationcircle-f" viewBox="0 0 1024 1024"><path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024zM448 192v384h128V192H448z m0 512v128h128v-128H448z"  ></path></symbol><symbol id="icon-minus-circle-fill" viewBox="0 0 1024 1024"><path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024zM192 448v128h640V448H192z"  ></path></symbol><symbol id="icon-plus-circle-fill" viewBox="0 0 1024 1024"><path d="M448 448H192v128h256v256h128V576h256V448H576V192H448v256z m64 576A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z"  ></path></symbol><symbol id="icon-times-circle-fill" viewBox="0 0 1024 1024"><path d="M595.392 504.96l158.4-158.464L663.296 256 504.896 414.4 346.496 256 256 346.496 414.4 504.96 256 663.296l90.496 90.496L504.96 595.392l158.4 158.4 90.496-90.496-158.4-158.4zM512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z"  ></path></symbol><symbol id="icon-drag" viewBox="0 0 1024 1024"><path d="M288 192a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0 277.312a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0 277.376a96 96 0 1 1 0-192 96 96 0 0 1 0 192zM288 1024a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m448-832a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0 277.312a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0 277.376a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0 277.312a96 96 0 1 1 0-192 96 96 0 0 1 0 192z"  ></path></symbol><symbol id="icon-ellipsis-vertical" viewBox="0 0 1024 1024"><path d="M512 256c70.4 0 128-57.6 128-128s-57.6-128-128-128-128 57.6-128 128 57.6 128 128 128z m0 128c-70.4 0-128 57.6-128 128s57.6 128 128 128 128-57.6 128-128-57.6-128-128-128z m0 384c-70.4 0-128 57.6-128 128s57.6 128 128 128 128-57.6 128-128-57.6-128-128-128z"  ></path></symbol><symbol id="icon-gallery-view" viewBox="0 0 1024 1024"><path d="M288 287.872V64H64v224l224-0.128z m112 672h224V736h-224v224z m-336 0h224V736H64v224z m0-336h224v-224H64v224z m336 0h224v-224h-224v224z m336-336H960V64h-224v223.872z m-112 0V64h-224v224l224-0.128zM960 623.872v-224h-224v224H960z m0 336V736h-224v224H960z"  ></path></symbol><symbol id="icon-WIFI" viewBox="0 0 1024 1024"><path d="M0 352.832l93.12 98.752c231.296-245.44 606.464-245.44 837.76 0L1024 352.832C741.44 53.056 283.008 53.056 0 352.832z m372.352 395.008L512 896l139.648-148.16c-76.8-81.92-202.048-81.92-279.296 0zM186.24 550.4l93.12 98.752c128.448-136.32 336.96-136.32 465.408 0L837.824 550.4c-179.648-190.592-471.488-190.592-651.648 0z"  ></path></symbol><symbol id="icon-bug-report" viewBox="0 0 1024 1024"><path d="M250.496 320h523.008l49.152-49.152 90.496 90.496L832 442.496V512h128v128h-128v6.464c0 38.016-6.592 74.432-18.752 108.224l99.84 99.968-90.432 90.496-78.464-78.464A319.488 319.488 0 0 1 576 960v-188.16a64 64 0 1 0-128 0V960a319.488 319.488 0 0 1-168.192-93.44l-78.464 78.528-90.496-90.496 99.904-99.968A319.424 319.424 0 0 1 192 646.464V640H64V512h128V442.496L110.848 361.344l90.496-90.496 49.152 49.152zM320 256a192 192 0 1 1 384 0H320z"  ></path></symbol><symbol id="icon-qrcode" viewBox="0 0 1024 1024"><path d="M85.312 85.312V384H384V85.312H85.312zM0 0h469.248v469.248H0V0z m170.624 170.624h128v128h-128v-128zM0 554.624h469.248v469.248H0V554.624z m85.312 85.312v298.624H384V639.936H85.312z m85.312 85.312h128v128h-128v-128zM554.624 0h469.248v469.248H554.624V0z m85.312 85.312V384h298.624V85.312H639.936z m383.936 682.56H1024v85.376h-298.752V639.936H639.936V1023.872H554.624V554.624h255.936v213.248h128V554.624h85.312v213.248z m-298.624-597.248h128v128h-128v-128z m298.624 853.248h-85.312v-85.312h85.312v85.312z m-213.312 0h-85.312v-85.312h85.312v85.312z"  ></path></symbol><symbol id="icon-scan" viewBox="0 0 1024 1024"><path d="M885.312 885.312V624H960V960H624v-74.688h261.312zM64 885.312V624h74.688v261.312H400V960H64v-74.688zM960 138.688V400h-74.688V138.688H624V64H960v74.688z m-821.312 0V400H64V64h336v74.688H138.688zM64 474.688h896v74.624H64V474.688z"  ></path></symbol><symbol id="icon-cut" viewBox="0 0 1024 1024"><path d="M213.312 810.688h597.376V213.312H213.312v597.376z m0 85.312v128H128v-128H0v-85.312h128V128h682.688V0H896v128h128v85.312h-128V896H213.312z"  ></path></symbol><symbol id="icon-gift" viewBox="0 0 1024 1024"><path d="M983.038771 262.208952h-188.927764c17.407978-26.495967 27.647965-57.919928 27.647966-91.519885C821.758973 76.609184 742.527072 0.00128 645.119194 0.00128 592.12726 0.00128 544.38332 22.785252 511.99936 58.625207A179.071776 179.071776 0 0 0 378.879526 0.00128C281.471648 0.00128 202.239747 76.545184 202.239747 170.689067c0 33.599958 10.111987 65.023919 27.647966 91.519885H40.959949a40.25595 40.25595 0 0 0-40.959949 39.551951V549.120594c0 5.439993 4.607994 9.855988 10.239987 9.855987h51.199936v425.471468c0 21.887973 18.303977 39.551951 40.959949 39.551951h819.198976c22.655972 0 40.959949-17.663978 40.959949-39.551951V558.976581h51.199936c5.631993 0 10.239987-4.479994 10.239987-9.855987V301.760903a40.25595 40.25595 0 0 0-40.959949-39.551951z m-427.519465-91.519885c0-47.74394 40.19195-86.591892 89.599888-86.591892 49.407938 0 89.599888 38.847951 89.599888 86.591892s-40.19195 86.527892-89.599888 86.527891h-89.599888V170.689067zM378.879526 84.097175c49.407938 0 89.599888 38.847951 89.599888 86.591892v86.527891h-89.599888c-49.407938 0-89.599888-38.783952-89.599888-86.527891 0-47.74394 40.19195-86.591892 89.599888-86.591892zM87.039891 474.880686V346.240847h381.439523v128.639839H87.039891z m61.439923 84.095895h319.9996v380.927524h-319.9996V558.976581z m727.039092 380.927524h-319.9996V558.976581h319.9996v380.927524z m61.439923-465.023419H555.519306V346.240847h381.439523v128.639839z"  ></path></symbol><symbol id="icon-link" viewBox="0 0 1024 1024"><path d="M593.94368 715.648a10.688 10.688 0 0 0-14.976 0L424.21568 870.4c-71.68 71.68-192.576 79.232-271.68 0-79.232-79.232-71.616-200 0-271.616l154.752-154.752a10.688 10.688 0 0 0 0-15.04l-52.992-52.992a10.688 10.688 0 0 0-15.04 0L84.50368 530.688a287.872 287.872 0 0 0 0 407.488 288 288 0 0 0 407.488 0l154.752-154.752a10.688 10.688 0 0 0 0-15.04l-52.736-52.736z m344.384-631.168a288.256 288.256 0 0 1 0 407.616l-154.752 154.752a10.688 10.688 0 0 1-15.04 0l-52.992-52.992a10.688 10.688 0 0 1 0-15.104l154.752-154.688c71.68-71.68 79.232-192.448 0-271.68-79.104-79.232-200-71.68-271.68 0L443.92768 307.2a10.688 10.688 0 0 1-15.04 0l-52.864-52.864a10.688 10.688 0 0 1 0-15.04l154.88-154.752a287.872 287.872 0 0 1 407.424 0z m-296.32 240.896l52.672 52.736a10.688 10.688 0 0 1 0 15.04l-301.504 301.44a10.688 10.688 0 0 1-15.04 0l-52.736-52.672a10.688 10.688 0 0 1 0-15.04l301.632-301.504a10.688 10.688 0 0 1 15.04 0z"  ></path></symbol><symbol id="icon-poweroff" viewBox="0 0 1024 1024"><path d="M320 192v106.432c-97.28 61.12-161.792 167.68-161.792 289.024 0 189.632 157.632 343.36 352 343.36 194.432 0 352-153.728 352-343.36 0-119.808-62.848-225.28-158.208-286.72V192c151.36 70.144 256 220.608 256 394.944C960 828.352 759.424 1024 512 1024s-448-195.648-448-437.056C64 412.608 168.64 262.144 320 192z m128-192h128v448H448V0z"  ></path></symbol><symbol id="icon-key" viewBox="0 0 1024 1024"><path d="M443.25546667 486.74133333c-29.35466667-47.104-41.09653333-99.9424-41.09653334-158.72A291.0208 291.0208 0 0 1 695.97866667 34.13333333 291.0208 291.0208 0 0 1 989.86666667 328.02133333a291.0208 291.0208 0 0 1-293.888 293.81973334c-64.64853333 0-117.48693333-17.6128-170.3936-52.90666667l-135.168 135.168 64.64853333 64.7168-82.3296 82.26133333-64.64853333-64.64853333-41.09653334 41.1648 64.64853334 64.64853333-82.3296 82.26133334L102.4 827.5968l340.85546667-340.92373333z m252.7232-335.0528c-99.87413333 0-176.26453333 76.45866667-176.26453334 176.3328s76.3904 176.26453333 176.26453334 176.26453334c99.9424 0 176.3328-76.3904 176.3328-176.26453334 0-99.9424-82.26133333-176.3328-176.3328-176.3328z"  ></path></symbol><symbol id="icon-safety-certificate" viewBox="0 0 1024 1024"><path d="M512 88.704L149.312 239.424v225.088c0 54.528 9.536 107.328 28.672 158.72a516.48 516.48 0 0 0 202.24 253.696A460.8 460.8 0 0 0 512 936.256a460.928 460.928 0 0 0 131.712-59.2 517.504 517.504 0 0 0 202.304-253.76 451.52 451.52 0 0 0 28.672-158.72V239.424L512 88.704z m448 122.24v253.568c0 64.64-11.328 127.424-33.92 188.352a602.368 602.368 0 0 1-235.52 295.36A548.544 548.544 0 0 1 512 1024a548.416 548.416 0 0 1-178.56-75.776A601.664 601.664 0 0 1 97.92 652.8 536.192 536.192 0 0 1 64 464.512V211.008c0-17.28 10.368-32.768 26.24-39.36L495.68 3.328a42.752 42.752 0 0 1 32.768 0l405.312 168.32c15.936 6.592 26.304 22.144 26.304 39.36zM460.8 564.416L699.712 320 768 389.76 460.8 704 256 494.528l68.288-69.76L460.8 564.288z"  ></path></symbol><symbol id="icon-supervise" viewBox="0 0 1024 1024"><path d="M959.965003 223.038575v238.189392a533.078353 533.078353 0 0 1-33.91735 187.697336 601.553004 601.553004 0 0 1-235.501602 294.313007A549.525068 549.525068 0 0 1 512 1018.75241a549.397078 549.397078 0 0 1-178.546051-75.5141 600.913054 600.913054 0 0 1-235.501602-294.377002A532.630388 532.630388 0 0 1 64.034997 461.291962V223.038575a63.995 63.995 0 0 1 39.484916-59.13138l383.970002-158.963581a63.995 63.995 0 0 1 49.02017 0l383.970002 158.963581a63.995 63.995 0 0 1 39.484916 59.13138zM512 505.640497V95.880509L163.099258 241.341145V505.640497H512v415.327552a414.495618 414.495618 0 0 0 128.949926-59.38736 491.801578 491.801578 0 0 0 103.6719-96.056496 513.943848 513.943848 0 0 0 116.278916-259.819701H512z"  ></path></symbol><symbol id="icon-tag-subscipt" viewBox="0 0 1024 1024"><path d="M832 148.032V832H148.032z"  ></path></symbol><symbol id="icon-chart-pie-alt" viewBox="0 0 1024 1024"><path d="M85.312 512a426.688 426.688 0 0 0 844.8 85.312H426.688V93.888A426.816 426.816 0 0 0 85.312 512zM512 0v512h512a512 512 0 1 1-512-512z m506.816 438.848H585.152V5.184a512.32 512.32 0 0 1 433.664 433.664z"  ></path></symbol><symbol id="icon-chart-relation" viewBox="0 0 1024 1024"><path d="M403.520683 655.339712l-91.333603 68.819998a127.918212 127.918212 0 1 1-36.392732-52.638344l93.700091-70.610853a223.856872 223.856872 0 0 1 292.612911-296.130662l31.915593-71.634199a127.918212 127.918212 0 1 1 59.929683 22.641524l-36.776486 82.507247a223.409158 223.409158 0 0 1 81.164106 172.497709c0 55.772341-20.338996 106.747748-54.045445 145.890721l99.200574 122.545648a127.918212 127.918212 0 1 1-50.016021 39.846523l-97.409719-120.24312c-34.985631 22.641524-76.750927 35.817099-121.586261 35.8171a223.345199 223.345199 0 0 1-170.962691-79.309292z"  ></path></symbol><symbol id="icon-chart-scatter-plot" viewBox="0 0 1024 1024"><path d="M85.504 938.688H1024V1024H0v-85.312h0.192V0h85.312v938.688zM384.192 512a128 128 0 1 1 0-256 128 128 0 0 1 0 256z m298.688 298.688a128 128 0 1 1 0-256 128 128 0 0 1 0 256zM320.192 213.312a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m-42.688 597.376a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m426.688-341.376a64 64 0 1 1 0-128 64 64 0 0 1 0 128zM917.504 384a64 64 0 1 1 0-128 64 64 0 0 1 0 128zM746.88 170.688a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m-298.688 512a64 64 0 1 1 0-128 64 64 0 0 1 0 128z"  ></path></symbol><symbol id="icon-chart-area" viewBox="0 0 1024 1024"><path d="M85.504 938.688H1024V1024H0v-85.312h0.192V0h85.312v938.688zM128 723.328l212.736-271.552 303.424 155.52L990.912 256v632.64H128v-165.312z"  ></path></symbol><symbol id="icon-chart-line" viewBox="0 0 1024 1024"><path d="M85.504 938.688H1024V1024H0v-85.312h0.192V0h85.312v938.688z m120.256-169.984l-70.208-48.512L372.48 377.728l303.424 155.52 265.472-345.92 67.712 51.968-308.8 402.304-300.16-153.856-194.368 280.96z"  ></path></symbol><symbol id="icon-chart-bar" viewBox="0 0 1024 1024"><path d="M85.312 938.688H1024V1024H0V0h85.312v938.688zM256 341.312h85.312V768H256V341.312zM512 128h85.312v640H512V128z m256 213.312h85.312V768H768V341.312z"  ></path></symbol><symbol id="icon-display-code" viewBox="0 0 1024 1024"><path d="M85.312 164.8v604.8h853.376v-604.8H85.312zM682.688 870.4V960H341.312v-89.6H0V64h1024v806.4h-341.312zM390.08 632.128L128 503.04V422.336l262.08-128.64V390.4L230.784 462.976l159.296 72.832v96.32zM529.6 256H576l-82.048 413.184H448L529.6 256z m104.32 376.128V535.808l159.296-72.832-159.296-72.512V293.632L896 422.4v80.768L633.92 632.128z"  ></path></symbol><symbol id="icon-display-arrow-right" viewBox="0 0 1024 1024"><path d="M85.312 164.8v604.8h853.376v-604.8H85.312zM682.688 870.4V960H341.312v-89.6H0V64h1024v806.4h-341.312z m-64-454.4H192v106.688h426.688v160L832 469.312 618.688 256v160z"  ></path></symbol><symbol id="icon-display-arrow-left" viewBox="0 0 1024 1024"><path d="M85.312 164.8v604.8h853.376v-604.8H85.312zM682.688 870.4V960H341.312v-89.6H0V64h1024v806.4h-341.312zM405.312 416H832v106.688H405.312v160L192 469.312 405.312 256v160z"  ></path></symbol><symbol id="icon-laptop-error" viewBox="0 0 1024 1024"><path d="M85.312 164.8v604.8h853.376v-604.8H85.312zM682.688 870.4V960H341.312v-89.6H0V64h1024v806.4h-341.312z m-71.68-574.528l58.24 58.24-261.888 261.76-58.176-58.112 261.888-261.888z m58.24 261.888l-58.24 58.112-261.76-261.76 58.112-58.24 261.824 261.888z"  ></path></symbol><symbol id="icon-laptop-check" viewBox="0 0 1024 1024"><path d="M85.312 164.8v604.8h853.376v-604.8H85.312zM682.688 870.4V960H341.312v-89.6H0V64h1024v806.4h-341.312zM499.2 533.76L708.288 320l59.712 61.12-268.8 274.88L320 472.704l59.712-61.056L499.2 533.76z"  ></path></symbol><symbol id="icon-laptop" viewBox="0 0 1024 1024"><path d="M85.312 164.8v604.8h853.376v-604.8H85.312zM682.688 870.4V960H341.312v-89.6H0V64h1024v806.4h-341.312z"  ></path></symbol></svg>',function(e){var t,n=(t=(t=document.getElementsByTagName("script"))[t.length-1]).getAttribute("data-injectcss");if(!(t=t.getAttribute("data-disable-injectsvg"))){var o,i,a,r,l;if(n&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}o=function(){var t,n=document.createElement("div");n.innerHTML=e._iconfont_svg_string_3593376,(n=n.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",n=n,(t=document.body).firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(n,t.firstChild):t.appendChild(n))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(o,0):(i=function(){document.removeEventListener("DOMContentLoaded",i,!1),o()},document.addEventListener("DOMContentLoaded",i,!1)):document.attachEvent&&(a=o,r=e.document,l=!1,function e(){try{r.documentElement.doScroll("left")}catch(t){return void setTimeout(e,50)}s()}(),r.onreadystatechange=function(){"complete"==r.readyState&&(r.onreadystatechange=null,s())})}function s(){l||(l=!0,a())}}(window)},Ozts:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),l=n("//Fk"),s=n.n(l),c=n("mvHQ"),u=n.n(c),d=n("Z5jg"),h=n("dTD7"),f=n("0xDb"),p={components:{filesList:d.a,uploadForAliyuncs:h.a},data:function(){return{fileDialogVisible:!1,fileList:[],baseData:{uploadNum:1},fieldCanEdit:!1,formData:{},processMap:{},needSave:null,saveKey:"",url:""}},watch:{fileDialogVisible:function(){this.fileDialogVisible||(this.fileList=this.fileList.filter(function(e){return e.url}),this.needSave?u()(this.needSave[this.saveKey])==u()(this.fileList)||(this.needSave[this.saveKey]=Object(f.e)(this.fileList),this.$emit("fileListChange",this.needSave)):this.$emit("fileListChange",this.fileList))}},methods:{uploadProcess:function(e){this.$set(this,"processMap",e)},uploadSuccess:function(e,t,n,o){for(var i in this.fileList){var a=this.fileList[i];a.uid&&a.uid==t.uid&&this.$set(this.fileList,i,{name:a.name,size:a.size,status:"success",uid:t.uuid,url:o+"/"+e.filename})}},beforeUpload:function(e,t){this.fileList&&Array.isArray(this.fileList)?this.fileList.push(e):this.fileList=[e],this.$set(this,"processMap",t)},close:function(e){var t,n=this;return new s.a((t=r()(i.a.mark(function e(t,o){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in a=!1,n.processMap)n.processMap[r]<100&&(a=!0);if(!a){e.next=7;break}return e.next=5,n.$confirm("文件没有上传完毕，关闭将结束未上传的文件，确定关闭?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t()}).catch(function(e){o()});case 5:e.next=8;break;case 7:t();case 8:case"end":return e.stop()}},e,n)})),function(e,n){return t.apply(this,arguments)}))},deleteImage:function(e,t){this.fileList.splice(t,1)},init:function(e,t,n){console.log(e,t,n),this.processMap={},this.fileList=e[t.key]?Object(f.e)(e[t.key]):[],this.fieldCanEdit=n,this.baseData=t,this.needSave=Object(f.e)(e),this.saveKey=t.key,this.fileDialogVisible=!0}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"50%",height:"70%",title:"文件","before-hide-method":e.close},model:{value:e.fileDialogVisible,callback:function(t){e.fileDialogVisible=t},expression:"fileDialogVisible"}},[n("uploadForAliyuncs",{staticStyle:{"margin-bottom":"10px"},attrs:{modelDate:e.fileList,limit:e.baseData.uploadNum},on:{uploadProcess:e.uploadProcess,onSuccess:e.uploadSuccess,beforeUpload:e.beforeUpload}},[e.fieldCanEdit?n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传文件")]):e._e()],1),e._v(" "),n("div",[n("filesList",{attrs:{modelDate:e.fileList,isView:!e.fieldCanEdit,processMap:e.processMap},on:{delete:e.deleteImage}})],1)],1)},staticRenderFns:[]};var v=n("VU/8")(p,m,!1,function(e){n("3hj+")},"data-v-4f85e5bf",null);t.default=v.exports},P3OB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-geren",use:"icon-geren-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-geren"><defs><style type="text/css"></style></defs><path d="M586.945923 513.581008c55.067176-27.962865 92.91211-85.125773 92.91211-150.998039 0-93.338828-75.937506-169.276335-169.277358-169.276335s-169.275311 75.937506-169.275311 169.276335c0 65.872267 37.844933 123.034151 92.911086 150.998039-95.652524 32.016181-164.778904 122.45496-164.778904 228.743728 0 11.31572 9.17394 20.491707 20.491707 20.491707s20.491707-9.174963 20.491707-20.491707c0-110.36869 89.791026-200.160739 200.160739-200.160739S710.741413 631.956046 710.741413 742.324736c0 11.31572 9.17394 20.491707 20.491707 20.491707s20.491707-9.174963 20.491707-20.491707C751.723803 636.035968 682.598446 545.598212 586.945923 513.581008zM382.287753 362.582969c0-70.742181 57.552787-128.293945 128.292921-128.293945 70.742181 0 128.293945 57.552787 128.293945 128.293945 0 70.741157-57.552787 128.292921-128.293945 128.292921C439.84054 490.876913 382.287753 433.324126 382.287753 362.582969z" p-id="3638" /><path d="M827.871087 196.127889C743.498468 111.757317 631.320573 65.290005 512 65.290005S280.500509 111.756293 196.128913 196.127889C111.756293 280.501532 65.291029 392.678404 65.291029 511.998977s46.465265 231.499491 130.837884 315.872111 196.550515 130.837884 315.871087 130.837884 231.498468-46.465265 315.871087-130.837884S958.708971 631.319549 958.708971 511.998977 912.243707 280.500509 827.871087 196.127889zM512 917.726581c-223.718271 0-405.726581-182.007287-405.726581-405.727605 0-223.718271 182.00831-405.726581 405.726581-405.726581s405.726581 182.007287 405.726581 405.726581C917.726581 735.719294 735.718271 917.726581 512 917.726581z" p-id="3639" /></symbol>'});r.a.add(l);t.default=l},PIfk:function(e,t,n){"use strict";var o={};n.d(o,"requestAnimationFrame",function(){return M}),n.d(o,"isClassListSupported",function(){return P}),n.d(o,"isTextContentSupported",function(){return A}),n.d(o,"isGetComputedStyleSupported",function(){return L}),n.d(o,"cancelAnimationFrame",function(){return N}),n.d(o,"isTouchSupported",function(){return V}),n.d(o,"hasCaptionProblem",function(){return F}),n.d(o,"getComparisonFunction",function(){return B}),n.d(o,"isPassiveEventSupported",function(){return H});var i={};n.d(i,"to2dArray",function(){return j}),n.d(i,"extendArray",function(){return $}),n.d(i,"pivot",function(){return U}),n.d(i,"arrayReduce",function(){return z}),n.d(i,"arrayFilter",function(){return W}),n.d(i,"arrayMap",function(){return q}),n.d(i,"arrayEach",function(){return K}),n.d(i,"arraySum",function(){return G}),n.d(i,"arrayMax",function(){return J}),n.d(i,"arrayMin",function(){return Y}),n.d(i,"arrayAvg",function(){return X}),n.d(i,"arrayFlatten",function(){return Q}),n.d(i,"arrayUnique",function(){return Z}),n.d(i,"getDifferenceOfArrays",function(){return ee}),n.d(i,"getIntersectionOfArrays",function(){return te}),n.d(i,"getUnionOfArrays",function(){return ne}),n.d(i,"stringToArray",function(){return oe});var a={};n.d(a,"duckSchema",function(){return re}),n.d(a,"inherit",function(){return le}),n.d(a,"extend",function(){return se}),n.d(a,"deepExtend",function(){return ce}),n.d(a,"deepClone",function(){return ue}),n.d(a,"clone",function(){return de}),n.d(a,"mixin",function(){return he}),n.d(a,"isObjectEqual",function(){return fe}),n.d(a,"isObject",function(){return pe}),n.d(a,"defineGetter",function(){return me}),n.d(a,"objectEach",function(){return ve}),n.d(a,"getProperty",function(){return be}),n.d(a,"setProperty",function(){return ye}),n.d(a,"deepObjectSize",function(){return ge}),n.d(a,"createObjectPropListener",function(){return we}),n.d(a,"hasOwnProperty",function(){return _e});var r={};n.d(r,"setBrowserMeta",function(){return Se}),n.d(r,"setPlatformMeta",function(){return Te}),n.d(r,"isChrome",function(){return Ee}),n.d(r,"isChromeWebKit",function(){return Oe}),n.d(r,"isFirefox",function(){return De}),n.d(r,"isFirefoxWebKit",function(){return Ie}),n.d(r,"isSafari",function(){return Re}),n.d(r,"isEdge",function(){return Me}),n.d(r,"isEdgeWebKit",function(){return Pe}),n.d(r,"isIE",function(){return Ae}),n.d(r,"isIE9",function(){return Le}),n.d(r,"isMSBrowser",function(){return Ne}),n.d(r,"isMobileBrowser",function(){return Ve}),n.d(r,"isIOS",function(){return Fe}),n.d(r,"isIpadOS",function(){return Be}),n.d(r,"isWindowsOS",function(){return He}),n.d(r,"isMacOS",function(){return je}),n.d(r,"isLinuxOS",function(){return $e});var l={};n.d(l,"stringify",function(){return nt}),n.d(l,"isDefined",function(){return ot}),n.d(l,"isUndefined",function(){return it}),n.d(l,"isEmpty",function(){return at}),n.d(l,"isRegExp",function(){return rt}),n.d(l,"_injectProductInfo",function(){return _t});var s={};n.d(s,"toUpperCaseFirst",function(){return Ct}),n.d(s,"equalsIgnoreCase",function(){return kt}),n.d(s,"randomString",function(){return xt}),n.d(s,"isPercentValue",function(){return St}),n.d(s,"substitute",function(){return Tt}),n.d(s,"stripTags",function(){return Et}),n.d(s,"sanitize",function(){return Ot});var c={};n.d(c,"getParent",function(){return Rt}),n.d(c,"getFrameElement",function(){return Mt}),n.d(c,"getParentWindow",function(){return Pt}),n.d(c,"hasAccessToParentWindow",function(){return At}),n.d(c,"closest",function(){return Lt}),n.d(c,"closestDown",function(){return Nt}),n.d(c,"isChildOf",function(){return Vt}),n.d(c,"index",function(){return Ft}),n.d(c,"overlayContainsElement",function(){return Bt}),n.d(c,"hasClass",function(){return Ut}),n.d(c,"addClass",function(){return zt}),n.d(c,"removeClass",function(){return Wt}),n.d(c,"removeTextNodes",function(){return qt}),n.d(c,"empty",function(){return Kt}),n.d(c,"HTML_CHARACTERS",function(){return Jt}),n.d(c,"fastInnerHTML",function(){return Yt}),n.d(c,"fastInnerText",function(){return Xt}),n.d(c,"isVisible",function(){return Qt}),n.d(c,"offset",function(){return Zt}),n.d(c,"getWindowScrollTop",function(){return en}),n.d(c,"getWindowScrollLeft",function(){return tn}),n.d(c,"getScrollTop",function(){return nn}),n.d(c,"getScrollLeft",function(){return on}),n.d(c,"getScrollableElement",function(){return an}),n.d(c,"getTrimmingContainer",function(){return rn}),n.d(c,"getStyle",function(){return ln}),n.d(c,"matchesCSSRules",function(){return sn}),n.d(c,"getComputedStyle",function(){return cn}),n.d(c,"outerWidth",function(){return un}),n.d(c,"outerHeight",function(){return dn}),n.d(c,"innerHeight",function(){return hn}),n.d(c,"innerWidth",function(){return fn}),n.d(c,"addEvent",function(){return pn}),n.d(c,"removeEvent",function(){return mn}),n.d(c,"getCaretPosition",function(){return vn}),n.d(c,"getSelectionEndPosition",function(){return bn}),n.d(c,"getSelectionText",function(){return yn}),n.d(c,"clearTextSelection",function(){return gn}),n.d(c,"setCaretPosition",function(){return wn}),n.d(c,"getScrollbarWidth",function(){return _n}),n.d(c,"hasVerticalScrollbar",function(){return Cn}),n.d(c,"hasHorizontalScrollbar",function(){return kn}),n.d(c,"setOverlayPosition",function(){return xn}),n.d(c,"getCssTransform",function(){return Sn}),n.d(c,"resetCssTransform",function(){return Tn}),n.d(c,"isInput",function(){return En}),n.d(c,"isOutsideInput",function(){return On}),n.d(c,"selectElementIfAllowed",function(){return Dn}),n.d(c,"isDetached",function(){return In});var u={};n.d(u,"isFunction",function(){return Rn}),n.d(u,"throttle",function(){return Mn}),n.d(u,"throttleAfterHits",function(){return Pn}),n.d(u,"debounce",function(){return An}),n.d(u,"pipe",function(){return Ln}),n.d(u,"partial",function(){return Nn}),n.d(u,"curry",function(){return Vn}),n.d(u,"curryRight",function(){return Fn});var d={};n.d(d,"stopImmediatePropagation",function(){return $i}),n.d(d,"isImmediatePropagationStopped",function(){return Ui}),n.d(d,"isRightClick",function(){return zi}),n.d(d,"isLeftClick",function(){return Wi});var h={};n.d(h,"KEY_CODES",function(){return yr}),n.d(h,"isPrintableChar",function(){return gr}),n.d(h,"isMetaKey",function(){return wr}),n.d(h,"isCtrlKey",function(){return _r}),n.d(h,"isCtrlMetaKey",function(){return Cr}),n.d(h,"isKey",function(){return kr});var f={};n.d(f,"instanceToHTML",function(){return Rl}),n.d(f,"_dataToHTML",function(){return Ml}),n.d(f,"htmlToGridSettings",function(){return Pl});var p={};n.d(p,"isNumeric",function(){return Ll}),n.d(p,"rangeEach",function(){return Nl}),n.d(p,"rangeEachReverse",function(){return Vl}),n.d(p,"valueAccordingPercent",function(){return Fl});var m={};n.d(m,"spreadsheetColumnLabel",function(){return Xs}),n.d(m,"spreadsheetColumnIndex",function(){return Qs}),n.d(m,"createSpreadsheetData",function(){return Zs}),n.d(m,"createSpreadsheetObjectData",function(){return ec}),n.d(m,"createEmptySpreadsheetData",function(){return tc}),n.d(m,"translateRowsToColumns",function(){return nc}),n.d(m,"cellMethodLookupFactory",function(){return oc}),n.d(m,"dataRowToChangesArray",function(){return ic}),n.d(m,"countFirstRowKeys",function(){return ac});var v={};n.d(v,"CONTEXT_MENU_ITEMS_NAMESPACE",function(){return Uu}),n.d(v,"CONTEXTMENU_ITEMS_NO_ITEMS",function(){return zu}),n.d(v,"CONTEXTMENU_ITEMS_ROW_ABOVE",function(){return Wu}),n.d(v,"CONTEXTMENU_ITEMS_ROW_BELOW",function(){return qu}),n.d(v,"CONTEXTMENU_ITEMS_INSERT_LEFT",function(){return Ku}),n.d(v,"CONTEXTMENU_ITEMS_INSERT_RIGHT",function(){return Gu}),n.d(v,"CONTEXTMENU_ITEMS_REMOVE_ROW",function(){return Ju}),n.d(v,"CONTEXTMENU_ITEMS_REMOVE_COLUMN",function(){return Yu}),n.d(v,"CONTEXTMENU_ITEMS_UNDO",function(){return Xu}),n.d(v,"CONTEXTMENU_ITEMS_REDO",function(){return Qu}),n.d(v,"CONTEXTMENU_ITEMS_READ_ONLY",function(){return Zu}),n.d(v,"CONTEXTMENU_ITEMS_CLEAR_COLUMN",function(){return ed}),n.d(v,"CONTEXTMENU_ITEMS_COPY",function(){return td}),n.d(v,"CONTEXTMENU_ITEMS_CUT",function(){return nd}),n.d(v,"CONTEXTMENU_ITEMS_FREEZE_COLUMN",function(){return od}),n.d(v,"CONTEXTMENU_ITEMS_UNFREEZE_COLUMN",function(){return id}),n.d(v,"CONTEXTMENU_ITEMS_MERGE_CELLS",function(){return ad}),n.d(v,"CONTEXTMENU_ITEMS_UNMERGE_CELLS",function(){return rd}),n.d(v,"CONTEXTMENU_ITEMS_ADD_COMMENT",function(){return ld}),n.d(v,"CONTEXTMENU_ITEMS_EDIT_COMMENT",function(){return sd}),n.d(v,"CONTEXTMENU_ITEMS_REMOVE_COMMENT",function(){return cd}),n.d(v,"CONTEXTMENU_ITEMS_READ_ONLY_COMMENT",function(){return ud}),n.d(v,"CONTEXTMENU_ITEMS_ALIGNMENT",function(){return dd}),n.d(v,"CONTEXTMENU_ITEMS_ALIGNMENT_LEFT",function(){return hd}),n.d(v,"CONTEXTMENU_ITEMS_ALIGNMENT_CENTER",function(){return fd}),n.d(v,"CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT",function(){return pd}),n.d(v,"CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY",function(){return md}),n.d(v,"CONTEXTMENU_ITEMS_ALIGNMENT_TOP",function(){return vd}),n.d(v,"CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE",function(){return bd}),n.d(v,"CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM",function(){return yd}),n.d(v,"CONTEXTMENU_ITEMS_BORDERS",function(){return gd}),n.d(v,"CONTEXTMENU_ITEMS_BORDERS_TOP",function(){return wd}),n.d(v,"CONTEXTMENU_ITEMS_BORDERS_RIGHT",function(){return _d}),n.d(v,"CONTEXTMENU_ITEMS_BORDERS_BOTTOM",function(){return Cd}),n.d(v,"CONTEXTMENU_ITEMS_BORDERS_LEFT",function(){return kd}),n.d(v,"CONTEXTMENU_ITEMS_REMOVE_BORDERS",function(){return xd}),n.d(v,"CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD",function(){return Sd}),n.d(v,"CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD",function(){return Td}),n.d(v,"CONTEXTMENU_ITEMS_HIDE_COLUMN",function(){return Ed}),n.d(v,"CONTEXTMENU_ITEMS_SHOW_COLUMN",function(){return Od}),n.d(v,"CONTEXTMENU_ITEMS_HIDE_ROW",function(){return Dd}),n.d(v,"CONTEXTMENU_ITEMS_SHOW_ROW",function(){return Id}),n.d(v,"FILTERS_NAMESPACE",function(){return Rd}),n.d(v,"FILTERS_CONDITIONS_NAMESPACE",function(){return Md}),n.d(v,"FILTERS_CONDITIONS_NONE",function(){return Pd}),n.d(v,"FILTERS_CONDITIONS_EMPTY",function(){return Ad}),n.d(v,"FILTERS_CONDITIONS_NOT_EMPTY",function(){return Ld}),n.d(v,"FILTERS_CONDITIONS_EQUAL",function(){return Nd}),n.d(v,"FILTERS_CONDITIONS_NOT_EQUAL",function(){return Vd}),n.d(v,"FILTERS_CONDITIONS_BEGINS_WITH",function(){return Fd}),n.d(v,"FILTERS_CONDITIONS_ENDS_WITH",function(){return Bd}),n.d(v,"FILTERS_CONDITIONS_CONTAINS",function(){return Hd}),n.d(v,"FILTERS_CONDITIONS_NOT_CONTAIN",function(){return jd}),n.d(v,"FILTERS_CONDITIONS_BY_VALUE",function(){return $d}),n.d(v,"FILTERS_CONDITIONS_GREATER_THAN",function(){return Ud}),n.d(v,"FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL",function(){return zd}),n.d(v,"FILTERS_CONDITIONS_LESS_THAN",function(){return Wd}),n.d(v,"FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL",function(){return qd}),n.d(v,"FILTERS_CONDITIONS_BETWEEN",function(){return Kd}),n.d(v,"FILTERS_CONDITIONS_NOT_BETWEEN",function(){return Gd}),n.d(v,"FILTERS_CONDITIONS_AFTER",function(){return Jd}),n.d(v,"FILTERS_CONDITIONS_BEFORE",function(){return Yd}),n.d(v,"FILTERS_CONDITIONS_TODAY",function(){return Xd}),n.d(v,"FILTERS_CONDITIONS_TOMORROW",function(){return Qd}),n.d(v,"FILTERS_CONDITIONS_YESTERDAY",function(){return Zd}),n.d(v,"FILTERS_DIVS_FILTER_BY_CONDITION",function(){return eh}),n.d(v,"FILTERS_DIVS_FILTER_BY_VALUE",function(){return th}),n.d(v,"FILTERS_LABELS_CONJUNCTION",function(){return nh}),n.d(v,"FILTERS_LABELS_DISJUNCTION",function(){return oh}),n.d(v,"FILTERS_VALUES_BLANK_CELLS",function(){return ih}),n.d(v,"FILTERS_BUTTONS_SELECT_ALL",function(){return ah}),n.d(v,"FILTERS_BUTTONS_CLEAR",function(){return rh}),n.d(v,"FILTERS_BUTTONS_OK",function(){return lh}),n.d(v,"FILTERS_BUTTONS_CANCEL",function(){return sh}),n.d(v,"FILTERS_BUTTONS_PLACEHOLDER_SEARCH",function(){return ch}),n.d(v,"FILTERS_BUTTONS_PLACEHOLDER_VALUE",function(){return uh}),n.d(v,"FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE",function(){return dh});var b={};n.d(b,"getNormalizedDate",function(){return am});var y={};n.d(y,"OPERATION_NAME",function(){return PI}),n.d(y,"prepare",function(){return AI}),n.d(y,"operate",function(){return LI});var g={};n.d(g,"OPERATION_NAME",function(){return NI}),n.d(g,"operate",function(){return VI});var w={};n.d(w,"OPERATION_NAME",function(){return BI}),n.d(w,"operate",function(){return HI});var _={};n.d(_,"OPERATION_NAME",function(){return $I}),n.d(_,"operate",function(){return UI});var C={};n.d(C,"OPERATION_NAME",function(){return WI}),n.d(C,"operate",function(){return qI});n("US6E"),n("lA79"),n("wzK5"),n("54Mk"),n("Lnvb"),n("Ce2z"),n("W2fr"),n("EjRB"),n("T3bJ"),n("M0lo"),n("m3hU"),n("PMeV"),n("ZvGJ"),n("gJcZ"),n("ppo+"),n("S6GF"),n("9RBX"),n("qCS0"),n("cIvg"),n("DT4t"),n("G+zW"),n("iP6t"),n("Xycq"),n("TxSo"),n("Vqq8"),n("bC2b"),n("UuBo"),n("icH0"),n("KkBB"),n("+LrG"),n("YSkm"),n("M7xF");function k(e){"@babel/helpers - typeof";return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}for(var x,S,T,E=0,O=["ms","moz","webkit","o"],D=window.requestAnimationFrame,I=window.cancelAnimationFrame,R=0;R<O.length&&!D;++R)D=window["".concat(O[R],"RequestAnimationFrame")],I=window["".concat(O[R],"CancelAnimationFrame")]||window["".concat(O[R],"CancelRequestAnimationFrame")];function M(e){return D.call(window,e)}function P(){return!!document.documentElement.classList}function A(){return!!document.createTextNode("test").textContent}function L(){return!!window.getComputedStyle}function N(e){I.call(window,e)}function V(){return"ontouchstart"in window}function F(){return void 0===x&&function(){var e=document.createElement("TABLE");e.style.borderSpacing="0",e.style.borderWidth="0",e.style.padding="0";var t=document.createElement("TBODY");e.appendChild(t),t.appendChild(document.createElement("TR")),t.firstChild.appendChild(document.createElement("TD")),t.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var n=document.createElement("CAPTION");n.innerHTML="c<br>c<br>c<br>c",n.style.padding="0",n.style.margin="0",e.insertBefore(n,t),document.body.appendChild(e),x=e.offsetHeight<2*e.lastChild.offsetHeight,document.body.removeChild(e)}(),x}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S||(S="object"===("undefined"==typeof Intl?"undefined":k(Intl))?new Intl.Collator(e,t).compare:"function"==typeof String.prototype.localeCompare?function(e,t){return"".concat(e).localeCompare(t)}:function(e,t){return e===t?0:e>t?-1:1})}function H(){if(void 0!==T)return T;try{var e={get passive(){T=!0}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){T=!1}return T}D||(D=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-E)),o=window.setTimeout(function(){e(t+n)},n);return E=t+n,o}),I||(I=function(e){clearTimeout(e)});n("6iOU");function j(e){for(var t=e.length,n=0;n<t;)e[n]=[e[n]],n+=1}function $(e,t){for(var n=t.length,o=0;o<n;)e.push(t[o]),o+=1}function U(e){var t=[];if(!e||0===e.length||!e[0]||0===e[0].length)return t;for(var n=e.length,o=e[0].length,i=0;i<n;i++)for(var a=0;a<o;a++)t[a]||(t[a]=[]),t[a][i]=e[i][a];return t}function z(e,t,n,o){var i=-1,a=e,r=n;Array.isArray(e)||(a=Array.from(e));var l=a.length;for(o&&l&&(r=a[i+=1]),i+=1;i<l;)r=t(r,a[i],i,a),i+=1;return r}function W(e,t){var n=0,o=e;Array.isArray(e)||(o=Array.from(e));for(var i=o.length,a=[],r=-1;n<i;){var l=o[n];t(l,n,o)&&(a[r+=1]=l),n+=1}return a}function q(e,t){var n=0,o=e;Array.isArray(e)||(o=Array.from(e));for(var i=o.length,a=[],r=-1;n<i;){var l=o[n];a[r+=1]=t(l,n,o),n+=1}return a}function K(e,t){var n=0,o=e;Array.isArray(e)||(o=Array.from(e));for(var i=o.length;n<i&&!1!==t(o[n],n,o);)n+=1;return e}function G(e){return z(e,function(e,t){return e+t},0)}function J(e){return z(e,function(e,t){return e>t?e:t},Array.isArray(e)?e[0]:void 0)}function Y(e){return z(e,function(e,t){return e<t?e:t},Array.isArray(e)?e[0]:void 0)}function X(e){return e.length?G(e)/e.length:0}function Q(e){return z(e,function(e,t){return e.concat(Array.isArray(t)?Q(t):t)},[])}function Z(e){var t=[];return K(e,function(e){-1===t.indexOf(e)&&t.push(e)}),t}function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=[].concat(t),i=o[0];return K(o.slice(1),function(e){i=i.filter(function(t){return!e.includes(t)})}),i}function te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=[].concat(t),i=o[0];return K(o.slice(1),function(e){i=i.filter(function(t){return e.includes(t)})}),i}function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=[].concat(t),i=o[0],a=o.slice(1),r=new Set(i);return K(a,function(e){K(e,function(e){r.has(e)||r.add(e)})}),Array.from(r)}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.split(t)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){"@babel/helpers - typeof";return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e){var t;return Array.isArray(e)?t=[]:(t={},ve(e,function(e,n){"__children"!==n&&(e&&"object"===ae(e)&&!Array.isArray(e)?t[n]=re(e):Array.isArray(e)?e.length&&"object"===ae(e[0])&&!Array.isArray(e[0])?t[n]=[re(e[0])]:t[n]=[]:t[n]=null)})),t}function le(e,t){return t.prototype.constructor=t,e.prototype=new t,e.prototype.constructor=e,e}function se(e,t,n){var o=Array.isArray(n);return ve(t,function(t,i){(!1===o||n.includes(i))&&(e[i]=t)}),e}function ce(e,t){ve(t,function(n,o){t[o]&&"object"===ae(t[o])?(e[o]||(Array.isArray(t[o])?e[o]=[]:"[object Date]"===Object.prototype.toString.call(t[o])?e[o]=t[o]:e[o]={}),ce(e[o],t[o])):e[o]=t[o]})}function ue(e){return"object"===ae(e)?JSON.parse(JSON.stringify(e)):e}function de(e){var t={};return ve(e,function(e,n){t[n]=e}),t}function he(e){e.MIXINS||(e.MIXINS=[]);for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return K(n,function(t){e.MIXINS.push(t.MIXIN_NAME),ve(t,function(t,n){if(void 0!==e.prototype[n])throw new Error("Mixin conflict. Property '".concat(n,"' already exist and cannot be overwritten."));if("function"==typeof t)e.prototype[n]=t;else{Object.defineProperty(e.prototype,n,{get:(o=n,i=t,a="_".concat(o),function(){var e;return void 0===this[a]&&(this[a]=(e=i,(Array.isArray(e)||pe(e))&&(e=ue(e)),e)),this[a]}),set:function(e){var t="_".concat(e);return function(e){this[t]=e}}(n),configurable:!0})}var o,i,a})}),e}function fe(e,t){return JSON.stringify(e)===JSON.stringify(t)}function pe(e){return"[object Object]"===Object.prototype.toString.call(e)}function me(e,t,n,o){o.value=n,o.writable=!1!==o.writable,o.enumerable=!1!==o.enumerable,o.configurable=!1!==o.configurable,Object.defineProperty(e,t,o)}function ve(e,t){for(var n in e)if((!e.hasOwnProperty||e.hasOwnProperty&&Object.prototype.hasOwnProperty.call(e,n))&&!1===t(e[n],n,e))break;return e}function be(e,t){var n=e;return ve(t.split("."),function(e){if(void 0===(n=n[e]))return n=void 0,!1}),n}function ye(e,t,n){var o=t.split("."),i=e;o.forEach(function(e,t){t!==o.length-1?(_e(i,e)||(i[e]={}),i=i[e]):i[e]=n})}function ge(e){if(!pe(e))return 0;return function e(t){var n=0;return pe(t)?ve(t,function(t,o){"__children"!==o&&(n+=e(t))}):n+=1,n}(e)}function we(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",o="_".concat(n),i=(ie(t={_touched:!1},o,e),ie(t,"isTouched",function(){return this._touched}),t);return Object.defineProperty(i,n,{get:function(){return this[o]},set:function(e){this._touched=!0,this[o]=e},enumerable:!0,configurable:!0}),i}function _e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Ce=function(e){var t={value:!1,test:function(n,o){t.value=e(n,o)}};return t},ke={chrome:Ce(function(e,t){return/Chrome/.test(e)&&/Google/.test(t)}),chromeWebKit:Ce(function(e){return/CriOS/.test(e)}),edge:Ce(function(e){return/Edge/.test(e)}),edgeWebKit:Ce(function(e){return/EdgiOS/.test(e)}),firefox:Ce(function(e){return/Firefox/.test(e)}),firefoxWebKit:Ce(function(e){return/FxiOS/.test(e)}),ie:Ce(function(e){return/Trident/.test(e)}),ie9:Ce(function(){return!!document.documentMode}),mobile:Ce(function(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)}),safari:Ce(function(e,t){return/Safari/.test(e)&&/Apple Computer/.test(t)})},xe={mac:Ce(function(e){return/^Mac/.test(e)}),win:Ce(function(e){return/^Win/.test(e)}),linux:Ce(function(e){return/^Linux/.test(e)}),ios:Ce(function(e){return/iPhone|iPad|iPod/i.test(e)})};function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userAgent,n=void 0===t?navigator.userAgent:t,o=e.vendor,i=void 0===o?navigator.vendor:o;ve(ke,function(e){(0,e.test)(n,i)})}function Te(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).platform,t=void 0===e?navigator.platform:e;ve(xe,function(e){(0,e.test)(t)})}function Ee(){return ke.chrome.value}function Oe(){return ke.chromeWebKit.value}function De(){return ke.firefox.value}function Ie(){return ke.firefoxWebKit.value}function Re(){return ke.safari.value}function Me(){return ke.edge.value}function Pe(){return ke.edgeWebKit.value}function Ae(){return ke.ie.value}function Le(){return ke.ie9.value}function Ne(){return ke.ie.value||ke.edge.value}function Ve(){return ke.mobile.value}function Fe(){return xe.ios.value}function Be(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator).maxTouchPoints>2&&xe.mac.value}function He(){return xe.win.value}function je(){return xe.mac.value}function $e(){return xe.linux.value}Se(),Te();var Ue,ze,We,qe,Ke,Ge,Je=n("OvQW"),Ye=n.n(Je),Xe=(n("VfGS"),n("giZ7"),n("kn1m"),n("ANXY")),Qe=n.n(Xe);function Ze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return z(e,function(e,t,o){return e+t.replace(/\r?\n\s*/g,"")+(n[o]?n[o]:"")},"").trim()}function et(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function tt(e){"@babel/helpers - typeof";return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e){var t;switch(tt(e)){case"string":case"number":t="".concat(e);break;case"object":t=null===e?"":e.toString();break;case"undefined":t="";break;default:t=e.toString()}return t}function ot(e){return void 0!==e}function it(e){return void 0===e}function at(e){return null===e||""===e||it(e)}function rt(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var lt,st,ct,ut="length",dt=function(e){return parseInt(e,16)},ht=function(e){return parseInt(e,10)},ft=function(e,t,n){return e.substr(t,n)},pt=function(e){return e.codePointAt(0)-65},mt=function(e){return"".concat(e).replace(/\-/g,"")},vt=function(e){return dt(ft(mt(e),dt("12"),pt("F")))/(dt(ft(mt(e),pt("B"),~~![][ut]))||9)},bt=function(){return"undefined"!=typeof location&&/^([a-z0-9\-]+\.)?\x68\x61\x6E\x64\x73\x6F\x6E\x74\x61\x62\x6C\x65\x2E\x63\x6F\x6D$/i.test(location.host)},yt=!1,gt={invalid:function(){return Ze(Ue||(Ue=et(["\n    The license key for Handsontable is invalid. \n    If you need any help, contact us at support@handsontable.com."],["\n    The license key for Handsontable is invalid.\\x20\n    If you need any help, contact us at support@handsontable.com."])))},expired:function(e){var t=e.keyValidityDate,n=e.hotVersion;return Ze(ze||(ze=et(["\n    The license key for Handsontable expired on ",", and is not valid for the installed \n    version ",". Renew your license key at handsontable.com or downgrade to a version released prior \n    to ",". If you need any help, contact us at sales@handsontable.com."],["\n    The license key for Handsontable expired on ",", and is not valid for the installed\\x20\n    version ",". Renew your license key at handsontable.com or downgrade to a version released prior\\x20\n    to ",". If you need any help, contact us at sales@handsontable.com."])),t,n,t)},missing:function(){return Ze(We||(We=et(["\n    The license key for Handsontable is missing. Use your purchased key to activate the product. \n    Alternatively, you can activate Handsontable to use for non-commercial purposes by \n    passing the key: 'non-commercial-and-evaluation'. If you need any help, contact \n    us at support@handsontable.com."],["\n    The license key for Handsontable is missing. Use your purchased key to activate the product.\\x20\n    Alternatively, you can activate Handsontable to use for non-commercial purposes by\\x20\n    passing the key: 'non-commercial-and-evaluation'. If you need any help, contact\\x20\n    us at support@handsontable.com."])))},non_commercial:function(){return""}},wt={invalid:function(){return Ze(qe||(qe=et(['\n    The license key for Handsontable is invalid. \n    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> on how to \n    install it properly or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.'],['\n    The license key for Handsontable is invalid.\\x20\n    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> on how to\\x20\n    install it properly or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.'])))},expired:function(e){var t=e.keyValidityDate,n=e.hotVersion;return Ze(Ke||(Ke=et(["\n    The license key for Handsontable expired on ",", and is not valid for the installed \n    version ",'. <a href="https://handsontable.com/pricing" target="_blank">Renew</a> your \n    license key or downgrade to a version released prior to ','. If you need any \n    help, contact us at <a href="mailto:sales@handsontable.com">sales@handsontable.com</a>.'],["\n    The license key for Handsontable expired on ",", and is not valid for the installed\\x20\n    version ",'. <a href="https://handsontable.com/pricing" target="_blank">Renew</a> your\\x20\n    license key or downgrade to a version released prior to ','. If you need any\\x20\n    help, contact us at <a href="mailto:sales@handsontable.com">sales@handsontable.com</a>.'])),t,n,t)},missing:function(){return Ze(Ge||(Ge=et(['\n    The license key for Handsontable is missing. Use your purchased key to activate the product. \n    Alternatively, you can activate Handsontable to use for non-commercial purposes by \n    passing the key: \'non-commercial-and-evaluation\'. \n    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> about it in \n    the documentation or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.'],['\n    The license key for Handsontable is missing. Use your purchased key to activate the product.\\x20\n    Alternatively, you can activate Handsontable to use for non-commercial purposes by\\x20\n    passing the key: \'non-commercial-and-evaluation\'.\\x20\n    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> about it in\\x20\n    the documentation or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.'])))},non_commercial:function(){return""}};function _t(e,t){var n,o=!at(e),i="string"==typeof e&&"non-commercial-and-evaluation"===e.toLowerCase(),a="invalid",r="invalid",l=function(e){var t=[][ut],n=t;if(e[ut]!==pt("Z"))return!1;for(var o="",i="B<H4P+".split(""),a=pt(i.shift());a;a=pt(i.shift()||"A"))--a<""[ut]?n|=(ht("".concat(ht(dt(o)+(dt(ft(e,Math.abs(a),2))+[]).padStart(2,"0"))))%97||2)>>1:o=ft(e,a,a?1===i[ut]?9:8:6);return n===t}(e=mt(e||""));if(o||i||l)if(l){var s=Qe()("11/05/2021","DD/MM/YYYY"),c=Math.floor(s.toDate().getTime()/864e5),u=vt(e);if(n=Qe()(864e5*(u+1),"x").format("MMMM DD, YYYY"),c>u){var d=Qe()().diff(s,"days");a=d<=1?"valid":"expired",r=d<=15?"valid":"expired"}else a="valid",r="valid"}else i?(a="non_commercial",r="valid"):(a="invalid",r="invalid");else a="missing",r="missing";(bt()&&(a="valid",r="valid"),yt||"valid"===a)||(gt[a]({keyValidityDate:n,hotVersion:"8.4.0"})&&console["non_commercial"===a?"info":"warn"](gt[a]({keyValidityDate:n,hotVersion:"8.4.0"})),yt=!0);if("valid"!==r&&t.parentNode&&wt[r]({keyValidityDate:n,hotVersion:"8.4.0"})){var h=document.createElement("div");h.id="hot-display-license-info",h.innerHTML=wt[r]({keyValidityDate:n,hotVersion:"8.4.0"}),t.parentNode.insertBefore(h,t.nextSibling)}}function Ct(e){return e[0].toUpperCase()+e.substr(1)}function kt(){for(var e=[],t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var i=n.length;i;){var a=nt(n[i-=1]).toLowerCase();-1===e.indexOf(a)&&e.push(a)}return 1===e.length}function xt(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()}function St(e){return/^([0-9][0-9]?%$)|(^100%$)/.test(e)}function Tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"".concat(e).replace(/(?:\\)?\[([^[\]]+)]/g,function(e,n){return"\\"===e.charAt(0)?e.substr(1,e.length-1):void 0===t[n]?"":t[n]})}function Et(e){return Ot("".concat(e),{ALLOWED_TAGS:[]})}function Ot(e,t){return Ye.a.sanitize(e,t)}function Dt(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return It(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return It(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Rt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,o=null,i=e;null!==i;){if(n===t){o=i;break}i.host&&i.nodeType===Node.DOCUMENT_FRAGMENT_NODE?i=i.host:(n+=1,i=i.parentNode)}return o}function Mt(e){return Object.getPrototypeOf(e.parent)&&e.frameElement}function Pt(e){return Mt(e)&&e.parent}function At(e){return!!Object.getPrototypeOf(e.parent)}function Lt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,o=Node,i=o.ELEMENT_NODE,a=o.DOCUMENT_FRAGMENT_NODE,r=e;null!==r&&void 0!==r&&r!==n;){var l=r,s=l.nodeType,c=l.nodeName;if(s===i&&(t.includes(c)||t.includes(r)))return r;var u=r.host;r=u&&s===a?u:r.parentNode}return null}function Nt(e,t,n){for(var o=[],i=e;i&&(i=Lt(i,t,n))&&(!n||n.contains(i));)o.push(i),i=i.host&&i.nodeType===Node.DOCUMENT_FRAGMENT_NODE?i.host:i.parentNode;var a=o.length;return a?o[a-1]:null}function Vt(e,t){var n=e.parentNode,o=[];for("string"==typeof t?o=e.defaultView?Array.prototype.slice.call(e.querySelectorAll(t),0):Array.prototype.slice.call(e.ownerDocument.querySelectorAll(t),0):o.push(t);null!==n;){if(o.indexOf(n)>-1)return!0;n=n.parentNode}return!1}function Ft(e){var t=0,n=e;if(n.previousSibling)for(;n=n.previousSibling;)t+=1;return t}function Bt(e,t,n){var o=n.parentElement.querySelector(".ht_clone_".concat(e));return o?o.contains(t):null}function Ht(e){return e&&e.length?e.filter(function(e){return!!e}):[]}if(P()){var jt=function(e){var t=e.createElement("div");return t.classList.add("test","test2"),t.classList.contains("test2")};lt=function(e,t){return void 0!==e.classList&&"string"==typeof t&&""!==t&&e.classList.contains(t)},st=function(e,t){var n,o=e.ownerDocument,i=t;if("string"==typeof i&&(i=i.split(" ")),(i=Ht(i)).length>0)if(jt(o))(n=e.classList).add.apply(n,Dt(i));else for(var a=0;i&&i[a];)e.classList.add(i[a]),a+=1},ct=function(e,t){var n,o=e.ownerDocument,i=t;if("string"==typeof i&&(i=i.split(" ")),(i=Ht(i)).length>0)if(jt(o))(n=e.classList).remove.apply(n,Dt(i));else for(var a=0;i&&i[a];)e.classList.remove(i[a]),a+=1}}else{var $t=function(e){return new RegExp("(\\s|^)".concat(e,"(\\s|$)"))};lt=function(e,t){return void 0!==e.className&&$t(t).test(e.className)},st=function(e,t){var n=e.className,o=t;if("string"==typeof o&&(o=o.split(" ")),o=Ht(o),""===n)n=o.join(" ");else for(var i=0;i<o.length;i++)o[i]&&!$t(o[i]).test(n)&&(n+=" ".concat(o[i]));e.className=n},ct=function(e,t){var n=0,o=e.className,i=t;for("string"==typeof i&&(i=i.split(" ")),i=Ht(i);i&&i[n];)o=o.replace($t(i[n])," ").trim(),n+=1;e.className!==o&&(e.className=o)}}function Ut(e,t){return lt(e,t)}function zt(e,t){st(e,t)}function Wt(e,t){ct(e,t)}function qt(e){if(3===e.nodeType)e.parentNode.removeChild(e);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(e.nodeName)>-1)for(var t=e.childNodes,n=t.length-1;n>=0;n--)qt(t[n])}function Kt(e){for(var t;t=e.lastChild;)e.removeChild(t)}var Gt,Jt=/(<(.*)>|&(.*);)/;function Yt(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Jt.test(t)?e.innerHTML=n?Ot(t):t:Xt(e,t)}function Xt(e,t){var n=e.firstChild;n&&3===n.nodeType&&null===n.nextSibling?A?n.textContent=t:n.data=t:(Kt(e),e.appendChild(e.ownerDocument.createTextNode(t)))}function Qt(e){for(var t=e.ownerDocument.documentElement,n=e;n!==t;){if(null===n)return!1;if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(n.host){if(n.host.impl)return Qt(n.host.impl);if(n.host)return Qt(n.host);throw new Error("Lost in Web Components world")}return!1}if(n.style&&"none"===n.style.display)return!1;n=n.parentNode}return!0}function Zt(e){var t,n,o,i,a=e.ownerDocument,r=a.defaultView,l=a.documentElement,s=e;if(F()&&s.firstChild&&"CAPTION"===s.firstChild.nodeName)return{top:(i=s.getBoundingClientRect()).top+(r.pageYOffset||l.scrollTop)-(l.clientTop||0),left:i.left+(r.pageXOffset||l.scrollLeft)-(l.clientLeft||0)};for(t=s.offsetLeft,n=s.offsetTop,o=s;(s=s.offsetParent)&&s!==a.body;)t+=s.offsetLeft,n+=s.offsetTop,o=s;return o&&"fixed"===o.style.position&&(t+=r.pageXOffset||l.scrollLeft,n+=r.pageYOffset||l.scrollTop),{left:t,top:n}}function en(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.scrollY;return void 0===t&&(t=e.document.documentElement.scrollTop),t}function tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.scrollX;return void 0===t&&(t=e.document.documentElement.scrollLeft),t}function nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return e===t?en(t):e.scrollTop}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return e===t?tn(t):e.scrollLeft}function an(e){var t=e.ownerDocument,n=t?t.defaultView:void 0;t||(n=(t=e.document?e.document:e).defaultView);for(var o=["auto","scroll"],i=L(),a=e.parentNode;a&&a.style&&t.body!==a;){var r=a.style,l=r.overflow,s=r.overflowX,c=r.overflowY;if([l,s,c].includes("scroll"))return a;if(i){var u=n.getComputedStyle(a);if(l=u.overflow,s=u.overflowX,c=u.overflowY,o.includes(l)||o.includes(s)||o.includes(c))return a}if(a.clientHeight<=a.scrollHeight+1&&(o.includes(c)||o.includes(l)))return a;if(a.clientWidth<=a.scrollWidth+1&&(o.includes(s)||o.includes(l)))return a;a=a.parentNode}return n}function rn(e){for(var t=e.ownerDocument,n=t.defaultView,o=e.parentNode;o&&o.style&&t.body!==o;){if("visible"!==o.style.overflow&&""!==o.style.overflow)return o;var i=cn(o,n),a=["scroll","hidden","auto"],r=i.getPropertyValue("overflow"),l=i.getPropertyValue("overflow-y"),s=i.getPropertyValue("overflow-x");if(a.includes(r)||a.includes(l)||a.includes(s))return o;o=o.parentNode}return n}function ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if(e){if(e===n)return"width"===t?"".concat(n.innerWidth,"px"):"height"===t?"".concat(n.innerHeight,"px"):void 0;var o=e.style[t];if(""!==o&&void 0!==o)return o;var i=cn(e,n);return""!==i[t]&&void 0!==i[t]?i[t]:void 0}}function sn(e,t){var n=t.selectorText,o=!1;return t.type===CSSRule.STYLE_RULE&&n&&(e.msMatchesSelector?o=e.msMatchesSelector(n):e.matches&&(o=e.matches(n))),o}function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return e.currentStyle||t.getComputedStyle(e)}function un(e){return Math.ceil(e.getBoundingClientRect().width)}function dn(e){return F()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName?e.offsetHeight+e.firstChild.offsetHeight:e.offsetHeight}function hn(e){return e.clientHeight||e.innerHeight}function fn(e){return e.clientWidth||e.innerWidth}function pn(e,t,n){e.addEventListener(t,n,!1)}function mn(e,t,n){e.removeEventListener(t,n,!1)}function vn(e){var t=e.ownerDocument;if(e.selectionStart)return e.selectionStart;if(t.selection){e.focus();var n=t.selection.createRange();if(null===n)return 0;var o=e.createTextRange(),i=o.duplicate();return o.moveToBookmark(n.getBookmark()),i.setEndPoint("EndToStart",o),i.text.length}return 0}function bn(e){var t=e.ownerDocument;if(e.selectionEnd)return e.selectionEnd;if(t.selection){var n=t.selection.createRange();return null===n?0:e.createTextRange().text.indexOf(n.text)+n.text.length}return 0}function yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.document,n="";return e.getSelection?n=e.getSelection().toString():t.selection&&"Control"!==t.selection.type&&(n=t.selection.createRange().text),n}function gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.document;e.getSelection?e.getSelection().empty?e.getSelection().empty():e.getSelection().removeAllRanges&&e.getSelection().removeAllRanges():t.selection&&t.selection.empty()}function wn(e,t,n){if(void 0===n&&(n=t),e.setSelectionRange){e.focus();try{e.setSelectionRange(t,n)}catch(a){var o=e.parentNode,i=o.style.display;o.style.display="block",e.setSelectionRange(t,n),o.style.display=i}}}function _n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return void 0===Gt&&(Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.createElement("div");t.style.height="200px",t.style.width="100%";var n=e.createElement("div");n.style.boxSizing="content-box",n.style.height="150px",n.style.left="0px",n.style.overflow="hidden",n.style.position="absolute",n.style.top="0px",n.style.width="200px",n.style.visibility="hidden",n.appendChild(t),(e.body||e.documentElement).appendChild(n);var o=t.offsetWidth;n.style.overflow="scroll";var i=t.offsetWidth;return o===i&&(i=n.clientWidth),(e.body||e.documentElement).removeChild(n),o-i}(e)),Gt}function Cn(e){return e.offsetWidth!==e.clientWidth}function kn(e){return e.offsetHeight!==e.clientHeight}function xn(e,t,n){Le()?(e.style.top=n,e.style.left=t):Re()?(e.style["-webkit-transform"]="translate3d(".concat(t,",").concat(n,",0)"),e.style["-webkit-transform"]="translate3d(".concat(t,",").concat(n,",0)")):e.style.transform="translate3d(".concat(t,",").concat(n,",0)")}function Sn(e){var t;return e.style.transform&&""!==(t=e.style.transform)?["transform",t]:e.style["-webkit-transform"]&&""!==(t=e.style["-webkit-transform"])?["-webkit-transform",t]:-1}function Tn(e){e.style.transform&&""!==e.style.transform?e.style.transform="":e.style["-webkit-transform"]&&""!==e.style["-webkit-transform"]&&(e.style["-webkit-transform"]="")}function En(e){return e&&(["INPUT","SELECT","TEXTAREA"].indexOf(e.nodeName)>-1||"true"===e.contentEditable)}function On(e){return En(e)&&!1===e.hasAttribute("data-hot-input")}function Dn(e){On(e.ownerDocument.activeElement)||e.select()}function In(e){return!e.parentNode}function Rn(e){return"function"==typeof e}function Mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=0,o={lastCallThrottled:!0},i=null;return function(){for(var a=this,r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];var c=Date.now(),u=!1;o.lastCallThrottled=!0,n||(n=c,u=!0);var d=t-(c-n);return u?(o.lastCallThrottled=!1,e.apply(this,l)):(i&&clearTimeout(i),i=setTimeout(function(){o.lastCallThrottled=!1,e.apply(a,l),n=0,i=void 0},d)),o}}function Pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=Mn(e,t),i=n;function a(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return i?(i-=1,e.apply(this,n)):o.apply(this,n)}return a.clearHits=function(){i=n},a}function An(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,o=null;return function(){for(var i=this,a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return o&&clearTimeout(o),o=setTimeout(function(){t=e.apply(i,r)},n),t}}function Ln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[0],i=t.slice(1);return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return z(i,function(e,t){return t(e)},o.apply(this,t))}}function Nn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e.apply(this,n.concat(o))}}function Vn(e){var t=e.length;return function n(o){return function(){for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];var l=o.concat(a);return l.length>=t?e.apply(this,l):n(l)}}([])}function Fn(e){var t=e.length;return function n(o){return function(){for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];var l=o.concat(a.reverse());return l.length>=t?e.apply(this,l):n(l)}}([])}n("8Wky");function Bn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Hn=new WeakMap,jn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.viewportSize,o=t.scrollOffset,i=t.totalItems,a=t.itemSizeFn,r=t.overrideFn,l=t.calculationType,s=t.stretchMode,c=t.stretchingItemWidthFn,u=void 0===c?function(e){return e}:c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Hn.set(this,{viewportWidth:n,scrollOffset:o,totalColumns:i,columnWidthFn:a,overrideFn:r,calculationType:l,stretchingColumnWidthFn:u}),this.count=0,this.startColumn=null,this.endColumn=null,this.startPosition=null,this.stretchAllRatio=0,this.stretchLastWidth=0,this.stretch=s,this.totalTargetWidth=0,this.needVerifyLastColumnWidth=!0,this.stretchAllColumnsWidth=[],this.calculate()}var t,n,o;return t=e,o=[{key:"DEFAULT_WIDTH",get:function(){return 50}}],(n=[{key:"calculate",value:function(){for(var e,t=0,n=!0,o=[],i=Hn.get(this),a=i.calculationType,r=i.overrideFn,l=i.scrollOffset,s=i.totalColumns,c=i.viewportWidth,u=0;u<s;u++){if(e=this._getColumnWidth(u),t<=l&&2!==a&&(this.startColumn=u),t>=l&&t+(2===a?e:0)<=l+(l>0?c+1:c)&&(null!==this.startColumn&&void 0!==this.startColumn||(this.startColumn=u),this.endColumn=u),o.push(t),t+=e,2!==a&&(this.endColumn=u),t>=l+c){n=!1;break}}if(this.endColumn===s-1&&n)for(this.startColumn=this.endColumn;this.startColumn>0;){var d=o[this.endColumn]+e-o[this.startColumn-1];if((d<=c||2!==a)&&(this.startColumn-=1),d>c)break}1===a&&null!==this.startColumn&&r&&r(this),this.startPosition=o[this.startColumn],void 0===this.startPosition&&(this.startPosition=null),s<this.endColumn&&(this.endColumn=s-1),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}},{key:"refreshStretching",value:function(e){if("none"!==this.stretch){var t=e;this.totalTargetWidth=t;for(var n=Hn.get(this),o=n.totalColumns,i=0,a=0;a<o;a++){var r=this._getColumnWidth(a),l=n.stretchingColumnWidthFn(void 0,a);"number"==typeof l?t-=l:i+=r}var s=t-i;if("all"===this.stretch&&s>0)this.stretchAllRatio=t/i,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if("last"===this.stretch&&t!==1/0){var c=this._getColumnWidth(o-1),u=s+c;this.stretchLastWidth=u>=0?u:c}}}},{key:"getStretchedColumnWidth",value:function(e,t){var n=null;return"all"===this.stretch&&0!==this.stretchAllRatio?n=this._getStretchedAllColumnWidth(e,t):"last"===this.stretch&&0!==this.stretchLastWidth&&(n=this._getStretchedLastColumnWidth(e)),n}},{key:"_getStretchedAllColumnWidth",value:function(e,t){var n=0,o=Hn.get(this),i=o.totalColumns;if(!this.stretchAllColumnsWidth[e]){var a=Math.round(t*this.stretchAllRatio),r=o.stretchingColumnWidthFn(a,e);this.stretchAllColumnsWidth[e]=void 0===r?a:isNaN(r)?this._getColumnWidth(e):r}if(this.stretchAllColumnsWidth.length===i&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(var l=0;l<this.stretchAllColumnsWidth.length;l++)n+=this.stretchAllColumnsWidth[l];n!==this.totalTargetWidth&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=this.totalTargetWidth-n)}return this.stretchAllColumnsWidth[e]}},{key:"_getStretchedLastColumnWidth",value:function(e){return e===Hn.get(this).totalColumns-1?this.stretchLastWidth:null}},{key:"_getColumnWidth",value:function(t){var n=Hn.get(this).columnWidthFn(t);return isNaN(n)&&(n=e.DEFAULT_WIDTH),n}}])&&Bn(t.prototype,n),o&&Bn(t,o),e}();function $n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Un=new WeakMap,zn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.viewportSize,o=t.scrollOffset,i=t.totalItems,a=t.itemSizeFn,r=t.overrideFn,l=t.calculationType,s=t.scrollbarHeight;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Un.set(this,{viewportHeight:n,scrollOffset:o,totalRows:i,rowHeightFn:a,overrideFn:r,calculationType:l,horizontalScrollbarHeight:s}),this.count=0,this.startRow=null,this.endRow=null,this.startPosition=null,this.calculate()}var t,n,o;return t=e,o=[{key:"DEFAULT_HEIGHT",get:function(){return 23}}],(n=[{key:"calculate",value:function(){for(var t,n=0,o=!0,i=[],a=Un.get(this),r=a.calculationType,l=a.overrideFn,s=a.rowHeightFn,c=a.scrollOffset,u=a.totalRows,d=a.viewportHeight,h=a.horizontalScrollbarHeight||0,f=0;f<u;f++)if(t=s(f),isNaN(t)&&(t=e.DEFAULT_HEIGHT),n<=c&&2!==r&&(this.startRow=f),n>=c&&n+(2===r?t:0)<=c+d-h&&(null===this.startRow&&(this.startRow=f),this.endRow=f),i.push(n),n+=t,2!==r&&(this.endRow=f),n>=c+d-h){o=!1;break}if(this.endRow===u-1&&o)for(this.startRow=this.endRow;this.startRow>0;){var p=i[this.endRow]+t-i[this.startRow-1];if((p<=d-h||2!==r)&&(this.startRow-=1),p>=d-h)break}1===r&&null!==this.startRow&&l&&l(this),this.startPosition=i[this.startRow],void 0===this.startPosition&&(this.startPosition=null),u<this.endRow&&(this.endRow=u-1),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}}])&&$n(t.prototype,n),o&&$n(t,o),e}();function Wn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var qn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.row=null,this.col=null,void 0!==t&&void 0!==n&&(this.row=t,this.col=n)}var t,n,o;return t=e,(n=[{key:"isValid",value:function(e){return!(this.row<0||this.col<0)&&!(this.row>=e.getSetting("totalRows")||this.col>=e.getSetting("totalColumns"))}},{key:"isEqual",value:function(e){return e===this||this.row===e.row&&this.col===e.col}},{key:"isSouthEastOf",value:function(e){return this.row>=e.row&&this.col>=e.col}},{key:"isNorthWestOf",value:function(e){return this.row<=e.row&&this.col<=e.col}},{key:"isSouthWestOf",value:function(e){return this.row>=e.row&&this.col<=e.col}},{key:"isNorthEastOf",value:function(e){return this.row<=e.row&&this.col>=e.col}},{key:"normalize",value:function(){return this.row=null===this.row?this.row:Math.max(this.row,0),this.col=null===this.col?this.col:Math.max(this.col,0),this}},{key:"clone",value:function(){return new e(this.row,this.col)}},{key:"toObject",value:function(){return{row:this.row,col:this.col}}}])&&Wn(t.prototype,n),o&&Wn(t,o),e}();function Kn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Gn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.highlight=t.clone().normalize(),this.from=n.clone(),this.to=o.clone()}var t,n,o;return t=e,(n=[{key:"setHighlight",value:function(e){return this.highlight=e.clone().normalize(),this}},{key:"setFrom",value:function(e){return this.from=e.clone(),this}},{key:"setTo",value:function(e){return this.to=e.clone(),this}},{key:"isValid",value:function(e){return this.from.isValid(e)&&this.to.isValid(e)}},{key:"isSingle",value:function(){return this.from.row>=0&&this.from.row===this.to.row&&this.from.col>=0&&this.from.col===this.to.col}},{key:"getOuterHeight",value:function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}},{key:"getOuterWidth",value:function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}},{key:"getHeight",value:function(){var e=Math.max(this.from.row,0),t=Math.max(this.to.row,0);return Math.max(e,t)-Math.min(e,t)+1}},{key:"getWidth",value:function(){var e=Math.max(this.from.col,0),t=Math.max(this.to.col,0);return Math.max(e,t)-Math.min(e,t)+1}},{key:"includes",value:function(e){var t=e.row,n=e.col,o=this.getOuterTopLeftCorner(),i=this.getOuterBottomRightCorner();return o.row<=t&&i.row>=t&&o.col<=n&&i.col>=n}},{key:"includesRange",value:function(e){return this.includes(e.getOuterTopLeftCorner())&&this.includes(e.getOuterBottomRightCorner())}},{key:"isEqual",value:function(e){return Math.min(this.from.row,this.to.row)===Math.min(e.from.row,e.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(e.from.row,e.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(e.from.col,e.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(e.from.col,e.to.col)}},{key:"overlaps",value:function(e){return e.isSouthEastOf(this.getOuterTopLeftCorner())&&e.isNorthWestOf(this.getOuterBottomRightCorner())}},{key:"isSouthEastOf",value:function(e){return this.getOuterTopLeftCorner().isSouthEastOf(e)||this.getOuterBottomRightCorner().isSouthEastOf(e)}},{key:"isNorthWestOf",value:function(e){return this.getOuterTopLeftCorner().isNorthWestOf(e)||this.getOuterBottomRightCorner().isNorthWestOf(e)}},{key:"isOverlappingHorizontally",value:function(e){return this.getOuterTopRightCorner().col>=e.getOuterTopLeftCorner().col&&this.getOuterTopRightCorner().col<=e.getOuterTopRightCorner().col||this.getOuterTopLeftCorner().col<=e.getOuterTopRightCorner().col&&this.getOuterTopLeftCorner().col>=e.getOuterTopLeftCorner().col}},{key:"isOverlappingVertically",value:function(e){return this.getOuterBottomRightCorner().row>=e.getOuterTopRightCorner().row&&this.getOuterBottomRightCorner().row<=e.getOuterBottomRightCorner().row||this.getOuterTopRightCorner().row<=e.getOuterBottomRightCorner().row&&this.getOuterTopRightCorner().row>=e.getOuterTopRightCorner().row}},{key:"expand",value:function(e){var t=this.getOuterTopLeftCorner(),n=this.getOuterBottomRightCorner();return(e.row<t.row||e.col<t.col||e.row>n.row||e.col>n.col)&&(this.from=new qn(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=new qn(Math.max(n.row,e.row),Math.max(n.col,e.col)),!0)}},{key:"expandByRange",value:function(e){if(this.includesRange(e)||!this.overlaps(e))return!1;var t=this.getOuterTopLeftCorner(),n=this.getOuterBottomRightCorner(),o=this.getDirection(),i=e.getOuterTopLeftCorner(),a=e.getOuterBottomRightCorner(),r=Math.min(t.row,i.row),l=Math.min(t.col,i.col),s=Math.max(n.row,a.row),c=Math.max(n.col,a.col),u=new qn(r,l),d=new qn(s,c);return this.from=u,this.to=d,this.setDirection(o),this.highlight.row===this.getOuterBottomRightCorner().row&&"N-S"===this.getVerticalDirection()&&this.flipDirectionVertically(),this.highlight.col===this.getOuterTopRightCorner().col&&"W-E"===this.getHorizontalDirection()&&this.flipDirectionHorizontally(),!0}},{key:"getDirection",value:function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0}},{key:"setDirection",value:function(e){switch(e){case"NW-SE":var t=[this.getOuterTopLeftCorner(),this.getOuterBottomRightCorner()];this.from=t[0],this.to=t[1];break;case"NE-SW":var n=[this.getOuterTopRightCorner(),this.getOuterBottomLeftCorner()];this.from=n[0],this.to=n[1];break;case"SE-NW":var o=[this.getOuterBottomRightCorner(),this.getOuterTopLeftCorner()];this.from=o[0],this.to=o[1];break;case"SW-NE":var i=[this.getOuterBottomLeftCorner(),this.getOuterTopRightCorner()];this.from=i[0],this.to=i[1]}}},{key:"getVerticalDirection",value:function(){return["NE-SW","NW-SE"].indexOf(this.getDirection())>-1?"N-S":"S-N"}},{key:"getHorizontalDirection",value:function(){return["NW-SE","SW-NE"].indexOf(this.getDirection())>-1?"W-E":"E-W"}},{key:"flipDirectionVertically",value:function(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE")}}},{key:"flipDirectionHorizontally",value:function(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW")}}},{key:"getTopLeftCorner",value:function(){return new qn(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}},{key:"getBottomRightCorner",value:function(){return new qn(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}},{key:"getTopRightCorner",value:function(){return new qn(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}},{key:"getBottomLeftCorner",value:function(){return new qn(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}},{key:"getOuterTopLeftCorner",value:function(){return new qn(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}},{key:"getOuterBottomRightCorner",value:function(){return new qn(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}},{key:"getOuterTopRightCorner",value:function(){return new qn(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}},{key:"getOuterBottomLeftCorner",value:function(){return new qn(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}},{key:"isCorner",value:function(e,t){return!!(t&&t.includes(e)&&(this.getOuterTopLeftCorner().isEqual(new qn(t.from.row,t.from.col))||this.getOuterTopRightCorner().isEqual(new qn(t.from.row,t.to.col))||this.getOuterBottomLeftCorner().isEqual(new qn(t.to.row,t.from.col))||this.getOuterBottomRightCorner().isEqual(new qn(t.to.row,t.to.col))))||(e.isEqual(this.getOuterTopLeftCorner())||e.isEqual(this.getOuterTopRightCorner())||e.isEqual(this.getOuterBottomLeftCorner())||e.isEqual(this.getOuterBottomRightCorner()))}},{key:"getOppositeCorner",value:function(e,t){if(!(e instanceof qn))return!1;if(t&&t.includes(e)){if(this.getOuterTopLeftCorner().isEqual(new qn(t.from.row,t.from.col)))return this.getOuterBottomRightCorner();if(this.getOuterTopRightCorner().isEqual(new qn(t.from.row,t.to.col)))return this.getOuterBottomLeftCorner();if(this.getOuterBottomLeftCorner().isEqual(new qn(t.to.row,t.from.col)))return this.getOuterTopRightCorner();if(this.getOuterBottomRightCorner().isEqual(new qn(t.to.row,t.to.col)))return this.getOuterTopLeftCorner()}return e.isEqual(this.getOuterBottomRightCorner())?this.getOuterTopLeftCorner():e.isEqual(this.getOuterTopLeftCorner())?this.getOuterBottomRightCorner():e.isEqual(this.getOuterTopRightCorner())?this.getOuterBottomLeftCorner():e.isEqual(this.getOuterBottomLeftCorner())?this.getOuterTopRightCorner():void 0}},{key:"getBordersSharedWith",value:function(e){if(!this.includesRange(e))return[];var t=Math.min(this.from.row,this.to.row),n=Math.max(this.from.row,this.to.row),o=Math.min(this.from.col,this.to.col),i=Math.max(this.from.col,this.to.col),a=Math.min(e.from.row,e.to.row),r=Math.max(e.from.row,e.to.row),l=Math.min(e.from.col,e.to.col),s=Math.max(e.from.col,e.to.col),c=[];return t===a&&c.push("top"),i===s&&c.push("right"),n===r&&c.push("bottom"),o===l&&c.push("left"),c}},{key:"getInner",value:function(){for(var e=this.getOuterTopLeftCorner(),t=this.getOuterBottomRightCorner(),n=[],o=e.row;o<=t.row;o++)for(var i=e.col;i<=t.col;i++)this.from.row===o&&this.from.col===i||this.to.row===o&&this.to.col===i||n.push(new qn(o,i));return n}},{key:"getAll",value:function(){for(var e=this.getOuterTopLeftCorner(),t=this.getOuterBottomRightCorner(),n=[],o=e.row;o<=t.row;o++)for(var i=e.col;i<=t.col;i++)e.row===o&&e.col===i?n.push(e):t.row===o&&t.col===i?n.push(t):n.push(new qn(o,i));return n}},{key:"forAll",value:function(e){for(var t=this.getOuterTopLeftCorner(),n=this.getOuterBottomRightCorner(),o=t.row;o<=n.row;o++)for(var i=t.col;i<=n.col;i++){if(!1===e(o,i))return}}},{key:"clone",value:function(){return new e(this.highlight,this.from,this.to)}},{key:"toObject",value:function(){return{from:this.from.toObject(),to:this.to.toObject()}}}])&&Kn(t.prototype,n),o&&Kn(t,o),e}();function Jn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Yn=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t,this.total=n,this.countTH=o}var t,n,o;return t=e,(n=[{key:"offsetted",value:function(e){return e+this.offset}},{key:"unOffsetted",value:function(e){return e-this.offset}},{key:"renderedToSource",value:function(e){return this.offsetted(e)}},{key:"sourceToRendered",value:function(e){return this.unOffsetted(e)}},{key:"offsettedTH",value:function(e){return e-this.countTH}},{key:"unOffsettedTH",value:function(e){return e+this.countTH}},{key:"visibleRowHeadedColumnToSourceColumn",value:function(e){return this.renderedToSource(this.offsettedTH(e))}},{key:"sourceColumnToVisibleRowHeadedColumn",value:function(e){return this.unOffsettedTH(this.sourceToRendered(e))}}])&&Jn(t.prototype,n),o&&Jn(t,o),e}();function Xn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Qn=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t,this.total=n,this.countTH=o}var t,n,o;return t=e,(n=[{key:"offsetted",value:function(e){return e+this.offset}},{key:"unOffsetted",value:function(e){return e-this.offset}},{key:"renderedToSource",value:function(e){return this.offsetted(e)}},{key:"sourceToRendered",value:function(e){return this.unOffsetted(e)}},{key:"offsettedTH",value:function(e){return e-this.countTH}},{key:"unOffsettedTH",value:function(e){return e+this.countTH}},{key:"visibleColHeadedRowToSourceRow",value:function(e){return this.renderedToSource(this.offsettedTH(e))}},{key:"sourceRowToVisibleColHeadedRow",value:function(e){return this.unOffsettedTH(this.sourceToRendered(e))}}])&&Xn(t.prototype,n),o&&Xn(t,o),e}(),Zn=(n("r8F0"),n("lLc5"),0);function eo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var to=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentSize=0,this.nextSize=0,this.currentOffset=0,this.nextOffset=0}var t,n,o;return t=e,(n=[{key:"setSize",value:function(e){this.currentSize=this.nextSize,this.nextSize=e}},{key:"setOffset",value:function(e){this.currentOffset=this.nextOffset,this.nextOffset=e}}])&&eo(t.prototype,n),o&&eo(t,o),e}();function no(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var oo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.size=new to,this.workingSpace=Zn,this.sharedSize=null}var t,n,o;return t=e,(n=[{key:"setSize",value:function(e){this.size.setSize(e)}},{key:"setOffset",value:function(e){this.size.setOffset(e)}},{key:"getViewSize",value:function(){return this.size}},{key:"isShared",value:function(){return this.sharedSize instanceof to}},{key:"isPlaceOn",value:function(e){return this.workingSpace===e}},{key:"append",value:function(e){this.workingSpace=1,e.workingSpace=2,this.sharedSize=e.getViewSize()}},{key:"prepend",value:function(e){this.workingSpace=2,e.workingSpace=1,this.sharedSize=e.getViewSize()}}])&&no(t.prototype,n),o&&no(t,o),e}();function io(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ao=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootNode=t,this.nodesPool=n,this.sizeSet=new oo,this.childNodeType=o.toUpperCase(),this.visualIndex=0,this.collectedNodes=[]}var t,n,o;return t=e,(n=[{key:"setSize",value:function(e){return this.sizeSet.setSize(e),this}},{key:"setOffset",value:function(e){return this.sizeSet.setOffset(e),this}},{key:"isSharedViewSet",value:function(){return this.sizeSet.isShared()}},{key:"getNode",value:function(e){return e<this.collectedNodes.length?this.collectedNodes[e]:null}},{key:"getCurrentNode",value:function(){var e=this.collectedNodes.length;return e>0?this.collectedNodes[e-1]:null}},{key:"getRenderedChildCount",value:function(){var e=this.rootNode,t=this.sizeSet,n=0;if(this.isSharedViewSet())for(var o=e.firstElementChild;o;){if(o.tagName===this.childNodeType)n+=1;else if(t.isPlaceOn(1))break;o=o.nextElementSibling}else n=e.childElementCount;return n}},{key:"start",value:function(){this.collectedNodes.length=0,this.visualIndex=0;for(var e=this.rootNode,t=this.sizeSet,n=this.isSharedViewSet(),o=t.getViewSize().nextSize,i=this.getRenderedChildCount();i<o;){var a=this.nodesPool();!n||n&&t.isPlaceOn(2)?e.appendChild(a):e.insertBefore(a,e.firstChild),i+=1}for(var r=n&&t.isPlaceOn(1);i>o;)e.removeChild(r?e.firstChild:e.lastChild),i-=1}},{key:"render",value:function(){var e=this.rootNode,t=this.sizeSet,n=this.visualIndex;this.isSharedViewSet()&&t.isPlaceOn(2)&&(n+=t.sharedSize.nextSize);var o=e.childNodes[n];if(o.tagName!==this.childNodeType){var i=this.nodesPool();e.replaceChild(i,o),o=i}this.collectedNodes.push(o),this.visualIndex+=1}},{key:"end",value:function(){}}])&&io(t.prototype,n),o&&io(t,o),e}();function ro(e){"@babel/helpers - typeof";return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function so(e,t){return(so=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function co(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=uo(e);if(t){var i=uo(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===ro(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function uo(e){return(uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ho=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&so(e,t)}(a,ao);var t,n,o,i=co(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"prependView",value:function(e){return this.sizeSet.prepend(e.sizeSet),e.sizeSet.append(this.sizeSet),this}},{key:"appendView",value:function(e){return this.sizeSet.append(e.sizeSet),e.sizeSet.prepend(this.sizeSet),this}}])&&lo(t.prototype,n),o&&lo(t,o),a}();function fo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var po=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodeType=t.toUpperCase()}var t,n,o;return t=e,(n=[{key:"setRootDocument",value:function(e){this.rootDocument=e}},{key:"obtain",value:function(){return this.rootDocument.createElement(this.nodeType)}}])&&fo(t.prototype,n),o&&fo(t,o),e}();function mo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var vo=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodesPool="string"==typeof t?new po(t):null,this.nodeType=t,this.rootNode=n,this.table=null,this.renderedNodes=0}var t,n,o;return t=e,(n=[{key:"setTable",value:function(e){this.nodesPool&&this.nodesPool.setRootDocument(e.rootDocument),this.table=e}},{key:"adjust",value:function(){}},{key:"render",value:function(){}}])&&mo(t.prototype,n),o&&mo(t,o),e}();function bo(e){"@babel/helpers - typeof";return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function go(e,t){return(go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=_o(e);if(t){var i=_o(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===bo(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _o(e){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&go(e,t)}(a,vo);var t,n,o,i=wo(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,"TH")).orderViews=new WeakMap,e.sourceRowIndex=0,e}return t=a,(n=[{key:"obtainOrderView",value:function(e){var t,n=this;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new ho(e,function(e){return n.nodesPool.obtain(n.sourceRowIndex,e)},this.nodeType),this.orderViews.set(e,t)),t}},{key:"render",value:function(){for(var e=this.table,t=e.rowsToRender,n=e.rowHeaderFunctions,o=e.rowHeadersCount,i=e.rows,a=e.cells,r=0;r<t;r++){var l=this.table.renderedRowToSource(r),s=i.getRenderedNode(r);this.sourceRowIndex=l;var c=this.obtainOrderView(s),u=a.obtainOrderView(s);c.appendView(u).setSize(o).setOffset(this.table.renderedColumnToSource(0)).start();for(var d=0;d<o;d++){c.render();var h=c.getCurrentNode();h.className="",h.removeAttribute("style"),n[d](l,h,d)}c.end()}}}])&&yo(t.prototype,n),o&&yo(t,o),a}();function ko(e){"@babel/helpers - typeof";return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function So(e,t){return(So=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function To(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Eo(e);if(t){var i=Eo(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===ko(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Eo(e){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&So(e,t)}(a,vo);var t,n,o,i=To(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,null,e)}return t=a,(n=[{key:"adjust",value:function(){var e=this.table,t=e.columnHeadersCount,n=e.rowHeadersCount,o=this.rootNode.firstChild;if(t){for(var i=this.table.columnsToRender+n,a=0,r=t;a<r;a++){for((o=this.rootNode.childNodes[a])||(o=this.table.rootDocument.createElement("tr"),this.rootNode.appendChild(o)),this.renderedNodes=o.childNodes.length;this.renderedNodes<i;)o.appendChild(this.table.rootDocument.createElement("th")),this.renderedNodes+=1;for(;this.renderedNodes>i;)o.removeChild(o.lastChild),this.renderedNodes-=1}var l=this.rootNode.childNodes.length;if(l>t)for(var s=t;s<l;s++)this.rootNode.removeChild(this.rootNode.lastChild)}else o&&Kt(o)}},{key:"render",value:function(){for(var e=this.table.columnHeadersCount,t=0;t<e;t+=1)for(var n=this.table,o=n.columnHeaderFunctions,i=n.columnsToRender,a=n.rowHeadersCount,r=this.rootNode.childNodes[t],l=-1*a;l<i;l+=1){var s=this.table.renderedColumnToSource(l),c=r.childNodes[l+a];c.className="",c.removeAttribute("style"),o[t](s,c,t)}}}])&&xo(t.prototype,n),o&&xo(t,o),a}();function Do(e){"@babel/helpers - typeof";return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Io(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ro(e,t){return(Ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Po(e);if(t){var i=Po(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Do(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ao,Lo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ro(e,t)}(a,vo);var t,n,o,i=Mo(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,null,e)}return t=a,(n=[{key:"adjust",value:function(){for(var e=this.table,t=e.columnsToRender+e.rowHeadersCount;this.renderedNodes<t;)this.rootNode.appendChild(this.table.rootDocument.createElement("col")),this.renderedNodes+=1;for(;this.renderedNodes>t;)this.rootNode.removeChild(this.rootNode.lastChild),this.renderedNodes-=1}},{key:"render",value:function(){this.adjust();for(var e=this.table,t=e.columnsToRender,n=e.rowHeadersCount,o=0;o<n;o++){var i=this.table.renderedColumnToSource(o),a=this.table.columnUtils.getHeaderWidth(i);this.rootNode.childNodes[o].style.width="".concat(a,"px")}for(var r=0;r<t;r++){var l=this.table.renderedColumnToSource(r),s=this.table.columnUtils.getStretchedColumnWidth(l);this.rootNode.childNodes[r+n].style.width="".concat(s,"px")}var c=this.rootNode.firstChild;c&&zt(c,"rowHeader")}}])&&Io(t.prototype,n),o&&Io(t,o),a}();function No(){var e;ot(console)&&(e=console).warn.apply(e,arguments)}function Vo(e){"@babel/helpers - typeof";return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Bo(e,t){return(Bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=jo(e);if(t){var i=jo(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Vo(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $o=!1,Uo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bo(e,t)}(a,vo);var t,n,o,i=Ho(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,"TR",e)).orderView=new ao(e,function(e){return t.nodesPool.obtain(e)},t.nodeType),t}return t=a,(n=[{key:"getRenderedNode",value:function(e){return this.orderView.getNode(e)}},{key:"render",value:function(){var e,t,n=this.table.rowsToRender;!$o&&n>1e3&&($o=!0,No(Ze(Ao||(e=['Performance tip: Handsontable rendered more than 1000 visible rows. Consider limiting \n        the number of rendered rows by specifying the table height and/or turning off the "renderAllRows" option.'],(t=['Performance tip: Handsontable rendered more than 1000 visible rows. Consider limiting\\x20\n        the number of rendered rows by specifying the table height and/or turning off the "renderAllRows" option.'])||(t=e.slice(0)),Ao=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})))))),this.orderView.setSize(n).setOffset(this.table.renderedRowToSource(0)).start();for(var o=0;o<n;o++)this.orderView.render();this.orderView.end()}}])&&Fo(t.prototype,n),o&&Fo(t,o),a}();function zo(e){"@babel/helpers - typeof";return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qo(e,t){return(qo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ko(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Go(e);if(t){var i=Go(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===zo(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Go(e){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qo(e,t)}(a,vo);var t,n,o,i=Ko(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,"TD")).orderViews=new WeakMap,e.sourceRowIndex=0,e}return t=a,(n=[{key:"obtainOrderView",value:function(e){var t,n=this;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new ho(e,function(e){return n.nodesPool.obtain(n.sourceRowIndex,e)},this.nodeType),this.orderViews.set(e,t)),t}},{key:"render",value:function(){for(var e=this.table,t=e.rowsToRender,n=e.columnsToRender,o=e.rows,i=e.rowHeaders,a=0;a<t;a++){var r=this.table.renderedRowToSource(a),l=o.getRenderedNode(a);this.sourceRowIndex=r;var s=this.obtainOrderView(l),c=i.obtainOrderView(l);s.prependView(c).setSize(n).setOffset(this.table.renderedColumnToSource(0)).start();for(var u=0;u<n;u++){s.render();var d=s.getCurrentNode(),h=this.table.renderedColumnToSource(u);Ut(d,"hide")||(d.className=""),d.removeAttribute("style"),this.table.cellRenderer(r,h,d)}s.end()}}}])&&Wo(t.prototype,n),o&&Wo(t,o),a}();function Yo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Xo=function(){function e(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cellRenderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootNode=t,this.rootDocument=this.rootNode.ownerDocument,this.rowHeaders=null,this.columnHeaders=null,this.colGroup=null,this.rows=null,this.cells=null,this.rowFilter=null,this.columnFilter=null,this.rowUtils=null,this.columnUtils=null,this.rowsToRender=0,this.columnsToRender=0,this.rowHeaderFunctions=[],this.rowHeadersCount=0,this.columnHeaderFunctions=[],this.columnHeadersCount=0,this.cellRenderer=n}var t,n,o;return t=e,(n=[{key:"setAxisUtils",value:function(e,t){this.rowUtils=e,this.columnUtils=t}},{key:"setViewportSize",value:function(e,t){this.rowsToRender=e,this.columnsToRender=t}},{key:"setFilters",value:function(e,t){this.rowFilter=e,this.columnFilter=t}},{key:"setHeaderContentRenderers",value:function(e,t){this.rowHeaderFunctions=e,this.rowHeadersCount=e.length,this.columnHeaderFunctions=t,this.columnHeadersCount=t.length}},{key:"setRenderers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rowHeaders,n=e.columnHeaders,o=e.colGroup,i=e.rows,a=e.cells;t.setTable(this),n.setTable(this),o.setTable(this),i.setTable(this),a.setTable(this),this.rowHeaders=t,this.columnHeaders=n,this.colGroup=o,this.rows=i,this.cells=a}},{key:"renderedRowToSource",value:function(e){return this.rowFilter.renderedToSource(e)}},{key:"renderedColumnToSource",value:function(e){return this.columnFilter.renderedToSource(e)}},{key:"render",value:function(){this.colGroup.adjust(),this.columnHeaders.adjust(),this.rows.adjust(),this.rowHeaders.adjust(),this.columnHeaders.render(),this.rows.render(),this.rowHeaders.render(),this.cells.render(),this.columnUtils.calculateWidths(),this.colGroup.render();for(var e=this.rowsToRender,t=this.rows,n=0;n<e;n++){var o=t.getRenderedNode(n);if(o.firstChild){var i=this.renderedRowToSource(n),a=this.rowUtils.getHeight(i);o.firstChild.style.height=a?"".concat(a-1,"px"):""}}}}])&&Yo(t.prototype,n),o&&Yo(t,o),e}();function Qo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Zo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.TABLE,o=t.THEAD,i=t.COLGROUP,a=t.TBODY,r=t.rowUtils,l=t.columnUtils,s=t.cellRenderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=new Xo(n,{cellRenderer:s}),this.renderer.setRenderers({rowHeaders:new Co,columnHeaders:new Oo(o),colGroup:new Lo(i),rows:new Uo(a),cells:new Jo}),this.renderer.setAxisUtils(r,l)}var t,n,o;return t=e,(n=[{key:"setFilters",value:function(e,t){return this.renderer.setFilters(e,t),this}},{key:"setViewportSize",value:function(e,t){return this.renderer.setViewportSize(e,t),this}},{key:"setHeaderContentRenderers",value:function(e,t){return this.renderer.setHeaderContentRenderers(e,t),this}},{key:"adjust",value:function(){this.renderer.adjust()}},{key:"render",value:function(){this.renderer.render()}}])&&Qo(t.prototype,n),o&&Qo(t,o),e}();n("xHaf");function ei(e){"@babel/helpers - typeof";return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ti(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ni=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t,this.headerWidths=new Map}var t,n,o;return t=e,(n=[{key:"getWidth",value:function(e){var t=this.wot.wtSettings.settings.columnWidth;return"function"==typeof t?t=t(e):"object"===ei(t)&&(t=t[e]),t||this.wot.wtSettings.settings.defaultColumnWidth}},{key:"getStretchedColumnWidth",value:function(e){var t=this.getWidth(e),n=this.wot.wtViewport.columnsRenderCalculator,o=null!==t&&void 0!==t?t:this.wot.wtSettings.settings.defaultColumnWidth;if(n){var i=n.getStretchedColumnWidth(e,o);i&&(o=i)}return o}},{key:"getHeaderHeight",value:function(e){var t=this.wot.wtSettings.settings.defaultRowHeight,n=this.wot.wtViewport.oversizedColumnHeaders[e];return void 0!==n&&(t=t?Math.max(t,n):n),t}},{key:"getHeaderWidth",value:function(e){return this.headerWidths.get(this.wot.wtTable.columnFilter.sourceToRendered(e))}},{key:"calculateWidths",value:function(){var e=this.wot,t=e.wtTable,n=e.wtViewport,o=e.cloneSource,i=o?o.wtTable.holder:t.holder,a=i.offsetHeight<i.scrollHeight?_n():0,r=e.getSetting("rowHeaderWidth");if(n.columnsRenderCalculator.refreshStretching(n.getViewportWidth()-a),null!==(r=e.getSetting("onModifyRowHeaderWidth",r))&&void 0!==r)for(var l=e.getSetting("rowHeaders").length,s=e.getSetting("defaultColumnWidth"),c=0;c<l;c++){var u=Array.isArray(r)?r[c]:r;u=null===u||void 0===u?s:u,this.headerWidths.set(c,u)}}}])&&ti(t.prototype,n),o&&ti(t,o),e}();function oi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ii=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t}var t,n,o;return t=e,(n=[{key:"getHeight",value:function(e){var t=this.wot.wtSettings.settings.rowHeight(e),n=this.wot.wtViewport.oversizedRows[e];return void 0!==n&&(t=void 0===t?n:Math.max(t,n)),t}}])&&oi(t.prototype,n),o&&oi(t,o),e}(),ai="top",ri="bottom",li="left",si="top_left_corner",ci="bottom_left_corner",ui=[ai,ri,li,si,ci],di={};function hi(e){var t=e.OVERLAY_NAME;if(-1===ui.indexOf(t))throw new Error("Unsupported overlay (".concat(t,")."));pi(t)||(di[t]=e)}function fi(e,t){return new di[e](t)}function pi(e){return void 0!==di[e]}function mi(e){return function(e){if(Array.isArray(e))return yi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||bi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bi(e,t){if(e){if("string"==typeof e)return yi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yi(e,t):void 0}}function yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function gi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var wi=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isMaster=!t.cloneOverlay,this.wot=t,this.instance=this.wot,this.TABLE=n,this.TBODY=null,this.THEAD=null,this.COLGROUP=null,this.tableOffset=0,this.holderOffset=0,this.hasTableHeight=!0,this.hasTableWidth=!0,this.isTableVisible=!1,qt(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.isMaster&&this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;var i=this.wot.wtSettings.settings.rowHeaderWidth;this.wot.wtSettings.settings.rowHeaderWidth=function(){return o._modifyRowHeaderWidth(i)},this.rowUtils=new ii(this.wot),this.columnUtils=new ni(this.wot),this.tableRenderer=new Zo({TABLE:this.TABLE,THEAD:this.THEAD,COLGROUP:this.COLGROUP,TBODY:this.TBODY,rowUtils:this.rowUtils,columnUtils:this.columnUtils,cellRenderer:this.wot.wtSettings.settings.cellRenderer})}var t,n,o;return t=e,(n=[{key:"is",value:function(e){return t=this.wot.cloneOverlay,n=e,!(!t||!di[n])&&t instanceof di[n];var t,n}},{key:"fixTableDomTree",value:function(){var e=this.wot.rootDocument;this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=e.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=e.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=e.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.wot.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length&&this.THEAD.appendChild(e.createElement("TR"))}},{key:"createSpreader",value:function(e){var t,n=e.parentNode;return n&&n.nodeType===Node.ELEMENT_NODE&&Ut(n,"wtHolder")||((t=this.wot.rootDocument.createElement("div")).className="wtSpreader",n&&n.insertBefore(t,e),t.appendChild(e)),t.style.position="relative",t}},{key:"createHider",value:function(e){var t,n=e.parentNode;return n&&n.nodeType===Node.ELEMENT_NODE&&Ut(n,"wtHolder")||((t=this.wot.rootDocument.createElement("div")).className="wtHider",n&&n.insertBefore(t,e),t.appendChild(e)),t}},{key:"createHolder",value:function(e){var t,n=e.parentNode;return n&&n.nodeType===Node.ELEMENT_NODE&&Ut(n,"wtHolder")||((t=this.wot.rootDocument.createElement("div")).style.position="relative",t.className="wtHolder",n&&n.insertBefore(t,e),this.isMaster&&(t.parentNode.className+="ht_master handsontable"),t.appendChild(e)),t}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.wot,n=t.wtOverlays,o=t.wtViewport,i=t.getSetting("totalRows"),a=t.getSetting("totalColumns"),r=t.getSetting("rowHeaders"),l=r.length,s=t.getSetting("columnHeaders"),c=s.length,u=!1,d=e;if(this.isMaster&&(this.holderOffset=Zt(this.holder),d=o.createRenderCalculators(d),l&&!t.getSetting("fixedColumnsLeft"))){var h=n.leftOverlay.getScrollPosition(),f=this.correctHeaderWidth;this.correctHeaderWidth=h>0,f!==this.correctHeaderWidth&&(d=!1)}if(this.isMaster&&(u=n.prepareOverlays()),d)this.isMaster&&o.createVisibleCalculators(),n&&n.refresh(!0);else{this.isMaster?this.tableOffset=Zt(this.TABLE):this.tableOffset=this.wot.cloneSource.wtTable.tableOffset;var p=i>0?this.getFirstRenderedRow():0,m=a>0?this.getFirstRenderedColumn():0;this.rowFilter=new Qn(p,i,c),this.columnFilter=new Yn(m,a,l);var v,b=!0;if(this.isMaster){this.alignOverlaysWithTrimmingContainer();var y={};this.wot.getSetting("beforeDraw",!0,y),b=!0!==y.skipRender}if(b)if(this.tableRenderer.setHeaderContentRenderers(r,s),(this.is(ri)||this.is(ci))&&this.tableRenderer.setHeaderContentRenderers(r,[]),this.resetOversizedRows(),this.tableRenderer.setViewportSize(this.getRenderedRowsCount(),this.getRenderedColumnsCount()).setFilters(this.rowFilter,this.columnFilter).render(),this.isMaster&&(v=this.wot.wtViewport.getWorkspaceWidth(),this.wot.wtViewport.containerWidth=null,this.markOversizedColumnHeaders()),this.adjustColumnHeaderHeights(),(this.isMaster||this.is(ri))&&this.markOversizedRows(),this.isMaster){this.wot.wtViewport.createVisibleCalculators(),this.wot.wtOverlays.refresh(!1),this.wot.wtOverlays.applyToDOM();var g=un(this.hider),w=un(this.TABLE);0!==g&&w!==g&&(this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),v!==this.wot.wtViewport.getWorkspaceWidth()&&(this.wot.wtViewport.containerWidth=null,this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),this.wot.getSetting("onDraw",!0)}else this.is(ri)&&this.wot.cloneSource.wtOverlays.adjustElementsSize()}if(this.isMaster){var _=n.topOverlay.resetFixedPosition();n.bottomOverlay.clone&&(_=n.bottomOverlay.resetFixedPosition()||_),_=n.leftOverlay.resetFixedPosition()||_,n.topLeftCornerOverlay&&n.topLeftCornerOverlay.resetFixedPosition(),n.bottomLeftCornerOverlay&&n.bottomLeftCornerOverlay.clone&&n.bottomLeftCornerOverlay.resetFixedPosition(),_&&(n.refreshAll(),n.adjustElementsSize())}return this.refreshSelections(d),u&&n.syncScrollWithMaster(),t.drawn=!0,this}},{key:"markIfOversizedColumnHeader",value:function(e){for(var t,n,o,i=this.wot.wtTable.columnFilter.renderedToSource(e),a=this.wot.getSetting("columnHeaders").length,r=this.wot.wtSettings.settings.defaultRowHeight,l=this.wot.getSetting("columnHeaderHeight")||[];a;)a-=1,t=this.wot.wtTable.getColumnHeaderHeight(a),(n=this.wot.wtTable.getColumnHeader(i,a))&&(o=hn(n),(!t&&r<o||t<o)&&(this.wot.wtViewport.oversizedColumnHeaders[a]=o),Array.isArray(l)?null!==l[a]&&void 0!==l[a]&&(this.wot.wtViewport.oversizedColumnHeaders[a]=l[a]):isNaN(l)||(this.wot.wtViewport.oversizedColumnHeaders[a]=l),this.wot.wtViewport.oversizedColumnHeaders[a]<(l[a]||l)&&(this.wot.wtViewport.oversizedColumnHeaders[a]=l[a]||l))}},{key:"adjustColumnHeaderHeights",value:function(){for(var e=this.wot,t=e.wtTable.THEAD.childNodes,n=e.wtViewport.oversizedColumnHeaders,o=0,i=e.getSetting("columnHeaders").length;o<i;o++)if(n[o]){if(!t[o]||0===t[o].childNodes.length)return;t[o].childNodes[0].style.height="".concat(n[o],"px")}}},{key:"resetOversizedRows",value:function(){var e=this.wot;if((this.isMaster||this.is(ri))&&!e.getSetting("externalRowCalculator"))for(var t=this.getRenderedRowsCount(),n=0;n<t;n++){var o=this.rowFilter.renderedToSource(n);e.wtViewport.oversizedRows&&e.wtViewport.oversizedRows[o]&&(e.wtViewport.oversizedRows[o]=void 0)}}},{key:"removeClassFromCells",value:function(e){for(var t=this.TABLE.querySelectorAll(".".concat(e)),n=0,o=t.length;n<o;n++)Wt(t[n],e)}},{key:"refreshSelections",value:function(e){var t=this.wot;if(t.selections){var n=Array.from(t.selections),o=n.length;if(e){for(var i=[],a=0;a<o;a++){for(var r=n[a].settings,l=r.highlightHeaderClassName,s=r.highlightRowClassName,c=r.highlightColumnClassName,u=n[a].classNames,d=u.length,h=0;h<d;h++)i.includes(u[h])||i.push(u[h]);l&&!i.includes(l)&&i.push(l),s&&!i.includes(s)&&i.push(s),c&&!i.includes(c)&&i.push(c)}var f=t.getSetting("onBeforeRemoveCellClassNames");if(Array.isArray(f))for(var p=0;p<f.length;p++)i.push(f[p]);for(var m=i.length,v=0;v<m;v++)this.removeClassFromCells(i[v])}for(var b=0;b<o;b++)n[b].draw(t,e)}}},{key:"getCell",value:function(e){var t,n=e.row,o=e.col,i=this.wot.getSetting("onModifyGetCellCoords",n,o);if(i&&Array.isArray(i)){var a=vi(i,2);n=a[0],o=a[1]}if(this.isRowBeforeRenderedRows(n))return-1;if(this.isRowAfterRenderedRows(n))return-2;if(this.isColumnBeforeRenderedColumns(o))return-3;if(this.isColumnAfterRenderedColumns(o))return-4;if(!(t=n<0?this.THEAD.childNodes[this.rowFilter.sourceRowToVisibleColHeadedRow(n)]:this.TBODY.childNodes[this.rowFilter.sourceToRendered(n)])&&n>=0)throw new Error("TR was expected to be rendered but is not");var r=t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(o)];if(!r&&o>=0)throw new Error("TD or TH was expected to be rendered but is not");return r}},{key:"getColumnHeader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.THEAD.childNodes[t];return null===n||void 0===n?void 0:n.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]}},{key:"getColumnHeaders",value:function(e){var t=[],n=this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e);return this.THEAD.childNodes.forEach(function(e){var o=e.childNodes[n];o&&t.push(o)}),t}},{key:"getRowHeader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0)&&!(t>=this.wot.getSetting("rowHeaders").length)){var n=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)];return null===n||void 0===n?void 0:n.childNodes[t]}}},{key:"getRowHeaders",value:function(e){if(0===this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return[];for(var t=[],n=this.wot.getSetting("rowHeaders").length,o=0;o<n;o++){var i=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)],a=null===i||void 0===i?void 0:i.childNodes[o];a&&t.push(a)}return t}},{key:"getCoords",value:function(e){var t=e;if("TD"!==t.nodeName&&"TH"!==t.nodeName&&(t=Lt(t,["TD","TH"])),null===t)return null;var n=t.parentNode,o=n.parentNode,i=Ft(n),a=t.cellIndex;if(Bt(si,t,this.wtRootElement)||Bt(ai,t,this.wtRootElement))"THEAD"===o.nodeName&&(i-=o.childNodes.length);else if(Bt(ci,t,this.wtRootElement)||Bt(ri,t,this.wtRootElement)){i=this.wot.getSetting("totalRows")-o.childNodes.length+i}else i=o===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(i):this.rowFilter.renderedToSource(i);return a=Bt(si,t,this.wtRootElement)||Bt(li,t,this.wtRootElement)||Bt(ci,t,this.wtRootElement)?this.columnFilter.offsettedTH(a):this.columnFilter.visibleRowHeadedColumnToSourceColumn(a),new qn(i,a)}},{key:"markOversizedRows",value:function(){if(!this.wot.getSetting("externalRowCalculator")){var e,t,n,o,i,a=this.TBODY.childNodes.length;if(a*this.wot.wtSettings.settings.defaultRowHeight!==hn(this.TBODY)-1||this.wot.getSetting("fixedRowsBottom"))for(;a;)a-=1,n=this.rowFilter.renderedToSource(a),e=this.getRowHeight(n),t=(i=(o=this.getTrForRow(n)).querySelector("th"))?hn(i):hn(o)-1,(!e&&this.wot.wtSettings.settings.defaultRowHeight<t||e<t)&&(t+=1,this.wot.wtViewport.oversizedRows[n]=t)}}},{key:"getTrForRow",value:function(e){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)]}},{key:"isColumnHeaderRendered",value:function(e){if(e>=0)return!1;var t=this.wot.getSetting("rowHeaders").length;return Math.abs(e)<=t}},{key:"isRowHeaderRendered",value:function(e){if(e>=0)return!1;var t=this.wot.getSetting("columnHeaders").length;return Math.abs(e)<=t}},{key:"isRowBeforeRenderedRows",value:function(e){var t=this.getFirstRenderedRow();return e<0&&t<=0?!this.isRowHeaderRendered(e):e<t}},{key:"isRowAfterRenderedRows",value:function(e){return e>this.getLastRenderedRow()}},{key:"isColumnBeforeRenderedColumns",value:function(e){var t=this.getFirstRenderedColumn();return e<0&&t<=0?!this.isColumnHeaderRendered(e):e<t}},{key:"isColumnAfterRenderedColumns",value:function(e){return this.columnFilter&&e>this.getLastRenderedColumn()}},{key:"isColumnAfterViewport",value:function(e){return this.columnFilter&&e>this.getLastVisibleColumn()}},{key:"isRowAfterViewport",value:function(e){return this.rowFilter&&e>this.getLastVisibleRow()}},{key:"isColumnBeforeViewport",value:function(e){return this.columnFilter&&this.columnFilter.sourceToRendered(e)<0&&e>=0}},{key:"isLastRowFullyVisible",value:function(){return this.getLastVisibleRow()===this.getLastRenderedRow()}},{key:"isLastColumnFullyVisible",value:function(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}},{key:"allRowsInViewport",value:function(){return this.wot.getSetting("totalRows")===this.getVisibleRowsCount()}},{key:"allColumnsInViewport",value:function(){return this.wot.getSetting("totalColumns")===this.getVisibleColumnsCount()}},{key:"getRowHeight",value:function(e){return this.rowUtils.getHeight(e)}},{key:"getColumnHeaderHeight",value:function(e){return this.columnUtils.getHeaderHeight(e)}},{key:"getColumnWidth",value:function(e){return this.columnUtils.getWidth(e)}},{key:"getStretchedColumnWidth",value:function(e){return this.columnUtils.getStretchedColumnWidth(e)}},{key:"hasDefinedSize",value:function(){return this.hasTableHeight&&this.hasTableWidth}},{key:"isVisible",value:function(){return Qt(this.TABLE)}},{key:"_modifyRowHeaderWidth",value:function(e){var t=Rn(e)?e():null;return Array.isArray(t)?(t=mi(t))[t.length-1]=this._correctRowHeaderWidth(t[t.length-1]):t=this._correctRowHeaderWidth(t),t}},{key:"_correctRowHeaderWidth",value:function(e){var t=e;return"number"!=typeof e&&(t=this.wot.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&(t+=1),t}}])&&gi(t.prototype,n),o&&gi(t,o),e}(),_i={getFirstRenderedRow:function(){var e=this.wot.wtViewport.rowsRenderCalculator.startRow;return null===e?-1:e},getFirstVisibleRow:function(){var e=this.wot.wtViewport.rowsVisibleCalculator.startRow;return null===e?-1:e},getLastRenderedRow:function(){var e=this.wot.wtViewport.rowsRenderCalculator.endRow;return null===e?-1:e},getLastVisibleRow:function(){var e=this.wot.wtViewport.rowsVisibleCalculator.endRow;return null===e?-1:e},getRenderedRowsCount:function(){return this.wot.wtViewport.rowsRenderCalculator.count},getVisibleRowsCount:function(){return this.wot.wtViewport.rowsVisibleCalculator.count}};me(_i,"MIXIN_NAME","calculatedRows",{writable:!1,enumerable:!1});var Ci=_i,ki={getFirstRenderedColumn:function(){var e=this.wot.wtViewport.columnsRenderCalculator.startColumn;return null===e?-1:e},getFirstVisibleColumn:function(){var e=this.wot.wtViewport.columnsVisibleCalculator.startColumn;return null===e?-1:e},getLastRenderedColumn:function(){var e=this.wot.wtViewport.columnsRenderCalculator.endColumn;return null===e?-1:e},getLastVisibleColumn:function(){var e=this.wot.wtViewport.columnsVisibleCalculator.endColumn;return null===e?-1:e},getRenderedColumnsCount:function(){return this.wot.wtViewport.columnsRenderCalculator.count},getVisibleColumnsCount:function(){return this.wot.wtViewport.columnsVisibleCalculator.count}};me(ki,"MIXIN_NAME","calculatedColumns",{writable:!1,enumerable:!1});var xi=ki;function Si(e){"@babel/helpers - typeof";return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ei(e,t){return(Ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Di(e);if(t){var i=Di(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Si(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Di(e){return(Di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ii=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ei(e,t)}(a,wi);var t,n,o,i=Oi(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"alignOverlaysWithTrimmingContainer",value:function(){var e=rn(this.wtRootElement),t=this.wot.rootWindow;if(e===t){this.wot.getSetting("preventOverflow")||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible")}else{var n=e.parentElement,o=ln(e,"height",t),i=ln(e,"overflow",t),a=this.holder.style,r=e.scrollWidth,l=e.scrollHeight,s=e.getBoundingClientRect(),c=s.width,u=s.height;if(n&&["auto","hidden","scroll"].includes(i)){var d=e.cloneNode(!1);d.style.overflow="auto",e.nextElementSibling?n.insertBefore(d,e.nextElementSibling):n.appendChild(d);var h=parseInt(cn(d,t).height,10);n.removeChild(d),0===h&&(u=0)}u=Math.min(u,l),a.height="auto"===o?"auto":"".concat(u,"px"),c=Math.min(c,r),a.width="".concat(c,"px"),a.overflow="",this.hasTableHeight="auto"===a.height||u>0,this.hasTableWidth=c>0}this.isTableVisible=Qt(this.TABLE)}},{key:"markOversizedColumnHeaders",value:function(){var e=this.wot,t=e.getOverlayName(),n=e.getSetting("columnHeaders").length;if(n&&!e.wtViewport.hasOversizedColumnHeadersMarked[t]){for(var o=e.getSetting("rowHeaders").length,i=this.getRenderedColumnsCount(),a=0;a<n;a++)for(var r=-1*o;r<i;r++)this.markIfOversizedColumnHeader(r);e.wtViewport.hasOversizedColumnHeadersMarked[t]=!0}}}])&&Ti(t.prototype,n),o&&Ti(t,o),a}();he(Ii,Ci),he(Ii,xi);var Ri=Ii,Mi={getFirstRenderedRow:function(){var e=this.wot.getSetting("totalRows"),t=this.wot.getSetting("fixedRowsBottom"),n=e-t;return 0===e||0===t?-1:n<0?0:n},getFirstVisibleRow:function(){return this.getFirstRenderedRow()},getLastRenderedRow:function(){return this.wot.getSetting("totalRows")-1},getLastVisibleRow:function(){return this.getLastRenderedRow()},getRenderedRowsCount:function(){var e=this.wot.getSetting("totalRows");return Math.min(this.wot.getSetting("fixedRowsBottom"),e)},getVisibleRowsCount:function(){return this.getRenderedRowsCount()}};me(Mi,"MIXIN_NAME","stickyRowsBottom",{writable:!1,enumerable:!1});var Pi=Mi,Ai={getFirstRenderedColumn:function(){return 0===this.wot.getSetting("totalColumns")?-1:0},getFirstVisibleColumn:function(){return this.getFirstRenderedColumn()},getLastRenderedColumn:function(){return this.getRenderedColumnsCount()-1},getLastVisibleColumn:function(){return this.getLastRenderedColumn()},getRenderedColumnsCount:function(){var e=this.wot.getSetting("totalColumns");return Math.min(this.wot.getSetting("fixedColumnsLeft"),e)},getVisibleColumnsCount:function(){return this.getRenderedColumnsCount()}};me(Ai,"MIXIN_NAME","stickyColumnsLeft",{writable:!1,enumerable:!1});var Li=Ai;function Ni(e){"@babel/helpers - typeof";return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vi(e,t){return(Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Bi(e);if(t){var i=Bi(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Ni(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Bi(e){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vi(e,t)}(n,wi);var t=Fi(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return n}();he(Hi,Pi),he(Hi,Li);var ji=Hi;function $i(e){e.isImmediatePropagationEnabled=!1,e.cancelBubble=!0}function Ui(e){return!1===e.isImmediatePropagationEnabled}function zi(e){return 2===e.button}function Wi(e){return 0===e.button}function qi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ki=0;var Gi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t||this,this.context.eventListeners||(this.context.eventListeners=[])}var t,n,o;return t=e,(n=[{key:"addEventListener",value:function(e,t,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];function a(e){n.call(this,function(e){var t=e.stopImmediatePropagation;return e.stopImmediatePropagation=function(){t.apply(this),$i(this)},e}(e))}return"boolean"==typeof i||H()||(i=!1),this.context.eventListeners.push({element:e,event:t,callback:n,callbackProxy:a,options:i,eventManager:this}),e.addEventListener(t,a,i),Ki+=1,function(){o.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){for(var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.context.eventListeners.length;a;)if(a-=1,(o=this.context.eventListeners[a]).event===t&&o.element===e){if(n&&n!==o.callback)continue;if(i&&o.eventManager!==this)continue;this.context.eventListeners.splice(a,1),o.element.removeEventListener(o.event,o.callbackProxy,o.options),Ki-=1}}},{key:"clearEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.context)for(var t=this.context.eventListeners.length;t;){t-=1;var n=this.context.eventListeners[t];n&&this.removeEventListener(n.element,n.event,n.callback,e)}}},{key:"clear",value:function(){this.clearEvents()}},{key:"destroy",value:function(){this.clearEvents(),this.context=null}},{key:"destroyWithOwnEventsOnly",value:function(){this.clearEvents(!0),this.context=null}},{key:"fireEvent",value:function(e,t){var n=e.document,o=e;n||(o=(n=e.ownerDocument?e.ownerDocument:e).defaultView);var i,a={bubbles:!0,cancelable:"mousemove"!==t,view:o,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};n.createEvent?(i=n.createEvent("MouseEvents")).initMouseEvent(t,a.bubbles,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget||n.body.parentNode):i=n.createEventObject(),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on".concat(t),i)}}])&&qi(t.prototype,n),o&&qi(t,o),e}();function Ji(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Yi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),me(this,"wot",t,{writable:!1});var n=this.wot.wtTable,o=n.TABLE,i=n.hider,a=n.spreader,r=n.holder,l=n.wtRootElement;this.instance=this.wot,this.type="",this.mainTableScrollableElement=null,this.TABLE=o,this.hider=i,this.spreader=a,this.holder=r,this.wtRootElement=l,this.trimmingContainer=rn(this.hider.parentNode.parentNode),this.updateStateOfRendering()}var t,n,o;return t=e,(n=[{key:"updateStateOfRendering",value:function(){var e=this.needFullRender;this.needFullRender=this.shouldBeRendered();var t=e!==this.needFullRender;return t&&!this.needFullRender&&this.reset(),t}},{key:"shouldBeRendered",value:function(){return!0}},{key:"updateTrimmingContainer",value:function(){this.trimmingContainer=rn(this.hider.parentNode.parentNode)}},{key:"updateMainScrollableElement",value:function(){var e=this.wot,t=e.wtTable;"hidden"===e.rootWindow.getComputedStyle(t.wtRootElement.parentNode).getPropertyValue("overflow")?this.mainTableScrollableElement=this.wot.wtTable.holder:this.mainTableScrollableElement=an(t.TABLE)}},{key:"getRelativeCellPosition",value:function(e,t,n){if(!1!==this.clone.wtTable.holder.contains(e)){var o=this.mainTableScrollableElement===this.wot.rootWindow,i=n<this.wot.getSetting("fixedColumnsLeft"),a=t<this.wot.getSetting("fixedRowsTop"),r=t>=this.wot.getSetting("totalRows")-this.wot.getSetting("fixedRowsBottom"),l={left:this.clone.wtTable.spreader.offsetLeft,top:this.clone.wtTable.spreader.offsetTop},s={left:e.offsetLeft,top:e.offsetTop};return o?this.getRelativeCellPositionWithinWindow(a,i,s,l):this.getRelativeCellPositionWithinHolder(a,r,i,s,l)}No("The provided element is not a child of the ".concat(this.type," overlay"))}},{key:"getRelativeCellPositionWithinWindow",value:function(e,t,n,o){var i=this.wot.wtTable.wtRootElement.getBoundingClientRect(),a=0,r=0;(a=t?i.left<=0?-1*i.left:0:o.left,e)?r=this.clone.wtTable.TABLE.getBoundingClientRect().top-i.top:r=o.top;return{left:n.left+a,top:n.top+r}}},{key:"getRelativeCellPositionWithinHolder",value:function(e,t,n,o,i){var a=this.clone.cloneSource.wtOverlays.leftOverlay.getScrollPosition(),r=this.clone.cloneSource.wtOverlays.topOverlay.getScrollPosition(),l=0,s=0;if(n||(l=a-i.left),t){var c=this.wot.wtTable.wtRootElement.getBoundingClientRect();s=-1*this.clone.wtTable.TABLE.getBoundingClientRect().top+c.top}else e||(s=r-i.top);return{left:o.left-l,top:o.top-s}}},{key:"makeClone",value:function(e){if(-1===ui.indexOf(e))throw new Error('Clone type "'.concat(e,'" is not supported.'));var t=this.wot,n=t.wtTable,o=t.rootDocument,i=t.rootWindow,a=o.createElement("DIV"),r=o.createElement("TABLE"),l=n.wtRootElement.parentNode;a.className="ht_clone_".concat(e," handsontable"),a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.overflow="visible",r.className=n.TABLE.className,a.appendChild(r),this.type=e,l.appendChild(a);var s=this.wot.getSetting("preventOverflow");return!0===s||"horizontal"===s&&this.type===ai||"vertical"===s&&this.type===li?this.mainTableScrollableElement=i:"hidden"===i.getComputedStyle(l).getPropertyValue("overflow")?this.mainTableScrollableElement=n.holder:this.mainTableScrollableElement=an(n.TABLE),new this.wot.constructor({cloneSource:this.wot,cloneOverlay:this,table:r})}},{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.shouldBeRendered();this.clone&&(this.needFullRender||t)&&this.clone.draw(e),this.needFullRender=t}},{key:"reset",value:function(){if(this.clone){var e=this.clone.wtTable.holder,t=this.clone.wtTable.hider;K([e.style,t.style,e.parentNode.style],function(e){e.width="",e.height=""})}}},{key:"destroy",value:function(){new Gi(this.clone).destroy()}}])&&Ji(t.prototype,n),o&&Ji(t,o),e}();function Xi(e){"@babel/helpers - typeof";return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qi(e,t,n){return(Qi=na()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&ea(i,n.prototype),i}).apply(null,arguments)}function Zi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ea(e,t){return(ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ta(e){var t=na();return function(){var n,o=oa(e);if(t){var i=oa(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Xi(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function na(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function oa(e){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ea(e,t)}(a,Yi);var t,n,o,i=ta(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).clone=t.makeClone(ci),t}return t=a,o=[{key:"OVERLAY_NAME",get:function(){return ci}}],(n=[{key:"createTable",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qi(ji,t)}},{key:"shouldBeRendered",value:function(){var e=this.wot;return e.getSetting("shouldRenderBottomOverlay")&&e.getSetting("shouldRenderLeftOverlay")}},{key:"resetFixedPosition",value:function(){var e=this.wot;if(this.updateTrimmingContainer(),e.wtTable.holder.parentNode){var t=this.clone.wtTable.holder.parentNode;if(t.style.top="",this.trimmingContainer===e.rootWindow){var n,o,i=this.wot,a=i.rootDocument,r=i.wtTable.hider.getBoundingClientRect(),l=Math.ceil(r.bottom),s=Math.ceil(r.left),c=a.documentElement.clientHeight;n=s<0?-s:0,o=l>c?l-c:0,o+="px",n+="px",t.style.left=n,t.style.bottom=o}else Tn(t),this.repositionOverlay();var u=dn(this.clone.wtTable.TABLE),d=un(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(u=0),t.style.height="".concat(u,"px"),t.style.width="".concat(d,"px"),!1}}},{key:"repositionOverlay",value:function(){var e=this.wot,t=e.wtTable,n=e.rootDocument,o=this.clone.wtTable.holder.parentNode,i=_n(n);t.holder.clientHeight===t.holder.offsetHeight&&(i=0),o.style.bottom="".concat(i,"px")}}])&&Zi(t.prototype,n),o&&Zi(t,o),a}();function aa(e){"@babel/helpers - typeof";return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(e,t){return(ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function la(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=sa(e);if(t){var i=sa(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===aa(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ca=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ra(e,t)}(n,wi);var t=la(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return n}();he(ca,Pi),he(ca,xi);var ua=ca;function da(e){"@babel/helpers - typeof";return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t,n){return(ha=ba()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&pa(i,n.prototype),i}).apply(null,arguments)}function fa(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pa(e,t){return(pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ma(e){var t=ba();return function(){var n,o=ya(e);if(t){var i=ya(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===da(t)||"function"==typeof t))return t;return va(e)}(this,n)}}function va(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ba(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ga=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pa(e,t)}(a,Yi);var t,n,o,i=ma(a);function a(e){var t,n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),n=va(t),r=-1,(o="cachedFixedRowsBottom")in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,t.clone=t.makeClone(ri),t.cachedFixedRowsBottom=t.wot.getSetting("fixedRowsBottom"),t}return t=a,o=[{key:"OVERLAY_NAME",get:function(){return ri}}],(n=[{key:"createTable",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ha(ua,t)}},{key:"shouldBeRendered",value:function(){return this.wot.getSetting("shouldRenderBottomOverlay")}},{key:"resetFixedPosition",value:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode;e.style.top="";var t=0,n=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==this.wot.rootWindow||n&&"vertical"===n)t=this.getScrollPosition(),this.repositionOverlay();else{var o,i,a=this.wot,r=a.rootDocument,l=a.wtTable,s=l.hider.getBoundingClientRect(),c=Math.ceil(s.bottom),u=r.documentElement.clientHeight;o=""===(o=l.hider.style.left)?0:o,t=i=c>u?c-u:0,i+="px",e.style.left=o,e.style.bottom=i}var d=this.adjustHeaderBordersPosition(t);return this.adjustElementsSize(),d}}},{key:"repositionOverlay",value:function(){var e=this.wot,t=e.wtTable,n=e.rootDocument,o=this.clone.wtTable.holder.parentNode,i=_n(n);t.holder.clientHeight===t.holder.offsetHeight&&(i=0),o.style.bottom="".concat(i,"px")}},{key:"setScrollPosition",value:function(e){var t=this.wot.rootWindow,n=!1;return this.mainTableScrollableElement===t?(t.scrollTo(tn(t),e),n=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,n=!0),n}},{key:"onScroll",value:function(){this.wot.getSetting("onScrollHorizontally")}},{key:"sumCellSizes",value:function(e,t){for(var n=this.wot,o=n.wtTable,i=n.wtSettings.settings.defaultRowHeight,a=e,r=0;a<t;){var l=o.getRowHeight(a);r+=void 0===l?i:l,a+=1}return r}},{key:"adjustElementsSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateTrimmingContainer(),(this.needFullRender||e)&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}},{key:"adjustRootElementSize",value:function(){var e=this.wot,t=e.wtTable,n=e.wtViewport,o=e.rootWindow,i=_n(this.wot.rootDocument),a=this.clone.wtTable.holder.parentNode.style,r=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==o||"horizontal"===r){var l=n.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(l-=i),l=Math.min(l,t.wtRootElement.scrollWidth),a.width="".concat(l,"px")}else a.width="";this.clone.wtTable.holder.style.width=a.width;var s=dn(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(s=0),a.height="".concat(s,"px")}},{key:"adjustRootChildrenSize",value:function(){var e=this.clone.wtTable.holder;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=e.parentNode.style.height}},{key:"applyToDOM",value:function(){var e=this.wot.getSetting("totalRows");if("number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top="".concat(this.wot.wtViewport.rowsRenderCalculator.startPosition,"px");else{if(0!==e)throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.top="0"}this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}},{key:"syncOverlayOffset",value:function(){"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.left="".concat(this.wot.wtViewport.columnsRenderCalculator.startPosition,"px"):this.clone.wtTable.spreader.style.left=""}},{key:"scrollTo",value:function(e,t){var n=this.getTableParentOffset(),o=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,i=0;t&&o.offsetHeight!==o.clientHeight&&(i=_n(this.wot.rootDocument)),t?(n+=this.sumCellSizes(0,e+1),n-=this.wot.wtViewport.getViewportHeight(),n+=1):n+=this.sumCellSizes(this.wot.getSetting("fixedRowsBottom"),e),n+=i,this.setScrollPosition(n)}},{key:"getTableParentOffset",value:function(){return this.mainTableScrollableElement===this.wot.rootWindow?this.wot.wtTable.holderOffset.top:0}},{key:"getScrollPosition",value:function(){return nn(this.mainTableScrollableElement,this.wot.rootWindow)}},{key:"adjustHeaderBordersPosition",value:function(e){var t=this.wot.getSetting("fixedRowsBottom"),n=this.cachedFixedRowsBottom!==t,o=this.wot.getSetting("columnHeaders"),i=!1;if((n||0===t)&&o.length>0){var a=this.wot.wtTable.holder.parentNode,r=Ut(a,"innerBorderBottom");this.cachedFixedRowsBottom=this.wot.getSetting("fixedRowsBottom"),e||0===this.wot.getSetting("totalRows")?(zt(a,"innerBorderBottom"),i=!r):(Wt(a,"innerBorderBottom"),i=r)}return i}}])&&fa(t.prototype,n),o&&fa(t,o),a}();function wa(e){"@babel/helpers - typeof";return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t){return(_a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=ka(e);if(t){var i=ka(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===wa(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}(n,wi);var t=Ca(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return n}();he(xa,Ci),he(xa,Li);var Sa=xa;function Ta(e){"@babel/helpers - typeof";return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ea(e,t,n){return(Ea=Ra()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&Da(i,n.prototype),i}).apply(null,arguments)}function Oa(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Da(e,t){return(Da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ia(e){var t=Ra();return function(){var n,o=Ma(e);if(t){var i=Ma(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Ta(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ra(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Da(e,t)}(a,Yi);var t,n,o,i=Ia(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).clone=t.makeClone(li),t}return t=a,o=[{key:"OVERLAY_NAME",get:function(){return li}}],(n=[{key:"createTable",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ea(Sa,t)}},{key:"shouldBeRendered",value:function(){return this.wot.getSetting("shouldRenderLeftOverlay")}},{key:"resetFixedPosition",value:function(){var e=this.wot.wtTable;if(this.needFullRender&&e.holder.parentNode){var t=this.clone.wtTable.holder.parentNode,n=0,o=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==this.wot.rootWindow||o&&"horizontal"===o)n=this.getScrollPosition(),Tn(t);else{var i,a,r=e.hider.getBoundingClientRect(),l=Math.ceil(r.left),s=Math.ceil(r.right);a=""===(a=e.hider.style.top)?0:a,n=i=l<0&&s-t.offsetWidth>0?-l:0,xn(t,i+="px",a)}var c=this.adjustHeaderBordersPosition(n);return this.adjustElementsSize(),c}}},{key:"setScrollPosition",value:function(e){var t=this.wot.rootWindow,n=!1;return this.mainTableScrollableElement===t&&t.scrollX!==e?(t.scrollTo(e,en(t)),n=!0):this.mainTableScrollableElement.scrollLeft!==e&&(this.mainTableScrollableElement.scrollLeft=e,n=!0),n}},{key:"onScroll",value:function(){this.wot.getSetting("onScrollVertically")}},{key:"sumCellSizes",value:function(e,t){for(var n=this.wot.wtSettings.defaultColumnWidth,o=e,i=0;o<t;)i+=this.wot.wtTable.getStretchedColumnWidth(o)||n,o+=1;return i}},{key:"adjustElementsSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateTrimmingContainer(),(this.needFullRender||e)&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}},{key:"adjustRootElementSize",value:function(){var e=this.wot,t=e.wtTable,n=e.rootDocument,o=e.rootWindow,i=_n(n),a=this.clone.wtTable.holder.parentNode.style,r=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==o||"vertical"===r){var l=this.wot.wtViewport.getWorkspaceHeight();this.wot.wtOverlays.hasScrollbarBottom&&(l-=i),l=Math.min(l,t.wtRootElement.scrollHeight),a.height="".concat(l,"px")}else a.height="";this.clone.wtTable.holder.style.height=a.height;var s=un(this.clone.wtTable.TABLE);a.width="".concat(s,"px")}},{key:"adjustRootChildrenSize",value:function(){var e,t=this.clone.wtTable.holder,n=this.wot.selections,o=Math.abs(null!==(e=null===n||void 0===n?void 0:n.getCell().getBorder(this.wot).cornerCenterPointOffset)&&void 0!==e?e:0);this.clone.wtTable.hider.style.height=this.hider.style.height,t.style.height=t.parentNode.style.height,t.style.width="".concat(parseInt(t.parentNode.style.width,10)+o,"px")}},{key:"applyToDOM",value:function(){var e=this.wot.getSetting("totalColumns");if("number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition)this.spreader.style.left="".concat(this.wot.wtViewport.columnsRenderCalculator.startPosition,"px");else{if(0!==e)throw new Error("Incorrect value of the columnsRenderCalculator");this.spreader.style.left="0"}this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}},{key:"syncOverlayOffset",value:function(){"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.top="".concat(this.wot.wtViewport.rowsRenderCalculator.startPosition,"px"):this.clone.wtTable.spreader.style.top=""}},{key:"scrollTo",value:function(e,t){var n=this.getTableParentOffset(),o=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,i=0;return t&&o.offsetWidth!==o.clientWidth&&(i=_n(this.wot.rootDocument)),t?(n+=this.sumCellSizes(0,e+1),n-=this.wot.wtViewport.getViewportWidth()):n+=this.sumCellSizes(this.wot.getSetting("fixedColumnsLeft"),e),n+=i,this.setScrollPosition(n)}},{key:"getTableParentOffset",value:function(){var e=0;return this.wot.getSetting("preventOverflow")||this.trimmingContainer!==this.wot.rootWindow||(e=this.wot.wtTable.holderOffset.left),e}},{key:"getScrollPosition",value:function(){return on(this.mainTableScrollableElement,this.wot.rootWindow)}},{key:"adjustHeaderBordersPosition",value:function(e){var t=this.wot.wtTable.holder.parentNode,n=this.wot.getSetting("rowHeaders"),o=this.wot.getSetting("fixedColumnsLeft");this.wot.getSetting("totalRows")?Wt(t,"emptyRows"):zt(t,"emptyRows");var i=!1;if(o&&!n.length)zt(t,"innerBorderLeft");else if(!o&&n.length){var a=Ut(t,"innerBorderLeft");e?(zt(t,"innerBorderLeft"),i=!a):(Wt(t,"innerBorderLeft"),i=a)}return i}}])&&Oa(t.prototype,n),o&&Oa(t,o),a}(),Aa={getFirstRenderedRow:function(){return 0===this.wot.getSetting("totalRows")?-1:0},getFirstVisibleRow:function(){return this.getFirstRenderedRow()},getLastRenderedRow:function(){return this.getRenderedRowsCount()-1},getLastVisibleRow:function(){return this.getLastRenderedRow()},getRenderedRowsCount:function(){var e=this.wot.getSetting("totalRows");return Math.min(this.wot.getSetting("fixedRowsTop"),e)},getVisibleRowsCount:function(){return this.getRenderedRowsCount()}};me(Aa,"MIXIN_NAME","stickyRowsTop",{writable:!1,enumerable:!1});var La=Aa;function Na(e){"@babel/helpers - typeof";return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Va(e,t){return(Va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Ba(e);if(t){var i=Ba(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Na(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ba(e){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ha=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Va(e,t)}(n,wi);var t=Fa(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return n}();he(Ha,La),he(Ha,Li);var ja=Ha;function $a(e){"@babel/helpers - typeof";return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(e,t,n){return(Ua=Ka()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&Wa(i,n.prototype),i}).apply(null,arguments)}function za(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wa(e,t){return(Wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qa(e){var t=Ka();return function(){var n,o=Ga(e);if(t){var i=Ga(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===$a(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ka(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Ga(e){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ja=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wa(e,t)}(a,Yi);var t,n,o,i=qa(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).clone=t.makeClone(si),t}return t=a,o=[{key:"OVERLAY_NAME",get:function(){return si}}],(n=[{key:"createTable",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ua(ja,t)}},{key:"shouldBeRendered",value:function(){var e=this.wot;return e.getSetting("shouldRenderTopOverlay")&&e.getSetting("shouldRenderLeftOverlay")}},{key:"resetFixedPosition",value:function(){if(this.updateTrimmingContainer(),this.wot.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=this.wot.getSetting("preventOverflow");if(this.trimmingContainer===this.wot.rootWindow){var n=this.wot.wtTable.hider.getBoundingClientRect(),o=Math.ceil(n.top),i=Math.ceil(n.left),a=Math.ceil(n.bottom),r=Math.ceil(n.right),l="0",s="0";t&&"vertical"!==t||i<0&&r-e.offsetWidth>0&&(l="".concat(-i,"px")),t&&"horizontal"!==t||o<0&&a-e.offsetHeight>0&&(s="".concat(-o,"px")),xn(e,l,s)}else Tn(e);var c=dn(this.clone.wtTable.TABLE),u=un(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(c=0),e.style.height="".concat(c,"px"),e.style.width="".concat(u,"px"),!1}}}])&&za(t.prototype,n),o&&za(t,o),a}();function Ya(e){"@babel/helpers - typeof";return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xa(e,t){return(Xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Za(e);if(t){var i=Za(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Ya(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xa(e,t)}(n,wi);var t=Qa(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return n}();he(er,La),he(er,xi);var tr=er;function nr(e){"@babel/helpers - typeof";return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(e,t,n){return(or=sr()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&ar(i,n.prototype),i}).apply(null,arguments)}function ir(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ar(e,t){return(ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rr(e){var t=sr();return function(){var n,o=cr(e);if(t){var i=cr(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===nr(t)||"function"==typeof t))return t;return lr(e)}(this,n)}}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ar(e,t)}(a,Yi);var t,n,o,i=rr(a);function a(e){var t,n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),n=lr(t),r=-1,(o="cachedFixedRowsTop")in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,t.clone=t.makeClone(ai),t.cachedFixedRowsTop=t.wot.getSetting("fixedRowsTop"),t}return t=a,o=[{key:"OVERLAY_NAME",get:function(){return ai}}],(n=[{key:"createTable",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return or(tr,t)}},{key:"shouldBeRendered",value:function(){return this.wot.getSetting("shouldRenderTopOverlay")}},{key:"resetFixedPosition",value:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=this.wot.getSetting("preventOverflow"),n=0,o=!1;if(this.trimmingContainer!==this.wot.rootWindow||t&&"vertical"===t)n=this.getScrollPosition(),Tn(e);else{var i,a,r=this.wot.wtTable,l=r.hider.getBoundingClientRect(),s=Math.ceil(l.top),c=Math.ceil(l.bottom),u=e.offsetHeight;o=c===u,i=""===(i=r.hider.style.left)?0:i,n=a=s<0&&c-u>0?-s:0,xn(e,i,a+="px")}var d=this.adjustHeaderBordersPosition(n,o);return this.adjustElementsSize(),d}}},{key:"setScrollPosition",value:function(e){var t=this.wot.rootWindow,n=!1;return this.mainTableScrollableElement===t&&t.scrollY!==e?(t.scrollTo(tn(t),e),n=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,n=!0),n}},{key:"onScroll",value:function(){this.wot.getSetting("onScrollHorizontally")}},{key:"sumCellSizes",value:function(e,t){for(var n=this.wot.wtSettings.settings.defaultRowHeight,o=e,i=0;o<t;){var a=this.wot.wtTable.getRowHeight(o);i+=void 0===a?n:a,o+=1}return i}},{key:"adjustElementsSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateTrimmingContainer(),(this.needFullRender||e)&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}},{key:"adjustRootElementSize",value:function(){var e=this.wot,t=e.wtTable,n=e.rootDocument,o=e.rootWindow,i=_n(n),a=this.clone.wtTable.holder.parentNode.style,r=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==o||"horizontal"===r){var l=this.wot.wtViewport.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(l-=i),l=Math.min(l,t.wtRootElement.scrollWidth),a.width="".concat(l,"px")}else a.width="";this.clone.wtTable.holder.style.width=a.width;var s=dn(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(s=0),a.height="".concat(s,"px")}},{key:"adjustRootChildrenSize",value:function(){var e,t=this.clone.wtTable.holder,n=this.wot.selections,o=Math.abs(null!==(e=null===n||void 0===n?void 0:n.getCell().getBorder(this.wot).cornerCenterPointOffset)&&void 0!==e?e:0);this.clone.wtTable.hider.style.width=this.hider.style.width,t.style.width=t.parentNode.style.width,t.style.height="".concat(parseInt(t.parentNode.style.height,10)+o,"px")}},{key:"applyToDOM",value:function(){var e=this.wot.getSetting("totalRows");if("number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top="".concat(this.wot.wtViewport.rowsRenderCalculator.startPosition,"px");else{if(0!==e)throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.top="0"}this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}},{key:"syncOverlayOffset",value:function(){"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.left="".concat(this.wot.wtViewport.columnsRenderCalculator.startPosition,"px"):this.clone.wtTable.spreader.style.left=""}},{key:"scrollTo",value:function(e,t){var n=this.wot,o=(n.cloneSource?n.cloneSource:n).wtTable.holder,i=this.getTableParentOffset(),a=0;if(t&&o.offsetHeight!==o.clientHeight&&(a=_n(n.rootDocument)),t){var r=n.getSetting("fixedRowsBottom"),l=n.getSetting("totalRows");i+=this.sumCellSizes(0,e+1),i-=n.wtViewport.getViewportHeight()-this.sumCellSizes(l-r,l),i+=1}else i+=this.sumCellSizes(n.getSetting("fixedRowsTop"),e);return i+=a,this.setScrollPosition(i)}},{key:"getTableParentOffset",value:function(){return this.mainTableScrollableElement===this.wot.rootWindow?this.wot.wtTable.holderOffset.top:0}},{key:"getScrollPosition",value:function(){return nn(this.mainTableScrollableElement,this.wot.rootWindow)}},{key:"adjustHeaderBordersPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.wot.wtTable.holder.parentNode;this.wot.getSetting("totalColumns")?Wt(n,"emptyColumns"):zt(n,"emptyColumns");var o=!1;if(!t){var i=this.wot.getSetting("fixedRowsTop"),a=this.cachedFixedRowsTop!==i,r=this.wot.getSetting("columnHeaders");if((a||0===i)&&r.length>0){var l=Ut(n,"innerBorderTop");this.cachedFixedRowsTop=this.wot.getSetting("fixedRowsTop"),e||0===this.wot.getSetting("totalRows")?(zt(n,"innerBorderTop"),o=!l):(Wt(n,"innerBorderTop"),o=l)}}if(0===this.wot.getSetting("rowHeaders").length){var s=this.clone.wtTable.THEAD.querySelectorAll("th:nth-of-type(2)");if(s)for(var c=0;c<s.length;c++)s[c].style["border-left-width"]=0}return o}}])&&ir(t.prototype,n),o&&ir(t,o),a}();function dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function fr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var pr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n&&(this.eventManager=new Gi(t),this.instance=t,this.wot=t,this.settings=n,this.mouseDown=!1,this.main=null,this.top=null,this.left=null,this.bottom=null,this.right=null,this.topStyle=null,this.leftStyle=null,this.bottomStyle=null,this.rightStyle=null,this.cornerDefaultStyle={width:"6px",height:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFF"},this.cornerCenterPointOffset=-parseInt(this.cornerDefaultStyle.width,10)/2,this.corner=null,this.cornerStyle=null,this.createBorders(n),this.registerListeners())}var t,n,o;return t=e,(n=[{key:"registerListeners",value:function(){var e=this,t=this.wot.rootDocument.body;this.eventManager.addEventListener(t,"mousedown",function(){return e.onMouseDown()}),this.eventManager.addEventListener(t,"mouseup",function(){return e.onMouseUp()});for(var n=function(t,n){var o=e.main.childNodes[t];e.eventManager.addEventListener(o,"mouseenter",function(n){return e.onMouseEnter(n,e.main.childNodes[t])})},o=0,i=this.main.childNodes.length;o<i;o++)n(o)}},{key:"onMouseDown",value:function(){this.mouseDown=!0}},{key:"onMouseUp",value:function(){this.mouseDown=!1}},{key:"onMouseEnter",value:function(e,t){if(this.mouseDown&&this.wot.getSetting("hideBorderOnMouseDownOver")){e.preventDefault(),$i(e);var n=this,o=this.wot.rootDocument.body,i=t.getBoundingClientRect();t.style.display="none",this.eventManager.addEventListener(o,"mousemove",function e(a){var r;((r=a).clientY<Math.floor(i.top)||r.clientY>Math.ceil(i.top+i.height)||r.clientX<Math.floor(i.left)||r.clientX>Math.ceil(i.left+i.width))&&(n.eventManager.removeEventListener(o,"mousemove",e),t.style.display="block")})}}},{key:"createBorders",value:function(e){var t=this.wot.rootDocument;this.main=t.createElement("div");var n=["top","left","bottom","right","corner"],o=this.main.style;o.position="absolute",o.top=0,o.left=0;for(var i=0;i<5;i++){var a=n[i],r=t.createElement("div");r.className="wtBorder ".concat(this.settings.className||""),this.settings[a]&&this.settings[a].hide&&(r.className+=" hidden"),(o=r.style).backgroundColor=this.settings[a]&&this.settings[a].color?this.settings[a].color:e.border.color,o.height=this.settings[a]&&this.settings[a].width?"".concat(this.settings[a].width,"px"):"".concat(e.border.width,"px"),o.width=this.settings[a]&&this.settings[a].width?"".concat(this.settings[a].width,"px"):"".concat(e.border.width,"px"),this.main.appendChild(r)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),Ve()&&this.createMultipleSelectorHandles(),this.disappear();var l=this.wot.wtTable,s=l.bordersHolder;s||((s=t.createElement("div")).className="htBorders",l.bordersHolder=s,l.spreader.appendChild(s)),s.appendChild(this.main)}},{key:"createMultipleSelectorHandles",value:function(){var e=this,t=this.wot.rootDocument;this.selectionHandles={topLeft:t.createElement("DIV"),topLeftHitArea:t.createElement("DIV"),bottomRight:t.createElement("DIV"),bottomRightHitArea:t.createElement("DIV")};this.selectionHandles.topLeft.className="topLeftSelectionHandle",this.selectionHandles.topLeftHitArea.className="topLeftSelectionHandle-HitArea",this.selectionHandles.bottomRight.className="bottomRightSelectionHandle",this.selectionHandles.bottomRightHitArea.className="bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={topLeft:this.selectionHandles.topLeft.style,topLeftHitArea:this.selectionHandles.topLeftHitArea.style,bottomRight:this.selectionHandles.bottomRight.style,bottomRightHitArea:this.selectionHandles.bottomRightHitArea.style},ve({position:"absolute",height:"".concat(40,"px"),width:"".concat(40,"px"),"border-radius":"".concat(parseInt(40/1.5,10),"px")},function(t,n){e.selectionHandles.styles.bottomRightHitArea[n]=t,e.selectionHandles.styles.topLeftHitArea[n]=t}),ve({position:"absolute",height:"".concat(10,"px"),width:"".concat(10,"px"),"border-radius":"".concat(parseInt(10/1.5,10),"px"),background:"#F5F5FF",border:"1px solid #4285c8"},function(t,n){e.selectionHandles.styles.bottomRight[n]=t,e.selectionHandles.styles.topLeft[n]=t}),this.main.appendChild(this.selectionHandles.topLeft),this.main.appendChild(this.selectionHandles.bottomRight),this.main.appendChild(this.selectionHandles.topLeftHitArea),this.main.appendChild(this.selectionHandles.bottomRightHitArea)}},{key:"isPartRange",value:function(e,t){var n=this.wot.selections.createOrGetArea();return!(!n.cellRange||e===n.cellRange.to.row&&t===n.cellRange.to.col)}},{key:"updateMultipleSelectionHandlesPosition",value:function(e,t,n,o,i,a){var r=parseInt(this.selectionHandles.styles.topLeft.width,10),l=parseInt(this.selectionHandles.styles.topLeftHitArea.width,10);this.selectionHandles.styles.topLeft.top="".concat(parseInt(n-r,10),"px"),this.selectionHandles.styles.topLeft.left="".concat(parseInt(o-r,10),"px"),this.selectionHandles.styles.topLeftHitArea.top="".concat(parseInt(n-l/4*3,10),"px"),this.selectionHandles.styles.topLeftHitArea.left="".concat(parseInt(o-l/4*3,10),"px"),this.selectionHandles.styles.bottomRight.top="".concat(parseInt(n+a,10),"px"),this.selectionHandles.styles.bottomRight.left="".concat(parseInt(o+i,10),"px"),this.selectionHandles.styles.bottomRightHitArea.top="".concat(parseInt(n+a-l/4,10),"px"),this.selectionHandles.styles.bottomRightHitArea.left="".concat(parseInt(o+i-l/4,10),"px"),this.settings.border.cornerVisible&&this.settings.border.cornerVisible()?(this.selectionHandles.styles.topLeft.display="block",this.selectionHandles.styles.topLeftHitArea.display="block",this.isPartRange(e,t)?(this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"):(this.selectionHandles.styles.bottomRight.display="block",this.selectionHandles.styles.bottomRightHitArea.display="block")):(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.topLeftHitArea.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"),e===this.wot.wtSettings.getSetting("fixedRowsTop")||t===this.wot.wtSettings.getSetting("fixedColumnsLeft")?(this.selectionHandles.styles.topLeft.zIndex="9999",this.selectionHandles.styles.topLeftHitArea.zIndex="9999"):(this.selectionHandles.styles.topLeft.zIndex="",this.selectionHandles.styles.topLeftHitArea.zIndex="")}},{key:"appear",value:function(e){if(!this.disabled){for(var t,n,o,i,a,r,l=this.wot,s=l.wtTable,c=l.rootDocument,u=l.rootWindow,d=s.getRenderedRowsCount(),h=0;h<d;h+=1){var f=s.rowFilter.renderedToSource(h);if(f>=e[0]&&f<=e[2]){t=f,a=e[0];break}}for(var p=d-1;p>=0;p-=1){var m=s.rowFilter.renderedToSource(p);if(m>=e[0]&&m<=e[2]){n=m;break}}for(var v=s.getRenderedColumnsCount(),b=0;b<v;b+=1){var y=s.columnFilter.renderedToSource(b);if(y>=e[1]&&y<=e[3]){o=y,r=e[1];break}}for(var g=v-1;g>=0;g-=1){var w=s.columnFilter.renderedToSource(g);if(w>=e[1]&&w<=e[3]){i=w;break}}if(void 0!==t&&void 0!==o){var _=s.getCell(new qn(t,o)),C=t!==n||o!==i,k=C?s.getCell(new qn(n,i)):_,x=Zt(_),S=C?Zt(k):x,T=Zt(s.TABLE),E=x.top,O=x.left,D=O-T.left-1,I=S.left+un(k)-O;if(this.isEntireColumnSelected(t,n)){var R=this.getDimensionsFromHeader("columns",o,i,a,T),M=null;if(R){var P=dr(R,3);M=P[0],D=P[1],I=P[2]}M&&(_=M)}var A=E-T.top-1,L=S.top+dn(k)-E;if(this.isEntireRowSelected(o,i)){var N=this.getDimensionsFromHeader("rows",t,n,r,T),V=null;if(N){var F=dr(N,3);V=F[0],A=F[1],L=F[2]}V&&(_=V)}var B=cn(_,u);parseInt(B.borderTopWidth,10)>0&&(A+=1,L=L>0?L-1:0),parseInt(B.borderLeftWidth,10)>0&&(D+=1,I=I>0?I-1:0),this.topStyle.top="".concat(A,"px"),this.topStyle.left="".concat(D,"px"),this.topStyle.width="".concat(I,"px"),this.topStyle.display="block",this.leftStyle.top="".concat(A,"px"),this.leftStyle.left="".concat(D,"px"),this.leftStyle.height="".concat(L,"px"),this.leftStyle.display="block";var H=Math.floor(this.settings.border.width/2);this.bottomStyle.top="".concat(A+L-H,"px"),this.bottomStyle.left="".concat(D,"px"),this.bottomStyle.width="".concat(I,"px"),this.bottomStyle.display="block",this.rightStyle.top="".concat(A,"px"),this.rightStyle.left="".concat(D+I-H,"px"),this.rightStyle.height="".concat(L+1,"px"),this.rightStyle.display="block";var j=this.settings.border.cornerVisible;j="function"==typeof j?j(this.settings.layerLevel):j;var $=this.wot.getSetting("onModifyGetCellCoords",n,i),U=n,z=i;if($&&Array.isArray($)){var W=dr($,4);U=W[2],z=W[3]}if(Ve()||!j||this.isPartRange(U,z))this.cornerStyle.display="none";else{this.cornerStyle.top="".concat(A+L+this.cornerCenterPointOffset-1,"px"),this.cornerStyle.left="".concat(D+I+this.cornerCenterPointOffset-1,"px"),this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none";var q=rn(s.TABLE),K=q===u;if(K&&(q=c.documentElement),i===this.wot.getSetting("totalColumns")-1)(K?k.getBoundingClientRect().left:k.offsetLeft)+un(k)+parseInt(this.cornerDefaultStyle.width,10)/2>=fn(q)&&(this.cornerStyle.left="".concat(Math.floor(D+I+this.cornerCenterPointOffset-parseInt(this.cornerDefaultStyle.width,10)/2),"px"),this.cornerStyle.borderRightWidth=0);if(n===this.wot.getSetting("totalRows")-1)(K?k.getBoundingClientRect().top:k.offsetTop)+dn(k)+parseInt(this.cornerDefaultStyle.height,10)/2>=hn(q)&&(this.cornerStyle.top="".concat(Math.floor(A+L+this.cornerCenterPointOffset-parseInt(this.cornerDefaultStyle.height,10)/2),"px"),this.cornerStyle.borderBottomWidth=0);this.cornerStyle.display="block"}Ve()&&this.updateMultipleSelectionHandlesPosition(n,i,A,D,I,L)}else this.disappear()}}},{key:"isEntireColumnSelected",value:function(e,t){return e===this.wot.wtTable.getFirstRenderedRow()&&t===this.wot.wtTable.getLastRenderedRow()}},{key:"isEntireRowSelected",value:function(e,t){return e===this.wot.wtTable.getFirstRenderedColumn()&&t===this.wot.wtTable.getLastRenderedColumn()}},{key:"getDimensionsFromHeader",value:function(e,t,n,o,i){var a=this.wot.wtTable,r=a.wtRootElement.parentNode,l=null,s=null,c=null,u=null,d=null,h=null,f=null,p=null;switch(e){case"rows":l=function(){return a.getRowHeader.apply(a,arguments)},s=function(){return dn.apply(void 0,arguments)},c="ht__selection--rows",h="top";break;case"columns":l=function(){return a.getColumnHeader.apply(a,arguments)},s=function(){return un.apply(void 0,arguments)},c="ht__selection--columns",h="left"}if(r.classList.contains(c)){var m=this.wot.getSetting("columnHeaders").length;if(f=l(t,m-o),p=l(n,m-o),!f||!p)return!1;var v=Zt(f),b=Zt(p);return f&&p&&(u=v[h]-i[h]-1,d=b[h]+s(p)-v[h]),[f,u,d]}return!1}},{key:"changeBorderStyle",value:function(e,t){var n=this[e].style,o=t[e];!o||o.hide?zt(this[e],"hidden"):(Ut(this[e],"hidden")&&Wt(this[e],"hidden"),n.backgroundColor=o.color,"top"!==e&&"bottom"!==e||(n.height="".concat(o.width,"px")),"right"!==e&&"left"!==e||(n.width="".concat(o.width,"px")))}},{key:"changeBorderToDefaultStyle",value:function(e){var t=1,n="#000",o=this[e].style;o.backgroundColor=n,o.width="".concat(t,"px"),o.height="".concat(t,"px")}},{key:"toggleHiddenClass",value:function(e,t){this.changeBorderToDefaultStyle(e),t?zt(this[e],"hidden"):Wt(this[e],"hidden")}},{key:"disappear",value:function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none",Ve()&&(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none")}},{key:"destroy",value:function(){this.eventManager.destroyWithOwnEventsOnly(),this.main.parentNode.removeChild(this.main)}}])&&fr(t.prototype,n),o&&fr(t,o),e}();function mr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var vr=new WeakMap,br=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.eventManager=new Gi(t),vr.set(this,{selectedCellBeforeTouchEnd:void 0,dblClickTimeout:[null,null],dblClickOrigin:[null,null]}),this.registerEvents()}var t,n,o;return t=e,(n=[{key:"registerEvents",value:function(){var e=this;this.eventManager.addEventListener(this.instance.wtTable.holder,"contextmenu",function(t){return e.onContextMenu(t)}),this.eventManager.addEventListener(this.instance.wtTable.TABLE,"mouseover",function(t){return e.onMouseOver(t)}),this.eventManager.addEventListener(this.instance.wtTable.TABLE,"mouseout",function(t){return e.onMouseOut(t)});var t=function(){e.eventManager.addEventListener(e.instance.wtTable.holder,"touchstart",function(t){return e.onTouchStart(t)}),e.eventManager.addEventListener(e.instance.wtTable.holder,"touchend",function(t){return e.onTouchEnd(t)}),e.instance.momentumScrolling||(e.instance.momentumScrolling={}),e.eventManager.addEventListener(e.instance.wtTable.holder,"scroll",function(){clearTimeout(e.instance.momentumScrolling._timeout),e.instance.momentumScrolling.ongoing||e.instance.getSetting("onBeforeTouchScroll"),e.instance.momentumScrolling.ongoing=!0,e.instance.momentumScrolling._timeout=setTimeout(function(){e.instance.touchApplied||(e.instance.momentumScrolling.ongoing=!1,e.instance.getSetting("onAfterMomentumScroll"))},200)})};Ve()?t():(V()&&t(),e.eventManager.addEventListener(e.instance.wtTable.holder,"mouseup",function(t){return e.onMouseUp(t)}),e.eventManager.addEventListener(e.instance.wtTable.holder,"mousedown",function(t){return e.onMouseDown(t)}))}},{key:"selectedCellWasTouched",value:function(e){var t=vr.get(this),n=this.parentCell(e).coords;if(t.selectedCellBeforeTouchEnd&&n){var o=[n.row,t.selectedCellBeforeTouchEnd.from.row],i=o[0],a=o[1],r=[n.col,t.selectedCellBeforeTouchEnd.from.col];return i===a&&r[0]===r[1]}return!1}},{key:"parentCell",value:function(e){var t={},n=Nt(e,["TD","TH"],this.instance.wtTable.TABLE);return n?(t.coords=this.instance.wtTable.getCoords(n),t.TD=n):Ut(e,"wtBorder")&&Ut(e,"current")?(t.coords=this.instance.selections.getCell().cellRange.highlight,t.TD=this.instance.wtTable.getCell(t.coords)):Ut(e,"wtBorder")&&Ut(e,"area")&&this.instance.selections.createOrGetArea().cellRange&&(t.coords=this.instance.selections.createOrGetArea().cellRange.to,t.TD=this.instance.wtTable.getCell(t.coords)),t}},{key:"onMouseDown",value:function(e){var t=vr.get(this),n=this.instance.rootDocument.activeElement,o=Nn(Rt,e.target),i=e.target;if(i!==n&&o(0)!==n&&o(1)!==n){var a=this.parentCell(i);Ut(i,"corner")?this.instance.getSetting("onCellCornerMouseDown",e,i):a.TD&&this.instance.hasSetting("onCellMouseDown")&&this.instance.getSetting("onCellMouseDown",e,a.coords,a.TD,this.instance),(0===e.button||this.instance.touchApplied)&&a.TD&&(t.dblClickOrigin[0]=a.TD,clearTimeout(t.dblClickTimeout[0]),t.dblClickTimeout[0]=setTimeout(function(){t.dblClickOrigin[0]=null},1e3))}}},{key:"onContextMenu",value:function(e){if(this.instance.hasSetting("onCellContextMenu")){var t=this.parentCell(e.target);t.TD&&this.instance.getSetting("onCellContextMenu",e,t.coords,t.TD,this.instance)}}},{key:"onMouseOver",value:function(e){if(this.instance.hasSetting("onCellMouseOver")){var t=this.instance.wtTable.TABLE,n=Nt(e.target,["TD","TH"],t),o=this.instance.cloneSource||this.instance;n&&n!==o.lastMouseOver&&Vt(n,t)&&(o.lastMouseOver=n,this.instance.getSetting("onCellMouseOver",e,this.instance.wtTable.getCoords(n),n,this.instance))}}},{key:"onMouseOut",value:function(e){if(this.instance.hasSetting("onCellMouseOut")){var t=this.instance.wtTable.TABLE,n=Nt(e.target,["TD","TH"],t),o=Nt(e.relatedTarget,["TD","TH"],t);n&&n!==o&&Vt(n,t)&&this.instance.getSetting("onCellMouseOut",e,this.instance.wtTable.getCoords(n),n,this.instance)}}},{key:"onMouseUp",value:function(e){var t=vr.get(this),n=this.parentCell(e.target);n.TD&&this.instance.hasSetting("onCellMouseUp")&&this.instance.getSetting("onCellMouseUp",e,n.coords,n.TD,this.instance),(0===e.button||this.instance.touchApplied)&&(n.TD===t.dblClickOrigin[0]&&n.TD===t.dblClickOrigin[1]?(Ut(e.target,"corner")?this.instance.getSetting("onCellCornerDblClick",e,n.coords,n.TD,this.instance):this.instance.getSetting("onCellDblClick",e,n.coords,n.TD,this.instance),t.dblClickOrigin[0]=null,t.dblClickOrigin[1]=null):n.TD===t.dblClickOrigin[0]&&(t.dblClickOrigin[1]=n.TD,clearTimeout(t.dblClickTimeout[1]),t.dblClickTimeout[1]=setTimeout(function(){t.dblClickOrigin[1]=null},500)))}},{key:"onTouchStart",value:function(e){vr.get(this).selectedCellBeforeTouchEnd=this.instance.selections.getCell().cellRange,this.instance.touchApplied=!0,this.onMouseDown(e)}},{key:"onTouchEnd",value:function(e){var t,n=e.target,o=null===(t=this.parentCell(n))||void 0===t?void 0:t.coords,i=ot(o)&&o.row>=0&&o.col>=0;if(e.cancelable&&i&&this.instance.getSetting("isDataViewInstance")){Fe()&&(Oe()||Ie())&&this.selectedCellWasTouched(n)&&!["A","BUTTON","INPUT"].includes(n.tagName)?e.preventDefault():this.selectedCellWasTouched(n)||e.preventDefault()}this.onMouseUp(e),this.instance.touchApplied=!1}},{key:"destroy",value:function(){var e=vr.get(this);clearTimeout(e.dblClickTimeout[0]),clearTimeout(e.dblClickTimeout[1]),this.eventManager.destroy()}}])&&mr(t.prototype,n),o&&mr(t,o),e}(),yr={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL:17,COMMAND_LEFT:91,COMMAND_RIGHT:93,COMMAND_FIREFOX:224,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,C:67,D:68,F:70,L:76,O:79,P:80,S:83,V:86,X:88};function gr(e){return 32===e||e>=48&&e<=57||e>=96&&e<=111||e>=186&&e<=192||e>=219&&e<=222||e>=226||e>=65&&e<=90}function wr(e){return-1!==[yr.ARROW_DOWN,yr.ARROW_UP,yr.ARROW_LEFT,yr.ARROW_RIGHT,yr.HOME,yr.END,yr.DELETE,yr.BACKSPACE,yr.F1,yr.F2,yr.F3,yr.F4,yr.F5,yr.F6,yr.F7,yr.F8,yr.F9,yr.F10,yr.F11,yr.F12,yr.TAB,yr.PAGE_DOWN,yr.PAGE_UP,yr.ENTER,yr.ESCAPE,yr.SHIFT,yr.CAPS_LOCK,yr.ALT].indexOf(e)}function _r(e){var t=[];return navigator.platform.includes("Mac")?t.push(yr.COMMAND_LEFT,yr.COMMAND_RIGHT,yr.COMMAND_FIREFOX):t.push(yr.CONTROL),t.includes(e)}function Cr(e){return[yr.CONTROL,yr.COMMAND_LEFT,yr.COMMAND_RIGHT,yr.COMMAND_FIREFOX].includes(e)}function kr(e,t){var n=!1;return K(t.split("|"),function(t){if(e===yr[t])return n=!0,!1}),n}function xr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}hi(ia),hi(ga),hi(Pa),hi(Ja),hi(ur);var Sr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t;var n=this.wot,o=n.rootDocument,i=n.rootWindow,a=n.wtTable,r=parseInt(i.getComputedStyle(o.body).lineHeight,10),l=1.2*parseInt(i.getComputedStyle(o.body).fontSize,10);this.instance=this.wot,this.eventManager=new Gi(this.wot),this.scrollbarSize=_n(o),this.wot.update("scrollbarWidth",this.scrollbarSize),this.wot.update("scrollbarHeight",this.scrollbarSize);var s="hidden"===i.getComputedStyle(a.wtRootElement.parentNode).getPropertyValue("overflow");this.scrollableElement=s?a.holder:an(a.TABLE),this.topOverlay=void 0,this.bottomOverlay=void 0,this.leftOverlay=void 0,this.topLeftCornerOverlay=void 0,this.bottomLeftCornerOverlay=void 0,this.prepareOverlays(),this.hasScrollbarBottom=!1,this.hasScrollbarRight=!1,this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.browserLineHeight=r||l,this.registerListeners(),this.lastScrollX=i.scrollX,this.lastScrollY=i.scrollY}var t,n,o;return t=e,(n=[{key:"prepareOverlays",value:function(){var e=!1;return this.topOverlay?e=this.topOverlay.updateStateOfRendering()||e:this.topOverlay=fi(ai,this.wot),pi(ri)||(this.bottomOverlay={needFullRender:!1,updateStateOfRendering:function(){return!1}}),pi(ci)||(this.bottomLeftCornerOverlay={needFullRender:!1,updateStateOfRendering:function(){return!1}}),this.bottomOverlay?e=this.bottomOverlay.updateStateOfRendering()||e:this.bottomOverlay=fi(ri,this.wot),this.leftOverlay?e=this.leftOverlay.updateStateOfRendering()||e:this.leftOverlay=fi(li,this.wot),this.topOverlay.needFullRender&&this.leftOverlay.needFullRender&&(this.topLeftCornerOverlay?e=this.topLeftCornerOverlay.updateStateOfRendering()||e:this.topLeftCornerOverlay=fi(si,this.wot)),this.bottomOverlay.needFullRender&&this.leftOverlay.needFullRender&&(this.bottomLeftCornerOverlay?e=this.bottomLeftCornerOverlay.updateStateOfRendering()||e:this.bottomLeftCornerOverlay=fi(ci,this.wot)),e}},{key:"refreshAll",value:function(){this.wot.drawn&&(this.wot.wtTable.holder.parentNode?(this.wot.draw(!0),this.verticalScrolling&&this.leftOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1):this.destroy())}},{key:"registerListeners",value:function(){var e=this,t=this.wot,n=t.rootDocument,o=t.rootWindow,i=this.topOverlay.mainTableScrollableElement,a=this.leftOverlay.mainTableScrollableElement;this.eventManager.addEventListener(n.documentElement,"keydown",function(t){return e.onKeyDown(t)}),this.eventManager.addEventListener(n.documentElement,"keyup",function(){return e.onKeyUp()}),this.eventManager.addEventListener(n,"visibilitychange",function(){return e.onKeyUp()}),this.eventManager.addEventListener(i,"scroll",function(t){return e.onTableScroll(t)},{passive:!0}),i!==a&&this.eventManager.addEventListener(a,"scroll",function(t){return e.onTableScroll(t)},{passive:!0});var r,l=o.devicePixelRatio&&o.devicePixelRatio>1,s=this.scrollableElement===o,c=this.wot.wtSettings.getSetting("preventWheel"),u={passive:s};(c||l||!Ee())&&this.eventManager.addEventListener(this.wot.wtTable.wtRootElement,"wheel",function(t){return e.onCloneWheel(t,c)},u),[this.topOverlay,this.bottomOverlay,this.leftOverlay,this.topLeftCornerOverlay,this.bottomLeftCornerOverlay].forEach(function(t){if(t&&t.needFullRender){var n=t.clone.wtTable.holder;e.eventManager.addEventListener(n,"wheel",function(t){return e.onCloneWheel(t,c)},u)}}),this.eventManager.addEventListener(o,"resize",function(){clearTimeout(r),r=setTimeout(function(){e.wot.getSetting("onWindowResize")},200)})}},{key:"deregisterListeners",value:function(){this.eventManager.clearEvents(!0)}},{key:"onTableScroll",value:function(e){var t=this.wot.rootWindow,n=this.leftOverlay.mainTableScrollableElement,o=this.topOverlay.mainTableScrollableElement,i=e.target;this.keyPressed&&(o!==t&&i!==t&&!e.target.contains(o)||n!==t&&i!==t&&!e.target.contains(n))||this.syncScrollPositions(e)}},{key:"onCloneWheel",value:function(e,t){var n=this.wot.rootWindow,o=this.leftOverlay.mainTableScrollableElement,i=this.topOverlay.mainTableScrollableElement,a=e.target,r=i!==n&&a!==n&&!a.contains(i),l=o!==n&&a!==n&&!a.contains(o);if(!this.keyPressed||!r&&!l){var s=this.translateMouseWheelToScroll(e);(t||this.scrollableElement!==n&&s)&&e.preventDefault()}}},{key:"onKeyDown",value:function(e){this.keyPressed=kr(e.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}},{key:"onKeyUp",value:function(){this.keyPressed=!1}},{key:"translateMouseWheelToScroll",value:function(e){var t=this.browserLineHeight,n=isNaN(e.deltaY)?-1*e.wheelDeltaY:e.deltaY,o=isNaN(e.deltaX)?-1*e.wheelDeltaX:e.deltaX;1===e.deltaMode&&(o+=o*t,n+=n*t);var i=this.scrollVertically(n),a=this.scrollHorizontally(o);return i||a}},{key:"scrollVertically",value:function(e){var t=this.scrollableElement.scrollTop;return this.scrollableElement.scrollTop+=e,t!==this.scrollableElement.scrollTop}},{key:"scrollHorizontally",value:function(e){var t=this.scrollableElement.scrollLeft;return this.scrollableElement.scrollLeft+=e,t!==this.scrollableElement.scrollLeft}},{key:"syncScrollPositions",value:function(){if(!this.destroyed){var e=this.wot.rootWindow,t=this.topOverlay.clone.wtTable.holder,n=this.leftOverlay.clone.wtTable.holder,o=[this.scrollableElement.scrollLeft,this.scrollableElement.scrollTop],i=o[0],a=o[1];if(this.horizontalScrolling=t.scrollLeft!==i||this.lastScrollX!==e.scrollX,this.verticalScrolling=n.scrollTop!==a||this.lastScrollY!==e.scrollY,this.lastScrollX=e.scrollX,this.lastScrollY=e.scrollY,this.horizontalScrolling){t.scrollLeft=i;var r=this.bottomOverlay.needFullRender?this.bottomOverlay.clone.wtTable.holder:null;r&&(r.scrollLeft=i)}this.verticalScrolling&&(n.scrollTop=a),this.refreshAll()}}},{key:"syncScrollWithMaster",value:function(){var e=this.topOverlay.mainTableScrollableElement,t=e.scrollLeft,n=e.scrollTop;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=t),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=t),this.leftOverlay.needFullRender&&(this.leftOverlay.clone.wtTable.holder.scrollTop=n)}},{key:"updateMainScrollableElements",value:function(){this.deregisterListeners(),this.leftOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement();var e=this.wot,t=e.rootWindow,n=e.wtTable;"hidden"===t.getComputedStyle(n.wtRootElement.parentNode).getPropertyValue("overflow")?this.scrollableElement=n.holder:this.scrollableElement=an(n.TABLE),this.registerListeners()}},{key:"destroy",value:function(){this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.leftOverlay.destroy(),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.destroy(),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone&&this.bottomLeftCornerOverlay.destroy(),this.destroyed=!0}},{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.wot.wtTable.spreader,n=t.clientWidth,o=t.clientHeight;n===this.spreaderLastSize.width&&o===this.spreaderLastSize.height||(this.spreaderLastSize.width=n,this.spreaderLastSize.height=o,this.adjustElementsSize()),this.bottomOverlay.clone&&this.bottomOverlay.refresh(e),this.leftOverlay.refresh(e),this.topOverlay.refresh(e),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.refresh(e),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone&&this.bottomLeftCornerOverlay.refresh(e)}},{key:"adjustElementsSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.wot,n=t.wtViewport,o=t.wtTable,i=this.wot.getSetting("totalColumns"),a=this.wot.getSetting("totalRows"),r=n.getRowHeaderWidth(),l=n.getColumnHeaderHeight(),s=o.hider.style;if(s.width="".concat(r+this.leftOverlay.sumCellSizes(0,i),"px"),s.height="".concat(l+this.topOverlay.sumCellSizes(0,a)+1,"px"),this.scrollbarSize>0){var c=o.wtRootElement,u=c.scrollHeight,d=c.scrollWidth,h=o.holder,f=h.scrollHeight,p=h.scrollWidth;this.hasScrollbarRight=u<f,this.hasScrollbarBottom=d<p,this.hasScrollbarRight&&o.hider.scrollWidth+this.scrollbarSize>d?this.hasScrollbarBottom=!0:this.hasScrollbarBottom&&o.hider.scrollHeight+this.scrollbarSize>u&&(this.hasScrollbarRight=!0)}this.topOverlay.adjustElementsSize(e),this.leftOverlay.adjustElementsSize(e),this.bottomOverlay.adjustElementsSize(e)}},{key:"applyToDOM",value:function(){this.wot.wtTable.isVisible()&&(this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.leftOverlay.applyToDOM())}},{key:"getParentOverlay",value:function(e){if(!e)return null;var t=null;return K([this.topOverlay,this.leftOverlay,this.bottomOverlay,this.topLeftCornerOverlay,this.bottomLeftCornerOverlay],function(n){n&&n.clone&&n.clone.wtTable.TABLE.contains(e)&&(t=n.clone)}),t}},{key:"syncOverlayTableClassNames",value:function(){var e=this.instance.wtTable.TABLE;K([this.topOverlay,this.leftOverlay,this.bottomOverlay,this.topLeftCornerOverlay,this.bottomLeftCornerOverlay],function(t){t&&(t.clone.wtTable.TABLE.className=e.className)})}}])&&xr(t.prototype,n),o&&xr(t,o),e}();function Tr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Er=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t}var t,n,o;return t=e,(n=[{key:"scrollViewport",value:function(e,t,n,o,i){if(e.col<0||e.row<0)return!1;var a=this.scrollViewportHorizontally(e.col,n,i),r=this.scrollViewportVertically(e.row,t,o);return a||r}},{key:"scrollViewportHorizontally",value:function(e,t,n){if(!this.wot.drawn)return!1;var o=this._getVariables(),i=o.fixedColumnsLeft,a=o.leftOverlay,r=o.totalColumns,l=!1;if(e>=0&&e<=Math.max(r-1,0)){var s=this.getFirstVisibleColumn(),c=this.getLastVisibleColumn();e>=i&&s>-1&&(e<s||n)?l=a.scrollTo(e):(-1===c||c>-1&&(e>c||t))&&(l=a.scrollTo(e,!0))}return l}},{key:"scrollViewportVertically",value:function(e,t,n){if(!this.wot.drawn)return!1;var o=this._getVariables(),i=o.fixedRowsBottom,a=o.fixedRowsTop,r=o.topOverlay,l=o.totalRows,s=!1;if(e>=0&&e<=Math.max(l-1,0)){var c=this.getFirstVisibleRow(),u=this.getLastVisibleRow();e>=a&&c>-1&&(e<c||t)?s=r.scrollTo(e):(-1===u||u>-1&&(e>u&&e<l-i||n))&&(s=r.scrollTo(e,!0))}return s}},{key:"getFirstVisibleRow",value:function(){var e=this._getVariables(),t=e.topOverlay,n=e.wtTable,o=e.wtViewport,i=e.totalRows,a=e.fixedRowsTop,r=this.wot.rootWindow,l=n.getFirstVisibleRow();if(t.mainTableScrollableElement===r){var s=Zt(n.wtRootElement),c=hn(n.hider),u=hn(r),d=nn(r,r);if(s.top+c-u<=d){var h=o.getColumnHeaderHeight();h+=t.sumCellSizes(0,a);for(var f=i;f>0;f--)if(h+=t.sumCellSizes(f-1,f),s.top+c-h<=d){l=f;break}}}return l}},{key:"getLastVisibleRow",value:function(){var e=this._getVariables(),t=e.topOverlay,n=e.wtTable,o=e.wtViewport,i=e.totalRows,a=this.wot.rootWindow,r=n.getLastVisibleRow();if(t.mainTableScrollableElement===a){var l=Zt(n.wtRootElement),s=nn(a,a);if(l.top>s)for(var c=hn(a),u=o.getColumnHeaderHeight(),d=1;d<=i;d++)if(u+=t.sumCellSizes(d-1,d),l.top+u-s>=c){r=d-2;break}}return r}},{key:"getFirstVisibleColumn",value:function(){var e=this._getVariables(),t=e.leftOverlay,n=e.wtTable,o=e.wtViewport,i=e.totalColumns,a=this.wot.rootWindow,r=n.getFirstVisibleColumn();if(t.mainTableScrollableElement===a){var l=Zt(n.wtRootElement),s=fn(n.hider),c=fn(a),u=on(a,a);if(l.left+s-c<=u)for(var d=o.getRowHeaderWidth(),h=i;h>0;h--)if(d+=t.sumCellSizes(h-1,h),l.left+s-d<=u){r=h;break}}return r}},{key:"getLastVisibleColumn",value:function(){var e=this._getVariables(),t=e.leftOverlay,n=e.wtTable,o=e.wtViewport,i=e.totalColumns,a=this.wot.rootWindow,r=n.getLastVisibleColumn();if(t.mainTableScrollableElement===a){var l=Zt(n.wtRootElement),s=on(a,a);if(l.left>s)for(var c=fn(a),u=o.getRowHeaderWidth(),d=1;d<=i;d++)if(u+=t.sumCellSizes(d-1,d),l.left+u-s>=c){r=d-2;break}}return r}},{key:"_getVariables",value:function(){var e=this.wot;return{topOverlay:e.wtOverlays.topOverlay,leftOverlay:e.wtOverlays.leftOverlay,wtTable:e.wtTable,wtViewport:e.wtViewport,totalRows:e.getSetting("totalRows"),totalColumns:e.getSetting("totalColumns"),fixedRowsTop:e.getSetting("fixedRowsTop"),fixedRowsBottom:e.getSetting("fixedRowsBottom"),fixedColumnsLeft:e.getSetting("fixedColumnsLeft")}}}])&&Tr(t.prototype,n),o&&Tr(t,o),e}();function Or(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Dr=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t,this.instance=t,this.defaults={table:void 0,isDataViewInstance:!0,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow:function(){return!1},preventWheel:!1,data:void 0,freezeOverlays:!1,fixedColumnsLeft:0,fixedRowsTop:0,fixedRowsBottom:0,shouldRenderLeftOverlay:function(){return o.getSetting("fixedColumnsLeft")>0||o.getSetting("rowHeaders").length>0},shouldRenderTopOverlay:function(){return o.getSetting("fixedRowsTop")>0||o.getSetting("columnHeaders").length>0},shouldRenderBottomOverlay:function(){return o.getSetting("fixedRowsBottom")>0},minSpareRows:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:function(e,t,n){var i=o.getSetting("data",e,t);Xt(n,void 0===i||null===i?"":i)},columnWidth:function(){},rowHeight:function(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellContextMenu:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeRemoveCellClassNames:null,onAfterDrawSelection:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:function(e){return e},onModifyRowHeaderWidth:null,onModifyGetCellCoords:null,onBeforeHighlightingRowHeader:function(e){return e},onBeforeHighlightingColumnHeader:function(e){return e},onWindowResize:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null},this.settings={},ve(this.defaults,function(e,t){if(void 0!==n[t])o.settings[t]=n[t];else{if(void 0===e)throw new Error('A required setting "'.concat(t,'" was not provided'));o.settings[t]=e}})}var t,n,o;return t=e,(n=[{key:"update",value:function(e,t){var n=this;return void 0===t?ve(e,function(e,t){n.settings[t]=e}):this.settings[e]=t,this.wot}},{key:"getSetting",value:function(e,t,n,o,i){return"function"==typeof this.settings[e]?this.settings[e](t,n,o,i):void 0!==t&&Array.isArray(this.settings[e])?this.settings[e][t]:this.settings[e]}},{key:"has",value:function(e){return!!this.settings[e]}}])&&Or(t.prototype,n),o&&Or(t,o),e}();function Ir(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Rr=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wot=t,this.instance=this.wot,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.eventManager=new Gi(this.wot),this.eventManager.addEventListener(this.wot.rootWindow,"resize",function(){n.clientHeight=n.getWorkspaceHeight()})}var t,n,o;return t=e,(n=[{key:"getWorkspaceHeight",value:function(){var e=this.wot.rootDocument,t=this.instance.wtOverlays.topOverlay.trimmingContainer,n=0;t===this.wot.rootWindow?n=e.documentElement.clientHeight:n=dn(t)>0&&t.clientHeight>0?t.clientHeight:1/0;return n}},{key:"getWorkspaceWidth",value:function(){var e,t,n=this.wot,o=n.rootDocument,i=n.rootWindow,a=this.instance.wtOverlays.leftOverlay.trimmingContainer,r=o.documentElement.offsetWidth,l=n.getSetting("totalColumns");if(n.getSetting("preventOverflow"))return un(this.instance.wtTable.wtRootElement);if(e=n.getSetting("freezeOverlays")?Math.min(r-this.getWorkspaceOffset().left,r):Math.min(this.getContainerFillWidth(),r-this.getWorkspaceOffset().left,r),a===i&&l>0&&this.sumColumnWidths(0,l-1)>e)return o.documentElement.clientWidth;if(a!==i&&("scroll"===(t=ln(this.instance.wtOverlays.leftOverlay.trimmingContainer,"overflow",i))||"hidden"===t||"auto"===t))return Math.max(e,a.clientWidth);var s=n.getSetting("stretchH");return"none"!==s&&s?e:Math.max(e,un(this.instance.wtTable.TABLE))}},{key:"hasVerticalScroll",value:function(){return this.getWorkspaceActualHeight()>this.getWorkspaceHeight()}},{key:"hasHorizontalScroll",value:function(){return this.getWorkspaceActualWidth()>this.getWorkspaceWidth()}},{key:"sumColumnWidths",value:function(e,t){for(var n=this.wot.wtTable,o=0,i=e;i<t;)o+=n.getColumnWidth(i),i+=1;return o}},{key:"getContainerFillWidth",value:function(){if(this.containerWidth)return this.containerWidth;var e=this.instance.wtTable.holder,t=this.wot.rootDocument.createElement("div");t.style.width="100%",t.style.height="1px",e.appendChild(t);var n=t.offsetWidth;return this.containerWidth=n,e.removeChild(t),n}},{key:"getWorkspaceOffset",value:function(){return Zt(this.wot.wtTable.TABLE)}},{key:"getWorkspaceActualHeight",value:function(){return dn(this.wot.wtTable.TABLE)}},{key:"getWorkspaceActualWidth",value:function(){var e=this.wot.wtTable;return un(e.TABLE)||un(e.TBODY)||un(e.THEAD)}},{key:"getColumnHeaderHeight",value:function(){return this.instance.getSetting("columnHeaders").length?isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=dn(this.wot.wtTable.THEAD)):this.columnHeaderHeight=0,this.columnHeaderHeight}},{key:"getViewportHeight",value:function(){var e=this.getWorkspaceHeight();if(e===1/0)return e;var t=this.getColumnHeaderHeight();return t>0&&(e-=t),e}},{key:"getRowHeaderWidth",value:function(){var e=this.instance.getSetting("rowHeaderWidth"),t=this.instance.getSetting("rowHeaders");if(e){this.rowHeaderWidth=0;for(var n=0,o=t.length;n<o;n++)this.rowHeaderWidth+=e[n]||e}if(this.wot.cloneSource)return this.wot.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth))if(t.length){var i=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var a=0,r=t.length;a<r;a++)i?(this.rowHeaderWidth+=un(i),i=i.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.instance.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}},{key:"getViewportWidth",value:function(){var e=this.getWorkspaceWidth();if(e===1/0)return e;var t=this.getRowHeaderWidth();return t>0?e-t:e}},{key:"createRowsCalculator",value:function(){var e,t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.wot,a=i.wtSettings,r=i.wtOverlays,l=i.wtTable,s=i.rootDocument;this.rowHeaderWidth=NaN,e=a.settings.renderAllRows&&1===o?1/0:this.getViewportHeight();var c=r.topOverlay.getScrollPosition()-r.topOverlay.getTableParentOffset();c<0&&(c=0);var u=i.getSetting("fixedRowsTop"),d=i.getSetting("fixedRowsBottom"),h=i.getSetting("totalRows");return u&&(c+=n=r.topOverlay.sumCellSizes(0,u),e-=n),d&&r.bottomOverlay.clone&&(e-=n=r.bottomOverlay.sumCellSizes(h-d,h)),t=l.holder.clientHeight===l.holder.offsetHeight?0:_n(s),new zn({viewportSize:e,scrollOffset:c,totalItems:i.getSetting("totalRows"),itemSizeFn:function(e){return l.getRowHeight(e)},overrideFn:a.settings.viewportRowCalculatorOverride,calculationType:o,scrollbarHeight:t})}},{key:"createColumnsCalculator",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.wot,n=t.wtSettings,o=t.wtOverlays,i=t.wtTable,a=t.rootDocument,r=this.getViewportWidth(),l=o.leftOverlay.getScrollPosition()-o.leftOverlay.getTableParentOffset();this.columnHeaderHeight=NaN,l<0&&(l=0);var s=t.getSetting("fixedColumnsLeft");if(s){var c=o.leftOverlay.sumCellSizes(0,s);l+=c,r-=c}return i.holder.clientWidth!==i.holder.offsetWidth&&(r-=_n(a)),new jn({viewportSize:r,scrollOffset:l,totalItems:t.getSetting("totalColumns"),itemSizeFn:function(e){return t.wtTable.getColumnWidth(e)},overrideFn:n.settings.viewportColumnCalculatorOverride,calculationType:e,stretchMode:t.getSetting("stretchH"),stretchingItemWidthFn:function(e,n){return t.getSetting("onBeforeStretchingColumnWidth",e,n)}})}},{key:"createRenderCalculators",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var t=this.createRowsCalculator(2),n=this.createColumnsCalculator(2);this.areAllProposedVisibleRowsAlreadyRendered(t)&&this.areAllProposedVisibleColumnsAlreadyRendered(n)||(e=!1)}return e||(this.rowsRenderCalculator=this.createRowsCalculator(1),this.columnsRenderCalculator=this.createColumnsCalculator(1)),this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,e}},{key:"createVisibleCalculators",value:function(){this.rowsVisibleCalculator=this.createRowsCalculator(2),this.columnsVisibleCalculator=this.createColumnsCalculator(2)}},{key:"areAllProposedVisibleRowsAlreadyRendered",value:function(e){if(!this.rowsVisibleCalculator)return!1;var t=e.startRow,n=e.endRow,o=this.rowsRenderCalculator,i=o.startRow,a=o.endRow;return!(t<i||t===i&&t>0)&&!(n>a||n===a&&n<this.wot.getSetting("totalRows")-1)}},{key:"areAllProposedVisibleColumnsAlreadyRendered",value:function(e){if(!this.columnsVisibleCalculator)return!1;var t=e.startColumn,n=e.endColumn,o=this.columnsRenderCalculator,i=o.startColumn,a=o.endColumn;return!(t<i||t===i&&t>0)&&!(n>a||n===a&&n<this.wot.getSetting("totalColumns")-1)}},{key:"resetHasOversizedColumnHeadersMarked",value:function(){ve(this.hasOversizedColumnHeadersMarked,function(e,t,n){n[t]=void 0})}}])&&Ir(t.prototype,n),o&&Ir(t,o),e}();function Mr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Pr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=[];if(this.guid="wt_".concat(xt()),this.rootDocument=t.table.ownerDocument,this.rootWindow=this.rootDocument.defaultView,t.cloneSource?(this.cloneSource=t.cloneSource,this.cloneOverlay=t.cloneOverlay,this.wtSettings=t.cloneSource.wtSettings,this.wtTable=this.cloneOverlay.createTable(this,t.table),this.wtScroll=new Er(this),this.wtViewport=t.cloneSource.wtViewport,this.wtEvent=new br(this),this.selections=this.cloneSource.selections):(this.wtSettings=new Dr(this,t),this.wtTable=new Ri(this,t.table),this.wtScroll=new Er(this),this.wtViewport=new Rr(this),this.wtEvent=new br(this),this.selections=this.getSetting("selections"),this.wtOverlays=new Sr(this),this.exportSettingsAsClassNames()),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var o=0,i=this.wtTable.THEAD.childNodes[0].childNodes.length;o<i;o++)n.push(this.wtTable.THEAD.childNodes[0].childNodes[o].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(e,t){Xt(t,n[e])}])}this.drawn=!1,this.drawInterrupted=!1}var t,n,o;return t=e,(n=[{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.drawInterrupted=!1,e||this.wtTable.isVisible()?this.wtTable.draw(e):this.drawInterrupted=!0,this}},{key:"getCell",value:function(e){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]))return this.wtTable.getCell(e);var t=this.wtSettings.getSetting("totalRows"),n=this.wtSettings.getSetting("fixedRowsTop"),o=this.wtSettings.getSetting("fixedRowsBottom"),i=this.wtSettings.getSetting("fixedColumnsLeft");if(e.row<n&&e.col<i)return this.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell(e);if(e.row<n)return this.wtOverlays.topOverlay.clone.wtTable.getCell(e);if(e.col<i&&e.row>=t-o){if(this.wtOverlays.bottomLeftCornerOverlay&&this.wtOverlays.bottomLeftCornerOverlay.clone)return this.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell(e)}else{if(e.col<i)return this.wtOverlays.leftOverlay.clone.wtTable.getCell(e);if(e.row<t&&e.row>=t-o&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(e)}return this.wtTable.getCell(e)}},{key:"update",value:function(e,t){return this.wtSettings.update(e,t)}},{key:"scrollViewport",value:function(e,t,n,o,i){return!(e.col<0||e.row<0)&&this.wtScroll.scrollViewport(e,t,n,o,i)}},{key:"scrollViewportHorizontally",value:function(e,t,n){return!(e<0)&&this.wtScroll.scrollViewportHorizontally(e,t,n)}},{key:"scrollViewportVertically",value:function(e,t,n){return!(e<0)&&this.wtScroll.scrollViewportVertically(e,t,n)}},{key:"getViewport",value:function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}},{key:"getOverlayName",value:function(){return this.cloneOverlay?this.cloneOverlay.type:"master"}},{key:"exportSettingsAsClassNames",value:function(){var e=this,t=[],n=[];ve({rowHeaders:"htRowHeaders",columnHeaders:"htColumnHeaders"},function(o,i){e.getSetting(i).length&&n.push(o),t.push(o)}),Wt(this.wtTable.wtRootElement.parentNode,t),zt(this.wtTable.wtRootElement.parentNode,n)}},{key:"getSetting",value:function(e,t,n,o,i){return this.wtSettings.getSetting(e,t,n,o,i)}},{key:"hasSetting",value:function(e){return this.wtSettings.has(e)}},{key:"destroy",value:function(){this.wtOverlays.destroy(),this.wtEvent.destroy()}}])&&Mr(t.prototype,n),o&&Mr(t,o),e}();n("vO9h");function Ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Nr(e){"@babel/helpers - typeof";return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Fr,Br=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=t,this.cellRange=n||null,this.instanceBorders={},this.classNames=[this.settings.className],this.classNameGenerator=this.linearClassNameGenerator(this.settings.className,this.settings.layerLevel)}var t,n,o;return t=e,(n=[{key:"getBorder",value:function(e){return this.instanceBorders[e.guid]||(this.instanceBorders[e.guid]=new pr(e,this.settings)),this.instanceBorders[e.guid]}},{key:"isEmpty",value:function(){return null===this.cellRange}},{key:"add",value:function(e){return this.isEmpty()?this.cellRange=new Gn(e):this.cellRange.expand(e),this}},{key:"replace",value:function(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1}},{key:"clear",value:function(){return this.cellRange=null,this}},{key:"getCorners",value:function(){var e=this.cellRange.getOuterTopLeftCorner(),t=this.cellRange.getOuterBottomRightCorner();return[e.row,e.col,t.row,t.col]}},{key:"addClassAtCoords",value:function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e.wtTable.getCell(new qn(t,n));if("object"===Nr(a)){var r=o;i&&(r=this.classNameGenerator(a),this.classNames.includes(r)||this.classNames.push(r)),zt(a,r)}return this}},{key:"linearClassNameGenerator",value:function(e,t){return function n(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0===t||0===i)return e;var a=i>=0?i:t,r=e;if(Ut(o,0===(a-=1)?e:"".concat(e,"-").concat(a))){var l=a+1;r="".concat(e,"-").concat(l)}else r=n(o,a);return r}}},{key:"draw",value:function(e){if(this.isEmpty())this.settings.border&&this.getBorder(e).disappear();else{var t=e.wtTable.getRenderedRowsCount(),n=e.wtTable.getRenderedColumnsCount(),o=this.getCorners(),i=Ar(o,4),a=i[0],r=i[1],l=i[2],s=i[3],c=this.settings,u=c.highlightHeaderClassName,d=c.highlightColumnClassName,h=c.highlightRowClassName,f=c.highlightOnlyClosestHeader,p=c.selectionType,m=void 0===p||["active-header","header"].includes(p);if(m&&null!==r&&null!==s)for(var v=0,b=0;b<n;b+=1){var y=e.wtTable.columnFilter.renderedToSource(b);if(y>=r&&y<=s){var g=e.wtTable.getColumnHeaders(y),w=g.length-1;f&&g.length>1&&(g=[g[w]]);for(var _=0;_<g.length;_+=1){var C=[],k=g[_];u&&C.push(u),d&&C.push(d),_=f?w:_;var x=e.getSetting("onBeforeHighlightingColumnHeader",y,_,{selectionType:p,columnCursor:v,selectionWidth:s-r+1,classNames:C});x!==y&&(k=e.wtTable.getColumnHeader(x,_)),zt(k,C)}v+=1}}if(null!==a&&null!==l)for(var S=0,T=0;T<t;T+=1){var E=e.wtTable.rowFilter.renderedToSource(T);if(m&&E>=a&&E<=l){var O=e.wtTable.getRowHeaders(E),D=O.length-1;f&&O.length>1&&(O=[O[D]]);for(var I=0;I<O.length;I+=1){var R=[],M=O[I];u&&R.push(u),h&&R.push(h),I=f?D:I;var P=e.getSetting("onBeforeHighlightingRowHeader",E,I,{selectionType:p,rowCursor:S,selectionHeight:l-a+1,classNames:R});P!==E&&(M=e.wtTable.getRowHeader(P,I)),zt(M,R)}S+=1}if(null!==r&&null!==s)for(var A=0;A<n;A+=1){var L=e.wtTable.columnFilter.renderedToSource(A);E>=a&&E<=l&&L>=r&&L<=s?this.settings.className&&this.addClassAtCoords(e,E,L,this.settings.className,this.settings.markIntersections):E>=a&&E<=l?h&&this.addClassAtCoords(e,E,L,h):L>=r&&L<=s&&d&&this.addClassAtCoords(e,E,L,d);var N=e.getSetting("onAfterDrawSelection",E,L,this.settings.layerLevel);"string"==typeof N&&this.addClassAtCoords(e,E,L,N)}}e.getSetting("onBeforeDrawBorders",o,this.settings.className),this.settings.border&&this.getBorder(e).appear(o)}}},{key:"destroy",value:function(){Object.values(this.instanceBorders).forEach(function(e){return e.destroy()})}}])&&Vr(t.prototype,n),o&&Vr(t,o),e}();function Hr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var jr,$r,Ur=["afterCellMetaReset","afterChange","afterChangesObserved","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","beforeContextMenuShow","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterDrawSelection","beforeRemoveCellClassNames","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseUp","afterOnCellContextMenu","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","afterRender","beforeRenderer","afterRenderer","afterScrollHorizontally","afterScrollVertically","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterSetSourceDataAtCell","afterUpdateSettings","afterValidate","beforeLanguageChange","afterLanguageChange","beforeAutofill","afterAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeLoadData","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseUp","beforeOnCellContextMenu","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeRender","beforeSetCellMeta","beforeSetRangeStartOnly","beforeSetRangeStart","beforeSetRangeEnd","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyColHeader","modifyColWidth","modifyRowHeader","modifyRowHeight","modifyData","modifySourceData","modifyRowData","modifyGetCellCoords","beforeHighlightingRowHeader","beforeHighlightingColumnHeader","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnMove","afterColumnMove","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","modifyColumnHeaderHeight","beforeUndo","beforeUndoStackChange","afterUndo","afterUndoStackChange","beforeRedo","beforeRedoStackChange","afterRedo","afterRedoStackChange","modifyRowHeaderWidth","beforeAutofillInsidePopulate","modifyTransformStart","modifyTransformEnd","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","beforeHideRows","afterHideRows","beforeUnhideRows","afterUnhideRows","beforeHideColumns","afterHideColumns","beforeUnhideColumns","afterUnhideColumns","beforeTrimRow","afterTrimRow","beforeUntrimRow","afterUntrimRow","beforeDropdownMenuShow","afterDropdownMenuShow","afterDropdownMenuHide","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","afterBeginEditing","beforeMergeCells","afterMergeCells","beforeUnmergeCells","afterUnmergeCells","afterListen","afterUnlisten","afterRefreshDimensions","beforeRefreshDimensions","beforeColumnCollapse","afterColumnCollapse","beforeColumnExpand","afterColumnExpand","modifyAutoColumnSizeSeed"],zr=Ze(Fr||(jr=['The plugin hook "[hookName]" was removed in Handsontable [removedInVersion]. \n  Please consult release notes https://github.com/handsontable/handsontable/releases/tag/[removedInVersion] to \n  learn about the migration path.'],($r=['The plugin hook "[hookName]" was removed in Handsontable [removedInVersion].\\x20\n  Please consult release notes https://github.com/handsontable/handsontable/releases/tag/[removedInVersion] to\\x20\n  learn about the migration path.'])||($r=jr.slice(0)),Fr=Object.freeze(Object.defineProperties(jr,{raw:{value:Object.freeze($r)}})))),Wr=new Map([["modifyRow","8.0.0"],["modifyCol","8.0.0"],["unmodifyRow","8.0.0"],["unmodifyCol","8.0.0"],["skipLengthCache","8.0.0"],["hiddenColumn","8.0.0"],["hiddenRow","8.0.0"]]),qr=new Map([]),Kr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalBucket=this.createEmptyBucket()}var t,n,o;return t=e,o=[{key:"getSingleton",value:function(){return Gr}}],(n=[{key:"createEmptyBucket",value:function(){var e=Object.create(null);return K(Ur,function(t){return e[t]=[]}),e}},{key:"getBucket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?(e.pluginHookBucket||(e.pluginHookBucket=this.createEmptyBucket()),e.pluginHookBucket):this.globalBucket}},{key:"add",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))K(t,function(t){return n.add(e,t,o)});else{Wr.has(e)&&No(Tt(zr,{hookName:e,removedInVersion:Wr.get(e)})),qr.has(e)&&No(qr.get(e));var i=this.getBucket(o);if(void 0===i[e]&&(this.register(e),i[e]=[]),t.skip=!1,-1===i[e].indexOf(t)){var a=!1;t.initialHook&&K(i[e],function(n,o){if(n.initialHook)return i[e][o]=t,a=!0,!1}),a||i[e].push(t)}}return this}},{key:"once",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Array.isArray(t)?K(t,function(t){return n.once(e,t,o)}):(t.runOnce=!0,this.add(e,t,o))}},{key:"remove",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.getBucket(n);return void 0!==o[e]&&o[e].indexOf(t)>=0&&(t.skip=!0,!0)}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getBucket(t);return!(void 0===n[e]||!n[e].length)}},{key:"run",value:function(e,t,n,o,i,a,r,l){var s=this.globalBucket[t],c=s?s.length:0,u=0;if(c)for(;u<c;)if(s[u]&&!s[u].skip){var d=s[u].call(e,n,o,i,a,r,l);void 0!==d&&(n=d),s[u]&&s[u].runOnce&&this.remove(t,s[u]),u+=1}else u+=1;var h=this.getBucket(e)[t],f=h?h.length:0,p=0;if(f)for(;p<f;)if(h[p]&&!h[p].skip){var m=h[p].call(e,n,o,i,a,r,l);void 0!==m&&(n=m),h[p]&&h[p].runOnce&&this.remove(t,h[p],e),p+=1}else p+=1;return n}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;ve(this.getBucket(e),function(e,t,n){return n[t].length=0})}},{key:"register",value:function(e){this.isRegistered(e)||Ur.push(e)}},{key:"deregister",value:function(e){this.isRegistered(e)&&Ur.splice(Ur.indexOf(e),1)}},{key:"isDeprecated",value:function(e){return qr.has(e)||Wr.has(e)}},{key:"isRegistered",value:function(e){return Ur.indexOf(e)>=0}},{key:"getRegistered",value:function(){return Ur}}])&&Hr(t.prototype,n),o&&Hr(t,o),e}(),Gr=new Kr;var Jr=Kr;function Yr(e){return function(e){if(Array.isArray(e))return Xr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Qr=new Map;function Zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"common";Qr.has(e)||Qr.set(e,new Map);var t=Qr.get(e);return{register:function(e,n){t.set(e,n)},getItem:function(e){return t.get(e)},hasItem:function(e){return t.has(e)},getNames:function(){return Yr(t.keys())},getValues:function(){return Yr(t.values())}}}var el=new WeakMap,tl=Zr("editors"),nl=tl.register,ol=tl.getItem,il=tl.hasItem,al=tl.getNames;tl.getValues;function rl(e,t){var n;if("function"==typeof e)el.get(e)||sl(null,e),n=el.get(e);else{if("string"!=typeof e)throw Error('Only strings and functions can be passed as "editor" parameter');n=ol(e)}if(!n)throw Error('No editor registered under name "'.concat(e,'"'));return n.getInstance(t)}function ll(e){if(!il(e))throw Error('No registered editor found under "'.concat(e,'" name'));return ol(e).getConstructor()}function sl(e,t){e&&"string"!=typeof e&&(e=(t=e).EDITOR_TYPE);var n=new function(e){var t={},n=e;this.getConstructor=function(){return e},this.getInstance=function(e){return e.guid in t||(t[e.guid]=new n(e)),t[e.guid]},Jr.getSingleton().add("afterDestroy",function(){t[this.guid]=null})}(t);"string"==typeof e&&nl(e,n),el.set(t,n)}var cl={_hooksStorage:Object.create(null),addHook:function(e,t){return this._hooksStorage[e]||(this._hooksStorage[e]=[]),this.hot.addHook(e,t),this._hooksStorage[e].push(t),this},removeHooksByKey:function(e){var t=this;K(this._hooksStorage[e]||[],function(n){t.hot.removeHook(e,n)})},clearHooks:function(){var e=this;ve(this._hooksStorage,function(t,n){return e.removeHooksByKey(n)}),this._hooksStorage={}}};me(cl,"MIXIN_NAME","hooksRefRegisterer",{writable:!1,enumerable:!1});var ul=cl;function dl(e){"@babel/helpers - typeof";return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function pl(e,t){return(pl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ml(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=vl(e);if(t){var i=vl(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===dl(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vl(e){return(vl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yl(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var gl=Object.freeze({VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"}),wl=function(){function e(t){bl(this,e),this.hot=t,this.instance=t,this.state=gl.VIRGIN,this._opened=!1,this._fullEditMode=!1,this._closeCallback=null,this.TD=null,this.row=null,this.col=null,this.prop=null,this.originalValue=null,this.cellProperties=null,this.init()}var t,n,o;return t=e,o=[{key:"EDITOR_TYPE",get:function(){return"base"}}],(n=[{key:"_fireCallbacks",value:function(e){this._closeCallback&&(this._closeCallback(e),this._closeCallback=null)}},{key:"init",value:function(){}},{key:"getValue",value:function(){throw Error("Editor getValue() method unimplemented")}},{key:"setValue",value:function(){throw Error("Editor setValue() method unimplemented")}},{key:"open",value:function(){throw Error("Editor open() method unimplemented")}},{key:"close",value:function(){throw Error("Editor close() method unimplemented")}},{key:"prepare",value:function(e,t,n,o,i,a){this.TD=o,this.row=e,this.col=t,this.prop=n,this.originalValue=i,this.cellProperties=a,this.state=gl.VIRGIN}},{key:"extend",value:function(){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pl(e,t)}(n,e);var t=ml(n);function n(){return bl(this,n),t.apply(this,arguments)}return n}(this.constructor)}},{key:"saveValue",value:function(e,t){var n,o,i,a;if(t){var r=this.hot.getSelectedLast();n=Math.max(Math.min(r[0],r[2]),0),o=Math.max(Math.min(r[1],r[3]),0),i=Math.max(r[0],r[2]),a=Math.max(r[1],r[3])}else{var l=[this.row,this.col,null,null];n=l[0],o=l[1],i=l[2],a=l[3]}var s=this.hot.runHooks("modifyGetCellCoords",n,o);if(Array.isArray(s)){var c=hl(s,2);n=c[0],o=c[1]}this.hot.populateFromArray(n,o,e,i,a,"edit")}},{key:"beginEditing",value:function(e,t){if(this.state===gl.VIRGIN){var n=this.hot,o=n.rowIndexMapper.getRenderableFromVisualIndex(this.row),i=n.columnIndexMapper.getRenderableFromVisualIndex(this.col);if(n.view.scrollViewport(new qn(o,i)),this.state=gl.EDITING,this.isInFullEditMode()){var a="string"==typeof e?e:nt(this.originalValue);this.setValue(a)}this.open(t),this._opened=!0,this.focus(),n.view.render(),n.runHooks("afterBeginEditing",this.row,this.col)}}},{key:"finishEditing",value:function(e,t,n){var o,i=this;if(n){var a=this._closeCallback;this._closeCallback=function(e){a&&a(e),n(e),i.hot.view.render()}}if(!this.isWaiting())if(this.state!==gl.VIRGIN){if(this.state===gl.EDITING){if(e)return this.cancelChanges(),void this.hot.view.render();var r=this.getValue();o=this.hot.getSettings().trimWhitespace?[["string"==typeof r?String.prototype.trim.call(r||""):r]]:[[r]],this.state=gl.WAITING,this.saveValue(o,t),this.hot.getCellValidator(this.cellProperties)?this.hot.addHookOnce("postAfterValidate",function(e){i.state=gl.FINISHED,i.discardEditor(e)}):(this.state=gl.FINISHED,this.discardEditor(!0))}}else this.hot._registerTimeout(function(){i._fireCallbacks(!0)})}},{key:"cancelChanges",value:function(){this.state=gl.FINISHED,this.discardEditor()}},{key:"discardEditor",value:function(e){this.state===gl.FINISHED&&(!1===e&&!0!==this.cellProperties.allowInvalid?(this.hot.selectCell(this.row,this.col),this.focus(),this.state=gl.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=gl.VIRGIN,this._fireCallbacks(!0)))}},{key:"enableFullEditMode",value:function(){this._fullEditMode=!0}},{key:"isInFullEditMode",value:function(){return this._fullEditMode}},{key:"isOpened",value:function(){return this._opened}},{key:"isWaiting",value:function(){return this.state===gl.WAITING}},{key:"getEditedCellsLayerClass",value:function(){switch(this.checkEditorSection()){case"right":return"ht_clone_right";case"left":return"ht_clone_left";case"bottom":return"ht_clone_bottom";case"bottom-right-corner":return"ht_clone_bottom_right_corner";case"bottom-left-corner":return"ht_clone_bottom_left_corner";case"top":return"ht_clone_top";case"top-right-corner":return"ht_clone_top_right_corner";case"top-left-corner":return"ht_clone_top_left_corner";default:return"ht_clone_master"}}},{key:"getEditedCell",value:function(){return this.hot.getCell(this.row,this.col,!0)}},{key:"checkEditorSection",value:function(){var e=this.hot.countRows(),t="";return this.row<this.hot.getSettings().fixedRowsTop?t=this.col<this.hot.getSettings().fixedColumnsLeft?"top-left-corner":"top":this.hot.getSettings().fixedRowsBottom&&this.row>=e-this.hot.getSettings().fixedRowsBottom?t=this.col<this.hot.getSettings().fixedColumnsLeft?"bottom-left-corner":"bottom":this.col<this.hot.getSettings().fixedColumnsLeft&&(t="left"),t}}])&&yl(t.prototype,n),o&&yl(t,o),e}();function _l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function kl(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}he(wl,ul);var xl=function(){function e(t,n,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.tableMeta=n,this.selection=o,this.eventManager=new Gi(t),this.destroyed=!1,this.lock=!1,this.activeEditor=void 0,this.cellProperties=void 0,this.lastKeyCode=void 0,this.instance.addHook("afterDocumentKeyDown",function(e){return i.onAfterDocumentKeyDown(e)});for(var a=this.instance.rootWindow;a;)this.eventManager.addEventListener(a.document.documentElement,"keydown",function(e){i.destroyed||i.instance.runHooks("afterDocumentKeyDown",e)}),a=Pt(a);this.eventManager.addEventListener(this.instance.rootDocument.documentElement,"compositionstart",function(e){!i.destroyed&&i.activeEditor&&!i.activeEditor.isOpened()&&i.instance.isListening()&&i.openEditor("",e)}),this.instance.view.wt.update("onCellDblClick",function(e,t,n){return i.onCellDblClick(e,t,n)})}var t,n,o;return t=e,(n=[{key:"lockEditor",value:function(){this.lock=!0}},{key:"unlockEditor",value:function(){this.lock=!1}},{key:"destroyEditor",value:function(e){this.lock||this.closeEditor(e)}},{key:"getActiveEditor",value:function(){return this.activeEditor}},{key:"prepareEditor",value:function(){var e=this;if(!this.lock)if(this.activeEditor&&this.activeEditor.isWaiting())this.closeEditor(!1,!1,function(t){t&&e.prepareEditor()});else{var t=this.instance.selection.selectedRange.current().highlight,n=t.row,o=t.col,i=this.instance.runHooks("modifyGetCellCoords",n,o),a=n,r=o;if(Array.isArray(i)){var l=_l(i,2);a=l[0],r=l[1]}this.cellProperties=this.instance.getCellMeta(a,r);var s=this.instance.rootDocument.activeElement;if(s&&s.blur(),this.cellProperties.readOnly)this.clearActiveEditor();else{var c=this.instance.getCellEditor(this.cellProperties),u=this.instance.getCell(n,o,!0);if(c&&u){var d=this.instance.colToProp(r),h=this.instance.getSourceDataAtCell(this.instance.toPhysicalRow(a),r);this.activeEditor=rl(c,this.instance),this.activeEditor.prepare(n,o,d,u,h,this.cellProperties)}else this.clearActiveEditor()}}}},{key:"isEditorOpened",value:function(){return this.activeEditor&&this.activeEditor.isOpened()}},{key:"openEditor",value:function(e,t){this.activeEditor&&this.activeEditor.beginEditing(e,t)}},{key:"closeEditor",value:function(e,t,n){this.activeEditor?this.activeEditor.finishEditing(e,t,n):n&&n(!1)}},{key:"closeEditorAndSaveChanges",value:function(e){this.closeEditor(!1,e)}},{key:"closeEditorAndRestoreOriginalValue",value:function(e){this.closeEditor(!0,e)}},{key:"clearActiveEditor",value:function(){this.activeEditor=void 0}},{key:"moveSelectionAfterEnter",value:function(e){var t="function"==typeof this.tableMeta.enterMoves?this.tableMeta.enterMoves(event):this.tableMeta.enterMoves;e?this.selection.transformStart(-t.row,-t.col):this.selection.transformStart(t.row,t.col,!0)}},{key:"moveSelectionUp",value:function(e){e?this.selection.transformEnd(-1,0):this.selection.transformStart(-1,0)}},{key:"moveSelectionDown",value:function(e){e?this.selection.transformEnd(1,0):this.selection.transformStart(1,0)}},{key:"moveSelectionRight",value:function(e){e?this.selection.transformEnd(0,1):this.selection.transformStart(0,1)}},{key:"moveSelectionLeft",value:function(e){e?this.selection.transformEnd(0,-1):this.selection.transformStart(0,-1)}},{key:"onAfterDocumentKeyDown",value:function(e){if(this.instance.isListening()&&(this.instance.runHooks("beforeKeyDown",e),!this.destroyed&&229!==e.keyCode&&!Ui(e)&&(this.lastKeyCode=e.keyCode,this.selection.isSelected()))){var t=(e.ctrlKey||e.metaKey)&&!e.altKey;if(!this.activeEditor||this.activeEditor.isWaiting()||wr(e.keyCode)||Cr(e.keyCode)||t||this.isEditorOpened()){var n,o=e.shiftKey,i=o?this.selection.setRangeEnd:this.selection.setRangeStart;switch(e.keyCode){case yr.A:!this.isEditorOpened()&&t&&(this.instance.selectAll(),e.preventDefault(),e.stopPropagation());break;case yr.ARROW_UP:this.isEditorOpened()&&!this.activeEditor.isWaiting()&&this.closeEditorAndSaveChanges(t),this.moveSelectionUp(o),e.preventDefault(),e.stopPropagation();break;case yr.ARROW_DOWN:this.isEditorOpened()&&!this.activeEditor.isWaiting()&&this.closeEditorAndSaveChanges(t),this.moveSelectionDown(o),e.preventDefault(),e.stopPropagation();break;case yr.ARROW_RIGHT:this.isEditorOpened()&&!this.activeEditor.isWaiting()&&this.closeEditorAndSaveChanges(t),this.moveSelectionRight(o),e.preventDefault(),e.stopPropagation();break;case yr.ARROW_LEFT:this.isEditorOpened()&&!this.activeEditor.isWaiting()&&this.closeEditorAndSaveChanges(t),this.moveSelectionLeft(o),e.preventDefault(),e.stopPropagation();break;case yr.TAB:n="function"==typeof this.tableMeta.tabMoves?this.tableMeta.tabMoves(e):this.tableMeta.tabMoves,o?this.selection.transformStart(-n.row,-n.col):this.selection.transformStart(n.row,n.col,!0),e.preventDefault(),e.stopPropagation();break;case yr.BACKSPACE:case yr.DELETE:this.instance.emptySelectedCells(),this.prepareEditor(),e.preventDefault();break;case yr.F2:this.activeEditor&&this.activeEditor.enableFullEditMode(),this.openEditor(null,e),e.preventDefault();break;case yr.ENTER:this.isEditorOpened()?(this.activeEditor&&this.activeEditor.state!==gl.WAITING&&this.closeEditorAndSaveChanges(t),this.moveSelectionAfterEnter(o)):this.instance.getSettings().enterBeginsEditing?this.cellProperties.readOnly?this.moveSelectionAfterEnter():this.activeEditor&&(this.activeEditor.enableFullEditMode(),this.openEditor(null,e)):this.moveSelectionAfterEnter(o),e.preventDefault(),$i(e);break;case yr.ESCAPE:this.isEditorOpened()&&(this.closeEditorAndRestoreOriginalValue(t),this.activeEditor.focus()),e.preventDefault();break;case yr.HOME:e.ctrlKey||e.metaKey?i.call(this.selection,new qn(this.instance.rowIndexMapper.getFirstNotHiddenIndex(0,1),this.selection.selectedRange.current().from.col)):i.call(this.selection,new qn(this.selection.selectedRange.current().from.row,this.instance.columnIndexMapper.getFirstNotHiddenIndex(0,1))),e.preventDefault(),e.stopPropagation();break;case yr.END:e.ctrlKey||e.metaKey?i.call(this.selection,new qn(this.instance.rowIndexMapper.getFirstNotHiddenIndex(this.instance.countRows()-1,-1),this.selection.selectedRange.current().from.col)):i.call(this.selection,new qn(this.selection.selectedRange.current().from.row,this.instance.columnIndexMapper.getFirstNotHiddenIndex(this.instance.countCols()-1,-1))),e.preventDefault(),e.stopPropagation();break;case yr.PAGE_UP:this.selection.transformStart(-this.instance.countVisibleRows(),0),e.preventDefault(),e.stopPropagation();break;case yr.PAGE_DOWN:this.selection.transformStart(this.instance.countVisibleRows(),0),e.preventDefault(),e.stopPropagation()}}else this.openEditor("",e)}}},{key:"onCellDblClick",value:function(e,t,n){"TD"===n.nodeName&&(this.activeEditor&&this.activeEditor.enableFullEditMode(),this.openEditor(null,e))}},{key:"destroy",value:function(){this.destroyed=!0,this.eventManager.destroy()}}])&&kl(t.prototype,n),o&&kl(t,o),e}(),Sl=new WeakMap;xl.getInstance=function(e,t,n){var o=Sl.get(e);return o||(o=new xl(e,t,n),Sl.set(e,o)),o};var Tl=xl;n("px3P"),n("MPnL"),n("j5AD"),n("ppB/"),n("oN4Z"),n("qpht");function El(e){return function(e){if(Array.isArray(e))return Ol(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ol(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ol(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Dl={"&nbsp;":" ","&amp;":"&","&lt;":"<","&gt;":">"},Il=new RegExp(Object.keys(Dl).map(function(e){return"(".concat(e,")")}).join("|"),"gi");function Rl(e){for(var t=e.hasColHeaders(),n=e.hasRowHeaders(),o=[t?-1:0,n?-1:0,e.countRows()-1,e.countCols()-1],i=e.getData.apply(e,o),a=i.length,r=a>0?i[0].length:0,l=["<table>","</table>"],s=t?["<thead>","</thead>"]:[],c=["<tbody>","</tbody>"],u=n?1:0,d=t?1:0,h=0;h<a;h+=1){for(var f=t&&0===h,p=[],m=0;m<r;m+=1){var v=!f&&n&&0===m,b="";if(f)b="<th>".concat(e.getColHeader(m-u),"</th>");else if(v)b="<th>".concat(e.getRowHeader(h-d),"</th>");else{var y=i[h][m],g=e.getCellMeta(h-u,m-d),w=g.hidden,_=g.rowspan,C=g.colspan;if(!w){var k=[];if(_&&k.push('rowspan="'.concat(_,'"')),C&&k.push('colspan="'.concat(C,'"')),at(y))b="<td ".concat(k.join(" "),"></td>");else{var x=y.toString().replace("<","&lt;").replace(">","&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,"<br>\r\n").replace(/\x20/gi,"&nbsp;").replace(/\t/gi,"&#9;");b="<td ".concat(k.join(" "),">").concat(x,"</td>")}}}p.push(b)}var S=["<tr>"].concat(p,["</tr>"]).join("");f?s.splice(1,0,S):c.splice(-1,0,S)}return l.splice(1,0,s.join(""),c.join("")),l.join("")}function Ml(e){for(var t=e.length,n=["<table>"],o=0;o<t;o+=1){var i=e[o],a=i.length,r=[];0===o&&n.push("<tbody>");for(var l=0;l<a;l+=1){var s=i[l],c=at(s)?"":s.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,"<br>\r\n").replace(/\x20/gi,"&nbsp;").replace(/\t/gi,"&#9;");r.push("<td>".concat(c,"</td>"))}n.push.apply(n,["<tr>"].concat(r,["</tr>"])),o+1===t&&n.push("</tbody>")}return n.push("</table>"),n.join("")}function Pl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n={},o=t.createDocumentFragment(),i=t.createElement("div");o.appendChild(i);var a=e;if("string"==typeof a){var r=a.replace(/<td\b[^>]*?>([\s\S]*?)<\/\s*td>/g,function(e){var t=e.match(/<td\b[^>]*?>/g)[0],n=e.substring(t.length,e.lastIndexOf("<")).replace(/(<(?!br)([^>]+)>)/gi,"");return"".concat(t).concat(n).concat("</td>")});i.insertAdjacentHTML("afterbegin","".concat(r)),a=i.querySelector("table")}if(a&&function(e){return"TABLE"===(e&&e.nodeName||"")}(a)){var l,s=i.querySelector('meta[name$="enerator"]'),c=null!==a.querySelector("tbody th"),u=a.querySelector("tr"),d=u?Array.from(u.cells).reduce(function(e,t){return e+t.colSpan},0)-(c?1:0):0,h=a.tFoot&&Array.from(a.tFoot.rows)||[],f=[],p=!1,m=0;if(a.tHead){var v=Array.from(a.tHead.rows).filter(function(e){var t=null!==e.querySelector("td");return t&&f.push(e),!t});p=(m=v.length)>0,m>1?n.nestedHeaders=Array.from(v).reduce(function(e,t){var n=Array.from(t.cells).reduce(function(e,t,n){if(c&&0===n)return e;var o=t.colSpan,i=t.innerHTML,a=o>1?{label:i,colspan:o}:i;return e.push(a),e},[]);return e.push(n),e},[]):p&&(n.colHeaders=Array.from(v[0].children).reduce(function(e,t,n){return c&&0===n?e:(e.push(t.innerHTML),e)},[]))}f.length&&(n.fixedRowsTop=f.length),h.length&&(n.fixedRowsBottom=h.length);var b=[].concat(f,El(Array.from(a.tBodies).reduce(function(e,t){return e.push.apply(e,El(Array.from(t.rows))),e},[])),El(h));l=b.length;for(var y=new Array(l),g=0;g<l;g++)y[g]=new Array(d);for(var w=[],_=[],C=0;C<l;C++)for(var k=b[C],x=Array.from(k.cells),S=x.length,T=0;T<S;T++){var E=x[T],O=E.nodeName,D=E.innerHTML,I=E.rowSpan,R=E.colSpan,M=y[C].findIndex(function(e){return void 0===e});if("TD"===O){if(I>1||R>1){for(var P=C;P<C+I;P++)if(P<l)for(var A=M;A<M+R;A++)y[P][A]=null;var L=E.getAttribute("style");L&&L.includes("mso-ignore:colspan")||w.push({col:M,row:C,rowspan:I,colspan:R})}var N="";N=s&&/excel/gi.test(s.content)?D.replace(/[\r\n][\x20]{0,2}/g," ").replace(/<br(\s*|\/)>[\r\n]?[\x20]{0,3}/gim,"\r\n"):D.replace(/<br(\s*|\/)>[\r\n]?/gim,"\r\n"),y[C][M]=N.replace(Il,function(e){return Dl[e]})}else _.push(D)}return w.length&&(n.mergeCells=w),_.length&&(n.rowHeaders=_),y.length&&(n.data=y),n}}function Al(e){"@babel/helpers - typeof";return(Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ll(e){var t=Al(e);return"number"==t?!isNaN(e)&&isFinite(e):"string"==t?!!e.length&&(1==e.length?/\d/.test(e):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(e)):"object"==t&&!(!e||"number"!=typeof e.valueOf()||e instanceof Date)}function Nl(e,t,n){var o=-1;for("function"==typeof t?(n=t,t=e):o=e-1;++o<=t&&!1!==n(o););}function Vl(e,t,n){var o=e+1;for("function"==typeof t&&(n=t,t=0);--o>=t&&!1!==n(o););}function Fl(e,t){return t=parseInt(t.toString().replace("%",""),10),t=parseInt(e*t/100,10)}function Bl(e){return function(e){if(Array.isArray(e))return $l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||jl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jl(e,t){if(e){if("string"==typeof e)return $l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$l(e,t):void 0}}function $l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Ul="asc",zl=new Map([[Ul,[-1,1]],["desc",[1,-1]]]),Wl=function(e){return"The priority '".concat(e,"' is already declared in a map.")},ql=function(e){return"The priority '".concat(e,"' is not a number.")};n("fXV2");function Kl(e){return function(e){if(Array.isArray(e))return Yl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||Jl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jl(e,t){if(e){if("string"==typeof e)return Yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yl(e,t):void 0}}function Yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Xl=function(e){return"The id '".concat(e,"' is already declared in a map.")};function Ql(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).errorIdExists,t=new Map;function n(){return Kl(t)}function o(e){return t.has(e)}return e=Rn(e)?e:Xl,{addItem:function(n,i){if(o(n))throw new Error(e(n));t.set(n,i)},clear:function(){t.clear()},getId:function(e){return Gl(n().find(function(t){var n=Gl(t,2),o=n[0],i=n[1];return e===i&&o})||[null],1)[0]},getItem:function(e){return t.get(e)},getItems:n,hasItem:o}}function Zl(e){return function(e){if(Array.isArray(e))return es(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return es(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return es(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var ts=function(e){return"'".concat(e,"' value is already declared in a unique set.")};function ns(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||is(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function os(e){return function(e){if(Array.isArray(e))return as(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||is(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function is(e,t){if(e){if("string"==typeof e)return as(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?as(e,t):void 0}}function as(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var rs=function(e){return'There is already registered "'.concat(e,'" plugin.')},ls=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.errorPriorityExists,n=e.errorPriorityNaN,o=new Map;return t=Rn(t)?t:Wl,n=Rn(n)?n:ql,{addItem:function(e,i){if(!Ll(e))throw new Error(n(e));if(o.has(e))throw new Error(t(e));o.set(e,i)},getItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ul,t=Hl(zl.get(e)||zl.get(Ul),2),n=t[0],i=t[1];return Bl(o).sort(function(e,t){return e[0]<t[0]?n:i}).map(function(e){return e[1]})}}}({errorPriorityExists:function(e){return'There is already registered plugin on priority "'.concat(e,'".')},errorPriorityNaN:function(e){return'The priority "'.concat(e,'" is not a number.')}}),ss=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).errorItemExists,t=new Set;return e=Rn(e)?e:ts,{addItem:function(n){if(t.has(n))throw new Error(e(n));t.add(n)},getItems:function(){return Zl(t)}}}({errorItemExists:rs}),cs=Ql({errorIdExists:rs});function us(){return[].concat(os(ls.getItems()),os(ss.getItems()))}function ds(e){var t=Ct(e);return cs.getItem(t)}function hs(e,t,n){var o=ns(function(e,t,n){"function"==typeof e&&(e=(t=e).PLUGIN_KEY,n=t.PLUGIN_PRIORITY);return[e,t,n]}(e,t,n),3);e=o[0],t=o[1],n=o[2],void 0===ds(e)&&function(e,t,n){var o=Ct(e);if(cs.hasItem(o))throw new Error(rs(o));void 0===n?ss.addItem(o):ls.addItem(n,o);cs.addItem(o,t)}(e,t,n)}var fs=Zr("renderers"),ps=fs.register,ms=fs.getItem,vs=fs.hasItem,bs=fs.getNames;fs.getValues;function ys(e){if("function"==typeof e)return e;if(!vs(e))throw Error('No registered renderer found under "'.concat(e,'" name'));return ms(e)}function gs(e,t){"string"!=typeof e&&(e=(t=e).RENDERER_TYPE),ps(e,t)}var ws=Zr("validators"),_s=ws.register,Cs=ws.getItem,ks=ws.hasItem,xs=ws.getNames;ws.getValues;function Ss(e){if("function"==typeof e)return e;if(!ks(e))throw Error('No registered validator found under "'.concat(e,'" name'));return Cs(e)}function Ts(e,t){"string"!=typeof e&&(e=(t=e).VALIDATOR_TYPE),_s(e,t)}function Es(e){var t=e.isShiftKey,n=e.isLeftClick,o=e.isRightClick,i=e.coords,a=e.selection,r=e.controller,l=a.isSelected()?a.getSelectedRange().current():null,s=a.isSelectedByCorner(),c=a.isSelectedByRowHeader();if(t&&l)i.row>=0&&i.col>=0&&!r.cells?a.setRangeEnd(i):(s||c)&&i.row>=0&&i.col>=0&&!r.cells?a.setRangeEnd(new qn(i.row,i.col)):s&&i.row<0&&!r.column?a.setRangeEnd(new qn(l.to.row,i.col)):c&&i.col<0&&!r.row?a.setRangeEnd(new qn(i.row,l.to.col)):(!s&&!c&&i.col<0||s&&i.col<0)&&!r.row?a.selectRows(Math.max(l.from.row,0),i.row,i.col):(!s&&!c&&i.row<0||c&&i.row<0)&&!r.column&&a.selectColumns(Math.max(l.from.col,0),i.col,i.row);else{var u=!a.inInSelection(i),d=n||o&&u;i.row<0&&i.col>=0&&!r.column?d&&a.selectColumns(i.col,i.col,i.row):i.col<0&&i.row>=0&&!r.row?d&&a.selectRows(i.row,i.row,i.col):i.col>=0&&i.row>=0&&!r.cells?d&&a.setRangeStart(i):i.col<0&&i.row<0&&a.selectAll(!0,!0)}}var Os=new Map([["mousedown",Es],["mouseover",function(e){var t=e.isLeftClick,n=e.coords,o=e.selection,i=e.controller;if(t){var a=o.isSelectedByRowHeader(),r=o.isSelectedByColumnHeader(),l=o.tableProps.countCols(),s=o.tableProps.countRows();r&&!i.column?o.setRangeEnd(new qn(s-1,n.col)):a&&!i.row?o.setRangeEnd(new qn(n.row,l-1)):i.cell||o.setRangeEnd(n)}}],["touchstart",Es]]);function Ds(e,t){var n=t.coords,o=t.selection,i=t.controller;Os.get(e.type)({coords:n,selection:o,controller:i,isShiftKey:e.shiftKey,isLeftClick:Wi(e)||"touchstart"===e.type,isRightClick:zi(e)})}var Is=new WeakMap,Rs=Symbol("rootInstance");function Ms(e){return Is.has(e)}function Ps(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||Vs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function As(e,t,n){return(As=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&Ls(i,n.prototype),i}).apply(null,arguments)}function Ls(e,t){return(Ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ns(e){return function(e){if(Array.isArray(e))return Fs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vs(e,t){if(e){if("string"==typeof e)return Fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fs(e,t):void 0}}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Bs(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Hs=new WeakMap,js=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.eventManager=new Gi(t),this.settings=t.getSettings(),this.THEAD=void 0,this.TBODY=void 0,this.wt=void 0,this.activeWt=void 0,this.postponedAdjustElementsSize=!1,Hs.set(this,{selectionMouseDown:!1,mouseDown:void 0,table:void 0,lastWidth:0,lastHeight:0}),this.createElements(),this.registerEvents(),this.initializeWalkontable()}var t,n,o;return t=e,(n=[{key:"render",value:function(){this.instance.isRenderSuspended()||(this.postponedAdjustElementsSize&&(this.postponedAdjustElementsSize=!1,this.adjustElementsSize(!0)),this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.renderCall=!1)}},{key:"adjustElementsSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.instance.isRenderSuspended()?this.postponedAdjustElementsSize=!0:this.wt.wtOverlays.adjustElementsSize(e)}},{key:"getCellAtCoords",value:function(e,t){var n=this.wt.getCell(e,t);return n<0?null:n}},{key:"scrollViewport",value:function(e,t,n,o,i){return this.wt.scrollViewport(e,t,n,o,i)}},{key:"scrollViewportHorizontally",value:function(e,t,n){return this.wt.scrollViewportHorizontally(e,t,n)}},{key:"scrollViewportVertically",value:function(e,t,n){return this.wt.scrollViewportVertically(e,t,n)}},{key:"createElements",value:function(){var e=Hs.get(this),t=this.instance,n=t.rootElement,o=t.rootDocument,i=n.getAttribute("style");i&&n.setAttribute("data-originalstyle",i),zt(n,"handsontable"),e.table=o.createElement("TABLE"),zt(e.table,"htCore"),this.instance.getSettings().tableClassName&&zt(e.table,this.instance.getSettings().tableClassName),this.THEAD=o.createElement("THEAD"),e.table.appendChild(this.THEAD),this.TBODY=o.createElement("TBODY"),e.table.appendChild(this.TBODY),this.instance.table=e.table,this.instance.container.insertBefore(e.table,this.instance.container.firstChild)}},{key:"registerEvents",value:function(){var e=this,t=Hs.get(this),n=this.instance,o=n.rootElement,i=n.rootDocument,a=n.selection,r=i.documentElement;this.eventManager.addEventListener(o,"mousedown",function(n){if(t.selectionMouseDown=!0,!e.isTextSelectionAllowed(n.target)){var o=e.instance.rootWindow;gn(o),n.preventDefault(),o.focus()}}),this.eventManager.addEventListener(o,"mouseup",function(){t.selectionMouseDown=!1}),this.eventManager.addEventListener(o,"mousemove",function(n){t.selectionMouseDown&&!e.isTextSelectionAllowed(n.target)&&(e.settings.fragmentSelection&&gn(e.instance.rootWindow),n.preventDefault())}),this.eventManager.addEventListener(r,"keyup",function(e){a.isInProgress()&&!e.shiftKey&&a.finish()}),this.eventManager.addEventListener(r,"mouseup",function(n){a.isInProgress()&&Wi(n)&&a.finish(),t.mouseDown=!1,!On(i.activeElement)&&(a.isSelected()||a.isSelectedByAnyHeader()||o.contains(n.target)||zi(n))||e.instance.unlisten()}),this.eventManager.addEventListener(r,"contextmenu",function(e){a.isInProgress()&&zi(e)&&(a.finish(),t.mouseDown=!1)}),this.eventManager.addEventListener(r,"touchend",function(){a.isInProgress()&&a.finish(),t.mouseDown=!1}),this.eventManager.addEventListener(r,"mousedown",function(n){var a=n.target,l=n.x||n.clientX,s=n.y||n.clientY,c=n.target;if(!t.mouseDown&&o&&e.instance.view){var u=e.instance.view.wt.wtTable.holder;if(c===u){var d=_n(i);if(i.elementFromPoint(l+d,s)!==u||i.elementFromPoint(l,s+d)!==u)return}else for(;c!==r;){if(null===c){if(n.isTargetWebComponent)break;return}if(c===o)return;c=c.parentNode}("function"==typeof e.settings.outsideClickDeselects?e.settings.outsideClickDeselects(a):e.settings.outsideClickDeselects)?e.instance.deselectCell():e.instance.destroyEditor(!1,!1)}}),this.eventManager.addEventListener(t.table,"selectstart",function(t){e.settings.fragmentSelection||En(t.target)||t.preventDefault()})}},{key:"translateFromRenderableToVisualCoords",value:function(e){var t=e.row,n=e.col;return As(qn,Ns(this.translateFromRenderableToVisualIndex(t,n)))}},{key:"translateFromRenderableToVisualIndex",value:function(e,t){var n=e>=0?this.instance.rowIndexMapper.getVisualFromRenderableIndex(e):e,o=t>=0?this.instance.columnIndexMapper.getVisualFromRenderableIndex(t):t;return null===n&&(n=e),null===o&&(o=t),[n,o]}},{key:"countRenderableIndexes",value:function(e,t){var n=Math.min(e.getNotTrimmedIndexesLength(),t),o=e.getFirstNotHiddenIndex(n-1,-1);return null===o?0:e.getRenderableFromVisualIndex(o)+1}},{key:"countRenderableColumns",value:function(){return this.countRenderableIndexes(this.instance.columnIndexMapper,this.settings.maxCols)}},{key:"countRenderableRows",value:function(){return this.countRenderableIndexes(this.instance.rowIndexMapper,this.settings.maxRows)}},{key:"countNotHiddenRowIndexes",value:function(e,t){return this.countNotHiddenIndexes(e,t,this.instance.rowIndexMapper,this.countRenderableRows())}},{key:"countNotHiddenColumnIndexes",value:function(e,t){return this.countNotHiddenIndexes(e,t,this.instance.columnIndexMapper,this.countRenderableColumns())}},{key:"countNotHiddenIndexes",value:function(e,t,n,o){if(isNaN(e)||e<0)return 0;var i=n.getFirstNotHiddenIndex(e,t),a=n.getRenderableFromVisualIndex(i);if(!Number.isInteger(a))return 0;var r=0;return t<0?r=a+1:t>0&&(r=o-a),r}},{key:"initializeWalkontable",value:function(){var e=this,t=Hs.get(this),n={externalRowCalculator:this.instance.getPlugin("autoRowSize")&&this.instance.getPlugin("autoRowSize").isEnabled(),table:t.table,isDataViewInstance:function(){return Ms(e.instance)},preventOverflow:function(){return e.settings.preventOverflow},preventWheel:function(){return e.settings.preventWheel},stretchH:function(){return e.settings.stretchH},data:function(t,n){var o;return(o=e.instance).getDataAtCell.apply(o,Ns(e.translateFromRenderableToVisualIndex(t,n)))},totalRows:function(){return e.countRenderableRows()},totalColumns:function(){return e.countRenderableColumns()},fixedColumnsLeft:function(){var t=e.instance.countCols(),n=Math.min(parseInt(e.settings.fixedColumnsLeft,10),t)-1;return e.countNotHiddenColumnIndexes(n,-1)},fixedRowsTop:function(){var t=e.instance.countRows(),n=Math.min(parseInt(e.settings.fixedRowsTop,10),t)-1;return e.countNotHiddenRowIndexes(n,-1)},fixedRowsBottom:function(){var t=e.instance.countRows(),n=Math.max(t-parseInt(e.settings.fixedRowsBottom,10),0);return e.countNotHiddenRowIndexes(n,1)},shouldRenderLeftOverlay:function(){return e.settings.fixedColumnsLeft>0||n.rowHeaders().length>0},shouldRenderTopOverlay:function(){return e.settings.fixedRowsTop>0||n.columnHeaders().length>0},shouldRenderBottomOverlay:function(){return e.settings.fixedRowsBottom>0},minSpareRows:function(){return e.settings.minSpareRows},renderAllRows:this.settings.renderAllRows,rowHeaders:function(){var t=[];return e.instance.hasRowHeaders()&&t.push(function(t,n){var o=t>=0?e.instance.rowIndexMapper.getVisualFromRenderableIndex(t):t;e.appendRowHeader(o,n)}),e.instance.runHooks("afterGetRowHeaderRenderers",t),t},columnHeaders:function(){var t=[];return e.instance.hasColHeaders()&&t.push(function(t,n){var o=t>=0?e.instance.columnIndexMapper.getVisualFromRenderableIndex(t):t;e.appendColHeader(o,n)}),e.instance.runHooks("afterGetColumnHeaderRenderers",t),t},columnWidth:function(t){var n=e.instance.columnIndexMapper.getVisualFromRenderableIndex(t);return e.instance.getColWidth(null===n?t:n)},rowHeight:function(t){var n=e.instance.rowIndexMapper.getVisualFromRenderableIndex(t);return e.instance.getRowHeight(null===n?t:n)},cellRenderer:function(t,n,o){var i=Ps(e.translateFromRenderableToVisualIndex(t,n),2),a=i[0],r=i[1],l=e.instance.runHooks("modifyGetCellCoords",a,r),s=a,c=r;if(Array.isArray(l)){var u=Ps(l,2);s=u[0],c=u[1]}var d=e.instance.getCellMeta(s,c),h=e.instance.colToProp(c),f=e.instance.getDataAtRowProp(s,h);e.instance.hasHook("beforeValueRender")&&(f=e.instance.runHooks("beforeValueRender",f,d)),e.instance.runHooks("beforeRenderer",o,a,r,h,f,d),e.instance.getCellRenderer(d)(e.instance,o,a,r,h,f,d),e.instance.runHooks("afterRenderer",o,a,r,h,f,d)},selections:this.instance.selection.highlight,hideBorderOnMouseDownOver:function(){return e.settings.fragmentSelection},onWindowResize:function(){e.instance&&!e.instance.isDestroyed&&e.instance.refreshDimensions()},onCellMouseDown:function(n,o,i,a){var r=e.translateFromRenderableToVisualCoords(o),l={row:!1,column:!1,cell:!1};e.instance.listen(),e.activeWt=a,t.mouseDown=!0,e.instance.runHooks("beforeOnCellMouseDown",n,r,i,l),Ui(n)||(Ds(n,{coords:r,selection:e.instance.selection,controller:l}),e.instance.runHooks("afterOnCellMouseDown",n,r,i),e.activeWt=e.wt)},onCellContextMenu:function(n,o,i,a){var r=e.translateFromRenderableToVisualCoords(o);e.activeWt=a,t.mouseDown=!1,e.instance.selection.isInProgress()&&e.instance.selection.finish(),e.instance.runHooks("beforeOnCellContextMenu",n,r,i),Ui(n)||(e.instance.runHooks("afterOnCellContextMenu",n,r,i),e.activeWt=e.wt)},onCellMouseOut:function(t,n,o,i){var a=e.translateFromRenderableToVisualCoords(n);e.activeWt=i,e.instance.runHooks("beforeOnCellMouseOut",t,a,o),Ui(t)||(e.instance.runHooks("afterOnCellMouseOut",t,a,o),e.activeWt=e.wt)},onCellMouseOver:function(n,o,i,a){var r=e.translateFromRenderableToVisualCoords(o),l={row:!1,column:!1,cell:!1};e.activeWt=a,e.instance.runHooks("beforeOnCellMouseOver",n,r,i,l),Ui(n)||(t.mouseDown&&Ds(n,{coords:r,selection:e.instance.selection,controller:l}),e.instance.runHooks("afterOnCellMouseOver",n,r,i),e.activeWt=e.wt)},onCellMouseUp:function(t,n,o,i){var a=e.translateFromRenderableToVisualCoords(n);e.activeWt=i,e.instance.runHooks("beforeOnCellMouseUp",t,a,o),Ui(t)||e.instance.isDestroyed||(e.instance.runHooks("afterOnCellMouseUp",t,a,o),e.activeWt=e.wt)},onCellCornerMouseDown:function(t){t.preventDefault(),e.instance.runHooks("afterOnCellCornerMouseDown",t)},onCellCornerDblClick:function(t){t.preventDefault(),e.instance.runHooks("afterOnCellCornerDblClick",t)},beforeDraw:function(t,n){return e.beforeRender(t,n)},onDraw:function(t){return e.onDraw(t)},onScrollVertically:function(){return e.instance.runHooks("afterScrollVertically")},onScrollHorizontally:function(){return e.instance.runHooks("afterScrollHorizontally")},onBeforeRemoveCellClassNames:function(){return e.instance.runHooks("beforeRemoveCellClassNames")},onBeforeHighlightingRowHeader:function(t,n,o){var i=e.instance.rowIndexMapper,a=i.getVisualFromRenderableIndex(t),r=e.instance.runHooks("beforeHighlightingRowHeader",a,n,o);return i.getRenderableFromVisualIndex(i.getFirstNotHiddenIndex(r,1))},onBeforeHighlightingColumnHeader:function(t,n,o){var i=e.instance.columnIndexMapper,a=i.getVisualFromRenderableIndex(t),r=e.instance.runHooks("beforeHighlightingColumnHeader",a,n,o);return i.getRenderableFromVisualIndex(i.getFirstNotHiddenIndex(r,1))},onAfterDrawSelection:function(t,n,o){var i,a=Ps(e.translateFromRenderableToVisualIndex(t,n),2),r=a[0],l=a[1],s=e.instance.selection.getSelectedRange(),c=s.size();if(c>0){var u=(null!==o&&void 0!==o?o:0)+1-c,d=s.peekByIndex(u);i=[d.from.row,d.from.col,d.to.row,d.to.col]}return e.instance.runHooks("afterDrawSelection",r,l,i,o)},onBeforeDrawBorders:function(t,n){var o=Ps(t,4),i=o[0],a=o[1],r=o[2],l=o[3],s=[e.instance.rowIndexMapper.getVisualFromRenderableIndex(i),e.instance.columnIndexMapper.getVisualFromRenderableIndex(a),e.instance.rowIndexMapper.getVisualFromRenderableIndex(r),e.instance.columnIndexMapper.getVisualFromRenderableIndex(l)];return e.instance.runHooks("beforeDrawBorders",s,n)},onBeforeTouchScroll:function(){return e.instance.runHooks("beforeTouchScroll")},onAfterMomentumScroll:function(){return e.instance.runHooks("afterMomentumScroll")},onBeforeStretchingColumnWidth:function(t,n){var o=e.instance.columnIndexMapper.getVisualFromRenderableIndex(n);return e.instance.runHooks("beforeStretchingColumnWidth",t,o)},onModifyRowHeaderWidth:function(t){return e.instance.runHooks("modifyRowHeaderWidth",t)},onModifyGetCellCoords:function(t,n,o){var i=e.instance.rowIndexMapper,a=e.instance.columnIndexMapper,r=n>=0?a.getVisualFromRenderableIndex(n):n,l=t>=0?i.getVisualFromRenderableIndex(t):t,s=e.instance.runHooks("modifyGetCellCoords",l,r,o);if(Array.isArray(s)){var c=Ps(s,4),u=c[0],d=c[1],h=c[2],f=c[3];return[u>=0?i.getRenderableFromVisualIndex(i.getFirstNotHiddenIndex(u,1)):u,d>=0?a.getRenderableFromVisualIndex(a.getFirstNotHiddenIndex(d,1)):d,h>=0?i.getRenderableFromVisualIndex(i.getFirstNotHiddenIndex(h,-1)):h,f>=0?a.getRenderableFromVisualIndex(a.getFirstNotHiddenIndex(f,-1)):f]}},viewportRowCalculatorOverride:function(t){var n=e.settings.viewportRowRenderingOffset;if("auto"===n&&e.settings.fixedRowsTop&&(n=10),n>0||"auto"===n){var o=e.countRenderableRows(),i=t.startRow,a=t.endRow;if("number"==typeof n)t.startRow=Math.max(i-n,0),t.endRow=Math.min(a+n,o-1);else if("auto"===n){var r=Math.ceil(a/o*12);t.startRow=Math.max(i-r,0),t.endRow=Math.min(a+r,o-1)}}e.instance.runHooks("afterViewportRowCalculatorOverride",t)},viewportColumnCalculatorOverride:function(t){var n=e.settings.viewportColumnRenderingOffset;if("auto"===n&&e.settings.fixedColumnsLeft&&(n=10),n>0||"auto"===n){var o=e.countRenderableColumns(),i=t.startColumn,a=t.endColumn;if("number"==typeof n&&(t.startColumn=Math.max(i-n,0),t.endColumn=Math.min(a+n,o-1)),"auto"===n){var r=Math.ceil(a/o*6);t.startColumn=Math.max(i-r,0),t.endColumn=Math.min(a+r,o-1)}}e.instance.runHooks("afterViewportColumnCalculatorOverride",t)},rowHeaderWidth:function(){return e.settings.rowHeaderWidth},columnHeaderHeight:function(){var t=e.instance.runHooks("modifyColumnHeaderHeight");return e.settings.columnHeaderHeight||t}};this.instance.runHooks("beforeInitWalkontable",n),this.wt=new Pr(n),this.activeWt=this.wt;var o=this.wt.wtTable.spreader,i=this.instance.rootElement.getBoundingClientRect(),a=i.width,r=i.height;this.setLastSize(a,r),this.eventManager.addEventListener(o,"mousedown",function(e){e.target===o&&3===e.which&&e.stopPropagation()}),this.eventManager.addEventListener(o,"contextmenu",function(e){e.target===o&&3===e.which&&e.stopPropagation()}),this.eventManager.addEventListener(this.instance.rootDocument.documentElement,"click",function(){e.settings.observeDOMVisibility&&e.wt.drawInterrupted&&(e.instance.forceFullRender=!0,e.render())})}},{key:"isTextSelectionAllowed",value:function(e){if(En(e))return!0;var t=Vt(e,this.instance.view.wt.wtTable.spreader);return!(!0!==this.settings.fragmentSelection||!t)||(!("cell"!==this.settings.fragmentSelection||!this.isSelectedOnlyCell()||!t)||!(this.settings.fragmentSelection||!this.isCellEdited()||!this.isSelectedOnlyCell()))}},{key:"isMouseDown",value:function(){return Hs.get(this).mouseDown}},{key:"isSelectedOnlyCell",value:function(){var e,t;return null!==(e=null===(t=this.instance.getSelectedRangeLast())||void 0===t?void 0:t.isSingle())&&void 0!==e&&e}},{key:"isCellEdited",value:function(){var e=this.instance.getActiveEditor();return e&&e.isOpened()}},{key:"beforeRender",value:function(e,t){e&&this.instance.runHooks("beforeRender",this.instance.forceFullRender,t)}},{key:"onDraw",value:function(e){e&&this.instance.runHooks("afterRender",this.instance.forceFullRender)}},{key:"appendRowHeader",value:function(e,t){if(t.firstChild){var n=t.firstChild;if(!Ut(n,"relative"))return Kt(t),void this.appendRowHeader(e,t);this.updateCellHeader(n.querySelector(".rowHeader"),e,this.instance.getRowHeader)}else{var o=this.instance,i=o.rootDocument,a=o.getRowHeader,r=i.createElement("div"),l=i.createElement("span");r.className="relative",l.className="rowHeader",this.updateCellHeader(l,e,a),r.appendChild(l),t.appendChild(r)}this.instance.runHooks("afterGetRowHeader",e,t)}},{key:"appendColHeader",value:function(e,t){if(t.firstChild){var n=t.firstChild;Ut(n,"relative")?this.updateCellHeader(n.querySelector(".colHeader"),e,this.instance.getColHeader):(Kt(t),this.appendColHeader(e,t))}else{var o=this.instance.rootDocument,i=o.createElement("div"),a=o.createElement("span");i.className="relative",a.className="colHeader",this.updateCellHeader(a,e,this.instance.getColHeader),i.appendChild(a),t.appendChild(i)}this.instance.runHooks("afterGetColHeader",e,t)}},{key:"updateCellHeader",value:function(e,t,n){var o=t,i=this.wt.wtOverlays.getParentOverlay(e)||this.wt;e.parentNode&&(Ut(e,"colHeader")?o=i.wtTable.columnFilter.sourceToRendered(t):Ut(e,"rowHeader")&&(o=i.wtTable.rowFilter.sourceToRendered(t))),o>-1?Yt(e,n(t)):(Xt(e,String.fromCharCode(160)),zt(e,"cornerHeader"))}},{key:"maximumVisibleElementWidth",value:function(e){var t=this.wt.wtViewport.getWorkspaceWidth()-e;return t>0?t:0}},{key:"maximumVisibleElementHeight",value:function(e){var t=this.wt.wtViewport.getWorkspaceHeight()-e;return t>0?t:0}},{key:"setLastSize",value:function(e,t){var n=Hs.get(this),o=[e,t];n.lastWidth=o[0],n.lastHeight=o[1]}},{key:"getLastSize",value:function(){var e=Hs.get(this);return{width:e.lastWidth,height:e.lastHeight}}},{key:"mainViewIsActive",value:function(){return this.wt===this.activeWt}},{key:"destroy",value:function(){this.wt.destroy(),this.eventManager.destroy()}}])&&Bs(t.prototype,n),o&&Bs(t,o),e}(),$s=Zr("cellTypes"),Us=$s.register,zs=$s.getItem,Ws=$s.hasItem,qs=$s.getNames;$s.getValues;function Ks(e){if(!Ws(e))throw Error('You declared cell type "'.concat(e,'" as a string that is not mapped to a known object.\n                 Cell type must be an object or a string mapped to an object registered by\n                 "Handsontable.cellTypes.registerCellType" method'));return zs(e)}function Gs(e,t){"string"!=typeof e&&(e=(t=e).CELL_TYPE);var n=t,o=n.editor,i=n.renderer,a=n.validator;o&&sl(e,o),i&&gs(e,i),a&&Ts(e,a),Us(e,t)}var Js="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Ys=Js.length;function Xs(e){for(var t,n=e+1,o="";n>0;)t=(n-1)%Ys,o=String.fromCharCode(65+t)+o,n=parseInt((n-t)/Ys,10);return o}function Qs(e){var t=0;if(e)for(var n=0,o=e.length-1;n<e.length;n+=1,o-=1)t+=Math.pow(Ys,o)*(Js.indexOf(e[n])+1);return t-=1}function Zs(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=[];for(e=0;e<n;e++){var a=[];for(t=0;t<o;t++)a.push(Xs(t)+(e+1));i.push(a)}return i}function ec(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=[];for(e=0;e<n;e++){var a={};for(t=0;t<o;t++)a["prop".concat(t)]=Xs(t)+(e+1);i.push(a)}return i}function tc(e,t){for(var n,o=[],i=0;i<e;i++){n=[];for(var a=0;a<t;a++)n.push("");o.push(n)}return o}function nc(e){var t,n,o,i,a=[],r=0;for(t=0,n=e.length;t<n;t++)for(o=0,i=e[t].length;o<i;o++)o===r&&(a.push([]),r+=1),a[o].push(e[t][o]);return a}function oc(e,t){var n=void 0===t||t;return function(t,o){return function t(o){if(o){if(_e(o,e)&&void 0!==o[e])return o[e];if(_e(o,"type")&&o.type){if("string"!=typeof o.type)throw new Error('Cell "type" must be a string');var i=Ks(o.type);if(_e(i,e))return i[e];if(n)return}return t(Object.getPrototypeOf(o))}}("number"==typeof t?this.getCellMeta(t,o):t)}}function ic(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e,o=[];return Array.isArray(e)&&Array.isArray(e[0])||(n=[e]),n.forEach(function(e,n){Array.isArray(e)?e.forEach(function(e,i){o.push([n+t,i,e])}):Object.keys(e).forEach(function(i){o.push([n+t,i,e[i]])})}),o}function ac(e){var t=0;return Array.isArray(e)&&(e[0]&&Array.isArray(e[0])?t=e[0].length:e[0]&&pe(e[0])&&(t=ge(e[0]))),t}function rc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var lc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.data=n,this.dataType="array",this.colToProp=function(){},this.propToCol=function(){}}var t,n,o;return t=e,(n=[{key:"modifyRowData",value:function(e){var t;return this.hot.hasHook("modifyRowData")&&(t=this.hot.runHooks("modifyRowData",e)),void 0===t||Number.isInteger(t)?this.data[e]:t}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data&&0!==this.data.length?this.getByRange(null,null,e):this.data}},{key:"setData",value:function(e){this.data=e}},{key:"getAtColumn",value:function(e){var t=this,n=[];return K(this.data,function(o,i){var a=t.getAtCell(i,e);n.push(a)}),n}},{key:"getAtRow",value:function(e,t,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=void 0===t&&void 0===n,r=null,l=null;if(r=this.modifyRowData(e),Array.isArray(r))l=[],a?r.forEach(function(t,n){l[n]=o.getAtPhysicalCell(e,n,r)}):Nl(t,n,function(n){l[n-t]=o.getAtPhysicalCell(e,n,r)});else if(pe(r)||Rn(r))if(l=i?[]:{},!a||i){var s=this.countFirstRowKeys()-1;Nl(0,s,function(a){var c=o.colToProp(a);if(a>=(t||0)&&a<=(n||s)&&!Number.isInteger(c)){var u=o.getAtPhysicalCell(e,c,r);i?l.push(u):ye(l,c,u)}})}else ve(r,function(t,n){ye(l,n,o.getAtPhysicalCell(e,n,r))});return l}},{key:"setAtCell",value:function(e,t,n){if(!(e>=this.countRows()||t>=this.countFirstRowKeys())){if(this.hot.hasHook("modifySourceData")){var o=we(n);this.hot.runHooks("modifySourceData",e,this.propToCol(t),o,"set"),o.isTouched()&&(n=o.value)}Number.isInteger(t)?this.data[e][t]=n:ye(this.data[e],t,n)}}},{key:"getAtPhysicalCell",value:function(e,t,n){var o=null;if(n&&(o="string"==typeof t?be(n,t):"function"==typeof t?t(n):n[t]),this.hot.hasHook("modifySourceData")){var i=we(o);this.hot.runHooks("modifySourceData",e,this.colToProp(t),i,"get"),i.isTouched()&&(o=i.value)}return o}},{key:"getAtCell",value:function(e,t){var n=this.modifyRowData(e);return this.getAtPhysicalCell(e,this.colToProp(t),n)}},{key:"getByRange",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1,a=null,r=null,l=null,s=null;null===t||null===n?(i=!0,a=0,l=this.countRows()-1):(a=Math.min(t.row,n.row),r=Math.min(t.col,n.col),l=Math.max(t.row,n.row),s=Math.max(t.col,n.col));var c=[];return Nl(a,l,function(t){c.push(i?e.getAtRow(t,void 0,void 0,o):e.getAtRow(t,r,s,o))}),c}},{key:"countRows",value:function(){if(this.hot.hasHook("modifySourceLength")){var e=this.hot.runHooks("modifySourceLength");if(Number.isInteger(e))return e}return this.data.length}},{key:"countFirstRowKeys",value:function(){return ac(this.data)}},{key:"destroy",value:function(){this.data=null,this.hot=null}}])&&rc(t.prototype,n),o&&rc(t,o),e}(),sc=(n("cqk1"),n("rDYt"),n("VFsM"),{_localHooks:Object.create(null),addLocalHook:function(e,t){return this._localHooks[e]||(this._localHooks[e]=[]),this._localHooks[e].push(t),this},runLocalHooks:function(e){for(var t=this,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this._localHooks[e]&&K(this._localHooks[e],function(e){return e.apply(t,o)})},clearLocalHooks:function(){return this._localHooks={},this}});me(sc,"MIXIN_NAME","localHooks",{writable:!1,enumerable:!1});var cc=sc;function uc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var dc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexedValues=[],this.initValueOrFn=t}var t,n,o;return t=e,(n=[{key:"getValues",value:function(){return this.indexedValues}},{key:"getValueAtIndex",value:function(e){var t=this.indexedValues;if(e<t.length)return t[e]}},{key:"setValues",value:function(e){this.indexedValues=e.slice(),this.runLocalHooks("change")}},{key:"setValueAtIndex",value:function(e,t){return e<this.indexedValues.length&&(this.indexedValues[e]=t,this.runLocalHooks("change"),!0)}},{key:"clear",value:function(){this.setDefaultValues()}},{key:"getLength",value:function(){return this.getValues().length}},{key:"setDefaultValues",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.indexedValues.length;this.indexedValues.length=0,Rn(this.initValueOrFn)?Nl(t-1,function(t){return e.indexedValues.push(e.initValueOrFn(t))}):Nl(t-1,function(){return e.indexedValues.push(e.initValueOrFn)}),this.runLocalHooks("change")}},{key:"init",value:function(e){return this.setDefaultValues(e),this.runLocalHooks("init"),this}},{key:"insert",value:function(){this.runLocalHooks("change")}},{key:"remove",value:function(){this.runLocalHooks("change")}},{key:"destroy",value:function(){this.clearLocalHooks(),this.indexedValues=null,this.initValueOrFn=null}}])&&uc(t.prototype,n),o&&uc(t,o),e}();function hc(e){return function(e){if(Array.isArray(e))return fc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function pc(e,t,n,o){var i=n.length?n[0]:void 0;return[].concat(hc(e.slice(0,i)),hc(n.map(function(e,t){return Rn(o)?o(e,t):o})),hc(void 0===i?[]:e.slice(i)))}function mc(e,t){return W(e,function(e,n){return!1===t.includes(n)})}function vc(e){"@babel/helpers - typeof";return(vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yc(e,t,n){return(yc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_c(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function gc(e,t){return(gc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=_c(e);if(t){var i=_c(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===vc(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _c(e){return(_c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}he(dc,cc);var Cc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gc(e,t)}(a,dc);var t,n,o,i=wc(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"insert",value:function(e,t){this.indexedValues=pc(this.indexedValues,0,t,this.initValueOrFn),yc(_c(a.prototype),"insert",this).call(this,e,t)}},{key:"remove",value:function(e){this.indexedValues=mc(this.indexedValues,e),yc(_c(a.prototype),"remove",this).call(this,e)}}])&&bc(t.prototype,n),o&&bc(t,o),a}();function kc(e){"@babel/helpers - typeof";return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Sc(e,t){return(Sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Ec(e);if(t){var i=Ec(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===kc(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ec(e){return(Ec=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sc(e,t)}(a,Cc);var t,n,o,i=Tc(a);function a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"getHiddenIndexes",value:function(){return z(this.getValues(),function(e,t,n){return t&&e.push(n),e},[])}}])&&xc(t.prototype,n),o&&xc(t,o),a}();function Dc(e){return function(e){if(Array.isArray(e))return Ic(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ic(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ic(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Rc(e,t,n){return[].concat(Dc(e.slice(0,t)),Dc(n),Dc(e.slice(t)))}function Mc(e,t){return W(e,function(e){return!1===t.includes(e)})}function Pc(e,t){return q(e,function(e){return e-t.filter(function(t){return t<e}).length})}function Ac(e,t){var n=t[0],o=t.length;return q(e,function(e){return e>=n?e+o:e})}function Lc(e){"@babel/helpers - typeof";return(Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nc(e){return function(e){if(Array.isArray(e))return Vc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Vc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Fc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Bc(e,t,n){return(Bc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uc(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Hc(e,t){return(Hc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Uc(e);if(t){var i=Uc(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Lc(t)||"function"==typeof t))return t;return $c(e)}(this,n)}}function $c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uc(e){return(Uc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hc(e,t)}(a,dc);var t,n,o,i=jc(a);function a(){var e,t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return e=i.call.apply(i,[this].concat(l)),t=$c(e),o=[],(n="orderOfIndexes")in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,e}return t=a,(n=[{key:"getValues",value:function(){var e=this;return this.orderOfIndexes.map(function(t){return e.indexedValues[t]})}},{key:"setValues",value:function(e){this.orderOfIndexes=Nc(Array(e.length).keys()),Bc(Uc(a.prototype),"setValues",this).call(this,e)}},{key:"setValueAtIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.orderOfIndexes.length;return e<this.indexedValues.length&&(this.indexedValues[e]=t,!1===this.orderOfIndexes.includes(e)&&this.orderOfIndexes.splice(n,0,e),this.runLocalHooks("change"),!0)}},{key:"clearValue",value:function(e){this.orderOfIndexes=Mc(this.orderOfIndexes,[e]),Rn(this.initValueOrFn)?Bc(Uc(a.prototype),"setValueAtIndex",this).call(this,e,this.initValueOrFn(e)):Bc(Uc(a.prototype),"setValueAtIndex",this).call(this,e,this.initValueOrFn)}},{key:"getLength",value:function(){return this.orderOfIndexes.length}},{key:"setDefaultValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.indexedValues.length;this.orderOfIndexes.length=0,Bc(Uc(a.prototype),"setDefaultValues",this).call(this,e)}},{key:"insert",value:function(e,t){this.indexedValues=pc(this.indexedValues,0,t,this.initValueOrFn),this.orderOfIndexes=Ac(this.orderOfIndexes,t),Bc(Uc(a.prototype),"insert",this).call(this,e,t)}},{key:"remove",value:function(e){this.indexedValues=mc(this.indexedValues,e),this.orderOfIndexes=Mc(this.orderOfIndexes,e),this.orderOfIndexes=Pc(this.orderOfIndexes,e),Bc(Uc(a.prototype),"remove",this).call(this,e)}},{key:"getEntries",value:function(){var e=this;return this.orderOfIndexes.map(function(t){return[t,e.getValueAtIndex(t)]})}}])&&Fc(t.prototype,n),o&&Fc(t,o),a}();function Wc(e){"@babel/helpers - typeof";return(Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Kc(e,t){return(Kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Jc(e);if(t){var i=Jc(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Wc(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Jc(e){return(Jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kc(e,t)}(a,Cc);var t,n,o,i=Gc(a);function a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"getTrimmedIndexes",value:function(){return z(this.getValues(),function(e,t,n){return t&&e.push(n),e},[])}}])&&qc(t.prototype,n),o&&qc(t,o),a}(),Xc=new Map([["indexesSequence",{getListWithInsertedItems:Rc,getListWithRemovedItems:Mc}],["physicallyIndexed",{getListWithInsertedItems:pc,getListWithRemovedItems:mc}]]),Qc=function(e){if(!1===Xc.has(e))throw new Error("Alter strategy with ID '".concat(e,"' does not exist."));return Xc.get(e)};function Zc(e){"@babel/helpers - typeof";return(Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eu(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function tu(e,t,n){return(tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iu(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nu(e,t){return(nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ou(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=iu(e);if(t){var i=iu(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Zc(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function iu(e){return(iu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var au=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nu(e,t)}(a,dc);var t,n,o,i=ou(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,function(e){return e})}return t=a,(n=[{key:"insert",value:function(e,t){var n=Ac(this.indexedValues,t);this.indexedValues=Rc(n,e,t),tu(iu(a.prototype),"insert",this).call(this,e,t)}},{key:"remove",value:function(e){var t=Mc(this.indexedValues,e);this.indexedValues=Pc(t,e),tu(iu(a.prototype),"remove",this).call(this,e)}}])&&eu(t.prototype,n),o&&eu(t,o),a}(),ru=new Map([["hiding",Oc],["index",dc],["linkedPhysicalIndexToValue",zc],["physicalIndexToValue",Cc],["trimming",Yc]]);function lu(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var su=0,cu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.collection=new Map}var t,n,o;return t=e,(n=[{key:"register",value:function(e,t){var n=this;!1===this.collection.has(e)&&(this.collection.set(e,t),t.addLocalHook("change",function(){return n.runLocalHooks("change",t)}),su+=1)}},{key:"unregister",value:function(e){var t=this.collection.get(e);ot(t)&&(t.destroy(),this.collection.delete(e),this.runLocalHooks("change",t),su-=1)}},{key:"unregisterAll",value:function(){var e=this;this.collection.forEach(function(t,n){return e.unregister(n)}),this.collection.clear()}},{key:"get",value:function(e){return it(e)?Array.from(this.collection.values()):this.collection.get(e)}},{key:"getLength",value:function(){return this.collection.size}},{key:"removeFromEvery",value:function(e){this.collection.forEach(function(t){t.remove(e)})}},{key:"insertToEvery",value:function(e,t){this.collection.forEach(function(n){n.insert(e,t)})}},{key:"initEvery",value:function(e){this.collection.forEach(function(t){t.init(e)})}}])&&lu(t.prototype,n),o&&lu(t,o),e}();function uu(e){"@babel/helpers - typeof";return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function du(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function hu(e,t){return(hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=pu(e);if(t){var i=pu(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===uu(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pu(e){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}he(cu,cc);var mu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hu(e,t)}(a,cu);var t,n,o,i=fu(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this)).mergedValuesCache=[],n.aggregationFunction=e,n.fallbackValue=t,n}return t=a,(n=[{key:"getMergedValues",value:function(){if(!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return this.mergedValuesCache;if(0===this.getLength())return[];for(var e=q(this.get(),function(e){return e.getValues()}),t=[],n=ot(e[0])&&e[0].length||0,o=0;o<n;o+=1){for(var i=[],a=0;a<this.getLength();a+=1)i.push(e[a][o]);t.push(i)}return q(t,this.aggregationFunction)}},{key:"getMergedValueAtIndex",value:function(e,t){var n=this.getMergedValues(t)[e];return ot(n)?n:this.fallbackValue}},{key:"updateCache",value:function(){this.mergedValuesCache=this.getMergedValues(!1)}}])&&du(t.prototype,n),o&&du(t,o),a}();function vu(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bu(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,yu(e,t,"set"),n),n}function yu(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var gu=new WeakMap,wu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),gu.set(this,{writable:!0,value:[]})}var t,n,o;return t=e,(n=[{key:"subscribe",value:function(e){var t;return this.addLocalHook("change",e),this._write(function(e,t){return t.get?t.get.call(e):t.value}(t=this,yu(t,gu,"get"))),this}},{key:"unsubscribe",value:function(){return this.runLocalHooks("unsubscribe"),this.clearLocalHooks(),this}},{key:"_write",value:function(e){return e.length>0&&this.runLocalHooks("change",e),this}},{key:"_writeInitialChanges",value:function(e){bu(this,gu,e)}}])&&vu(t.prototype,n),o&&vu(t,o),e}();function _u(e,t){for(var n=[],o=0,i=0;o<e.length&&i<t.length;o++,i++)e[o]!==t[i]&&n.push({op:"replace",index:i,oldValue:e[o],newValue:t[i]});for(;o<t.length;o++)n.push({op:"insert",index:o,oldValue:void 0,newValue:t[o]});for(;i<e.length;i++)n.push({op:"remove",index:i,oldValue:e[i],newValue:void 0});return n}function Cu(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ku(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Su(e,t,"get"))}function xu(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Su(e,t,"set"),n),n}function Su(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}he(wu,cc);var Tu=new WeakMap,Eu=new WeakMap,Ou=new WeakMap,Du=new WeakMap,Iu=new WeakMap,Ru=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).initialIndexValue;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Tu.set(this,{writable:!0,value:new Set}),Eu.set(this,{writable:!0,value:[]}),Ou.set(this,{writable:!0,value:[]}),Du.set(this,{writable:!0,value:!1}),Iu.set(this,{writable:!0,value:!1}),xu(this,Iu,null!==t&&void 0!==t&&t)}var t,n,o;return t=e,(n=[{key:"createObserver",value:function(){var e=this,t=new wu;return ku(this,Tu).add(t),t.addLocalHook("unsubscribe",function(){ku(e,Tu).delete(t)}),t._writeInitialChanges(_u(ku(this,Eu),ku(this,Ou))),t}},{key:"emit",value:function(e){var t=ku(this,Ou);ku(this,Du)&&ku(this,Eu).length===e.length||(0===e.length?e=new Array(t.length).fill(ku(this,Iu)):xu(this,Eu,new Array(e.length).fill(ku(this,Iu))),ku(this,Du)||(xu(this,Du,!0),t=ku(this,Eu)));var n=_u(t,e);ku(this,Tu).forEach(function(e){return e._write(n)}),xu(this,Ou,e)}}])&&Cu(t.prototype,n),o&&Cu(t,o),e}();function Mu(e){return function(e){if(Array.isArray(e))return Pu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Pu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pu(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Au(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Lu,Nu=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexesSequence=new au,this.trimmingMapsCollection=new mu(function(e){return e.some(function(e){return!0===e})},!1),this.hidingMapsCollection=new mu(function(e){return e.some(function(e){return!0===e})},!1),this.variousMapsCollection=new cu,this.hidingChangesObservable=new Ru({initialIndexValue:!1}),this.notTrimmedIndexesCache=[],this.notHiddenIndexesCache=[],this.isBatched=!1,this.indexesSequenceChanged=!1,this.trimmedIndexesChanged=!1,this.hiddenIndexesChanged=!1,this.renderablePhysicalIndexesCache=[],this.fromPhysicalToVisualIndexesCache=new Map,this.fromVisualToRenderableIndexesCache=new Map,this.indexesSequence.addLocalHook("change",function(){t.indexesSequenceChanged=!0,t.updateCache(),t.runLocalHooks("change",t.indexesSequence,null)}),this.trimmingMapsCollection.addLocalHook("change",function(e){t.trimmedIndexesChanged=!0,t.updateCache(),t.runLocalHooks("change",e,t.trimmingMapsCollection)}),this.hidingMapsCollection.addLocalHook("change",function(e){t.hiddenIndexesChanged=!0,t.updateCache(),t.runLocalHooks("change",e,t.hidingMapsCollection)}),this.variousMapsCollection.addLocalHook("change",function(e){t.runLocalHooks("change",e,t.variousMapsCollection)})}var t,n,o;return t=e,(n=[{key:"suspendOperations",value:function(){this.isBatched=!0}},{key:"resumeOperations",value:function(){this.isBatched=!1,this.updateCache()}},{key:"createChangesObserver",value:function(e){if("hiding"!==e)throw new Error('Unsupported index map type "'.concat(e,'".'));return this.hidingChangesObservable.createObserver()}},{key:"createAndRegisterIndexMap",value:function(e,t,n){return this.registerMap(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!ru.has(e))throw new Error('The provided map type ("'.concat(e,'") does not exist.'));return new(ru.get(e))(t)}(t,n))}},{key:"registerMap",value:function(e,t){if(this.trimmingMapsCollection.get(e)||this.hidingMapsCollection.get(e)||this.variousMapsCollection.get(e))throw Error('Map with name "'.concat(e,'" has been already registered.'));t instanceof Yc?this.trimmingMapsCollection.register(e,t):t instanceof Oc?this.hidingMapsCollection.register(e,t):this.variousMapsCollection.register(e,t);var n=this.getNumberOfIndexes();return n>0&&t.init(n),t}},{key:"unregisterMap",value:function(e){this.trimmingMapsCollection.unregister(e),this.hidingMapsCollection.unregister(e),this.variousMapsCollection.unregister(e)}},{key:"unregisterAll",value:function(){this.trimmingMapsCollection.unregisterAll(),this.hidingMapsCollection.unregisterAll(),this.variousMapsCollection.unregisterAll()}},{key:"getPhysicalFromVisualIndex",value:function(e){var t=this.notTrimmedIndexesCache[e];return ot(t)?t:null}},{key:"getPhysicalFromRenderableIndex",value:function(e){var t=this.renderablePhysicalIndexesCache[e];return ot(t)?t:null}},{key:"getVisualFromPhysicalIndex",value:function(e){var t=this.fromPhysicalToVisualIndexesCache.get(e);return ot(t)?t:null}},{key:"getVisualFromRenderableIndex",value:function(e){return this.getVisualFromPhysicalIndex(this.getPhysicalFromRenderableIndex(e))}},{key:"getRenderableFromVisualIndex",value:function(e){var t=this.fromVisualToRenderableIndexesCache.get(e);return ot(t)?t:null}},{key:"getFirstNotHiddenIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e-t,i=this.getPhysicalFromVisualIndex(e);return null===i?!0===n&&o!==e-t?this.getFirstNotHiddenIndex(o,-t,!1,o):null:!1===this.isHidden(i)?e:this.getFirstNotHiddenIndex(e+t,t,n,o)}},{key:"initToLength",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNumberOfIndexes();this.notTrimmedIndexesCache=Mu(new Array(e).keys()),this.notHiddenIndexesCache=Mu(new Array(e).keys()),this.suspendOperations(),this.indexesSequence.init(e),this.trimmingMapsCollection.initEvery(e),this.resumeOperations(),this.suspendOperations(),this.hidingMapsCollection.initEvery(e),this.variousMapsCollection.initEvery(e),this.resumeOperations(),this.runLocalHooks("init")}},{key:"getIndexesSequence",value:function(){return this.indexesSequence.getValues()}},{key:"setIndexesSequence",value:function(e){this.indexesSequence.setValues(e)}},{key:"getNotTrimmedIndexes",value:function(){var e=this;return!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])?this.notTrimmedIndexesCache:this.getIndexesSequence().filter(function(t){return!1===e.isTrimmed(t)})}},{key:"getNotTrimmedIndexesLength",value:function(){return this.getNotTrimmedIndexes().length}},{key:"getNotHiddenIndexes",value:function(){var e=this;return!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])?this.notHiddenIndexesCache:this.getIndexesSequence().filter(function(t){return!1===e.isHidden(t)})}},{key:"getNotHiddenIndexesLength",value:function(){return this.getNotHiddenIndexes().length}},{key:"getRenderableIndexes",value:function(){var e=this;return!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])?this.renderablePhysicalIndexesCache:this.getNotTrimmedIndexes().filter(function(t){return!1===e.isHidden(t)})}},{key:"getRenderableIndexesLength",value:function(){return this.getRenderableIndexes().length}},{key:"getNumberOfIndexes",value:function(){return this.getIndexesSequence().length}},{key:"moveIndexes",value:function(e,t){var n=this;"number"==typeof e&&(e=[e]);var o=q(e,function(e){return n.getPhysicalFromVisualIndex(e)}),i=this.getNotTrimmedIndexesLength(),a=e.length,r=Mc(this.getIndexesSequence(),o),l=i-a;if(t+a<i){var s=r.filter(function(e){return!1===n.isTrimmed(e)})[t];l=r.indexOf(s)}this.setIndexesSequence(Rc(r,l,o))}},{key:"isTrimmed",value:function(e){return this.trimmingMapsCollection.getMergedValueAtIndex(e)}},{key:"isHidden",value:function(e){return this.hidingMapsCollection.getMergedValueAtIndex(e)}},{key:"insertIndexes",value:function(e,t){var n=this.getNotTrimmedIndexes()[e],o=ot(n)?n:this.getNumberOfIndexes(),i=this.getIndexesSequence().includes(n)?this.getIndexesSequence().indexOf(n):this.getNumberOfIndexes(),a=q(new Array(t).fill(o),function(e,t){return e+t});this.suspendOperations(),this.indexesSequence.insert(i,a),this.trimmingMapsCollection.insertToEvery(i,a),this.hidingMapsCollection.insertToEvery(i,a),this.variousMapsCollection.insertToEvery(i,a),this.resumeOperations()}},{key:"removeIndexes",value:function(e){this.suspendOperations(),this.indexesSequence.remove(e),this.trimmingMapsCollection.removeFromEvery(e),this.hidingMapsCollection.removeFromEvery(e),this.variousMapsCollection.removeFromEvery(e),this.resumeOperations()}},{key:"updateCache",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.indexesSequenceChanged||this.trimmedIndexesChanged||this.hiddenIndexesChanged;(!0===e||!1===this.isBatched&&!0===t)&&(this.trimmingMapsCollection.updateCache(),this.hidingMapsCollection.updateCache(),this.notTrimmedIndexesCache=this.getNotTrimmedIndexes(!1),this.notHiddenIndexesCache=this.getNotHiddenIndexes(!1),this.renderablePhysicalIndexesCache=this.getRenderableIndexes(!1),this.cacheFromPhysicalToVisualIndexes(),this.cacheFromVisualToRenderabIendexes(),this.hiddenIndexesChanged&&this.hidingChangesObservable.emit(this.hidingMapsCollection.getMergedValues()),this.runLocalHooks("cacheUpdated",{indexesSequenceChanged:this.indexesSequenceChanged,trimmedIndexesChanged:this.trimmedIndexesChanged,hiddenIndexesChanged:this.hiddenIndexesChanged}),this.indexesSequenceChanged=!1,this.trimmedIndexesChanged=!1,this.hiddenIndexesChanged=!1)}},{key:"cacheFromPhysicalToVisualIndexes",value:function(){var e=this.getNotTrimmedIndexesLength();this.fromPhysicalToVisualIndexesCache.clear();for(var t=0;t<e;t+=1){var n=this.getPhysicalFromVisualIndex(t);this.fromPhysicalToVisualIndexesCache.set(n,t)}}},{key:"cacheFromVisualToRenderabIendexes",value:function(){var e=this.getRenderableIndexesLength();this.fromVisualToRenderableIndexesCache.clear();for(var t=0;t<e;t+=1){var n=this.getPhysicalFromRenderableIndex(t),o=this.getVisualFromPhysicalIndex(n);this.fromVisualToRenderableIndexesCache.set(o,t)}}}])&&Au(t.prototype,n),o&&Au(t,o),e}();function Vu(e){var t=/^([a-zA-Z]{2})-([a-zA-Z]{2})$/.exec(e);return t?"".concat(t[1].toLowerCase(),"-").concat(t[2].toUpperCase()):e}function Fu(e){var t,n;ot(e)&&function(){var e;ot(console)&&(e=console).error.apply(e,arguments)}(Ze(Lu||(t=['Language with code "','" was not found. You should register particular language \n    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.'],(n=['Language with code "','" was not found. You should register particular language\\x20\n    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.'])||(n=t.slice(0)),Lu=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))),e))}he(Nu,cc);var Bu=Zr("phraseFormatters"),Hu=Bu.register,ju=Bu.getValues;Hu("pluralize",function(e,t){return Array.isArray(e)&&Number.isInteger(t)?e[t]:e});var $u,Uu="ContextMenu:items",zu="".concat(Uu,".noItems"),Wu="".concat(Uu,".insertRowAbove"),qu="".concat(Uu,".insertRowBelow"),Ku="".concat(Uu,".insertColumnOnTheLeft"),Gu="".concat(Uu,".insertColumnOnTheRight"),Ju="".concat(Uu,".removeRow"),Yu="".concat(Uu,".removeColumn"),Xu="".concat(Uu,".undo"),Qu="".concat(Uu,".redo"),Zu="".concat(Uu,".readOnly"),ed="".concat(Uu,".clearColumn"),td="".concat(Uu,".copy"),nd="".concat(Uu,".cut"),od="".concat(Uu,".freezeColumn"),id="".concat(Uu,".unfreezeColumn"),ad="".concat(Uu,".mergeCells"),rd="".concat(Uu,".unmergeCells"),ld="".concat(Uu,".addComment"),sd="".concat(Uu,".editComment"),cd="".concat(Uu,".removeComment"),ud="".concat(Uu,".readOnlyComment"),dd="".concat(Uu,".align"),hd="".concat(Uu,".align.left"),fd="".concat(Uu,".align.center"),pd="".concat(Uu,".align.right"),md="".concat(Uu,".align.justify"),vd="".concat(Uu,".align.top"),bd="".concat(Uu,".align.middle"),yd="".concat(Uu,".align.bottom"),gd="".concat(Uu,".borders"),wd="".concat(Uu,".borders.top"),_d="".concat(Uu,".borders.right"),Cd="".concat(Uu,".borders.bottom"),kd="".concat(Uu,".borders.left"),xd="".concat(Uu,".borders.remove"),Sd="".concat(Uu,".nestedHeaders.insertChildRow"),Td="".concat(Uu,".nestedHeaders.detachFromParent"),Ed="".concat(Uu,".hideColumn"),Od="".concat(Uu,".showColumn"),Dd="".concat(Uu,".hideRow"),Id="".concat(Uu,".showRow"),Rd="Filters:",Md="".concat(Rd,"conditions"),Pd="".concat(Md,".none"),Ad="".concat(Md,".isEmpty"),Ld="".concat(Md,".isNotEmpty"),Nd="".concat(Md,".isEqualTo"),Vd="".concat(Md,".isNotEqualTo"),Fd="".concat(Md,".beginsWith"),Bd="".concat(Md,".endsWith"),Hd="".concat(Md,".contains"),jd="".concat(Md,".doesNotContain"),$d="".concat(Md,".byValue"),Ud="".concat(Md,".greaterThan"),zd="".concat(Md,".greaterThanOrEqualTo"),Wd="".concat(Md,".lessThan"),qd="".concat(Md,".lessThanOrEqualTo"),Kd="".concat(Md,".isBetween"),Gd="".concat(Md,".isNotBetween"),Jd="".concat(Md,".after"),Yd="".concat(Md,".before"),Xd="".concat(Md,".today"),Qd="".concat(Md,".tomorrow"),Zd="".concat(Md,".yesterday"),eh="".concat(Rd,"labels.filterByCondition"),th="".concat(Rd,"labels.filterByValue"),nh="".concat(Rd,"labels.conjunction"),oh="".concat(Rd,"labels.disjunction"),ih="".concat(Rd,"values.blankCells"),ah="".concat(Rd,"buttons.selectAll"),rh="".concat(Rd,"buttons.clear"),lh="".concat(Rd,"buttons.ok"),sh="".concat(Rd,"buttons.cancel"),ch="".concat(Rd,"buttons.placeholder.search"),uh="".concat(Rd,"buttons.placeholder.value"),dh="".concat(Rd,"buttons.placeholder.secondValue");function hh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fh=(hh($u={languageCode:"en-US"},zu,"No available options"),hh($u,Wu,"Insert row above"),hh($u,qu,"Insert row below"),hh($u,Ku,"Insert column left"),hh($u,Gu,"Insert column right"),hh($u,Ju,["Remove row","Remove rows"]),hh($u,Yu,["Remove column","Remove columns"]),hh($u,Xu,"Undo"),hh($u,Qu,"Redo"),hh($u,Zu,"Read only"),hh($u,ed,"Clear column"),hh($u,dd,"Alignment"),hh($u,hd,"Left"),hh($u,fd,"Center"),hh($u,pd,"Right"),hh($u,md,"Justify"),hh($u,vd,"Top"),hh($u,bd,"Middle"),hh($u,yd,"Bottom"),hh($u,od,"Freeze column"),hh($u,id,"Unfreeze column"),hh($u,gd,"Borders"),hh($u,wd,"Top"),hh($u,_d,"Right"),hh($u,Cd,"Bottom"),hh($u,kd,"Left"),hh($u,xd,"Remove border(s)"),hh($u,ld,"Add comment"),hh($u,sd,"Edit comment"),hh($u,cd,"Delete comment"),hh($u,ud,"Read-only comment"),hh($u,ad,"Merge cells"),hh($u,rd,"Unmerge cells"),hh($u,td,"Copy"),hh($u,nd,"Cut"),hh($u,Sd,"Insert child row"),hh($u,Td,"Detach from parent"),hh($u,Ed,["Hide column","Hide columns"]),hh($u,Od,["Show column","Show columns"]),hh($u,Dd,["Hide row","Hide rows"]),hh($u,Id,["Show row","Show rows"]),hh($u,Pd,"None"),hh($u,Ad,"Is empty"),hh($u,Ld,"Is not empty"),hh($u,Nd,"Is equal to"),hh($u,Vd,"Is not equal to"),hh($u,Fd,"Begins with"),hh($u,Bd,"Ends with"),hh($u,Hd,"Contains"),hh($u,jd,"Does not contain"),hh($u,Ud,"Greater than"),hh($u,zd,"Greater than or equal to"),hh($u,Wd,"Less than"),hh($u,qd,"Less than or equal to"),hh($u,Kd,"Is between"),hh($u,Gd,"Is not between"),hh($u,Jd,"After"),hh($u,Yd,"Before"),hh($u,Xd,"Today"),hh($u,Qd,"Tomorrow"),hh($u,Zd,"Yesterday"),hh($u,ih,"Blank cells"),hh($u,eh,"Filter by condition"),hh($u,th,"Filter by value"),hh($u,nh,"And"),hh($u,oh,"Or"),hh($u,ah,"Select all"),hh($u,rh,"Clear"),hh($u,lh,"OK"),hh($u,sh,"Cancel"),hh($u,ch,"Search"),hh($u,uh,"Value"),hh($u,dh,"Second value"),$u),ph=fh.languageCode,mh=Zr("languagesDictionaries"),vh=mh.register,bh=mh.getItem,yh=mh.hasItem,gh=mh.getValues;function wh(e,t){var n=e,o=t;return pe(e)&&(n=(o=e).languageCode),function(e,t){e!==ph&&(n=t,ve(bh(ph),function(e,t){it(n[t])&&(n[t]=e)}));var n}(n,o),vh(n,ue(o)),ue(o)}function _h(e){return Ch(e)?ue(bh(e)):null}function Ch(e){return yh(e)}function kh(e,t,n){var o=_h(e);if(null===o)return null;var i=o[t];if(it(i))return null;var a=function(e,t){var n=e;return K(ju(),function(o){n=o(e,t)}),n}(i,n);return Array.isArray(a)?a[0]:a}wh(fh);var xh=new Gi,Sh=new Set,Th=0;function Eh(){Th>0&&(Th-=1),0===Th&&(xh.clearEvents(),Sh.clear(),Th=0)}function Oh(){return Array.from(Sh.values()).some(function(e){return Cr(e)})}n("Esx6");var Dh="active-header",Ih="area",Rh="cell",Mh="fill",Ph="header",Ah="custom-selection";function Lh(e){"@babel/helpers - typeof";return(Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Fh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Bh(e,t,n){return(Bh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$h(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Hh(e,t){return(Hh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=$h(e);if(t){var i=$h(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Lh(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $h(e){return($h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Uh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hh(e,t)}(a,Br);var t,n,o,i=jh(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,null)).visualCellRange=t||null,n.commit(),n}return t=a,(n=[{key:"add",value:function(e){return null===this.visualCellRange?this.visualCellRange=new Gn(e):this.visualCellRange.expand(e),this}},{key:"clear",value:function(){return this.visualCellRange=null,Bh($h(a.prototype),"clear",this).call(this)}},{key:"findVisibleCoordsInRange",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,i=this.findVisibleCoordsInRowsRange(e.row,t.row,n);if(null===i)return null;var a=this.findVisibleCoordsInColumnsRange(e.col,t.col,o);return null===a?null:new qn(i,a)}},{key:"findVisibleCoordsInRowsRange",value:function(e,t,n){var o=this.settings.visualToRenderableCoords({row:e,col:-1}).row;return t===e&&null===o?null:null===o?this.findVisibleCoordsInRowsRange(e+n,t,n):e}},{key:"findVisibleCoordsInColumnsRange",value:function(e,t,n){var o=this.settings.visualToRenderableCoords({row:-1,col:e}).col;return t===e&&null===o?null:null===o?this.findVisibleCoordsInColumnsRange(e+n,t,n):e}},{key:"findVisibleHeaderRange",value:function(e,t,n,o){var i=this.findVisibleCoordsInRowsRange(e.row,t.row,n),a=this.findVisibleCoordsInRowsRange(t.row,e.row,-n),r=this.findVisibleCoordsInColumnsRange(e.col,t.col,o),l=this.findVisibleCoordsInColumnsRange(t.col,e.col,-o);return null===i&&null===a&&null===r&&null===l?null:[new qn(i,r),new qn(a,l)]}},{key:"commit",value:function(){if(null===this.visualCellRange)return this;var e=this.visualCellRange,t=e.from,n=e.to,o=this.getRowSearchDirection(this.visualCellRange),i=this.getColumnSearchDirection(this.visualCellRange),a=this.findVisibleCoordsInRange(t,n,o,i),r=this.findVisibleCoordsInRange(n,t,-o,-i);if(null===a||null===r){var l=null;if("header"===this.settings.type){var s=Nh(this.findVisibleHeaderRange(t,n,o,i),2),c=s[0],u=s[1];l=this.createRenderableCellRange(c,u)}this.cellRange=l}else this.cellRange=this.createRenderableCellRange(a,r);return this}},{key:"adjustCoordinates",value:function(e){var t=this.getRowSearchDirection(e),n=this.getColumnSearchDirection(e),o=e.from.clone().normalize(),i=e.to.clone().normalize(),a=this.findVisibleCoordsInRange(o,i,t,n);if(null!==a){if(null===this.cellRange){var r=this.settings.visualToRenderableCoords(a);this.cellRange=new Gn(r)}return e.setHighlight(a),this}return e.setHighlight(e.from),this}},{key:"getCorners",value:function(){var e=this.cellRange,t=e.from,n=e.to,o=null===t.row||null===n.row,i=null===t.col||null===n.col,a=new qn(o?null:Math.min(t.row,n.row),i?null:Math.min(t.col,n.col)),r=new qn(o?null:Math.max(t.row,n.row),i?null:Math.max(t.col,n.col));return[a.row,a.col,r.row,r.col]}},{key:"getVisualCorners",value:function(){var e=this.settings.renderableToVisualCoords(this.cellRange.getTopLeftCorner()),t=this.settings.renderableToVisualCoords(this.cellRange.getBottomRightCorner());return[e.row,e.col,t.row,t.col]}},{key:"createRenderableCellRange",value:function(e,t){var n=this.settings.visualToRenderableCoords(e),o=this.settings.visualToRenderableCoords(t);return new Gn(n,n,o)}},{key:"getRowSearchDirection",value:function(e){return e.from.row<e.to.row?1:-1}},{key:"getColumnSearchDirection",value:function(e){return e.from.col<e.to.col?1:-1}}])&&Fh(t.prototype,n),o&&Fh(t,o),a}();function zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zh(Object(n),!0).forEach(function(t){qh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kh(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Gh=function(e){var t=e.activeHeaderClassName,n=Kh(e,["activeHeaderClassName"]);return new Uh(Wh(Wh({highlightHeaderClassName:t},n),{},{selectionType:Dh}))};function Jh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Yh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jh(Object(n),!0).forEach(function(t){Xh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qh(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Zh=function(e){var t=e.layerLevel,n=e.areaCornerVisible,o=Qh(e,["layerLevel","areaCornerVisible"]);return new Uh(Yh(Yh({className:"area",markIntersections:!0,layerLevel:Math.min(t,7),border:{width:1,color:"#4b89ff",cornerVisible:n}},o),{},{selectionType:Ih}))};function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach(function(t){nf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function of(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var af=function(e){var t=e.cellCornerVisible,n=of(e,["cellCornerVisible"]);return new Uh(tf(tf({className:"current",border:{width:2,color:"#4b89ff",cornerVisible:t}},n),{},{selectionType:Rh}))};function rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function lf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rf(Object(n),!0).forEach(function(t){sf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cf(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var uf=function(e){var t=e.border,n=e.visualCellRange,o=cf(e,["border","visualCellRange"]);return new Uh(lf(lf(lf({},t),o),{},{selectionType:Ah}),n)};n("VEKh");function df(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?df(Object(n),!0).forEach(function(t){ff(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):df(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ff(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pf=function(e){var t=Object.assign({},e);return new Uh(hf(hf({className:"fill",border:{width:1,color:"#ff0000"}},t),{},{selectionType:Mh}))};function mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function vf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mf(Object(n),!0).forEach(function(t){bf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yf(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var gf=function(e){var t=e.headerClassName,n=e.rowClassName,o=e.columnClassName,i=yf(e,["headerClassName","rowClassName","columnClassName"]);return new Uh(vf(vf({className:"highlight",highlightHeaderClassName:t,highlightRowClassName:n,highlightColumnClassName:o},i),{},{highlightOnlyClosestHeader:!0,selectionType:Ph}))};function wf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cf=Zr("highlight/types"),kf=Cf.register,xf=Cf.getItem;function Sf(e,t){return xf(e)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wf(Object(n),!0).forEach(function(t){_f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({type:e},t))}function Tf(e){return function(e){if(Array.isArray(e))return Ef(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ef(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Of(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Df(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Of(Object(n),!0).forEach(function(t){If(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Of(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function If(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}kf(Dh,Gh),kf(Ih,Zh),kf(Rh,af),kf(Ah,uf),kf(Mh,pf),kf(Ph,gf);var Mf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.layerLevel=0,this.cell=Sf(Rh,t),this.fill=Sf(Mh,t),this.areas=new Map,this.headers=new Map,this.activeHeaders=new Map,this.customSelections=[]}var t,n,o;return t=e,(n=[{key:"isEnabledFor",value:function(e,t){var n=e;e===Rh&&(n="current");var o=this.options.disabledCellSelection(t.row,t.col);return"string"==typeof o&&(o=[o]),!1===o||Array.isArray(o)&&!o.includes(n)}},{key:"useLayerLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.layerLevel=e,this}},{key:"getCell",value:function(){return this.cell}},{key:"getFill",value:function(){return this.fill}},{key:"createOrGetArea",value:function(){var e,t=this.layerLevel;return this.areas.has(t)?e=this.areas.get(t):(e=Sf(Ih,Df({layerLevel:t},this.options)),this.areas.set(t,e)),e}},{key:"getAreas",value:function(){return Tf(this.areas.values())}},{key:"createOrGetHeader",value:function(){var e,t=this.layerLevel;return this.headers.has(t)?e=this.headers.get(t):(e=Sf(Ph,Df({},this.options)),this.headers.set(t,e)),e}},{key:"getHeaders",value:function(){return Tf(this.headers.values())}},{key:"createOrGetActiveHeader",value:function(){var e,t=this.layerLevel;return this.activeHeaders.has(t)?e=this.activeHeaders.get(t):(e=Sf(Dh,Df({},this.options)),this.activeHeaders.set(t,e)),e}},{key:"getActiveHeaders",value:function(){return Tf(this.activeHeaders.values())}},{key:"getCustomSelections",value:function(){return Tf(this.customSelections.values())}},{key:"addCustomSelection",value:function(e){this.customSelections.push(Sf(Ah,Df(Df({},this.options),e)))}},{key:"clear",value:function(){this.cell.clear(),this.fill.clear(),K(this.areas.values(),function(e){e.clear()}),K(this.headers.values(),function(e){e.clear()}),K(this.activeHeaders.values(),function(e){e.clear()})}},{key:Symbol.iterator,value:function(){return[this.cell,this.fill].concat(Tf(this.areas.values()),Tf(this.headers.values()),Tf(this.activeHeaders.values()),Tf(this.customSelections))[Symbol.iterator]()}}])&&Rf(t.prototype,n),o&&Rf(t,o),e}();function Pf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Af=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ranges=[]}var t,n,o;return t=e,(n=[{key:"isEmpty",value:function(){return 0===this.size()}},{key:"set",value:function(e){return this.clear(),this.ranges.push(new Gn(e)),this}},{key:"add",value:function(e){return this.ranges.push(new Gn(e)),this}},{key:"pop",value:function(){return this.ranges.pop(),this}},{key:"current",value:function(){return this.peekByIndex(0)}},{key:"previous",value:function(){return this.peekByIndex(-1)}},{key:"includes",value:function(e){return this.ranges.some(function(t){return t.includes(e)})}},{key:"clear",value:function(){return this.ranges.length=0,this}},{key:"size",value:function(){return this.ranges.length}},{key:"peekByIndex",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.size()+t-1;return n>=0&&(e=this.ranges[n]),e}},{key:Symbol.iterator,value:function(){return this.ranges[Symbol.iterator]()}}])&&Pf(t.prototype,n),o&&Pf(t,o),e}();function Lf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Nf=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.range=t,this.options=n}var t,n,o;return t=e,(n=[{key:"transformStart",value:function(e,t,n){var o=new qn(e,t),i=this.range.current().highlight,a=this.options.visualToRenderableCoords(i),r=a.row,l=a.col,s=i,c=0,u=0;if(this.runLocalHooks("beforeTransformStart",o),null!==r&&null!==l){var d=this.options.countRows(),h=this.options.countCols(),f=this.options.fixedRowsBottom(),p=this.options.minSpareRows(),m=this.options.minSpareCols(),v=this.options.autoWrapRow(),b=this.options.autoWrapCol();r+e>d-1?n&&p>0&&!(f&&r>=d-f-1)?(this.runLocalHooks("insertRowRequire",d),d=this.options.countRows()):b&&(o.row=1-d,o.col=l+o.col===h-1?1-h:1):b&&r+o.row<0&&l+o.col>=0&&(o.row=d-1,o.col=l+o.col===0?h-1:-1),l+o.col>h-1?n&&m>0?(this.runLocalHooks("insertColRequire",h),h=this.options.countCols()):v&&(o.row=r+o.row===d-1?1-d:1,o.col=1-h):v&&l+o.col<0&&r+o.row>=0&&(o.row=r+o.row===0?d-1:-1,o.col=h-1);var y=new qn(r+o.row,l+o.col);c=0,u=0,y.row<0?(c=-1,y.row=0):y.row>0&&y.row>=d&&(c=1,y.row=d-1),y.col<0?(u=-1,y.col=0):y.col>0&&y.col>=h&&(u=1,y.col=h-1),s=this.options.renderableToVisualCoords(y)}return this.runLocalHooks("afterTransformStart",s,c,u),s}},{key:"transformEnd",value:function(e,t){var n=new qn(e,t),o=this.range.current(),i=o.to,a=0,r=0;this.runLocalHooks("beforeTransformEnd",n);var l=this.options.visualToRenderableCoords(o.highlight),s=l.row,c=l.col;if(null!==s&&null!==c){var u=this.options.countRows(),d=this.options.countCols(),h=this.options.visualToRenderableCoords(o.to),f=h.row,p=h.col,m=new qn(f+n.row,p+n.col);a=0,r=0,m.row<0?(a=-1,m.row=0):m.row>0&&m.row>=u&&(a=1,m.row=u-1),m.col<0?(r=-1,m.col=0):m.col>0&&m.col>=d&&(r=1,m.col=d-1),i=this.options.renderableToVisualCoords(m)}return this.runLocalHooks("afterTransformEnd",i,a,r),i}}])&&Lf(t.prototype,n),o&&Lf(t,o),e}();he(Nf,cc);var Vf=Nf;function Ff(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Hf(e){"@babel/helpers - typeof";return(Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jf,$f=0,Uf=1,zf=2,Wf=3,qf=[Wf,zf],Kf=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],Gf=Symbol("root"),Jf=Symbol("child");function Yf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gf;if(t!==Gf&&t!==Jf)throw new Error("The second argument is used internally only and cannot be overwritten.");var n=Array.isArray(e),o=t===Gf,i=$f;if(n){var a=e[0];if(0===e.length)i=Uf;else if(o&&a instanceof Gn)i=Wf;else if(o&&Array.isArray(a))i=Yf(a,Jf);else if(e.length>=2&&e.length<=4){!e.some(function(e,t){return!Kf[t].includes(Hf(e))})&&(i=zf)}}return i}function Xf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.keepDirection,o=void 0!==n&&n,i=t.propToCol;if(!qf.includes(e))throw new Error("Unsupported selection ranges schema type was provided.");return function(t){var n=e===Wf,a=n?t.from.row:t[0],r=n?t.from.col:t[1],l=n?t.to.row:t[2],s=n?t.to.col:t[3];if("function"==typeof i&&("string"==typeof r&&(r=i(r)),"string"==typeof s&&(s=i(s))),it(l)&&(l=a),it(s)&&(s=r),!o){var c=a,u=r,d=l,h=s;a=Math.min(c,d),r=Math.min(u,h),l=Math.max(c,d),s=Math.max(u,h)}return[a,r,l,s]}}function Qf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return"number"==typeof e&&e>=0&&e<t}function Zf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ep(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ep(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function tp(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var np=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=t,this.tableProps=n,this.inProgress=!1,this.selectedByCorner=!1,this.selectedByRowHeader=new Set,this.selectedByColumnHeader=new Set,this.selectedRange=new Af,this.highlight=new Mf({headerClassName:t.currentHeaderClassName,activeHeaderClassName:t.activeHeaderClassName,rowClassName:t.currentRowClassName,columnClassName:t.currentColClassName,disabledCellSelection:function(e,t){return o.tableProps.isDisabledCellSelection(e,t)},cellCornerVisible:function(){return o.isCellCornerVisible.apply(o,arguments)},areaCornerVisible:function(){return o.isAreaCornerVisible.apply(o,arguments)},visualToRenderableCoords:function(e){return o.tableProps.visualToRenderableCoords(e)},renderableToVisualCoords:function(e){return o.tableProps.renderableToVisualCoords(e)}}),this.transformation=new Vf(this.selectedRange,{countRows:function(){return o.tableProps.countRowsTranslated()},countCols:function(){return o.tableProps.countColsTranslated()},visualToRenderableCoords:function(e){return o.tableProps.visualToRenderableCoords(e)},renderableToVisualCoords:function(e){return o.tableProps.renderableToVisualCoords(e)},fixedRowsBottom:function(){return t.fixedRowsBottom},minSpareRows:function(){return t.minSpareRows},minSpareCols:function(){return t.minSpareCols},autoWrapRow:function(){return t.autoWrapRow},autoWrapCol:function(){return t.autoWrapCol}}),this.transformation.addLocalHook("beforeTransformStart",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.runLocalHooks.apply(o,["beforeModifyTransformStart"].concat(t))}),this.transformation.addLocalHook("afterTransformStart",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.runLocalHooks.apply(o,["afterModifyTransformStart"].concat(t))}),this.transformation.addLocalHook("beforeTransformEnd",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.runLocalHooks.apply(o,["beforeModifyTransformEnd"].concat(t))}),this.transformation.addLocalHook("afterTransformEnd",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.runLocalHooks.apply(o,["afterModifyTransformEnd"].concat(t))}),this.transformation.addLocalHook("insertRowRequire",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.runLocalHooks.apply(o,["insertRowRequire"].concat(t))}),this.transformation.addLocalHook("insertColRequire",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.runLocalHooks.apply(o,["insertColRequire"].concat(t))})}var t,n,o;return t=e,(n=[{key:"getSelectedRange",value:function(){return this.selectedRange}},{key:"begin",value:function(){this.inProgress=!0}},{key:"finish",value:function(){this.runLocalHooks("afterSelectionFinished",Array.from(this.selectedRange)),this.inProgress=!1}},{key:"isInProgress",value:function(){return this.inProgress}},{key:"setRangeStart",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="multiple"===this.settings.selectionMode,i=it(t)?Oh():t,a=e.row<0,r=e.col<0,l=a&&r;this.selectedByCorner=l,this.runLocalHooks("beforeSetRangeStart".concat(n?"Only":""),e),(!o||o&&!i&&it(t))&&this.selectedRange.clear(),this.selectedRange.add(e),0===this.getLayerLevel()&&(this.selectedByRowHeader.clear(),this.selectedByColumnHeader.clear()),!l&&r&&this.selectedByRowHeader.add(this.getLayerLevel()),!l&&a&&this.selectedByColumnHeader.add(this.getLayerLevel()),n||this.setRangeEnd(e)}},{key:"setRangeStartOnly",value:function(e,t){this.setRangeStart(e,t,!0)}},{key:"setRangeEnd",value:function(e){if(!this.selectedRange.isEmpty()){this.runLocalHooks("beforeSetRangeEnd",e),this.begin();var t=this.selectedRange.current();"single"!==this.settings.selectionMode&&t.setTo(new qn(e.row,e.col)),this.highlight.getCell().clear(),this.highlight.isEnabledFor(Rh,t.highlight)&&this.highlight.getCell().add(this.selectedRange.current().highlight).commit().adjustCoordinates(t);var n=this.getLayerLevel();n<this.highlight.layerLevel&&(K(this.highlight.getAreas(),function(e){e.clear()}),K(this.highlight.getHeaders(),function(e){e.clear()}),K(this.highlight.getActiveHeaders(),function(e){e.clear()})),this.highlight.useLayerLevel(n);var o=this.highlight.createOrGetArea(),i=this.highlight.createOrGetHeader(),a=this.highlight.createOrGetActiveHeader();if(o.clear(),i.clear(),a.clear(),this.highlight.isEnabledFor(Ih,t.highlight)&&(this.isMultiple()||n>=1)&&(o.add(t.from).add(t.to).commit(),1===n)){var r=this.selectedRange.previous();this.highlight.useLayerLevel(n-1).createOrGetArea().add(r.from).commit().adjustCoordinates(r),this.highlight.useLayerLevel(n)}if(this.highlight.isEnabledFor(Ph,t.highlight)){var l=0===this.tableProps.countRowsTranslated(),s=0===this.tableProps.countColsTranslated(),c=t;if((l||s)&&(c=t.clone()),l&&(c.from.row=-1),s&&(c.from.col=-1),"single"===this.settings.selectionMode?(this.isSelectedByAnyHeader()&&c.from.normalize(),i.add(c.from).commit()):i.add(c.from).add(c.to).commit(),this.isEntireRowSelected())this.tableProps.countCols()===t.getWidth()&&a.add(new qn(t.from.row,-1)).add(new qn(t.to.row,-1)).commit();if(this.isEntireColumnSelected())this.tableProps.countRows()===t.getHeight()&&a.add(new qn(-1,t.from.col)).add(new qn(-1,t.to.col)).commit()}this.runLocalHooks("afterSetRangeEnd",e)}}},{key:"isMultiple",value:function(){var e=we(!this.selectedRange.current().isSingle());return this.runLocalHooks("afterIsMultipleSelection",e),e.value}},{key:"transformStart",value:function(e,t,n){this.setRangeStart(this.transformation.transformStart(e,t,n))}},{key:"transformEnd",value:function(e,t){this.setRangeEnd(this.transformation.transformEnd(e,t))}},{key:"getLayerLevel",value:function(){return this.selectedRange.size()-1}},{key:"isSelected",value:function(){return!this.selectedRange.isEmpty()}},{key:"isSelectedByRowHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner(e)&&this.isEntireRowSelected(e)}},{key:"isEntireRowSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return-1===e?this.selectedByRowHeader.size>0:this.selectedByRowHeader.has(e)}},{key:"isSelectedByColumnHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner()&&this.isEntireColumnSelected(e)}},{key:"isEntireColumnSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return-1===e?this.selectedByColumnHeader.size>0:this.selectedByColumnHeader.has(e)}},{key:"isSelectedByAnyHeader",value:function(){return this.isSelectedByRowHeader(-1)||this.isSelectedByColumnHeader(-1)||this.isSelectedByCorner()}},{key:"isSelectedByCorner",value:function(){return this.selectedByCorner}},{key:"inInSelection",value:function(e){return this.selectedRange.includes(e)}},{key:"isCellCornerVisible",value:function(){return this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&!this.isMultiple()}},{key:"isAreaCornerVisible",value:function(e){return(!Number.isInteger(e)||e===this.getLayerLevel())&&(this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&this.isMultiple())}},{key:"clear",value:function(){this.selectedRange.clear(),this.highlight.clear()}},{key:"deselect",value:function(){this.isSelected()&&(this.inProgress=!1,this.clear(),this.runLocalHooks("afterDeselect"))}},{key:"selectAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.tableProps.countRows(),o=this.tableProps.countCols();if(e||t||0!==n&&0!==o){var i=new qn(t?-1:0,e?-1:0);this.clear(),this.setRangeStartOnly(i),this.selectedByRowHeader.add(this.getLayerLevel()),this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(new qn(n-1,o-1)),this.finish()}}},{key:"selectCells",value:function(e){var t,n,o=this,i=Yf(e);if(i===Uf)return!1;if(i===$f)throw new Error(Ze(jf||(t=["Unsupported format of the selection ranges was passed. To select cells pass \n        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd, \n        columnEnd/columnPropEnd]]) or as an array of CellRange objects."],(n=["Unsupported format of the selection ranges was passed. To select cells pass\\x20\n        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd,\\x20\n        columnEnd/columnPropEnd]]) or as an array of CellRange objects."])||(n=t.slice(0)),jf=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}})))));var a=Xf(i,{propToCol:function(e){return o.tableProps.propToCol(e)},keepDirection:!0}),r=this.tableProps.countRows(),l=this.tableProps.countCols(),s=!e.some(function(e){var t=Zf(a(e),4),n=t[0],o=t[1],i=t[2],s=t[3];return!(Qf(n,r)&&Qf(o,l)&&Qf(i,r)&&Qf(s,l))});return s&&(this.clear(),K(e,function(e){var t=Zf(a(e),4),n=t[0],i=t[1],r=t[2],l=t[3];o.setRangeStartOnly(new qn(n,i),!1),o.setRangeEnd(new qn(r,l)),o.finish()})),s}},{key:"selectColumns",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o="string"==typeof e?this.tableProps.propToCol(e):e,i="string"==typeof t?this.tableProps.propToCol(t):t,a=this.tableProps.countCols(),r=this.tableProps.countRows(),l=Qf(o,a)&&Qf(i,a);return l&&(this.setRangeStartOnly(new qn(n,o)),this.setRangeEnd(new qn(r-1,i)),this.finish()),l}},{key:"selectRows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=this.tableProps.countRows(),i=this.tableProps.countCols(),a=Qf(e,o)&&Qf(t,o);return a&&(this.setRangeStartOnly(new qn(e,n)),this.setRangeEnd(new qn(t,i-1)),this.finish()),a}},{key:"refresh",value:function(){if(this.highlight.getCustomSelections().forEach(function(e){e.commit()}),this.isSelected()){var e=this.highlight.getCell(),t=this.getLayerLevel();e.commit().adjustCoordinates(this.selectedRange.current());for(var n=0;n<this.selectedRange.size();n+=1){this.highlight.useLayerLevel(n);var o=this.highlight.createOrGetArea(),i=this.highlight.createOrGetHeader(),a=this.highlight.createOrGetActiveHeader();o.commit(),i.commit(),a.commit()}this.highlight.useLayerLevel(t)}}}])&&tp(t.prototype,n),o&&tp(t,o),e}();he(np,cc);var op=np,ip=(n("KHxr"),/^(\r\n|\n\r|\r|\n)/),ap=/^[^\t\r\n]+/,rp=/^\t/;function lp(e){var t,n,o,i,a,r="";for(t=0,n=e.length;t<n;t+=1){for(i=e[t].length,o=0;o<i;o+=1)o>0&&(r+="\t"),"string"==typeof(a=e[t][o])?a.indexOf("\n")>-1?r+='"'.concat(a.replace(/"/g,'""'),'"'):r+=a:r+=null===a||void 0===a?"":a;t!==n-1&&(r+="\n")}return r}function sp(e){"@babel/helpers - typeof";return(sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cp(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var up=oc("copyable",!1),dp=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.tableMeta=o,this.dataSource=n,this.duckSchema=this.dataSource&&this.dataSource[0]?re(this.dataSource[0]):{},this.colToPropCache=void 0,this.propToColCache=void 0,this.createMap()}var t,n,o;return t=e,o=[{key:"DESTINATION_RENDERER",get:function(){return 1}},{key:"DESTINATION_CLIPBOARD_GENERATOR",get:function(){return 2}}],(n=[{key:"createMap",value:function(){var e=this.getSchema();if(void 0===e)throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");var t,n=this.tableMeta.columns;if(this.colToPropCache=[],this.propToColCache=new Map,n){var o=0,i=0,a=!1;if("function"==typeof n){var r=ge(e);o=r>0?r:this.countFirstRowKeys(),a=!0}else{var l=this.tableMeta.maxCols;o=Math.min(l,n.length)}for(t=0;t<o;t++){var s=a?n(t):n[t];if(pe(s)){if(void 0!==s.data){var c=a?i:t;this.colToPropCache[c]=s.data,this.propToColCache.set(s.data,c)}i+=1}}}else this.recursiveDuckColumns(e)}},{key:"countFirstRowKeys",value:function(){return ac(this.dataSource)}},{key:"recursiveDuckColumns",value:function(e,t,n){var o,i=this,a=t,r=n;return void 0===a&&(a=0,r=""),"object"!==sp(e)||Array.isArray(e)||ve(e,function(e,t){null===e?(o=r+t,i.colToPropCache.push(o),i.propToColCache.set(o,a),a+=1):a=i.recursiveDuckColumns(e,a,"".concat(t,"."))}),a}},{key:"colToProp",value:function(e){if(!1===Number.isInteger(e))return e;var t=this.instance.toPhysicalColumn(e);return null===t?e:this.colToPropCache&&ot(this.colToPropCache[t])?this.colToPropCache[t]:t}},{key:"propToCol",value:function(e){var t=this.propToColCache.get(e);if(ot(t))return this.instance.toVisualColumn(t);var n=this.instance.toVisualColumn(e);return null===n?e:n}},{key:"getSchema",value:function(){var e=this.tableMeta.dataSchema;return e?"function"==typeof e?e():e:this.duckSchema}},{key:"createRow",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,i=this.instance.countSourceRows(),a=i,r=0,l=e;if(("number"!=typeof l||l>=i)&&(l=i),l<this.instance.countRows()&&(a=this.instance.toPhysicalRow(l)),!1===this.instance.runHooks("beforeCreateRow",l,n,o)||null===a)return 0;for(var s=this.tableMeta.maxRows,c=this.instance.countCols(),u=[],d=function(){var e=null;"array"===t.instance.dataType?t.tableMeta.dataSchema?e=ue(t.getSchema()):(e=[],Nl(c-1,function(){return e.push(null)})):"function"===t.instance.dataType?e=t.tableMeta.dataSchema(l+r):ce(e={},t.getSchema()),u.push(e),r+=1};r<n&&i+r<s;)d();return this.instance.rowIndexMapper.insertIndexes(l,r),this.spliceData.apply(this,[a,0].concat(u)),this.instance.runHooks("afterCreateRow",l,r,o),this.instance.forceFullRender=!0,r}},{key:"createCol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if(!this.instance.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var o=this.dataSource,i=this.tableMeta.maxCols,a=e;if(("number"!=typeof a||a>=this.instance.countSourceCols())&&(a=this.instance.countSourceCols()),!1===this.instance.runHooks("beforeCreateCol",a,t,n))return 0;var r=this.instance.countSourceCols();a<this.instance.countCols()&&(r=this.instance.toPhysicalColumn(a));for(var l=this.instance.countSourceRows(),s=this.instance.countCols(),c=0,u=r;c<t&&s<i;){if("number"!=typeof a||a>=s)if(l>0)for(var d=0;d<l;d+=1)void 0===o[d]&&(o[d]=[]),o[d].push(null);else o.push([null]);else for(var h=0;h<l;h++)o[h].splice(u,0,null);c+=1,u+=1,s+=1}return this.instance.columnIndexMapper.insertIndexes(a,c),this.instance.runHooks("afterCreateCol",a,c,n),this.instance.forceFullRender=!0,c}},{key:"removeRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,o=Number.isInteger(e)?e:-t,i=this.visualRowsToPhysical(o,t),a=this.instance.countSourceRows();if(o=(a+o)%a,!1===this.instance.runHooks("beforeRemoveRow",o,i.length,i,n))return!1;var r=this.dataSource,l=i.length,s=this.filterData(o,l,i);if(s&&(r.length=0,Array.prototype.push.apply(r,s)),o<this.instance.countRows()){this.instance.rowIndexMapper.removeIndexes(i);var c=ot(this.tableMeta.columns)||ot(this.tableMeta.dataSchema);0===this.instance.rowIndexMapper.getNotTrimmedIndexesLength()&&!1===c&&this.instance.columnIndexMapper.setIndexesSequence([])}return this.instance.runHooks("afterRemoveRow",o,l,i,n),this.instance.forceFullRender=!0,!0}},{key:"removeCol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if("object"===this.instance.dataType||this.tableMeta.columns)throw new Error("cannot remove column with object data source or columns option specified");var o="number"!=typeof e?-t:e;o=(this.instance.countCols()+o)%this.instance.countCols();var i=this.visualColumnsToPhysical(o,t),a=i.slice(0).sort(function(e,t){return t-e});if(!1===this.instance.runHooks("beforeRemoveCol",o,t,i,n))return!1;for(var r=!0,l=a.length,s=this.dataSource,c=0;c<l;c++)r&&i[0]!==i[c]-c&&(r=!1);if(r)for(var u=0,d=this.instance.countSourceRows();u<d;u++)s[u].splice(i[0],t);else for(var h=0,f=this.instance.countSourceRows();h<f;h++)for(var p=0;p<l;p++)s[h].splice(a[p],1);return o<this.instance.countCols()&&(this.instance.columnIndexMapper.removeIndexes(i),0===this.instance.columnIndexMapper.getNotTrimmedIndexesLength()&&this.instance.rowIndexMapper.setIndexesSequence([])),this.instance.runHooks("afterRemoveCol",o,t,i,n),this.instance.forceFullRender=!0,!0}},{key:"spliceCol",value:function(e,t,n){for(var o=this.instance.getDataAtCol(e),i=o.slice(t,t+n),a=o.slice(t+n),r=arguments.length,l=new Array(r>3?r-3:0),s=3;s<r;s++)l[s-3]=arguments[s];$(l,a);for(var c=0;c<n;)l.push(null),c+=1;return j(l),this.instance.populateFromArray(t,e,l,null,null,"spliceCol"),i}},{key:"spliceRow",value:function(e,t,n){for(var o=this.instance.getSourceDataAtRow(e),i=o.slice(t,t+n),a=o.slice(t+n),r=arguments.length,l=new Array(r>3?r-3:0),s=3;s<r;s++)l[s-3]=arguments[s];$(l,a);for(var c=0;c<n;)l.push(null),c+=1;return this.instance.populateFromArray(e,t,[l],null,null,"spliceRow"),i}},{key:"spliceData",value:function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var a;!1!==this.instance.runHooks("beforeDataSplice",e,t,o)&&(a=this.dataSource).splice.apply(a,[e,t].concat(o))}},{key:"filterData",value:function(e,t,n){if(!1!==this.instance.runHooks("beforeDataFilter",e,t,n))return this.dataSource.filter(function(e,t){return-1===n.indexOf(t)})}},{key:"get",value:function(e,t){var n=this.instance.toPhysicalRow(e),o=this.dataSource[n],i=this.instance.runHooks("modifyRowData",n),a=null;if((o=isNaN(i)?i:o)&&o.hasOwnProperty&&_e(o,t))a=o[t];else if("string"==typeof t&&t.indexOf(".")>-1){var r=t.split("."),l=o;if(!l)return null;for(var s=0,c=r.length;s<c;s++)if(void 0===(l=l[r[s]]))return null;a=l}else"function"==typeof t&&(a=t(this.dataSource.slice(n,n+1)[0]));if(this.instance.hasHook("modifyData")){var u=we(a);this.instance.runHooks("modifyData",n,this.propToCol(t),u,"get"),u.isTouched()&&(a=u.value)}return a}},{key:"getCopyable",value:function(e,t){return up.call(this.instance,e,this.propToCol(t))?this.get(e,t):""}},{key:"set",value:function(e,t,n){var o=this.instance.toPhysicalRow(e),i=n,a=this.dataSource[o],r=this.instance.runHooks("modifyRowData",o);if(a=isNaN(r)?r:a,this.instance.hasHook("modifyData")){var l=we(i);this.instance.runHooks("modifyData",o,this.propToCol(t),l,"set"),l.isTouched()&&(i=l.value)}if(a&&a.hasOwnProperty&&_e(a,t))a[t]=i;else if("string"==typeof t&&t.indexOf(".")>-1){var s,c=t.split("."),u=a,d=0;for(d=0,s=c.length-1;d<s;d++)void 0===u[c[d]]&&(u[c[d]]={}),u=u[c[d]];u[c[d]]=i}else"function"==typeof t?t(this.dataSource.slice(o,o+1)[0],i):a[t]=i}},{key:"visualRowsToPhysical",value:function(e,t){for(var n,o=this.instance.countSourceRows(),i=[],a=(o+e)%o,r=t;a<o&&r;)n=this.instance.toPhysicalRow(a),i.push(n),r-=1,a+=1;return i}},{key:"visualColumnsToPhysical",value:function(e,t){for(var n=this.instance.countCols(),o=[],i=(n+e)%n,a=t;i<n&&a;){var r=this.instance.toPhysicalColumn(i);o.push(r),a-=1,i+=1}return o}},{key:"clear",value:function(){for(var e=0;e<this.instance.countSourceRows();e++)for(var t=0;t<this.instance.countCols();t++)this.set(e,this.colToProp(t),"")}},{key:"getLength",value:function(){var e,t=this.tableMeta.maxRows;e=t<0||0===t?0:t||1/0;var n=this.instance.rowIndexMapper.getNotTrimmedIndexesLength();return Math.min(n,e)}},{key:"getAll",value:function(){var t={row:0,col:0},n={row:Math.max(this.instance.countRows()-1,0),col:Math.max(this.instance.countCols()-1,0)};return t.row-n.row!=0||this.instance.countSourceRows()?this.getRange(t,n,e.DESTINATION_RENDERER):[]}},{key:"countCachedColumns",value:function(){return this.colToPropCache.length}},{key:"getRange",value:function(t,n,o){var i,a,r,l=[],s=this.tableMeta.maxRows,c=this.tableMeta.maxCols;if(0===s||0===c)return[];var u=o===e.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get,d=Math.min(Math.max(s-1,0),Math.max(t.row,n.row)),h=Math.min(Math.max(c-1,0),Math.max(t.col,n.col));for(i=Math.min(t.row,n.row);i<=d;i++){r=[];var f=i>=0?this.instance.toPhysicalRow(i):i;for(a=Math.min(t.col,n.col);a<=h&&null!==f;a++)r.push(u.call(this,i,this.colToProp(a)));null!==f&&l.push(r)}return l}},{key:"getText",value:function(t,n){return lp(this.getRange(t,n,e.DESTINATION_RENDERER))}},{key:"getCopyableText",value:function(t,n){return lp(this.getRange(t,n,e.DESTINATION_CLIPBOARD_GENERATOR))}},{key:"destroy",value:function(){this.instance=null,this.tableMeta=null,this.dataSource=null,this.duckSchema=null,this.colToPropCache.length=0,this.propToColCache.clear(),this.propToColCache=void 0}}])&&cp(t.prototype,n),o&&cp(t,o),e}();function hp(e,t){var n="string"==typeof e?Ks(e):e;if(pe(n)){var o=pe(t),i={};return ve(n,function(e,n){"CELL_TYPE"===n||o&&(!o||_e(t,n))||(i[n]=e)}),i}}function fp(e){return Number.isInteger(e)&&e>=0}function pp(e,t){if(!e())throw new Error("Assertion failed: ".concat(t))}function mp(e){return null===e||void 0===e}function vp(e){"@babel/helpers - typeof";return(vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bp=function(){return{licenseKey:void 0,data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:void 0,colHeaders:null,colWidths:void 0,rowHeights:void 0,columns:void 0,cells:void 0,cell:[],comments:!1,customBorders:!1,minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,allowInsertRow:!0,allowInsertColumn:!0,allowRemoveRow:!0,allowRemoveColumn:!0,selectionMode:"multiple",fillHandle:{autoInsertRow:!1},fixedRowsTop:0,fixedRowsBottom:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{col:0,row:1},tabMoves:{row:0,col:1},autoWrapRow:!0,autoWrapCol:!0,persistentState:void 0,currentRowClassName:void 0,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",activeHeaderClassName:"ht__active_highlight",className:void 0,tableClassName:void 0,stretchH:"none",isEmptyRow:function(e){var t,n,o,i;for(t=0,n=this.countCols();t<n;t++)if(!1===at(o=this.getDataAtCell(e,t)))return"object"===vp(o)&&(i=this.getCellMeta(e,t),fe(this.getSchema()[i.prop],o));return!0},isEmptyCol:function(e){var t,n;for(t=0,n=this.countRows();t<n;t++)if(!1===at(this.getDataAtCell(t,e)))return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,allowEmpty:!0,invalidCellClassName:"htInvalid",placeholder:void 0,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",renderer:void 0,commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,skipColumnOnPaste:!1,skipRowOnPaste:!1,search:!1,type:"text",copyable:!0,editor:void 0,visibleRows:10,trimDropdown:!0,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,copyPaste:!0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,mergeCells:!1,multiColumnSorting:void 0,viewportRowRenderingOffset:"auto",viewportColumnRenderingOffset:"auto",validator:void 0,disableVisualSelection:!1,manualColumnFreeze:void 0,trimWhitespace:!0,source:void 0,title:void 0,checkedTemplate:void 0,uncheckedTemplate:void 0,label:void 0,numericFormat:void 0,language:"en-US",selectOptions:void 0,autoColumnSize:void 0,autoRowSize:void 0,dateFormat:"DD/MM/YYYY",correctFormat:!1,defaultDate:void 0,strict:void 0,allowHtml:!1,renderAllRows:void 0,preventOverflow:!1,preventWheel:!1,bindRowsWithHeaders:void 0,collapsibleColumns:void 0,columnSummary:void 0,dropdownMenu:void 0,filters:void 0,formulas:void 0,headerTooltips:void 0,hiddenColumns:void 0,hiddenRows:void 0,nestedHeaders:void 0,trimRows:void 0,rowHeaderWidth:void 0,columnHeaderHeight:void 0,observeChanges:void 0,sortByRelevance:!0,filter:!0,filteringCaseSensitive:!1,dragToScroll:!0,nestedRows:void 0}};function yp(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var wp=function(){function e(){gp(this,e),this.metaCtor=function e(){gp(this,e)},this.meta=this.metaCtor.prototype,se(this.meta,bp())}var t,n,o;return t=e,(n=[{key:"getMetaConstructor",value:function(){return this.metaCtor}},{key:"getMeta",value:function(){return this.meta}},{key:"updateMeta",value:function(e){se(this.meta,e),se(this.meta,hp(e.type,e))}}])&&yp(t.prototype,n),o&&yp(t,o),e}();function _p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Cp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.getMetaConstructor();this.meta=new n}var t,n,o;return t=e,(n=[{key:"getMeta",value:function(){return this.meta}},{key:"updateMeta",value:function(e){se(this.meta,e),se(this.meta,hp(e.type,e))}}])&&_p(t.prototype,n),o&&_p(t,o),e}();function kp(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var xp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.valueFactory=t,this.data=[],this.index=[],this.holes=new Set}var t,n,o;return t=e,(n=[{key:"obtain",value:function(e){pp(function(){return fp(e)},"Expecting an unsigned number.");var t,n=this._getStorageIndexByKey(e);if(n>=0)void 0===(t=this.data[n])&&(t=this.valueFactory(e),this.data[n]=t);else if(t=this.valueFactory(e),this.holes.size>0){var o=this.holes.values().next().value;this.holes.delete(o),this.data[o]=t,this.index[e]=o}else this.data.push(t),this.index[e]=this.data.length-1;return t}},{key:"insert",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;pp(function(){return fp(e)||mp(e)},"Expecting an unsigned number or null/undefined argument.");for(var o=[],i=this.data.length,a=0;a<n;a++)o.push(i+a),this.data.push(void 0);(t=this.index).splice.apply(t,[mp(e)?this.index.length:e,0].concat(o))}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;pp(function(){return fp(e)||mp(e)},"Expecting an unsigned number or null/undefined argument.");for(var n=this.index.splice(mp(e)?this.index.length-t:e,t),o=0;o<n.length;o++){var i=n[o];"number"==typeof i&&this.holes.add(i)}}},{key:"size",value:function(){return this.data.length-this.holes.size}},{key:"values",value:function(){var e=this;return W(this.data,function(t,n){return!e.holes.has(n)})[Symbol.iterator]()}},{key:"entries",value:function(){for(var e=[],t=0;t<this.data.length;t++){var n=this._getKeyByStorageIndex(t);-1!==n&&e.push([n,this.data[t]])}var o=0;return{next:function(){if(o<e.length){var t=e[o];return o+=1,{value:t,done:!1}}return{done:!0}}}}},{key:"clear",value:function(){this.data=[],this.index=[],this.holes.clear()}},{key:"_getStorageIndexByKey",value:function(e){return this.index.length>e?this.index[e]:-1}},{key:"_getKeyByStorageIndex",value:function(e){return this.index.indexOf(e)}},{key:Symbol.iterator,value:function(){return this.entries()}}])&&kp(t.prototype,n),o&&kp(t,o),e}();function Sp(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Tp=["data","width"],Ep=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalMeta=t,this.metas=new xp(function(){return n._createMeta()})}var t,n,o;return t=e,(n=[{key:"updateMeta",value:function(e,t){var n=this.getMeta(e);se(n,t),se(n,hp(t.type,n))}},{key:"createColumn",value:function(e,t){this.metas.insert(e,t)}},{key:"removeColumn",value:function(e,t){this.metas.remove(e,t)}},{key:"getMeta",value:function(e){return this.metas.obtain(e)}},{key:"getMetaConstructor",value:function(e){return this.metas.obtain(e).constructor}},{key:"clearCache",value:function(){this.metas.clear()}},{key:"_createMeta",value:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];function n(){}le(n,e);for(var o=0;o<t.length;o++)n.prototype[t[o]]=void 0;return n}(this.globalMeta.getMetaConstructor(),Tp).prototype}}])&&Sp(t.prototype,n),o&&Sp(t,o),e}();function Op(e){return function(e){if(Array.isArray(e))return Dp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Dp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dp(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ip(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Rp=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.columnMeta=t,this.metas=new xp(function(){return n._createRow()})}var t,n,o;return t=e,(n=[{key:"updateMeta",value:function(e,t,n){var o=this.getMeta(e,t);se(o,n),se(o,hp(n.type,o))}},{key:"createRow",value:function(e,t){this.metas.insert(e,t)}},{key:"createColumn",value:function(e,t){for(var n=0;n<this.metas.size();n++)this.metas.obtain(n).insert(e,t)}},{key:"removeRow",value:function(e,t){this.metas.remove(e,t)}},{key:"removeColumn",value:function(e,t){for(var n=0;n<this.metas.size();n++)this.metas.obtain(n).remove(e,t)}},{key:"getMeta",value:function(e,t,n){var o=this.metas.obtain(e).obtain(t);return void 0===n?o:o[n]}},{key:"setMeta",value:function(e,t,n,o){this.metas.obtain(e).obtain(t)[n]=o}},{key:"removeMeta",value:function(e,t,n){delete this.metas.obtain(e).obtain(t)[n]}},{key:"getMetas",value:function(){for(var e=[],t=Array.from(this.metas.values()),n=0;n<t.length;n++)e.push.apply(e,Op(t[n].values()));return e}},{key:"getMetasAtRow",value:function(e){pp(function(){return fp(e)},"Expecting an unsigned number.");var t=new Map(this.metas);return t.has(e)?Array.from(t.get(e).values()):[]}},{key:"clearCache",value:function(){this.metas.clear()}},{key:"_createRow",value:function(){var e=this;return new xp(function(t){return e._createMeta(t)})}},{key:"_createMeta",value:function(e){return new(this.columnMeta.getMetaConstructor(e))}}])&&Ip(t.prototype,n),o&&Ip(t,o),e}();function Mp(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Pp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalMeta=new wp,this.globalMeta.updateMeta(t),this.tableMeta=new Cp(this.globalMeta),this.columnMeta=new Ep(this.globalMeta),this.cellMeta=new Rp(this.columnMeta)}var t,n,o;return t=e,(n=[{key:"getGlobalMeta",value:function(){return this.globalMeta.getMeta()}},{key:"updateGlobalMeta",value:function(e){this.globalMeta.updateMeta(e)}},{key:"getTableMeta",value:function(){return this.tableMeta.getMeta()}},{key:"updateTableMeta",value:function(e){this.tableMeta.updateMeta(e)}},{key:"getColumnMeta",value:function(e){return this.columnMeta.getMeta(e)}},{key:"updateColumnMeta",value:function(e,t){this.columnMeta.updateMeta(e,t)}},{key:"getCellMeta",value:function(e,t,n){return this.cellMeta.getMeta(e,t,n)}},{key:"setCellMeta",value:function(e,t,n,o){this.cellMeta.setMeta(e,t,n,o)}},{key:"updateCellMeta",value:function(e,t,n){this.cellMeta.updateMeta(e,t,n)}},{key:"removeCellMeta",value:function(e,t,n){this.cellMeta.removeMeta(e,t,n)}},{key:"getCellsMeta",value:function(){return this.cellMeta.getMetas()}},{key:"getCellsMetaAtRow",value:function(e){return this.cellMeta.getMetasAtRow(e)}},{key:"createRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.createRow(e,t)}},{key:"removeRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.removeRow(e,t)}},{key:"createColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.createColumn(e,t),this.columnMeta.createColumn(e,t)}},{key:"removeColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.removeColumn(e,t),this.columnMeta.removeColumn(e,t)}},{key:"clearCellsCache",value:function(){this.cellMeta.clearCache()}},{key:"clearCache",value:function(){this.cellMeta.clearCache(),this.columnMeta.clearCache()}}])&&Mp(t.prototype,n),o&&Mp(t,o),e}();function Ap(e){"@babel/helpers - typeof";return(Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||Vp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Np(e){return function(e){if(Array.isArray(e))return Fp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vp(e,t){if(e){if("string"==typeof e)return Fp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fp(e,t):void 0}}function Fp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Bp=null;function Hp(e,t){var n,o,i,a,r,l,s=this,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=!1,d=this,h=new Gi(d),f=!0;t.language=(r=t.language,Ch(l=Vu(r))||(l=ph,Fu(r)),l);var p,m,v=new Pp(t),b=v.getTableMeta(),y=v.getGlobalMeta(),g=Ql();c===Rs&&(p=this,Is.set(p,!0)),this.rootElement=e,this.rootDocument=e.ownerDocument,this.rootWindow=this.rootDocument.defaultView,this.isDestroyed=!1,this.renderSuspendedCounter=0,this.executionSuspendedCounter=0,m=this.rootDocument,0===Th&&(xh.addEventListener(m,"keydown",function(e){Sh.has(e.keyCode)||Sh.add(e.keyCode)}),xh.addEventListener(m,"keyup",function(e){Sh.has(e.keyCode)&&Sh.delete(e.keyCode)}),xh.addEventListener(m,"visibilitychange",function(){m.hidden&&Sh.clear()}),xh.addEventListener(m.defaultView,"blur",function(){Sh.clear()})),Th+=1,this.container=this.rootDocument.createElement("div"),this.renderCall=!1,e.insertBefore(this.container,e.firstChild),Ms(this)&&_t(t.licenseKey,e),this.guid="ht_".concat(xt()),this.columnIndexMapper=new Nu,this.rowIndexMapper=new Nu,o=new lc(d),this.rootElement.id&&"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid);var w=function(e){var t=e.row,n=e.col;return new qn(t>=0?d.rowIndexMapper.getRenderableFromVisualIndex(t):t,n>=0?d.columnIndexMapper.getRenderableFromVisualIndex(n):n)},_=new op(b,{countCols:function(){return d.countCols()},countRows:function(){return d.countRows()},propToCol:function(e){return n.propToCol(e)},isEditorOpened:function(){return!!d.getActiveEditor()&&d.getActiveEditor().isOpened()},countColsTranslated:function(){return s.view.countRenderableColumns()},countRowsTranslated:function(){return s.view.countRenderableRows()},visualToRenderableCoords:w,renderableToVisualCoords:function(e){var t=e.row,n=e.col;return new qn(t>=0?d.rowIndexMapper.getVisualFromRenderableIndex(t):t,n>=0?d.columnIndexMapper.getVisualFromRenderableIndex(n):n)},isDisabledCellSelection:function(e,t){return d.getCellMeta(e,t).disableVisualSelection}});this.selection=_;var C=function(e){e.hiddenIndexesChanged&&s.selection.refresh()};function k(e,t){var n="className"===e?d.rootElement:d.table;if(f)zt(n,t);else{var o=[],i=[];y[e]&&(o=Array.isArray(y[e])?y[e]:oe(y[e])),t&&(i=Array.isArray(t)?t:oe(t));var a=ee(o,i),r=ee(i,o);a.length&&Wt(n,a),r.length&&zt(n,r)}y[e]=t}function x(){var e=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue:function(){this.validatorsInQueue+=1,e=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(){},checkIfQueueIsEmpty:function(){0===this.validatorsInQueue&&!1===e&&(e=!0,this.onQueueEmpty(this.valid))}}}function S(e,t,o){if(e.length){var i=d.getActiveEditor(),a=!0;if(!1!==d.runHooks("beforeChange",e,t||"edit")){var r,l,s,c=new x;c.onQueueEmpty=function(e){i&&a&&i.cancelChanges(),o(e)};for(var u=e.length-1;u>=0;u--)if(null===e[u])e.splice(u,1);else{var h=Lp(e[u],4),f=h[0],p=h[1],m=h[3],v=n.propToCol(p),y=d.getCellMeta(f,v);"numeric"===y.type&&"string"==typeof m&&((s=m).length>0&&/^\s*[+-.]?\s*(?:(?:\d+(?:(\.|,)\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/.test(s))&&(e[u][3]=(void 0,l=(r=m).replace(",","."),!1===isNaN(parseFloat(l))?parseFloat(l):r)),d.getCellValidator(y)&&(c.addValidatorToQueue(),d.validateCell(e[u][3],y,function(t,n){return function(o){if("boolean"!=typeof o)throw new Error("Validation error: result is not boolean");if(!1===o&&!1===n.allowInvalid){a=!1,e.splice(t,1),n.valid=!0;var i=d.getCell(n.visualRow,n.visualCol);null!==i&&Wt(i,b.invalidCellClassName)}c.removeValidatorFormQueue()}}(u,y),t))}c.checkIfQueueIsEmpty()}else i&&i.cancelChanges()}}function T(e,t){var o=e.length-1;if(!(o<0)){for(;o>=0;o--){var r=!1;if(null!==e[o]){if(null!==e[o][2]&&void 0!==e[o][2]||null!==e[o][3]&&void 0!==e[o][3]){if(b.allowInsertRow)for(;e[o][0]>d.countRows()-1;){var l=n.createRow(void 0,void 0,t);if(!(l>=1)){r=!0;break}v.createRow(null,l)}if("array"===d.dataType&&(!b.columns||0===b.columns.length)&&b.allowInsertColumn)for(;n.propToCol(e[o][1])>d.countCols()-1;){var s=n.createCol(void 0,void 0,t);if(!(s>=1)){r=!0;break}v.createColumn(null,s)}r||n.set(e[o][0],e[o][1],e[o][3])}}else e.splice(o,1)}d.forceFullRender=!0,i.adjustRowsAndCols(),d.runHooks("beforeChangeRender",e,t),a.lockEditor(),d._refreshBorders(null),a.unlockEditor(),d.view.adjustElementsSize(),d.runHooks("afterChange",e,t||"edit");var c=d.getActiveEditor();c&&ot(c.refreshValue)&&c.refreshValue()}}function E(e,t,n){return Array.isArray(e)?e:[[e,t,n]]}this.columnIndexMapper.addLocalHook("cacheUpdated",C),this.rowIndexMapper.addLocalHook("cacheUpdated",C),this.selection.addLocalHook("beforeSetRangeStart",function(e){s.runHooks("beforeSetRangeStart",e)}),this.selection.addLocalHook("beforeSetRangeStartOnly",function(e){s.runHooks("beforeSetRangeStartOnly",e)}),this.selection.addLocalHook("beforeSetRangeEnd",function(e){s.runHooks("beforeSetRangeEnd",e),e.row<0&&(e.row=s.view.wt.wtTable.getFirstVisibleRow()),e.col<0&&(e.col=s.view.wt.wtTable.getFirstVisibleColumn())}),this.selection.addLocalHook("afterSetRangeEnd",function(e){var t=we(!1),n=s.selection.getSelectedRange(),o=n.current(),i=o.from,a=o.to,r=n.size()-1;s.runHooks("afterSelection",i.row,i.col,a.row,a.col,t,r),s.runHooks("afterSelectionByProp",i.row,d.colToProp(i.col),a.row,d.colToProp(a.col),t,r);var l=s.selection.isSelectedByAnyHeader(),c=s.selection.selectedRange.current(),h=!0;u&&(h=!1),t.isTouched()&&(h=!t.value);var f=s.selection.isSelectedByRowHeader(),p=s.selection.isSelectedByColumnHeader();!1!==h&&(l?f?s.view.scrollViewportVertically(d.rowIndexMapper.getRenderableFromVisualIndex(e.row)):p&&s.view.scrollViewportHorizontally(d.columnIndexMapper.getRenderableFromVisualIndex(e.col)):c&&!s.selection.isMultiple()?s.view.scrollViewport(w(c.from)):s.view.scrollViewport(w(e))),f&&p?zt(s.rootElement,["ht__selection--rows","ht__selection--columns"]):f?(Wt(s.rootElement,"ht__selection--columns"),zt(s.rootElement,"ht__selection--rows")):p?(Wt(s.rootElement,"ht__selection--rows"),zt(s.rootElement,"ht__selection--columns")):Wt(s.rootElement,["ht__selection--rows","ht__selection--columns"]),s._refreshBorders(null)}),this.selection.addLocalHook("afterSelectionFinished",function(e){var t=e.length-1,n=e[t],o=n.from,i=n.to;s.runHooks("afterSelectionEnd",o.row,o.col,i.row,i.col,t),s.runHooks("afterSelectionEndByProp",o.row,d.colToProp(o.col),i.row,d.colToProp(i.col),t)}),this.selection.addLocalHook("afterIsMultipleSelection",function(e){var t=s.runHooks("afterIsMultipleSelection",e.value);e.value&&(e.value=t)}),this.selection.addLocalHook("beforeModifyTransformStart",function(e){s.runHooks("modifyTransformStart",e)}),this.selection.addLocalHook("afterModifyTransformStart",function(e,t,n){s.runHooks("afterModifyTransformStart",e,t,n)}),this.selection.addLocalHook("beforeModifyTransformEnd",function(e){s.runHooks("modifyTransformEnd",e)}),this.selection.addLocalHook("afterModifyTransformEnd",function(e,t,n){s.runHooks("afterModifyTransformEnd",e,t,n)}),this.selection.addLocalHook("afterDeselect",function(){a.destroyEditor(),s._refreshBorders(),Wt(s.rootElement,["ht__selection--rows","ht__selection--columns"]),s.runHooks("afterDeselect")}),this.selection.addLocalHook("insertRowRequire",function(e){s.alter("insert_row",e,1,"auto")}),this.selection.addLocalHook("insertColRequire",function(e){s.alter("insert_col",e,1,"auto")}),i={alter:function(e,t){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,s=function(e){if(0===e.length)return[];var t=Np(e);return t.sort(function(e,t){var n=Lp(e,1)[0],o=Lp(t,1)[0];return n===o?0:n>o?1:-1}),z(t,function(e,t){var n=Lp(t,2),o=n[0],i=n[1],a=e[e.length-1],r=Lp(a,2),l=r[0]+r[1];if(o<=l){var s=Math.max(i-(l-o),0);a[1]+=s}else e.push([o,i]);return e},[t[0]])};switch(e){case"insert_row":var c=d.countSourceRows();if(b.maxRows===c)return;if(t=ot(t)?t:c,o=n.createRow(t,a,r)){v.createRow(d.toPhysicalRow(t),a);var u=_.selectedRange.current(),h=null===u||void 0===u?void 0:u.from,f=null===h||void 0===h?void 0:h.row;if(ot(f)&&f>=t){var p=u.to,m=p.row,y=p.col,g=h.col;_.isSelectedByRowHeader()&&(g=-1),_.getSelectedRange().pop(),_.setRangeStartOnly(new qn(f+o,g),!0),_.setRangeEnd(new qn(m+o,y))}else d._refreshBorders()}break;case"insert_col":if(o=n.createCol(t,a,r)){if(v.createColumn(d.toPhysicalColumn(t),a),Array.isArray(b.colHeaders)){var w=[t,0];w.length+=o,Array.prototype.splice.apply(b.colHeaders,w)}var C=_.selectedRange.current(),k=null===C||void 0===C?void 0:C.from,x=null===k||void 0===k?void 0:k.col;if(ot(x)&&x>=t){var S=C.to,T=S.row,E=S.col,O=k.row;_.isSelectedByColumnHeader()&&(O=-1),_.getSelectedRange().pop(),_.setRangeStartOnly(new qn(O,x+o),!0),_.setRangeEnd(new qn(T,E+o))}else d._refreshBorders()}break;case"remove_row":var D=function(e){var t=0;K(e,function(e){var o=Lp(e,2),i=o[0],a=o[1],l=at(i)?d.countRows()-1:Math.max(i-t,0);if(Number.isInteger(i)&&(i=Math.max(i-t,0)),n.removeRow(i,a,r)){v.removeRow(d.toPhysicalRow(l),a);var s=d.countRows(),c=b.fixedRowsTop;c>=l+1&&(b.fixedRowsTop-=Math.min(a,c-l));var u=b.fixedRowsBottom;u&&l>=s-u&&(b.fixedRowsBottom-=Math.min(a,u)),t+=a}})};Array.isArray(t)?D(s(t)):D([[t,a]]),i.adjustRowsAndCols(),d._refreshBorders();break;case"remove_col":var I=function(e){var t=0;K(e,function(e){var o=Lp(e,2),i=o[0],a=o[1],l=at(i)?d.countCols()-1:Math.max(i-t,0),s=d.toPhysicalColumn(l);if(Number.isInteger(i)&&(i=Math.max(i-t,0)),n.removeCol(i,a,r)){v.removeColumn(s,a);var c=b.fixedColumnsLeft;c>=l+1&&(b.fixedColumnsLeft-=Math.min(a,c-l)),Array.isArray(b.colHeaders)&&(void 0===s&&(s=-1),b.colHeaders.splice(s,a)),t+=a}})};Array.isArray(t)?I(s(t)):I([[t,a]]),i.adjustRowsAndCols(),d._refreshBorders();break;default:throw new Error('There is no such action "'.concat(e,'"'))}l||i.adjustRowsAndCols()},adjustRowsAndCols:function(){var e,t=b.minRows,o=b.minSpareRows,i=b.minCols,a=b.minSpareCols;if(t){var r=d.countRows();r<t&&n.createRow(r,t-r,"auto")}if(o){var l=d.countEmptyRows(!0);if(l<o){var s=o-l,c=Math.min(s,b.maxRows-d.countSourceRows());n.createRow(d.countRows(),c,"auto")}}(i||a)&&(e=d.countEmptyCols(!0));var u=d.countCols();if(i&&!b.columns&&u<i){var h=i-u;e+=h,n.createCol(u,h,"auto")}if(a&&!b.columns&&"array"===d.dataType&&e<a){u=d.countCols();var f=a-e,p=Math.min(f,b.maxCols-u);n.createCol(u,p,"auto")}var m=d.countRows(),v=d.countCols();0!==m&&0!==v||_.deselect(),_.isSelected()&&K(_.selectedRange,function(e){var t=!1,n=e.from.row,o=e.from.col,i=e.to.row,a=e.to.col;n>m-1?(t=!0,i>(n=m-1)&&(i=n)):i>m-1&&(t=!0,n>(i=m-1)&&(n=i)),o>v-1?(t=!0,a>(o=v-1)&&(a=o)):a>v-1&&(t=!0,o>(a=v-1)&&(o=a)),t&&d.selectCell(n,o,i,a)}),d.view&&d.view.adjustElementsSize()},populateFromArray:function(e,t,n,o,i,a,r){var l,s,c,u,h,f,p,m,v=[],y={};if(0===(s=t.length))return!1;switch(i){case"shift_down":for(h=n?n.col-e.col+1:0,f=n?n.row-e.row+1:0,c=0,u=(t=nc(t)).length,p=Math.max(u,h);c<p;c++)if(c<u){var g;for(l=0,s=t[c].length;l<f-s;l++)t[c].push(t[c][l%s]);t[c].unshift(e.col+c,e.row,0),(g=d).spliceCol.apply(g,Np(t[c]))}else{var w;t[c%u][0]=e.col+c,(w=d).spliceCol.apply(w,Np(t[c%u]))}break;case"shift_right":for(h=n?n.col-e.col+1:0,f=n?n.row-e.row+1:0,l=0,s=t.length,m=Math.max(s,f);l<m;l++)if(l<s){var _;for(c=0,u=t[l].length;c<h-u;c++)t[l].push(t[l][c%u]);t[l].unshift(e.row+l,e.col,0),(_=d).spliceRow.apply(_,Np(t[l]))}else{var C;t[l%s][0]=e.row+l,(C=d).spliceRow.apply(C,Np(t[l%s]))}break;case"overwrite":default:y.row=e.row,y.col=e.col;var k,x={row:n&&e?n.row-e.row+1:1,col:n&&e?n.col-e.col+1:1},S=0,T=0,E=!0,O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=t[e%t.length];return null!==n?o[n%o.length]:o},D=t.length,I=n?n.row-e.row+1:0;for(s=n?I:Math.max(D,I),l=0;l<s&&!(n&&y.row>n.row&&I>D||!b.allowInsertRow&&y.row>d.countRows()-1||y.row>=b.maxRows);l++){var R=l-S,M=O(R).length,P=n?n.col-e.col+1:0;if(u=n?P:Math.max(M,P),y.col=e.col,k=d.getCellMeta(y.row,y.col),"CopyPaste.paste"!==o&&"Autofill.fill"!==o||!k.skipRowOnPaste){for(T=0,c=0;c<u&&!(n&&y.col>n.col&&P>M||!b.allowInsertColumn&&y.col>d.countCols()-1||y.col>=b.maxCols);c++)if(k=d.getCellMeta(y.row,y.col),"CopyPaste.paste"!==o&&"Autofill.fill"!==o||!k.skipColumnOnPaste)if(k.readOnly&&"UndoRedo.undo"!==o)y.col+=1;else{var A=c-T,L=O(R,A),N=d.getDataAtCell(y.row,y.col),V={row:R,col:A};if("Autofill.fill"===o){var F=d.runHooks("beforeAutofillInsidePopulate",V,a,t,r,{},x);F&&(L=it(F.value)?L:F.value)}if(null!==L&&"object"===Ap(L))if(Array.isArray(L)&&null===N&&(N=[]),null===N||"object"!==Ap(N))E=!1;else fe(re(Array.isArray(N)?N:N[0]||N),re(Array.isArray(L)?L:L[0]||L))?L=ue(L):E=!1;else null!==N&&"object"===Ap(N)&&(E=!1);E&&v.push([y.row,y.col,L]),E=!0,y.col+=1}else T+=1,y.col+=1,u+=1;y.row+=1}else S+=1,y.row+=1,s+=1}d.setDataAtCell(v,null,null,o||"populateFromArray")}}},this.init=function(){o.setData(b.data),d.runHooks("beforeInit"),(Ve()||Be())&&zt(d.rootElement,"mobile"),this.updateSettings(b,!0),this.view=new js(this),a=Tl.getInstance(d,b,_),d.runHooks("init"),this.forceFullRender=!0,this.view.render(),"object"===Ap(f)&&(d.runHooks("afterChange",f[0],f[1]),f=!1),d.runHooks("afterInit")},this.validateCell=function(e,t,n,o){var i,a=d.getCellValidator(t);function r(e){if((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&!0!==t.hidden){var o=t.visualCol,i=t.visualRow,a=d.getCell(i,o,!0);if(a&&"TH"!==a.nodeName){var r=d.rowIndexMapper.getRenderableFromVisualIndex(i),l=d.columnIndexMapper.getRenderableFromVisualIndex(o);d.view.wt.wtSettings.settings.cellRenderer(r,l,a)}n(e)}else n(e)}rt(a)&&(i=a,a=function(e,t){t(i.test(e))}),Rn(a)?(e=d.runHooks("beforeValidate",e,t.visualRow,t.prop,o),d._registerImmediate(function(){a.call(t,e,function(n){d&&(n=d.runHooks("afterValidate",n,e,t.visualRow,t.prop,o),t.valid=n,r(n),d.runHooks("postAfterValidate",n,e,t.visualRow,t.prop,o))})})):d._registerImmediate(function(){t.valid=!0,r(t.valid,!1)})},this.setDataAtCell=function(e,t,i,a){var r,l,s,c=E(e,t,i),u=[],h=a;for(r=0,l=c.length;r<l;r++){if("object"!==Ap(c[r]))throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof c[r][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");s=c[r][1]>=this.countCols()?c[r][1]:n.colToProp(c[r][1]),u.push([c[r][0],s,o.getAtCell(this.toPhysicalRow(c[r][0]),c[r][1]),c[r][2]])}h||"object"!==Ap(e)||(h=t),d.runHooks("afterSetDataAtCell",u,h),S(u,h,function(){T(u,h)})},this.setDataAtRowProp=function(e,t,n,i){var a,r,l=E(e,t,n),s=[],c=i;for(a=0,r=l.length;a<r;a++)s.push([l[a][0],l[a][1],o.getAtCell(this.toPhysicalRow(l[a][0]),l[a][1]),l[a][2]]);c||"object"!==Ap(e)||(c=t),d.runHooks("afterSetDataAtRowProp",s,c),S(s,c,function(){T(s,c)})},this.listen=function(){d&&!d.isListening()&&(Bp=d.guid,d.runHooks("afterListen"))},this.unlisten=function(){this.isListening()&&(Bp=null,d.runHooks("afterUnlisten"))},this.isListening=function(){return Bp===d.guid},this.destroyEditor=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d._refreshBorders(e,t)},this.populateFromArray=function(e,t,n,o,a,r,l,s,c){if("object"!==Ap(n)||"object"!==Ap(n[0]))throw new Error("populateFromArray parameter `input` must be an array of arrays");var u="number"==typeof o?new qn(o,a):null;return i.populateFromArray(new qn(e,t),n,u,r,l,s,c)},this.spliceCol=function(e,t,o){for(var i,a=arguments.length,r=new Array(a>3?a-3:0),l=3;l<a;l++)r[l-3]=arguments[l];return(i=n).spliceCol.apply(i,[e,t,o].concat(r))},this.spliceRow=function(e,t,o){for(var i,a=arguments.length,r=new Array(a>3?a-3:0),l=3;l<a;l++)r[l-3]=arguments[l];return(i=n).spliceRow.apply(i,[e,t,o].concat(r))},this.getSelected=function(){if(_.isSelected())return q(_.getSelectedRange(),function(e){var t=e.from,n=e.to;return[t.row,t.col,n.row,n.col]})},this.getSelectedLast=function(){var e,t=this.getSelected();return t&&t.length>0&&(e=t[t.length-1]),e},this.getSelectedRange=function(){if(_.isSelected())return Array.from(_.getSelectedRange())},this.getSelectedRangeLast=function(){var e,t=this.getSelectedRange();return t&&t.length>0&&(e=t[t.length-1]),e},this.emptySelectedCells=function(e){var t=this;if(_.isSelected()&&0!==this.countRows()&&0!==this.countCols()){var n=[];K(_.getSelectedRange(),function(e){var o=e.getTopLeftCorner(),i=e.getBottomRightCorner();Nl(o.row,i.row,function(e){Nl(o.col,i.col,function(o){t.getCellMeta(e,o).readOnly||n.push([e,o,null])})})}),n.length>0&&this.setDataAtCell(n,e)}},this.isRenderSuspended=function(){return this.renderSuspendedCounter>0},this.suspendRender=function(){this.renderSuspendedCounter+=1},this.resumeRender=function(){var e=this.renderSuspendedCounter-1;this.renderSuspendedCounter=Math.max(e,0),this.isRenderSuspended()||e!==this.renderSuspendedCounter||(this.renderCall?this.render():this._refreshBorders(null))},this.render=function(){this.view&&(this.renderCall=!0,this.forceFullRender=!0,this.isRenderSuspended()||(a.lockEditor(),this._refreshBorders(null),a.unlockEditor()))},this.batchRender=function(e){this.suspendRender();var t=e();return this.resumeRender(),t},this.isExecutionSuspended=function(){return this.executionSuspendedCounter>0},this.suspendExecution=function(){this.executionSuspendedCounter+=1,this.columnIndexMapper.suspendOperations(),this.rowIndexMapper.suspendOperations()},this.resumeExecution=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.executionSuspendedCounter-1;this.executionSuspendedCounter=Math.max(t,0),(!this.isExecutionSuspended()&&t===this.executionSuspendedCounter||e)&&(this.columnIndexMapper.resumeOperations(),this.rowIndexMapper.resumeOperations())},this.batchExecution=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.suspendExecution();var n=e();return this.resumeExecution(t),n},this.batch=function(e){this.suspendRender(),this.suspendExecution();var t=e();return this.resumeExecution(),this.resumeRender(),t},this.refreshDimensions=function(){if(d.view){var e=d.view.getLastSize(),t=e.width,n=e.height,o=d.rootElement.getBoundingClientRect(),i=o.width,a=o.height,r=i!==t||a!==n;!1===d.runHooks("beforeRefreshDimensions",{width:t,height:n},{width:i,height:a},r)||((r||d.view.wt.wtOverlays.scrollableElement===d.rootWindow)&&(d.view.setLastSize(i,a),d.render()),d.runHooks("afterRefreshDimensions",{width:t,height:n},{width:i,height:a},r))}},this.loadData=function(e){if(Array.isArray(b.dataSchema)?d.dataType="array":Rn(b.dataSchema)?d.dataType="function":d.dataType="object",n&&n.destroy(),n=new dp(d,e,b),"object"===Ap(e)&&null!==e)e.push&&e.splice||(e=[e]);else{if(null!==e)throw new Error("loadData only accepts array of objects or array of arrays (".concat(Ap(e)," given)"));var t,a=n.getSchema();e=[];var r,l=0;for(l=0,r=b.startRows;l<r;l++)if("object"!==d.dataType&&"function"!==d.dataType||!b.dataSchema)if("array"===d.dataType)t=ue(a[0]),e.push(t);else{t=[];for(var s=0,c=b.startCols;s<c;s++)t.push(null);e.push(t)}else t=ue(a),e.push(t)}Array.isArray(e[0])&&(d.dataType="array"),b.data=e,d.runHooks("beforeLoadData",e,f),n.dataSource=e,o.data=e,o.dataType=d.dataType,o.colToProp=n.colToProp.bind(n),o.propToCol=n.propToCol.bind(n),o.countCachedColumns=n.countCachedColumns.bind(n),v.clearCellsCache(),d.initIndexMappers(),i.adjustRowsAndCols(),d.runHooks("afterLoadData",e,f),f?f=[null,"loadData"]:(d.runHooks("afterChange",null,"loadData"),d.render())},this.initIndexMappers=function(){var e=b.columns,t=0;if(Array.isArray(e))t=e.length;else if(Rn(e))if("array"===d.dataType)for(var o=this.countSourceCols(),i=0;i<o;i+=1)e(i)&&(t+=1);else"object"!==d.dataType&&"function"!==d.dataType||(t=n.colToPropCache.length);else if(ot(b.dataSchema)){var a=n.getSchema();t=Array.isArray(a)?a.length:ge(a)}else t=this.countSourceCols();this.columnIndexMapper.initToLength(t),this.rowIndexMapper.initToLength(this.countSourceRows())},this.getData=function(e,t,o,i){return it(e)?n.getAll():n.getRange(new qn(e,t),new qn(o,i),n.DESTINATION_RENDERER)},this.getCopyableText=function(e,t,o,i){return n.getCopyableText(new qn(e,t),new qn(o,i))},this.getCopyableData=function(e,t){return n.getCopyable(e,n.colToProp(t))},this.getSchema=function(){return n.getSchema()},this.updateSettings=function(e){var t,o,r,l,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=!1;if(ot(e.rows))throw new Error('The "rows" setting is no longer supported. Do you mean startRows, minRows or maxRows?');if(ot(e.cols))throw new Error('The "cols" setting is no longer supported. Do you mean startCols, minCols or maxCols?');if(ot(e.ganttChart))throw new Error('Since 8.0.0 the "ganttChart" setting is no longer supported.');for(t in e)"data"!==t&&("language"!==t?"className"===t?k("className",e.className):"tableClassName"===t&&d.table?(k("tableClassName",e.tableClassName),d.view.wt.wtOverlays.syncOverlayTableClassNames()):Jr.getSingleton().isRegistered(t)||Jr.getSingleton().isDeprecated(t)?(Rn(e[t])||Array.isArray(e[t]))&&(e[t].initialHook=!0,d.addHook(t,e[t])):!s&&_e(e,t)&&(y[t]=e[t]):(r=e.language,void 0,Ch(l=Vu(r))?(d.runHooks("beforeLanguageChange",l),y.language=l,d.runHooks("afterLanguageChange",l)):Fu(r)));void 0===e.data&&void 0===b.data?d.loadData(null):void 0!==e.data?d.loadData(e.data):void 0!==e.columns&&(n.createMap(),d.initIndexMappers());var u=d.countCols(),h=b.columns;if(h&&Rn(h)&&(c=!0),void 0===e.cell&&void 0===e.cells&&void 0===e.columns||v.clearCache(),u>0)for(t=0,o=0;t<u;t++){if(h){var p=c?h(t):h[o];p&&v.updateColumnMeta(o,p)}o+=1}ot(e.cell)&&ve(e.cell,function(e){d.setCellMetaObject(e.row,e.col,e)}),d.runHooks("afterCellMetaReset");var m=d.rootElement.style.height;""!==m&&(m=parseInt(d.rootElement.style.height,10));var g=e.height;(Rn(g)&&(g=g()),s)&&(d.rootElement.getAttribute("style")&&d.rootElement.setAttribute("data-initialstyle",d.rootElement.getAttribute("style")));if(null===g){var w=d.rootElement.getAttribute("data-initialstyle");w&&(w.indexOf("height")>-1||w.indexOf("overflow")>-1)?d.rootElement.setAttribute("style",w):(d.rootElement.style.height="",d.rootElement.style.overflow="")}else void 0!==g&&(d.rootElement.style.height=isNaN(g)?"".concat(g):"".concat(g,"px"),d.rootElement.style.overflow="hidden");if(void 0!==e.width){var _=e.width;Rn(_)&&(_=_()),d.rootElement.style.width=isNaN(_)?"".concat(_):"".concat(_,"px")}s||(d.view&&(d.view.wt.wtViewport.resetHasOversizedColumnHeadersMarked(),d.view.wt.exportSettingsAsClassNames()),d.runHooks("afterUpdateSettings",e)),i.adjustRowsAndCols(),d.view&&!f&&(d.forceFullRender=!0,a.lockEditor(),d._refreshBorders(null),a.unlockEditor()),s||!d.view||""!==m&&""!==g&&void 0!==g||m===g||d.view.wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){var e=d.getSelectedLast();if(b.getValue){if(Rn(b.getValue))return b.getValue.call(d);if(e)return d.getData()[e[0][0]][b.getValue]}else if(e)return d.getDataAtCell(e[0],e[1])},this.getSettings=function(){return b},this.clear=function(){this.selectAll(),this.emptySelectedCells()},this.alter=function(e,t,n,o,a){i.alter(e,t,n,o,a)},this.getCell=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t,i=e;if(t>=0){if(this.columnIndexMapper.isHidden(this.toPhysicalColumn(t)))return null;o=this.columnIndexMapper.getRenderableFromVisualIndex(t)}if(e>=0){if(this.rowIndexMapper.isHidden(this.toPhysicalRow(e)))return null;i=this.rowIndexMapper.getRenderableFromVisualIndex(e)}return null===i||null===o?null:d.view.getCellAtCoords(new qn(i,o),n)},this.getCoords=function(e){var t=this.view.wt.wtTable.getCoords(e);if(null===t)return null;var n=t.row,o=t.col,i=n,a=o;return n>=0&&(i=this.rowIndexMapper.getVisualFromRenderableIndex(n)),o>=0&&(a=this.columnIndexMapper.getVisualFromRenderableIndex(o)),new qn(i,a)},this.colToProp=function(e){return n.colToProp(e)},this.propToCol=function(e){return n.propToCol(e)},this.toVisualRow=function(e){return s.rowIndexMapper.getVisualFromPhysicalIndex(e)},this.toVisualColumn=function(e){return s.columnIndexMapper.getVisualFromPhysicalIndex(e)},this.toPhysicalRow=function(e){return s.rowIndexMapper.getPhysicalFromVisualIndex(e)},this.toPhysicalColumn=function(e){return s.columnIndexMapper.getPhysicalFromVisualIndex(e)},this.getDataAtCell=function(e,t){return n.get(e,n.colToProp(t))},this.getDataAtRowProp=function(e,t){return n.get(e,t)},this.getDataAtCol=function(e){var t;return(t=[]).concat.apply(t,Np(n.getRange(new qn(0,e),new qn(b.data.length-1,e),n.DESTINATION_RENDERER)))},this.getDataAtProp=function(e){var t,o=n.getRange(new qn(0,n.propToCol(e)),new qn(b.data.length-1,n.propToCol(e)),n.DESTINATION_RENDERER);return(t=[]).concat.apply(t,Np(o))},this.getSourceData=function(e,t,n,i){return void 0===e?o.getData():o.getByRange(new qn(e,t),new qn(n,i))},this.getSourceDataArray=function(e,t,n,i){return void 0===e?o.getData(!0):o.getByRange(new qn(e,t),new qn(n,i),!0)},this.getSourceDataAtCol=function(e){return o.getAtColumn(e)},this.setSourceDataAtCell=function(e,t,n,i){var a=E(e,t,n),r=this.hasHook("afterSetSourceDataAtCell"),l=[];r&&K(a,function(e){var t=Lp(e,3),n=t[0],i=t[1],a=t[2];l.push([n,i,o.getAtCell(n,i),a])}),K(a,function(e){var t=Lp(e,3),n=t[0],i=t[1],a=t[2];o.setAtCell(n,i,a)}),r&&this.runHooks("afterSetSourceDataAtCell",l,i),this.render();var s=d.getActiveEditor();s&&ot(s.refreshValue)&&s.refreshValue()},this.getSourceDataAtRow=function(e){return o.getAtRow(e)},this.getSourceDataAtCell=function(e,t){return o.getAtCell(e,t)},this.getDataAtRow=function(e){return n.getRange(new qn(e,0),new qn(e,this.countCols()-1),n.DESTINATION_RENDERER)[0]||[]},this.getDataType=function(e,t,n,o){var i=this,a=void 0===e?[0,0,this.countRows(),this.countCols()]:[e,t,n,o],r=a[0],l=a[1],s=a[2],c=a[3],u=null,d=null;void 0===s&&(s=r),void 0===c&&(c=l);var h="mixed";return Nl(Math.max(Math.min(r,s),0),Math.max(r,s),function(e){var t=!0;return Nl(Math.max(Math.min(l,c),0),Math.max(l,c),function(n){var o=i.getCellMeta(e,n);return d=o.type,u?t=u===d:u=d,t}),h=t?d:"mixed",t}),h},this.removeCellMeta=function(e,t,n){var o=[this.toPhysicalRow(e),this.toPhysicalColumn(t)],i=o[0],a=o[1],r=v.getCellMeta(i,a,n);!1!==d.runHooks("beforeRemoveCellMeta",e,t,n,r)&&(v.removeCellMeta(i,a,n),d.runHooks("afterRemoveCellMeta",e,t,n,r)),r=null},this.spliceCellsMeta=function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if(i.length>0&&!Array.isArray(i[0]))throw new Error("The 3rd argument (cellMetaRows) has to be passed as an array of cell meta objects array.");n>0&&v.removeRow(this.toPhysicalRow(e),n),i.length>0&&K(i.reverse(),function(n){v.createRow(t.toPhysicalRow(e)),K(n,function(n,o){return t.setCellMetaObject(e,o,n)})})},this.setCellMetaObject=function(e,t,n){var o=this;"object"===Ap(n)&&ve(n,function(n,i){o.setCellMeta(e,t,i,n)})},this.setCellMeta=function(e,t,n,o){if(!1!==d.runHooks("beforeSetCellMeta",e,t,n,o)){var i=e,a=t;e<this.countRows()&&(i=this.toPhysicalRow(e)),t<this.countCols()&&(a=this.toPhysicalColumn(t)),v.setCellMeta(i,a,n,o),d.runHooks("afterSetCellMeta",e,t,n,o)}},this.getCellsMeta=function(){return v.getCellsMeta()},this.getCellMeta=function(e,t){var o=this.toPhysicalRow(e),i=this.toPhysicalColumn(t);null===o&&(o=e),null===i&&(i=t);var a=n.colToProp(t),r=v.getCellMeta(o,i);if(r.row=o,r.col=i,r.visualRow=e,r.visualCol=t,r.prop=a,r.instance=d,d.runHooks("beforeGetCellMeta",e,t,r),d.hasHook("beforeGetCellMeta")&&_e(r,"type")&&v.updateCellMeta(o,i,{type:r.type}),r.cells){var l=r.cells(o,i,a);l&&v.updateCellMeta(o,i,l)}return d.runHooks("afterGetCellMeta",e,t,r),r},this.getCellMetaAtRow=function(e){return v.getCellsMetaAtRow(e)},this.isColumnModificationAllowed=function(){return!("object"===d.dataType||b.columns)};var O=oc("renderer");this.getCellRenderer=function(e,t){return ys(O.call(this,e,t))},this.getCellEditor=oc("editor");var D=oc("validator");this.getCellValidator=function(e,t){var n=D.call(this,e,t);return"string"==typeof n&&(n=Ss(n)),n},this.validateCells=function(e){this._validateCells(e)},this.validateRows=function(e,t){if(!Array.isArray(e))throw new Error("validateRows parameter `rows` must be an array");this._validateCells(t,e)},this.validateColumns=function(e,t){if(!Array.isArray(e))throw new Error("validateColumns parameter `columns` must be an array");this._validateCells(t,void 0,e)},this._validateCells=function(e,t,n){var o=new x;e&&(o.onQueueEmpty=e);for(var i=d.countRows()-1;i>=0;)if(void 0===t||-1!==t.indexOf(i)){for(var a=d.countCols()-1;a>=0;)void 0===n||-1!==n.indexOf(a)?(o.addValidatorToQueue(),d.validateCell(d.getDataAtCell(i,a),d.getCellMeta(i,a),function(e){if("boolean"!=typeof e)throw new Error("Validation error: result is not boolean");!1===e&&(o.valid=!1),o.removeValidatorFormQueue()},"validateCells"),a-=1):a-=1;i-=1}else i-=1;o.checkIfQueueIsEmpty()},this.getRowHeader=function(e){var t=b.rowHeaders,n=e;return void 0!==n&&(n=d.runHooks("modifyRowHeader",n)),void 0===n?(t=[],Nl(d.countRows()-1,function(e){t.push(d.getRowHeader(e))})):Array.isArray(t)&&void 0!==t[n]?t=t[n]:Rn(t)?t=t(n):t&&"string"!=typeof t&&"number"!=typeof t&&(t=n+1),t},this.hasRowHeaders=function(){return!!b.rowHeaders},this.hasColHeaders=function(){if(void 0!==b.colHeaders&&null!==b.colHeaders)return!!b.colHeaders;for(var e=0,t=d.countCols();e<t;e++)if(d.getColHeader(e))return!0;return!1},this.getColHeader=function(e){var t=d.runHooks("modifyColHeader",e),n=b.colHeaders;if(void 0===t){for(var o=[],i=d.countCols(),a=0;a<i;a++)o.push(d.getColHeader(a));n=o}else{var r=d.toPhysicalColumn(t),l=function(e){for(var t=[],n=d.countCols(),o=0;o<n;o++)Rn(b.columns)&&b.columns(o)&&t.push(o);return t[e]}(r);!1===b.colHeaders?n=null:b.columns&&Rn(b.columns)&&b.columns(l)&&b.columns(l).title?n=b.columns(l).title:b.columns&&b.columns[r]&&b.columns[r].title?n=b.columns[r].title:Array.isArray(b.colHeaders)&&void 0!==b.colHeaders[r]?n=b.colHeaders[r]:Rn(b.colHeaders)?n=b.colHeaders(r):b.colHeaders&&"string"!=typeof b.colHeaders&&"number"!=typeof b.colHeaders&&(n=Xs(t))}return n},this._getColWidthFromSettings=function(e){var t;e>=0&&(t=d.getCellMeta(0,e).width);if(void 0!==t&&t!==b.width||(t=b.colWidths),void 0!==t&&null!==t){switch(Ap(t)){case"object":t=t[e];break;case"function":t=t(e)}"string"==typeof t&&(t=parseInt(t,10))}return t},this.getColWidth=function(e){var t=d._getColWidthFromSettings(e);return void 0===(t=d.runHooks("modifyColWidth",t,e))&&(t=jn.DEFAULT_WIDTH),t},this._getRowHeightFromSettings=function(e){var t=b.rowHeights;if(void 0!==t&&null!==t){switch(Ap(t)){case"object":t=t[e];break;case"function":t=t(e)}"string"==typeof t&&(t=parseInt(t,10))}return t},this.getRowHeight=function(e){var t=d._getRowHeightFromSettings(e);return t=d.runHooks("modifyRowHeight",t,e)},this.countSourceRows=function(){return o.countRows()},this.countSourceCols=function(){return o.countFirstRowKeys()},this.countRows=function(){return n.getLength()},this.countCols=function(){var e=b.maxCols,t=this.columnIndexMapper.getNotTrimmedIndexesLength();return Math.min(e,t)},this.countRenderedRows=function(){return d.view.wt.drawn?d.view.wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return d.view.wt.drawn?d.view.wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return d.view.wt.drawn?d.view.wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return d.view.wt.drawn?d.view.wt.wtTable.getVisibleColumnsCount():-1},this.countEmptyRows=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;return Vl(d.countRows()-1,function(n){if(d.isEmptyRow(n))t+=1;else if(!0===e)return!1}),t},this.countEmptyCols=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(d.countRows()<1)return 0;var t=0;return Vl(d.countCols()-1,function(n){if(d.isEmptyCol(n))t+=1;else if(!0===e)return!1}),t},this.isEmptyRow=function(e){return b.isEmptyRow.call(d,e)},this.isEmptyCol=function(e){return b.isEmptyCol.call(d,e)},this.selectCell=function(e,t,n,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return!it(e)&&!it(t)&&this.selectCells([[e,t,n,o]],i,a)},this.selectCells=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[]],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!1===t&&(u=!0);var o=_.selectCells(e);return o&&n&&d.listen(),u=!1,o},this.selectColumns=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return _.selectColumns(e,t)},this.selectRows=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return _.selectRows(e,t)},this.deselectCell=function(){_.deselect()},this.selectAll=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e&&this.hasRowHeaders(),n=e&&this.hasColHeaders();u=!0,_.selectAll(t,n),u=!1};var I=function(e,t){return e.getFirstNotHiddenIndex(t,1,!0)};this.scrollViewportTo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!n,a=!o,r=e,l=t;if(!(arguments.length>4&&void 0!==arguments[4])||arguments[4]){var s=Number.isInteger(e),c=Number.isInteger(t),u=s?I(this.rowIndexMapper,e):void 0,h=c?I(this.columnIndexMapper,t):void 0;if(null===u||null===h)return!1;r=s?d.rowIndexMapper.getRenderableFromVisualIndex(u):void 0,l=c?d.columnIndexMapper.getRenderableFromVisualIndex(h):void 0}var f=Number.isInteger(r),p=Number.isInteger(l);return f&&p?d.view.scrollViewport(new qn(r,l),i,o,n,a):f&&!1===p?d.view.scrollViewportVertically(r,i,n):!(!p||!1!==f)&&d.view.scrollViewportHorizontally(l,o,a)},this.destroy=function(){if(d._clearTimeouts(),d._clearImmediates(),d.view&&d.view.destroy(),o&&o.destroy(),o=null,v.clearCache(),Eh(),Ms(d)){var e=this.rootDocument.querySelector("#hot-display-license-info");e&&e.parentNode.removeChild(e)}Kt(d.rootElement),h.destroy(),a&&a.destroy(),d.batchExecution(function(){d.rowIndexMapper.unregisterAll(),d.columnIndexMapper.unregisterAll(),g.getItems().forEach(function(e){Lp(e,2)[1].destroy()}),g.clear(),d.runHooks("afterDestroy")},!0),Jr.getSingleton().destroy(d),ve(d,function(e,t,n){var o;Rn(e)?n[t]=(o=t,function(){throw new Error('The "'.concat(o,'" method cannot be called because this Handsontable instance has been destroyed'))}):"guid"!==t&&(n[t]=null)}),d.isDestroyed=!0,n&&n.destroy(),d.rowIndexMapper=null,d.columnIndexMapper=null,n=null,i=null,_=null,a=null,d=null},this.getActiveEditor=function(){return a.getActiveEditor()},this.getPlugin=function(e){var t=Ct(e);return"UndoRedo"===t?this.undoRedo:g.getItem(t)},this.getPluginName=function(e){return e===this.undoRedo?this.undoRedo.constructor.PLUGIN_KEY:g.getId(e)},this.getInstance=function(){return d},this.addHook=function(e,t){Jr.getSingleton().add(e,t,d)},this.hasHook=function(e){return Jr.getSingleton().has(e,d)},this.addHookOnce=function(e,t){Jr.getSingleton().once(e,t,d)},this.removeHook=function(e,t){Jr.getSingleton().remove(e,t,d)},this.runHooks=function(e,t,n,o,i,a,r){return Jr.getSingleton().run(d,e,t,n,o,i,a,r)},this.getTranslatedPhrase=function(e,t){return kh(b.language,e,t)},this.toHTML=function(){return Rl(s)},this.toTableElement=function(){var e=s.rootDocument.createElement("div");return e.insertAdjacentHTML("afterbegin",Rl(s)),e.firstElementChild},this.timeouts=[],this._registerTimeout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;"function"==typeof n&&(n=setTimeout(n,t)),this.timeouts.push(n)},this._clearTimeouts=function(){K(this.timeouts,function(e){clearTimeout(e)})},this.immediates=[],this._registerImmediate=function(e){this.immediates.push(setImmediate(e))},this._clearImmediates=function(){K(this.immediates,function(e){clearImmediate(e)})},this._refreshBorders=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a.destroyEditor(e),d.view.render(),t&&_.isSelected()&&a.prepareEditor()},us().forEach(function(e){var t=ds(e);g.addItem(e,new t(s))}),Jr.getSingleton().run(d,"construct")}function jp(){var e,t={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},n=document.body,o=document.createTextNode(""),i=document.createElement("SPAN"),a=function(e,t,n){e.addEventListener(t,n,!1)},r=function(e,t,n){e.removeEventListener(t,n,!1)},l=function(a){var r,l;a?/^[a-zA-Z \.,\\\/\|0-9]$/.test(a)||(a="."):a="",void 0!==o.textContent?o.textContent=e.value+a:o.data=e.value+a,i.style.fontSize=u(e).fontSize,i.style.fontFamily=u(e).fontFamily,i.style.whiteSpace="pre",n.appendChild(i),r=i.clientWidth+2,n.removeChild(i),e.style.height=t.minHeight+"px",t.minWidth>r?e.style.width=t.minWidth+"px":r>t.maxWidth?e.style.width=t.maxWidth+"px":e.style.width=r+"px",l=e.scrollHeight?e.scrollHeight-1:0,t.minHeight>l?e.style.height=t.minHeight+"px":t.maxHeight<l?(e.style.height=t.maxHeight+"px",e.style.overflowY="visible"):e.style.height=l+"px"},s=function(){window.setTimeout(l,0)},c=function(n,r,c){e=n,function(n){if(n&&n.minHeight)if("inherit"==n.minHeight)t.minHeight=e.clientHeight;else{var a=parseInt(n.minHeight);isNaN(a)||(t.minHeight=a)}if(n&&n.maxHeight)if("inherit"==n.maxHeight)t.maxHeight=e.clientHeight;else{var r=parseInt(n.maxHeight);isNaN(r)||(t.maxHeight=r)}if(n&&n.minWidth)if("inherit"==n.minWidth)t.minWidth=e.clientWidth;else{var l=parseInt(n.minWidth);isNaN(l)||(t.minWidth=l)}if(n&&n.maxWidth)if("inherit"==n.maxWidth)t.maxWidth=e.clientWidth;else{var s=parseInt(n.maxWidth);isNaN(s)||(t.maxWidth=s)}i.firstChild||(i.className="autoResize",i.style.display="inline-block",i.appendChild(o))}(r),"TEXTAREA"==e.nodeName&&(e.style.resize="none",e.style.overflowY="",e.style.height=t.minHeight+"px",e.style.minWidth=t.minWidth+"px",e.style.maxWidth=t.maxWidth+"px",e.style.overflowY="hidden"),c&&(a(e,"change",l),a(e,"cut",s),a(e,"paste",s),a(e,"drop",s),a(e,"keydown",s),a(e,"focus",l),a(e,"compositionstart",s),a(e,"compositionupdate",s),a(e,"compositionend",s)),l()};function u(e){return e.currentStyle||document.defaultView.getComputedStyle(e)}return{init:function(e,t,n){c(e,t,n)},unObserve:function(){r(e,"change",l),r(e,"cut",s),r(e,"paste",s),r(e,"drop",s),r(e,"keydown",s),r(e,"focus",l),r(e,"compositionstart",s),r(e,"compositionupdate",s),r(e,"compositionend",s)},resize:l}}function $p(e){"@babel/helpers - typeof";return($p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Up(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function zp(e,t,n){return(zp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gp(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wp(e,t){return(Wp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Gp(e);if(t){var i=Gp(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===$p(t)||"function"==typeof t))return t;return Kp(e)}(this,n)}}function Kp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gp(e){return(Gp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wp(e,t)}(a,wl);var t,n,o,i=qp(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).eventManager=new Gi(Kp(t)),t.autoResize=jp(),t.TEXTAREA=void 0,t.textareaStyle=void 0,t.TEXTAREA_PARENT=void 0,t.textareaParentStyle=void 0,t.layerClass=void 0,t.createElements(),t.bindEvents(),t.hot.addHookOnce("afterDestroy",function(){return t.destroy()}),t}return t=a,o=[{key:"EDITOR_TYPE",get:function(){return"text"}}],(n=[{key:"getValue",value:function(){return this.TEXTAREA.value}},{key:"setValue",value:function(e){this.TEXTAREA.value=e}},{key:"open",value:function(){var e=this;this.refreshDimensions(),this.showEditableElement(),this.addHook("beforeKeyDown",function(t){return e.onBeforeKeyDown(t)})}},{key:"close",value:function(){this.autoResize.unObserve(),this.hot.rootDocument.activeElement===this.TEXTAREA&&this.hot.listen(),this.hideEditableElement(),this.removeHooksByKey("beforeKeyDown")}},{key:"prepare",value:function(e,t,n,o,i,r){var l=this.state;if(zp(Gp(a.prototype),"prepare",this).call(this,e,t,n,o,i,r),!r.readOnly){this.refreshDimensions(!0);var s=r.allowInvalid,c=r.fragmentSelection;s&&(this.TEXTAREA.value=""),l!==gl.FINISHED&&this.hideEditableElement(),!c&&!Ve()&&this.focus()}}},{key:"beginEditing",value:function(e,t){this.state===gl.VIRGIN&&(this.TEXTAREA.value="",zp(Gp(a.prototype),"beginEditing",this).call(this,e,t))}},{key:"focus",value:function(){this.TEXTAREA.select(),wn(this.TEXTAREA,this.TEXTAREA.value.length)}},{key:"createElements",value:function(){var e=this.hot.rootDocument;this.TEXTAREA=e.createElement("TEXTAREA"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.tabIndex=-1,zt(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.textareaStyle.overflowY="visible",this.TEXTAREA_PARENT=e.createElement("DIV"),zt(this.TEXTAREA_PARENT,"handsontableInputHolder"),Ut(this.TEXTAREA_PARENT,this.layerClass)&&Wt(this.TEXTAREA_PARENT,this.layerClass),zt(this.TEXTAREA_PARENT,"ht_editor_hidden"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.hot.rootElement.appendChild(this.TEXTAREA_PARENT)}},{key:"hideEditableElement",value:function(){(Ae()||Me())&&(this.textareaStyle.textIndent="-99999px"),this.textareaStyle.overflowY="visible",this.textareaParentStyle.opacity="0",this.textareaParentStyle.height="1px",Ut(this.TEXTAREA_PARENT,this.layerClass)&&Wt(this.TEXTAREA_PARENT,this.layerClass),zt(this.TEXTAREA_PARENT,"ht_editor_hidden")}},{key:"showEditableElement",value:function(){this.textareaParentStyle.height="",this.textareaParentStyle.overflow="",this.textareaParentStyle.position="",this.textareaParentStyle.right="auto",this.textareaParentStyle.opacity="1",this.textareaStyle.textIndent="",this.textareaStyle.overflowY="hidden";var e=this.TEXTAREA_PARENT.childNodes,t=!1;Nl(e.length-1,function(n){if(Ut(e[n],"handsontableEditor"))return t=!0,!1}),Ut(this.TEXTAREA_PARENT,"ht_editor_hidden")&&Wt(this.TEXTAREA_PARENT,"ht_editor_hidden"),t?(this.layerClass="ht_editor_visible",zt(this.TEXTAREA_PARENT,this.layerClass)):(this.layerClass=this.getEditedCellsLayerClass(),zt(this.TEXTAREA_PARENT,this.layerClass))}},{key:"refreshValue",value:function(){var e=this.hot.toPhysicalRow(this.row),t=this.hot.getSourceDataAtCell(e,this.col);this.originalValue=t,this.setValue(t),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.state===gl.EDITING||e)if(this.TD=this.getEditedCell(),this.TD){var t,n=this.hot.view.wt,o=n.wtOverlays,i=n.wtViewport,a=Zt(this.TD),r=Zt(this.hot.rootElement),l=o.topOverlay.holder,s=o.leftOverlay.holder,c=l!==this.hot.rootWindow?l.scrollTop:0,u=s!==this.hot.rootWindow?s.scrollLeft:0,d=this.checkEditorSection(),h=["","left"].includes(d)?c:0,f=["","top","bottom"].includes(d)?u:0,p=a.top===r.top?0:1,m=this.TD.style.backgroundColor,v=a.top-r.top-p-h,b=a.left-r.left-1-f;switch(d){case"top":t=Sn(o.topOverlay.clone.wtTable.holder.parentNode);break;case"left":t=Sn(o.leftOverlay.clone.wtTable.holder.parentNode);break;case"top-left-corner":t=Sn(o.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":t=Sn(o.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":t=Sn(o.bottomOverlay.clone.wtTable.holder.parentNode)}var y=this.hot.hasColHeaders(),g=this.hot.rowIndexMapper.getRenderableFromVisualIndex(this.row),w=this.hot.columnIndexMapper.getRenderableFromVisualIndex(this.col),_=this.hot.rowIndexMapper.getRenderableIndexesLength()-this.hot.view.wt.getSetting("fixedRowsBottom");(y&&g<=0||g===_)&&(v+=1),w<=0&&(b+=1),t&&-1!==t?this.textareaParentStyle[t[0]]=t[1]:Tn(this.TEXTAREA_PARENT),this.textareaParentStyle.top="".concat(v,"px"),this.textareaParentStyle.left="".concat(b,"px"),this.showEditableElement();var C=i.rowsRenderCalculator.startPosition,k=i.columnsRenderCalculator.startPosition,x=o.leftOverlay.getScrollPosition(),S=o.topOverlay.getScrollPosition(),T=_n(this.hot.rootDocument),E=this.TD.offsetTop+C-S,O=this.TD.offsetLeft+k-x,D=fn(this.TD)-8,I=Cn(l)?T:0,R=kn(s)?T:0,M=this.hot.view.maximumVisibleElementWidth(O)-9-I,P=this.TD.scrollHeight+1,A=Math.max(this.hot.view.maximumVisibleElementHeight(E)-R,23),L=cn(this.TD,this.hot.rootWindow);this.TEXTAREA.style.fontSize=L.fontSize,this.TEXTAREA.style.fontFamily=L.fontFamily,this.TEXTAREA.style.backgroundColor=m,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(P,A),maxHeight:A,minWidth:Math.min(D,M),maxWidth:M},!0)}else e||this.close()}},{key:"bindEvents",value:function(){var e=this;this.eventManager.addEventListener(this.TEXTAREA,"cut",function(e){return e.stopPropagation()}),this.eventManager.addEventListener(this.TEXTAREA,"paste",function(e){return e.stopPropagation()}),Fe()&&this.eventManager.addEventListener(this.TEXTAREA,"focusout",function(){return e.finishEditing(!1)}),this.addHook("afterScrollHorizontally",function(){return e.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return e.refreshDimensions()}),this.addHook("afterColumnResize",function(){e.refreshDimensions(),e.focus()}),this.addHook("afterRowResize",function(){e.refreshDimensions(),e.focus()})}},{key:"allowKeyEventPropagation",value:function(){}},{key:"destroy",value:function(){this.eventManager.destroy(),this.clearHooks()}},{key:"onBeforeKeyDown",value:function(e){var t=(e.ctrlKey||e.metaKey)&&!e.altKey;if(e.target===this.TEXTAREA&&!Ui(e)){switch(e.keyCode){case yr.ARROW_RIGHT:case yr.ARROW_LEFT:this.isInFullEditMode()&&(this.isWaiting()||this.allowKeyEventPropagation(e.keyCode)||$i(e));break;case yr.ARROW_UP:case yr.ARROW_DOWN:this.isInFullEditMode()&&(this.isWaiting()||this.allowKeyEventPropagation(e.keyCode)||$i(e));break;case yr.ENTER:var n=this.hot.selection.isMultiple();if(t&&!n||e.altKey){if(this.isOpened()){var o=vn(this.TEXTAREA),i=this.getValue(),a="".concat(i.slice(0,o),"\n").concat(i.slice(o));this.setValue(a),wn(this.TEXTAREA,o+1)}else this.beginEditing("".concat(this.originalValue,"\n"));$i(e)}e.preventDefault();break;case yr.BACKSPACE:case yr.DELETE:case yr.HOME:case yr.END:$i(e)}-1===[yr.ARROW_UP,yr.ARROW_RIGHT,yr.ARROW_DOWN,yr.ARROW_LEFT].indexOf(e.keyCode)&&this.autoResize.resize(String.fromCharCode(e.keyCode))}}}])&&Up(t.prototype,n),o&&Up(t,o),a}();function Yp(e,t,n,o,i,a,r){var l=[],s=[];r.className&&zt(t,r.className),r.readOnly&&l.push(r.readOnlyCellClassName),!1===r.valid&&r.invalidCellClassName?l.push(r.invalidCellClassName):s.push(r.invalidCellClassName),!1===r.wordWrap&&r.noWordWrapClassName&&l.push(r.noWordWrapClassName),!a&&r.placeholder&&l.push(r.placeholderCellClassName),Wt(t,s),zt(t,l)}Yp.RENDERER_TYPE="base";function Xp(e,t,n,o,i,a,r){Yp.apply(this,[e,t,n,o,i,a,r]);var l=a;if(!l&&r.placeholder&&(l=r.placeholder),l=nt(l),e.getSettings().trimWhitespace&&(l=l.trim()),r.rendererTemplate){Kt(t);var s=e.rootDocument.createElement("TEMPLATE");s.setAttribute("bind","{{}}"),s.innerHTML=r.rendererTemplate,HTMLTemplateElement.decorate(s),s.model=e.getSourceDataAtRow(n),t.appendChild(s)}else Xt(t,l)}Xp.RENDERER_TYPE="text";var Qp={CELL_TYPE:"text",editor:Jp,renderer:Xp};function Zp(e,t){var n=new Hp(e,t||{},Rs);return n.init(),n}Gs(Qp),Zp.Core=function(e){return new Hp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Rs)},Zp.packageName="handsontable",Zp.buildDate="11/05/2021 12:29:08",Zp.version="8.4.0",Zp.languages={dictionaryKeys:v,getLanguageDictionary:_h,getLanguagesDictionaries:function(){return gh()},registerLanguageDictionary:wh,getTranslatedPhrase:kh};var em=Zp;function tm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function om(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var im=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}var t,n,o;return t=e,(n=[{key:"addRow",value:function(e,t){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={row:e};this.rows.push(n),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(e)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"addColumnHeadersRow",value:function(e){var t=this.hot.getColHeader(0);if(null!==t&&void 0!==t){var n={row:-1};this.rows.push(n),this.container=this.createContainer(this.hot.rootElement.className),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}}},{key:"addColumn",value:function(e,t){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={col:e};this.columns.push(n),this.samples=t,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&null!==this.hot.getColHeader(e)&&this.hot.view.appendColHeader(e,this.table.th),this.table.tBody.appendChild(this.createCol(e)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"getHeights",value:function(e){this.injected||this.injectTable(),K(this.rows,function(t){e(t.row,dn(t.table)-1)})}},{key:"getWidths",value:function(e){this.injected||this.injectTable(),K(this.columns,function(t){e(t.col,un(t.table))})}},{key:"setSettings",value:function(e){this.settings=e}},{key:"setSetting",value:function(e,t){this.settings||(this.settings={}),this.settings[e]=t}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(e){return this.settings?this.settings[e]:null}},{key:"createColGroupsCol",value:function(){var e=this,t=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&t.appendChild(this.createColElement(-1)),this.samples.forEach(function(n){K(n.strings,function(n){t.appendChild(e.createColElement(n.col))})}),t}},{key:"createRow",value:function(e){var t=this,n=this.hot.rootDocument,o=n.createDocumentFragment(),i=n.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(e,i),o.appendChild(i)),this.samples.forEach(function(i){K(i.strings,function(i){var a=i.col,r=t.hot.getCellMeta(e,a);r.col=a,r.row=e;var l=t.hot.getCellRenderer(r),s=n.createElement("td");s.setAttribute("ghost-table",1),l(t.hot,s,e,a,t.hot.colToProp(a),i.value,r),o.appendChild(s)})}),o}},{key:"appendColumnHeadersRow",value:function(){var e=this,t=this.hot.rootDocument,n=t.createDocumentFragment(),o=[];if(this.hot.hasRowHeaders()){var i=t.createElement("th");o.push([-1,i]),n.appendChild(i)}this.samples.forEach(function(e){K(e.strings,function(e){var i=e.col,a=t.createElement("th");o.push([i,a]),n.appendChild(a)})}),this.table.tHead.appendChild(n),K(o,function(t){var n=tm(t,2),o=n[0],i=n[1];e.hot.view.appendColHeader(o,i)})}},{key:"createCol",value:function(e){var t=this,n=this.hot.rootDocument,o=n.createDocumentFragment();return this.samples.forEach(function(i){K(i.strings,function(i){var a=i.row,r=t.hot.getCellMeta(a,e);r.col=e,r.row=a;var l=t.hot.getCellRenderer(r),s=n.createElement("td"),c=n.createElement("tr");s.setAttribute("ghost-table",1),l(t.hot,s,a,e,t.hot.colToProp(e),i.value,r),c.appendChild(s),o.appendChild(c)})}),o}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.injected||((e||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(e){var t=this.hot.rootDocument.createElement("col");return t.style.width="".concat(this.hot.view.wt.wtTable.getStretchedColumnWidth(e),"px"),t}},{key:"createTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.hot.rootDocument,n=t.createDocumentFragment(),o=t.createElement("table"),i=t.createElement("thead"),a=t.createElement("tbody"),r=t.createElement("colgroup"),l=t.createElement("tr"),s=t.createElement("th");return this.isVertical()&&o.appendChild(r),this.isHorizontal()&&(l.appendChild(s),i.appendChild(l),o.style.tableLayout="auto",o.style.width="auto"),o.appendChild(i),this.isVertical()&&a.appendChild(l),o.appendChild(a),zt(o,e),n.appendChild(o),{fragment:n,table:o,tHead:i,tBody:a,colGroup:r,tr:l,th:s}}},{key:"createContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.hot.rootDocument,n=t.createDocumentFragment(),o=t.createElement("div");return zt(o,"htGhostTable htAutoSize ".concat(e.trim())),n.appendChild(o),{fragment:n,container:o}}},{key:"isVertical",value:function(){return!(!this.rows.length||this.columns.length)}},{key:"isHorizontal",value:function(){return!(!this.columns.length||this.rows.length)}}])&&om(t.prototype,n),o&&om(t,o),e}();function am(e){var t=new Date(e);return isNaN(new Date("".concat(e,"T00:00")).getDate())?t:new Date(t.getTime()+6e4*t.getTimezoneOffset())}function rm(e){"@babel/helpers - typeof";return(rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function sm(e,t,n){return(sm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dm(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function cm(e,t){return(cm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function um(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=dm(e);if(t){var i=dm(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===rm(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function dm(e){return(dm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cm(e,t)}(a,Jp);var t,n,o,i=um(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,o=[{key:"EDITOR_TYPE",get:function(){return"handsontable"}}],(n=[{key:"open",value:function(){sm(dm(a.prototype),"open",this).call(this),this.htEditor&&this.htEditor.destroy(),"none"===this.htContainer.style.display&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),wn(this.TEXTAREA,0,this.TEXTAREA.value.length)}},{key:"close",value:function(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),sm(dm(a.prototype),"close",this).call(this)}},{key:"prepare",value:function(e,t,n,o,i,r){sm(dm(a.prototype),"prepare",this).call(this,e,t,n,o,i,r);var l=this,s={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,afterOnCellMouseDown:function(e,t){var n=this.getSourceData(t.row,t.col);void 0!==n&&l.setValue(n),l.instance.destroyEditor()},preventWheel:!0};this.cellProperties.handsontable&&se(s,r.handsontable),this.htOptions=s}},{key:"beginEditing",value:function(e,t){var n=this.hot.getSettings().onBeginEditing;n&&!1===n()||sm(dm(a.prototype),"beginEditing",this).call(this,e,t)}},{key:"createElements",value:function(){sm(dm(a.prototype),"createElements",this).call(this);var e=this.hot.rootDocument.createElement("DIV");e.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(e),this.htContainer=e,this.assignHooks()}},{key:"finishEditing",value:function(e,t,n){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){var o=this.htEditor.getInstance().getValue();void 0!==o&&this.setValue(o)}sm(dm(a.prototype),"finishEditing",this).call(this,e,t,n)}},{key:"assignHooks",value:function(){var e=this;this.hot.addHook("afterDestroy",function(){e.htEditor&&e.htEditor.destroy()})}},{key:"onBeforeKeyDown",value:function(e){if(!Ui(e)){var t,n,o=this.htEditor.getInstance();if(e.keyCode===yr.ARROW_DOWN)if(o.getSelectedLast()||o.flipped){if(o.getSelectedLast())if(o.flipped)t=o.getSelectedLast()[0]+1;else if(!o.flipped){var i=o.countRows()-1;n=o.getSelectedLast()[0],t=Math.min(i,n+1)}}else t=0;else e.keyCode===yr.ARROW_UP&&(!o.getSelectedLast()&&o.flipped?t=o.countRows()-1:o.getSelectedLast()&&(o.flipped?(n=o.getSelectedLast()[0],t=Math.max(0,n-1)):t=(n=o.getSelectedLast()[0])-1));void 0!==t&&(t<0||o.flipped&&t>o.countRows()-1?o.deselectCell():o.selectCell(t,0),o.getData().length&&(e.preventDefault(),$i(e),this.hot.listen(),this.TEXTAREA.focus())),sm(dm(a.prototype),"onBeforeKeyDown",this).call(this,e)}}}])&&lm(t.prototype,n),o&&lm(t,o),a}();function fm(e){"@babel/helpers - typeof";return(fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function mm(e,t,n){return(mm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gm(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vm(e,t){return(vm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=gm(e);if(t){var i=gm(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===fm(t)||"function"==typeof t))return t;return ym(e)}(this,n)}}function ym(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gm(e){return(gm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wm=new WeakMap,_m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vm(e,t)}(a,hm);var t,n,o,i=bm(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).query=null,t.strippedChoices=[],t.rawChoices=[],wm.set(ym(t),{skipOne:!1,isMacOS:t.hot.rootWindow.navigator.platform.indexOf("Mac")>-1}),t}return t=a,o=[{key:"EDITOR_TYPE",get:function(){return"autocomplete"}}],(n=[{key:"getValue",value:function(){var e=this,t=this.rawChoices.find(function(t){return e.stripValueIfNeeded(t)===e.TEXTAREA.value});return ot(t)?t:this.TEXTAREA.value}},{key:"createElements",value:function(){mm(gm(a.prototype),"createElements",this).call(this),zt(this.htContainer,"autocompleteEditor"),zt(this.htContainer,-1===this.hot.rootWindow.navigator.platform.indexOf("Mac")?"":"htMacScroll")}},{key:"open",value:function(){var e=this,t=wm.get(this);mm(gm(a.prototype),"open",this).call(this);var n=this.htEditor.getInstance(),o=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown;this.showEditableElement(),this.focus();var i=_n();0===i&&t.isMacOS&&(i+=15),n.updateSettings({colWidths:o?[un(this.TEXTAREA)-2]:void 0,width:o?un(this.TEXTAREA)+i:void 0,renderer:function(t,n,o,i,a,r,l){Xp(t,n,o,i,a,r,l);var s,c,u=e.cellProperties,d=u.filteringCaseSensitive,h=u.allowHtml,f=e.query,p=nt(r);p&&!h&&-1!==(s=!0===d?p.indexOf(f):p.toLowerCase().indexOf(f.toLowerCase()))&&(c=p.substr(s,f.length),p=p.replace(c,"<strong>".concat(c,"</strong>"))),n.innerHTML=p},autoColumnSize:!0}),t.skipOne&&(t.skipOne=!1),this.hot._registerTimeout(function(){e.queryChoices(e.TEXTAREA.value)})}},{key:"close",value:function(){this.removeHooksByKey("beforeKeyDown"),mm(gm(a.prototype),"close",this).call(this)}},{key:"discardEditor",value:function(e){mm(gm(a.prototype),"discardEditor",this).call(this,e),this.hot.view.render()}},{key:"queryChoices",value:function(e){var t=this,n=this.cellProperties.source;this.query=e,"function"==typeof n?n.call(this.cellProperties,e,function(e){t.rawChoices=e,t.updateChoicesList(t.stripValuesIfNeeded(e))}):Array.isArray(n)?(this.rawChoices=n,this.updateChoicesList(this.stripValuesIfNeeded(n))):this.updateChoicesList([])}},{key:"updateChoicesList",value:function(e){var t=vn(this.TEXTAREA),n=bn(this.TEXTAREA),o=this.cellProperties.sortByRelevance,i=this.cellProperties.filter,r=null,l=null,s=e;o&&(r=a.sortByRelevance(this.stripValueIfNeeded(this.getValue()),s,this.cellProperties.filteringCaseSensitive));var c=Array.isArray(r)?r.length:0;if(!1===i)c&&(l=r[0]);else{for(var u=[],d=0,h=s.length;d<h&&!(o&&c<=d);d++)c?u.push(s[r[d]]):u.push(s[d]);l=0,s=u}this.strippedChoices=s,this.htEditor.loadData(U([s])),this.updateDropdownHeight(),this.flipDropdownIfNeeded(),!0===this.cellProperties.strict&&this.highlightBestMatchingChoice(l),this.hot.listen(),wn(this.TEXTAREA,t,t===n?void 0:n)}},{key:"flipDropdownIfNeeded",value:function(){var e=Zt(this.TEXTAREA),t=dn(this.TEXTAREA),n=this.getDropdownHeight(),o=rn(this.hot.view.wt.wtTable.TABLE),i=o.scrollTop,a=dn(this.hot.view.wt.wtTable.THEAD),r={row:0,col:0};o!==this.hot.rootWindow&&(r=Zt(o));var l=e.top-r.top-a+i,s=o.scrollHeight-l-a-t,c=n>s&&l>s;return c?this.flipDropdown(n):this.unflipDropdown(),this.limitDropdownIfNeeded(c?l:s,n),c}},{key:"limitDropdownIfNeeded",value:function(e,t){if(t>e){var n,o=0,i=0,a=0;do{o+=a=this.htEditor.getRowHeight(i)||this.htEditor.view.wt.wtSettings.settings.defaultRowHeight,i+=1}while(o<e);n=o-a,this.htEditor.flipped&&(this.htEditor.rootElement.style.top="".concat(parseInt(this.htEditor.rootElement.style.top,10)+t-n,"px")),this.setDropdownHeight(o-a)}}},{key:"flipDropdown",value:function(e){var t=this.htEditor.rootElement.style;t.position="absolute",t.top="".concat(-e,"px"),this.htEditor.flipped=!0}},{key:"unflipDropdown",value:function(){var e=this.htEditor.rootElement.style;"absolute"===e.position&&(e.position="",e.top=""),this.htEditor.flipped=void 0}},{key:"updateDropdownHeight",value:function(){var e=this.htEditor.getColWidth(0)+_n(this.hot.rootDocument)+2,t=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:t?void 0:e}),this.htEditor.view.wt.wtTable.alignOverlaysWithTrimmingContainer()}},{key:"setDropdownHeight",value:function(e){this.htEditor.updateSettings({height:e})}},{key:"highlightBestMatchingChoice",value:function(e){"number"==typeof e?this.htEditor.selectCell(e,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}},{key:"getDropdownHeight",value:function(){var e=this.htEditor.getInstance().getRowHeight(0)||23,t=this.cellProperties.visibleRows;return this.strippedChoices.length>=t?t*e:this.strippedChoices.length*e+8}},{key:"stripValueIfNeeded",value:function(e){return this.stripValuesIfNeeded([e])[0]}},{key:"stripValuesIfNeeded",value:function(e){var t=this.cellProperties.allowHtml;return q(q(e,function(e){return nt(e)}),function(e){return t?e:Et(e)})}},{key:"allowKeyEventPropagation",value:function(e){var t=this.htEditor.getSelectedRangeLast(),n=t?t.from.row:-1,o=!1;return e===yr.ARROW_DOWN&&n>0&&n<this.htEditor.countRows()-1&&(o=!0),e===yr.ARROW_UP&&n>-1&&(o=!0),o}},{key:"onBeforeKeyDown",value:function(e){var t=this,n=wm.get(this);if(n.skipOne=!1,gr(e.keyCode)||e.keyCode===yr.BACKSPACE||e.keyCode===yr.DELETE||e.keyCode===yr.INSERT){var o=0;if(e.keyCode===yr.C&&(e.ctrlKey||e.metaKey))return;this.isOpened()||(o+=10),this.htEditor&&this.hot._registerTimeout(function(){t.queryChoices(t.TEXTAREA.value),n.skipOne=!0},o)}mm(gm(a.prototype),"onBeforeKeyDown",this).call(this,e)}}])&&pm(t.prototype,n),o&&pm(t,o),a}();function Cm(e){"@babel/helpers - typeof";return(Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function km(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xm(e,t){return(xm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Tm(e);if(t){var i=Tm(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Cm(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Tm(e){return(Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}_m.sortByRelevance=function(e,t,n){var o,i,a,r,l=[],s=[],c=e.length,u=t.length;if(0===c){for(a=0;a<u;a++)s.push(a);return s}for(a=0;a<u;a++)i=Et(nt(t[a])),-1!==(r=n?i.indexOf(e):i.toLowerCase().indexOf(e.toLowerCase()))&&(o=i.length-r-c,l.push({baseIndex:a,index:r,charsLeft:o,value:i}));for(l.sort(function(e,t){if(-1===t.index)return-1;if(-1===e.index)return 1;if(e.index<t.index)return-1;if(t.index<e.index)return 1;if(e.index===t.index){if(e.charsLeft<t.charsLeft)return-1;if(e.charsLeft>t.charsLeft)return 1}return 0}),a=0,u=l.length;a<u;a++)s.push(l[a].baseIndex);return s};var Em=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xm(e,t)}(a,wl);var t,n,o,i=Sm(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,o=[{key:"EDITOR_TYPE",get:function(){return"checkbox"}}],(n=[{key:"beginEditing",value:function(e,t){if(t&&"mouseup"===t.type){var n=this.TD.querySelector('input[type="checkbox"]');Ut(n,"htBadValue")||n.click()}}},{key:"finishEditing",value:function(){}},{key:"init",value:function(){}},{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"getValue",value:function(){}},{key:"setValue",value:function(){}},{key:"focus",value:function(){}}])&&km(t.prototype,n),o&&km(t,o),a}(),Om=n("6UW8"),Dm=n.n(Om);function Im(e){"@babel/helpers - typeof";return(Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Mm(e,t,n){return(Mm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lm(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Pm(e,t){return(Pm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Am(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Lm(e);if(t){var i=Lm(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Im(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lm(e){return(Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nm="date",Vm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pm(e,t)}(a,Jp);var t,n,o,i=Am(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).defaultDateFormat="DD/MM/YYYY",t.isCellEdited=!1,t.parentDestroyed=!1,t}return t=a,o=[{key:"EDITOR_TYPE",get:function(){return Nm}}],(n=[{key:"init",value:function(){var e=this;if("function"!=typeof Qe.a)throw new Error("You need to include moment.js to your project.");if("function"!=typeof Dm.a)throw new Error("You need to include Pikaday to your project.");Mm(Lm(a.prototype),"init",this).call(this),this.instance.addHook("afterDestroy",function(){e.parentDestroyed=!0,e.destroyElements()})}},{key:"createElements",value:function(){Mm(Lm(a.prototype),"createElements",this).call(this),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,zt(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),this.$datePicker=new Dm.a(this.getDatePickerConfig()),new Gi(this).addEventListener(this.datePicker,"mousedown",function(e){return e.stopPropagation()}),this.hideDatepicker()}},{key:"destroyElements",value:function(){var e=this.datePicker.parentNode;this.$datePicker.destroy(),e&&e.removeChild(this.datePicker)}},{key:"prepare",value:function(e,t,n,o,i,r){Mm(Lm(a.prototype),"prepare",this).call(this,e,t,n,o,i,r)}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Mm(Lm(a.prototype),"open",this).call(this),this.showDatepicker(e)}},{key:"close",value:function(){var e=this;this._opened=!1,this.instance._registerTimeout(function(){e.instance._refreshBorders()}),Mm(Lm(a.prototype),"close",this).call(this)}},{key:"finishEditing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n=this.originalValue;void 0!==n&&this.setValue(n)}this.hideDatepicker(),Mm(Lm(a.prototype),"finishEditing",this).call(this,e,t)}},{key:"showDatepicker",value:function(e){this.$datePicker.config(this.getDatePickerConfig());var t,n=this.TD.getBoundingClientRect(),o=this.cellProperties.dateFormat||this.defaultDateFormat,i=this.$datePicker.config(),a=this.instance.view.isMouseDown(),r=!!e&&wr(e.keyCode);this.datePickerStyle.top="".concat(this.hot.rootWindow.pageYOffset+n.top+dn(this.TD),"px"),this.datePickerStyle.left="".concat(this.hot.rootWindow.pageXOffset+n.left,"px"),this.$datePicker._onInputFocus=function(){},i.format=o,this.originalValue?(t=this.originalValue,Qe()(t,o,!0).isValid()&&this.$datePicker.setMoment(Qe()(t,o),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),r||a||this.setValue("")):this.cellProperties.defaultDate?(t=this.cellProperties.defaultDate,i.defaultDate=t,Qe()(t,o,!0).isValid()&&this.$datePicker.setMoment(Qe()(t,o),!0),r||a||this.setValue("")):this.$datePicker.gotoToday(),this.datePickerStyle.display="block",this.$datePicker.show()}},{key:"hideDatepicker",value:function(){this.datePickerStyle.display="none",this.$datePicker.hide()}},{key:"getDatePickerConfig",value:function(){var e=this,t=this.TEXTAREA,n={};this.cellProperties&&this.cellProperties.datePickerConfig&&ce(n,this.cellProperties.datePickerConfig);var o=n.onSelect,i=n.onClose;return n.field=t,n.trigger=t,n.container=this.datePicker,n.bound=!1,n.format=n.format||this.defaultDateFormat,n.reposition=n.reposition||!1,n.onSelect=function(t){var n=t;isNaN(n.getTime())||(n=Qe()(n).format(e.cellProperties.dateFormat||e.defaultDateFormat)),e.setValue(n),e.hideDatepicker(),o&&o()},n.onClose=function(){e.parentDestroyed||e.finishEditing(!1),i&&i()},n}}])&&Rm(t.prototype,n),o&&Rm(t,o),a}();function Fm(e){"@babel/helpers - typeof";return(Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Hm(e,t,n){return(Hm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Um(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function jm(e,t){return(jm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Um(e);if(t){var i=Um(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Fm(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Um(e){return(Um=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jm(e,t)}(a,_m);var t,n,o,i=$m(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,o=[{key:"EDITOR_TYPE",get:function(){return"dropdown"}}],(n=[{key:"prepare",value:function(e,t,n,o,i,r){Hm(Um(a.prototype),"prepare",this).call(this,e,t,n,o,i,r),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}])&&Bm(t.prototype,n),o&&Bm(t,o),a}();function Wm(e){"@babel/helpers - typeof";return(Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Km(e,t){return(Km=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Jm(e);if(t){var i=Jm(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Wm(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Jm(e){return(Jm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().add("beforeValidate",function(e,t,n){var o=this.getCellMeta(t,this.propToCol(n));o.editor===zm&&void 0===o.strict&&(o.filter=!1,o.strict=!0)});var Ym=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Km(e,t)}(a,Jp);var t,n,o,i=Gm(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,o=[{key:"EDITOR_TYPE",get:function(){return"numeric"}}],(n=null)&&qm(t.prototype,n),o&&qm(t,o),a}();function Xm(e){"@babel/helpers - typeof";return(Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zm(e,t,n){return(Zm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nv(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ev(e,t){return(ev=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=nv(e);if(t){var i=nv(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Xm(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nv(e){return(nv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ov=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ev(e,t)}(a,Jp);var t,n,o,i=tv(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,o=[{key:"EDITOR_TYPE",get:function(){return"password"}}],(n=[{key:"createElements",value:function(){Zm(nv(a.prototype),"createElements",this).call(this),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,Kt(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}])&&Qm(t.prototype,n),o&&Qm(t,o),a}();function iv(e){"@babel/helpers - typeof";return(iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function av(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rv(e,t,n){return(rv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cv(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function lv(e,t){return(lv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=cv(e);if(t){var i=cv(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===iv(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cv(e){return(cv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lv(e,t)}(a,wl);var t,n,o,i=sv(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,o=[{key:"EDITOR_TYPE",get:function(){return"select"}}],(n=[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),zt(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(e){this.select.value=e}},{key:"open",value:function(){var e=this;this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.addHook("beforeKeyDown",function(){return e.onBeforeKeyDown()})}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Ut(this.select,"ht_editor_visible")&&Wt(this.select,"ht_editor_visible"),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var e=this;this.addHook("afterScrollHorizontally",function(){return e.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return e.refreshDimensions()}),this.addHook("afterColumnResize",function(){return e.refreshDimensions()}),this.addHook("afterRowResize",function(){return e.refreshDimensions()})}},{key:"prepare",value:function(e,t,n,o,i,r){var l=this;rv(cv(a.prototype),"prepare",this).call(this,e,t,n,o,i,r);var s,c=this.cellProperties.selectOptions;s="function"==typeof c?this.prepareOptions(c(this.row,this.col,this.prop)):this.prepareOptions(c),Kt(this.select),ve(s,function(e,t){var n=l.hot.rootDocument.createElement("OPTION");n.value=t,Yt(n,e),l.select.appendChild(n)})}},{key:"prepareOptions",value:function(e){var t={};if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++)t[e[n]]=e[n];else"object"===iv(e)&&(t=e);return t}},{key:"refreshValue",value:function(){var e=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===gl.EDITING)if(this.TD=this.getEditedCell(),this.TD){var e,t=this.hot.view.wt.wtOverlays,n=Zt(this.TD),o=Zt(this.hot.rootElement),i=t.scrollableElement,a=this.checkEditorSection(),r=un(this.TD)+1,l=dn(this.TD)+1,s=n.top-o.top-1-(i.scrollTop||0),c=n.left-o.left-1-(i.scrollLeft||0);switch(a){case"top":e=Sn(t.topOverlay.clone.wtTable.holder.parentNode);break;case"left":e=Sn(t.leftOverlay.clone.wtTable.holder.parentNode);break;case"top-left-corner":e=Sn(t.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":e=Sn(t.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":e=Sn(t.bottomOverlay.clone.wtTable.holder.parentNode)}var u=this.hot.rowIndexMapper.getRenderableFromVisualIndex(this.row),d=this.hot.columnIndexMapper.getRenderableFromVisualIndex(this.col),h=this.hot.rowIndexMapper.getRenderableIndexesLength()-this.hot.view.wt.getSetting("fixedRowsBottom");(u<=0||u===h)&&(s+=1),d<=0&&(c+=1);var f=this.select.style;e&&-1!==e?f[e[0]]=e[1]:Tn(this.select);var p=cn(this.TD,this.hot.rootWindow);parseInt(p.borderTopWidth,10)>0&&(l-=1),parseInt(p.borderLeftWidth,10)>0&&(r-=1),f.height="".concat(l,"px"),f.minWidth="".concat(r,"px"),f.top="".concat(s,"px"),f.left="".concat(c,"px"),f.margin="0px",zt(this.select,"ht_editor_visible")}else this.close()}},{key:"onBeforeKeyDown",value:function(){var e=this.select.selectedIndex-1,t=this.select.selectedIndex+1;switch(event.keyCode){case yr.ARROW_UP:e>=0&&(this.select[e].selected=!0),$i(event),event.preventDefault();break;case yr.ARROW_DOWN:t<=this.select.length-1&&(this.select[t].selected=!0),$i(event),event.preventDefault()}}}])&&av(t.prototype,n),o&&av(t,o),a}();function dv(e,t,n,o,i,a,r){Yp.apply(this,[e,t,n,o,i,a,r]),Yt(t,null===a||void 0===a?"":a,!1)}dv.RENDERER_TYPE="html";function hv(e,t,n,o,i,a,r){var l=e.rootDocument,s=r.allowHtml?dv:Xp,c=l.createElement("DIV");if(c.className="htAutocompleteArrow",c.appendChild(l.createTextNode(String.fromCharCode(9660))),s.apply(this,[e,t,n,o,i,a,r]),t.firstChild||t.appendChild(l.createTextNode(String.fromCharCode(160))),t.insertBefore(c,t.firstChild),zt(t,"htAutocomplete"),!e.acArrowListener){var u=new Gi(e);e.acArrowListener=function(i){Ut(i.target,"htAutocompleteArrow")&&e.view.wt.getSetting("onCellDblClick",null,new qn(n,o),t)},u.addEventListener(e.rootElement,"mousedown",e.acArrowListener),e.addHookOnce("afterDestroy",function(){u.destroy()})}}hv.RENDERER_TYPE="autocomplete";var fv=new WeakMap,pv=new WeakMap,mv="htBadValue",vv="data-row",bv="data-col";function yv(e,t,n,o,i,a,r){var l=e.rootDocument;Yp.apply(this,[e,t,n,o,i,a,r]),function(e){var t=pv.get(e);if(!t){var n=e.rootElement;(t=new Gi(e)).addEventListener(n,"click",function(t){return function(e,t){var n=e.target;if(!gv(n))return;if(!n.hasAttribute(vv)||!n.hasAttribute(bv))return;var o=parseInt(n.getAttribute(vv),10),i=parseInt(n.getAttribute(bv),10);t.getCellMeta(o,i).readOnly&&e.preventDefault()}(t,e)}),t.addEventListener(n,"mouseup",function(t){return function(e,t){var n=e.target;if(!gv(n))return;if(!n.hasAttribute(vv)||!n.hasAttribute(bv))return;setTimeout(t.listen,10)}(t,e)}),t.addEventListener(n,"change",function(t){return function(e,t){var n=e.target;if(!gv(n))return;if(!n.hasAttribute(vv)||!n.hasAttribute(bv))return;var o=parseInt(n.getAttribute(vv),10),i=parseInt(n.getAttribute(bv),10),a=t.getCellMeta(o,i);if(!a.readOnly){var r=null;r=e.target.checked?void 0===a.uncheckedTemplate||a.checkedTemplate:void 0!==a.uncheckedTemplate&&a.uncheckedTemplate,t.setDataAtCell(o,i,r)}}(t,e)}),pv.set(e,t)}}(e);var s=function(e){var t=e.createElement("input");return t.className="htCheckboxRendererInput",t.type="checkbox",t.setAttribute("autocomplete","off"),t.setAttribute("tabindex","-1"),t.cloneNode(!1)}(l),c=r.label,u=!1;if(void 0===r.checkedTemplate&&(r.checkedTemplate=!0),void 0===r.uncheckedTemplate&&(r.uncheckedTemplate=!1),Kt(t),a===r.checkedTemplate||kt(a,r.checkedTemplate)?s.checked=!0:a===r.uncheckedTemplate||kt(a,r.uncheckedTemplate)?s.checked=!1:at(a)?zt(s,"noValue"):(s.style.display="none",zt(s,mv),u=!0),s.setAttribute(vv,n),s.setAttribute(bv,o),!u&&c){var d="";if(c.value)d="function"==typeof c.value?c.value.call(this,n,o,i,a):c.value;else if(c.property){var h=e.getDataAtRowProp(n,c.property);d=null!==h?h:""}var f=function(e,t){var n=e.createElement("label");return n.className="htCheckboxRendererLabel",n.appendChild(e.createTextNode(t)),n.cloneNode(!0)}(l,d);"before"===c.position?c.separated?(t.appendChild(f),t.appendChild(s)):(f.appendChild(s),s=f):c.position&&"after"!==c.position||(c.separated?(t.appendChild(s),t.appendChild(f)):(f.insertBefore(s,f.firstChild),s=f))}function p(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getSelectedRange();if(n)for(var o=0;o<n.length;o++){for(var i=n[o].getTopLeftCorner(),a=i.row,r=i.col,l=n[o].getBottomRightCorner(),s=l.row,c=l.col,u=[],d=a;d<=s;d+=1)for(var h=r;h<=c;h+=1){var f=e.getCellMeta(d,h);if("checkbox"!==f.type)return;if(!0!==f.readOnly){void 0===f.checkedTemplate&&(f.checkedTemplate=!0),void 0===f.uncheckedTemplate&&(f.uncheckedTemplate=!1);var p=e.getDataAtCell(d,h);!1===t?[f.checkedTemplate,f.checkedTemplate.toString()].includes(p)?u.push([d,h,f.uncheckedTemplate]):[f.uncheckedTemplate,f.uncheckedTemplate.toString(),null,void 0].includes(p)&&u.push([d,h,f.checkedTemplate]):u.push([d,h,f.uncheckedTemplate])}}u.length>0&&e.setDataAtCell(u)}}(!c||c&&!c.separated)&&t.appendChild(s),u&&t.appendChild(l.createTextNode("#bad-value#")),fv.has(e)||(fv.set(e,!0),e.addHook("beforeKeyDown",function(t){var n=Nn(kr,t.keyCode);if(!e.getSettings().enterBeginsEditing&&n("ENTER"))return;n("".concat("SPACE|ENTER","|").concat("DELETE|BACKSPACE"))&&!Ui(t)&&function(t){var n=e.getSelectedRange();if(!n)return;for(var o=0;o<n.length;o++)for(var i=n[o].getTopLeftCorner(),a=n[o].getBottomRightCorner(),r=i.row;r<=a.row;r++)for(var l=i.col;l<=a.col;l++){var s=e.getCellMeta(r,l);if("checkbox"!==s.type)return;var c=e.getCell(r,l);if(null===c||void 0===c)t(r,l,s);else{var u=c.querySelectorAll("input[type=checkbox]");u.length>0&&!s.readOnly&&t(u)}}}(function(){$i(t),t.preventDefault()});n("SPACE|ENTER")&&p();n("DELETE|BACKSPACE")&&p(!0)}))}function gv(e){return"INPUT"===e.tagName&&"checkbox"===e.getAttribute("type")}Jr.getSingleton().add("modifyAutoColumnSizeSeed",function(e,t,n){var o=t.label,i=t.type,a=t.row,r=t.column,l=t.prop;if("checkbox"===i){if(o){var s=o.value,c=o.property,u=n;if(s)u="function"==typeof s?s(a,r,l,n):s;else if(c){var d=this.getDataAtRowProp(a,c);u=null!==d?d:n}e=u}return e}}),yv.RENDERER_TYPE="checkbox";var wv=n("AeMR"),_v=n.n(wv);function Cv(e,t,n,o,i,a,r){var l=a;if(Ll(l)){var s=r.numericFormat,c=s&&s.culture||"-",u=s&&s.pattern,d=r.className||"",h=d.length?d.split(" "):[];if(void 0!==c&&!_v.a.languages()[c]){var f=c.replace("-",""),p=_v.a.allLanguages?_v.a.allLanguages[c]:_v.a[f];p&&_v.a.registerLanguage(p)}_v.a.setLanguage(c),l=_v()(l).format(u||"0"),h.indexOf("htLeft")<0&&h.indexOf("htCenter")<0&&h.indexOf("htRight")<0&&h.indexOf("htJustify")<0&&h.push("htRight"),h.indexOf("htNumeric")<0&&h.push("htNumeric"),r.className=h.join(" ")}Xp(e,t,n,o,i,l,r)}Cv.RENDERER_TYPE="numeric";function kv(e,t,n,o,i,a,r){Xp.apply(this,[e,t,n,o,i,a,r]);var l=r.hashLength||t.innerHTML.length,s=r.hashSymbol||"*",c="";Nl(l-1,function(){c+=s}),Yt(t,c)}kv.RENDERER_TYPE="password";function xv(e,t){var n=e;null!==n&&void 0!==n||(n=""),this.allowEmpty&&""===n?t(!0):this.strict&&this.source?"function"==typeof this.source?this.source(n,Sv(n,t)):Sv(n,t)(this.source):t(!0)}function Sv(e,t){var n=e;return function(e){for(var o=!1,i=0,a=e.length;i<a;i++)if(n===e[i]){o=!0;break}t(o)}}xv.VALIDATOR_TYPE="autocomplete";n("iKeK");function Tv(e,t){var n=rl(Nm,this.instance),o=e,i=!0;null!==o&&void 0!==o||(o="");var a=Qe()(o,this.dateFormat||n.defaultDateFormat,!0).isValid(),r=Qe()(new Date(o)).isValid()||a;if(this.allowEmpty&&""===o&&(r=!0,a=!0),r||(i=!1),!r&&a&&(i=!0),r&&!a)if(!0===this.correctFormat){var l=function(e,t){var n,o=Qe()(am(e)),i=Qe()(e,t),a=e.search(/[A-z]/g)>-1;n=o.isValid()&&o.format("x")===i.format("x")||!i.isValid()||a?o:i;return n.format(t)}(o,this.dateFormat),s=this.instance.toVisualRow(this.row),c=this.instance.toVisualColumn(this.col);this.instance.setDataAtCell(s,c,l,"dateValidator"),i=!0}else i=!1;t(i)}Tv.VALIDATOR_TYPE="date";function Ev(e,t){var n=e;null!==n&&void 0!==n||(n=""),this.allowEmpty&&""===n?t(!0):t(""!==n&&Ll(e))}Ev.VALIDATOR_TYPE="numeric";var Ov=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"];function Dv(e,t){var n=this.timeFormat||"h:mm:ss a",o=!0,i=e;null===i&&(i=""),i=/^\d{3,}$/.test(i)?parseInt(i,10):i;var a=/^\d{1,2}$/.test(i);a&&(i+=":00");var r=Qe()(i,Ov,!0).isValid()?Qe()(i):Qe()(i,n),l=r.isValid(),s=Qe()(i,n,!0).isValid()&&!a;if(this.allowEmpty&&""===i&&(l=!0,s=!0),l||(o=!1),!l&&s&&(o=!0),l&&!s)if(!0===this.correctFormat){var c=r.format(n),u=this.instance.toVisualRow(this.row),d=this.instance.toVisualColumn(this.col);this.instance.setDataAtCell(u,d,c,"timeValidator"),o=!0}else o=!1;t(o)}Dv.VALIDATOR_TYPE="time";var Iv={CELL_TYPE:"autocomplete",editor:_m,renderer:hv,validator:xv},Rv={CELL_TYPE:"checkbox",editor:Em,renderer:yv},Mv={CELL_TYPE:"date",editor:Vm,renderer:hv,validator:Tv},Pv={CELL_TYPE:"dropdown",editor:zm,renderer:hv,validator:xv},Av={CELL_TYPE:"handsontable",editor:hm,renderer:hv},Lv={CELL_TYPE:"numeric",editor:Ym,renderer:Cv,validator:Ev,dataType:"number"},Nv={CELL_TYPE:"password",editor:ov,renderer:kv,copyable:!1},Vv={CELL_TYPE:"time",editor:Jp,renderer:Xp,validator:Dv};function Fv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Hv(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var jv=new Map([["plugin",function(e){return!!ds(e)}],["cell-type",Ws],["editor",il],["renderer",vs],["validator",ks]]),$v=new WeakMap,Uv=[],zv=null,Wv=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),me(this,"hot",t,{writable:!1}),$v.set(this,{hooks:{}}),zv=null,this.pluginName=null,this.pluginsInitializedCallbacks=[],this.isPluginsReady=!1,this.enabled=!1,this.initialized=!1,this.hot.addHook("afterPluginsInitialized",function(){return n.onAfterPluginsInitialized()}),this.hot.addHook("afterUpdateSettings",function(e){return n.onUpdateSettings(e)}),this.hot.addHook("beforeInit",function(){return n.init()})}var t,n,o;return t=e,o=[{key:"PLUGIN_KEY",get:function(){return"base"}}],(n=[{key:"init",value:function(){var e=this;this.pluginName=this.hot.getPluginName(this);var t=this.constructor.PLUGIN_DEPS,n=Array.isArray(t)?t:[];if(n.length>0){var o=[];if(n.forEach(function(e){var t=Fv(e.split(":"),2),n=t[0],i=t[1];if(!jv.has(n))throw new Error('Unknown plugin dependency type "'.concat(n,'" was found.'));jv.get(n)(i)||o.push(" - ".concat(i," (").concat(n,")"))}),o.length>0){var i=["The ".concat(this.pluginName," plugin requires the following modules:\n"),"".concat(o.join("\n"),"\n")].join("");Uv.push(i)}}if(zv||(zv=us()),zv.indexOf("UndoRedo")>=0&&zv.splice(zv.indexOf("UndoRedo"),1),zv.indexOf(this.pluginName)>=0&&zv.splice(zv.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",function(){e.isEnabled&&e.isEnabled()&&e.enablePlugin()}),0===zv.length){if(Uv.length>0){var a=["".concat(Uv.join("\n"),"\n"),"You have to import and register them manually."].join("");throw new Error(a)}this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}},{key:"enablePlugin",value:function(){this.enabled=!0}},{key:"disablePlugin",value:function(){this.eventManager&&this.eventManager.clear(),this.clearHooks(),this.enabled=!1}},{key:"addHook",value:function(e,t){$v.get(this).hooks[e]=$v.get(this).hooks[e]||[];var n=$v.get(this).hooks[e];this.hot.addHook(e,t),n.push(t),$v.get(this).hooks[e]=n}},{key:"removeHooks",value:function(e){var t=this;K($v.get(this).hooks[e]||[],function(n){t.hot.removeHook(e,n)})}},{key:"clearHooks",value:function(){var e=this,t=$v.get(this).hooks;ve(t,function(t,n){return e.removeHooks(n)}),t.length=0}},{key:"callOnPluginsReady",value:function(e){this.isPluginsReady?e():this.pluginsInitializedCallbacks.push(e)}},{key:"onAfterPluginsInitialized",value:function(){K(this.pluginsInitializedCallbacks,function(e){return e()}),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}},{key:"onUpdateSettings",value:function(){this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&this.updatePlugin())}},{key:"updatePlugin",value:function(){}},{key:"destroy",value:function(){var e=this;this.eventManager&&this.eventManager.destroy(),this.clearHooks(),ve(this,function(t,n){"hot"!==n&&(e[n]=null)}),delete this.t,delete this.hot}}])&&Hv(t.prototype,n),o&&Hv(t,o),e}();function qv(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Kv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootWindow=n,this.prefix=t,this.savedKeys=[],this.loadSavedKeys()}var t,n,o;return t=e,(n=[{key:"saveValue",value:function(e,t){this.rootWindow.localStorage.setItem("".concat(this.prefix,"_").concat(e),JSON.stringify(t)),-1===this.savedKeys.indexOf(e)&&(this.savedKeys.push(e),this.saveSavedKeys())}},{key:"loadValue",value:function(e,t){var n=void 0===e?t:e,o=this.rootWindow.localStorage.getItem("".concat(this.prefix,"_").concat(n));return null===o?void 0:JSON.parse(o)}},{key:"reset",value:function(e){this.rootWindow.localStorage.removeItem("".concat(this.prefix,"_").concat(e))}},{key:"resetAll",value:function(){var e=this;K(this.savedKeys,function(t,n){e.rootWindow.localStorage.removeItem("".concat(e.prefix,"_").concat(e.savedKeys[n]))}),this.clearSavedKeys()}},{key:"loadSavedKeys",value:function(){var e=this.rootWindow.localStorage.getItem("".concat(this.prefix,"__persistentStateKeys")),t="string"==typeof e?JSON.parse(e):void 0;this.savedKeys=t||[]}},{key:"saveSavedKeys",value:function(){this.rootWindow.localStorage.setItem("".concat(this.prefix,"__persistentStateKeys"),JSON.stringify(this.savedKeys))}},{key:"clearSavedKeys",value:function(){this.savedKeys.length=0,this.saveSavedKeys()}}])&&qv(t.prototype,n),o&&qv(t,o),e}();function Gv(e){"@babel/helpers - typeof";return(Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jv(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Yv(e,t,n){return(Yv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zv(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Xv(e,t){return(Xv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Zv(e);if(t){var i=Zv(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Gv(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Zv(e){return(Zv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().register("persistentStateSave"),Jr.getSingleton().register("persistentStateLoad"),Jr.getSingleton().register("persistentStateReset");var eb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xv(e,t)}(a,Wv);var t,n,o,i=Qv(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).storage=void 0,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"persistentState"}},{key:"PLUGIN_PRIORITY",get:function(){return 0}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().persistentState}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.storage||(this.storage=new Kv(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",function(t,n){return e.saveValue(t,n)}),this.addHook("persistentStateLoad",function(t,n){return e.loadValue(t,n)}),this.addHook("persistentStateReset",function(){return e.resetValue()}),Yv(Zv(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.storage=void 0,Yv(Zv(a.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),Yv(Zv(a.prototype),"updatePlugin",this).call(this)}},{key:"loadValue",value:function(e,t){t.value=this.storage.loadValue(e)}},{key:"saveValue",value:function(e,t){this.storage.saveValue(e,t)}},{key:"resetValue",value:function(e){void 0===e?this.storage.resetAll():this.storage.reset(e)}},{key:"destroy",value:function(){Yv(Zv(a.prototype),"destroy",this).call(this)}}])&&Jv(t.prototype,n),o&&Jv(t,o),a}();function tb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var nb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.samples=null,this.dataFactory=t,this.customSampleCount=null,this.allowDuplicates=!1}var t,n,o;return t=e,o=[{key:"SAMPLE_COUNT",get:function(){return 3}}],(n=[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:e.SAMPLE_COUNT}},{key:"setSampleCount",value:function(e){this.customSampleCount=e}},{key:"setAllowDuplicates",value:function(e){this.allowDuplicates=e}},{key:"generateRowSamples",value:function(e,t){return this.generateSamples("row",t,e)}},{key:"generateColumnSamples",value:function(e,t){return this.generateSamples("col",t,e)}},{key:"generateSamples",value:function(e,t,n){var o=this,i=new Map,a="number"==typeof n?{from:n,to:n}:n;return Nl(a.from,a.to,function(n){var a=o.generateSample(e,t,n);i.set(n,a)}),i}},{key:"generateSample",value:function(e,t,n){var o=this;if("row"!==e&&"col"!==e)throw new Error("Unsupported sample type");var i=new Map,a="row"===e?"col":"row",r=[];return Nl(t.from,t.to,function(t){var l,s="row"===e?o.dataFactory(n,t):o.dataFactory(t,n),c=s.value,u=s.bundleSeed,d="string"==typeof u&&u.length>0;l=d?u:pe(c)?"".concat(Object.keys(c).length):Array.isArray(c)?"".concat(c.length):"".concat(nt(c).length),i.has(l)||i.set(l,{needed:o.getSampleCount(),strings:[]});var h=i.get(l);h.needed&&((!(r.indexOf(c)>-1)||o.allowDuplicates||d)&&(h.strings.push(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({value:c},a,t)),r.push(c),h.needed-=1))}),i}}])&&tb(t.prototype,n),o&&tb(t,o),e}();function ob(e){"@babel/helpers - typeof";return(ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ib(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ab(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function rb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lb(e,t,n){return(lb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=db(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function sb(e,t){return(sb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=db(e);if(t){var i=db(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===ob(t)||"function"==typeof t))return t;return ub(e)}(this,n)}}function ub(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function db(e){return(db=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().register("modifyAutoColumnSizeSeed");var hb=new WeakMap,fb="autoColumnSize",pb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sb(e,t)}(a,Wv);var t,n,o,i=cb(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),hb.set(ub(t),{cachedColumnHeaders:[]}),t.ghostTable=new im(t.hot),t.samplesGenerator=new nb(function(e,n){var o=t.hot.getCellMeta(e,n),i="";o.spanned||(i=t.hot.getDataAtCell(e,n));var a="";return t.hot.hasHook("modifyAutoColumnSizeSeed")&&(a=t.hot.runHooks("modifyAutoColumnSizeSeed",a,o,i)),{value:i,bundleSeed:a}}),t.firstCalculation=!0,t.inProgress=!1,t.measuredColumns=0,t.columnWidthsMap=new Cc,t.hot.columnIndexMapper.registerMap(fb,t.columnWidthsMap),t.addHook("beforeColumnResize",function(e,n,o){return t.onBeforeColumnResize(e,n,o)}),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"autoColumnSize"}},{key:"PLUGIN_PRIORITY",get:function(){return 10}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}],(n=[{key:"isEnabled",value:function(){return!1!==this.hot.getSettings().autoColumnSize&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var t=this.hot.getSettings().autoColumnSize;t&&null!==t.useHeaders&&void 0!==t.useHeaders&&this.ghostTable.setSetting("useHeaders",t.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData()}),this.addHook("beforeChange",function(t){return e.onBeforeChange(t)}),this.addHook("beforeRender",function(t){return e.onBeforeRender(t)}),this.addHook("modifyColWidth",function(t,n){return e.getColumnWidth(n,t)}),this.addHook("afterInit",function(){return e.onAfterInit()}),lb(db(a.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&&(this.clearCache(e),this.calculateVisibleColumnsWidth()),lb(db(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this;lb(db(a.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(t,n,o){return e.onBeforeColumnResize(t,n,o)})}},{key:"calculateVisibleColumnsWidth",value:function(){if(this.hot.countRows()){var e=this.hot.renderCall,t=this.getFirstVisibleColumn(),n=this.getLastVisibleColumn();-1!==t&&-1!==n&&this.calculateColumnsWidth({from:t,to:n},void 0,e)}}},{key:"calculateColumnsWidth",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="number"==typeof t?{from:t,to:t}:t,a="number"==typeof n?{from:n,to:n}:n;Nl(i.from,i.to,function(t){var n=e.hot.toPhysicalColumn(t);(null===n&&(n=t),o||null===e.columnWidthsMap.getValueAtIndex(n)&&!e.hot._getColWidthFromSettings(n))&&K(e.samplesGenerator.generateColumnSamples(t,a),function(t){var n=ib(t,2),o=n[0],i=n[1];return e.ghostTable.addColumn(o,i)})}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){e.ghostTable.getWidths(function(t,n){var o=e.hot.toPhysicalColumn(t);e.columnWidthsMap.setValueAtIndex(o,n)})},!0),this.measuredColumns=i.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},n=0,o=this.hot.countCols()-1,i=null;this.inProgress=!0;var r=this.getSyncCalculationLimit();this.firstCalculation&&r>=0&&(this.calculateColumnsWidth({from:0,to:r},t),this.firstCalculation=!1,n=r+1),n<o?function r(){if(!e.hot)return N(i),void(e.inProgress=!1);e.calculateColumnsWidth({from:n,to:Math.min(n+a.CALCULATION_STEP,o)},t),(n=n+a.CALCULATION_STEP+1)<o?i=M(r):(N(i),e.inProgress=!1,e.hot.view.adjustElementsSize())}():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings().autoColumnSize,t=e&&_e(e,"samplingRatio")?e.samplingRatio:void 0,n=e&&_e(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view.wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var e=this.hot.getSettings().autoColumnSize,t=a.SYNC_CALCULATION_LIMIT,n=this.hot.countCols()-1;return pe(e)&&(St(t=e.syncLimit)?t=Fl(n,t):t>>=0),Math.min(t,n)}},{key:"getColumnWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t;return void 0===o&&(o=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),n&&"number"==typeof o&&(o=Math.max(o,jn.DEFAULT_WIDTH))),o}},{key:"getFirstVisibleColumn",value:function(){var e=this.hot.view.wt;if(e.wtViewport.columnsVisibleCalculator){var t=e.wtTable.getFirstVisibleColumn();if(-1!==t)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(t)}if(e.wtViewport.columnsRenderCalculator){var n=e.wtTable.getFirstRenderedColumn();if(-1!==n)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(n)}return-1}},{key:"getLastVisibleColumn",value:function(){var e=this.hot.view.wt;if(e.wtViewport.columnsVisibleCalculator){var t=e.wtTable.getLastVisibleColumn();if(-1!==t)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(t)}if(e.wtViewport.columnsRenderCalculator){var n=e.wtTable.getLastRenderedColumn();if(-1!==n)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(n)}return-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var e=this.hot.getColHeader(),t=hb.get(this).cachedColumnHeaders;return z(e,function(e,n,o){var i=t.length;return(i-1<o||t[o]!==n)&&e.push(o),i-1<o?t.push(n):t[o]=n,e},[])}},{key:"clearCache",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length?this.hot.batchExecution(function(){K(t,function(t){e.columnWidthsMap.setValueAtIndex(t,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!W(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(e){return null===e}).length}},{key:"onBeforeRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){e.hot&&e.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(e){var t=this,n=q(e,function(e){var n=ib(e,2)[1];return t.hot.toPhysicalColumn(t.hot.propToCol(n))});this.clearCache(Array.from(new Set(n)))}},{key:"onBeforeColumnResize",value:function(e,t,n){var o=e;return n&&(this.calculateColumnsWidth(t,void 0,!0),o=this.getColumnWidth(t,void 0,!1)),o}},{key:"onAfterInit",value:function(){hb.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"destroy",value:function(){this.ghostTable.clean(),lb(db(a.prototype),"destroy",this).call(this)}}])&&rb(t.prototype,n),o&&rb(t,o),a}(),mb={horizontal:"horizontal",vertical:"vertical"};function vb(e){"@babel/helpers - typeof";return(vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bb(e){return function(e){if(Array.isArray(e))return wb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||gb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gb(e,t){if(e){if("string"==typeof e)return wb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wb(e,t):void 0}}function wb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Cb(e,t,n){return(Cb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tb(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function kb(e,t){return(kb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Tb(e);if(t){var i=Tb(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===vb(t)||"function"==typeof t))return t;return Sb(e)}(this,n)}}function Sb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tb(e){return(Tb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().register("modifyAutofillRange"),Jr.getSingleton().register("beforeAutofill"),Jr.getSingleton().register("afterAutofill");var Eb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kb(e,t)}(a,Wv);var t,n,o,i=xb(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).eventManager=new Gi(Sb(t)),t.addingStarted=!1,t.mouseDownOnCellCorner=!1,t.mouseDragOutside=!1,t.handleDraggedCells=0,t.directions=[],t.autoInsertRow=!1,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"autofill"}},{key:"PLUGIN_PRIORITY",get:function(){return 20}}],(n=[{key:"isEnabled",value:function(){return this.hot.getSettings().fillHandle}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",function(t){return e.onAfterCellCornerMouseDown(t)}),this.addHook("afterOnCellCornerDblClick",function(t){return e.onCellCornerDblClick(t)}),this.addHook("beforeOnCellMouseOver",function(t,n){return e.onBeforeCellMouseOver(n)}),Cb(Tb(a.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),Cb(Tb(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.clearMappedSettings(),Cb(Tb(a.prototype),"disablePlugin",this).call(this)}},{key:"getSelectionData",value:function(){var e=this,t=this.hot.getSelectedRangeLast(),n=t.getTopLeftCorner(),o=n.row,i=n.col,a=t.getBottomRightCorner(),r=a.row,l=a.col,s=[],c=[],u=[];return K(this.hot.runHooks("modifyCopyableRange",[{startRow:o,startCol:i,endRow:r,endCol:l}]),function(e){for(var t=e.startRow;t<=e.endRow;t+=1)-1===s.indexOf(t)&&s.push(t);for(var n=e.startCol;n<=e.endCol;n+=1)-1===c.indexOf(n)&&c.push(n)}),K(s,function(t){var n=[];K(c,function(o){n.push(e.hot.getCopyableData(t,o))}),u.push(n)}),u}},{key:"fillIn",value:function(){if(this.hot.selection.highlight.getFill().isEmpty())return!1;var e=yb(this.hot.selection.highlight.getFill().getVisualCorners(),4),t=e[0],n=e[1],o=e[2],i=e[3],a=this.hot.getSelectedRangeLast(),r=a.getTopLeftCorner(),l=a.getBottomRightCorner(),s=[Math.min(r.row,t),Math.min(r.col,n),Math.max(l.row,o),Math.max(l.col,i)];this.resetSelectionOfDraggedArea();var c=[r.row,r.col,l.row,l.col],u=function(e,t){var n,o,i;return t[0]===e[0]&&t[1]<e[1]?(i="left",n=new qn(t[0],t[1]),o=new qn(t[2],e[1]-1)):t[2]===e[2]&&t[0]===e[0]&&t[3]>e[3]?(i="right",n=new qn(t[0],e[3]+1),o=new qn(t[2],t[3])):t[0]<e[0]&&t[1]===e[1]?(i="up",n=new qn(t[0],t[1]),o=new qn(e[0]-1,t[3])):t[2]>e[2]&&t[1]===e[1]&&(i="down",n=new qn(e[2]+1,t[1]),o=new qn(t[2],t[3])),n&&n.normalize(),o&&o.normalize(),{directionOfDrag:i,startOfDragCoords:n,endOfDragCoords:o}}(c,s=this.hot.runHooks("modifyAutofillRange",s,c)),d=u.directionOfDrag,h=u.startOfDragCoords,f=u.endOfDragCoords;if(h&&h.row>-1&&h.col>-1){var p=this.getSelectionData();if(!1===this.hot.runHooks("beforeAutofill",h,f,p))return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;var m=function(e,t,n,o){var i=n.length,a=n?n[0].length:0,r=[],l=t.row-e.row,s=t.col-e.col;if(-1!==["down","up"].indexOf(o)){for(var c=[],u=0;u<s;u++){var d=parseInt(n[0][u],10),h=parseInt(n[i-1][u],10),f=("down"===o?h-d:d-h)/(i-1)||0;c.push(f)}r.push(c)}if(-1!==["right","left"].indexOf(o))for(var p=0;p<l;p++){var m=parseInt(n[p][0],10),v=parseInt(n[p][a-1],10),b=("right"===o?v-m:m-v)/(a-1)||0;r.push([b])}return r}(h,f,p,d),v=p;if(["up","left"].indexOf(d)>-1){v=[];var b=null,y=null;if("up"===d){y=(b=f.row-h.row+1)%p.length;for(var g=0;g<b;g++)v.push(p[(g+(p.length-y))%p.length])}else{y=(b=f.col-h.col+1)%p[0].length;for(var w=0;w<p.length;w++){v.push([]);for(var _=0;_<b;_++)v[w].push(p[w][(_+(p[w].length-y))%p[w].length])}}}this.hot.populateFromArray(h.row,h.col,v,f.row,f.col,"".concat(this.pluginName,".fill"),null,d,m),this.setSelection(s),this.hot.runHooks("afterAutofill",h,f,p)}else this.hot._refreshBorders();return!0}},{key:"reduceSelectionAreaIfNeeded",value:function(e){return e.row<0&&(e.row=0),e.col<0&&(e.col=0),e}},{key:"getCoordsOfDragAndDropBorders",value:function(e){var t=this.hot.getSelectedRangeLast(),n=t.getBottomRightCorner(),o=e;if(this.directions.includes(mb.vertical)&&this.directions.includes(mb.horizontal)){var i=t.getTopLeftCorner();(n.col<=e.col||i.col>=e.col)&&(o=new qn(n.row,e.col)),(n.row<e.row||i.row>e.row)&&(o=new qn(e.row,n.col))}else if(this.directions.includes(mb.vertical))o=new qn(e.row,n.col);else{if(!this.directions.includes(mb.horizontal))return;o=new qn(n.row,e.col)}return this.reduceSelectionAreaIfNeeded(o)}},{key:"showBorder",value:function(e){var t=this.getCoordsOfDragAndDropBorders(e);t&&this.redrawBorders(t)}},{key:"addRow",value:function(){var e=this;this.hot._registerTimeout(function(){e.hot.alter("insert_row",void 0,1,"".concat(e.pluginName,".fill")),e.addingStarted=!1},200)}},{key:"addNewRowIfNeeded",value:function(){if(!this.hot.selection.highlight.getFill().isEmpty()&&!1===this.addingStarted&&this.autoInsertRow){var e=this.hot.getSelectedLast(),t=this.hot.selection.highlight.getFill().getVisualCorners(),n=this.hot.countRows();e[2]<n-1&&t[2]===n-1&&(this.addingStarted=!0,this.addRow())}}},{key:"getIndexOfLastAdjacentFilledInRow",value:function(e){for(var t,n=this.hot.getData(),o=this.hot.countRows(),i=e[2]+1;i<o;i++){for(var a=e[1];a<=e[3];a++){if(n[i][a])return-1}var r=n[i][e[1]-1],l=n[i][e[3]+1];(r||l)&&(t=i)}return t}},{key:"addSelectionFromStartAreaToSpecificRowIndex",value:function(e,t){this.hot.selection.highlight.getFill().clear().add(new qn(e[0],e[1])).add(new qn(t,e[3])).commit()}},{key:"setSelection",value:function(e){var t;(t=this.hot).selectCell.apply(t,bb(q(e,function(e){return Math.max(e,0)})).concat([!1,!1]))}},{key:"selectAdjacent",value:function(){var e=this.hot.getSelectedLast(),t=this.getIndexOfLastAdjacentFilledInRow(e);return-1!==t&&void 0!==t&&(this.addSelectionFromStartAreaToSpecificRowIndex(e,t),!0)}},{key:"resetSelectionOfDraggedArea",value:function(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}},{key:"redrawBorders",value:function(e){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(e).commit(),this.hot.view.render()}},{key:"getIfMouseWasDraggedOutside",value:function(e){var t=this.hot.rootDocument.documentElement,n=Zt(this.hot.table).top-(this.hot.rootWindow.pageYOffset||t.scrollTop)+dn(this.hot.table),o=Zt(this.hot.table).left-(this.hot.rootWindow.pageXOffset||t.scrollLeft)+un(this.hot.table);return e.clientY>n&&e.clientX<=o}},{key:"registerEvents",value:function(){var e=this,t=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(t,"mouseup",function(){return e.onMouseUp()}),this.eventManager.addEventListener(t,"mousemove",function(t){return e.onMouseMove(t)})}},{key:"onCellCornerDblClick",value:function(){this.selectAdjacent()&&this.fillIn()}},{key:"onAfterCellCornerMouseDown",value:function(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}},{key:"onBeforeCellMouseOver",value:function(e){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(e),this.addNewRowIfNeeded())}},{key:"onMouseUp",value:function(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}},{key:"onMouseMove",value:function(e){var t=this.getIfMouseWasDraggedOutside(e);!1===this.addingStarted&&this.handleDraggedCells>0&&t?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}},{key:"clearMappedSettings",value:function(){this.directions.length=0,this.autoInsertRow=!1}},{key:"mapSettings",value:function(){var e=function(e){var t={};return!0===e?(t.directions=Object.keys(mb),t.autoInsertRow=!0):pe(e)?(ot(e.autoInsertRow)?e.direction===mb.horizontal?t.autoInsertRow=!1:t.autoInsertRow=e.autoInsertRow:t.autoInsertRow=!1,ot(e.direction)?t.directions=[e.direction]:t.directions=Object.keys(mb)):"string"==typeof e?(t.directions=[e],t.autoInsertRow=!0):(t.directions=[],t.autoInsertRow=!1),t}(this.hot.getSettings().fillHandle);this.directions=e.directions,this.autoInsertRow=e.autoInsertRow}},{key:"destroy",value:function(){Cb(Tb(a.prototype),"destroy",this).call(this)}}])&&_b(t.prototype,n),o&&_b(t,o),a}();function Ob(e){"@babel/helpers - typeof";return(Ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Db(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ib(e,t,n){return(Ib="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ab(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Rb(e,t){return(Rb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Ab(e);if(t){var i=Ab(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Ob(t)||"function"==typeof t))return t;return Pb(e)}(this,n)}}function Pb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ab(e){return(Ab=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lb=new WeakMap,Nb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rb(e,t)}(a,Wv);var t,n,o,i=Mb(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=(t=i.call(this,e)).hot.rootDocument;return t.currentTH=null,t.currentRow=null,t.selectedRows=[],t.currentHeight=null,t.newSize=null,t.startY=null,t.startHeight=null,t.startOffset=null,t.handle=n.createElement("DIV"),t.guide=n.createElement("DIV"),t.eventManager=new Gi(Pb(t)),t.pressed=null,t.dblclick=0,t.autoresizeTimeout=null,t.rowHeightsMap=void 0,Lb.set(Pb(t),{config:void 0}),zt(t.handle,"manualRowResizer"),zt(t.guide,"manualRowResizerGuide"),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"manualRowResize"}},{key:"PLUGIN_PRIORITY",get:function(){return 30}}],(n=[{key:"isEnabled",value:function(){return this.hot.getSettings().manualRowResize}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.rowHeightsMap=new Cc,this.rowHeightsMap.addLocalHook("init",function(){return e.onMapInit()}),this.hot.rowIndexMapper.registerMap(this.pluginName,this.rowHeightsMap),this.addHook("modifyRowHeight",function(t,n){return e.onModifyRowHeight(t,n)}),this.bindEvents(),Ib(Ab(a.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),Ib(Ab(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){Lb.get(this).config=this.rowHeightsMap.getValues(),this.hot.rowIndexMapper.unregisterMap(this.pluginName),Ib(Ab(a.prototype),"disablePlugin",this).call(this)}},{key:"saveManualRowHeights",value:function(){this.hot.runHooks("persistentStateSave","manualRowHeights",this.rowHeightsMap.getValues())}},{key:"loadManualRowHeights",value:function(){var e={};return this.hot.runHooks("persistentStateLoad","manualRowHeights",e),e.value}},{key:"setManualSize",value:function(e,t){var n=this.hot.toPhysicalRow(e),o=Math.max(t,zn.DEFAULT_HEIGHT);return this.rowHeightsMap.setValueAtIndex(n,o),o}},{key:"setupHandlePosition",value:function(e){var t=this;this.currentTH=e;var n=this.hot.view,o=n.wt,i=n.wt.wtTable.getCoords(this.currentTH),a=i.row;if(!(a<0)){var r,l=un(this.currentTH),s=this.currentTH.getBoundingClientRect(),c=a<o.getSetting("fixedRowsTop"),u=a>=n.countNotHiddenRowIndexes(0,1)-o.getSetting("fixedRowsBottom");c?r=o.wtOverlays.topLeftCornerOverlay.getRelativeCellPosition(this.currentTH,i.row,i.col):u&&(r=o.wtOverlays.bottomLeftCornerOverlay.getRelativeCellPosition(this.currentTH,i.row,i.col)),r||(r=o.wtOverlays.leftOverlay.getRelativeCellPosition(this.currentTH,i.row,i.col)),this.currentRow=this.hot.rowIndexMapper.getVisualFromRenderableIndex(a),this.selectedRows=[];var d=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&d)K(this.hot.getSelectedRange(),function(e){Nl(e.getTopLeftCorner().row,e.getBottomLeftCorner().row,function(e){t.selectedRows.includes(e)||t.selectedRows.push(e)})});this.selectedRows.includes(this.currentRow)||(this.selectedRows=[this.currentRow]),this.startOffset=r.top-6,this.startHeight=parseInt(s.height,10),this.handle.style.top="".concat(this.startOffset+this.startHeight,"px"),this.handle.style.left="".concat(r.left,"px"),this.handle.style.width="".concat(l,"px"),this.hot.rootElement.appendChild(this.handle)}}},{key:"refreshHandlePosition",value:function(){this.handle.style.top="".concat(this.startOffset+this.currentHeight,"px")}},{key:"setupGuidePosition",value:function(){var e=parseInt(un(this.handle),10),t=parseInt(this.handle.style.left,10)+e,n=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);zt(this.handle,"active"),zt(this.guide,"active"),this.guide.style.top=this.handle.style.top,this.guide.style.left="".concat(t,"px"),this.guide.style.width="".concat(n-e,"px"),this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style.top=this.handle.style.top}},{key:"hideHandleAndGuide",value:function(){Wt(this.handle,"active"),Wt(this.guide,"active")}},{key:"checkIfRowHeader",value:function(e){var t,n;return Lt(e,["TH"],this.hot.rootElement)&&"TBODY"===(null===(t=e.parentNode)||void 0===t?void 0:null===(n=t.parentNode)||void 0===n?void 0:n.tagName)}},{key:"getClosestTHParent",value:function(e){return"TABLE"!==e.tagName?"TH"===e.tagName?e:this.getClosestTHParent(e.parentNode):null}},{key:"getActualRowHeight",value:function(e){var t=this.hot.view.wt.wtTable.getRowHeight(e);return void 0!==t&&this.newSize<t?t:this.newSize}},{key:"onMouseOver",value:function(e){if(!In(e.target)&&this.checkIfRowHeader(e.target)){var t=this.getClosestTHParent(e.target);t&&(this.pressed||this.setupHandlePosition(t))}}},{key:"afterMouseDownTimeout",value:function(){var e=this,t=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.adjustElementsSize(!0)},n=function(n,o){var i=e.hot.runHooks("beforeRowResize",e.getActualRowHeight(n),n,!0);void 0!==i&&(e.newSize=i),e.setManualSize(n,e.newSize),e.hot.runHooks("afterRowResize",e.getActualRowHeight(n),n,!0),o&&t()};this.dblclick>=2&&(this.selectedRows.length>1?(K(this.selectedRows,function(e){n(e)}),t()):K(this.selectedRows,function(e){n(e,!0)}));this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(e){var t=this;Ut(e.target,"manualRowResizer")&&(this.setupHandlePosition(this.currentTH),this.setupGuidePosition(),this.pressed=!0,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return t.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick+=1,this.startY=e.pageY,this.newSize=this.startHeight)}},{key:"onMouseMove",value:function(e){var t=this;this.pressed&&(this.currentHeight=this.startHeight+(e.pageY-this.startY),K(this.selectedRows,function(e){t.newSize=t.setManualSize(e,t.currentHeight)}),this.refreshHandlePosition(),this.refreshGuidePosition())}},{key:"onMouseUp",value:function(){var e=this,t=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.adjustElementsSize(!0)},n=function(n,o){e.hot.runHooks("beforeRowResize",e.getActualRowHeight(n),n,!1),o&&t(),e.saveManualRowHeights(),e.hot.runHooks("afterRowResize",e.getActualRowHeight(n),n,!1)};if(this.pressed){if(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!==this.startHeight)this.selectedRows.length>1?(K(this.selectedRows,function(e){n(e)}),t()):K(this.selectedRows,function(e){n(e,!0)});this.setupHandlePosition(this.currentTH)}}},{key:"bindEvents",value:function(){var e=this,t=this.hot,n=t.rootElement,o=t.rootWindow;this.eventManager.addEventListener(n,"mouseover",function(t){return e.onMouseOver(t)}),this.eventManager.addEventListener(n,"mousedown",function(t){return e.onMouseDown(t)}),this.eventManager.addEventListener(o,"mousemove",function(t){return e.onMouseMove(t)}),this.eventManager.addEventListener(o,"mouseup",function(){return e.onMouseUp()})}},{key:"onModifyRowHeight",value:function(e,t){var n=e;if(this.enabled){var o=this.hot.toPhysicalRow(t),i=this.rowHeightsMap.getValueAtIndex(o);this.hot.getSettings().manualRowResize&&i&&(n=i)}return n}},{key:"onMapInit",value:function(){var e=this,t=Lb.get(this),n=this.hot.getSettings().manualRowResize,o=this.loadManualRowHeights();this.hot.batchExecution(function(){void 0!==o?o.forEach(function(t,n){e.rowHeightsMap.setValueAtIndex(n,t)}):Array.isArray(n)?(n.forEach(function(t,n){e.rowHeightsMap.setValueAtIndex(n,t)}),t.config=n):!0===n&&Array.isArray(t.config)&&t.config.forEach(function(t,n){e.rowHeightsMap.setValueAtIndex(n,t)})},!0)}},{key:"destroy",value:function(){Ib(Ab(a.prototype),"destroy",this).call(this)}}])&&Db(t.prototype,n),o&&Db(t,o),a}();function Vb(e){"@babel/helpers - typeof";return(Vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Hb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function jb(e,t,n){return(jb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zb(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $b(e,t){return($b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ub(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=zb(e);if(t){var i=zb(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Vb(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zb(e){return(zb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wb="autoRowSize",qb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$b(e,t)}(a,Wv);var t,n,o,i=Ub(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).rowHeightsMap=void 0,t.headerHeight=null,t.ghostTable=new im(t.hot),t.samplesGenerator=new nb(function(e,n){var o;return e>=0?o=t.hot.getDataAtCell(e,n):-1===e&&(o=t.hot.getColHeader(n)),{value:o}}),t.firstCalculation=!0,t.inProgress=!1,t.measuredRows=0,t.rowHeightsMap=new Cc,t.hot.rowIndexMapper.registerMap(Wb,t.rowHeightsMap),t.addHook("beforeRowResize",function(e,n,o){return t.onBeforeRowResize(e,n,o)}),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"autoRowSize"}},{key:"PLUGIN_PRIORITY",get:function(){return 40}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 500}}],(n=[{key:"isEnabled",value:function(){var e=this.hot.getSettings().autoRowSize;return!0===e||pe(e)}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData()}),this.addHook("beforeChange",function(t){return e.onBeforeChange(t)}),this.addHook("beforeColumnResize",function(){return e.recalculateAllRowsHeight()}),this.addHook("beforeRender",function(t){return e.onBeforeRender(t)}),this.addHook("modifyRowHeight",function(t,n){return e.getRowHeight(n,t)}),this.addHook("modifyColumnHeaderHeight",function(){return e.getColumnHeaderHeight()}),jb(zb(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var e=this;this.headerHeight=null,jb(zb(a.prototype),"disablePlugin",this).call(this),this.addHook("beforeRowResize",function(t,n,o){return e.onBeforeRowResize(t,n,o)})}},{key:"calculateRowsHeight",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="number"==typeof t?{from:t,to:t}:t,a="number"==typeof n?{from:n,to:n}:n;if(null!==this.hot.getColHeader(0)){var r=this.samplesGenerator.generateRowSamples(-1,a);this.ghostTable.addColumnHeadersRow(r.get(-1))}Nl(i.from,i.to,function(t){(o||null===e.rowHeightsMap.getValueAtIndex(t))&&K(e.samplesGenerator.generateRowSamples(t,a),function(t){var n=Fb(t,2),o=n[0],i=n[1];return e.ghostTable.addRow(o,i)})}),this.ghostTable.rows.length&&(this.hot.batchExecution(function(){e.ghostTable.getHeights(function(t,n){t<0?e.headerHeight=n:e.rowHeightsMap.setValueAtIndex(e.hot.toPhysicalRow(t),n)})},!0),this.measuredRows=i.to+1,this.ghostTable.clean())}},{key:"calculateAllRowsHeight",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},n=0,o=this.hot.countRows()-1,i=null;this.inProgress=!0;var r=this.getSyncCalculationLimit();this.firstCalculation&&r>=0&&(this.calculateRowsHeight({from:0,to:r},t),this.firstCalculation=!1,n=r+1),n<o?function r(){if(!e.hot)return N(i),void(e.inProgress=!1);e.calculateRowsHeight({from:n,to:Math.min(n+a.CALCULATION_STEP,o)},t),(n=n+a.CALCULATION_STEP+1)<o?i=M(r):(N(i),e.inProgress=!1,e.hot.view.adjustElementsSize(!0),e.hot.view.wt.wtOverlays.leftOverlay.needFullRender&&e.hot.view.wt.wtOverlays.leftOverlay.clone.draw())}():(this.inProgress=!1,this.hot.view.adjustElementsSize(!1))}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings().autoRowSize,t=e&&_e(e,"samplingRatio")?e.samplingRatio:void 0,n=e&&_e(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllRowsHeight",value:function(){Qt(this.hot.view.wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllRowsHeight())}},{key:"getSyncCalculationLimit",value:function(){var e=this.hot.getSettings().autoRowSize,t=a.SYNC_CALCULATION_LIMIT,n=this.hot.countRows()-1;return pe(e)&&(St(t=e.syncLimit)?t=Fl(n,t):t>>=0),Math.min(t,n)}},{key:"getRowHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(e)),o=t;return null!==n&&n>(t||0)&&(o=n),o}},{key:"getColumnHeaderHeight",value:function(){return this.headerHeight}},{key:"getFirstVisibleRow",value:function(){var e=this.hot.view.wt;return e.wtViewport.rowsVisibleCalculator?e.wtTable.getFirstVisibleRow():e.wtViewport.rowsRenderCalculator?e.wtTable.getFirstRenderedRow():-1}},{key:"getLastVisibleRow",value:function(){var e=this.hot.view.wt;return e.wtViewport.rowsVisibleCalculator?e.wtTable.getLastVisibleRow():e.wtViewport.rowsRenderCalculator?e.wtTable.getLastRenderedRow():-1}},{key:"clearCache",value:function(){this.headerHeight=null,this.rowHeightsMap.init()}},{key:"clearCacheByRange",value:function(e){var t=this,n="number"==typeof e?{from:e,to:e}:e,o=n.from,i=n.to;this.hot.batchExecution(function(){Nl(Math.min(o,i),Math.max(o,i),function(e){t.rowHeightsMap.setValueAtIndex(e,null)})},!0)}},{key:"isNeedRecalculate",value:function(){return!!W(this.rowHeightsMap.getValues().slice(0,this.measuredRows),function(e){return null===e}).length}},{key:"onBeforeRender",value:function(){var e=this.hot.renderCall,t=this.hot.getSettings().fixedRowsBottom,n=this.getFirstVisibleRow(),o=this.getLastVisibleRow();if(-1!==n&&-1!==o){if(this.calculateRowsHeight({from:n,to:o},void 0,e),t){var i=this.hot.countRows()-1;this.calculateRowsHeight({from:i-t,to:i})}this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllRowsHeight()}}},{key:"onBeforeRowMove",value:function(e,t){this.clearCacheByRange({from:e,to:t}),this.calculateAllRowsHeight()}},{key:"onBeforeRowResize",value:function(e,t,n){var o=e;return n&&(this.calculateRowsHeight(t,void 0,!0),o=this.getRowHeight(t)),o}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllRowsHeight():setTimeout(function(){e.hot&&e.recalculateAllRowsHeight()},0)}},{key:"onBeforeChange",value:function(e){var t=null;1===e.length?t=e[0][0]:e.length>1&&(t={from:e[0][0],to:e[e.length-1][0]}),null!==t&&this.clearCacheByRange(t)}},{key:"destroy",value:function(){this.ghostTable.clean(),jb(zb(a.prototype),"destroy",this).call(this)}}])&&Hb(t.prototype,n),o&&Hb(t,o),a}();function Kb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Gb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Xb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Qb=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"],Zb=!1,ey=!0,ty=!0,ny=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.sortingStates=new zc,this.sortEmptyCells=Zb,this.indicator=ey,this.headerAction=ty,this.compareFunctionFactory=void 0,this.mapName=n,this.hot.columnIndexMapper.registerMap(n,this.sortingStates)}var t,n,o;return t=e,(n=[{key:"updateAllColumnsProperties",value:function(e){var t=this;pe(e)&&ve(e,function(e,n){Qb.includes(n)&&(t[n]=e)})}},{key:"getAllColumnsProperties",value:function(){var e={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return"function"==typeof this.compareFunctionFactory&&(e.compareFunctionFactory=this.compareFunctionFactory),e}},{key:"getSortOrderOfColumn",value:function(e){var t;return null===(t=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))||void 0===t?void 0:t.sortOrder}},{key:"getIndexOfColumnInSortQueue",value:function(e){return e=this.hot.toPhysicalColumn(e),this.sortingStates.getEntries().findIndex(function(t){return Jb(t,1)[0]===e})}},{key:"getNumberOfSortedColumns",value:function(){return this.sortingStates.getLength()}},{key:"isListOfSortedColumnsEmpty",value:function(){return 0===this.getNumberOfSortedColumns()}},{key:"isColumnSorted",value:function(e){return pe(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))}},{key:"getSortStates",value:function(){var e=this;return null===this.sortingStates?[]:this.sortingStates.getEntries().map(function(t){var n=Jb(t,2),o=n[0],i=n[1];return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kb(Object(n),!0).forEach(function(t){Gb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({column:e.hot.toVisualColumn(o)},i)})}},{key:"getColumnSortState",value:function(e){var t=this.getSortOrderOfColumn(e);if(ot(t))return{column:e,sortOrder:t}}},{key:"setSortStates",value:function(e){this.sortingStates.clear();for(var t=0;t<e.length;t+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(e[t].column),{sortOrder:e[t].sortOrder})}},{key:"destroy",value:function(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}])&&Xb(t.prototype,n),o&&Xb(t,o),e}(),oy="asc",iy="desc",ay="colHeader";function ry(e){if(e.some(function(e){return!1===function(e){if(!1===pe(e))return!1;var t=e.column,n=e.sortOrder;return Number.isInteger(t)&&[oy,iy].includes(n)}(e)}))return!1;var t=e.map(function(e){return e.column});return new Set(t).size===t.length}function ly(e){if(e!==iy)return e===oy?iy:oy}function sy(e){return e.querySelector(".".concat(ay))}function cy(e,t){if(e<0||!t.parentNode)return!1;var n=t.parentNode.parentNode.childNodes;return-1===Array.from(n).indexOf(t.parentNode)-n.length}function uy(e,t,n){return-1===e&&t>=0&&!1===zi(n)}var dy="indicatorDisabled",hy="columnSorting",fy="sortAction",py=new Map([[oy,"ascending"],[iy,"descending"]]);function my(e,t,n){return function(t,o){var i=n.sortEmptyCells;return"string"==typeof t&&(t=t.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),t===o?Ry:at(t)?at(o)?Ry:i&&"asc"===e?My:Py:at(o)?i&&"asc"===e?Py:My:isNaN(t)&&!isNaN(o)?"asc"===e?Py:My:!isNaN(t)&&isNaN(o)?"asc"===e?My:Py:(isNaN(t)||isNaN(o)||(t=parseFloat(t),o=parseFloat(o)),t<o?"asc"===e?My:Py:t>o?"asc"===e?Py:My:Ry)}}var vy="default";var by=Zr("sorting.compareFunctionFactory"),yy=by.register,gy=by.getItem,wy=by.hasItem,_y=Zr("sorting.mainSortComparator"),Cy=_y.register,ky=_y.getItem;function xy(e){return wy(e)?gy(e):gy(vy)}function Sy(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ty(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}yy("numeric",function(e,t,n){return function(t,o){var i=parseFloat(t),a=parseFloat(o),r=n.sortEmptyCells;if(i===a||isNaN(i)&&isNaN(a))return Ry;if(r){if(at(t))return"asc"===e?My:Py;if(at(o))return"asc"===e?Py:My}return isNaN(i)?Py:isNaN(a)?My:i<a?"asc"===e?My:Py:i>a?"asc"===e?Py:My:Ry}}),yy("checkbox",function(e,t,n){var o=t.checkedTemplate,i=t.uncheckedTemplate,a=n.sortEmptyCells;return function(t,r){var l=at(t),s=at(r),c=l?i:t,u=s?i:r,d=c===i||c===o,h=u===i||u===o;if(!1===a){if(l&&!1===s)return Py;if(!1===l&&s)return My}return!1===d&&h?"asc"===e?My:Py:d&&!1===h?"asc"===e?Py:My:!1===d&&!1===h?my(e,0,n)(t,r):c===i&&u===o?"asc"===e?My:Py:c===o&&u===i?"asc"===e?Py:My:Ry}}),yy("date",function(e,t,n){return function(o,i){var a=n.sortEmptyCells;if(o===i)return Ry;if(at(o))return at(i)?Ry:a&&"asc"===e?My:Py;if(at(i))return a&&"asc"===e?Py:My;var r=t.dateFormat,l=Qe()(o,r),s=Qe()(i,r);return l.isValid()?s.isValid()?s.isAfter(l)?"asc"===e?My:Py:s.isBefore(l)?"asc"===e?Py:My:Ry:My:Py}}),yy(vy,my);var Ey=function e(t){Ty(this,e),this.data=t,this.next=null,this.prev=null},Oy=function(){function e(){Ty(this,e),this.first=null,this.last=null}var t,n,o;return t=e,(n=[{key:"push",value:function(e){var t=new Ey(e);if(null===this.first)this.first=t,this.last=t;else{var n=this.last;this.last=t,t.prev=n,n.next=t}}},{key:"unshift",value:function(e){var t=new Ey(e);if(null===this.first)this.first=t,this.last=t;else{var n=this.first;this.first=t,t.next=n,n.prev=t}}},{key:"inorder",value:function(e){for(var t=this.first;t;)e(t),t=t.next}},{key:"remove",value:function(e){if(null===this.first)return!1;for(var t,n,o=this.first;o;){if(o.data===e)return t=o.next,n=o.prev,t&&(t.prev=n),n&&(n.next=t),o===this.first&&(this.first=t),o===this.last&&(this.last=n),!0;o=o.next}return!1}},{key:"hasCycle",value:function(){for(var e=this.first,t=this.first;;){if(null===e)return!1;if(null===(e=e.next))return!1;if((e=e.next)===(t=t.next))return!0}}},{key:"pop",value:function(){if(null===this.last)return null;var e=this.last;return this.last=this.last.prev,e}},{key:"shift",value:function(){if(null===this.first)return null;var e=this.first;return this.first=this.first.next,e}},{key:"recursiveReverse",value:function(){if(this.first){!function e(t,n){n&&(e(n,n.next),n.next=t)}(this.first,this.first.next),this.first.next=null;var e=this.first;this.first=this.last,this.last=e}}},{key:"reverse",value:function(){if(this.first&&this.first.next){for(var e,t=this.first.next,n=this.first;t;)e=t.next,t.next=n,n.prev=t,n=t,t=e;this.first.next=null,this.last.prev=null,e=this.first,this.first=n,this.last=e}}}])&&Sy(t.prototype,n),o&&Sy(t,o),e}(),Dy=function(e,t){var n=e.toString(),o=t.toString();return n===o?0:n<o?-1:1};function Iy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dy,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(Math.abs(o-n)<=1)return[];var i=Math.ceil((n+o)/2);return Iy(e,t,n,i),Iy(e,t,i,o),function(e,t,n,o,i){for(var a=new Oy,r=new Oy,l=o-n,s=i-o,c=Math.max(l,s),u=i-n,d=0;d<c;d+=1)d<l&&a.push(e[n+d]),d<s&&r.push(e[o+d]);var h=0;for(;h<u;)a.first&&r.first?t(a.first.data,r.first.data)>0?e[n+h]=r.shift().data:e[n+h]=a.shift().data:a.first?e[n+h]=a.shift().data:e[n+h]=r.shift().data,h+=1;return e}(e,t,n,i,o)}var Ry=0,My=-1,Py=1;function Ay(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ly(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ly(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ly(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ny(e){"@babel/helpers - typeof";return(Ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vy(e){return function(e){if(Array.isArray(e))return Fy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Fy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fy(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function By(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Hy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?By(Object(n),!0).forEach(function(t){jy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):By(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $y(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Uy(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function zy(e,t,n){return(zy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ky(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wy(e,t){return(Wy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Ky(e);if(t){var i=Ky(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Ny(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ky(e){return(Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gy="columnSorting";Cy(Gy,function(e,t){return function(n,o){var i,a,r,l,s,c,u=Ay(n).slice(1),d=Ay(o).slice(1);return a=e[i=0],r=t[i],l=u[i],s=d[i],((c=r.columnSorting).compareFunctionFactory?c.compareFunctionFactory:xy(r.type))(a,r,c)(l,s)}}),Jr.getSingleton().register("beforeColumnSort"),Jr.getSingleton().register("afterColumnSort");var Jy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wy(e,t)}(a,Wv);var t,n,o,i=qy(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).columnStatesManager=null,t.columnMetaCache=null,t.pluginKey=Gy,t.indexesSequenceCache=null,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return Gy}},{key:"PLUGIN_PRIORITY",get:function(){return 50}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[this.pluginKey]}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.columnStatesManager=new ny(this.hot,"".concat(this.pluginKey,".sortingStates")),this.columnMetaCache=new Cc(function(t){var n=e.hot.toVisualColumn(t);return null===n&&(n=t),e.getMergedPluginSettings(n)}),this.hot.columnIndexMapper.registerMap("".concat(this.pluginKey,".columnMeta"),this.columnMetaCache),this.addHook("afterGetColHeader",function(t,n){return e.onAfterGetColHeader(t,n)}),this.addHook("beforeOnCellMouseDown",function(t,n,o,i){return e.onBeforeOnCellMouseDown(t,n,o,i)}),this.addHook("afterOnCellMouseDown",function(t,n){return e.onAfterOnCellMouseDown(t,n)}),this.addHook("afterInit",function(){return e.loadOrSortBySettings()}),this.addHook("afterLoadData",function(t,n){return e.onAfterLoadData(n)}),this.hot.view&&this.loadOrSortBySettings(),zy(Ky(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var e=this,t=function(t,n){var o=sy(n);!1!==cy(t,n)&&null!==o&&e.updateHeaderClasses(o)};this.hot.addHook("afterGetColHeader",t),this.hot.addHookOnce("afterRender",function(){e.hot.removeHook("afterGetColHeader",t)}),this.hot.batchExecution(function(){null!==e.indexesSequenceCache&&(e.hot.rowIndexMapper.setIndexesSequence(e.indexesSequenceCache.getValues()),e.hot.rowIndexMapper.unregisterMap(e.pluginKey))},!0),this.hot.columnIndexMapper.unregisterMap("".concat(this.pluginKey,".columnMeta")),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,zy(Ky(a.prototype),"disablePlugin",this).call(this)}},{key:"sort",value:function(e){var t=this.getSortConfig(),n=this.getNormalizedSortConfigs(e),o=this.areValidSortConfigs(n);!1!==this.hot.runHooks("beforeColumnSort",t,n,o)&&(0===t.length&&null===this.indexesSequenceCache&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new au),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),o&&(this.columnStatesManager.setSortStates(n),this.sortByPresetSortStates(n),this.saveAllSortSettings(n)),this.hot.runHooks("afterColumnSort",t,o?n:t,o),o&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}},{key:"clearSort",value:function(){this.sort([])}},{key:"isSorted",value:function(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}},{key:"getSortConfig",value:function(e){return ot(e)?this.columnStatesManager.getColumnSortState(e):this.columnStatesManager.getSortStates()}},{key:"setSortConfig",value:function(e){var t=this.getNormalizedSortConfigs(e);this.areValidSortConfigs(t)&&this.columnStatesManager.setSortStates(t)}},{key:"getNormalizedSortConfigs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e.slice(0,1):[e]}},{key:"areValidSortConfigs",value:function(e){var t=this.hot.countCols();return ry(e)&&e.every(function(e){var n=e.column;return n<=t&&n>=0})}},{key:"saveAllSortSettings",value:function(e){var t=this,n=this.columnStatesManager.getAllColumnsProperties();n.initialConfig=q(e,function(e){var n=e.column,o=$y(e,["column"]);return Hy({column:t.hot.toPhysicalColumn(n)},o)}),this.hot.runHooks("persistentStateSave","columnSorting",n)}},{key:"getAllSavedSortSettings",value:function(){var e=this,t={};this.hot.runHooks("persistentStateLoad","columnSorting",t);var n=t.value;return ot(n)&&Array.isArray(n.initialConfig)&&(n.initialConfig=q(n.initialConfig,function(t){var n=t.column,o=$y(t,["column"]);return Hy({column:e.hot.toVisualColumn(n)},o)})),n}},{key:"getColumnNextConfig",value:function(e){var t=this.columnStatesManager.getSortOrderOfColumn(e);if(ot(t)){var n=ly(t);return ot(n)?{column:e,sortOrder:n}:void 0}var o=this.hot.countCols();if(Number.isInteger(e)&&e>=0&&e<o)return{column:e,sortOrder:ly()}}},{key:"getNextSortConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append",n=this.columnStatesManager.getIndexOfColumnInSortQueue(e),o=-1!==n,i=this.getSortConfig(),a=this.getColumnNextConfig(e);if(o){if(it(a))return[].concat(Vy(i.slice(0,n)),Vy(i.slice(n+1)));if("append"===t)return[].concat(Vy(i.slice(0,n)),Vy(i.slice(n+1)),[a]);if("replace"===t)return[].concat(Vy(i.slice(0,n)),[a],Vy(i.slice(n+1)))}return ot(a)?i.concat(a):i}},{key:"getPluginColumnConfig",value:function(e){if(pe(e)){var t=e[this.pluginKey];if(pe(t))return t}return{}}},{key:"getMergedPluginSettings",value:function(e){var t=this.hot.getSettings()[this.pluginKey],n=this.columnStatesManager.getAllColumnsProperties(),o=this.hot.getCellMeta(0,e),i=Object.getPrototypeOf(o);return Array.isArray(i.columns)?Object.assign(n,t,this.getPluginColumnConfig(i.columns[e])):Rn(i.columns)?Object.assign(n,t,this.getPluginColumnConfig(i.columns(e))):Object.assign(n,t)}},{key:"getFirstCellSettings",value:function(e){var t=this.hot.getCellMeta(0,e),n=Object.create(t);return n[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(e)),n}},{key:"getNumberOfRowsToSort",value:function(e){var t=this.hot.getSettings();return t.maxRows<=e?t.maxRows:e-t.minSpareRows}},{key:"sortByPresetSortStates",value:function(e){var t=this;if(0!==e.length){for(var n=[],o=this.hot.countRows(),i=function(n){return q(e,function(e){return t.hot.getDataAtCell(n,e.column)})},a=0;a<this.getNumberOfRowsToSort(o);a+=1)n.push([this.hot.toPhysicalRow(a)].concat(i(a)));var r=q(n,function(e){return e[0]});!function(e,t){for(var n=ky(t),o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];Iy(e,n.apply(void 0,i))}(n,this.pluginKey,q(e,function(e){return e.sortOrder}),q(e,function(e){return t.getFirstCellSettings(e.column)}));for(var l=n.length;l<o;l+=1)n.push([l].concat(i(l)));var s=q(n,function(e){return e[0]}),c=new Map(q(r,function(e,t){return[e,s[t]]})),u=q(this.hot.rowIndexMapper.getIndexesSequence(),function(e){return c.has(e)?c.get(e):e});this.hot.rowIndexMapper.setIndexesSequence(u)}else this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues())}},{key:"loadOrSortBySettings",value:function(){var e=this.getAllSavedSortSettings();if(pe(e))this.sortBySettings(e);else{var t=this.hot.getSettings()[this.pluginKey];this.sortBySettings(t)}}},{key:"sortBySettings",value:function(e){if(pe(e)){this.columnStatesManager.updateAllColumnsProperties(e);var t=e.initialConfig;(Array.isArray(t)||pe(t))&&this.sort(t)}else this.hot.render()}},{key:"onAfterGetColHeader",value:function(e,t){var n=sy(t);if(!1!==cy(e,t)&&null!==n){var o=this.getFirstCellSettings(e)[this.pluginKey],i=o.indicator,a=o.headerAction;this.updateHeaderClasses(n,this.columnStatesManager,e,i,a)}}},{key:"updateHeaderClasses",value:function(e){if(Wt(e,Array.from(py.values()).concat(fy,dy,hy)),!1!==this.enabled){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];zt(e,function(e,t,n,o){var i=[hy];if(o&&i.push(fy),!1===n)return i.push(dy),i;var a=e.getSortOrderOfColumn(t);return ot(a)&&i.push(py.get(a)),i}.apply(void 0,n))}}},{key:"onUpdateSettings",value:function(e){zy(Ky(a.prototype),"onUpdateSettings",this).call(this),null!==this.columnMetaCache&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),ot(e[this.pluginKey])&&this.sortBySettings(e[this.pluginKey])}},{key:"onAfterLoadData",value:function(e){!0===e&&this.hot.view&&this.loadOrSortBySettings()}},{key:"wasClickableHeaderClicked",value:function(e,t){return this.getFirstCellSettings(t)[this.pluginKey].headerAction&&"SPAN"===e.target.nodeName}},{key:"onBeforeOnCellMouseDown",value:function(e,t,n,o){!1!==uy(t.row,t.col,e)&&this.wasClickableHeaderClicked(e,t.col)&&Oh()&&(o.column=!0)}},{key:"onAfterOnCellMouseDown",value:function(e,t){!1!==uy(t.row,t.col,e)&&this.wasClickableHeaderClicked(e,t.col)&&(Oh()&&(this.hot.deselectCell(),this.hot.selectColumns(t.col)),this.sort(this.getColumnNextConfig(t.col)))}},{key:"destroy",value:function(){var e;null===(e=this.columnStatesManager)||void 0===e||e.destroy(),zy(Ky(a.prototype),"destroy",this).call(this)}}])&&Uy(t.prototype,n),o&&Uy(t,o),a}();function Yy(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Xy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=null,this.rootDocument=t,this.editor=this.createEditor(),this.editorStyle=this.editor.style,this.hidden=!0,this.hide()}var t,n,o;return t=e,o=[{key:"CLASS_EDITOR_CONTAINER",get:function(){return"htCommentsContainer"}},{key:"CLASS_EDITOR",get:function(){return"htComments"}},{key:"CLASS_INPUT",get:function(){return"htCommentTextArea"}},{key:"CLASS_CELL",get:function(){return"htCommentCell"}}],(n=[{key:"setPosition",value:function(e,t){this.editorStyle.left="".concat(e,"px"),this.editorStyle.top="".concat(t,"px")}},{key:"setSize",value:function(e,t){if(e&&t){var n=this.getInputElement();n.style.width="".concat(e,"px"),n.style.height="".concat(t,"px")}}},{key:"resetSize",value:function(){var e=this.getInputElement();e.style.width="",e.style.height=""}},{key:"setReadOnlyState",value:function(e){this.getInputElement().readOnly=e}},{key:"show",value:function(){this.editorStyle.display="block",this.hidden=!1}},{key:"hide",value:function(){this.editorStyle.display="none",this.hidden=!0}},{key:"isVisible",value:function(){return"block"===this.editorStyle.display}},{key:"setValue",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"";this.getInputElement().value=e}},{key:"getValue",value:function(){return this.getInputElement().value}},{key:"isFocused",value:function(){return this.rootDocument.activeElement===this.getInputElement()}},{key:"focus",value:function(){this.getInputElement().focus()}},{key:"createEditor",value:function(){var t=this.rootDocument.createElement("div"),n=this.rootDocument.createElement("textarea");return this.container=this.rootDocument.createElement("div"),zt(this.container,e.CLASS_EDITOR_CONTAINER),this.rootDocument.body.appendChild(this.container),zt(t,e.CLASS_EDITOR),zt(n,e.CLASS_INPUT),t.appendChild(n),this.container.appendChild(t),t}},{key:"getInputElement",value:function(){return this.editor.querySelector(".".concat(e.CLASS_INPUT))}},{key:"destroy",value:function(){var e=this.container?this.container.parentNode:null;this.editor.parentNode.removeChild(this.editor),this.editor=null,this.editorStyle=null,e&&e.removeChild(this.container)}}])&&Yy(t.prototype,n),o&&Yy(t,o),e}(),Qy="---------";function Zy(e){return Ut(e,"htSeparator")}function eg(e){return Ut(e,"htDisabled")}function tg(e){return Ut(e,"htSelectionDisabled")}function ng(e){var t=e.getSelected();return t?t[0]<0?null:t:null}function og(e,t){var n={};return K(e,function(e){e.forAll(function(e,o){e>=0&&o>=0&&(n[e]||(n[e]=[]),n[e][o]=t(e,o))})}),n}function ig(e,t,n,o,i){K(e,function(e){e.forAll(function(e,a){e>=0&&a>=0&&function(e,t,n,o,i,a){var r=i(e,t),l=o;r.className&&(l="vertical"===n?function(e,t){if(-1!==e.indexOf(t))return e;var n=e.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","");return"".concat(n," ").concat(t)}(r.className,o):function(e,t){if(-1!==e.indexOf(t))return e;var n=e.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","");return"".concat(n," ").concat(t)}(r.className,o));a(e,t,"className",l)}(e,a,t,n,o,i)})})}function ag(e,t){var n=!1;return Array.isArray(e)&&K(e,function(e){return e.forAll(function(e,o){if(e>=0&&o>=0&&t(e,o))return n=!0,!1}),n}),n}function rg(e){return'<span class="selected">'.concat(String.fromCharCode(10003),"</span>").concat(e)}function lg(e,t){for(var n=e.slice(0);0<n.length&&n[0].name===t;)n.shift();return n}function sg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qy,n=e.slice(0);return n=function(e){var t=[];return K(e,function(e,n){n>0?t[t.length-1].name!==e.name&&t.push(e):t.push(e)}),t}(n=function(e,t){var n=e.slice(0);return n.reverse(),(n=lg(n,t)).reverse(),n}(n=lg(n,t),t))}function cg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ug=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wasLastActionShow=!0,this.showDebounced=null,this.hidingTimer=null,this.updateDelay(t)}var t,n,o;return t=e,(n=[{key:"hide",value:function(){var e=this;this.wasLastActionShow=!1,this.hidingTimer=setTimeout(function(){!1===e.wasLastActionShow&&e.runLocalHooks("hide")},250)}},{key:"show",value:function(e){this.wasLastActionShow=!0,this.showDebounced(e)}},{key:"cancelHiding",value:function(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}},{key:"updateDelay",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.showDebounced=An(function(t){e.wasLastActionShow&&e.runLocalHooks("show",t.from.row,t.from.col)},t)}},{key:"destroy",value:function(){this.clearLocalHooks()}}])&&cg(t.prototype,n),o&&cg(t,o),e}();he(ug,cc);var dg=ug;function hg(e){"@babel/helpers - typeof";return(hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function mg(e,t,n){return(mg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gg(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vg(e,t){return(vg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=gg(e);if(t){var i=gg(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===hg(t)||"function"==typeof t))return t;return yg(e)}(this,n)}}function yg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gg(e){return(gg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wg=new WeakMap,_g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vg(e,t)}(a,Wv);var t,n,o,i=bg(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).editor=null,t.displaySwitch=null,t.eventManager=null,t.range={},t.mouseDown=!1,t.contextMenuEvent=!1,t.timer=null,wg.set(yg(t),{tempEditorDimensions:{},cellBelowCursor:null}),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"comments"}},{key:"PLUGIN_PRIORITY",get:function(){return 60}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().comments}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.editor||(this.editor=new Xy(this.hot.rootDocument)),this.eventManager||(this.eventManager=new Gi(this)),this.displaySwitch||(this.displaySwitch=new dg(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",function(t){return e.addToContextMenu(t)}),this.addHook("afterRenderer",function(t,n,o,i,a,r){return e.onAfterRenderer(t,r)}),this.addHook("afterScrollHorizontally",function(){return e.hide()}),this.addHook("afterScrollVertically",function(){return e.hide()}),this.addHook("afterBeginEditing",function(){return e.onAfterBeginEditing()}),this.displaySwitch.addLocalHook("hide",function(){return e.hide()}),this.displaySwitch.addLocalHook("show",function(t,n){return e.showAtCell(t,n)}),this.registerListeners(),mg(gg(a.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),mg(gg(a.prototype),"updatePlugin",this).call(this),this.displaySwitch.updateDelay(this.getDisplayDelaySetting())}},{key:"disablePlugin",value:function(){mg(gg(a.prototype),"disablePlugin",this).call(this)}},{key:"registerListeners",value:function(){var e=this,t=this.hot.rootDocument;this.eventManager.addEventListener(t,"mouseover",function(t){return e.onMouseOver(t)}),this.eventManager.addEventListener(t,"mousedown",function(t){return e.onMouseDown(t)}),this.eventManager.addEventListener(t,"mouseup",function(){return e.onMouseUp()}),this.eventManager.addEventListener(this.editor.getInputElement(),"blur",function(){return e.onEditorBlur()}),this.eventManager.addEventListener(this.editor.getInputElement(),"mousedown",function(t){return e.onEditorMouseDown(t)}),this.eventManager.addEventListener(this.editor.getInputElement(),"mouseup",function(t){return e.onEditorMouseUp(t)})}},{key:"setRange",value:function(e){this.range=e}},{key:"clearRange",value:function(){this.range={}}},{key:"targetIsCellWithComment",value:function(e){var t=Lt(e.target,"TD","TBODY");return!!(t&&Ut(t,"htCommentCell")&&Lt(t,[this.hot.rootElement]))}},{key:"targetIsCommentTextArea",value:function(e){return this.editor.getInputElement()===e.target}},{key:"setComment",value:function(e){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var t=this.editor.getValue(),n="";null!==e&&void 0!==e?n=e:null!==t&&void 0!==t&&(n=t);var o=this.range.from.row,i=this.range.from.col;this.updateCommentMeta(o,i,fg({},"value",n)),this.hot.render()}},{key:"setCommentAtCell",value:function(e,t,n){this.setRange({from:new qn(e,t)}),this.setComment(n)}},{key:"removeComment",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,"comment",void 0),e&&this.hot.render(),this.hide()}},{key:"removeCommentAtCell",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.setRange({from:new qn(e,t)}),this.removeComment(n)}},{key:"getComment",value:function(){var e=this.range.from.row,t=this.range.from.col;return this.getCommentMeta(e,t,"value")}},{key:"getCommentAtCell",value:function(e,t){return this.getCommentMeta(e,t,"value")}},{key:"show",value:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var e=this.range.from,t=e.row,n=e.col;if(t<0||t>this.hot.countSourceRows()-1||n<0||n>this.hot.countSourceCols()-1)return!1;var o=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return this.refreshEditor(!0),this.editor.setValue(o.comment?o.comment.value:""),this.editor.hidden&&this.editor.show(),!0}},{key:"showAtCell",value:function(e,t){return this.setRange({from:new qn(e,t)}),this.show()}},{key:"hide",value:function(){this.editor.hidden||this.editor.hide()}},{key:"refreshEditor",value:function(){var e,t;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.range.from&&this.editor.isVisible()){var n=this.hot,o=n.rowIndexMapper,i=n.columnIndexMapper,a=this.range.from,r=a.row,l=a.col,s=o.getRenderableFromVisualIndex(r),c=i.getRenderableFromVisualIndex(l),u=null===s;null===s&&(s=o.getRenderableFromVisualIndex(o.getFirstNotHiddenIndex(r,-1))),null===c&&(c=i.getRenderableFromVisualIndex(i.getFirstNotHiddenIndex(l,-1)));var d=null===s,h=null===c;s=null!==(e=s)&&void 0!==e?e:0,c=null!==(t=c)&&void 0!==t?t:0;var f=this.hot,p=f.rootWindow,m=f.view.wt,v=m.wtTable,b=m.wtOverlays,y=m.wtViewport,g=b.scrollableElement,w=v.getCell({row:s,col:c}),_=Zt(w),C=h?0:v.getStretchedColumnWidth(c),k=u&&!d?dn(w):0,x=_.top,S=_.left;y.hasVerticalScroll()&&g!==p&&(x-=b.topOverlay.getScrollPosition()),y.hasHorizontalScroll()&&g!==p&&(S-=b.leftOverlay.getScrollPosition());var T=S+C,E=x+k,O=this.getCommentMeta(r,l,"style"),D=this.getCommentMeta(r,l,"readOnly");O?this.editor.setSize(O.width,O.height):this.editor.resetSize(),this.editor.setReadOnlyState(D),this.editor.setPosition(T,E)}}},{key:"checkSelectionCommentsConsistency",value:function(){var e=this.hot.getSelectedRangeLast();if(!e)return!1;var t=!1,n=e.getTopLeftCorner();return this.getCommentMeta(n.row,n.col,"value")&&(t=!0),t}},{key:"updateCommentMeta",value:function(e,t,n){var o,i=this.hot.getCellMeta(e,t).comment;i?ce(o=ue(i),n):o=n,this.hot.setCellMeta(e,t,"comment",o)}},{key:"getCommentMeta",value:function(e,t,n){var o=this.hot.getCellMeta(e,t);if(o.comment)return o.comment[n]}},{key:"onMouseDown",value:function(e){if(this.mouseDown=!0,this.hot.view&&this.hot.view.wt){if(!this.contextMenuEvent&&!this.targetIsCommentTextArea(e)){var t=Lt(e.target,"TD","TBODY"),n=null;t&&(n=this.hot.view.wt.wtTable.getCoords(t),n={row:this.hot.rowIndexMapper.getVisualFromRenderableIndex(n.row),col:this.hot.columnIndexMapper.getVisualFromRenderableIndex(n.col)}),(!t||this.range.from&&n&&(this.range.from.row!==n.row||this.range.from.col!==n.col))&&this.hide()}this.contextMenuEvent=!1}}},{key:"onMouseOver",value:function(e){var t=wg.get(this),n=this.hot.rootDocument;if(t.cellBelowCursor=n.elementFromPoint(e.clientX,e.clientY),!(this.mouseDown||this.editor.isFocused()||Ut(e.target,"wtBorder")||t.cellBelowCursor!==e.target)&&this.editor)if(this.targetIsCellWithComment(e)){var o=this.hot.view.wt.wtTable.getCoords(e.target),i={from:new qn(this.hot.rowIndexMapper.getVisualFromRenderableIndex(o.row),this.hot.columnIndexMapper.getVisualFromRenderableIndex(o.col))};this.displaySwitch.show(i)}else Vt(e.target,n)&&!this.targetIsCommentTextArea(e)&&this.displaySwitch.hide()}},{key:"onMouseUp",value:function(){this.mouseDown=!1}},{key:"onAfterRenderer",value:function(e,t){t.comment&&t.comment.value&&zt(e,t.commentedCellClassName)}},{key:"onEditorBlur",value:function(){this.setComment()}},{key:"onEditorMouseDown",value:function(e){wg.get(this).tempEditorDimensions={width:un(e.target),height:dn(e.target)}}},{key:"onEditorMouseUp",value:function(e){var t=wg.get(this),n=un(e.target),o=dn(e.target);n===t.tempEditorDimensions.width+1&&o===t.tempEditorDimensions.height+2||this.updateCommentMeta(this.range.from.row,this.range.from.col,fg({},"style",{width:n,height:o}))}},{key:"onContextMenuAddComment",value:function(){var e=this;this.displaySwitch.cancelHiding();var t=this.hot.getSelectedRangeLast();this.contextMenuEvent=!0,this.setRange({from:t.highlight}),this.show(),setTimeout(function(){e.hot&&(e.hot.deselectCell(),e.editor.focus())},10)}},{key:"onContextMenuRemoveComment",value:function(){var e=this,t=this.hot.getSelectedRangeLast();this.contextMenuEvent=!0,t.forAll(function(t,n){t>=0&&n>=0&&e.removeCommentAtCell(t,n,!1)}),this.hot.render()}},{key:"onContextMenuMakeReadOnly",value:function(){var e=this,t=this.hot.getSelectedRangeLast();this.contextMenuEvent=!0,t.forAll(function(t,n){if(t>=0&&n>=0){var o=!!e.getCommentMeta(t,n,"readOnly");e.updateCommentMeta(t,n,fg({},"readOnly",!o))}})}},{key:"addToContextMenu",value:function(e){var t=this,n=function(){return t.hot.rowIndexMapper.getRenderableIndexesLength()>0&&t.hot.columnIndexMapper.getRenderableIndexesLength()>0};e.items.push({name:"---------"},{key:"commentsAddEdit",name:function(){return t.checkSelectionCommentsConsistency()?t.hot.getTranslatedPhrase(sd):t.hot.getTranslatedPhrase(ld)},callback:function(){return t.onContextMenuAddComment()},disabled:function(){return!n()||!(t.hot.getSelectedLast()&&!t.hot.selection.isSelectedByCorner())}},{key:"commentsRemove",name:function(){return this.getTranslatedPhrase(cd)},callback:function(){return t.onContextMenuRemoveComment()},disabled:function(){return!n()||!(t.hot.getSelectedLast()&&!t.hot.selection.isSelectedByCorner())}},{key:"commentsReadOnly",name:function(){var e=this,t=this.getTranslatedPhrase(ud);return ag(this.getSelectedRangeLast(),function(t,n){var o=e.getCellMeta(t,n).comment;if(o&&(o=o.readOnly),o)return!0})&&(t=rg(t)),t},callback:function(){return t.onContextMenuMakeReadOnly()},disabled:function(){return!n()||!(t.hot.getSelectedLast()&&!t.hot.selection.isSelectedByCorner()&&t.checkSelectionCommentsConsistency())}})}},{key:"getDisplayDelaySetting",value:function(){var e=this.hot.getSettings().comments;if(pe(e))return e.displayDelay}},{key:"onAfterBeginEditing",value:function(){this.hide()}},{key:"destroy",value:function(){this.editor&&this.editor.destroy(),this.displaySwitch&&this.displaySwitch.destroy(),mg(gg(a.prototype),"destroy",this).call(this)}}])&&pg(t.prototype,n),o&&pg(t,o),a}();function Cg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var kg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.commands={},this.commonCallback=null}var t,n,o;return t=e,(n=[{key:"registerCommand",value:function(e,t){this.commands[e]=t}},{key:"setCommonCallback",value:function(e){this.commonCallback=e}},{key:"execute",value:function(e){for(var t=this,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var a=e.split(":"),r=a[0],l=2===a.length?a[1]:null,s=this.commands[r];if(!s)throw new Error("Menu command '".concat(r,"' not exists."));if(l&&s.submenu&&(s=function(e,t){var n;return K(t,function(t){var o=t.key?t.key.split(":"):null;if(Array.isArray(o)&&o[1]===e)return n=t,!1}),n}(l,s.submenu.items)),!0!==s.disabled&&("function"!=typeof s.disabled||!0!==s.disabled.call(this.hot))&&!_e(s,"submenu")){var c=[];"function"==typeof s.callback&&c.push(s.callback),"function"==typeof this.commonCallback&&c.push(this.commonCallback),o.unshift(a.join(":")),K(c,function(e){return e.apply(t.hot,o)})}}}])&&Cg(t.prototype,n),o&&Cg(t,o),e}(),xg="alignment";var Sg="clear_column";var Tg="col_left";var Eg="col_right";var Og="make_read_only";var Dg="redo";function Ig(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Mg="remove_col";function Pg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ag(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ag(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Lg="remove_row";var Ng="row_above";var Vg="row_below";var Fg="no_items";var Bg,Hg="undo";function jg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $g=[Ng,Vg,Tg,Eg,Sg,Lg,Mg,Hg,Dg,Og,xg,Qy,Fg],Ug=(jg(Bg={},Qy,function(){return{name:Qy}}),jg(Bg,Fg,function(){return{key:Fg,name:function(){return this.getTranslatedPhrase(zu)},disabled:!0,isCommand:!1}}),jg(Bg,Ng,function(){return{key:Ng,name:function(){return this.getTranslatedPhrase(Wu)},callback:function(e,t){var n=this.selection.isSelectedByCorner(),o=0;n||(o=t[Math.max(t.length-1,0)].start.row),this.alter("insert_row",o,1,"ContextMenu.rowAbove"),n&&this.selectAll()},disabled:function(){return!ng(this)||(this.selection.isSelectedByCorner()?0===this.countRows():this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden:function(){return!this.getSettings().allowInsertRow}}}),jg(Bg,Vg,function(){return{key:Vg,name:function(){return this.getTranslatedPhrase(qu)},callback:function(e,t){var n=this.selection.isSelectedByCorner(),o=0;if(n)o=this.countRows();else{var i,a=t[Math.max(t.length-1,0)],r=null===a||void 0===a?void 0:null===(i=a.end)||void 0===i?void 0:i.row;o=ot(r)?r+1:0}this.alter("insert_row",o,1,"ContextMenu.rowBelow"),n&&this.selectAll()},disabled:function(){return!ng(this)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden:function(){return!this.getSettings().allowInsertRow}}}),jg(Bg,Tg,function(){return{key:Tg,name:function(){return this.getTranslatedPhrase(Ku)},callback:function(e,t){var n=this.selection.isSelectedByCorner(),o=0;n||(o=t[Math.max(t.length-1,0)].start.col),this.alter("insert_col",o,1,"ContextMenu.columnLeft"),n&&this.selectAll()},disabled:function(){return!this.isColumnModificationAllowed()||!ng(this)||(this.selection.isSelectedByCorner()?0===this.countCols():this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols)},hidden:function(){return!this.getSettings().allowInsertColumn}}}),jg(Bg,Eg,function(){return{key:Eg,name:function(){return this.getTranslatedPhrase(Gu)},callback:function(e,t){var n=this.selection.isSelectedByCorner(),o=0;if(n)o=this.countCols();else{var i,a=t[Math.max(t.length-1,0)],r=null===a||void 0===a?void 0:null===(i=a.end)||void 0===i?void 0:i.col;o=ot(r)?r+1:0}this.alter("insert_col",o,1,"ContextMenu.columnRight"),n&&this.selectAll()},disabled:function(){return!this.isColumnModificationAllowed()||!ng(this)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols)},hidden:function(){return!this.getSettings().allowInsertColumn}}}),jg(Bg,Sg,function(){return{key:Sg,name:function(){return this.getTranslatedPhrase(ed)},callback:function(e,t){var n=t[0].start.col,o=t[0].end.col;this.countRows()&&this.populateFromArray(0,n,[[null]],Math.max(t[0].start.row,t[0].end.row),o,"ContextMenu.clearColumn")},disabled:function(){return!ng(this)||!this.selection.isSelectedByColumnHeader()}}}),jg(Bg,Lg,function(){return{key:Lg,name:function(){var e=this.getSelected(),t=0;if(e)if(e.length>1)t=1;else{var n=Pg(e[0],3);n[0]-n[2]!=0&&(t=1)}return this.getTranslatedPhrase(Ju,t)},callback:function(){this.alter("remove_row",function(e){var t=Yf(e);if(t===$f||t===Uf)return[];var n=Xf(t),o=new Set;return K(e,function(e){var t=Ff(n(e),3),i=t[0],a=t[2],r=Math.max(i,0),l=a-r+1;K(Array.from(new Array(l),function(e,t){return r+t}),function(e){o.has(e)||o.add(e)})}),z(Array.from(o).sort(function(e,t){return e-t}),function(e,t,n,o){return 0!==n&&t===o[n-1]+1?e[e.length-1][1]+=1:e.push([t,1]),e},[])}(this.getSelected()),1,"ContextMenu.removeRow")},disabled:function(){if(!ng(this))return!0;var e=this.countRows();return this.selection.isSelectedByCorner()?0===e:this.selection.isSelectedByColumnHeader()||0===e},hidden:function(){return!this.getSettings().allowRemoveRow}}}),jg(Bg,Mg,function(){return{key:Mg,name:function(){var e=this.getSelected(),t=0;if(e)if(e.length>1)t=1;else{var n=Ig(e[0],4);n[1]-n[3]!=0&&(t=1)}return this.getTranslatedPhrase(Yu,t)},callback:function(){this.alter("remove_col",function(e){var t=Yf(e);if(t===$f||t===Uf)return[];var n=Xf(t),o=new Set;return K(e,function(e){var t=Ff(n(e),4),i=t[1],a=t[3],r=Math.max(i,0),l=a-r+1;K(Array.from(new Array(l),function(e,t){return r+t}),function(e){o.has(e)||o.add(e)})}),z(Array.from(o).sort(function(e,t){return e-t}),function(e,t,n,o){return 0!==n&&t===o[n-1]+1?e[e.length-1][1]+=1:e.push([t,1]),e},[])}(this.getSelected()),null,"ContextMenu.removeColumn")},disabled:function(){if(!this.isColumnModificationAllowed())return!0;if(!ng(this))return!0;var e=this.countCols();return this.selection.isSelectedByCorner()?0===e:this.selection.isSelectedByRowHeader()||0===e},hidden:function(){return!this.getSettings().allowRemoveColumn}}}),jg(Bg,Hg,function(){return{key:Hg,name:function(){return this.getTranslatedPhrase(Xu)},callback:function(){this.undo()},hidden:function(){var e=this.getPlugin("undoRedo");return!e||!e.isEnabled()},disabled:function(){return!this.getPlugin("undoRedo").isUndoAvailable()}}}),jg(Bg,Dg,function(){return{key:Dg,name:function(){return this.getTranslatedPhrase(Qu)},callback:function(){this.redo()},hidden:function(){var e=this.getPlugin("undoRedo");return!e||!e.isEnabled()},disabled:function(){return!this.getPlugin("undoRedo").isRedoAvailable()}}}),jg(Bg,Og,function(){return{key:Og,name:function(){var e=this,t=this.getTranslatedPhrase(Zu);return ag(this.getSelectedRange(),function(t,n){return e.getCellMeta(t,n).readOnly})&&(t=rg(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=ag(t,function(t,n){return e.getCellMeta(t,n).readOnly});K(t,function(t){t.forAll(function(t,o){t>=0&&o>=0&&e.setCellMeta(t,o,"readOnly",!n)})}),this.render()},disabled:function(){return!!this.selection.isSelectedByCorner()||0===this.countRows()||0===this.countCols()||!this.getSelectedRange()||0===this.getSelectedRange().length}}}),jg(Bg,xg,function(){return{key:xg,name:function(){return this.getTranslatedPhrase(dd)},disabled:function(){return 0===this.countRows()||0===this.countCols()||!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:"".concat(xg,":left"),name:function(){var e=this,t=this.getTranslatedPhrase(hd);return ag(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&&-1!==o.indexOf("htLeft"))return!0})&&(t=rg(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=og(t,function(t,n){return e.getCellMeta(t,n).className});this.runHooks("beforeCellAlignment",n,t,"horizontal","htLeft"),ig(t,"horizontal","htLeft",function(t,n){return e.getCellMeta(t,n)},function(t,n,o,i){return e.setCellMeta(t,n,o,i)}),this.render()},disabled:!1},{key:"".concat(xg,":center"),name:function(){var e=this,t=this.getTranslatedPhrase(fd);return ag(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&&-1!==o.indexOf("htCenter"))return!0})&&(t=rg(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=og(t,function(t,n){return e.getCellMeta(t,n).className});this.runHooks("beforeCellAlignment",n,t,"horizontal","htCenter"),ig(t,"horizontal","htCenter",function(t,n){return e.getCellMeta(t,n)},function(t,n,o,i){return e.setCellMeta(t,n,o,i)}),this.render()},disabled:!1},{key:"".concat(xg,":right"),name:function(){var e=this,t=this.getTranslatedPhrase(pd);return ag(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&&-1!==o.indexOf("htRight"))return!0})&&(t=rg(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=og(t,function(t,n){return e.getCellMeta(t,n).className});this.runHooks("beforeCellAlignment",n,t,"horizontal","htRight"),ig(t,"horizontal","htRight",function(t,n){return e.getCellMeta(t,n)},function(t,n,o,i){return e.setCellMeta(t,n,o,i)}),this.render()},disabled:!1},{key:"".concat(xg,":justify"),name:function(){var e=this,t=this.getTranslatedPhrase(md);return ag(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&&-1!==o.indexOf("htJustify"))return!0})&&(t=rg(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=og(t,function(t,n){return e.getCellMeta(t,n).className});this.runHooks("beforeCellAlignment",n,t,"horizontal","htJustify"),ig(t,"horizontal","htJustify",function(t,n){return e.getCellMeta(t,n)},function(t,n,o,i){return e.setCellMeta(t,n,o,i)}),this.render()},disabled:!1},{name:Qy},{key:"".concat(xg,":top"),name:function(){var e=this,t=this.getTranslatedPhrase(vd);return ag(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&&-1!==o.indexOf("htTop"))return!0})&&(t=rg(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=og(t,function(t,n){return e.getCellMeta(t,n).className});this.runHooks("beforeCellAlignment",n,t,"vertical","htTop"),ig(t,"vertical","htTop",function(t,n){return e.getCellMeta(t,n)},function(t,n,o,i){return e.setCellMeta(t,n,o,i)}),this.render()},disabled:!1},{key:"".concat(xg,":middle"),name:function(){var e=this,t=this.getTranslatedPhrase(bd);return ag(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&&-1!==o.indexOf("htMiddle"))return!0})&&(t=rg(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=og(t,function(t,n){return e.getCellMeta(t,n).className});this.runHooks("beforeCellAlignment",n,t,"vertical","htMiddle"),ig(t,"vertical","htMiddle",function(t,n){return e.getCellMeta(t,n)},function(t,n,o,i){return e.setCellMeta(t,n,o,i)}),this.render()},disabled:!1},{key:"".concat(xg,":bottom"),name:function(){var e=this,t=this.getTranslatedPhrase(yd);return ag(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&&-1!==o.indexOf("htBottom"))return!0})&&(t=rg(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=og(t,function(t,n){return e.getCellMeta(t,n).className});this.runHooks("beforeCellAlignment",n,t,"vertical","htBottom"),ig(t,"vertical","htBottom",function(t,n){return e.getCellMeta(t,n)},function(t,n,o,i){return e.setCellMeta(t,n,o,i)}),this.render()},disabled:!1}]}}}),Bg);function zg(){var e={};return ve(Ug,function(t,n){e[n]=t()}),e}function Wg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var qg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.predefinedItems=zg(),this.defaultOrderPattern=n}var t,n,o;return t=e,(n=[{key:"setPredefinedItems",value:function(e){var t=this,n={};this.defaultOrderPattern.length=0,ve(e,function(e,o){var i="";e.name===Qy?(n[Qy]=e,i=Qy):isNaN(parseInt(o,10))?(e.key=void 0===e.key?o:e.key,n[o]=e,i=e.key):(n[e.key]=e,i=e.key),t.defaultOrderPattern.push(i)}),this.predefinedItems=n}},{key:"getItems",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],i=e;i&&i.items?i=i.items:Array.isArray(i)||(i=t);pe(i)?ve(i,function(e,t){var i=n["string"==typeof e?e:t];i||(i=e),pe(e)?se(i,e):"string"==typeof i&&(i={name:i}),void 0===i.key&&(i.key=t),o.push(i)}):K(i,function(e,t){var i=n[e];!i&&$g.indexOf(e)>=0||(i||(i={name:e,key:"".concat(t)}),pe(e)&&se(i,e),void 0===i.key&&(i.key=t),o.push(i))});return o}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,this.defaultOrderPattern,this.predefinedItems)}}])&&Wg(t.prototype,n),o&&Wg(t,o),e}();function Kg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Gg=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o,i,a,r,l,s,c=en(n),u=tn(n);this.rootWindow=n,this.type=this.getSourceType(t),"literal"===this.type?(o=parseInt(t.top,10),a=parseInt(t.left,10),l=t.height||0,s=t.width||0,i=o,r=a,o+=c,a+=u):"event"===this.type&&(o=parseInt(t.pageY,10),a=parseInt(t.pageX,10),l=t.target.clientHeight,s=t.target.clientWidth,i=o-c,r=a-u),this.top=o,this.topRelative=i,this.left=a,this.leftRelative=r,this.scrollTop=c,this.scrollLeft=u,this.cellHeight=l,this.cellWidth=s}var t,n,o;return t=e,(n=[{key:"getSourceType",value:function(e){var t="literal";return e instanceof Event&&(t="event"),t}},{key:"fitsAbove",value:function(e){return this.topRelative>=e.offsetHeight}},{key:"fitsBelow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+e.offsetHeight<=t}},{key:"fitsOnRight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+e.offsetWidth<=t}},{key:"fitsOnLeft",value:function(e){return this.leftRelative>=e.offsetWidth}}])&&Kg(t.prototype,n),o&&Kg(t,o),e}();function Jg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Yg=215,Xg=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.options=n||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:Yg,container:this.hot.rootDocument.documentElement},this.eventManager=new Gi(this),this.container=this.createContainer(this.options.name),this.hotMenu=null,this.hotSubMenus={},this.parentMenu=this.options.parent||null,this.menuItems=null,this.origOutsideClickDeselects=null,this.keyEvent=!1,this.offset={above:0,below:0,left:0,right:0},this._afterScrollCallback=null,this.registerEvents()}var t,n,o;return t=e,(n=[{key:"registerEvents",value:function(){for(var e=this,t=this.hot.rootWindow;t;)this.eventManager.addEventListener(t.document,"mousedown",function(t){return e.onDocumentMouseDown(t)}),this.eventManager.addEventListener(t.document,"contextmenu",function(t){return e.onDocumentContextMenu(t)}),t=Pt(t)}},{key:"setMenuItems",value:function(e){this.menuItems=e}},{key:"getSelectedItem",value:function(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}},{key:"hasSelectedItem",value:function(){return Array.isArray(this.hotMenu.getSelectedLast())}},{key:"setOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.offset[e]=t}},{key:"isSubMenu",value:function(){return null!==this.parentMenu}},{key:"open",value:function(){var e=this;this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";var t=An(function(t){return e.openSubMenu(t)},300),n=this.options.minWidth||Yg,o=!1,i=W(this.menuItems,function(t){return t.key===Fg&&(o=!0),function(e,t){return!e.hidden||!("function"==typeof e.hidden&&e.hidden.call(t))}(t,e.hot)});if(i.length<1&&!o)i.push(zg()[Fg]);else if(0===i.length)return;var a=!1,r={data:i=sg(i,Qy),colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth:function(e){return ot(e)&&e<n?n:e},autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,maxCols:1,columns:[{data:"name",renderer:function(t,n,o,i,a,r){return e.menuItemRenderer(t,n,o,i,a,r)}}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",beforeKeyDown:function(t){return e.onBeforeKeyDown(t)},afterOnCellMouseOver:function(n,o){e.isAllSubMenusClosed()?t(o.row):e.openSubMenu(o.row)},rowHeights:function(e){return i[e].name===Qy?1:23},afterOnCellContextMenu:function(t){t.preventDefault(),He()&&a&&e.hasSelectedItem()&&e.close(!0)},beforeOnCellMouseUp:function(t){e.hasSelectedItem()&&(a=!e.isCommandPassive(e.getSelectedItem()),e.executeCommand(t))},afterOnCellMouseUp:function(t){He()&&zi(t)||!a||!e.hasSelectedItem()||(Ve()||Be()?setTimeout(function(){return e.close(!0)},325):e.close(!0))},afterUnlisten:function(){!e.hasSelectedItem()&&e.isOpened()&&e.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new Hp(this.container,r),this.hotMenu.addHook("afterInit",function(){return e.onAfterInit()}),this.hotMenu.addHook("afterSelection",function(){return e.onAfterSelection.apply(e,arguments)}),this.hotMenu.init(),this.hotMenu.listen(),this.blockMainTableCallbacks(),this.runLocalHooks("afterOpen")}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isOpened()&&(e&&this.parentMenu?this.parentMenu.close():(this.closeAllSubMenus(),this.container.style.display="none",this.releaseMainTableCallbacks(),this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.parentMenu&&this.parentMenu.hotMenu.listen()))}},{key:"openSubMenu",value:function(t){if(!this.hotMenu)return!1;var n=this.hotMenu.getCell(t,0);if(this.closeAllSubMenus(),!n||!function(e){return Ut(e,"htSubmenu")}(n))return!1;var o=this.hotMenu.getSourceDataAtRow(t),i=new e(this.hot,{parent:this,name:o.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return i.setMenuItems(o.submenu.items),i.open(),i.setPosition(n.getBoundingClientRect()),this.hotSubMenus[o.key]=i,i}},{key:"closeSubMenu",value:function(e){var t=this.hotMenu.getSourceDataAtRow(e),n=this.hotSubMenus[t.key];n&&(n.destroy(),delete this.hotSubMenus[t.key])}},{key:"closeAllSubMenus",value:function(){var e=this;K(this.hotMenu.getData(),function(t,n){return e.closeSubMenu(n)})}},{key:"isAllSubMenusClosed",value:function(){return 0===Object.keys(this.hotSubMenus).length}},{key:"destroy",value:function(){var e=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),e&&e.removeChild(this.container)}},{key:"isOpened",value:function(){return null!==this.hotMenu}},{key:"executeCommand",value:function(e){if(this.isOpened()&&this.hasSelectedItem()){var t=this.getSelectedItem();if(this.runLocalHooks("select",t,e),!this.isCommandPassive(t)){var n=this.hot.getSelectedRange(),o=n?function(e){return q(e,function(e){return{start:e.getTopLeftCorner(),end:e.getBottomRightCorner()}})}(n):[];this.runLocalHooks("executeCommand",t.key,o,e),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",t.key,o,e)}}}},{key:"isCommandPassive",value:function(e){var t=e.isCommand,n=e.name,o=e.disabled,i=e.submenu,a=!0===o||"function"==typeof o&&!0===o.call(this.hot);return!1===t||n===Qy||!0===a||i}},{key:"setPosition",value:function(e){var t=new Gg(e,this.container.ownerDocument.defaultView);this.options.keepInViewport?(t.fitsBelow(this.container)?this.setPositionBelowCursor(t):t.fitsAbove(this.container)?this.setPositionAboveCursor(t):this.setPositionBelowCursor(t),t.fitsOnRight(this.container)?this.setPositionOnRightOfCursor(t):this.setPositionOnLeftOfCursor(t)):(this.setPositionBelowCursor(t),this.setPositionOnRightOfCursor(t))}},{key:"setPositionAboveCursor",value:function(e){var t=this.offset.above+e.top-this.container.offsetHeight;this.isSubMenu()&&(t=e.top+e.cellHeight-this.container.offsetHeight+3),this.container.style.top="".concat(t,"px")}},{key:"setPositionBelowCursor",value:function(e){var t=this.offset.below+e.top+1;this.isSubMenu()&&(t=e.top-1),this.container.style.top="".concat(t,"px")}},{key:"setPositionOnRightOfCursor",value:function(e){var t;t=this.isSubMenu()?1+e.left+e.cellWidth:this.offset.right+1+e.left,this.container.style.left="".concat(t,"px")}},{key:"setPositionOnLeftOfCursor",value:function(e){var t=_n(this.hot.rootDocument),n=this.offset.left+e.left-this.container.offsetWidth+t+4;this.container.style.left="".concat(n,"px")}},{key:"selectFirstCell",value:function(){var e=this.hotMenu.getCell(0,0);Zy(e)||eg(e)||tg(e)?this.selectNextCell(0,0):this.hotMenu.selectCell(0,0)}},{key:"selectLastCell",value:function(){var e=this.hotMenu.countRows()-1,t=this.hotMenu.getCell(e,0);Zy(t)||eg(t)||tg(t)?this.selectPrevCell(e,0):this.hotMenu.selectCell(e,0)}},{key:"selectNextCell",value:function(e,t){var n=e+1,o=n<this.hotMenu.countRows()?this.hotMenu.getCell(n,t):null;o&&(Zy(o)||eg(o)||tg(o)?this.selectNextCell(n,t):this.hotMenu.selectCell(n,t))}},{key:"selectPrevCell",value:function(e,t){var n=e-1,o=n>=0?this.hotMenu.getCell(n,t):null;o&&(Zy(o)||eg(o)||tg(o)?this.selectPrevCell(n,t):this.hotMenu.selectCell(n,t))}},{key:"menuItemRenderer",value:function(e,t,n,o,i,a){var r,l=this,s=e.getSourceDataAtRow(n),c=this.hot.rootDocument.createElement("div"),u=function(e){return e.disableSelection},d=a;"function"==typeof d&&(d=d.call(this.hot)),Kt(t),zt(c,"htItemWrapper"),t.appendChild(c),r=s,new RegExp(Qy,"i").test(r.name)?zt(t,"htSeparator"):"function"==typeof s.renderer?(zt(t,"htCustomMenuRenderer"),t.appendChild(s.renderer(e,c,n,o,i,d))):Yt(c,d),!function(e){return!0===e.disabled||"function"==typeof e.disabled&&!0===e.disabled.call(l.hot)}(s)?u(s)?(zt(t,"htSelectionDisabled"),this.eventManager.addEventListener(t,"mouseenter",function(){return e.deselectCell()})):!function(e){return _e(e,"submenu")}(s)?(Wt(t,["htSubmenu","htDisabled"]),u(s)?this.eventManager.addEventListener(t,"mouseenter",function(){return e.deselectCell()}):this.eventManager.addEventListener(t,"mouseenter",function(){return e.selectCell(n,o,void 0,void 0,!1,!1)})):(zt(t,"htSubmenu"),u(s)?this.eventManager.addEventListener(t,"mouseenter",function(){return e.deselectCell()}):this.eventManager.addEventListener(t,"mouseenter",function(){return e.selectCell(n,o,void 0,void 0,!1,!1)})):(zt(t,"htDisabled"),this.eventManager.addEventListener(t,"mouseenter",function(){return e.deselectCell()}))}},{key:"createContainer",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.options.container.ownerDocument,o=t;return o&&(Rn(o)&&(o=null===(o=o.call(this.hot))||it(o)?"":o.toString()),o=o.replace(/[^A-z0-9]/g,"_"),o="".concat(this.options.className,"Sub_").concat(o),e=n.querySelector(".".concat(this.options.className,".").concat(o))),e||(zt(e=n.createElement("div"),"htMenu ".concat(this.options.className)),o&&zt(e,o),this.options.container.appendChild(e)),e}},{key:"blockMainTableCallbacks",value:function(){this._afterScrollCallback=function(){},this.hot.addHook("afterScrollVertically",this._afterScrollCallback),this.hot.addHook("afterScrollHorizontally",this._afterScrollCallback)}},{key:"releaseMainTableCallbacks",value:function(){this._afterScrollCallback&&(this.hot.removeHook("afterScrollVertically",this._afterScrollCallback),this.hot.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)}},{key:"onBeforeKeyDown",value:function(e){if(En(e.target)&&this.container.contains(e.target))$i(e);else{var t=this.hotMenu.getSelectedLast(),n=!1;switch(this.keyEvent=!0,e.keyCode){case yr.ESCAPE:this.close(),n=!0;break;case yr.ENTER:t&&(this.hotMenu.getSourceDataAtRow(t[0]).submenu?n=!0:(this.executeCommand(e),this.close(!0)));break;case yr.ARROW_DOWN:t?this.selectNextCell(t[0],t[1]):this.selectFirstCell(),n=!0;break;case yr.ARROW_UP:t?this.selectPrevCell(t[0],t[1]):this.selectLastCell(),n=!0;break;case yr.ARROW_RIGHT:if(t){var o=this.openSubMenu(t[0]);o&&o.selectFirstCell()}n=!0;break;case yr.ARROW_LEFT:t&&this.isSubMenu()&&(this.close(),this.parentMenu&&this.parentMenu.hotMenu.listen(),n=!0)}n&&(e.preventDefault(),$i(e)),this.keyEvent=!1}}},{key:"onAfterInit",value:function(){var e=this.hotMenu.view.wt.wtTable,t=this.hotMenu.getSettings().data,n=e.hider.style,o=e.holder.style,i=parseInt(n.width,10),a=z(t,function(e,t){return e+(t.name===Qy?1:26)},0);o.width="".concat(i+3,"px"),o.height="".concat(a+3,"px"),n.height=o.height}},{key:"onAfterSelection",value:function(e,t,n,o,i){!1===this.keyEvent&&(i.value=!0)}},{key:"onDocumentMouseDown",value:function(e){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!Vt(e.target,this.hotMenu.rootElement)?this.close(!0):!this.isAllSubMenusClosed()&&!this.isSubMenu()||Vt(e.target,".htMenu")||!Vt(e.target,this.container.ownerDocument)&&!Vt(e.target,this.hot.rootDocument)||this.close(!0))}},{key:"onDocumentContextMenu",value:function(e){this.isOpened()&&Ut(e.target,"htCore")&&Vt(e.target,this.hotMenu.rootElement)&&e.preventDefault()}}])&&Jg(t.prototype,n),o&&Jg(t,o),e}();he(Xg,cc);var Qg=Xg;function Zg(e){"@babel/helpers - typeof";return(Zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ew(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function tw(e,t,n){return(tw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aw(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nw(e,t){return(nw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ow(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=aw(e);if(t){var i=aw(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Zg(t)||"function"==typeof t))return t;return iw(e)}(this,n)}}function iw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aw(e){return(aw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().register("afterContextMenuDefaultOptions"),Jr.getSingleton().register("beforeContextMenuShow"),Jr.getSingleton().register("afterContextMenuShow"),Jr.getSingleton().register("afterContextMenuHide"),Jr.getSingleton().register("afterContextMenuExecute");var rw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nw(e,t)}(a,Wv);var t,n,o,i=ow(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).eventManager=new Gi(iw(t)),t.commandExecutor=new kg(t.hot),t.itemsFactory=null,t.menu=null,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"contextMenu"}},{key:"PLUGIN_PRIORITY",get:function(){return 70}},{key:"PLUGIN_DEPS",get:function(){return["plugin:AutoColumnSize"]}},{key:"DEFAULT_ITEMS",get:function(){return[Ng,Vg,Qy,Tg,Eg,Qy,Lg,Mg,Qy,Hg,Dg,Qy,Og,Qy,xg]}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().contextMenu}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var t=this.hot.getSettings().contextMenu;"function"==typeof t.callback&&this.commandExecutor.setCommonCallback(t.callback),this.menu=new Qg(this.hot,{className:"htContextMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",function(){return e.onMenuBeforeOpen()}),this.menu.addLocalHook("afterOpen",function(){return e.onMenuAfterOpen()}),this.menu.addLocalHook("afterClose",function(){return e.onMenuAfterClose()}),this.menu.addLocalHook("executeCommand",function(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.executeCommand).call.apply(t,[e].concat(o))}),this.addHook("afterOnCellContextMenu",function(t){return e.onAfterOnCellContextMenu(t)}),tw(aw(a.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),tw(aw(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),tw(aw(a.prototype),"disablePlugin",this).call(this)}},{key:"open",value:function(e){if(this.menu&&(this.prepareMenuItems(),this.menu.open(),this.menu.isOpened())){var t=0,n=0;if(this.hot.rootDocument!==this.menu.container.ownerDocument){var o=this.hot.rootWindow.frameElement.getBoundingClientRect(),i=o.top,a=o.left;t=i-en(e.view),n=a-tn(e.view)}else t=-1*en(this.menu.hotMenu.rootWindow),n=-1*tn(this.menu.hotMenu.rootWindow);this.menu.setPosition({top:parseInt(e.pageY,10)+t,left:parseInt(e.pageX,10)+n})}}},{key:"close",value:function(){this.menu&&(this.menu.close(),this.itemsFactory=null)}},{key:"executeCommand",value:function(e){var t;null===this.itemsFactory&&this.prepareMenuItems();for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(t=this.commandExecutor).execute.apply(t,[e].concat(o))}},{key:"prepareMenuItems",value:function(){var e=this;this.itemsFactory=new qg(this.hot,a.DEFAULT_ITEMS);var t=this.hot.getSettings().contextMenu,n={items:this.itemsFactory.getItems(t)};this.hot.runHooks("afterContextMenuDefaultOptions",n),this.itemsFactory.setPredefinedItems(n.items);var o=this.itemsFactory.getItems(t);this.hot.runHooks("beforeContextMenuSetItems",o),this.menu.setMenuItems(o),K(o,function(t){return e.commandExecutor.registerCommand(t.key,t)})}},{key:"onAfterOnCellContextMenu",value:function(e){var t=this.hot.getSettings(),n=t.rowHeaders,o=t.colHeaders;var i=e.target;this.close(),Ut(i,"handsontableInput")||(e.preventDefault(),e.stopPropagation(),(n||o||function(e){return"TD"===e.nodeName||"TD"===e.parentNode.nodeName}(i)||Ut(i,"current")&&Ut(i,"wtBorder"))&&this.open(e))}},{key:"onMenuBeforeOpen",value:function(){this.hot.runHooks("beforeContextMenuShow",this)}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterContextMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),tw(aw(a.prototype),"destroy",this).call(this)}}])&&ew(t.prototype,n),o&&ew(t,o),a}();function lw(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}rw.SEPARATOR={name:Qy};var sw=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={}}var t,n,o;return t=e,(n=[{key:"setData",value:function(e,t){this.data[e]=t}},{key:"getData",value:function(e){return this.data[e]||void 0}}])&&lw(t.prototype,n),o&&lw(t,o),e}();var cw=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipboardData=new sw};n("MMO3");function uw(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var dw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootDocument=t.defaultView?t:t.ownerDocument,this.mainElement=null,this.eventManager=new Gi(this),this.listenersCount=new WeakSet,this.container=t}var t,n,o;return t=e,(n=[{key:"useSecondaryElement",value:function(){var e=function(e){var t=mw.get(e);if(t)return t.parentElement||e.appendChild(t),t;var n=(e.defaultView?e:e.ownerDocument).createElement("textarea");return mw.set(e,n),n.setAttribute("data-hot-input",""),n.className="HandsontableCopyPaste",n.tabIndex=-1,n.autocomplete="off",n.wrap="hard",n.value=" ",e.appendChild(n),n}(this.container);this.listenersCount.has(e)||(this.listenersCount.add(e),pw(this.eventManager,e,this)),this.mainElement=e}},{key:"setFocusableElement",value:function(e){this.listenersCount.has(e)||(this.listenersCount.add(e),pw(this.eventManager,e,this)),this.mainElement=e}},{key:"getFocusableElement",value:function(){return this.mainElement}},{key:"focus",value:function(){this.mainElement.value=" ",Ve()||Dn(this.mainElement)}}])&&uw(t.prototype,n),o&&uw(t,o),e}();he(dw,cc);var hw=new WeakMap;var fw=function(e,t){return function(n){return t.runLocalHooks(e,n)}};function pw(e,t,n){e.addEventListener(t,"copy",fw("copy",n)),e.addEventListener(t,"cut",fw("cut",n)),e.addEventListener(t,"paste",fw("paste",n))}var mw=new WeakMap;function vw(e){if(e instanceof dw){var t=hw.get(e.container);if((t=isNaN(t)?0:t)>0&&(t-=1),function(e){e.eventManager.clear()}(e),t<=0){t=0;var n=mw.get(e.container);n&&n.parentNode&&(n.parentNode.removeChild(n),mw.delete(e.container)),e.mainElement=null}hw.set(e.container,t)}}function bw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function gw(e){"@babel/helpers - typeof";return(gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ww(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _w(e,t,n){return(_w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sw(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Cw(e,t){return(Cw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Sw(e);if(t){var i=Sw(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===gw(t)||"function"==typeof t))return t;return xw(e)}(this,n)}}function xw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sw(e){return(Sw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().register("afterCopyLimit"),Jr.getSingleton().register("modifyCopyableRange"),Jr.getSingleton().register("beforeCut"),Jr.getSingleton().register("afterCut"),Jr.getSingleton().register("beforePaste"),Jr.getSingleton().register("afterPaste"),Jr.getSingleton().register("beforeCopy"),Jr.getSingleton().register("afterCopy");var Tw=1e3,Ew=1e3,Ow=new WeakMap,Dw=['<meta name="generator" content="Handsontable"/>','<style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join(""),Iw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cw(e,t)}(a,Wv);var t,n,o,i=kw(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).columnsLimit=Ew,t.copyableRanges=[],t.focusableElement=void 0,t.pasteMode="overwrite",t.rowsLimit=Tw,t.uiContainer=t.hot.rootDocument.body,Ow.set(xw(t),{isTriggeredByCopy:!1,isTriggeredByCut:!1,isBeginEditing:!1,isFragmentSelectionEnabled:!1}),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"copyPaste"}},{key:"PLUGIN_PRIORITY",get:function(){return 80}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().copyPaste}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var t,n,o,i=this.hot.getSettings(),r=i.copyPaste,l=i.fragmentSelection;Ow.get(this).isFragmentSelectionEnabled=!!l,"object"===gw(r)&&(this.pasteMode=r.pasteMode||this.pasteMode,this.rowsLimit=isNaN(r.rowsLimit)?this.rowsLimit:r.rowsLimit,this.columnsLimit=isNaN(r.columnsLimit)?this.columnsLimit:r.columnsLimit,this.uiContainer=r.uiContainer||this.uiContainer),this.addHook("afterContextMenuDefaultOptions",function(t){return e.onAfterContextMenuDefaultOptions(t)}),this.addHook("afterOnCellMouseUp",function(){return e.onAfterOnCellMouseUp()}),this.addHook("afterSelectionEnd",function(){return e.onAfterSelectionEnd()}),this.addHook("beforeKeyDown",function(){return e.onBeforeKeyDown()}),this.focusableElement=(t=this.uiContainer,n=new dw(t),o=hw.get(t),o=isNaN(o)?0:o,hw.set(t,o+1),n),this.focusableElement.addLocalHook("copy",function(t){return e.onCopy(t)}).addLocalHook("cut",function(t){return e.onCut(t)}).addLocalHook("paste",function(t){return e.onPaste(t)}),_w(Sw(a.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.getOrCreateFocusableElement(),_w(Sw(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.focusableElement&&vw(this.focusableElement),_w(Sw(a.prototype),"disablePlugin",this).call(this)}},{key:"copy",value:function(){Ow.get(this).isTriggeredByCopy=!0,this.getOrCreateFocusableElement(),this.focusableElement.focus(),this.hot.rootDocument.execCommand("copy")}},{key:"cut",value:function(){Ow.get(this).isTriggeredByCut=!0,this.getOrCreateFocusableElement(),this.focusableElement.focus(),this.hot.rootDocument.execCommand("cut")}},{key:"getRangedCopyableData",value:function(e){var t=this,n=[],o=[],i=[];return K(e,function(e){Nl(e.startRow,e.endRow,function(e){-1===o.indexOf(e)&&o.push(e)}),Nl(e.startCol,e.endCol,function(e){-1===i.indexOf(e)&&i.push(e)})}),K(o,function(e){var o=[];K(i,function(n){o.push(t.hot.getCopyableData(e,n))}),n.push(o)}),lp(n)}},{key:"getRangedData",value:function(e){var t=this,n=[],o=[],i=[];return K(e,function(e){Nl(e.startRow,e.endRow,function(e){-1===o.indexOf(e)&&o.push(e)}),Nl(e.startCol,e.endCol,function(e){-1===i.indexOf(e)&&i.push(e)})}),K(o,function(e){var o=[];K(i,function(n){o.push(t.hot.getCopyableData(e,n))}),n.push(o)}),n}},{key:"paste",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e||t){var n=new cw;e&&n.clipboardData.setData("text/plain",e),t&&n.clipboardData.setData("text/html",t),this.getOrCreateFocusableElement(),this.onPaste(n)}}},{key:"setCopyableText",value:function(){var e=this.hot.getSelectedRangeLast();if(e){var t=e.getTopLeftCorner(),n=e.getBottomRightCorner(),o=t.row,i=t.col,a=n.row,r=n.col,l=Math.min(a,o+this.rowsLimit-1),s=Math.min(r,i+this.columnsLimit-1);this.copyableRanges.length=0,this.copyableRanges.push({startRow:o,startCol:i,endRow:l,endCol:s}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges),a===l&&r===s||this.hot.runHooks("afterCopyLimit",a-o+1,r-i+1,this.rowsLimit,this.columnsLimit)}}},{key:"getOrCreateFocusableElement",value:function(){var e=this.hot.getActiveEditor(),t=e?e.TEXTAREA:void 0;t?this.focusableElement.setFocusableElement(t):this.focusableElement.useSecondaryElement()}},{key:"isEditorOpened",value:function(){var e=this.hot.getActiveEditor();return e&&e.isOpened()}},{key:"populateValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.hot.getSelectedRangeLast();if(e.length){for(var n=e.length,o=e[0].length,i=[],a=t.getTopLeftCorner(),r=a.row,l=a.col,s=t.getBottomRightCorner(),c=s.row,u=s.col,d=r,h=l,f=r,p=l;i.length<n||d<=c;){var m=this.hot.getCellMeta(d,l),v=m.skipRowOnPaste,b=m.visualRow;if(d=b+1,!0!==v){f=b,h=l;for(var y=[],g=i.length%n;y.length<o||h<=u;){var w=this.hot.getCellMeta(r,h),_=w.skipColumnOnPaste,C=w.visualCol;if(h=C+1,!0!==_){p=C;var k=y.length%o;y.push(e[g][k])}}i.push(y)}}return this.hot.populateFromArray(r,l,i,void 0,void 0,"CopyPaste.paste",this.pasteMode),[r,l,f,p]}}},{key:"onCopy",value:function(e){var t=Ow.get(this);if((this.hot.isListening()||t.isTriggeredByCopy)&&!this.isEditorOpened()){this.setCopyableText(),t.isTriggeredByCopy=!1;var n=this.getRangedData(this.copyableRanges);if(!!this.hot.runHooks("beforeCopy",n,this.copyableRanges)){var o=lp(n);if(e&&e.clipboardData){var i=Ml(n,this.hot.rootDocument);e.clipboardData.setData("text/plain",o),e.clipboardData.setData("text/html",[Dw,i].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",o);this.hot.runHooks("afterCopy",n,this.copyableRanges)}e.preventDefault()}}},{key:"onCut",value:function(e){var t=Ow.get(this);if((this.hot.isListening()||t.isTriggeredByCut)&&!this.isEditorOpened()){this.setCopyableText(),t.isTriggeredByCut=!1;var n=this.getRangedData(this.copyableRanges);if(!!this.hot.runHooks("beforeCut",n,this.copyableRanges)){var o=lp(n);if(e&&e.clipboardData){var i=Ml(n,this.hot.rootDocument);e.clipboardData.setData("text/plain",o),e.clipboardData.setData("text/html",[Dw,i].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",o);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",n,this.copyableRanges)}e.preventDefault()}}},{key:"onPaste",value:function(e){if(this.hot.isListening()&&!this.isEditorOpened()){var t;if(e&&e.preventDefault&&e.preventDefault(),e&&void 0!==e.clipboardData){var n=Ot(e.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});if(n&&/(<table)|(<TABLE)/g.test(n))t=Pl(n,this.hot.rootDocument).data;else t=e.clipboardData.getData("text/plain")}else"undefined"==typeof ClipboardEvent&&void 0!==this.hot.rootWindow.clipboardData&&(t=this.hot.rootWindow.clipboardData.getData("Text"));if("string"==typeof t&&(t=function(e){var t=[[""]];if(0===e.length)return t;for(var n,o=0,i=0;e.length>0&&n!==e.length;)if(n=e.length,e.match(rp))e=e.replace(rp,""),o+=1,t[i][o]="";else if(e.match(ip))e=e.replace(ip,""),o=0,t[i+=1]=[""];else{var a="";if(e.startsWith('"')){for(var r=0,l=!0;l;){var s=e.slice(0,1);'"'===s&&(r+=1),a+=s,(0===(e=e.slice(1)).length||e.match(/^[\t\r\n]/)&&r%2==0)&&(l=!1)}a=a.replace(/^"/,"").replace(/"$/,"").replace(/["]*/g,function(e){return new Array(Math.floor(e.length/2)).fill('"').join("")})}else{var c=e.match(ap);a=c?c[0]:"",e=e.slice(a.length)}t[i][o]=a}return t}(t)),(!t||0!==t.length)&&!1!==this.hot.runHooks("beforePaste",t,this.copyableRanges)){var o=bw(this.populateValues(t),4),i=o[0],a=o[1],r=o[2],l=o[3];this.hot.selectCell(i,a,Math.min(this.hot.countRows()-1,r),Math.min(this.hot.countCols()-1,l)),this.hot.runHooks("afterPaste",t,this.copyableRanges)}}}},{key:"onAfterContextMenuDefaultOptions",value:function(e){var t;e.items.push({name:"---------"},(t=this,{key:"copy",name:function(){return this.getTranslatedPhrase(td)},callback:function(){t.copy()},disabled:function(){if(0===this.countRows()||0===this.countCols())return!0;var e=this.getSelected();return!e||e.length>1},hidden:!1}),function(e){return{key:"cut",name:function(){return this.getTranslatedPhrase(nd)},callback:function(){e.cut()},disabled:function(){if(0===this.countRows()||0===this.countCols())return!0;var e=this.getSelected();return!e||e.length>1},hidden:!1}}(this))}},{key:"onAfterOnCellMouseUp",value:function(){!this.hot.isListening()||this.isEditorOpened()||this.hot.getSettings().fragmentSelection||(this.getOrCreateFocusableElement(),this.focusableElement.focus())}},{key:"onAfterSelectionEnd",value:function(){var e=Ow.get(this).isFragmentSelectionEnabled;this.isEditorOpened()||(this.getOrCreateFocusableElement(),e&&this.focusableElement.getFocusableElement()!==this.hot.rootDocument.activeElement&&yn()||(this.setCopyableText(),this.focusableElement.focus()))}},{key:"onBeforeKeyDown",value:function(){if(this.hot.isListening()&&!this.isEditorOpened()){var e=this.hot.rootDocument.activeElement,t=this.hot.getActiveEditor();!t||e!==this.focusableElement.getFocusableElement()&&e!==t.select||(this.getOrCreateFocusableElement(),this.focusableElement.focus())}}},{key:"destroy",value:function(){this.focusableElement&&(vw(this.focusableElement),this.focusableElement=null),_w(Sw(a.prototype),"destroy",this).call(this)}}])&&ww(t.prototype,n),o&&ww(t,o),a}();function Rw(e,t){return"border_row".concat(e,"col").concat(t)}function Mw(e,t){return{id:Rw(e,t),border:{width:1,color:"#000",cornerVisible:!1},row:e,col:t,top:{hide:!0},right:{hide:!0},bottom:{hide:!0},left:{hide:!0}}}function Pw(e,t){var n=!1;return K(e.getSelectedRange(),function(o){o.forAll(function(o,i){if(!(o<0||i<0)){var a=e.getCellMeta(o,i).borders;if(a){if(!t)return n=!0,!1;if(!_e(a[t],"hide")||!1===a[t].hide)return n=!0,!1}}})}),n}function Aw(e){return'<span class="selected">'.concat(String.fromCharCode(10003),"</span>").concat(e)}function Lw(e){"@babel/helpers - typeof";return(Lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Fw(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Bw(e,t,n){return(Bw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$w(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Hw(e,t){return(Hw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=$w(e);if(t){var i=$w(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Lw(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $w(e){return($w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Uw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hw(e,t)}(a,Wv);var t,n,o,i=jw(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).savedBorders=[],t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"customBorders"}},{key:"PLUGIN_PRIORITY",get:function(){return 90}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().customBorders}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",function(t){return e.onAfterContextMenuDefaultOptions(t)}),this.addHook("init",function(){return e.onAfterInit()}),Bw($w(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.hideBorders(),Bw($w(a.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),Bw($w(a.prototype),"updatePlugin",this).call(this)}},{key:"setBorders",value:function(e,t){var n=this,o=t?Object.keys(t):["top","right","bottom","left"],i=Xf(Yf(e));K(e,function(e){for(var a=Nw(i(e),4),r=a[0],l=a[1],s=a[2],c=a[3],u=function(e){for(var i=function(i){K(o,function(o){n.prepareBorderFromCustomAdded(e,i,t,o)})},a=l;a<=c;a+=1)i(a)},d=r;d<=s;d+=1)u(d)}),this.hot.view.render()}},{key:"getBorders",value:function(e){var t=this;if(!Array.isArray(e))return this.savedBorders;var n=Xf(Yf(e)),o=[];return K(e,function(e){for(var i=Nw(n(e),4),a=i[0],r=i[1],l=i[2],s=i[3],c=function(e){for(var n=function(n){K(t.savedBorders,function(t){t.row===e&&t.col===n&&o.push(t)})},i=r;i<=s;i+=1)n(i)},u=a;u<=l;u+=1)c(u)}),o}},{key:"clearBorders",value:function(e){var t=this;e?this.setBorders(e):(K(this.savedBorders,function(e){t.clearBordersFromSelectionSettings(e.id),t.clearNullCellRange(),t.hot.removeCellMeta(e.row,e.col,"borders")}),this.savedBorders.length=0)}},{key:"insertBorderIntoSettings",value:function(e,t){this.checkSavedBorders(e)||this.savedBorders.push(e);var n=new Gn(new qn(e.row,e.col));this.checkCustomSelections(e,n,t)||this.hot.selection.highlight.addCustomSelection({border:e,visualCellRange:n})}},{key:"prepareBorderFromCustomAdded",value:function(e,t,n,o){var i=this.hot.countRows(),a=this.hot.countCols();if(!(e>=i||t>=a)){var r,l,s=Mw(e,t);n&&(r=s,_e(l=n,"border")&&(r.border=l.border),_e(l,"top")&&(l.top?(pe(l.top)||(l.top={width:1,color:"#000"}),r.top=l.top):(l.top={hide:!0},r.top=l.top)),_e(l,"right")&&(l.right?(pe(l.right)||(l.right={width:1,color:"#000"}),r.right=l.right):(l.right={hide:!0},r.right=l.right)),_e(l,"bottom")&&(l.bottom?(pe(l.bottom)||(l.bottom={width:1,color:"#000"}),r.bottom=l.bottom):(l.bottom={hide:!0},r.bottom=l.bottom)),_e(l,"left")&&(l.left?(pe(l.left)||(l.left={width:1,color:"#000"}),r.left=l.left):(l.left={hide:!0},r.left=l.left)),s=r,K(this.hot.selection.highlight.customSelections,function(e){if(s.id===e.settings.id)return Object.assign(e.settings,n),s.id=e.settings.id,s.left=e.settings.left,s.right=e.settings.right,s.top=e.settings.top,s.bottom=e.settings.bottom,!1})),this.hot.setCellMeta(e,t,"borders",s),this.insertBorderIntoSettings(s,o)}}},{key:"prepareBorderFromCustomAddedRange",value:function(e){var t=this,n=e.range,o=Math.min(n.to.row,this.hot.countRows()-1),i=Math.min(n.to.col,this.hot.countCols()-1);Nl(n.from.row,o,function(o){Nl(n.from.col,i,function(i){var a=Mw(o,i),r=0;o===n.from.row&&_e(e,"top")&&(r+=1,a.top=e.top),o===n.to.row&&_e(e,"bottom")&&(r+=1,a.bottom=e.bottom),i===n.from.col&&_e(e,"left")&&(r+=1,a.left=e.left),i===n.to.col&&_e(e,"right")&&(r+=1,a.right=e.right),r>0&&(t.hot.setCellMeta(o,i,"borders",a),t.insertBorderIntoSettings(a))})})}},{key:"removeAllBorders",value:function(e,t){var n=Rw(e,t);this.spliceBorder(n),this.clearBordersFromSelectionSettings(n),this.clearNullCellRange(),this.hot.removeCellMeta(e,t,"borders")}},{key:"setBorder",value:function(e,t,n,o){var i=this.hot.getCellMeta(e,t).borders;(i&&void 0!==i.border||(i=Mw(e,t)),o)?(i[n]={hide:!0},4===this.countHide(i)?this.removeAllBorders(e,t):(this.checkCustomSelectionsFromContextMenu(i,n,o)||this.insertBorderIntoSettings(i),this.hot.setCellMeta(e,t,"borders",i))):(i[n]={width:1,color:"#000"},this.checkCustomSelectionsFromContextMenu(i,n,o)||this.insertBorderIntoSettings(i),this.hot.setCellMeta(e,t,"borders",i))}},{key:"prepareBorder",value:function(e,t,n){var o=this;K(e,function(e){var i=e.start,a=e.end;if(i.row===a.row&&i.col===a.col)"noBorders"===t?o.removeAllBorders(i.row,i.col):o.setBorder(i.row,i.col,t,n);else switch(t){case"noBorders":Nl(i.col,a.col,function(e){Nl(i.row,a.row,function(t){o.removeAllBorders(t,e)})});break;case"top":Nl(i.col,a.col,function(e){o.setBorder(i.row,e,t,n)});break;case"right":Nl(i.row,a.row,function(e){o.setBorder(e,a.col,t,n)});break;case"bottom":Nl(i.col,a.col,function(e){o.setBorder(a.row,e,t,n)});break;case"left":Nl(i.row,a.row,function(e){o.setBorder(e,i.col,t,n)})}})}},{key:"createCustomBorders",value:function(e){var t=this;K(e,function(e){e.range?t.prepareBorderFromCustomAddedRange(e):t.prepareBorderFromCustomAdded(e.row,e.col,e)})}},{key:"countHide",value:function(e){return z(Object.values(e),function(e,t){var n=e;return t.hide&&(n+=1),n},0)}},{key:"clearBordersFromSelectionSettings",value:function(e){var t=q(this.hot.selection.highlight.customSelections,function(e){return e.settings.id}).indexOf(e);t>-1&&this.hot.selection.highlight.customSelections[t].clear()}},{key:"clearNullCellRange",value:function(){var e=this;K(this.hot.selection.highlight.customSelections,function(t,n){if(null===t.cellRange)return e.hot.selection.highlight.customSelections[n].destroy(),e.hot.selection.highlight.customSelections.splice(n,1),!1})}},{key:"hideBorders",value:function(){var e=this;K(this.savedBorders,function(t){e.clearBordersFromSelectionSettings(t.id),e.clearNullCellRange()})}},{key:"spliceBorder",value:function(e){var t=q(this.savedBorders,function(e){return e.id}).indexOf(e);t>-1&&this.savedBorders.splice(t,1)}},{key:"checkSavedBorders",value:function(e){var t=this,n=!1;return 4===this.countHide(e)?(this.spliceBorder(e.id),n=!0):K(this.savedBorders,function(o,i){if(e.id===o.id)return t.savedBorders[i]=e,n=!0,!1}),n}},{key:"checkCustomSelectionsFromContextMenu",value:function(e,t,n){var o=!1;return K(this.hot.selection.highlight.customSelections,function(i){if(e.id===i.settings.id)return ve(i.instanceBorders,function(e){e.toggleHiddenClass(t,n)}),o=!0,!1}),o}},{key:"checkCustomSelections",value:function(e,t,n){var o=!1;return 4===this.countHide(e)?(this.removeAllBorders(e.row,e.col),o=!0):K(this.hot.selection.highlight.customSelections,function(i){if(e.id===i.settings.id)return i.visualCellRange=t,i.commit(),n&&ve(i.instanceBorders,function(t){t.changeBorderStyle(n,e)}),o=!0,!1}),o}},{key:"changeBorderSettings",value:function(){var e=this.hot.getSettings().customBorders;Array.isArray(e)?(e.length||(this.savedBorders=e),this.createCustomBorders(e)):void 0!==e&&this.createCustomBorders(this.savedBorders)}},{key:"onAfterContextMenuDefaultOptions",value:function(e){var t;this.hot.getSettings().customBorders&&e.items.push({name:"---------"},{key:"borders",name:function(){return this.getTranslatedPhrase(gd)},disabled:function(){return this.selection.isSelectedByCorner()},submenu:{items:[(t=this,{key:"borders:top",name:function(){var e=this.getTranslatedPhrase(wd);return Pw(this,"top")&&(e=Aw(e)),e},callback:function(e,n){var o=Pw(this,"top");t.prepareBorder(n,"top",o)}}),function(e){return{key:"borders:right",name:function(){var e=this.getTranslatedPhrase(_d);return Pw(this,"right")&&(e=Aw(e)),e},callback:function(t,n){var o=Pw(this,"right");e.prepareBorder(n,"right",o)}}}(this),function(e){return{key:"borders:bottom",name:function(){var e=this.getTranslatedPhrase(Cd);return Pw(this,"bottom")&&(e=Aw(e)),e},callback:function(t,n){var o=Pw(this,"bottom");e.prepareBorder(n,"bottom",o)}}}(this),function(e){return{key:"borders:left",name:function(){var e=this.getTranslatedPhrase(kd);return Pw(this,"left")&&(e=Aw(e)),e},callback:function(t,n){var o=Pw(this,"left");e.prepareBorder(n,"left",o)}}}(this),function(e){return{key:"borders:no_borders",name:function(){return this.getTranslatedPhrase(xd)},callback:function(t,n){e.prepareBorder(n,"noBorders")},disabled:function(){return!Pw(this)}}}(this)]}})}},{key:"onAfterInit",value:function(){this.changeBorderSettings()}},{key:"destroy",value:function(){Bw($w(a.prototype),"destroy",this).call(this)}}])&&Fw(t.prototype,n),o&&Fw(t,o),a}();function zw(e){"@babel/helpers - typeof";return(zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ww(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qw(e,t,n){return(qw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yw(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Kw(e,t){return(Kw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Yw(e);if(t){var i=Yw(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===zw(t)||"function"==typeof t))return t;return Jw(e)}(this,n)}}function Jw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yw(e){return(Yw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kw(e,t)}(a,Wv);var t,n,o,i=Gw(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).eventManager=new Gi(Jw(t)),t.boundaries=null,t.callback=null,t.listening=!1,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"dragToScroll"}},{key:"PLUGIN_PRIORITY",get:function(){return 100}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().dragToScroll}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("afterOnCellMouseDown",function(t){return e.setupListening(t)}),this.addHook("afterOnCellCornerMouseDown",function(t){return e.setupListening(t)}),this.registerEvents(),qw(Yw(a.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),qw(Yw(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.unregisterEvents(),qw(Yw(a.prototype),"disablePlugin",this).call(this)}},{key:"setBoundaries",value:function(e){this.boundaries=e}},{key:"setCallback",value:function(e){this.callback=e}},{key:"check",value:function(e,t){var n=0,o=0;t<this.boundaries.top?o=t-this.boundaries.top:t>this.boundaries.bottom&&(o=t-this.boundaries.bottom),e<this.boundaries.left?n=e-this.boundaries.left:e>this.boundaries.right&&(n=e-this.boundaries.right),this.callback(n,o)}},{key:"listen",value:function(){this.listening=!0}},{key:"unlisten",value:function(){this.listening=!1}},{key:"isListening",value:function(){return this.listening}},{key:"registerEvents",value:function(){for(var e=this,t=this.hot.rootWindow;t;)this.eventManager.addEventListener(t.document,"contextmenu",function(){return e.unlisten()}),this.eventManager.addEventListener(t.document,"mouseup",function(){return e.unlisten()}),this.eventManager.addEventListener(t.document,"mousemove",function(t){return e.onMouseMove(t)}),t=Pt(t)}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"setupListening",value:function(e){if(!zi(e)){var t=this.hot.view.wt.wtTable.holder;t!==this.hot.rootWindow&&(this.setBoundaries(t.getBoundingClientRect()),this.setCallback(function(e,n){e<0?t.scrollLeft-=50:e>0&&(t.scrollLeft+=50),n<0?t.scrollTop-=20:n>0&&(t.scrollTop+=20)}),this.listen())}}},{key:"onMouseMove",value:function(e){this.isListening()&&this.check(e.clientX,e.clientY)}},{key:"destroy",value:function(){qw(Yw(a.prototype),"destroy",this).call(this)}}])&&Ww(t.prototype,n),o&&Ww(t,o),a}();function Qw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function e_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return t_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function n_(e){"@babel/helpers - typeof";return(n_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o_(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i_(e,t,n){return(i_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s_(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a_(e,t){return(a_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=s_(e);if(t){var i=s_(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===n_(t)||"function"==typeof t))return t;return l_(e)}(this,n)}}function l_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s_(e){return(s_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c_=new WeakMap,u_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a_(e,t)}(a,Wv);var t,n,o,i=r_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),c_.set(l_(t),{afterFirstUse:!1}),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"manualColumnFreeze"}},{key:"PLUGIN_PRIORITY",get:function(){return 110}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().manualColumnFreeze}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",function(t){return e.addContextMenuEntry(t)}),this.addHook("beforeColumnMove",function(t,n){return e.onBeforeColumnMove(t,n)}),i_(s_(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){c_.get(this).afterFirstUse=!1,i_(s_(a.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),i_(s_(a.prototype),"updatePlugin",this).call(this)}},{key:"freezeColumn",value:function(e){var t=c_.get(this),n=this.hot.getSettings();t.afterFirstUse||(t.afterFirstUse=!0),n.fixedColumnsLeft===this.hot.countCols()||e<=n.fixedColumnsLeft-1||(this.hot.columnIndexMapper.moveIndexes(e,n.fixedColumnsLeft),n.fixedColumnsLeft+=1)}},{key:"unfreezeColumn",value:function(e){var t=c_.get(this),n=this.hot.getSettings();t.afterFirstUse||(t.afterFirstUse=!0),n.fixedColumnsLeft<=0||e>n.fixedColumnsLeft-1||(n.fixedColumnsLeft-=1,this.hot.columnIndexMapper.moveIndexes(e,n.fixedColumnsLeft))}},{key:"addContextMenuEntry",value:function(e){var t;e.items.push({name:"---------"},(t=this,{key:"freeze_column",name:function(){return this.getTranslatedPhrase(od)},callback:function(e,n){var o=Qw(n,1)[0].start.col;t.freezeColumn(o),this.render(),this.view.adjustElementsSize(!0)},hidden:function(){var e=this.getSelectedRange(),t=!1;return void 0===e?t=!0:e.length>1?t=!0:(e[0].from.col!==e[0].to.col||e[0].from.col<=this.getSettings().fixedColumnsLeft-1)&&(t=!0),t}}),function(e){return{key:"unfreeze_column",name:function(){return this.getTranslatedPhrase(id)},callback:function(t,n){var o=e_(n,1)[0].start.col;e.unfreezeColumn(o),this.render(),this.view.adjustElementsSize(!0)},hidden:function(){var e=this.getSelectedRange(),t=!1;return void 0===e?t=!0:e.length>1?t=!0:(e[0].from.col!==e[0].to.col||e[0].from.col>=this.getSettings().fixedColumnsLeft)&&(t=!0),t}}}(this))}},{key:"onBeforeColumnMove",value:function(e,t){if(c_.get(this).afterFirstUse){var n=this.hot.getSettings().fixedColumnsLeft;if(t<n)return!1;if(e.some(function(e){return e<n}))return!1}}}])&&o_(t.prototype,n),o&&o_(t,o),a}();function d_(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var h_=0,f_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this._element=null,this.state=h_}var t,n,o;return t=e,(n=[{key:"appendTo",value:function(e){e.appendChild(this._element),this.state=2}},{key:"build",value:function(){this.state===h_&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=h_}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(e,t){Ll(e)&&(this._element.style.top=e+"px"),Ll(t)&&(this._element.style.left=t+"px")}},{key:"getPosition",value:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}},{key:"setSize",value:function(e,t){Ll(e)&&(this._element.style.width=e+"px"),Ll(t)&&(this._element.style.height=t+"px")}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(e,t){Ll(e)&&(this._element.style.marginTop=e+"px"),Ll(t)&&(this._element.style.marginLeft=t+"px")}},{key:"getOffset",value:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}}])&&d_(t.prototype,n),o&&d_(t,o),e}();function p_(e){"@babel/helpers - typeof";return(p_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m_(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v_(e,t,n){return(v_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g_(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function b_(e,t){return(b_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=g_(e);if(t){var i=g_(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===p_(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function g_(e){return(g_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b_(e,t)}(a,f_);var t,n,o,i=y_(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"build",value:function(){v_(g_(a.prototype),"build",this).call(this),zt(this._element,"ht__manualColumnMove--backlight")}}])&&m_(t.prototype,n),o&&m_(t,o),a}();function __(e){"@babel/helpers - typeof";return(__="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C_(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k_(e,t,n){return(k_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T_(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function x_(e,t){return(x_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=T_(e);if(t){var i=T_(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===__(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function T_(e){return(T_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x_(e,t)}(a,f_);var t,n,o,i=S_(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"build",value:function(){k_(T_(a.prototype),"build",this).call(this),zt(this._element,"ht__manualColumnMove--guideline")}}])&&C_(t.prototype,n),o&&C_(t,o),a}();function O_(e){"@babel/helpers - typeof";return(O_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D_(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I_(e,t,n){return(I_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A_(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function R_(e,t){return(R_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=A_(e);if(t){var i=A_(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===O_(t)||"function"==typeof t))return t;return P_(e)}(this,n)}}function P_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A_(e){return(A_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().register("beforeColumnMove"),Jr.getSingleton().register("afterColumnMove");var L_=new WeakMap,N_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R_(e,t)}(a,Wv);var t,n,o,i=M_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),L_.set(P_(t),{columnsToMove:[],countCols:0,fixedColumns:0,pressed:void 0,target:{eventPageX:void 0,coords:void 0,TD:void 0,col:void 0},cachedDropIndex:void 0}),t.eventManager=new Gi(P_(t)),t.backlight=new w_(e),t.guideline=new E_(e),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"manualColumnMove"}},{key:"PLUGIN_PRIORITY",get:function(){return 120}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().manualColumnMove}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(t,n,o,i){return e.onBeforeOnCellMouseDown(t,n,o,i)}),this.addHook("beforeOnCellMouseOver",function(t,n,o,i){return e.onBeforeOnCellMouseOver(t,n,o,i)}),this.addHook("afterScrollVertically",function(){return e.onAfterScrollVertically()}),this.addHook("afterLoadData",function(){return e.onAfterLoadData()}),this.buildPluginUI(),this.registerEvents(),zt(this.hot.rootElement,"ht__manualColumnMove"),I_(A_(a.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),I_(A_(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){Wt(this.hot.rootElement,"ht__manualColumnMove"),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),I_(A_(a.prototype),"disablePlugin",this).call(this)}},{key:"moveColumn",value:function(e,t){return this.moveColumns([e],t)}},{key:"moveColumns",value:function(e,t){var n=L_.get(this),o=n.cachedDropIndex,i=this.isMovePossible(e,t),a=this.hot.runHooks("beforeColumnMove",e,t,o,i);if(n.cachedDropIndex=void 0,!1!==a){i&&this.hot.columnIndexMapper.moveIndexes(e,t);var r=i&&this.isColumnOrderChanged(e,t);return this.hot.runHooks("afterColumnMove",e,t,o,i,r),r}}},{key:"dragColumn",value:function(e,t){return this.dragColumns([e],t)}},{key:"dragColumns",value:function(e,t){var n=this.countFinalIndex(e,t);return L_.get(this).cachedDropIndex=t,this.moveColumns(e,n)}},{key:"isMovePossible",value:function(e,t){var n=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),o=e.length+t>n,i=t<0,a=e.some(function(e){return e<0}),r=e.some(function(e){return e>=n});return!(o||i||a||r)}},{key:"isColumnOrderChanged",value:function(e,t){return e.some(function(e,n){return e-n!==t})}},{key:"countFinalIndex",value:function(e,t){var n=z(e,function(e,n){return n<t&&(e+=1),e},0);return t-n}},{key:"getColumnsWidth",value:function(e,t){for(var n=this.hot.columnIndexMapper,o=0,i=e;i<=t;i+=1){var a=n.getRenderableFromVisualIndex(i);i<0?o+=this.hot.view.wt.wtViewport.getRowHeaderWidth()||0:null!==a&&(o+=this.hot.view.wt.wtTable.getStretchedColumnWidth(a)||0)}return o}},{key:"moveBySettingsOrLoad",value:function(){var e=this.hot.getSettings().manualColumnMove;if(Array.isArray(e))this.moveColumns(e,0);else if(void 0!==e){var t=this.persistentStateLoad();t.length&&this.moveColumns(t,0)}}},{key:"isFixedColumnsLeft",value:function(e){return e<this.hot.getSettings().fixedColumnsLeft}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}},{key:"persistentStateLoad",value:function(){var e={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",e),e.value?e.value:[]}},{key:"prepareColumnsToMoving",value:function(e,t){var n=[];return Nl(e,t,function(e){n.push(e)}),n}},{key:"refreshPositions",value:function(){var e=L_.get(this),t=this.hot.view.wt.wtTable.getFirstVisibleColumn(),n=this.hot.view.wt.wtTable.getLastVisibleColumn(),o=this.hot.view.wt.wtTable,i=this.hot.view.wt.wtOverlays.scrollableElement,a="number"==typeof i.scrollX?i.scrollX:i.scrollLeft,r=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,e.coords-1),l=e.target.eventPageX-(e.rootElementOffset-(void 0===i.scrollX?a:0)),s=o.hider.offsetWidth,c=o.TBODY.offsetLeft,u=this.backlight.getOffset().left,d=this.backlight.getSize().width,h=0;if(e.rootElementOffset+o.holder.offsetWidth+a<e.target.eventPageX&&e.coords<e.countCols&&(e.coords+=1),e.hasRowHeaders&&(h=this.hot.view.wt.wtOverlays.leftOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsLeft(e.coords)&&(r+=a),r+=h,e.coords<0)e.fixedColumns>0?e.target.col=0:e.target.col=t>0?t-1:t;else if(e.target.TD.offsetWidth/2+r<=l){var f=e.coords>=e.countCols?e.countCols-1:e.coords;e.target.col=f+1,r+=e.target.TD.offsetWidth,e.target.col>n&&n<e.countCols&&this.hot.scrollViewportTo(void 0,n+1,void 0,!0)}else e.target.col=e.coords,e.target.col<=t&&e.target.col>=e.fixedColumns&&t>0&&this.hot.scrollViewportTo(void 0,t-1);e.target.col<=t&&e.target.col>=e.fixedColumns&&t>0&&this.hot.scrollViewportTo(void 0,t-1);var p=l,m=r;l+d+u>=s?p=s-d-u:l+u<c+h&&(p=c+h+Math.abs(u)),r>=s-1?m=s-1:0===m?m=1:void 0!==i.scrollX&&e.coords<e.fixedColumns&&(m-=e.rootElementOffset<=i.scrollX?e.rootElementOffset:0),this.backlight.setPosition(null,p),this.guideline.setPosition(null,m)}},{key:"registerEvents",value:function(){var e=this,t=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(t,"mousemove",function(t){return e.onMouseMove(t)}),this.eventManager.addEventListener(t,"mouseup",function(){return e.onMouseUp()})}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(e,t,n,o){var i=this.hot.view.wt.wtTable,a=this.hot.selection.isSelectedByColumnHeader(),r=this.hot.getSelectedRangeLast(),l=L_.get(this),s=Ut(e.target,"sortAction");if(!r||!a||l.pressed||0!==e.button||s)return l.pressed=!1,l.columnsToMove.length=0,void Wt(this.hot.rootElement,["on-moving--columns","show-ui"]);var c=this.guideline.isBuilt()&&!this.guideline.isAppended(),u=this.backlight.isBuilt()&&!this.backlight.isAppended();c&&u&&(this.guideline.appendTo(i.hider),this.backlight.appendTo(i.hider));var d=r.from,h=r.to,f=Math.min(d.col,h.col),p=Math.max(d.col,h.col);if(t.row<0&&t.col>=f&&t.col<=p){o.column=!0,l.pressed=!0,l.target.eventPageX=e.pageX,l.coords=t.col,l.target.TD=n,l.target.col=t.col,l.columnsToMove=this.prepareColumnsToMoving(f,p),l.hasRowHeaders=!!this.hot.getSettings().rowHeaders,l.countCols=this.hot.countCols(),l.fixedColumns=this.hot.getSettings().fixedColumnsLeft,l.rootElementOffset=Zt(this.hot.rootElement).left;var m=l.hasRowHeaders?-1:0,v=i.holder.scrollTop+i.getColumnHeaderHeight(0)+1,b=t.col<l.fixedColumns,y=this.hot.view.wt.wtOverlays.scrollableElement,g=y.scrollX?y.scrollX-l.rootElementOffset:0,w=e.offsetX-(b?g:0),_=Math.abs(this.getColumnsWidth(f,t.col-1)+w);this.backlight.setPosition(v,this.getColumnsWidth(m,f-1)+_),this.backlight.setSize(this.getColumnsWidth(f,p),i.hider.offsetHeight-v),this.backlight.setOffset(null,-1*_),zt(this.hot.rootElement,"on-moving--columns")}else Wt(this.hot.rootElement,"after-selection--columns"),l.pressed=!1,l.columnsToMove.length=0}},{key:"onMouseMove",value:function(e){var t=L_.get(this);if(t.pressed){if(e.target===this.backlight.element){var n=this.backlight.getSize().width;this.backlight.setSize(0),setTimeout(function(){this.backlight.setPosition(n)})}t.target.eventPageX=e.pageX,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(e,t,n,o){var i=this.hot.getSelectedRangeLast(),a=L_.get(this);i&&a.pressed&&(a.columnsToMove.indexOf(t.col)>-1?Wt(this.hot.rootElement,"show-ui"):zt(this.hot.rootElement,"show-ui"),o.row=!0,o.column=!0,o.cell=!0,a.coords=t.col,a.target.TD=n)}},{key:"onMouseUp",value:function(){var e=L_.get(this),t=e.target.col,n=e.columnsToMove.length;if(e.coords=void 0,e.pressed=!1,e.backlightWidth=0,Wt(this.hot.rootElement,["on-moving--columns","show-ui","after-selection--columns"]),this.hot.selection.isSelectedByColumnHeader()&&zt(this.hot.rootElement,"after-selection--columns"),!(n<1||void 0===t)){var o=e.columnsToMove[0],i=this.hot.toPhysicalColumn(o),a=this.dragColumns(e.columnsToMove,t);if(e.columnsToMove.length=0,!0===a){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize(!0);var r=this.hot.toVisualColumn(i),l=r+n-1;this.hot.selectColumns(r,l)}}}},{key:"onAfterScrollVertically",value:function(){var e=this.hot.view.wt.wtTable,t=e.getColumnHeaderHeight(0)+1+e.holder.scrollTop;this.backlight.setPosition(t),this.backlight.setSize(null,e.hider.offsetHeight-t)}},{key:"buildPluginUI",value:function(){this.backlight.build(),this.guideline.build()}},{key:"onAfterLoadData",value:function(){this.moveBySettingsOrLoad()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),I_(A_(a.prototype),"destroy",this).call(this)}}])&&D_(t.prototype,n),o&&D_(t,o),a}();function V_(e){"@babel/helpers - typeof";return(V_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F_(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B_(e,t,n){return(B_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U_(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function H_(e,t){return(H_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=U_(e);if(t){var i=U_(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===V_(t)||"function"==typeof t))return t;return $_(e)}(this,n)}}function $_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U_(e){return(U_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z_=new WeakMap,W_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H_(e,t)}(a,Wv);var t,n,o,i=j_(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=(t=i.call(this,e)).hot.rootDocument;return t.currentTH=null,t.currentCol=null,t.selectedCols=[],t.currentWidth=null,t.newSize=null,t.startY=null,t.startWidth=null,t.startOffset=null,t.handle=n.createElement("DIV"),t.guide=n.createElement("DIV"),t.eventManager=new Gi($_(t)),t.pressed=null,t.dblclick=0,t.autoresizeTimeout=null,t.columnWidthsMap=void 0,z_.set($_(t),{config:void 0}),zt(t.handle,"manualColumnResizer"),zt(t.guide,"manualColumnResizerGuide"),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"manualColumnResize"}},{key:"PLUGIN_PRIORITY",get:function(){return 130}}],(n=[{key:"isEnabled",value:function(){return this.hot.getSettings().manualColumnResize}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.columnWidthsMap=new Cc,this.columnWidthsMap.addLocalHook("init",function(){return e.onMapInit()}),this.hot.columnIndexMapper.registerMap(this.pluginName,this.columnWidthsMap),this.addHook("modifyColWidth",function(t,n){return e.onModifyColWidth(t,n)}),this.addHook("beforeStretchingColumnWidth",function(t,n){return e.onBeforeStretchingColumnWidth(t,n)}),this.addHook("beforeColumnResize",function(t,n,o){return e.onBeforeColumnResize(t,n,o)}),this.bindEvents(),B_(U_(a.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),B_(U_(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){z_.get(this).config=this.columnWidthsMap.getValues(),this.hot.columnIndexMapper.unregisterMap(this.pluginName),B_(U_(a.prototype),"disablePlugin",this).call(this)}},{key:"saveManualColumnWidths",value:function(){this.hot.runHooks("persistentStateSave","manualColumnWidths",this.columnWidthsMap.getValues())}},{key:"loadManualColumnWidths",value:function(){var e={};return this.hot.runHooks("persistentStateLoad","manualColumnWidths",e),e.value}},{key:"setManualSize",value:function(e,t){var n=Math.max(t,20),o=this.hot.toPhysicalColumn(e);return this.columnWidthsMap.setValueAtIndex(o,n),n}},{key:"clearManualSize",value:function(e){var t=this.hot.toPhysicalColumn(e);this.columnWidthsMap.setValueAtIndex(t,null)}},{key:"onMapInit",value:function(){var e=this,t=z_.get(this),n=this.hot.getSettings().manualColumnResize,o=this.loadManualColumnWidths();void 0!==o?this.hot.batchExecution(function(){o.forEach(function(t,n){e.columnWidthsMap.setValueAtIndex(n,t)})},!0):Array.isArray(n)?(this.hot.batchExecution(function(){n.forEach(function(t,n){e.columnWidthsMap.setValueAtIndex(n,t)})},!0),t.config=n):!0===n&&Array.isArray(t.config)&&this.hot.batchExecution(function(){t.config.forEach(function(t,n){e.columnWidthsMap.setValueAtIndex(n,t)})},!0)}},{key:"setupHandlePosition",value:function(e){var t=this;if(e.parentNode){this.currentTH=e;var n=this.hot.view.wt,o=n.wtTable.getCoords(this.currentTH),i=o.col;if(!(i<0)){var a,r=dn(this.currentTH),l=this.currentTH.getBoundingClientRect();i<n.getSetting("fixedColumnsLeft")&&(a=n.wtOverlays.topLeftCornerOverlay.getRelativeCellPosition(this.currentTH,o.row,o.col)),a||(a=n.wtOverlays.topOverlay.getRelativeCellPosition(this.currentTH,o.row,o.col)),this.currentCol=this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),this.selectedCols=[];var s=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&s)K(this.hot.getSelectedRange(),function(e){Nl(e.getTopLeftCorner().col,e.getBottomRightCorner().col,function(e){t.selectedCols.includes(e)||t.selectedCols.push(e)})});this.selectedCols.includes(this.currentCol)||(this.selectedCols=[this.currentCol]),this.startOffset=a.left-6,this.startWidth=parseInt(l.width,10),this.handle.style.top="".concat(a.top,"px"),this.handle.style.left="".concat(this.startOffset+this.startWidth,"px"),this.handle.style.height="".concat(r,"px"),this.hot.rootElement.appendChild(this.handle)}}}},{key:"refreshHandlePosition",value:function(){this.handle.style.left="".concat(this.startOffset+this.currentWidth,"px")}},{key:"setupGuidePosition",value:function(){var e=parseInt(dn(this.handle),10),t=parseInt(this.handle.style.top,10)+e,n=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);zt(this.handle,"active"),zt(this.guide,"active"),this.guide.style.top="".concat(t,"px"),this.guide.style.left=this.handle.style.left,this.guide.style.height="".concat(n-e,"px"),this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style.left=this.handle.style.left}},{key:"hideHandleAndGuide",value:function(){Wt(this.handle,"active"),Wt(this.guide,"active")}},{key:"checkIfColumnHeader",value:function(e){return!!Lt(e,["THEAD"],this.hot.rootElement)}},{key:"getClosestTHParent",value:function(e){return"TABLE"!==e.tagName?"TH"===e.tagName?e:this.getClosestTHParent(e.parentNode):null}},{key:"onMouseOver",value:function(e){if(!In(e.target)&&this.checkIfColumnHeader(e.target)){var t=this.getClosestTHParent(e.target);if(!t)return;var n=t.getAttribute("colspan");!t||null!==n&&1!==n||this.pressed||this.setupHandlePosition(t)}}},{key:"afterMouseDownTimeout",value:function(){var e=this,t=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.adjustElementsSize(!0)},n=function(n,o){var i=e.hot.runHooks("beforeColumnResize",e.newSize,n,!0);void 0!==i&&(e.newSize=i),"all"===e.hot.getSettings().stretchH?e.clearManualSize(n):e.setManualSize(n,e.newSize),e.saveManualColumnWidths(),e.hot.runHooks("afterColumnResize",e.newSize,n,!0),o&&t()};this.dblclick>=2&&(this.selectedCols.length>1?(K(this.selectedCols,function(e){n(e)}),t()):K(this.selectedCols,function(e){n(e,!0)}));this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(e){var t=this;Ut(e.target,"manualColumnResizer")&&(this.setupHandlePosition(this.currentTH),this.setupGuidePosition(),this.pressed=!0,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return t.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick+=1,this.startX=e.pageX,this.newSize=this.startWidth)}},{key:"onMouseMove",value:function(e){var t=this;this.pressed&&(this.currentWidth=this.startWidth+(e.pageX-this.startX),K(this.selectedCols,function(e){t.newSize=t.setManualSize(e,t.currentWidth)}),this.refreshHandlePosition(),this.refreshGuidePosition())}},{key:"onMouseUp",value:function(){var e=this,t=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.adjustElementsSize(!0)},n=function(n,o){e.hot.runHooks("beforeColumnResize",e.newSize,n,!1),o&&t(),e.saveManualColumnWidths(),e.hot.runHooks("afterColumnResize",e.newSize,n,!1)};if(this.pressed){if(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!==this.startWidth)this.selectedCols.length>1?(K(this.selectedCols,function(e){n(e)}),t()):K(this.selectedCols,function(e){n(e,!0)});this.setupHandlePosition(this.currentTH)}}},{key:"bindEvents",value:function(){var e=this,t=this.hot,n=t.rootWindow,o=t.rootElement;this.eventManager.addEventListener(o,"mouseover",function(t){return e.onMouseOver(t)}),this.eventManager.addEventListener(o,"mousedown",function(t){return e.onMouseDown(t)}),this.eventManager.addEventListener(n,"mousemove",function(t){return e.onMouseMove(t)}),this.eventManager.addEventListener(n,"mouseup",function(){return e.onMouseUp()})}},{key:"onModifyColWidth",value:function(e,t){var n=e;if(this.enabled){var o=this.hot.toPhysicalColumn(t),i=this.columnWidthsMap.getValueAtIndex(o);this.hot.getSettings().manualColumnResize&&i&&(n=i)}return n}},{key:"onBeforeStretchingColumnWidth",value:function(e,t){var n=this.columnWidthsMap.getValueAtIndex(t);return null===n&&(n=e),n}},{key:"onBeforeColumnResize",value:function(){this.hot.view.wt.wtViewport.resetHasOversizedColumnHeadersMarked()}},{key:"destroy",value:function(){B_(U_(a.prototype),"destroy",this).call(this)}}])&&F_(t.prototype,n),o&&F_(t,o),a}();function q_(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var K_=0,G_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this._element=null,this.state=K_}var t,n,o;return t=e,(n=[{key:"appendTo",value:function(e){e.appendChild(this._element),this.state=2}},{key:"build",value:function(){this.state===K_&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=K_}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(e,t){void 0!==e&&(this._element.style.top=e+"px"),void 0!==t&&(this._element.style.left=t+"px")}},{key:"getPosition",value:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}},{key:"setSize",value:function(e,t){e&&(this._element.style.width=e+"px"),t&&(this._element.style.height=t+"px")}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(e,t){e&&(this._element.style.marginTop=e+"px"),t&&(this._element.style.marginLeft=t+"px")}},{key:"getOffset",value:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}}])&&q_(t.prototype,n),o&&q_(t,o),e}();function J_(e){"@babel/helpers - typeof";return(J_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y_(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function X_(e,t,n){return(X_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eC(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Q_(e,t){return(Q_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=eC(e);if(t){var i=eC(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===J_(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function eC(e){return(eC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q_(e,t)}(a,G_);var t,n,o,i=Z_(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"build",value:function(){X_(eC(a.prototype),"build",this).call(this),zt(this._element,"ht__manualRowMove--backlight")}}])&&Y_(t.prototype,n),o&&Y_(t,o),a}();function nC(e){"@babel/helpers - typeof";return(nC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function iC(e,t,n){return(iC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lC(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function aC(e,t){return(aC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=lC(e);if(t){var i=lC(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===nC(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function lC(e){return(lC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aC(e,t)}(a,G_);var t,n,o,i=rC(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"build",value:function(){iC(lC(a.prototype),"build",this).call(this),zt(this._element,"ht__manualRowMove--guideline")}}])&&oC(t.prototype,n),o&&oC(t,o),a}();function cC(e){"@babel/helpers - typeof";return(cC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function dC(e,t,n){return(dC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mC(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function hC(e,t){return(hC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=mC(e);if(t){var i=mC(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===cC(t)||"function"==typeof t))return t;return pC(e)}(this,n)}}function pC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mC(e){return(mC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().register("beforeRowMove"),Jr.getSingleton().register("afterRowMove");var vC,bC,yC,gC,wC=new WeakMap,_C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hC(e,t)}(a,Wv);var t,n,o,i=fC(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),wC.set(pC(t),{rowsToMove:[],pressed:void 0,target:{eventPageY:void 0,coords:void 0,TD:void 0,row:void 0},cachedDropIndex:void 0}),t.eventManager=new Gi(pC(t)),t.backlight=new tC(e),t.guideline=new sC(e),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"manualRowMove"}},{key:"PLUGIN_PRIORITY",get:function(){return 140}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().manualRowMove}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(t,n,o,i){return e.onBeforeOnCellMouseDown(t,n,o,i)}),this.addHook("beforeOnCellMouseOver",function(t,n,o,i){return e.onBeforeOnCellMouseOver(t,n,o,i)}),this.addHook("afterScrollHorizontally",function(){return e.onAfterScrollHorizontally()}),this.addHook("afterLoadData",function(){return e.onAfterLoadData()}),this.buildPluginUI(),this.registerEvents(),zt(this.hot.rootElement,"ht__manualRowMove"),dC(mC(a.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),dC(mC(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){Wt(this.hot.rootElement,"ht__manualRowMove"),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),dC(mC(a.prototype),"disablePlugin",this).call(this)}},{key:"moveRow",value:function(e,t){return this.moveRows([e],t)}},{key:"moveRows",value:function(e,t){var n=wC.get(this),o=n.cachedDropIndex,i=this.isMovePossible(e,t),a=this.hot.runHooks("beforeRowMove",e,t,o,i);if(n.cachedDropIndex=void 0,!1!==a){i&&this.hot.rowIndexMapper.moveIndexes(e,t);var r=i&&this.isRowOrderChanged(e,t);return this.hot.runHooks("afterRowMove",e,t,o,i,r),r}}},{key:"dragRow",value:function(e,t){return this.dragRows([e],t)}},{key:"dragRows",value:function(e,t){var n=this.countFinalIndex(e,t);return wC.get(this).cachedDropIndex=t,this.moveRows(e,n)}},{key:"isMovePossible",value:function(e,t){var n=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),o=e.length+t>n,i=t<0,a=e.some(function(e){return e<0}),r=e.some(function(e){return e>=n});return!(o||i||a||r)}},{key:"isRowOrderChanged",value:function(e,t){return e.some(function(e,n){return e-n!==t})}},{key:"countFinalIndex",value:function(e,t){var n=z(e,function(e,n){return n<t&&(e+=1),e},0);return t-n}},{key:"getRowsHeight",value:function(e,t){for(var n=this.hot.rowIndexMapper,o=0,i=e;i<=t;i++){var a=n.getRenderableFromVisualIndex(i);null!==a&&(o+=this.hot.view.wt.wtTable.getRowHeight(a)||23)}return o}},{key:"moveBySettingsOrLoad",value:function(){var e=this.hot.getSettings().manualRowMove;if(Array.isArray(e))this.moveRows(e,0);else if(void 0!==e){var t=this.persistentStateLoad();t.length&&this.moveRows(t,0)}}},{key:"isFixedRowTop",value:function(e){return e<this.hot.getSettings().fixedRowsTop}},{key:"isFixedRowBottom",value:function(e){return e>this.hot.getSettings().fixedRowsBottom}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}},{key:"persistentStateLoad",value:function(){var e={};return this.hot.runHooks("persistentStateLoad","manualRowMove",e),e.value?e.value:[]}},{key:"prepareRowsToMoving",value:function(){var e=this.hot.getSelectedRangeLast(),t=[];if(!e)return t;var n=e.from,o=e.to;return Nl(Math.min(n.row,o.row),Math.max(n.row,o.row),function(e){t.push(e)}),t}},{key:"refreshPositions",value:function(){var e=wC.get(this),t=e.target.coords,n=this.hot.view.wt.wtTable.getFirstVisibleRow(),o=this.hot.view.wt.wtTable.getLastVisibleRow(),i=this.hot.getSettings().fixedRowsTop,a=this.hot.countRows();t.row<i&&n>0&&this.hot.scrollViewportTo(n-1),t.row>=o&&o<a&&this.hot.scrollViewportTo(o+1,void 0,!0);var r=this.hot.view.wt.wtTable,l=e.target.TD,s=Zt(this.hot.rootElement),c=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,t.row-1),u=e.target.eventPageY-s.top+r.holder.scrollTop,d=r.hider.offsetHeight,h=r.TBODY.offsetTop,f=this.backlight.getOffset().top,p=this.backlight.getSize().height;this.isFixedRowTop(t.row)&&(c+=r.holder.scrollTop),t.row<0?e.target.row=n>0?n-1:n:l.offsetHeight/2+c<=u?(e.target.row=t.row+1,c+=0===t.row?l.offsetHeight-1:l.offsetHeight):e.target.row=t.row;var m=u,v=c;u+p+f>=d?m=d-p-f:u+f<h&&(m=h+Math.abs(f)),c>=d-1&&(v=d-1);var b=0;this.hot.view.wt.wtOverlays.topOverlay&&(b=this.hot.view.wt.wtOverlays.topOverlay.clone.wtTable.TABLE.offsetHeight),t.row>=i&&v-r.holder.scrollTop<b&&this.hot.scrollViewportTo(t.row),this.backlight.setPosition(m),this.guideline.setPosition(v)}},{key:"registerEvents",value:function(){var e=this,t=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(t,"mousemove",function(t){return e.onMouseMove(t)}),this.eventManager.addEventListener(t,"mouseup",function(){return e.onMouseUp()})}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(e,t,n,o){var i=this.hot.view.wt,a=i.wtTable,r=i.wtViewport,l=this.hot.selection.isSelectedByRowHeader(),s=this.hot.getSelectedRangeLast(),c=wC.get(this);if(!s||!l||c.pressed||0!==e.button)return c.pressed=!1,c.rowsToMove.length=0,void Wt(this.hot.rootElement,["on-moving--rows","show-ui"]);var u=this.guideline.isBuilt()&&!this.guideline.isAppended(),d=this.backlight.isBuilt()&&!this.backlight.isAppended();u&&d&&(this.guideline.appendTo(a.hider),this.backlight.appendTo(a.hider));var h=s.from,f=s.to,p=Math.min(h.row,f.row),m=Math.max(h.row,f.row);if(t.col<0&&t.row>=p&&t.row<=m){o.row=!0,c.pressed=!0,c.target.eventPageY=e.pageY,c.target.coords=t,c.target.TD=n,c.rowsToMove=this.prepareRowsToMoving();var v=a.holder.scrollLeft+r.getRowHeaderWidth();this.backlight.setPosition(null,v),this.backlight.setSize(a.hider.offsetWidth-v,this.getRowsHeight(p,m)),this.backlight.setOffset(-1*(this.getRowsHeight(p,t.row-1)+e.offsetY),null),zt(this.hot.rootElement,"on-moving--rows"),this.refreshPositions()}else Wt(this.hot.rootElement,"after-selection--rows"),c.pressed=!1,c.rowsToMove.length=0}},{key:"onMouseMove",value:function(e){var t=wC.get(this);if(t.pressed){if(e.target===this.backlight.element){var n=this.backlight.getSize().height;this.backlight.setSize(null,0),setTimeout(function(){this.backlight.setPosition(null,n)})}t.target.eventPageY=e.pageY,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(e,t,n,o){var i=this.hot.getSelectedRangeLast(),a=wC.get(this);i&&a.pressed&&(a.rowsToMove.indexOf(t.row)>-1?Wt(this.hot.rootElement,"show-ui"):zt(this.hot.rootElement,"show-ui"),o.row=!0,o.column=!0,o.cell=!0,a.target.coords=t,a.target.TD=n)}},{key:"onMouseUp",value:function(){var e=wC.get(this),t=e.target.row,n=e.rowsToMove.length;if(e.pressed=!1,e.backlightHeight=0,Wt(this.hot.rootElement,["on-moving--rows","show-ui","after-selection--rows"]),this.hot.selection.isSelectedByRowHeader()&&zt(this.hot.rootElement,"after-selection--rows"),!(n<1||void 0===t)){var o=e.rowsToMove[0],i=this.hot.toPhysicalRow(o),a=this.dragRows(e.rowsToMove,t);if(e.rowsToMove.length=0,!0===a){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize(!0);var r=this.hot.toVisualRow(i),l=r+n-1;this.hot.selectRows(r,l)}}}},{key:"onAfterScrollHorizontally",value:function(){var e=this.hot.view.wt.wtTable,t=this.hot.view.wt.wtViewport.getRowHeaderWidth()+e.holder.scrollLeft;this.backlight.setPosition(null,t),this.backlight.setSize(e.hider.offsetWidth-t)}},{key:"buildPluginUI",value:function(){this.backlight.build(),this.guideline.build()}},{key:"onAfterLoadData",value:function(){this.moveBySettingsOrLoad()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),dC(mC(a.prototype),"destroy",this).call(this)}}])&&uC(t.prototype,n),o&&uC(t,o),a}();function CC(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function kC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var xC,SC=function(){function e(t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.row=t,this.col=n,this.rowspan=o,this.colspan=i,this.removed=!1}var t,n,o;return t=e,o=[{key:"NEGATIVE_VALUES_WARNING",value:function(e){return Ze(vC||(vC=CC(["The merged cell declared with {row: ",", col: ",", \n      rowspan: ",", colspan: ","} contains negative values, which is \n      not supported. It will not be added to the collection."],["The merged cell declared with {row: ",", col: ",",\\x20\n      rowspan: ",", colspan: ","} contains negative values, which is\\x20\n      not supported. It will not be added to the collection."])),e.row,e.col,e.rowspan,e.colspan)}},{key:"IS_OUT_OF_BOUNDS_WARNING",value:function(e){return Ze(bC||(bC=CC(["The merged cell declared at [",", ","] is positioned \n      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup."],["The merged cell declared at [",", ","] is positioned\\x20\n      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup."])),e.row,e.col)}},{key:"IS_SINGLE_CELL",value:function(e){return Ze(yC||(yC=CC(["The merged cell declared at [",", ",'] has both "rowspan" \n      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has both "rowspan"\\x20\n      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.'])),e.row,e.col)}},{key:"ZERO_SPAN_WARNING",value:function(e){return Ze(gC||(gC=CC(["The merged cell declared at [",", ",'] has "rowspan" \n      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has "rowspan"\\x20\n      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.'])),e.row,e.col)}},{key:"containsNegativeValues",value:function(e){return e.row<0||e.col<0||e.rowspan<0||e.colspan<0}},{key:"isSingleCell",value:function(e){return 1===e.colspan&&1===e.rowspan}},{key:"containsZeroSpan",value:function(e){return 0===e.colspan||0===e.rowspan}},{key:"isOutOfBounds",value:function(e,t,n){return e.row<0||e.col<0||e.row>=t||e.row+e.rowspan-1>=t||e.col>=n||e.col+e.colspan-1>=n}}],(n=[{key:"normalize",value:function(e){var t=e.countRows(),n=e.countCols();this.row<0?this.row=0:this.row>t-1&&(this.row=t-1),this.col<0?this.col=0:this.col>n-1&&(this.col=n-1),this.row+this.rowspan>t-1&&(this.rowspan=t-this.row),this.col+this.colspan>n-1&&(this.colspan=n-this.col)}},{key:"includes",value:function(e,t){return this.row<=e&&this.col<=t&&this.row+this.rowspan-1>=e&&this.col+this.colspan-1>=t}},{key:"includesHorizontally",value:function(e){return this.col<=e&&this.col+this.colspan-1>=e}},{key:"includesVertically",value:function(e){return this.row<=e&&this.row+this.rowspan-1>=e}},{key:"shift",value:function(e,t){var n=e[0]||e[1],o=t+Math.abs(e[0]||e[1])-1,i=e[0]?"colspan":"rowspan",a=e[0]?"col":"row",r=Math.min(t,o),l=Math.max(t,o),s=this[a],c=this[a]+this[i]-1;if(s>=t&&(this[a]+=n),n>0)t<=c&&t>s&&(this[i]+=n);else if(n<0){if(r<=s&&l>=c)return this.removed=!0,!1;if(s>=r&&s<=l){var u=l-s+1,d=Math.abs(n)-u;this[a]-=d+n,this[i]-=u}else if(s<=r&&c>=l)this[i]+=n;else if(s<=r&&c>=r&&c<l){var h=c-r+1;this[i]-=h}}return!0}},{key:"isFarther",value:function(e,t){return!e||("down"===t?e.row+e.rowspan-1<this.row+this.rowspan-1:"up"===t?e.row>this.row:"right"===t?e.col+e.colspan-1<this.col+this.colspan-1:"left"===t?e.col>this.col:null)}},{key:"getLastRow",value:function(){return this.row+this.rowspan-1}},{key:"getLastColumn",value:function(){return this.col+this.colspan-1}},{key:"getRange",value:function(){return new Gn(new qn(this.row,this.col),new qn(this.row,this.col),new qn(this.getLastRow(),this.getLastColumn()))}}])&&kC(t.prototype,n),o&&kC(t,o),e}();function TC(e,t,n,o){t?t.row===n&&t.col===o?(e.setAttribute("rowspan",t.rowspan.toString()),e.setAttribute("colspan",t.colspan.toString())):(e.removeAttribute("rowspan"),e.removeAttribute("colspan"),e.style.display="none"):(e.removeAttribute("rowspan"),e.removeAttribute("colspan"),e.style.display="")}function EC(e){return function(e){if(Array.isArray(e))return OC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return OC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OC(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function DC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var IC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=t,this.mergedCells=[],this.hot=t.hot}var t,n,o;return t=e,o=[{key:"IS_OVERLAPPING_WARNING",value:function(e){return Ze(xC||(t=["The merged cell declared at [",", ","], overlaps \n      with the other declared merged cell. The overlapping merged cell was not added to the table, please \n      fix your setup."],(n=["The merged cell declared at [",", ","], overlaps\\x20\n      with the other declared merged cell. The overlapping merged cell was not added to the table, please\\x20\n      fix your setup."])||(n=t.slice(0)),xC=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))),e.row,e.col);var t,n}}],(n=[{key:"get",value:function(e,t){var n=!1;return K(this.mergedCells,function(o){return!(o.row<=e&&o.row+o.rowspan-1>=e&&o.col<=t&&o.col+o.colspan-1>=t)||(n=o,!1)}),n}},{key:"getByRange",value:function(e){var t=!1;return K(this.mergedCells,function(n){return!(n.row<=e.from.row&&n.row+n.rowspan-1>=e.to.row&&n.col<=e.from.col&&n.col+n.colspan-1>=e.to.col)||(t=n)}),t}},{key:"getWithinRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mergedCells,o=[],i=e;if(!i.includesRange){var a=new qn(i.from.row,i.from.col),r=new qn(i.to.row,i.to.col);i=new Gn(a,a,r)}return K(n,function(e){var n=new qn(e.row,e.col),a=new qn(e.row+e.rowspan-1,e.col+e.colspan-1),r=new Gn(n,n,a);t?i.overlaps(r)&&o.push(e):i.includesRange(r)&&o.push(e)}),!!o.length&&o}},{key:"add",value:function(t){var n=this.mergedCells,o=t.row,i=t.col,a=t.rowspan,r=t.colspan,l=new SC(o,i,a,r),s=this.get(o,i),c=this.isOverlapping(l);return s||c?(No(e.IS_OVERLAPPING_WARNING(l)),!1):(this.hot&&l.normalize(this.hot),n.push(l),l)}},{key:"remove",value:function(e,t){var n=this.mergedCells,o=this.get(e,t),i=o?this.mergedCells.indexOf(o):null;return!(!o||!1===i)&&(n.splice(i,1),o)}},{key:"clear",value:function(){var e=this,t=[],n=[];K(this.mergedCells,function(n){var o=e.hot.getCell(n.row,n.col);o&&t.push([o,e.get(n.row,n.col),n.row,n.col])}),this.mergedCells.length=0,K(t,function(o,i){Nl(0,o.rowspan-1,function(t){Nl(0,o.colspan-1,function(i){if(0!==i||0!==t){var a=e.hot.getCell(o.row+t,o.col+i);a&&n.push([a,null,null,null])}})}),t[i][1]=null}),K(t,function(e){TC.apply(void 0,EC(e))}),K(n,function(e){TC.apply(void 0,EC(e))})}},{key:"isOverlapping",value:function(e){var t=new Gn(new qn(0,0),new qn(e.row,e.col),new qn(e.row+e.rowspan-1,e.col+e.colspan-1)),n=!1;return K(this.mergedCells,function(e){return!new Gn(new qn(0,0),new qn(e.row,e.col),new qn(e.row+e.rowspan-1,e.col+e.colspan-1)).overlaps(t)||(n=!0,!1)}),n}},{key:"isFirstRenderableMergedCell",value:function(e,t){var n=this.get(e,t);return n&&this.hot.rowIndexMapper.getFirstNotHiddenIndex(n.row,1)===e&&this.hot.columnIndexMapper.getFirstNotHiddenIndex(n.col,1)===t}},{key:"getFirstRenderableCoords",value:function(e,t){var n=this.get(e,t);if(!n||this.isFirstRenderableMergedCell(e,t))return new qn(e,t);var o=this.hot.rowIndexMapper.getFirstNotHiddenIndex(n.row,1),i=this.hot.columnIndexMapper.getFirstNotHiddenIndex(n.col,1);return new qn(o,i)}},{key:"shiftCollections",value:function(e,t,n){var o=this,i=[0,0];switch(e){case"right":i[0]+=n;break;case"left":i[0]-=n;break;case"down":i[1]+=n;break;case"up":i[1]-=n}K(this.mergedCells,function(e){e.shift(i,t)}),Vl(this.mergedCells.length-1,0,function(e){var t=o.mergedCells[e];t&&t.removed&&o.mergedCells.splice(o.mergedCells.indexOf(t),1)})}}])&&DC(t.prototype,n),o&&DC(t,o),e}();function RC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return MC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function PC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var AC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=t,this.mergedCellsCollection=this.plugin.mergedCellsCollection,this.currentFillData=null}var t,n,o;return t=e,(n=[{key:"correctSelectionAreaSize",value:function(e){if(e[0]===e[2]&&e[1]===e[3]){var t=this.mergedCellsCollection.get(e[0],e[1]);t&&(e[2]=e[0]+t.rowspan-1,e[3]=e[1]+t.colspan-1)}}},{key:"getDirection",value:function(e,t){return t[0]===e[0]&&t[1]===e[1]&&t[3]===e[3]?"down":t[2]===e[2]&&t[1]===e[1]&&t[3]===e[3]?"up":t[1]===e[1]&&t[2]===e[2]?"right":"left"}},{key:"snapDragArea",value:function(e,t,n,o){var i=t.slice(0),a=this.getAutofillSize(e,t,n),r=RC(e,4),l=r[0],s=r[1],c=r[2],u=r[3],d=["up","down"].indexOf(n)>-1?c-l+1:u-s+1,h=a-Math.floor(a/d)*d,f=this.getFarthestCollection(e,t,n,o);if(f)if("down"===n){var p=f.row+f.rowspan-l-h;i[2]+p>=this.plugin.hot.countRows()?i[2]-=h:i[2]+=h?p:0}else if("right"===n){var m=f.col+f.colspan-s-h;i[3]+m>=this.plugin.hot.countCols()?i[3]-=h:i[3]+=h?m:0}else if("up"===n){var v=c-h-f.row+1;i[0]+v<0?i[0]+=h:i[0]-=h?v:0}else if("left"===n){var b=u-h-f.col+1;i[1]+b<0?i[1]+=h:i[1]-=h?b:0}return this.updateCurrentFillCache({baseArea:e,dragDirection:n,foundMergedCells:o,fillSize:a,dragArea:i,cycleLength:d}),i}},{key:"updateCurrentFillCache",value:function(e){this.currentFillData||(this.currentFillData={}),se(this.currentFillData,e)}},{key:"getAutofillSize",value:function(e,t,n){var o=RC(e,4),i=o[0],a=o[1],r=o[2],l=o[3],s=RC(t,4),c=s[0],u=s[1],d=s[2],h=s[3];switch(n){case"up":return i-c;case"down":return d-r;case"left":return a-u;case"right":return h-l;default:return null}}},{key:"getDragArea",value:function(e,t,n){var o=RC(e,4),i=o[0],a=o[1],r=o[2],l=o[3],s=RC(t,4),c=s[0],u=s[1],d=s[2],h=s[3];switch(n){case"up":return[c,u,i-1,l];case"down":return[r+1,a,d,l];case"left":return[c,u,r,a-1];case"right":return[i,l+1,d,h];default:return null}}},{key:"getFarthestCollection",value:function(e,t,n,o){var i=RC(e,4),a=i[0],r=i[1],l=i[2],s=i[3],c=["up","down"].indexOf(n)>-1,u=c?l:s,d=c?a:r,h=this.getAutofillSize(e,t,n),f=c?l-a+1:s-r+1,p=h-Math.floor(h/f)*f,m=null,v=null,b=null;switch(n){case"up":m="includesVertically",b=u-p+1;break;case"left":m="includesHorizontally",b=u-p+1;break;case"down":m="includesVertically",b=d+p-1;break;case"right":m="includesHorizontally",b=d+p-1}return K(o,function(e){e[m](b)&&e.isFarther(v,n)&&(v=e)}),v}},{key:"recreateAfterDataPopulation",value:function(e){if(this.currentFillData){var t=this.getRangeFromChanges(e),n=this.currentFillData.foundMergedCells,o=this.currentFillData.dragDirection,i=function(e,n){switch(o){case"up":return e.row-n>=t.from.row;case"down":return e.row+e.rowspan-1+n<=t.to.row;case"left":return e.col-n>=t.from.column;case"right":return e.col+e.colspan-1+n<=t.to.column;default:return null}},a=0,r=null,l=1;do{for(var s=0;s<n.length;s+=1){if(i(r=n[s],a=l*this.currentFillData.cycleLength))switch(o){case"up":this.plugin.mergedCellsCollection.add({row:r.row-a,rowspan:r.rowspan,col:r.col,colspan:r.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:r.row+a,rowspan:r.rowspan,col:r.col,colspan:r.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:r.row,rowspan:r.rowspan,col:r.col-a,colspan:r.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:r.row,rowspan:r.rowspan,col:r.col+a,colspan:r.colspan})}s===n.length-1&&(l+=1)}}while(i(r,a));this.currentFillData=null,this.plugin.hot.render()}}},{key:"getRangeFromChanges",value:function(e){var t=this,n={min:null,max:null},o={min:null,max:null};return K(e,function(e){var i=e[0],a=t.plugin.hot.propToCol(e[1]);(null===n.min||i<n.min)&&(n.min=i),(null===n.max||i>n.max)&&(n.max=i),(null===o.min||a<o.min)&&(o.min=a),(null===o.max||a>o.max)&&(o.max=a)}),{from:{row:n.min,column:o.min},to:{row:n.max,column:o.max}}}},{key:"dragAreaOverlapsCollections",value:function(e,t,n){var o=RC(this.getDragArea(e,t,n),4),i=o[0],a=o[1],r=o[2],l=o[3],s=new qn(i,a),c=new qn(r,l),u=new Gn(s,s,c);return!!this.mergedCellsCollection.getWithinRange(u,!0)}}])&&PC(t.prototype,n),o&&PC(t,o),e}();function LC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var NC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=t,this.fullySelectedMergedCellClassName="fullySelectedMergedCell"}var t,n,o;return t=e,(n=[{key:"snapDelta",value:function(e,t,n){var o=t.to,i=o.row+e.row,a=o.col+e.col;e.row?this.jumpOverMergedCell(e,n,i):e.col&&this.jumpOverMergedCell(e,n,a)}},{key:"jumpOverMergedCell",value:function(e,t,n){var o=e.row||e.col,i=null,a=null,r=null;e.row?(i=t.includesVertically(n),a=t.row,r=t.getLastRow()):e.col&&(i=t.includesHorizontally(n),a=t.col,r=t.getLastColumn()),0!==o&&(o>0?i&&n!==a&&(o+=r-n+1):i&&n!==r&&(o-=n-a+1),e.row?e.row=o:e.col&&(e.col=o))}},{key:"getUpdatedSelectionRange",value:function(e,t){return new Gn(e.highlight,e.from,new qn(e.to.row+t.row,e.to.col+t.col))}},{key:"getSelectedMergedCellClassName",value:function(e,t,n,o){var i=Math.min(n[0],n[2]),a=Math.min(n[1],n[3]),r=Math.max(n[0],n[2]),l=Math.max(n[1],n[3]);if(void 0!==o&&this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(e,t)){var s=this.plugin.mergedCellsCollection.get(e,t);if(s){var c=s.getLastRow(),u=s.getLastColumn();return i<=s.row&&a<=s.col&&r>=c&&l>=u?"".concat(this.fullySelectedMergedCellClassName,"-").concat(o):this.plugin.selectionCalculations.isMergeCellFullySelected(s,this.plugin.hot.getSelectedRange())?"".concat(this.fullySelectedMergedCellClassName,"-multiple"):void 0}}}},{key:"isMergeCellFullySelected",value:function(e,t){var n=[];if(!t||!e)return!1;for(var o=0;o<e.rowspan;o+=1)for(var i=0;i<e.colspan;i+=1)n.push(new qn(e.row+o,e.col+i));for(var a=0;a<n.length;a+=1){for(var r=[],l=0;l<t.length;l+=1)r[l]=t[l].includes(n[a]);if(!r.includes(!0))return!1}return!0}},{key:"getSelectedMergedCellClassNameToRemove",value:function(){for(var e=[],t=0;t<=7;t+=1)e.push("".concat(this.fullySelectedMergedCellClassName,"-").concat(t));return e.push("".concat(this.fullySelectedMergedCellClassName,"-multiple")),e}}])&&LC(t.prototype,n),o&&LC(t,o),e}();function VC(e){"@babel/helpers - typeof";return(VC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||HC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BC(e){return function(e){if(Array.isArray(e))return jC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||HC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HC(e,t){if(e){if("string"==typeof e)return jC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jC(e,t):void 0}}function jC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function $C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function UC(e,t,n){return(UC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KC(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function zC(e,t){return(zC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=KC(e);if(t){var i=KC(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===VC(t)||"function"==typeof t))return t;return qC(e)}(this,n)}}function qC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KC(e){return(KC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().register("beforeMergeCells"),Jr.getSingleton().register("afterMergeCells"),Jr.getSingleton().register("beforeUnmergeCells"),Jr.getSingleton().register("afterUnmergeCells");var GC=new WeakMap,JC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zC(e,t)}(a,Wv);var t,n,o,i=WC(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),GC.set(qC(t),{lastDesiredCoords:null}),t.mergedCellsCollection=null,t.autofillCalculations=null,t.selectionCalculations=null,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"mergeCells"}},{key:"PLUGIN_PRIORITY",get:function(){return 150}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().mergeCells}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.mergedCellsCollection=new IC(this),this.autofillCalculations=new AC(this),this.selectionCalculations=new NC(this),this.addHook("afterInit",function(){return e.onAfterInit.apply(e,arguments)}),this.addHook("beforeKeyDown",function(){return e.onBeforeKeyDown.apply(e,arguments)}),this.addHook("modifyTransformStart",function(){return e.onModifyTransformStart.apply(e,arguments)}),this.addHook("afterModifyTransformStart",function(){return e.onAfterModifyTransformStart.apply(e,arguments)}),this.addHook("modifyTransformEnd",function(){return e.onModifyTransformEnd.apply(e,arguments)}),this.addHook("modifyGetCellCoords",function(){return e.onModifyGetCellCoords.apply(e,arguments)}),this.addHook("beforeSetRangeStart",function(){return e.onBeforeSetRangeStart.apply(e,arguments)}),this.addHook("beforeSetRangeStartOnly",function(){return e.onBeforeSetRangeStart.apply(e,arguments)}),this.addHook("beforeSetRangeEnd",function(){return e.onBeforeSetRangeEnd.apply(e,arguments)}),this.addHook("afterIsMultipleSelection",function(){return e.onAfterIsMultipleSelection.apply(e,arguments)}),this.addHook("afterRenderer",function(){return e.onAfterRenderer.apply(e,arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){return e.addMergeActionsToContextMenu.apply(e,arguments)}),this.addHook("afterGetCellMeta",function(){return e.onAfterGetCellMeta.apply(e,arguments)}),this.addHook("afterViewportRowCalculatorOverride",function(){return e.onAfterViewportRowCalculatorOverride.apply(e,arguments)}),this.addHook("afterViewportColumnCalculatorOverride",function(){return e.onAfterViewportColumnCalculatorOverride.apply(e,arguments)}),this.addHook("modifyAutofillRange",function(){return e.onModifyAutofillRange.apply(e,arguments)}),this.addHook("afterCreateCol",function(){return e.onAfterCreateCol.apply(e,arguments)}),this.addHook("afterRemoveCol",function(){return e.onAfterRemoveCol.apply(e,arguments)}),this.addHook("afterCreateRow",function(){return e.onAfterCreateRow.apply(e,arguments)}),this.addHook("afterRemoveRow",function(){return e.onAfterRemoveRow.apply(e,arguments)}),this.addHook("afterChange",function(){return e.onAfterChange.apply(e,arguments)}),this.addHook("beforeDrawBorders",function(){return e.onBeforeDrawAreaBorders.apply(e,arguments)}),this.addHook("afterDrawSelection",function(){return e.onAfterDrawSelection.apply(e,arguments)}),this.addHook("beforeRemoveCellClassNames",function(){return e.onBeforeRemoveCellClassNames.apply(e,arguments)}),this.addHook("beforeUndoStackChange",function(e,t){if("MergeCells"===t)return!1}),UC(KC(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.clearCollections(),this.hot.render(),UC(KC(a.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){var e=this.hot.getSettings().mergeCells;this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(e),UC(KC(a.prototype),"updatePlugin",this).call(this)}},{key:"validateSetting",value:function(e){var t=!0;return!!e&&(SC.containsNegativeValues(e)?(No(SC.NEGATIVE_VALUES_WARNING(e)),t=!1):SC.isOutOfBounds(e,this.hot.countRows(),this.hot.countCols())?(No(SC.IS_OUT_OF_BOUNDS_WARNING(e)),t=!1):SC.isSingleCell(e)?(No(SC.IS_SINGLE_CELL(e)),t=!1):SC.containsZeroSpan(e)&&(No(SC.ZERO_SPAN_WARNING(e)),t=!1),t)}},{key:"generateFromSettings",value:function(e){var t=this;if(Array.isArray(e)){var n,o=[];K(e,function(e){if(t.validateSetting(e)){var n=new qn(e.row,e.col),i=new qn(e.row+e.rowspan-1,e.col+e.colspan-1),a=new Gn(n,n,i);o.push(t.mergeRange(a,!0,!0))}}),o=o.filter(function(e){return!0!==e});var i=this.getBulkCollectionData(o);(n=this.hot).populateFromArray.apply(n,BC(i))}}},{key:"getBulkCollectionData",value:function(e){var t,n=this.getBulkCollectionDataRange(e),o=(t=this.hot).getData.apply(t,BC(n)).splice(0);return K(e,function(e){var t=FC(e,3),i=t[0],a=t[1];K(t[2],function(e,t){K(e,function(e,r){o[i-n[0]+t][a-n[1]+r]=e})})}),[n[0],n[1],o]}},{key:"getBulkCollectionDataRange",value:function(e){var t=[0,0],n=[0,0],o=null,i=null,a=null;return K(e,function(e){o=e[0],i=e[1],a=e[2],t[0]=Math.min(o,t[0]),t[1]=Math.min(i,t[1]),n[0]=Math.max(o+a.length-1,n[0]),n[1]=Math.max(i+a[0].length-1,n[1])}),[].concat(t,n)}},{key:"clearCollections",value:function(){this.mergedCellsCollection.clear()}},{key:"canMergeRange",value:function(e){return!!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||this.validateSetting(e)}},{key:"toggleMergeOnSelection",value:function(){var e=this.hot.getSelectedRangeLast();if(e){e.setDirection("NW-SE");var t=e.from,n=e.to;this.toggleMerge(e),this.hot.selectCell(t.row,t.col,n.row,n.col,!1)}}},{key:"mergeSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(e){e.setDirection("NW-SE");var t=e.from,n=e.to;this.unmergeRange(e,!0),this.mergeRange(e),this.hot.selectCell(t.row,t.col,n.row,n.col,!1)}}},{key:"unmergeSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(e){var t=e.from,n=e.to;this.unmergeRange(e,!0),this.hot.selectCell(t.row,t.col,n.row,n.col,!1)}}},{key:"mergeRange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.getTopLeftCorner(),a=e.getBottomRightCorner(),r={row:i.row,col:i.col,rowspan:a.row-i.row+1,colspan:a.col-i.col+1},l=[],s=null;return!!this.canMergeRange(r,n)&&(this.hot.runHooks("beforeMergeCells",e,n),Nl(0,r.rowspan-1,function(e){Nl(0,r.colspan-1,function(n){var o=null;l[e]||(l[e]=[]),0===e&&0===n?o=t.hot.getDataAtCell(r.row,r.col):t.hot.setCellMeta(r.row+e,r.col+n,"hidden",!0),l[e][n]=o})}),this.hot.setCellMeta(r.row,r.col,"spanned",!0),!this.mergedCellsCollection.add(r)||(o?s=[r.row,r.col,l]:this.hot.populateFromArray(r.row,r.col,l,void 0,void 0,this.pluginName),this.hot.runHooks("afterMergeCells",e,r,n),s))}},{key:"unmergeRange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.mergedCellsCollection.getWithinRange(e);o&&(this.hot.runHooks("beforeUnmergeCells",e,n),K(o,function(e){t.mergedCellsCollection.remove(e.row,e.col),Nl(0,e.rowspan-1,function(n){Nl(0,e.colspan-1,function(o){t.hot.removeCellMeta(e.row+n,e.col+o,"hidden")})}),t.hot.removeCellMeta(e.row,e.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",e,n),this.hot.render())}},{key:"toggleMerge",value:function(e){var t=this.mergedCellsCollection.get(e.from.row,e.from.col);t.row===e.from.row&&t.col===e.from.col&&t.row+t.rowspan-1===e.to.row&&t.col+t.colspan-1===e.to.col?this.unmergeRange(e):this.mergeSelection(e)}},{key:"merge",value:function(e,t,n,o){var i=new qn(e,t),a=new qn(n,o);this.mergeRange(new Gn(i,i,a))}},{key:"unmerge",value:function(e,t,n,o){var i=new qn(e,t),a=new qn(n,o);this.unmergeRange(new Gn(i,i,a))}},{key:"onAfterInit",value:function(){this.generateFromSettings(this.hot.getSettings().mergeCells),this.hot.render()}},{key:"onBeforeKeyDown",value:function(e){(e.ctrlKey||e.metaKey)&&!e.altKey&&77===e.keyCode&&(this.toggleMerge(this.hot.getSelectedRangeLast()),this.hot.render(),$i(e))}},{key:"onAfterIsMultipleSelection",value:function(e){if(e)for(var t=this.mergedCellsCollection.mergedCells,n=this.hot.getSelectedRangeLast(),o=0;o<t.length;o+=1)if(n.from.row===t[o].row&&n.from.col===t[o].col&&n.to.row===t[o].row+t[o].rowspan-1&&n.to.col===t[o].col+t[o].colspan-1)return!1;return e}},{key:"onModifyTransformStart",value:function(e){var t,n=GC.get(this),o=this.hot.getSelectedRangeLast(),i={row:e.row,col:e.col},a=new qn(o.highlight.row,o.highlight.col),r=this.mergedCellsCollection.get(a.row,a.col);if(n.lastDesiredCoords||(n.lastDesiredCoords=new qn(null,null)),r){var l=new qn(r.row,r.col),s=new qn(r.row+r.rowspan-1,r.col+r.colspan-1);new Gn(l,l,s).includes(n.lastDesiredCoords)||(n.lastDesiredCoords=new qn(null,null)),i.row=n.lastDesiredCoords.row?n.lastDesiredCoords.row-a.row:i.row,i.col=n.lastDesiredCoords.col?n.lastDesiredCoords.col-a.col:i.col,e.row>0?i.row=r.row+r.rowspan-1-a.row+e.row:e.row<0&&(i.row=a.row-r.row+e.row),e.col>0?i.col=r.col+r.colspan-1-a.col+e.col:e.col<0&&(i.col=a.col-r.col+e.col)}t=new qn(o.highlight.row+i.row,o.highlight.col+i.col);var c=this.mergedCellsCollection.get(t.row,t.col);if(c){var u=this.mergedCellsCollection.getFirstRenderableCoords(c.row,c.col);n.lastDesiredCoords=t,i={row:u.row-a.row,col:u.col-a.col}}0!==i.row&&(e.row=i.row),0!==i.col&&(e.col=i.col)}},{key:"onModifyTransformEnd",value:function(e){var t=this,n=this.hot.getSelectedRangeLast(),o=de(e),i=this.selectionCalculations.getUpdatedSelectionRange(n,e),a=de(o),r=this.mergedCellsCollection.getWithinRange(i,!0);do{a=de(o),this.selectionCalculations.getUpdatedSelectionRange(n,o),K(r,function(e){t.selectionCalculations.snapDelta(o,n,e)})}while(o.row!==a.row||o.col!==a.col);e.row=o.row,e.col=o.col}},{key:"onModifyGetCellCoords",value:function(e,t){if(!(e<0||t<0)){var n=this.mergedCellsCollection.get(e,t);if(n){var o=n.row,i=n.col,a=n.colspan;return[o,i,o+n.rowspan-1,i+a-1]}}}},{key:"addMergeActionsToContextMenu",value:function(e){var t;e.items.push({name:"---------"},(t=this,{key:"mergeCells",name:function(){var e=this.getSelectedLast();if(e){var n=t.mergedCellsCollection.get(e[0],e[1]);if(n.row===e[0]&&n.col===e[1]&&n.row+n.rowspan-1===e[2]&&n.col+n.colspan-1===e[3])return this.getTranslatedPhrase(rd)}return this.getTranslatedPhrase(ad)},callback:function(){t.toggleMergeOnSelection()},disabled:function(){var e=this.getSelectedLast();return!e||SC.isSingleCell({row:e[0],col:e[1],rowspan:e[2]-e[0]+1,colspan:e[3]-e[1]+1})||this.selection.isSelectedByCorner()},hidden:!1}))}},{key:"onAfterRenderer",value:function(e,t,n){var o=this.mergedCellsCollection.get(t,n),i=pe(o)?de(o):void 0;if(pe(i)){var a=this.hot,r=a.rowIndexMapper,l=a.columnIndexMapper,s=i.row,c=i.col,u=i.colspan,d=i.rowspan,h=FC(this.translateMergedCellToRenderable(s,d,c,u),2),f=h[0],p=h[1],m=f-r.getRenderableFromVisualIndex(t)+1,v=p-l.getRenderableFromVisualIndex(n)+1;i.row=r.getFirstNotHiddenIndex(i.row,1),i.col=l.getFirstNotHiddenIndex(i.col,1),i.rowspan=Math.min(i.rowspan,m),i.colspan=Math.min(i.colspan,v)}TC(e,i,t,n)}},{key:"onBeforeSetRangeStart",value:function(e){if(this.mergedCellsCollection.isFirstRenderableMergedCell(e.row,e.col)){var t=this.mergedCellsCollection.get(e.row,e.col),n=[t.row,t.col];e.row=n[0],e.col=n[1]}}},{key:"onBeforeSetRangeEnd",value:function(e){var t=this.hot.getSelectedRangeLast();t.highlight=new qn(t.highlight.row,t.highlight.col),t.to=e;var n=!1;if(!this.hot.selection.isSelectedByColumnHeader()&&!this.hot.selection.isSelectedByRowHeader())do{n=!1;for(var o=0;o<this.mergedCellsCollection.mergedCells.length;o+=1){var i=this.mergedCellsCollection.mergedCells[o].getRange();t.expandByRange(i)&&(e.row=t.to.row,e.col=t.to.col,n=!0)}}while(n)}},{key:"onAfterGetCellMeta",value:function(e,t,n){var o=this.mergedCellsCollection.get(e,t);o&&(o.row!==e||o.col!==t?n.copyable=!1:(n.rowspan=o.rowspan,n.colspan=o.colspan))}},{key:"onAfterViewportRowCalculatorOverride",value:function(e){var t=this.hot.countCols();this.modifyViewportRowStart(e,t),this.modifyViewportRowEnd(e,t)}},{key:"modifyViewportRowStart",value:function(e,t){for(var n=this.hot.rowIndexMapper,o=n.getVisualFromRenderableIndex(e.startRow),i=0;i<t;i+=1){var a=this.mergedCellsCollection.get(o,i);if(pe(a)){var r=n.getRenderableFromVisualIndex(n.getFirstNotHiddenIndex(a.row,1));if(r<e.startRow)return e.startRow=r,void this.modifyViewportRowStart(e,t)}}}},{key:"modifyViewportRowEnd",value:function(e,t){for(var n=this.hot.rowIndexMapper,o=n.getVisualFromRenderableIndex(e.endRow),i=0;i<t;i+=1){var a=this.mergedCellsCollection.get(o,i);if(pe(a)){var r=a.row+a.rowspan-1,l=n.getRenderableFromVisualIndex(n.getFirstNotHiddenIndex(r,-1));if(l>e.endRow)return e.endRow=l,void this.modifyViewportRowEnd(e,t)}}}},{key:"onAfterViewportColumnCalculatorOverride",value:function(e){var t=this.hot.countRows();this.modifyViewportColumnStart(e,t),this.modifyViewportColumnEnd(e,t)}},{key:"modifyViewportColumnStart",value:function(e,t){for(var n=this.hot.columnIndexMapper,o=n.getVisualFromRenderableIndex(e.startColumn),i=0;i<t;i+=1){var a=this.mergedCellsCollection.get(i,o);if(pe(a)){var r=n.getRenderableFromVisualIndex(n.getFirstNotHiddenIndex(a.col,1));if(r<e.startColumn)return e.startColumn=r,void this.modifyViewportColumnStart(e,t)}}}},{key:"modifyViewportColumnEnd",value:function(e,t){for(var n=this.hot.columnIndexMapper,o=n.getVisualFromRenderableIndex(e.endColumn),i=0;i<t;i+=1){var a=this.mergedCellsCollection.get(i,o);if(pe(a)){var r=a.col+a.colspan-1,l=n.getRenderableFromVisualIndex(n.getFirstNotHiddenIndex(r,-1));if(l>e.endColumn)return e.endColumn=l,void this.modifyViewportColumnEnd(e,t)}}}},{key:"translateMergedCellToRenderable",value:function(e,t,n,o){var i,a,r=this.hot,l=r.rowIndexMapper,s=r.columnIndexMapper;return i=0===t?l.getFirstNotHiddenIndex(e,1):l.getFirstNotHiddenIndex(e+t-1,-1),a=0===o?s.getFirstNotHiddenIndex(n,1):s.getFirstNotHiddenIndex(n+o-1,-1),[e>=0?l.getRenderableFromVisualIndex(i):e,n>=0?s.getRenderableFromVisualIndex(a):n]}},{key:"onModifyAutofillRange",value:function(e,t){this.autofillCalculations.correctSelectionAreaSize(t);var n=this.autofillCalculations.getDirection(t,e),o=e;if(this.autofillCalculations.dragAreaOverlapsCollections(t,o,n))return o=t;var i=this.mergedCellsCollection.getWithinRange({from:{row:t[0],col:t[1]},to:{row:t[2],col:t[3]}});return i?o=this.autofillCalculations.snapDragArea(t,o,n,i):o}},{key:"onAfterCreateCol",value:function(e,t){this.mergedCellsCollection.shiftCollections("right",e,t)}},{key:"onAfterRemoveCol",value:function(e,t){this.mergedCellsCollection.shiftCollections("left",e,t)}},{key:"onAfterCreateRow",value:function(e,t,n){"auto"!==n&&this.mergedCellsCollection.shiftCollections("down",e,t)}},{key:"onAfterRemoveRow",value:function(e,t){this.mergedCellsCollection.shiftCollections("up",e,t)}},{key:"onAfterChange",value:function(e,t){"Autofill.fill"===t&&this.autofillCalculations.recreateAfterDataPopulation(e)}},{key:"onBeforeDrawAreaBorders",value:function(e,t){if(t&&"area"===t){var n=this.hot.getSelectedRangeLast();K(this.mergedCellsCollection.getWithinRange(n),function(t){n.getBottomRightCorner().row===t.getLastRow()&&n.getBottomRightCorner().col===t.getLastColumn()&&(e[2]=t.row,e[3]=t.col)})}}},{key:"onAfterModifyTransformStart",value:function(e,t,n){if(this.enabled){var o=this.mergedCellsCollection.get(e.row,e.col);if(o){var i=t>0,a=t<0,r=n<0,l=n>0,s=o.row+o.rowspan-1==this.hot.countRows()-1,c=0===o.row,u=o.col+o.colspan-1==this.hot.countCols()-1,d=0===o.col;(i&&s||a&&c||l&&u||r&&d)&&(e.row=o.row,e.col=o.col)}}}},{key:"onAfterDrawSelection",value:function(e,t,n,o){if(n)return this.selectionCalculations.getSelectedMergedCellClassName(e,t,n,o)}},{key:"onBeforeRemoveCellClassNames",value:function(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}}])&&$C(t.prototype,n),o&&$C(t,o),a}();function YC(e){"@babel/helpers - typeof";return(YC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function QC(e,t,n){return(QC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tk(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ZC(e,t){return(ZC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ek(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=tk(e);if(t){var i=tk(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===YC(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function tk(e){return(tk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nk,ok=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZC(e,t)}(a,Wv);var t,n,o,i=ek(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).dragged=[],t.eventManager=null,t.lastSetCell=null,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"multipleSelectionHandles"}},{key:"PLUGIN_PRIORITY",get:function(){return 160}}],(n=[{key:"isEnabled",value:function(){return Ve()}},{key:"enablePlugin",value:function(){this.enabled||(this.eventManager||(this.eventManager=new Gi(this)),this.registerListeners(),QC(tk(a.prototype),"enablePlugin",this).call(this))}},{key:"registerListeners",value:function(){var e=this,t=this,n=this.hot.rootElement;function o(e){if(1===t.dragged.length)return t.dragged.splice(0,t.dragged.length),!0;var n=t.dragged.indexOf(e);if(-1===n)return!1;0===n?t.dragged=t.dragged.slice(0,1):1===n&&(t.dragged=t.dragged.slice(-1))}this.eventManager.addEventListener(n,"touchstart",function(e){var n;return Ut(e.target,"topLeftSelectionHandle-HitArea")?(n=t.hot.getSelectedRangeLast(),t.dragged.push("topLeft"),t.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},e.preventDefault(),!1):Ut(e.target,"bottomRightSelectionHandle-HitArea")?(n=t.hot.getSelectedRangeLast(),t.dragged.push("bottomRight"),t.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},e.preventDefault(),!1):void 0}),this.eventManager.addEventListener(n,"touchend",function(e){return Ut(e.target,"topLeftSelectionHandle-HitArea")?(o.call(t,"topLeft"),t.touchStartRange=void 0,e.preventDefault(),!1):Ut(e.target,"bottomRightSelectionHandle-HitArea")?(o.call(t,"bottomRight"),t.touchStartRange=void 0,e.preventDefault(),!1):void 0}),this.eventManager.addEventListener(n,"touchmove",function(n){var o,i,a,r,l,s,c=e.hot,u=c.rootWindow,d=c.rootDocument,h=en(u),f=tn(u);if(0!==t.dragged.length){var p=d.elementFromPoint(n.touches[0].screenX-f,n.touches[0].screenY-h);p&&p!==t.lastSetCell&&("TD"!==p.nodeName&&"TH"!==p.nodeName||(-1===(o=t.hot.getCoords(p)).col&&(o.col=0),a=(i=t.hot.getSelectedRangeLast()).getWidth(),r=i.getHeight(),l=i.getDirection(),1===a&&1===r&&t.hot.selection.setRangeEnd(o),null!==(s=t.getCurrentRangeCoords(i,o,t.touchStartRange.direction,l,t.dragged[0])).start&&t.hot.selection.setRangeStart(s.start),t.hot.selection.setRangeEnd(s.end),t.lastSetCell=p),n.preventDefault())}})}},{key:"getCurrentRangeCoords",value:function(e,t,n,o,i){var a=e.getTopLeftCorner(),r=e.getBottomRightCorner(),l=e.getBottomLeftCorner(),s=e.getTopRightCorner(),c={start:null,end:null};switch(n){case"NE-SW":switch(o){case"NE-SW":case"NW-SE":c="topLeft"===i?{start:new qn(t.row,e.highlight.col),end:new qn(l.row,t.col)}:{start:new qn(e.highlight.row,t.col),end:new qn(t.row,a.col)};break;case"SE-NW":"bottomRight"===i&&(c={start:new qn(r.row,t.col),end:new qn(t.row,a.col)})}break;case"NW-SE":switch(o){case"NE-SW":"topLeft"===i?c={start:t,end:l}:c.end=t;break;case"NW-SE":"topLeft"===i?c={start:t,end:r}:c.end=t;break;case"SE-NW":"topLeft"===i?c={start:t,end:a}:c.end=t;break;case"SW-NE":"topLeft"===i?c={start:t,end:s}:c.end=t}break;case"SW-NE":switch(o){case"NW-SE":c="bottomRight"===i?{start:new qn(t.row,a.col),end:new qn(l.row,t.col)}:{start:new qn(a.row,t.col),end:new qn(t.row,r.col)};break;case"SW-NE":c="topLeft"===i?{start:new qn(e.highlight.row,t.col),end:new qn(t.row,r.col)}:{start:new qn(t.row,a.col),end:new qn(a.row,t.col)};break;case"SE-NW":"bottomRight"===i?c={start:new qn(t.row,s.col),end:new qn(a.row,t.col)}:"topLeft"===i&&(c={start:l,end:t})}break;case"SE-NW":switch(o){case"NW-SE":case"NE-SW":case"SW-NE":"topLeft"===i&&(c.end=t);break;case"SE-NW":"topLeft"===i?c.end=t:c={start:t,end:a}}}return c}},{key:"isDragged",value:function(){return this.dragged.length>0}}])&&XC(t.prototype,n),o&&XC(t,o),a}();function ik(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ak(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ak(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ak(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function rk(){var e,t;No(Ze(nk||(e=["Plugins `columnSorting` and `multiColumnSorting` should not be enabled simultaneously. \n    Only `multiColumnSorting` will work."],(t=["Plugins \\`columnSorting\\` and \\`multiColumnSorting\\` should not be enabled simultaneously. \n    Only \\`multiColumnSorting\\` will work."])||(t=e.slice(0)),nk=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})))))}var lk="sort";function sk(e){"@babel/helpers - typeof";return(sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ck(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function uk(e,t,n){return(uk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fk(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function dk(e,t){return(dk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=fk(e);if(t){var i=fk(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===sk(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fk(e){return(fk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pk="multiColumnSorting";Cy(pk,function(e,t){return function(n,o){var i=ik(n).slice(1),a=ik(o).slice(1);return function n(o){var r=e[o],l=t[o],s=i[o],c=a[o],u=l.multiColumnSorting,d=(u.compareFunctionFactory?u.compareFunctionFactory:xy(l.type))(r,l,u)(s,c);if(d===Ry){var h=o+1;if(void 0!==t[h])return n(h)}return d}(0)}});var mk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dk(e,t)}(a,Jy);var t,n,o,i=hk(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).pluginKey=pk,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return pk}},{key:"PLUGIN_PRIORITY",get:function(){return 170}}],(n=[{key:"isEnabled",value:function(){return uk(fk(a.prototype),"isEnabled",this).call(this)}},{key:"enablePlugin",value:function(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings().columnSorting&&rk(),uk(fk(a.prototype),"enablePlugin",this).call(this)}},{key:"disablePlugin",value:function(){uk(fk(a.prototype),"disablePlugin",this).call(this)}},{key:"sort",value:function(e){uk(fk(a.prototype),"sort",this).call(this,e)}},{key:"clearSort",value:function(){uk(fk(a.prototype),"clearSort",this).call(this)}},{key:"isSorted",value:function(){return uk(fk(a.prototype),"isSorted",this).call(this)}},{key:"getSortConfig",value:function(e){return uk(fk(a.prototype),"getSortConfig",this).call(this,e)}},{key:"setSortConfig",value:function(e){uk(fk(a.prototype),"setSortConfig",this).call(this,e)}},{key:"getNormalizedSortConfigs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e:[e]}},{key:"updateHeaderClasses",value:function(e){for(var t,n,o,i=arguments.length,r=new Array(i>1?i-1:0),l=1;l<i;l++)r[l-1]=arguments[l];(t=uk(fk(a.prototype),"updateHeaderClasses",this)).call.apply(t,[this,e].concat(r)),Wt(e,(n=e.className.split(" "),o=new RegExp("^".concat(lk,"-[0-9]{1,2}$")),n.filter(function(e){return o.test(e)}))),!1!==this.enabled&&zt(e,function(e,t,n){var o=[];return!1===n?o:(e.isColumnSorted(t)&&e.getNumberOfSortedColumns()>1&&o.push("".concat(lk,"-").concat(e.getIndexOfColumnInSortQueue(t)+1)),o)}.apply(void 0,r))}},{key:"onUpdateSettings",value:function(e){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings().columnSorting&&rk(),uk(fk(a.prototype),"onUpdateSettings",this).call(this,e)}},{key:"onAfterOnCellMouseDown",value:function(e,t){!1!==uy(t.row,t.col,e)&&this.wasClickableHeaderClicked(e,t.col)&&(Oh()?(this.hot.deselectCell(),this.hot.selectColumns(t.col),this.sort(this.getNextSortConfig(t.col,"append"))):this.sort(this.getColumnNextConfig(t.col)))}}])&&ck(t.prototype,n),o&&ck(t,o),a}();function vk(e){"@babel/helpers - typeof";return(vk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bk,yk=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},gk=Error;!function(e){var t=function(e){if(r(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t};var n={add:function(e,t){return e[t]=this.value,!0},remove:function(e,t){return delete e[t],!0},replace:function(e,t){return e[t]=this.value,!0},move:function(e,t,n){var o={op:"_get",path:this.from};return p(n,[o]),p(n,[{op:"remove",path:this.from}]),p(n,[{op:"add",path:this.path,value:o.value}]),!0},copy:function(e,t,n){var o={op:"_get",path:this.from};return p(n,[o]),p(n,[{op:"add",path:this.path,value:o.value}]),!0},test:function(e,n){return function e(n,o){switch(vk(n)){case"undefined":case"boolean":case"string":case"number":return n===o;case"object":if(null===n)return null===o;if(r(n)){if(!r(o)||n.length!==o.length)return!1;for(var i=0,a=n.length;i<a;i++)if(!e(n[i],o[i]))return!1;return!0}var l=t(o).length;if(t(n).length!==l)return!1;for(i=0;i<l;i++)if(!e(n[i],o[i]))return!1;return!0;default:return!1}}(e[n],this.value)},_get:function(e,t){this.value=e[t]}},o={add:function(e,t){return e.splice(t,0,this.value),!0},remove:function(e,t){return e.splice(t,1),!0},replace:function(e,t){return e[t]=this.value,!0},move:n.move,copy:n.copy,test:n.test,_get:n._get},i={add:function(e){for(var t in i.remove.call(this,e),this.value)this.value.hasOwnProperty(t)&&(e[t]=this.value[t]);return!0},remove:function(e){for(var t in e)e.hasOwnProperty(t)&&n.remove.call(this,e,t);return!0},replace:function(e){return p(e,[{op:"remove",path:this.path}]),p(e,[{op:"add",path:this.path,value:this.value}]),!0},move:n.move,copy:n.copy,test:function(e){return JSON.stringify(e)===JSON.stringify(this.value)},_get:function(e){this.value=e}};function a(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}var r,l=[],s=function(){return function(e){this.observers=[],this.obj=e}}(),c=function(){return function(e,t){this.callback=e,this.observer=t}}();function u(e){return"object"===vk(e)?JSON.parse(JSON.stringify(e)):e}function d(e){for(var t,n=0,o=l.length;n<o;n++)if(l[n].obj===e.object){t=l[n];break}h(t.value,e.object,e.patches,""),e.patches.length&&p(t.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function h(e,n,o,i){for(var r=t(n),l=t(e),s=!1,c=l.length-1;c>=0;c--){var d=e[p=l[c]];if(n.hasOwnProperty(p)){var f=n[p];"object"==vk(d)&&null!=d&&"object"==vk(f)&&null!=f?h(d,f,o,i+"/"+a(p)):d!=f&&(!0,o.push({op:"replace",path:i+"/"+a(p),value:u(f)}))}else o.push({op:"remove",path:i+"/"+a(p)}),s=!0}if(s||r.length!=l.length)for(c=0;c<r.length;c++){var p=r[c];e.hasOwnProperty(p)||o.push({op:"add",path:i+"/"+a(p),value:u(n[p])})}}function f(e){for(var t,n=0,o=e.length;n<o;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function p(e,t,a){for(var l,s,c=!1,u=0,d=t.length;u<d;){l=t[u],u++;for(var h=(l.path||"").split("/"),p=e,v=1,b=h.length,y=void 0;;){if(s=h[v],a&&void 0===y&&(void 0===p[s]?y=h.slice(0,v).join("/"):v==b-1&&(y=l.path),void 0!==y&&this.validator(l,u-1,e,y)),v++,void 0===s&&v>=b){c=i[l.op].call(l,p,s,e);break}if(r(p)){if("-"===s)s=p.length;else{if(a&&!f(s))throw new m("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",u-1,l.path,l);s=parseInt(s,10)}if(v>=b){if(a&&"add"===l.op&&s>p.length)throw new m("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",u-1,l.path,l);c=o[l.op].call(l,p,s,e);break}}else if(s&&-1!=s.indexOf("~")&&(s=s.replace(/~1/g,"/").replace(/~0/g,"~")),v>=b){c=n[l.op].call(l,p,s,e);break}p=p[s]}}return c}e.unobserve=function(e,t){t.unobserve()},e.observe=function(e,t){var n,o=function(e){for(var t=0,n=l.length;t<n;t++)if(l[t].obj===e)return l[t]}(e);if(o?n=function(e,t){for(var n=0,o=e.observers.length;n<o;n++)if(e.observers[n].callback===t)return e.observers[n].observer}(o,t):(o=new s(e),l.push(o)),n)return n;if(n={},o.value=u(e),t){n.callback=t,n.next=null;var i=this.intervals||[100,1e3,1e4,6e4];if(void 0===i.push)throw new gk("jsonpatch.intervals must be an array");var a=0,r=function(){d(n)},h=function(){clearTimeout(n.next),n.next=setTimeout(function(){r(),a=0,n.next=setTimeout(f,i[a++])},0)},f=function e(){r(),a==i.length&&(a=i.length-1),n.next=setTimeout(e,i[a++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",h),window.addEventListener("mouseup",h),window.addEventListener("keydown",h)):(document.documentElement.attachEvent("onmousedown",h),document.documentElement.attachEvent("onmouseup",h),document.documentElement.attachEvent("onkeydown",h))),n.next=setTimeout(f,i[a++])}return n.patches=[],n.object=e,n.unobserve=function(){d(n),clearTimeout(n.next),function(e,t){for(var n=0,o=e.observers.length;n<o;n++)if(e.observers[n].observer===t)return void e.observers.splice(n,1)}(o,n),0===o.observers.length&&l.splice(l.indexOf(o),1),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mousedown",h),window.removeEventListener("mouseup",h),window.removeEventListener("keydown",h)):(document.documentElement.detachEvent("onmousedown",h),document.documentElement.detachEvent("onmouseup",h),document.documentElement.detachEvent("onkeydown",h)))},o.observers.push(new c(t,n)),n},e.generate=d,r=Array.isArray?Array.isArray:function(e){return e.push&&"number"==typeof e.length},e.apply=p,e.compare=function(e,t){var n=[];return h(e,t,n,""),n};var m=function(e){function t(t,n,o,i,a){e.call(this,t),this.message=t,this.name=n,this.index=o,this.operation=i,this.tree=a}return yk(t,e),t}(gk);e.JsonPatchError=m,e.Error=m,e.validator=function(t,o,i,a){if("object"!==vk(t)||null===t||r(t))throw new m("Operation is not an object","OPERATION_NOT_AN_OBJECT",o,t,i);if(!n[t.op])throw new m("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,i);if("string"!=typeof t.path)throw new m("Operation `path` property is not a string","OPERATION_PATH_INVALID",o,t,i);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new m("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",o,t,i);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new m("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",o,t,i);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&function e(t){if(void 0===t)return!0;if("array"==typeof t||"object"==vk(t))for(var n in t)if(e(t[n]))return!0;return!1}(t.value))throw new m("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",o,t,i);if(i)if("add"==t.op){var l=t.path.split("/").length,s=a.split("/").length;if(l!==s+1&&l!==s)throw new m("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",o,t,i)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==a)throw new m("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",o,t,i)}else if("move"===t.op||"copy"===t.op){var c={op:"_get",path:t.from,value:void 0},u=e.validate([c],i);if(u&&"OPERATION_PATH_UNRESOLVABLE"===u.name)throw new m("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",o,t,i)}},e.validate=function(e,t){try{if(!r(e))throw new m("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)t=JSON.parse(JSON.stringify(t)),p.call(this,t,e,!0);else for(var n=0;n<e.length;n++)this.validator(e[n],n)}catch(e){if(e instanceof m)return e;throw e}}}(bk||(bk={}));var wk=bk;function _k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ck(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ck(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ck(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function kk(e){var t=e.match(/^\/(\d+)\/?(.*)?$/);if(!t)return null;var n=_k(t,3),o=n[1],i=n[2];return{row:parseInt(o,10),col:/^\d*$/.test(i)?parseInt(i,10):i}}function xk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Sk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observedData=null,this.observer=null,this.paused=!1,this.setObservedData(t)}var t,n,o;return t=e,(n=[{key:"setObservedData",value:function(e){var t=this;this.observer&&wk.unobserve(this.observedData,this.observer),this.observedData=e,this.observer=wk.observe(this.observedData,function(e){return t.onChange(e)})}},{key:"isPaused",value:function(){return this.paused}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}},{key:"onChange",value:function(e){this.runLocalHooks("change",function(e){var t=[],n=W(e,function(e){return!/[/]length/gi.test(e.path)&&!!kk(e.path)});return n=W(n=q(n,function(e){var t=kk(e.path);return e.row=t.row,e.col=t.col,e}),function(e){if(-1!==["add","remove"].indexOf(e.op)&&!isNaN(e.col)){if(-1!==t.indexOf(e.col))return!1;t.push(e.col)}return!0}),t.length=0,n}(e))}},{key:"destroy",value:function(){wk.unobserve(this.observedData,this.observer),this.observedData=null,this.observer=null}}])&&xk(t.prototype,n),o&&xk(t,o),e}();he(Sk,cc);var Tk=Sk;function Ek(e){"@babel/helpers - typeof";return(Ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ok(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Dk(e,t,n){return(Dk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mk(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ik(e,t){return(Ik=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Mk(e);if(t){var i=Mk(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Ek(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Mk(e){return(Mk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ik(e,t)}(a,Wv);var t,n,o,i=Rk(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).observer=null,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"observeChanges"}},{key:"PLUGIN_PRIORITY",get:function(){return 180}}],(n=[{key:"isEnabled",value:function(){return this.hot.getSettings().observeChanges}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.observer||(No("The Observe Changes plugin is deprecated and will be removed in the next major release"),this.observer=new Tk(this.hot.getSettings().data),this._exposePublicApi()),this.observer.addLocalHook("change",function(t){return e.onDataChange(t)}),this.addHook("afterCreateRow",function(){return e.onAfterTableAlter()}),this.addHook("afterRemoveRow",function(){return e.onAfterTableAlter()}),this.addHook("afterCreateCol",function(){return e.onAfterTableAlter()}),this.addHook("afterRemoveCol",function(){return e.onAfterTableAlter()}),this.addHook("afterChange",function(t,n){return e.onAfterTableAlter(n)}),this.addHook("afterLoadData",function(t,n){return e.onAfterLoadData(t,n)}),Dk(Mk(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.observer&&(this.observer.destroy(),this.observer=null,this._deletePublicApi()),Dk(Mk(a.prototype),"disablePlugin",this).call(this)}},{key:"onDataChange",value:function(e){var t=this,n=!1;if(!this.observer.isPaused()){var o="".concat(this.pluginName,".change"),i={add:function(e){var n=[e.row,e.col],i=n[0],a=n[1];isNaN(a)?(t.hot.rowIndexMapper.insertIndexes(i,1),t.hot.runHooks("afterCreateRow",i,1,o)):(t.hot.columnIndexMapper.insertIndexes(a,1),t.hot.runHooks("afterCreateCol",a,1,o))},remove:function(e){var n=[e.row,e.col],i=n[0],a=n[1];isNaN(a)?(t.hot.rowIndexMapper.removeIndexes([i]),t.hot.runHooks("afterRemoveRow",i,1,o)):(t.hot.columnIndexMapper.removeIndexes([a]),t.hot.runHooks("afterRemoveCol",a,1,o))},replace:function(e){t.hot.runHooks("afterChange",[[e.row,e.col,null,e.value]],o)}};K(e,function(e){i[e.op]&&i[e.op](e)}),n=!0}this.hot.runHooks("afterChangesObserved"),n&&this.hot.render()}},{key:"onAfterTableAlter",value:function(e){var t=this;"loadData"!==e&&(this.observer.pause(),this.hot.addHookOnce("afterChangesObserved",function(){return t.observer.resume()}))}},{key:"onAfterLoadData",value:function(e,t){t||this.observer.setObservedData(e)}},{key:"destroy",value:function(){this.observer&&(this.observer.destroy(),this._deletePublicApi()),Dk(Mk(a.prototype),"destroy",this).call(this)}},{key:"_exposePublicApi",value:function(){var e=this,t=this.hot;t.pauseObservingChanges=function(){return e.observer.pause()},t.resumeObservingChanges=function(){return e.observer.resume()},t.isPausedObservingChanges=function(){return e.observer.isPaused()}}},{key:"_deletePublicApi",value:function(){var e=this.hot;delete e.pauseObservingChanges,delete e.resumeObservingChanges,delete e.isPausedObservingChanges}}])&&Ok(t.prototype,n),o&&Ok(t,o),a}();function Ak(e){"@babel/helpers - typeof";return(Ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lk(e){return function(e){if(Array.isArray(e))return Nk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Nk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nk(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Vk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fk(e,t,n){return(Fk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jk(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Bk(e,t){return(Bk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=jk(e);if(t){var i=jk(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Ak(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function jk(e){return(jk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $k="htSearchResult",Uk=function(e,t,n,o,i){e.getCellMeta(t,n).isSearchResult=i},zk=function(e,t){return!(it(e)||null===e||!e.toLowerCase||0===e.length)&&(!it(t)&&null!==t&&-1!==t.toString().toLowerCase().indexOf(e.toLowerCase()))},Wk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bk(e,t)}(a,Wv);var t,n,o,i=Hk(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).callback=Uk,t.queryMethod=zk,t.searchResultClass=$k,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"search"}},{key:"PLUGIN_PRIORITY",get:function(){return 190}}],(n=[{key:"isEnabled",value:function(){return this.hot.getSettings().search}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var t=this.hot.getSettings().search;this.updatePluginSettings(t),this.addHook("beforeRenderer",function(){return e.onBeforeRenderer.apply(e,arguments)}),Fk(jk(a.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var e=this,t=function(){return e.onBeforeRenderer.apply(e,arguments)};this.hot.addHook("beforeRenderer",t),this.hot.addHookOnce("afterRender",function(){e.hot.removeHook("beforeRenderer",t)}),Fk(jk(a.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),Fk(jk(a.prototype),"updatePlugin",this).call(this)}},{key:"query",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCallback(),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getQueryMethod(),i=this.hot.countRows(),a=this.hot.countCols(),r=[],l=this.hot;return Nl(0,i-1,function(i){Nl(0,a-1,function(a){var s=t.hot.getDataAtCell(i,a),c=t.hot.getCellMeta(i,a),u=c.search.callback||n,d=(c.search.queryMethod||o)(e,s,c);if(d){var h={row:i,col:a,data:s};r.push(h)}u&&u(l,i,a,s,d)})}),r}},{key:"getCallback",value:function(){return this.callback}},{key:"setCallback",value:function(e){this.callback=e}},{key:"getQueryMethod",value:function(){return this.queryMethod}},{key:"setQueryMethod",value:function(e){this.queryMethod=e}},{key:"getSearchResultClass",value:function(){return this.searchResultClass}},{key:"setSearchResultClass",value:function(e){this.searchResultClass=e}},{key:"updatePluginSettings",value:function(e){pe(e)&&(e.searchResultClass&&this.setSearchResultClass(e.searchResultClass),e.queryMethod&&this.setQueryMethod(e.queryMethod),e.callback&&this.setCallback(e.callback))}},{key:"onBeforeRenderer",value:function(e,t,n,o,i,a){var r,l=a.className||[],s=[];"string"==typeof l?s=l.split(" "):(r=s).push.apply(r,Lk(l));this.isEnabled()&&a.isSearchResult?s.includes(this.searchResultClass)||s.push("".concat(this.searchResultClass)):s.includes(this.searchResultClass)&&s.splice(s.indexOf(this.searchResultClass),1),a.className=s.join(" ")}},{key:"destroy",value:function(){Fk(jk(a.prototype),"destroy",this).call(this)}}])&&Vk(t.prototype,n),o&&Vk(t,o),a}();function qk(e){"@babel/helpers - typeof";return(qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Gk(e,t,n){return(Gk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xk(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Jk(e,t){return(Jk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Xk(e);if(t){var i=Xk(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===qk(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xk(e){return(Xk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jk(e,t)}(a,Wv);var t,n,o,i=Yk(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).scrollbars=[],t.clones=[],t.lockedCollection=!1,t.freezeOverlays=!1,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"touchScroll"}},{key:"PLUGIN_PRIORITY",get:function(){return 200}}],(n=[{key:"isEnabled",value:function(){return V()}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.addHook("afterRender",function(){return e.onAfterRender()}),this.registerEvents(),Gk(Xk(a.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.lockedCollection=!1,Gk(Xk(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){Gk(Xk(a.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var e=this;this.addHook("beforeTouchScroll",function(){return e.onBeforeTouchScroll()}),this.addHook("afterMomentumScroll",function(){return e.onAfterMomentumScroll()})}},{key:"onAfterRender",value:function(){if(!this.lockedCollection){var e=this.hot.view.wt.wtOverlays,t=e.topOverlay,n=e.bottomOverlay,o=e.leftOverlay,i=e.topLeftCornerOverlay,a=e.bottomLeftCornerOverlay;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(t),n.clone&&this.scrollbars.push(n),this.scrollbars.push(o),i&&this.scrollbars.push(i),a&&a.clone&&this.scrollbars.push(a),this.clones.length=0,t.needFullRender&&this.clones.push(t.clone.wtTable.holder.parentNode),n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),o.needFullRender&&this.clones.push(o.clone.wtTable.holder.parentNode),i&&this.clones.push(i.clone.wtTable.holder.parentNode),a&&a.clone&&this.clones.push(a.clone.wtTable.holder.parentNode)}}},{key:"onBeforeTouchScroll",value:function(){this.freezeOverlays=!0,K(this.clones,function(e){zt(e,"hide-tween")})}},{key:"onAfterMomentumScroll",value:function(){var e=this;this.freezeOverlays=!1,K(this.clones,function(e){Wt(e,"hide-tween"),zt(e,"show-tween")}),setTimeout(function(){K(e.clones,function(e){Wt(e,"show-tween")})},400),K(this.scrollbars,function(e){e.refresh(),e.resetFixedPosition()}),this.hot.view.wt.wtOverlays.syncScrollWithMaster()}}])&&Kk(t.prototype,n),o&&Kk(t,o),a}();function Zk(e){"@babel/helpers - typeof";return(Zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ex(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tx(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function nx(e,t,n){return t&&tx(e.prototype,t),n&&tx(e,n),e}function ox(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ix(e,t)}function ix(e,t){return(ix=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ax(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=rx(e);if(t){var i=rx(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Zk(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rx(e){return(rx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lx(e){return function(e){if(Array.isArray(e))return ux(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||cx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cx(e,t){if(e){if("string"==typeof e)return ux(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ux(e,t):void 0}}function ux(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function dx(e){var t=this;this.instance=e,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,e.addHook("afterChange",function(n,o){var i=this,a=n&&n.length;if(a&&n.find(function(e){var t=sx(e,4);return t[2]!==t[3]})){t.done(function(){var t=n.reduce(function(e,t){return e.push(lx(t)),e},[]);K(t,function(t){t[1]=e.propToCol(t[1])});var o=a>1?i.getSelected():[[t[0][0],t[0][1]]];return new dx.ChangeAction(t,o)},o)}}),e.addHook("afterCreateRow",function(e,n,o){t.done(function(){return new dx.CreateRowAction(e,n)},o)}),e.addHook("beforeRemoveRow",function(n,o,i,a){t.done(function(){var i=t.instance.getSourceDataArray(),a=(i.length+n)%i.length,r=e.toPhysicalRow(a),l=ue(i.slice(r,r+o));return new dx.RemoveRowAction(a,l,e.getSettings().fixedRowsBottom,e.getSettings().fixedRowsTop)},a)}),e.addHook("afterCreateCol",function(e,n,o){t.done(function(){return new dx.CreateColumnAction(e,n)},o)}),e.addHook("beforeRemoveCol",function(n,o,i,a){t.done(function(){var i=t.instance.getSourceDataArray(),a=(t.instance.countCols()+n)%t.instance.countCols(),r=[],l=[],s=[];Nl(i.length-1,function(t){var n=[],l=i[t];Nl(a,a+(o-1),function(t){n.push(l[e.toPhysicalColumn(t)])}),r.push(n)}),Nl(o-1,function(t){s.push(e.toPhysicalColumn(a+t))}),Array.isArray(e.getSettings().colHeaders)&&Nl(o-1,function(t){l.push(e.getSettings().colHeaders[e.toPhysicalColumn(a+t)]||null)});var c=e.columnIndexMapper.getIndexesSequence(),u=e.rowIndexMapper.getIndexesSequence();return new dx.RemoveColumnAction(a,s,r,l,c,u,e.getSettings().fixedColumnsLeft)},a)}),e.addHook("beforeCellAlignment",function(e,n,o,i){t.done(function(){return new dx.CellAlignmentAction(e,n,o,i)})}),e.addHook("beforeFilter",function(e){t.done(function(){return new dx.FiltersAction(e)})}),e.addHook("beforeRowMove",function(e,n){!1!==e&&t.done(function(){return new dx.RowMoveAction(e,n)})}),e.addHook("beforeMergeCells",function(n,o){o||t.done(function(){return new dx.MergeCellsAction(e,n)})}),e.addHook("afterUnmergeCells",function(n,o){o||t.done(function(){return new dx.UnmergeCellsAction(e,n)})}),e.addHook("afterInit",function(){t.init()})}dx.prototype.done=function(e,t){if(!this.ignoreNewActions&&!("UndoRedo.undo"===t||"UndoRedo.redo"===t||"auto"===t)){var n=this.doneActions.slice();if(!1!==this.instance.runHooks("beforeUndoStackChange",n,t)){var o=e(),i=this.undoneActions.slice();this.doneActions.push(o),this.instance.runHooks("afterUndoStackChange",n,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",i),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",i,this.undoneActions.slice())}}},dx.prototype.undo=function(){if(this.isUndoAvailable()){var e=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",e);var t=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",e,this.doneActions.slice());var n=ue(t);if(!1===this.instance.runHooks("beforeUndo",n))return;this.ignoreNewActions=!0;var o=this,i=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",i),t.undo(this.instance,function(){o.ignoreNewActions=!1,o.undoneActions.push(t)}),this.instance.runHooks("afterRedoStackChange",i,this.undoneActions.slice()),this.instance.runHooks("afterUndo",n)}},dx.prototype.redo=function(){if(this.isRedoAvailable()){var e=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",e);var t=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",e,this.undoneActions.slice());var n=ue(t);if(!1===this.instance.runHooks("beforeRedo",n))return;this.ignoreNewActions=!0;var o=this,i=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",i),t.redo(this.instance,function(){o.ignoreNewActions=!1,o.doneActions.push(t)}),this.instance.runHooks("afterUndoStackChange",i,this.doneActions.slice()),this.instance.runHooks("afterRedo",n)}},dx.prototype.isUndoAvailable=function(){return this.doneActions.length>0},dx.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},dx.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},dx.prototype.isEnabled=function(){return this.enabled},dx.prototype.enable=function(){if(!this.isEnabled()){var e,t=this.instance;this.enabled=!0,(e=t).undo=function(){return e.undoRedo.undo()},e.redo=function(){return e.undoRedo.redo()},e.isUndoAvailable=function(){return e.undoRedo.isUndoAvailable()},e.isRedoAvailable=function(){return e.undoRedo.isRedoAvailable()},e.clearUndo=function(){return e.undoRedo.clear()},t.addHook("beforeKeyDown",px),t.addHook("afterChange",mx)}},dx.prototype.disable=function(){if(this.isEnabled()){var e,t=this.instance;this.enabled=!1,delete(e=t).undo,delete e.redo,delete e.isUndoAvailable,delete e.isRedoAvailable,delete e.clearUndo,t.removeHook("beforeKeyDown",px),t.removeHook("afterChange",mx)}},dx.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null},dx.Action=function(){},dx.Action.prototype.undo=function(){},dx.Action.prototype.redo=function(){},dx.ChangeAction=function(e,t){this.changes=e,this.selected=t,this.actionType="change"},le(dx.ChangeAction,dx.Action),dx.ChangeAction.prototype.undo=function(e,t){for(var n=ue(this.changes),o=e.countEmptyRows(!0),i=e.countEmptyCols(!0),a=0,r=n.length;a<r;a++)n[a].splice(3,1);e.addHookOnce("afterChange",t),e.setDataAtCell(n,null,null,"UndoRedo.undo");for(var l=0,s=n.length;l<s;l++){var c=sx(n[l],2),u=c[0],d=c[1];e.getSettings().minSpareRows&&u+1+e.getSettings().minSpareRows===e.countRows()&&o===e.getSettings().minSpareRows&&(e.alter("remove_row",parseInt(u+1,10),e.getSettings().minSpareRows),e.undoRedo.doneActions.pop()),e.getSettings().minSpareCols&&d+1+e.getSettings().minSpareCols===e.countCols()&&i===e.getSettings().minSpareCols&&(e.alter("remove_col",parseInt(d+1,10),e.getSettings().minSpareCols),e.undoRedo.doneActions.pop())}e.selectCells(this.selected,!1,!1)},dx.ChangeAction.prototype.redo=function(e,t){for(var n=ue(this.changes),o=0,i=n.length;o<i;o++)n[o].splice(2,1);e.addHookOnce("afterChange",t),e.setDataAtCell(n,null,null,"UndoRedo.redo"),this.selected&&e.selectCells(this.selected,!1,!1)},dx.CreateRowAction=function(e,t){this.index=e,this.amount=t,this.actionType="insert_row"},le(dx.CreateRowAction,dx.Action),dx.CreateRowAction.prototype.undo=function(e,t){var n=e.countRows(),o=e.getSettings().minSpareRows;this.index>=n&&this.index-o<n&&(this.index-=o),e.addHookOnce("afterRemoveRow",t),e.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},dx.CreateRowAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateRow",t),e.alter("insert_row",this.index,this.amount,"UndoRedo.redo")},dx.RemoveRowAction=function(e,t,n,o){this.index=e,this.data=t,this.actionType="remove_row",this.fixedRowsBottom=n,this.fixedRowsTop=o},le(dx.RemoveRowAction,dx.Action),dx.RemoveRowAction.prototype.undo=function(e,t){var n=e.getSettings();n.fixedRowsBottom=this.fixedRowsBottom,n.fixedRowsTop=this.fixedRowsTop,e.alter("insert_row",this.index,this.data.length,"UndoRedo.undo"),e.addHookOnce("afterRender",t),e.populateFromArray(this.index,0,this.data,void 0,void 0,"UndoRedo.undo")},dx.RemoveRowAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveRow",t),e.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},dx.CreateColumnAction=function(e,t){this.index=e,this.amount=t,this.actionType="insert_col"},le(dx.CreateColumnAction,dx.Action),dx.CreateColumnAction.prototype.undo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},dx.CreateColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateCol",t),e.alter("insert_col",this.index,this.amount,"UndoRedo.redo")},dx.RemoveColumnAction=function(e,t,n,o,i,a,r){this.index=e,this.indexes=t,this.data=n,this.amount=this.data[0].length,this.headers=o,this.columnPositions=i.slice(0),this.rowPositions=a.slice(0),this.actionType="remove_col",this.fixedColumnsLeft=r},le(dx.RemoveColumnAction,dx.Action),dx.RemoveColumnAction.prototype.undo=function(e,t){var n,o,i=this;e.getSettings().fixedColumnsLeft=this.fixedColumnsLeft;for(var a=this.indexes.slice(0).sort(),r=function(e,t,n){return n[i.indexes.indexOf(a[t])]},l=this.data.length,s=[],c=0;c<l;c++)s.push(q(this.data[c],r));var u=q(this.headers,r),d=null!==(n=null===(o=e.getPlugin("formulas"))||void 0===o?void 0:o.enabled)&&void 0!==n&&n,h=[];if(e.alter("insert_col",this.indexes[0],this.indexes.length,"UndoRedo.undo"),K(e.getSourceDataArray(),function(e,t){K(a,function(n,o){e[n]=s[t][o],h.push([t,n,e[n]])})}),e.setSourceDataAtCell(h),e.columnIndexMapper.insertIndexes(a[0],a.length),d){var f=[];K(e.getSourceDataArray(),function(e,t){K(a,function(n,o){e[n]=s[t][o],f.push([t,n,null,e[n]])})}),e.getPlugin("formulas").onAfterSetDataAtCell(f)}void 0!==this.headers&&K(u,function(t,n){e.getSettings().colHeaders[a[n]]=t}),e.batchExecution(function(){e.rowIndexMapper.setIndexesSequence(i.rowPositions),e.columnIndexMapper.setIndexesSequence(i.columnPositions)},!0),e.addHookOnce("afterRender",t),e.runHooks("afterCreateCol",this.indexes[0],this.indexes.length,"UndoRedo.undo"),d&&e.getPlugin("formulas").recalculateFull(),e.render()},dx.RemoveColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},dx.CellAlignmentAction=function(e,t,n,o){this.stateBefore=e,this.range=t,this.type=n,this.alignment=o},dx.CellAlignmentAction.prototype.undo=function(e,t){var n=this;K(this.range,function(t){t.forAll(function(t,o){t>=0&&o>=0&&e.setCellMeta(t,o,"className",n.stateBefore[t][o]||" htLeft")})}),e.addHookOnce("afterRender",t),e.render()},dx.CellAlignmentAction.prototype.redo=function(e,t){ig(this.range,this.type,this.alignment,function(t,n){return e.getCellMeta(t,n)},function(t,n,o,i){return e.setCellMeta(t,n,o,i)}),e.addHookOnce("afterRender",t),e.render()},dx.FiltersAction=function(e){this.conditionsStack=e,this.actionType="filter"},le(dx.FiltersAction,dx.Action),dx.FiltersAction.prototype.undo=function(e,t){var n=e.getPlugin("filters");e.addHookOnce("afterRender",t),n.conditionCollection.importAllConditions(this.conditionsStack.slice(0,this.conditionsStack.length-1)),n.filter()},dx.FiltersAction.prototype.redo=function(e,t){var n=e.getPlugin("filters");e.addHookOnce("afterRender",t),n.conditionCollection.importAllConditions(this.conditionsStack),n.filter()};var hx=function(e){ox(n,dx.Action);var t=ax(n);function n(e,o){var i;ex(this,n),(i=t.call(this)).cellRange=o;var a=i.cellRange.getTopLeftCorner(),r=i.cellRange.getBottomRightCorner();return i.rangeData=e.getData(a.row,a.col,r.row,r.col),i}return nx(n,[{key:"undo",value:function(e,t){var n=e.getPlugin("mergeCells");e.addHookOnce("afterRender",t),n.unmergeRange(this.cellRange,!0);var o=this.cellRange.getTopLeftCorner();e.populateFromArray(o.row,o.col,this.rangeData,void 0,void 0,"MergeCells")}},{key:"redo",value:function(e,t){var n=e.getPlugin("mergeCells");e.addHookOnce("afterRender",t),n.mergeRange(this.cellRange)}}]),n}();dx.MergeCellsAction=hx;var fx=function(e){ox(n,dx.Action);var t=ax(n);function n(e,o){var i;return ex(this,n),(i=t.call(this)).cellRange=o,i}return nx(n,[{key:"undo",value:function(e,t){var n=e.getPlugin("mergeCells");e.addHookOnce("afterRender",t),n.mergeRange(this.cellRange,!0)}},{key:"redo",value:function(e,t){var n=e.getPlugin("mergeCells");e.addHookOnce("afterRender",t),n.unmergeRange(this.cellRange,!0),e.render()}}]),n}();function px(e){if(!Ui(e)){var t=this.getActiveEditor();if(!t||!t.isOpened()){var n=e.altKey,o=e.ctrlKey,i=e.keyCode,a=e.metaKey,r=e.shiftKey;if((o||a)&&!n)89===i||r&&90===i?(this.undoRedo.redo(),$i(e)):90===i&&(this.undoRedo.undo(),$i(e))}}}function mx(e,t){if("loadData"===t)return this.undoRedo.clear()}dx.UnmergeCellsAction=fx,dx.RowMoveAction=function(e,t){this.rows=e.slice(),this.finalIndex=t},le(dx.RowMoveAction,dx.Action),dx.RowMoveAction.prototype.undo=function(e,t){var n=this,o=e.getPlugin("manualRowMove"),i=[].concat(this.rows),a=i.filter(function(e){return e>n.finalIndex}),r=i.filter(function(e){return e<=n.finalIndex}),l=a.sort(function(e,t){return t-e}).concat(r.sort(function(e,t){return e-t}));e.addHookOnce("afterRender",t);for(var s=0;s<l.length;s+=1){var c=e.toVisualRow(l[s]);o.moveRow(c,l[s])}e.render(),e.deselectCell(),e.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)},dx.RowMoveAction.prototype.redo=function(e,t){var n=e.getPlugin("manualRowMove");e.addHookOnce("afterRender",t),n.moveRows(this.rows.slice(),this.finalIndex),e.render(),e.deselectCell(),e.selectRows(this.finalIndex,this.finalIndex+this.rows.length-1)},dx.prototype.init=function(){var e=this.instance.getSettings().undo,t=void 0===e||e;this.instance.undoRedo||(this.instance.undoRedo=this),t?this.instance.undoRedo.enable():this.instance.undoRedo.disable()};var vx=Jr.getSingleton();vx.add("afterUpdateSettings",function(){this.getPlugin("undoRedo").init()}),vx.register("beforeUndo"),vx.register("afterUndo"),vx.register("beforeRedo"),vx.register("afterRedo"),dx.PLUGIN_KEY="undoRedo";var bx=dx;function yx(e){"@babel/helpers - typeof";return(yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gx(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wx(e,t,n){return(wx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kx(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _x(e,t){return(_x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=kx(e);if(t){var i=kx(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===yx(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function kx(e){return(kx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xx=Qc("physicallyIndexed"),Sx=xx.getListWithInsertedItems,Tx=xx.getListWithRemovedItems,Ex=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_x(e,t)}(a,dc);var t,n,o,i=Cx(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,function(e){return e})}return t=a,(n=[{key:"insert",value:function(e,t){var n=Ac(this.indexedValues,t);this.indexedValues=Sx(n,e,t,this.initValueOrFn),wx(kx(a.prototype),"insert",this).call(this,e,t)}},{key:"remove",value:function(e){var t=Tx(this.indexedValues,e);this.indexedValues=Pc(t,e),wx(kx(a.prototype),"remove",this).call(this,e)}}])&&gx(t.prototype,n),o&&gx(t,o),a}();function Ox(e){"@babel/helpers - typeof";return(Ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dx(e){return function(e){if(Array.isArray(e))return Ix(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ix(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ix(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ix(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Rx(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Mx(e,t,n){return(Mx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lx(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Px(e,t){return(Px=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ax(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Lx(e);if(t){var i=Lx(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Ox(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lx(e){return(Lx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nx=Qc("physicallyIndexed"),Vx=Nx.getListWithInsertedItems,Fx=Nx.getListWithRemovedItems;function Bx(e){"@babel/helpers - typeof";return(Bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hx(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function jx(e,t,n){return(jx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zx(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $x(e,t){return($x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ux(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=zx(e);if(t){var i=zx(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Bx(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zx(e){return(zx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wx=new Map([["loose",Ex],["strict",function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Px(e,t)}(a,dc);var t,n,o,i=Ax(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,function(e){return e})}return t=a,(n=[{key:"insert",value:function(e,t){var n=this;this.indexedValues=Vx(this.indexedValues,e,t,function(e,t){return n.getNextValue(t)}),Mx(Lx(a.prototype),"insert",this).call(this,e,t)}},{key:"remove",value:function(e){this.indexedValues=Fx(this.indexedValues,e),Mx(Lx(a.prototype),"remove",this).call(this,e)}},{key:"getNextValue",value:function(e){return Math.max.apply(Math,Dx(this.getValues()))+1+e}}])&&Rx(t.prototype,n),o&&Rx(t,o),a}()]]),qx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$x(e,t)}(a,Wv);var t,n,o,i=Ux(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).headerIndexes=null,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"bindRowsWithHeaders"}},{key:"PLUGIN_PRIORITY",get:function(){return 210}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().bindRowsWithHeaders}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var t=this.hot.getSettings().bindRowsWithHeaders;"string"!=typeof t&&(t="loose");var n=Wx.get(t);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new n),this.addHook("modifyRowHeader",function(t){return e.onModifyRowHeader(t)}),jx(zx(a.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),jx(zx(a.prototype),"disablePlugin",this).call(this)}},{key:"onModifyRowHeader",value:function(e){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(e))}},{key:"destroy",value:function(){jx(zx(a.prototype),"destroy",this).call(this)}}])&&Hx(t.prototype,n),o&&Hx(t,o),a}();n("KiPZ");function Kx(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Gx,Jx=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=t,this.hot=this.plugin.hot,this.endpoints=[],this.settings=n,this.settingsType="array",this.currentEndpoint=null,this.cellsToSetCache=[]}var t,n,o;return t=e,(n=[{key:"getEndpoint",value:function(e){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings)[e]:this.endpoints[e]}},{key:"getAllEndpoints",value:function(){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings):this.endpoints}},{key:"fillMissingEndpointData",value:function(e){return this.parseSettings(e.call(this))}},{key:"parseSettings",value:function(e){var t=this,n=[],o=e;if(o||"function"!=typeof this.settings)return o||(o=this.settings),K(o,function(e){var o={};t.assignSetting(e,o,"ranges",[[0,t.hot.countRows()-1]]),t.assignSetting(e,o,"reversedRowCoords",!1),t.assignSetting(e,o,"destinationRow",new Error("\n        You must provide a destination row for the Column Summary plugin in order to work properly!\n      ")),t.assignSetting(e,o,"destinationColumn",new Error("\n        You must provide a destination column for the Column Summary plugin in order to work properly!\n      ")),t.assignSetting(e,o,"sourceColumn",e.destinationColumn),t.assignSetting(e,o,"type","sum"),t.assignSetting(e,o,"forceNumeric",!1),t.assignSetting(e,o,"suppressDataTypeErrors",!0),t.assignSetting(e,o,"suppressDataTypeErrors",!0),t.assignSetting(e,o,"customFunction",null),t.assignSetting(e,o,"readOnly",!0),t.assignSetting(e,o,"roundFloat",!1),n.push(o)}),n;this.settingsType="function"}},{key:"assignSetting",value:function(e,t,n,o){if("ranges"!==n||void 0!==e[n]){if("ranges"!==n||0!==e[n].length)if(void 0===e[n]){if(o instanceof Error)throw o;t[n]=o}else"destinationRow"===n&&t.reversedRowCoords?t[n]=this.hot.countRows()-e[n]-1:t[n]=e[n]}else t[n]=o}},{key:"resetSetupBeforeStructureAlteration",value:function(e,t,n){if("function"===this.settingsType){var o=e.indexOf("row")>-1?"row":"col",i=this.getAllEndpoints();K(i,function(i){"row"===o&&i.destinationRow>=t&&("insert_row"===e?i.alterRowOffset=n:"remove_row"===e&&(i.alterRowOffset=-1*n)),"col"===o&&i.destinationColumn>=t&&("insert_col"===e?i.alterColumnOffset=n:"remove_col"===e&&(i.alterColumnOffset=-1*n))}),this.resetAllEndpoints(i,!1)}}},{key:"resetSetupAfterStructureAlteration",value:function(e,t,n,o,i){var a=this,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if("function"!==this.settingsType){var l=e.indexOf("row")>-1?"row":"col",s=e.indexOf("remove")>-1?-1:1,c=this.getAllEndpoints(),u=0===e.indexOf("move_row"),d=t;K(c,function(e){"row"===l&&e.destinationRow>=d&&(e.alterRowOffset=s*n),"col"===l&&e.destinationColumn>=d&&(e.alterColumnOffset=s*n)}),this.resetAllEndpoints(c,!u),K(c,u?function(e){a.extendEndpointRanges(e,d,o[0],o.length),a.recreatePhysicalRanges(e),a.clearOffsetInformation(e)}:function(e){a.shiftEndpointCoordinates(e,d)}),r&&this.refreshAllEndpoints()}else{this.hot.addHookOnce("beforeRender",function e(){return a.hot.removeHook("beforeRender",e),a.refreshAllEndpoints()})}}},{key:"clearOffsetInformation",value:function(e){e.alterRowOffset=void 0,e.alterColumnOffset=void 0}},{key:"extendEndpointRanges",value:function(e,t,n,o){K(e.ranges,function(e){e[1]&&(t>=e[0]&&t<=e[1]?n>e[1]?e[1]+=o:n<e[0]&&(e[0]-=o):n>=e[0]&&n<=e[1]&&(e[1]-=o,t<=e[0]&&(e[0]+=1,e[1]+=1)))})}},{key:"recreatePhysicalRanges",value:function(e){var t=this,n=[],o=[];K(e.ranges,function(e){var n=[];if(e[1])for(var i=e[0];i<=e[1];i++)n.push(t.hot.toPhysicalRow(i));else n.push(t.hot.toPhysicalRow(e[0]));o.push(n)}),K(o,function(e){var t=[];K(e,function(o,i){0===i?t.push(o):e[i]!==e[i-1]+1&&(t.push(e[i-1]),n.push(t),(t=[]).push(o)),i===e.length-1&&(t.push(o),n.push(t))})}),e.ranges=n}},{key:"shiftEndpointCoordinates",value:function(e,t){e.alterRowOffset&&0!==e.alterRowOffset?(e.destinationRow+=e.alterRowOffset||0,K(e.ranges,function(n){K(n,function(o,i){o>=t&&(n[i]+=e.alterRowOffset||0)})})):e.alterColumnOffset&&0!==e.alterColumnOffset&&(e.destinationColumn+=e.alterColumnOffset||0,e.sourceColumn+=e.alterColumnOffset||0)}},{key:"resetAllEndpoints",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAllEndpoints(),n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.some(function(t){var n=t.alterRowOffset||0,o=t.alterColumnOffset||0;return t.destinationRow+n>=e.hot.countRows()||t.destinationColumn+o>=e.hot.countCols()})||(this.cellsToSetCache=[],K(t,function(t){e.resetEndpointValue(t,n)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}},{key:"refreshAllEndpoints",value:function(){var e=this;this.cellsToSetCache=[],K(this.getAllEndpoints(),function(t){e.currentEndpoint=t,e.plugin.calculate(t),e.setEndpointValue(t,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}},{key:"refreshChangedEndpoints",value:function(e){var t=this,n=[];this.cellsToSetCache=[],K(e,function(e,o,i){"".concat(e[2]||"")!=="".concat(e[3])&&K(t.getAllEndpoints(),function(e,a){t.hot.propToCol(i[o][1])===e.sourceColumn&&-1===n.indexOf(a)&&n.push(a)})}),K(n,function(e){t.refreshEndpoint(t.getEndpoint(e))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}},{key:"refreshEndpoint",value:function(e){this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e),this.currentEndpoint=null}},{key:"resetEndpointValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.alterRowOffset||0,o=e.alterColumnOffset||0,i=[this.hot.toVisualRow(e.destinationRow),this.hot.toVisualColumn(e.destinationColumn)],a=i[0],r=i[1];if(null!==r&&null!==a){var l=this.hot.getCellMeta(a,r);l.readOnly=!1,l.className=""}this.cellsToSetCache.push([this.hot.toVisualRow(e.destinationRow+(t?n:0)),this.hot.toVisualColumn(e.destinationColumn+(t?o:0)),""])}},{key:"setEndpointValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1*e.alterRowOffset||0,i=-1*e.alterColumnOffset||0,a=this.hot.toVisualRow(e.destinationRow);if(e.destinationRow>=this.hot.countRows()||e.destinationColumn>=this.hot.countCols())this.throwOutOfBoundsWarning();else{var r=this.hot.toVisualRow(e.destinationRow+o);if(null!==r){var l=this.hot.getCellMeta(r,e.destinationColumn+i);"init"!==t&&l.readOnly===e.readOnly||(l.readOnly=e.readOnly,l.className="columnSummaryResult")}e.roundFloat&&!isNaN(e.result)&&(e.result=e.result.toFixed(e.roundFloat)),n?this.hot.setDataAtCell(a,e.destinationColumn,e.result,"ColumnSummary.set"):this.cellsToSetCache.push([a,e.destinationColumn,e.result]),e.alterRowOffset=void 0,e.alterColumnOffset=void 0}}},{key:"throwOutOfBoundsWarning",value:function(){No("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}}])&&Kx(t.prototype,n),o&&Kx(t,o),e}();function Yx(e){"@babel/helpers - typeof";return(Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xx(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qx(e,t,n){return(Qx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tS(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Zx(e,t){return(Zx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=tS(e);if(t){var i=tS(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===Yx(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function tS(e){return(tS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zx(e,t)}(a,Wv);var t,n,o,i=eS(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).endpoints=null,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"columnSummary"}},{key:"PLUGIN_PRIORITY",get:function(){return 220}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().columnSummary}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.settings=this.hot.getSettings().columnSummary,this.endpoints=new Jx(this,this.settings),this.addHook("afterInit",function(){return e.onAfterInit.apply(e,arguments)}),this.addHook("afterChange",function(){return e.onAfterChange.apply(e,arguments)}),this.addHook("beforeCreateRow",function(t,n,o){return e.endpoints.resetSetupBeforeStructureAlteration("insert_row",t,n,null,o)}),this.addHook("beforeCreateCol",function(t,n,o){return e.endpoints.resetSetupBeforeStructureAlteration("insert_col",t,n,null,o)}),this.addHook("beforeRemoveRow",function(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.endpoints).resetSetupBeforeStructureAlteration.apply(t,["remove_row"].concat(o))}),this.addHook("beforeRemoveCol",function(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.endpoints).resetSetupBeforeStructureAlteration.apply(t,["remove_col"].concat(o))}),this.addHook("afterCreateRow",function(t,n,o){return e.endpoints.resetSetupAfterStructureAlteration("insert_row",t,n,null,o)}),this.addHook("afterCreateCol",function(t,n,o){return e.endpoints.resetSetupAfterStructureAlteration("insert_col",t,n,null,o)}),this.addHook("afterRemoveRow",function(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.endpoints).resetSetupAfterStructureAlteration.apply(t,["remove_row"].concat(o))}),this.addHook("afterRemoveCol",function(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.endpoints).resetSetupAfterStructureAlteration.apply(t,["remove_col"].concat(o))}),this.addHook("afterRowMove",function(){return e.onAfterRowMove.apply(e,arguments)}),Qx(tS(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.endpoints=null,this.settings=null,this.currentEndpoint=null}},{key:"calculate",value:function(e){switch(e.type.toLowerCase()){case"sum":e.result=this.calculateSum(e);break;case"min":case"max":e.result=this.calculateMinMax(e,e.type);break;case"count":e.result=this.countEntries(e);break;case"average":e.result=this.calculateAverage(e);break;case"custom":e.result=e.customFunction.call(this,e)}}},{key:"calculateSum",value:function(e){var t=this,n=0;return ve(e.ranges,function(o){n+=t.getPartialSum(o,e.sourceColumn)}),n}},{key:"getPartialSum",value:function(e,t){var n=0,o=e[1]||e[0],i=null,a=0;do{i=this.getCellValue(o,t)||0;var r=("".concat(i).split(".")[1]||[]).length||1;r>a&&(a=r),n+=i||0,o-=1}while(o>=e[0]);return Math.round(n*Math.pow(10,a))/Math.pow(10,a)}},{key:"calculateMinMax",value:function(e,t){var n=this,o=null;return ve(e.ranges,function(i){var a=n.getPartialMinMax(i,e.sourceColumn,t);if(null===o&&null!==a&&(o=a),null!==a)switch(t){case"min":o=Math.min(o,a);break;case"max":o=Math.max(o,a)}}),null===o?"Not enough data":o}},{key:"getPartialMinMax",value:function(e,t,n){var o,i=null,a=e[1]||e[0];do{if(o=this.getCellValue(a,t)||null,null===i)i=o;else if(null!==o)switch(n){case"min":i=Math.min(i,o);break;case"max":i=Math.max(i,o)}a-=1}while(a>=e[0]);return i}},{key:"countEmpty",value:function(e,t){var n=0,o=e[1]||e[0];do{this.getCellValue(o,t)||(n+=1),o-=1}while(o>=e[0]);return n}},{key:"countEntries",value:function(e){var t=this,n=0;return ve(e.ranges,function(o){var i=void 0===o[1]?1:o[1]-o[0]+1,a=t.countEmpty(o,e.sourceColumn);n+=i,n-=a}),n}},{key:"calculateAverage",value:function(e){return this.calculateSum(e)/this.countEntries(e)}},{key:"getCellValue",value:function(e,t){var n,o,i=this.hot.toVisualRow(e),a=this.hot.toVisualColumn(t),r=this.hot.getSourceDataAtCell(e,t),l="";if(null!==i&&null!==a&&(l=this.hot.getCellMeta(i,a).className||""),l.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&("string"==typeof r&&(r=r.replace(/,/,".")),r=parseFloat(r)),isNaN(r)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw new Error(Ze(Gx||(n=["ColumnSummary plugin: cell at (",", ",") is not in a \n          numeric format. Cannot do the calculation."],(o=["ColumnSummary plugin: cell at (",", ",") is not in a\\x20\n          numeric format. Cannot do the calculation."])||(o=n.slice(0)),Gx=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(o)}}))),e,t));return r}},{key:"onAfterInit",value:function(){this.endpoints.endpoints=this.endpoints.parseSettings(),this.endpoints.refreshAllEndpoints(!0)}},{key:"onAfterChange",value:function(e,t){e&&"ColumnSummary.reset"!==t&&"ColumnSummary.set"!==t&&"loadData"!==t&&this.endpoints.refreshChangedEndpoints(e)}},{key:"onAfterRowMove",value:function(e,t){this.endpoints.resetSetupBeforeStructureAlteration("move_row",e[0],e.length,e,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",t,e.length,e,this.pluginName)}}])&&Xx(t.prototype,n),o&&Xx(t,o),a}();function oS(e){"@babel/helpers - typeof";return(oS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iS(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function aS(e,t,n){return(aS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cS(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function rS(e,t){return(rS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=cS(e);if(t){var i=cS(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===oS(t)||"function"==typeof t))return t;return sS(e)}(this,n)}}function sS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cS(e){return(cS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jr.getSingleton().register("afterDropdownMenuDefaultOptions"),Jr.getSingleton().register("beforeDropdownMenuShow"),Jr.getSingleton().register("afterDropdownMenuShow"),Jr.getSingleton().register("afterDropdownMenuHide"),Jr.getSingleton().register("afterDropdownMenuExecute");var uS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rS(e,t)}(a,Wv);var t,n,o,i=lS(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).eventManager=new Gi(sS(t)),t.commandExecutor=new kg(t.hot),t.itemsFactory=null,t.menu=null,t.hot.addHook("afterGetColHeader",function(e,n){return t.onAfterGetColHeader(e,n)}),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"dropdownMenu"}},{key:"PLUGIN_PRIORITY",get:function(){return 230}},{key:"PLUGIN_DEPS",get:function(){return["plugin:AutoColumnSize"]}},{key:"DEFAULT_ITEMS",get:function(){return[Tg,Eg,Qy,Mg,Qy,Sg,Qy,Og,Qy,xg]}}],(n=[{key:"isEnabled",value:function(){return this.hot.getSettings().dropdownMenu}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){this.itemsFactory=new qg(this.hot,a.DEFAULT_ITEMS);var t=this.hot.getSettings().dropdownMenu,n={items:this.itemsFactory.getItems(t)};this.registerEvents(),"function"==typeof t.callback&&this.commandExecutor.setCommonCallback(t.callback),aS(cS(a.prototype),"enablePlugin",this).call(this),this.callOnPluginsReady(function(){e.hot.runHooks("afterDropdownMenuDefaultOptions",n),e.itemsFactory.setPredefinedItems(n.items);var o=e.itemsFactory.getItems(t);e.menu&&e.menu.destroy(),e.menu=new Qg(e.hot,{className:"htDropdownMenu",keepInViewport:!0,container:t.uiContainer||e.hot.rootDocument.body}),e.hot.runHooks("beforeDropdownMenuSetItems",o),e.menu.setMenuItems(o),e.menu.addLocalHook("beforeOpen",function(){return e.onMenuBeforeOpen()}),e.menu.addLocalHook("afterOpen",function(){return e.onMenuAfterOpen()}),e.menu.addLocalHook("afterClose",function(){return e.onMenuAfterClose()}),e.menu.addLocalHook("executeCommand",function(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.executeCommand).call.apply(t,[e].concat(o))}),K(o,function(t){return e.commandExecutor.registerCommand(t.key,t)})})}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),aS(cS(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&this.menu.destroy(),aS(cS(a.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var e=this;this.eventManager.addEventListener(this.hot.rootElement,"click",function(t){return e.onTableClick(t)})}},{key:"open",value:function(e){this.menu&&(this.menu.open(),e.width&&this.menu.setOffset("left",e.width),this.menu.setPosition(e))}},{key:"close",value:function(){this.menu&&this.menu.close()}},{key:"executeCommand",value:function(e){for(var t,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(t=this.commandExecutor).execute.apply(t,[e].concat(o))}},{key:"setListening",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.menu.isOpened()&&(e?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}},{key:"onTableClick",value:function(e){if(e.stopPropagation(),Ut(e.target,"changeType")&&!this.menu.isOpened()){var t=0,n=0;if(this.hot.rootDocument!==this.menu.container.ownerDocument){var o=this.hot.rootWindow.frameElement.getBoundingClientRect();t=o.top,n=o.left}var i=e.target.getBoundingClientRect();this.open({left:i.left+n,top:i.top+e.target.offsetHeight+3+t,width:i.width,height:i.height})}}},{key:"onAfterGetColHeader",value:function(e,t){var n=t.parentNode;if(n){var o=n.parentNode.childNodes,i=Array.prototype.indexOf.call(o,n);if(!(e<0||i!==o.length-1)){var a=t.querySelector(".".concat("changeType"));if(!this.enabled||!a)if(this.enabled){var r=this.hot.rootDocument.createElement("button");r.className="changeType",r.onclick=function(){return!1},t.firstChild.insertBefore(r,t.firstChild.firstChild)}else a&&a.parentNode.removeChild(a)}}}},{key:"onMenuBeforeOpen",value:function(){this.hot.runHooks("beforeDropdownMenuShow",this)}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterDropdownMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),aS(cS(a.prototype),"destroy",this).call(this)}}])&&iS(t.prototype,n),o&&iS(t,o),a}();function dS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function fS(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}uS.SEPARATOR={name:Qy};var pS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.options={}}var t,n,o;return t=e,(n=[{key:"setOptions",value:function(e){this.options=e}},{key:"getData",value:function(){var e=this,t=this._getDataRange(),n=t.startRow,o=t.startCol,i=t.endRow,a=t.endCol,r=this.options,l=[];return Nl(n,i,function(t){var n=[];!r.exportHiddenRows&&e._isHiddenRow(t)||(Nl(o,a,function(o){!r.exportHiddenColumns&&e._isHiddenColumn(o)||n.push(e.hot.getDataAtCell(t,o))}),l.push(n))}),l}},{key:"getRowHeaders",value:function(){var e=this,t=[];if(this.options.rowHeaders){var n=this._getDataRange(),o=n.startRow,i=n.endRow,a=this.hot.getRowHeader();Nl(o,i,function(n){!e.options.exportHiddenRows&&e._isHiddenRow(n)||t.push(a[n])})}return t}},{key:"getColumnHeaders",value:function(){var e=this,t=[];if(this.options.columnHeaders){var n=this._getDataRange(),o=n.startCol,i=n.endCol,a=this.hot.getColHeader();Nl(o,i,function(n){!e.options.exportHiddenColumns&&e._isHiddenColumn(n)||t.push(a[n])})}return t}},{key:"_getDataRange",value:function(){var e=this.hot.countCols()-1,t=this.hot.countRows()-1,n=dS(this.options.range,4),o=n[0],i=void 0===o?0:o,a=n[1],r=void 0===a?0:a,l=n[2],s=void 0===l?t:l,c=n[3],u=void 0===c?e:c;return{startRow:i=Math.max(i,0),startCol:r=Math.max(r,0),endRow:s=Math.min(s,t),endCol:u=Math.min(u,e)}}},{key:"_isHiddenRow",value:function(e){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(e))}},{key:"_isHiddenColumn",value:function(e){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(e))}}])&&fS(t.prototype,n),o&&fS(t,o),e}();function mS(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var vS=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataProvider=t,this.options=this._mergeOptions(n),this.dataProvider.setOptions(this.options)}var t,n,o;return t=e,o=[{key:"DEFAULT_OPTIONS",get:function(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}}],(n=[{key:"_mergeOptions",value:function(t){var n=de(this.constructor.DEFAULT_OPTIONS),o=new Date;return(n=se(n=se(de(e.DEFAULT_OPTIONS),n),t)).filename=Tt(n.filename,{YYYY:o.getFullYear(),MM:"".concat(o.getMonth()+1).padStart(2,"0"),DD:"".concat(o.getDate()).padStart(2,"0")}),n}}])&&mS(t.prototype,n),o&&mS(t,o),e}();function bS(e){"@babel/helpers - typeof";return(bS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yS(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gS(e,t){return(gS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=_S(e);if(t){var i=_S(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===bS(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _S(e){return(_S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CS=String.fromCharCode(13),kS=String.fromCharCode(34),xS=String.fromCharCode(10);var SS,TS,ES,OS=(ES=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gS(e,t)}(a,vS);var t,n,o,i=wS(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,o=[{key:"DEFAULT_OPTIONS",get:function(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:"\r\n"}}}],(n=[{key:"export",value:function(){var e=this,t=this.options,n=this.dataProvider.getData(),o=this.dataProvider.getColumnHeaders(),i=o.length>0,a=this.dataProvider.getRowHeaders(),r=a.length>0,l=t.bom?String.fromCharCode(65279):"";return i&&(o=q(o,function(t){return e._escapeCell(t,!0)}),r&&(l+=t.columnDelimiter),l+=o.join(t.columnDelimiter),l+=t.rowDelimiter),K(n,function(n,o){o>0&&(l+=t.rowDelimiter),r&&(l+=e._escapeCell(a[o])+t.columnDelimiter),l+=n.map(function(t){return e._escapeCell(t)}).join(t.columnDelimiter)}),l}},{key:"_escapeCell",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=nt(e);return""!==n&&(t||n.indexOf(CS)>=0||n.indexOf(kS)>=0||n.indexOf(xS)>=0||n.indexOf(this.options.columnDelimiter)>=0)&&(n=n.replace(new RegExp('"',"g"),'""'),n='"'.concat(n,'"')),n}}])&&yS(t.prototype,n),o&&yS(t,o),a}(),(TS="csv")in(SS={})?Object.defineProperty(SS,TS,{value:ES,enumerable:!0,configurable:!0,writable:!0}):SS[TS]=ES,SS);function DS(e){"@babel/helpers - typeof";return(DS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IS(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function RS(e,t){return(RS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=PS(e);if(t){var i=PS(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===DS(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function PS(e){return(PS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var AS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RS(e,t)}(a,Wv);var t,n,o,i=MS(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"exportFile"}},{key:"PLUGIN_PRIORITY",get:function(){return 240}}],(n=[{key:"isEnabled",value:function(){return!0}},{key:"exportAsString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createTypeFormatter(e,t).export()}},{key:"exportAsBlob",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createBlob(this._createTypeFormatter(e,t))}},{key:"downloadFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.hot,o=n.rootDocument,i=n.rootWindow,a=this._createTypeFormatter(e,t),r=this._createBlob(a),l=i.URL||i.webkitURL,s=o.createElement("a"),c="".concat(a.options.filename,".").concat(a.options.fileExtension);if(void 0!==s.download){var u=l.createObjectURL(r);s.style.display="none",s.setAttribute("href",u),s.setAttribute("download",c),o.body.appendChild(s),s.dispatchEvent(new MouseEvent("click")),o.body.removeChild(s),setTimeout(function(){l.revokeObjectURL(u)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(r,c)}},{key:"_createTypeFormatter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!OS[e])throw new Error('Export format type "'.concat(e,'" is not supported.'));return function(e,t,n){return"function"==typeof OS[e]?new OS[e](t,n):null}(e,new pS(this.hot),t)}},{key:"_createBlob",value:function(e){var t=null;return"undefined"!=typeof Blob&&(t=new Blob([e.export()],{type:"".concat(e.options.mimeType,";charset=").concat(e.options.encoding)})),t}}])&&IS(t.prototype,n),o&&IS(t,o),a}();function LS(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var NS=function(){function e(t,n){var o=n.id,i=n.stateless,a=void 0===i||i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.id=o,this.elements=[],this.hidden=!1,this.stateId="Filters.component.".concat(this.id),this.state=a?null:this.hot.columnIndexMapper.registerMap(this.stateId,new zc)}var t,n,o;return t=e,(n=[{key:"reset",value:function(){K(this.elements,function(e){return e.reset()})}},{key:"hide",value:function(){this.hidden=!0}},{key:"show",value:function(){this.hidden=!1}},{key:"isHidden",value:function(){return null===this.hot||this.hidden}},{key:"restoreState",value:function(e){this.state&&this.setState(this.state.getValueAtIndex(e))}},{key:"setState",value:function(){throw new Error("The state setting logic is not implemented")}},{key:"saveState",value:function(e){this.state&&this.state.setValueAtIndex(e,this.getState())}},{key:"getState",value:function(){throw new Error("The state gathering logic is not implemented")}},{key:"destroy",value:function(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),K(this.elements,function(e){return e.destroy()}),this.state=null,this.elements=null,this.hot=null}}])&&LS(t.prototype,n),o&&LS(t,o),e}();he(NS,cc);var VS=NS,FS={};function BS(e,t){if(!FS[e])throw Error('Filter condition "'.concat(e,'" does not exist.'));var n=FS[e],o=n.condition,i=n.descriptor,a=t;return i.inputValuesDecorator&&(a=i.inputValuesDecorator(a)),function(e){return o.apply(e.meta.instance,[].concat([e],[a]))}}function HS(e){if(!FS[e])throw Error('Filter condition "'.concat(e,'" does not exist.'));return FS[e].descriptor}function jS(e,t,n){n.key=e,FS[e]={condition:t,descriptor:n}}jS("none",function(){return!0},{name:Pd,inputsCount:0,showOperators:!1});var $S="empty";jS($S,function(e){return at(e.value)},{name:Ad,inputsCount:0,showOperators:!0});function US(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS("not_empty",function(e,t){return!BS($S,t)(e)},{name:Ld,inputsCount:0,showOperators:!0});var WS="eq";jS(WS,function(e,t){var n=US(t,1)[0];return nt(e.value).toLowerCase()===nt(n)},{name:Nd,inputsCount:1,showOperators:!0});function qS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return KS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS("neq",function(e,t){return!BS(WS,t)(e)},{name:Vd,inputsCount:1,showOperators:!0});function GS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return JS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS("gt",function(e,t){var n=qS(t,1)[0];return"numeric"===e.meta.type&&(n=parseFloat(n,10)),e.value>n},{name:Ud,inputsCount:1,showOperators:!0});function YS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return XS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS("gte",function(e,t){var n=GS(t,1)[0];return"numeric"===e.meta.type&&(n=parseFloat(n,10)),e.value>=n},{name:zd,inputsCount:1,showOperators:!0});function QS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ZS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS("lt",function(e,t){var n=YS(t,1)[0];return"numeric"===e.meta.type&&(n=parseFloat(n,10)),e.value<n},{name:Wd,inputsCount:1,showOperators:!0});function eT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS("lte",function(e,t){var n=QS(t,1)[0];return"numeric"===e.meta.type&&(n=parseFloat(n,10)),e.value<=n},{name:qd,inputsCount:1,showOperators:!0});var nT="date_after";function oT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return iT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS(nT,function(e,t){var n=eT(t,1)[0],o=Qe()(e.value,e.meta.dateFormat),i=Qe()(n,e.meta.dateFormat);return!(!o.isValid()||!i.isValid())&&o.diff(i)>=0},{name:Jd,inputsCount:1,showOperators:!0});var aT="date_before";function rT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS(aT,function(e,t){var n=oT(t,1)[0],o=Qe()(e.value,e.meta.dateFormat),i=Qe()(n,e.meta.dateFormat);return!(!o.isValid()||!i.isValid())&&o.diff(i)<=0},{name:Yd,inputsCount:1,showOperators:!0});var sT="between";jS(sT,function(e,t){var n=rT(t,2),o=n[0],i=n[1];if("numeric"===e.meta.type){var a=parseFloat(o,10),r=parseFloat(i,10);o=Math.min(a,r),i=Math.max(a,r)}else if("date"===e.meta.type){var l=BS(aT,[i]),s=BS(nT,[o]);return l(e)&&s(e)}return e.value>=o&&e.value<=i},{name:Kd,inputsCount:2,showOperators:!0});function cT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS("not_between",function(e,t){return!BS(sT,t)(e)},{name:Gd,inputsCount:2,showOperators:!0});jS("begins_with",function(e,t){var n=cT(t,1)[0];return nt(e.value).toLowerCase().startsWith(nt(n))},{name:Fd,inputsCount:1,showOperators:!0});n("vg6S");function dT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function fT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS("ends_with",function(e,t){var n=dT(t,1)[0];return nt(e.value).toLowerCase().endsWith(nt(n))},{name:Bd,inputsCount:1,showOperators:!0});var mT="contains";jS(mT,function(e,t){var n=fT(t,1)[0];return nt(e.value).toLowerCase().indexOf(nt(n))>=0},{name:Hd,inputsCount:1,showOperators:!0});jS("not_contains",function(e,t){return!BS(mT,t)(e)},{name:jd,inputsCount:1,showOperators:!0});jS("date_tomorrow",function(e){var t=Qe()(e.value,e.meta.dateFormat);return!!t.isValid()&&t.isSame(Qe()().subtract(-1,"days").startOf("day"),"d")},{name:Qd,inputsCount:0});jS("date_today",function(e){var t=Qe()(e.value,e.meta.dateFormat);return!!t.isValid()&&t.isSame(Qe()().startOf("day"),"d")},{name:Xd,inputsCount:0});jS("date_yesterday",function(e){var t=Qe()(e.value,e.meta.dateFormat);return!!t.isValid()&&t.isSame(Qe()().subtract(1,"days").startOf("day"),"d")},{name:Zd,inputsCount:0});B();var vT=new Set([1]).has(1),bT=vT&&"function"==typeof Array.from;function yT(e){var t=e;return vT&&(t=new Set(t)),function(e){return vT?t.has(e):!!~t.indexOf(e)}}function gT(e){return null===e||void 0===e?"":e}function wT(e){var t=e;return t=(t=bT?Array.from(new Set(t)):Z(t)).sort(function(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e===t?0:e>t?1:-1})}function _T(e,t,n,o){var i,a=[],r=e===t;return r||(i=yT(t)),K(e,function(e){var t=!1;(r||i(e))&&(t=!0);var l={checked:t,value:e,visualValue:function(e,t){var n=e;return""===n&&(n="(".concat(t,")")),n}(e,n)};o&&o(l),a.push(l)}),a}function CT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}jS("by_value",function(e,t){return(0,CT(t,1)[0])(e.value)},{name:"By value",inputsCount:0,inputValuesDecorator:function(e){return[yT(CT(e,1)[0])]},showOperators:!1});jS("true",function(){return!0},{name:"True"});jS("false",function(){return!1},{name:"False"});var xT={};function ST(e,t,n){xT[e]={name:t,func:n}}ST("conjunction",nh,function(e,t){return e.every(function(e){return e.func(t)})});ST("disjunction",oh,function(e,t){return e.some(function(e){return e.func(t)})});var TT;function ET(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ST("disjunctionWithExtraCondition",oh,function(e,t){if(e.length<3)throw Error("Operation doesn't work on less then three conditions.");return e.slice(0,e.length-1).some(function(e){return e.func(t)})&&e[e.length-1].func(t)});var OT="text",DT=(ET(TT={},"numeric",["none",Qy,$S,"not_empty",Qy,WS,"neq",Qy,"gt","gte","lt","lte",sT,"not_between"]),ET(TT,OT,["none",Qy,$S,"not_empty",Qy,WS,"neq",Qy,"begins_with","ends_with",Qy,mT,"not_contains"]),ET(TT,"date",["none",Qy,$S,"not_empty",Qy,WS,"neq",Qy,aT,nT,sT,Qy,"date_tomorrow","date_today","date_yesterday"]),TT);function IT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var RT=["click","input","keydown","keypress","keyup","focus","blur","change"],MT=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.eventManager=new Gi(this),this.options=se(e.DEFAULTS,n),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName),this.buildState=!1}var t,n,o;return t=e,o=[{key:"DEFAULTS",get:function(){return de({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}}],(n=[{key:"setValue",value:function(e){this.options.value=e,this.update()}},{key:"getValue",value:function(){return this.options.value}},{key:"element",get:function(){return"building"===this.buildState?this._element:"built"===this.buildState?(this.update(),this._element):(this.buildState="building",this.build(),this.buildState="built",this._element)}},{key:"isBuilt",value:function(){return"built"===this.buildState}},{key:"translateIfPossible",value:function(e){return"string"==typeof e&&e.startsWith(Rd)?this.hot.getTranslatedPhrase(e):e}},{key:"build",value:function(){var e=this,t=function(t,n){e.eventManager.addEventListener(t,n,function(t){return e.runLocalHooks(n,t,e)})};if(this.buildState||(this.buildState="building"),this.options.className&&zt(this._element,this.options.className),this.options.children.length)K(this.options.children,function(t){return e._element.appendChild(t.element)});else if(this.options.wrapIt){var n=this.hot.rootDocument.createElement(this.options.tagName);ve(this.options,function(t,o){void 0!==n[o]&&"className"!==o&&"tagName"!==o&&"children"!==o&&(n[o]=e.translateIfPossible(t))}),this._element.appendChild(n),K(RT,function(e){return t(n,e)})}else K(RT,function(n){return t(e._element,n)})}},{key:"update",value:function(){}},{key:"reset",value:function(){this.options.value="",this.update()}},{key:"show",value:function(){this.element.style.display=""}},{key:"hide",value:function(){this.element.style.display="none"}},{key:"focus",value:function(){}},{key:"destroy",value:function(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}}])&&IT(t.prototype,n),o&&IT(t,o),e}();he(MT,cc);var PT=MT;function AT(e){"@babel/helpers - typeof";return(AT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function NT(e,t,n){return(NT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HT(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function VT(e,t){return(VT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=HT(e);if(t){var i=HT(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===AT(t)||"function"==typeof t))return t;return BT(e)}(this,n)}}function BT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HT(e){return(HT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jT=new WeakMap,$T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VT(e,t)}(a,PT);var t,n,o,i=FT(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,se(a.DEFAULTS,t)),jT.set(BT(n),{}),n.registerHooks(),n}return t=a,o=[{key:"DEFAULTS",get:function(){return de({placeholder:"",type:"text",tagName:"input"})}}],(n=[{key:"registerHooks",value:function(){var e=this;this.addLocalHook("click",function(){return e.onClick()}),this.addLocalHook("keyup",function(t){return e.onKeyup(t)})}},{key:"build",value:function(){NT(HT(a.prototype),"build",this).call(this);var e=jT.get(this),t=this.hot.rootDocument.createElement("div");e.input=this._element.firstChild,zt(this._element,"htUIInput"),zt(t,"htUIInputIcon"),this._element.appendChild(t),this.update()}},{key:"update",value:function(){if(this.isBuilt()){var e=jT.get(this).input;e.type=this.options.type,e.placeholder=this.translateIfPossible(this.options.placeholder),e.value=this.translateIfPossible(this.options.value)}}},{key:"focus",value:function(){this.isBuilt()&&jT.get(this).input.focus()}},{key:"onClick",value:function(){}},{key:"onKeyup",value:function(e){this.options.value=e.target.value}}])&&LT(t.prototype,n),o&&LT(t,o),a}();function UT(e){"@babel/helpers - typeof";return(UT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function WT(e,t,n){return(WT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=JT(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qT(e,t){return(qT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=JT(e);if(t){var i=JT(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===UT(t)||"function"==typeof t))return t;return GT(e)}(this,n)}}function GT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JT(e){return(JT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YT=new WeakMap,XT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qT(e,t)}(a,PT);var t,n,o,i=KT(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,se(a.DEFAULTS,t)),YT.set(GT(n),{}),n.menu=null,n.items=[],n.registerHooks(),n}return t=a,o=[{key:"DEFAULTS",get:function(){return de({className:"htUISelect",wrapIt:!1})}}],(n=[{key:"registerHooks",value:function(){var e=this;this.addLocalHook("click",function(){return e.onClick()})}},{key:"setItems",value:function(e){this.items=this.translateNames(e),this.menu&&this.menu.setMenuItems(this.items)}},{key:"translateNames",value:function(e){var t=this;return K(e,function(e){e.name=t.translateIfPossible(e.name)}),e}},{key:"build",value:function(){var e=this;WT(JT(a.prototype),"build",this).call(this),this.menu=new Qg(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer}),this.menu.setMenuItems(this.items);var t=new PT(this.hot,{className:"htUISelectCaption"}),n=new PT(this.hot,{className:"htUISelectDropdown"}),o=YT.get(this);o.caption=t,o.captionElement=t.element,o.dropdown=n,K([t,n],function(t){return e._element.appendChild(t.element)}),this.menu.addLocalHook("select",function(t){return e.onMenuSelect(t)}),this.menu.addLocalHook("afterClose",function(){return e.onMenuClosed()}),this.update()}},{key:"update",value:function(){var e;this.isBuilt()&&(e=this.options.value?this.options.value.name:this.menu.hot.getTranslatedPhrase(Pd),YT.get(this).captionElement.textContent=e,WT(JT(a.prototype),"update",this).call(this))}},{key:"openOptions",value:function(){var e=this.element.getBoundingClientRect();this.menu&&(this.menu.open(),this.menu.setPosition({left:e.left-5,top:e.top-1,width:e.width,height:e.height}))}},{key:"closeOptions",value:function(){this.menu&&this.menu.close()}},{key:"onMenuSelect",value:function(e){e.name!==Qy&&(this.options.value=e,this.update(),this.runLocalHooks("select",this.options.value))}},{key:"onMenuClosed",value:function(){this.runLocalHooks("afterClose")}},{key:"onClick",value:function(){this.openOptions()}},{key:"destroy",value:function(){this.menu&&(this.menu.destroy(),this.menu=null);var e=YT.get(this),t=e.caption,n=e.dropdown;t&&t.destroy(),n&&n.destroy(),WT(JT(a.prototype),"destroy",this).call(this)}}])&&zT(t.prototype,n),o&&zT(t,o),a}();function QT(e){"@babel/helpers - typeof";return(QT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZT(e){return function(e){if(Array.isArray(e))return eE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return eE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eE(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function tE(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function nE(e,t,n){return(nE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aE(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function oE(e,t){return(oE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=aE(e);if(t){var i=aE(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===QT(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function aE(e){return(aE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oE(e,t)}(a,VS);var t,n,o,i=iE(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,{id:t.id,stateless:!1})).name=t.name,n.addSeparator=t.addSeparator,n.elements.push(new XT(n.hot,{menuContainer:t.menuContainer})),n.elements.push(new $T(n.hot,{placeholder:uh})),n.elements.push(new $T(n.hot,{placeholder:dh})),n.registerHooks(),n}return t=a,(n=[{key:"registerHooks",value:function(){var e=this;this.getSelectElement().addLocalHook("select",function(t){return e.onConditionSelect(t)}),this.getSelectElement().addLocalHook("afterClose",function(){return e.onSelectUIClosed()}),K(this.getInputElements(),function(t){t.addLocalHook("keydown",function(t){return e.onInputKeyDown(t)})})}},{key:"setState",value:function(e){var t=this;if(this.reset(),e){var n=de(e.command);n.name.startsWith(Md)&&(n.name=this.hot.getTranslatedPhrase(n.name)),this.getSelectElement().setValue(n),K(e.args,function(e,o){if(o>n.inputsCount-1)return!1;var i=t.getInputElement(o);i.setValue(e),i[n.inputsCount>o?"show":"hide"](),o||setTimeout(function(){return i.focus()},10)})}}},{key:"getState",value:function(){var e=this.getSelectElement().getValue()||HS("none"),t=[];return K(this.getInputElements(),function(n,o){e.inputsCount>o&&t.push(n.getValue())}),{command:e,args:t}}},{key:"updateState",value:function(e,t){var n=HS(e?e.name:"none");this.state.setValueAtIndex(t,{command:n,args:e?e.args:[]}),e||K(this.getInputElements(),function(e){return e.setValue(null)})}},{key:"getSelectElement",value:function(){return this.elements.filter(function(e){return e instanceof XT})[0]}},{key:"getInputElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getInputElements()[e]}},{key:"getInputElements",value:function(){return this.elements.filter(function(e){return e instanceof $T})}},{key:"getMenuItemDescriptor",value:function(){var e=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return e.isHidden()},renderer:function(t,n,o,i,a,r){zt(n.parentNode,"htFiltersMenuCondition"),e.addSeparator&&zt(n.parentNode,"border");var l=e.hot.rootDocument.createElement("div");return zt(l,"htFiltersMenuLabel"),l.textContent=r,n.appendChild(l),n.parentNode.hasAttribute("ghost-table")||K(e.elements,function(e){return n.appendChild(e.element)}),n}}}},{key:"reset",value:function(){var e,t=this.hot.getPlugin("filters").getSelectedColumn(),n=t&&t.visualIndex,o=function(e){var t=[],n=e;return DT[n]||(n=OT),K(DT[n],function(e){var n;n=e===Qy?{name:Qy}:de(HS(e)),t.push(n)}),t}((e=this.hot).getDataType.apply(e,ZT(this.hot.getSelectedLast()||[0,n])));K(this.getInputElements(),function(e){return e.hide()}),this.getSelectElement().setItems(o),nE(aE(a.prototype),"reset",this).call(this),this.getSelectElement().setValue(o[0])}},{key:"onConditionSelect",value:function(e){K(this.getInputElements(),function(t,n){t[e.inputsCount>n?"show":"hide"](),0===n&&setTimeout(function(){return t.focus()},10)}),this.runLocalHooks("change",e)}},{key:"onSelectUIClosed",value:function(){this.runLocalHooks("afterClose")}},{key:"onInputKeyDown",value:function(e){kr(e.keyCode,"ENTER")?(this.runLocalHooks("accept"),$i(e)):kr(e.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),$i(e))}}])&&tE(t.prototype,n),o&&tE(t,o),a}();function lE(e){"@babel/helpers - typeof";return(lE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sE(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function cE(e,t,n){return(cE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fE(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function uE(e,t){return(uE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=fE(e);if(t){var i=fE(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===lE(t)||"function"==typeof t))return t;return hE(e)}(this,n)}}function hE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fE(e){return(fE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pE,mE=new WeakMap,vE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uE(e,t)}(a,PT);var t,n,o,i=dE(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,se(a.DEFAULTS,t)),mE.set(hE(n),{}),n}return t=a,o=[{key:"DEFAULTS",get:function(){return de({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}}],(n=[{key:"build",value:function(){cE(fE(a.prototype),"build",this).call(this);var e=mE.get(this);e.input=this._element.firstChild;var t=this.hot.rootDocument.createElement("label");t.textContent=this.translateIfPossible(this.options.label.textContent),t.htmlFor=this.translateIfPossible(this.options.label.htmlFor),e.label=t,this._element.appendChild(t),this.update()}},{key:"update",value:function(){if(this.isBuilt()){var e=mE.get(this);e.input.checked=this.options.checked,e.label.textContent=this.translateIfPossible(this.options.label.textContent)}}},{key:"isChecked",value:function(){return this.options.checked}},{key:"setChecked",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.options.checked=e,this.update()}},{key:"focus",value:function(){this.isBuilt()&&mE.get(this).input.focus()}}])&&sE(t.prototype,n),o&&sE(t,o),a}();function bE(e){"@babel/helpers - typeof";return(bE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yE(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gE(e,t){return(gE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=_E(e);if(t){var i=_E(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===bE(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _E(e){return(_E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gE(e,t)}(a,VS);var t,n,o,i=wE(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,{id:t.id,stateless:!1})).name=t.name,n.buildOperatorsElement(),n}return t=a,(n=[{key:"getMenuItemDescriptor",value:function(){var e=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return e.isHidden()},renderer:function(t,n){return zt(n.parentNode,"htFiltersMenuOperators"),n.parentNode.hasAttribute("ghost-table")||K(e.elements,function(e){return n.appendChild(e.element)}),n}}}},{key:"buildOperatorsElement",value:function(){var e=this,t=["conjunction","disjunction"];K(t,function(n){var o,i=new vE(e.hot,{name:"operator",label:{htmlFor:n,textContent:(o=n,xT[o].name)},value:n,checked:n===t[0],id:n});i.addLocalHook("change",function(t){return e.onRadioInputChange(t)}),e.elements.push(i)})}},{key:"setChecked",value:function(e){if(this.elements.length<e)throw Error(Ze(pE||(t=["Radio button with index "," doesn't exist."],n||(n=t.slice(0)),pE=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))),e));var t,n;K(this.elements,function(t,n){t.setChecked(n===e)})}},{key:"getActiveOperationId",value:function(){var e=this.elements.find(function(e){return e instanceof vE&&e.isChecked()});return e?e.getValue():"conjunction"}},{key:"getState",value:function(){return this.getActiveOperationId()}},{key:"setState",value:function(e){this.reset(),e&&this.getActiveOperationId()!==e&&K(this.elements,function(t){t.setChecked(t.getValue()===e)})}},{key:"updateState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"conjunction",t=arguments.length>1?arguments[1]:void 0,n=e;"disjunctionWithExtraCondition"===n&&(n="disjunction"),this.state.setValueAtIndex(t,n)}},{key:"reset",value:function(){this.setChecked(0)}},{key:"onRadioInputChange",value:function(e){this.setState(e.target.value)}}])&&yE(t.prototype,n),o&&yE(t,o),a}();n("XBj/");function kE(e){"@babel/helpers - typeof";return(kE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xE(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function SE(e,t,n){return(SE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DE(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function TE(e,t){return(TE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=DE(e);if(t){var i=DE(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===kE(t)||"function"==typeof t))return t;return OE(e)}(this,n)}}function OE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DE(e){return(DE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var IE=new WeakMap,RE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TE(e,t)}(a,PT);var t,n,o,i=EE(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,se(a.DEFAULTS,t)),IE.set(OE(n),{}),n}return t=a,o=[{key:"DEFAULTS",get:function(){return de({href:"#",tagName:"a"})}}],(n=[{key:"build",value:function(){SE(DE(a.prototype),"build",this).call(this),IE.get(this).link=this._element.firstChild}},{key:"update",value:function(){this.isBuilt()&&(IE.get(this).link.textContent=this.translateIfPossible(this.options.textContent))}}])&&xE(t.prototype,n),o&&xE(t,o),a}();function ME(e){"@babel/helpers - typeof";return(ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PE(e){return function(e){if(Array.isArray(e))return AE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return AE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AE(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function LE(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function NE(e,t,n){return(NE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HE(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function VE(e,t){return(VE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=HE(e);if(t){var i=HE(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===ME(t)||"function"==typeof t))return t;return BE(e)}(this,n)}}function BE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HE(e){return(HE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jE=new WeakMap,$E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VE(e,t)}(a,PT);var t,n,o,i=FE(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,se(a.DEFAULTS,t)),jE.set(BE(n),{}),n.searchInput=new $T(n.hot,{placeholder:ch,className:"htUIMultipleSelectSearch"}),n.selectAllUI=new RE(n.hot,{textContent:ah,className:"htUISelectAll"}),n.clearAllUI=new RE(n.hot,{textContent:rh,className:"htUIClearAll"}),n.items=[],n.itemsBox=null,n.registerHooks(),n}return t=a,o=[{key:"DEFAULTS",get:function(){return de({className:"htUIMultipleSelect",value:[]})}}],(n=[{key:"registerHooks",value:function(){var e=this;this.searchInput.addLocalHook("keydown",function(t){return e.onInputKeyDown(t)}),this.searchInput.addLocalHook("input",function(t){return e.onInput(t)}),this.selectAllUI.addLocalHook("click",function(t){return e.onSelectAllClick(t)}),this.clearAllUI.addLocalHook("click",function(t){return e.onClearAllClick(t)})}},{key:"setItems",value:function(e){this.items=e,this.itemsBox&&this.itemsBox.loadData(this.items)}},{key:"getItems",value:function(){return PE(this.items)}},{key:"getValue",value:function(){return e=this.items,t=[],K(e,function(e){e.checked&&t.push(e.value)}),t;var e,t}},{key:"isSelectedAllValues",value:function(){return this.items.length===this.getValue().length}},{key:"build",value:function(){var e=this;NE(HE(a.prototype),"build",this).call(this);var t=this.hot.rootDocument,n=t.createElement("div"),o=new PT(this.hot,{className:"htUISelectionControls",children:[this.selectAllUI,this.clearAllUI]});this._element.appendChild(this.searchInput.element),this._element.appendChild(o.element),this._element.appendChild(n);var i=function(n){e._element&&(e.itemsBox&&e.itemsBox.destroy(),zt(n,"htUIMultipleSelectHot"),e.itemsBox=new e.hot.constructor(n,{data:e.items,columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:function(e,t,n,o,i,a){e.title=a.instance.getDataAtRowProp(t,a.label.property)},maxCols:1,autoWrapCol:!0,height:110,colWidths:function(){return e.itemsBox.container.scrollWidth-_n(t)},copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},beforeKeyDown:function(t){return e.onItemsBoxBeforeKeyDown(t)}}),e.itemsBox.init())};i(n),setTimeout(function(){return i(n)},100)}},{key:"reset",value:function(){this.searchInput.reset(),this.selectAllUI.reset(),this.clearAllUI.reset()}},{key:"update",value:function(){var e,t,n;this.isBuilt()&&(this.itemsBox.loadData((e=this.items,t=this.options.value,n=yT(t),q(e,function(e){return e.checked=n(e.value),e}))),NE(HE(a.prototype),"update",this).call(this))}},{key:"destroy",value:function(){this.itemsBox&&this.itemsBox.destroy(),this.searchInput.destroy(),this.clearAllUI.destroy(),this.selectAllUI.destroy(),this.searchInput=null,this.clearAllUI=null,this.selectAllUI=null,this.itemsBox=null,this.items=null,NE(HE(a.prototype),"destroy",this).call(this)}},{key:"onInput",value:function(e){var t,n=e.target.value.toLowerCase();t=""===n?PE(this.items):W(this.items,function(e){return"".concat(e.value).toLowerCase().indexOf(n)>=0}),this.itemsBox.loadData(t)}},{key:"onInputKeyDown",value:function(e){this.runLocalHooks("keydown",e,this),Nn(kr,e.keyCode)("ARROW_DOWN|TAB")&&!this.itemsBox.isListening()&&($i(e),this.itemsBox.listen(),this.itemsBox.selectCell(0,0))}},{key:"onItemsBoxBeforeKeyDown",value:function(e){var t=Nn(kr,e.keyCode);t("ESCAPE")&&this.runLocalHooks("keydown",e,this),t("ARROW_UP|ARROW_DOWN|ARROW_LEFT|ARROW_RIGHT|TAB|SPACE|ENTER")||($i(e),this.itemsBox.unlisten(),this.itemsBox.deselectCell(),this.searchInput.focus())}},{key:"onSelectAllClick",value:function(e){var t=[];e.preventDefault(),K(this.itemsBox.getSourceData(),function(e,n){e.checked=!0,t.push(ic(e,n)[0])}),this.itemsBox.setSourceDataAtCell(t)}},{key:"onClearAllClick",value:function(e){var t=[];e.preventDefault(),K(this.itemsBox.getSourceData(),function(e,n){e.checked=!1,t.push(ic(e,n)[0])}),this.itemsBox.setSourceDataAtCell(t)}}])&&LE(t.prototype,n),o&&LE(t,o),a}();function UE(e){"@babel/helpers - typeof";return(UE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return WE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function qE(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function KE(e,t,n){return(KE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YE(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function GE(e,t){return(GE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=YE(e);if(t){var i=YE(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===UE(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function YE(e){return(YE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var XE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GE(e,t)}(a,VS);var t,n,o,i=JE(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,{id:t.id,stateless:!1})).name=t.name,n.elements.push(new $E(n.hot)),n.registerHooks(),n}return t=a,(n=[{key:"registerHooks",value:function(){var e=this;this.getMultipleSelectElement().addLocalHook("keydown",function(t){return e.onInputKeyDown(t)})}},{key:"setState",value:function(e){if(this.reset(),e&&"by_value"===e.command.key){var t=this.getMultipleSelectElement();t.setItems(e.itemsSnapshot),t.setValue(e.args[0])}}},{key:"getState",value:function(){var e=this.getMultipleSelectElement(),t=e.getItems();return{command:{key:e.isSelectedAllValues()||!t.length?"none":"by_value"},args:[e.getValue()],itemsSnapshot:t}}},{key:"updateState",value:function(e){var t=this,n=function(e,n,o,i,a){var r=zE(W(n,function(e){return"by_value"===e.name}),1)[0],l={},s=t.hot.getTranslatedPhrase(ih);if(r){var c=wT(q(i(e,a),function(e){return e.value}));o&&(r.args[0]=o);var u=[],d=_T(c,r.args[0],s,function(e){e.checked&&u.push(e.value)});l.args=[u],l.command=HS("by_value"),l.itemsSnapshot=d}else l.args=[],l.command=HS("none");t.state.setValueAtIndex(e,l)};n(e.editedConditionStack.column,e.editedConditionStack.conditions,e.conditionArgsChange,e.filteredRowsFactory),e.dependentConditionStacks.length&&n(e.dependentConditionStacks[0].column,e.dependentConditionStacks[0].conditions,e.conditionArgsChange,e.filteredRowsFactory,e.editedConditionStack)}},{key:"getMultipleSelectElement",value:function(){return this.elements.filter(function(e){return e instanceof $E})[0]}},{key:"getMenuItemDescriptor",value:function(){var e=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return e.isHidden()},renderer:function(t,n,o,i,a,r){zt(n.parentNode,"htFiltersMenuValue");var l=e.hot.rootDocument.createElement("div");return zt(l,"htFiltersMenuLabel"),l.textContent=r,n.appendChild(l),n.parentNode.hasAttribute("ghost-table")||K(e.elements,function(e){return n.appendChild(e.element)}),n}}}},{key:"reset",value:function(){var e=this.hot.getTranslatedPhrase(ih),t=wT(this._getColumnVisibleValues()),n=_T(t,t,e);this.getMultipleSelectElement().setItems(n),KE(YE(a.prototype),"reset",this).call(this),this.getMultipleSelectElement().setValue(t)}},{key:"onInputKeyDown",value:function(e){kr(e.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),$i(e))}},{key:"_getColumnVisibleValues",value:function(){var e=this.hot.getPlugin("filters").getSelectedColumn(),t=e&&e.visualIndex;return q(this.hot.getDataAtCol(t),function(e){return gT(e)})}}])&&qE(t.prototype,n),o&&qE(t,o),a}();function QE(e){"@babel/helpers - typeof";return(QE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZE(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function eO(e,t){return(eO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=nO(e);if(t){var i=nO(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===QE(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nO(e){return(nO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oO,iO,aO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eO(e,t)}(a,VS);var t,n,o,i=tO(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,{id:t.id,stateless:!0})).name=t.name,n.elements.push(new $T(n.hot,{type:"button",value:lh,className:"htUIButton htUIButtonOK",identifier:a.BUTTON_OK})),n.elements.push(new $T(n.hot,{type:"button",value:sh,className:"htUIButton htUIButtonCancel",identifier:a.BUTTON_CANCEL})),n.registerHooks(),n}return t=a,o=[{key:"BUTTON_OK",get:function(){return"ok"}},{key:"BUTTON_CANCEL",get:function(){return"cancel"}}],(n=[{key:"registerHooks",value:function(){var e=this;K(this.elements,function(t){t.addLocalHook("click",function(t,n){return e.onButtonClick(t,n)})})}},{key:"getMenuItemDescriptor",value:function(){var e=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return e.isHidden()},renderer:function(t,n){return zt(n.parentNode,"htFiltersMenuActionBar"),n.parentNode.hasAttribute("ghost-table")||K(e.elements,function(e){return n.appendChild(e.element)}),n}}}},{key:"accept",value:function(){this.runLocalHooks("accept")}},{key:"cancel",value:function(){this.runLocalHooks("cancel")}},{key:"onButtonClick",value:function(e,t){t.options.identifier===a.BUTTON_OK?this.accept():this.cancel()}}])&&ZE(t.prototype,n),o&&ZE(t,o),a}();function rO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function sO(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function cO(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var uO="ConditionCollection.filteringStates",dO=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.isMapRegistrable=n,this.filteringStates=new zc,!0===this.isMapRegistrable?this.hot.columnIndexMapper.registerMap(uO,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}var t,n,o;return t=e,(n=[{key:"isEmpty",value:function(){return 0===this.getFilteredColumns().length}},{key:"isMatch",value:function(e,t){var n,o=this.filteringStates.getValueAtIndex(t),i=null!==(n=null===o||void 0===o?void 0:o.conditions)&&void 0!==n?n:[],a=null===o||void 0===o?void 0:o.operation;return this.isMatchInConditions(i,e,a)}},{key:"isMatchInConditions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"conjunction";return!e.length||function(e){if(!xT[e])throw Error('Operation with id "'.concat(e,'" does not exist.'));var t=xT[e].func;return function(e,n){return t(e,n)}}(n)(e,t)}},{key:"addCondition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"conjunction",o=arguments.length>3?arguments[3]:void 0,i=q(t.args,function(e){return"string"==typeof e?e.toLowerCase():e}),a=t.name||t.command.key;this.runLocalHooks("beforeAdd",e);var r=this.getOperation(e);if(r){if(r!==n)throw Error(Ze(oO||(oO=sO(["The column of index "," has been already applied with a `","` \n        filter operation. Use `removeConditions` to clear the current conditions and then add new ones. \n        Mind that you cannot mix different types of operations (for instance, if you use `conjunction`, \n        use it consequently for a particular column)."],["The column of index "," has been already applied with a \\`","\\`\\x20\n        filter operation. Use \\`removeConditions\\` to clear the current conditions and then add new ones.\\x20\n        Mind that you cannot mix different types of operations (for instance, if you use \\`conjunction\\`,\\x20\n        use it consequently for a particular column)."])),e,r))}else if(it(xT[n]))throw new Error(Ze(iO||(iO=sO(["Unexpected operation named `","`. Possible ones are \n        `disjunction` and `conjunction`."],["Unexpected operation named \\`","\\`. Possible ones are\\x20\n        \\`disjunction\\` and \\`conjunction\\`."])),n));var l=this.getConditions(e);0===l.length?this.filteringStates.setValueAtIndex(e,{operation:n,conditions:[{name:a,args:i,func:BS(a,i)}]},o):l.push({name:a,args:i,func:BS(a,i)}),this.runLocalHooks("afterAdd",e)}},{key:"getConditions",value:function(e){var t,n;return null!==(t=null===(n=this.filteringStates.getValueAtIndex(e))||void 0===n?void 0:n.conditions)&&void 0!==t?t:[]}},{key:"getOperation",value:function(e){var t;return null===(t=this.filteringStates.getValueAtIndex(e))||void 0===t?void 0:t.operation}},{key:"getFilteredColumns",value:function(){return this.filteringStates.getEntries().map(function(e){return rO(e,1)[0]})}},{key:"getColumnStackPosition",value:function(e){return this.getFilteredColumns().indexOf(e)}},{key:"exportAllConditions",value:function(){return z(this.filteringStates.getEntries(),function(e,t){var n=rO(t,2),o=n[0],i=n[1],a=i.operation,r=i.conditions;return e.push({column:o,operation:a,conditions:q(r,function(e){return{name:e.name,args:e.args}})}),e},[])}},{key:"importAllConditions",value:function(e){var t=this;this.clean(),K(e,function(e){K(e.conditions,function(n){return t.addCondition(e.column,n)})})}},{key:"removeConditions",value:function(e){this.runLocalHooks("beforeRemove",e),this.filteringStates.clearValue(e),this.runLocalHooks("afterRemove",e)}},{key:"clean",value:function(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}},{key:"hasConditions",value:function(e,t){var n=this.getConditions(e);return t?n.some(function(e){return e.name===t}):n.length>0}},{key:"destroy",value:function(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(uO),this.filteringStates=null,this.clearLocalHooks()}}])&&cO(t.prototype,n),o&&cO(t,o),e}();he(dO,cc);var hO=dO;function fO(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var pO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return[]};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conditionCollection=t,this.columnDataFactory=n}var t,n,o;return t=e,(n=[{key:"filter",value:function(){var e=this,t=[];return K(this.conditionCollection.getFilteredColumns(),function(n,o){var i=e.columnDataFactory(n);o&&(i=e._getIntersectData(i,t)),t=e.filterByColumn(n,i)}),t}},{key:"filterByColumn",value:function(e){var t=this,n=[];return K(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],function(o){void 0!==o&&t.conditionCollection.isMatch(o,e)&&n.push(o)}),n}},{key:"_getIntersectData",value:function(e,t){var n=[];return K(t,function(t){var o=t.meta.visualRow;void 0!==e[o]&&(n[o]=e[o])}),n}}])&&fO(t.prototype,n),o&&fO(t,o),e}();function mO(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var vO=function(){function e(t,n){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return[]};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.conditionCollection=n,this.columnDataFactory=i,this.changes=[],this.grouping=!1,this.latestEditedColumnPosition=-1,this.latestOrderStack=[],this.conditionCollection.addLocalHook("beforeRemove",function(e){return o._onConditionBeforeModify(e)}),this.conditionCollection.addLocalHook("afterRemove",function(e){return o.updateStatesAtColumn(e)}),this.conditionCollection.addLocalHook("afterAdd",function(e){return o.updateStatesAtColumn(e)}),this.conditionCollection.addLocalHook("beforeClean",function(){return o._onConditionBeforeClean()}),this.conditionCollection.addLocalHook("afterClean",function(){return o._onConditionAfterClean()})}var t,n,o;return t=e,(n=[{key:"groupChanges",value:function(){this.grouping=!0}},{key:"flush",value:function(){var e=this;this.grouping=!1,K(this.changes,function(t){e.updateStatesAtColumn(t)}),this.changes.length=0}},{key:"_onConditionBeforeModify",value:function(e){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(e)}},{key:"updateStatesAtColumn",value:function(e,t){var n=this;if(this.grouping)-1===this.changes.indexOf(e)&&this.changes.push(e);else{var o=this.conditionCollection.exportAllConditions(),i=this.conditionCollection.getColumnStackPosition(e);-1===i&&(i=this.latestEditedColumnPosition);var a=o.slice(0,i),r=o.slice(i);r.length&&r[0].column===e&&r.shift();var l=Vn(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=new hO(n.hot,!1),a=[].concat(e,o);i.importAllConditions(a);var r=n.columnDataFactory(t),l=yT(q(i.isEmpty()?r:new pO(i,function(e){return n.columnDataFactory(e)}).filter(),function(e){return e.meta.visualRow}));return i.destroy(),W(r,function(e){return l(e.meta.visualRow)})})(a),s=[].concat(this.conditionCollection.getConditions(e));this.runLocalHooks("update",{editedConditionStack:{column:e,conditions:s},dependentConditionStacks:r,filteredRowsFactory:l,conditionArgsChange:t})}}},{key:"_onConditionBeforeClean",value:function(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}},{key:"_onConditionAfterClean",value:function(){var e=this;K(this.latestOrderStack,function(t){e.updateStatesAtColumn(t)})}},{key:"destroy",value:function(){var e=this;this.clearLocalHooks(),ve(this,function(t,n){e[n]=null})}}])&&mO(t.prototype,n),o&&mO(t,o),e}();he(vO,cc);var bO,yO=vO;function gO(e){"@babel/helpers - typeof";return(gO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function CO(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function kO(e,t,n){return(kO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EO(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function xO(e,t){return(xO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=EO(e);if(t){var i=EO(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===gO(t)||"function"==typeof t))return t;return TO(e)}(this,n)}}function TO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EO(e){return(EO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var OO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xO(e,t)}(a,Wv);var t,n,o,i=SO(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).eventManager=new Gi(TO(t)),t.dropdownMenuPlugin=null,t.conditionCollection=null,t.conditionUpdateObserver=null,t.components=new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]]),t.lastSelectedColumn=null,t.filtersRowsMap=null,t.hot.addHook("afterGetColHeader",function(e,n){return t.onAfterGetColHeader(e,n)}),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"filters"}},{key:"PLUGIN_PRIORITY",get:function(){return 250}},{key:"PLUGIN_DEPS",get:function(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().filters}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new Yc),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");var t=this.hot.getSettings().dropdownMenu,n=t&&t.uiContainer||this.hot.rootDocument.body,o=function(t){return t.addLocalHook("accept",function(){return e.onActionBarSubmit("accept")}),t.addLocalHook("cancel",function(){return e.onActionBarSubmit("cancel")}),t.addLocalHook("change",function(n){return e.onComponentChange(t,n)}),t};if(!this.components.get("filter_by_condition")){var i=new rE(this.hot,{id:"filter_by_condition",name:function(){return"".concat(e.hot.getTranslatedPhrase(eh),":")},addSeparator:!1,menuContainer:n});i.addLocalHook("afterClose",function(){return e.onSelectUIClosed()}),this.components.set("filter_by_condition",o(i))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new CE(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){var r=new rE(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:n});r.addLocalHook("afterClose",function(){return e.onSelectUIClosed()}),this.components.set("filter_by_condition2",o(r))}this.components.get("filter_by_value")||this.components.set("filter_by_value",o(new XE(this.hot,{id:"filter_by_value",name:function(){return"".concat(e.hot.getTranslatedPhrase(th),":")}}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",o(new aO(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new hO(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new yO(this.hot,this.conditionCollection,function(t){return e.getDataMapAtColumn(t)}),this.conditionUpdateObserver.addLocalHook("update",function(t){return e.updateComponents(t)})),this.components.forEach(function(e){return e.show()}),this.registerEvents(),this.addHook("beforeDropdownMenuSetItems",function(t){return e.onBeforeDropdownMenuSetItems(t)}),this.addHook("afterDropdownMenuDefaultOptions",function(t){return e.onAfterDropdownMenuDefaultOptions(t)}),this.addHook("afterDropdownMenuShow",function(){return e.onAfterDropdownMenuShow()}),this.addHook("afterDropdownMenuHide",function(){return e.onAfterDropdownMenuHide()}),this.addHook("afterChange",function(t){return e.onAfterChange(t)}),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),kO(EO(a.prototype),"enablePlugin",this).call(this)}}},{key:"registerEvents",value:function(){var e=this;this.eventManager.addEventListener(this.hot.rootElement,"click",function(t){return e.onTableClick(t)})}},{key:"disablePlugin",value:function(){var e,t=this;this.enabled&&(null!==(e=this.dropdownMenuPlugin)&&void 0!==e&&e.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach(function(e,n){e.destroy(),t.components.set(n,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName));kO(EO(a.prototype),"disablePlugin",this).call(this)}},{key:"addCondition",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"conjunction",i=this.hot.toPhysicalColumn(e);this.conditionCollection.addCondition(i,{command:{key:t},args:n},o)}},{key:"removeConditions",value:function(e){var t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}},{key:"clearConditions",value:function(e){if(void 0===e)this.conditionCollection.clean();else{var t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}}},{key:"filter",value:function(){var e=this,t=this._createDataFilter(),n=!this.conditionCollection.isEmpty(),o=[],i=this.conditionCollection.exportAllConditions();if(!1!==this.hot.runHooks("beforeFilter",i))if(n){var a=[];this.hot.batchExecution(function(){e.filtersRowsMap.clear();var n=yT(o=q(t.filter(),function(e){return e.meta.visualRow}));Nl(e.hot.countSourceRows()-1,function(e){n(e)||a.push(e)}),K(a,function(t){e.filtersRowsMap.setValueAtIndex(t,!0)})},!0),o.length||this.hot.deselectCell()}else this.filtersRowsMap.clear();this.hot.runHooks("afterFilter",i),this.hot.view.adjustElementsSize(!0),this.hot.render(),this.clearColumnSelection()}},{key:"getSelectedColumn",value:function(){return this.lastSelectedColumn}},{key:"clearColumnSelection",value:function(){var e,t=null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.getTopLeftCorner();void 0!==t&&this.hot.selectCell(t.row,t.col)}},{key:"getDataMapAtColumn",value:function(e){var t=this,n=this.hot.toVisualColumn(e),o=[];return K(this.hot.getSourceDataAtCol(n),function(e,i){var a=t.hot.getCellMeta(i,n),r=a.row,l=a.col,s=a.visualCol,c=a.visualRow,u=a.type,d=a.instance,h=a.dateFormat;o.push({meta:{row:r,col:l,visualCol:s,visualRow:c,type:u,instance:d,dateFormat:h},value:gT(e)})}),o}},{key:"onAfterChange",value:function(e){var t=this;e&&K(e,function(e){var n=wO(e,2)[1],o=t.hot.propToCol(n);t.conditionCollection.hasConditions(o)&&t.updateValueComponentCondition(o)})}},{key:"updateValueComponentCondition",value:function(e){var t=wT(this.hot.getDataAtCol(e));this.conditionUpdateObserver.updateStatesAtColumn(e,t)}},{key:"restoreComponents",value:function(e){var t,n=null===(t=this.getSelectedColumn())||void 0===t?void 0:t.physicalIndex;e.forEach(function(e){e.isHidden()||e.restoreState(n)}),this.updateDependentComponentsVisibility()}},{key:"onAfterDropdownMenuShow",value:function(){this.restoreComponents(Array.from(this.components.values()))}},{key:"onAfterDropdownMenuHide",value:function(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}},{key:"onBeforeDropdownMenuSetItems",value:function(){var e=this;this.dropdownMenuPlugin&&this.dropdownMenuPlugin.menu.addLocalHook("afterOpen",function(){e.dropdownMenuPlugin.menu.hotMenu.updateSettings({hiddenRows:!0})})}},{key:"onAfterDropdownMenuDefaultOptions",value:function(e){e.items.push({name:Qy}),this.components.forEach(function(t){e.items.push(t.getMenuItemDescriptor())})}},{key:"getOperationBasedOnArguments",value:function(e,t,n,o){var i=e;return"disjunction"===i&&"none"!==t.command.key&&"none"!==n.command.key&&"none"!==o.command.key?i="disjunctionWithExtraCondition":"none"!==o.command.key&&("none"!==t.command.key&&"none"!==n.command.key||(i="conjunction")),i}},{key:"onActionBarSubmit",value:function(e){if("accept"===e){var t,n=null===(t=this.getSelectedColumn())||void 0===t?void 0:t.physicalIndex,o=this.components.get("filter_by_condition").getState(),i=this.components.get("filter_by_condition2").getState(),a=this.components.get("filter_by_value").getState(),r=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),o,i,a);this.conditionUpdateObserver.groupChanges();var l=this.conditionCollection.getColumnStackPosition(n);-1===l&&(l=void 0),this.conditionCollection.removeConditions(n),"none"!==o.command.key&&(this.conditionCollection.addCondition(n,o,r,l),"none"!==i.command.key&&this.conditionCollection.addCondition(n,i,r,l)),"none"!==a.command.key&&this.conditionCollection.addCondition(n,a,r,l),this.conditionUpdateObserver.flush(),this.components.forEach(function(e){return e.saveState(n)}),this.filtersRowsMap.clear(),this.filter()}this.dropdownMenuPlugin&&this.dropdownMenuPlugin.close()}},{key:"onComponentChange",value:function(e,t){this.updateDependentComponentsVisibility(),e.constructor!==rE||t.inputsCount||this.setListeningDropdownMenu()}},{key:"onSelectUIClosed",value:function(){this.setListeningDropdownMenu()}},{key:"setListeningDropdownMenu",value:function(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}},{key:"updateDependentComponentsVisibility",value:function(){var e=this.components.get("filter_by_condition").getState().command,t=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];e.showOperators?this.showComponents.apply(this,t):this.hideComponents.apply(this,t)}},{key:"onAfterGetColHeader",value:function(e,t){var n=this.hot.toPhysicalColumn(e);this.enabled&&this.conditionCollection.hasConditions(n)?zt(t,"htFiltersActive"):Wt(t,"htFiltersActive")}},{key:"onTableClick",value:function(e){var t=Lt(e.target,"TH");if(t){var n=this.hot.getCoords(t).col,o=this.hot.toPhysicalColumn(n);this.lastSelectedColumn={visualIndex:n,physicalIndex:o}}}},{key:"_createDataFilter",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.conditionCollection;return new pO(t,function(t){return e.getDataMapAtColumn(t)})}},{key:"updateComponents",value:function(e){var t;if(null!==(t=this.dropdownMenuPlugin)&&void 0!==t&&t.enabled){var n,o,i=e.editedConditionStack,a=i.conditions,r=i.column,l=a.filter(function(e){return"by_value"===e.name}),s=a.filter(function(e){return"by_value"!==e.name});if(l.length>=2||s.length>=3)No(Ze(bO||(n=["The filter conditions have been applied properly, but couldn’t be displayed visually. \n        The overall amount of conditions exceed the capability of the dropdown menu. \n        For more details see the documentation."],(o=["The filter conditions have been applied properly, but couldn’t be displayed visually.\\x20\n        The overall amount of conditions exceed the capability of the dropdown menu.\\x20\n        For more details see the documentation."])||(o=n.slice(0)),bO=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(o)}})))));else{var c=this.conditionCollection.getOperation(r);this.components.get("filter_by_condition").updateState(s[0],r),this.components.get("filter_by_condition2").updateState(s[1],r),this.components.get("filter_operators").updateState(c,r),this.components.get("filter_by_value").updateState(e)}}}},{key:"getIndexesOfComponents",value:function(){var e=[];if(!this.dropdownMenuPlugin)return e;for(var t=this.dropdownMenuPlugin.menu,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return K(o,function(n){K(t.menuItems,function(t,o){t.key===n.getMenuItemDescriptor().key&&e.push(o)})}),e}},{key:"changeComponentsVisibility",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.dropdownMenuPlugin){for(var t=this.dropdownMenuPlugin.menu.hotMenu,n=t.getPlugin("hiddenRows"),o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var r=this.getIndexesOfComponents.apply(this,i);e?n.showRows(r):n.hideRows(r),t.render()}}},{key:"hideComponents",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.changeComponentsVisibility.apply(this,[!1].concat(t))}},{key:"showComponents",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.changeComponentsVisibility.apply(this,[!0].concat(t))}},{key:"destroy",value:function(){var e=this;this.enabled&&(this.components.forEach(function(t,n){null!==t&&(t.destroy(),e.components.set(n,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),kO(EO(a.prototype),"destroy",this).call(this)}}])&&CO(t.prototype,n),o&&CO(t,o),a}();function DO(e){return"string"==typeof e&&e.length>=2&&"="===e.charAt(0)}function IO(e){return"string"==typeof e&&"'"===e.charAt(0)&&"="===e.charAt(1)}function RO(e){var t=/(\\"|"(?:\\"|[^"])*"|(\+))|(\\'|'(?:\\'|[^'])*'|(\+))/g,n=e.match(t)||[],o=-1;return e.toUpperCase().replace(t,function(){return n[o+=1]})}function MO(e,t){return function(n){return{row:"row"===e?t:n.row,column:"column"===e?t:n.column}}}var PO,AO=n("WreF"),LO=n.n(AO);function NO(e){var t;return"number"==typeof e?t=e:"string"==typeof e&&(t=e.indexOf(".")>-1?parseFloat(e):parseInt(e,10)),t}function VO(e){return-1*NO(e)}function FO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var BO="DIV/0",HO="NAME",jO="VALUE",$O=(FO(PO={},"ERROR","#ERROR!"),FO(PO,BO,"#DIV/0!"),FO(PO,HO,"#NAME?"),FO(PO,"N/A","#N/A"),FO(PO,"NULL","#NULL!"),FO(PO,"NUM","#NUM!"),FO(PO,"REF","#REF!"),FO(PO,jO,"#VALUE!"),PO);function UO(e){var t;return e=(e+"").replace(/#|!|\?/g,""),$O[e]&&(t=$O[e]),t||null}function zO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=n.reduce(function(e,t){return e+NO(t)},NO(e));if(isNaN(i))throw Error(jO);return i}zO.SYMBOL="+";function WO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e+t.toString()},"")}WO.SYMBOL="&";function qO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=n.reduce(function(e,t){return e/NO(t)},NO(e));if(i===1/0)throw Error(BO);if(isNaN(i))throw Error(jO);return i}qO.SYMBOL="/";function KO(e,t){return e===t}KO.SYMBOL="=";var GO=n("HYEz"),JO=n.n(GO),YO=["ABS","ACCRINT","ACOS","ACOSH","ACOT","ACOTH","ADD","AGGREGATE","AND","ARABIC","ARGS2ARRAY","ASIN","ASINH","ATAN","ATAN2","ATANH","AVEDEV","AVERAGE","AVERAGEA","AVERAGEIF","AVERAGEIFS","BASE","BESSELI","BESSELJ","BESSELK","BESSELY","BETA.DIST","BETA.INV","BETADIST","BETAINV","BIN2DEC","BIN2HEX","BIN2OCT","BINOM.DIST","BINOM.DIST.RANGE","BINOM.INV","BINOMDIST","BITAND","BITLSHIFT","BITOR","BITRSHIFT","BITXOR","CEILING","CEILINGMATH","CEILINGPRECISE","CHAR","CHISQ.DIST","CHISQ.DIST.RT","CHISQ.INV","CHISQ.INV.RT","CHOOSE","CHOOSE","CLEAN","CODE","COLUMN","COLUMNS","COMBIN","COMBINA","COMPLEX","CONCATENATE","CONFIDENCE","CONFIDENCE.NORM","CONFIDENCE.T","CONVERT","CORREL","COS","COSH","COT","COTH","COUNT","COUNTA","COUNTBLANK","COUNTIF","COUNTIFS","COUNTIN","COUNTUNIQUE","COVARIANCE.P","COVARIANCE.S","CSC","CSCH","CUMIPMT","CUMPRINC","DATE","DATEVALUE","DAY","DAYS","DAYS360","DB","DDB","DEC2BIN","DEC2HEX","DEC2OCT","DECIMAL","DEGREES","DELTA","DEVSQ","DIVIDE","DOLLARDE","DOLLARFR","E","EDATE","EFFECT","EOMONTH","EQ","ERF","ERFC","EVEN","EXACT","EXP","EXPON.DIST","EXPONDIST","F.DIST","F.DIST.RT","F.INV","F.INV.RT","FACT","FACTDOUBLE","FALSE","FDIST","FDISTRT","FIND","FINV","FINVRT","FISHER","FISHERINV","FLATTEN","FLOOR","FORECAST","FREQUENCY","FV","FVSCHEDULE","GAMMA","GAMMA.DIST","GAMMA.INV","GAMMADIST","GAMMAINV","GAMMALN","GAMMALN.PRECISE","GAUSS","GCD","GEOMEAN","GESTEP","GROWTH","GTE","HARMEAN","HEX2BIN","HEX2DEC","HEX2OCT","HOUR","HTML2TEXT","HYPGEOM.DIST","HYPGEOMDIST","IF","IMABS","IMAGINARY","IMARGUMENT","IMCONJUGATE","IMCOS","IMCOSH","IMCOT","IMCSC","IMCSCH","IMDIV","IMEXP","IMLN","IMLOG10","IMLOG2","IMPOWER","IMPRODUCT","IMREAL","IMSEC","IMSECH","IMSIN","IMSINH","IMSQRT","IMSUB","IMSUM","IMTAN","INT","INTERCEPT","INTERVAL","IPMT","IRR","ISBINARY","ISBLANK","ISEVEN","ISLOGICAL","ISNONTEXT","ISNUMBER","ISODD","ISODD","ISOWEEKNUM","ISPMT","ISTEXT","JOIN","KURT","LARGE","LCM","LEFT","LEN","LINEST","LN","LOG","LOG10","LOGEST","LOGNORM.DIST","LOGNORM.INV","LOGNORMDIST","LOGNORMINV","LOWER","LT","LTE","MATCH","MAX","MAXA","MEDIAN","MID","MIN","MINA","MINUS","MINUTE","MIRR","MOD","MODE.MULT","MODE.SNGL","MODEMULT","MODESNGL","MONTH","MROUND","MULTINOMIAL","MULTIPLY","NE","NEGBINOM.DIST","NEGBINOMDIST","NETWORKDAYS","NOMINAL","NORM.DIST","NORM.INV","NORM.S.DIST","NORM.S.INV","NORMDIST","NORMINV","NORMSDIST","NORMSINV","NOT","NOW","NPER","NPV","NUMBERS","OCT2BIN","OCT2DEC","OCT2HEX","ODD","OR","PDURATION","PEARSON","PERCENTILEEXC","PERCENTILEINC","PERCENTRANKEXC","PERCENTRANKINC","PERMUT","PERMUTATIONA","PHI","PI","PMT","POISSON.DIST","POISSONDIST","POW","POWER","PPMT","PROB","PRODUCT","PROPER","PV","QUARTILE.EXC","QUARTILE.INC","QUARTILEEXC","QUARTILEINC","QUOTIENT","RADIANS","RAND","RANDBETWEEN","RANK.AVG","RANK.EQ","RANKAVG","RANKEQ","RATE","REFERENCE","REGEXEXTRACT","REGEXMATCH","REGEXREPLACE","REPLACE","REPT","RIGHT","ROMAN","ROUND","ROUNDDOWN","ROUNDUP","ROW","ROWS","RRI","RSQ","SEARCH","SEC","SECH","SECOND","SERIESSUM","SIGN","SIN","SINH","SKEW","SKEW.P","SKEWP","SLN","SLOPE","SMALL","SPLIT","SPLIT","SQRT","SQRTPI","STANDARDIZE","STDEV.P","STDEV.S","STDEVA","STDEVP","STDEVPA","STDEVS","STEYX","SUBSTITUTE","SUBTOTAL","SUM","SUMIF","SUMIFS","SUMPRODUCT","SUMSQ","SUMX2MY2","SUMX2PY2","SUMXMY2","SWITCH","SYD","T","T.DIST","T.DIST.2T","T.DIST.RT","T.INV","T.INV.2T","TAN","TANH","TBILLEQ","TBILLPRICE","TBILLYIELD","TDIST","TDIST2T","TDISTRT","TIME","TIMEVALUE","TINV","TINV2T","TODAY","TRANSPOSE","TREND","TRIM","TRIMMEAN","TRUE","TRUNC","UNICHAR","UNICODE","UNIQUE","UPPER","VAR.P","VAR.S","VARA","VARP","VARPA","VARS","WEEKDAY","WEEKNUM","WEIBULL.DIST","WEIBULLDIST","WORKDAY","XIRR","XNPV","XOR","YEAR","YEARFRAC"];function XO(e){return function(){var t,n=(e=e.toUpperCase()).split("."),o=!1;if(1===n.length)JO.a[n[0]]&&(o=!0,t=JO.a[n[0]].apply(JO.a,arguments));else{for(var i=n.length,a=0,r=JO.a;a<i;)if(r=r[n[a]],a++,!r){r=null;break}r&&(o=!0,t=r.apply(void 0,arguments))}if(!o)throw Error(HO);return t}}XO.isFactory=!0,XO.SYMBOL=YO;function QO(e,t){return e>t}QO.SYMBOL=">";function ZO(e,t){return e>=t}ZO.SYMBOL=">=";function eD(e,t){return e<t}eD.SYMBOL="<";function tD(e,t){return e<=t}tD.SYMBOL="<=";function nD(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=n.reduce(function(e,t){return e-NO(t)},NO(e));if(isNaN(i))throw Error(jO);return i}nD.SYMBOL="-";function oD(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=n.reduce(function(e,t){return e*NO(t)},NO(e));if(isNaN(i))throw Error(jO);return i}oD.SYMBOL="*";function iD(e,t){return e!==t}iD.SYMBOL="<>";function aD(e,t){var n=Math.pow(NO(e),NO(t));if(isNaN(n))throw Error(jO);return n}function rD(e){return function(e){if(Array.isArray(e))return lD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return lD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lD(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}aD.SYMBOL="^";var sD=Object.create(null);function cD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e=e.toUpperCase(),!sD[e])throw Error(HO);return sD[e].apply(sD,rD(t))}function uD(e,t){Array.isArray(e)||(e=[e.toUpperCase()]),e.forEach(function(e){t.isFactory?sD[e]=t(e):sD[e]=t})}uD(zO.SYMBOL,zO),uD(WO.SYMBOL,WO),uD(qO.SYMBOL,qO),uD(KO.SYMBOL,KO),uD(aD.SYMBOL,aD),uD(XO.SYMBOL,XO),uD(QO.SYMBOL,QO),uD(ZO.SYMBOL,ZO),uD(eD.SYMBOL,eD),uD(tD.SYMBOL,tD),uD(oD.SYMBOL,oD),uD(iD.SYMBOL,iD),uD(nD.SYMBOL,nD);var dD=function(e,t,n,o){for(n=n||{},o=e.length;o--;n[e[o]]=t);return n},hD=[1,5],fD=[1,8],pD=[1,6],mD=[1,7],vD=[1,9],bD=[1,14],yD=[1,15],gD=[1,16],wD=[1,12],_D=[1,13],CD=[1,17],kD=[1,19],xD=[1,20],SD=[1,21],TD=[1,22],ED=[1,23],OD=[1,24],DD=[1,25],ID=[1,26],RD=[1,27],MD=[1,28],PD=[5,9,10,11,13,14,15,16,17,18,19,20,29,30],AD=[5,9,10,11,13,14,15,16,17,18,19,20,29,30,32],LD=[5,9,10,11,13,14,15,16,17,18,19,20,29,30,34],ND=[5,10,11,13,14,15,16,17,29,30],VD=[5,10,13,14,15,16,29,30],FD=[5,10,11,13,14,15,16,17,18,19,29,30],BD=[13,29,30],HD={trace:function(){},yy:{},symbols_:{error:2,expressions:3,expression:4,EOF:5,variableSequence:6,number:7,STRING:8,"&":9,"=":10,"+":11,"(":12,")":13,"<":14,">":15,NOT:16,"-":17,"*":18,"/":19,"^":20,FUNCTION:21,expseq:22,cell:23,ABSOLUTE_CELL:24,RELATIVE_CELL:25,MIXED_CELL:26,":":27,ARRAY:28,";":29,",":30,VARIABLE:31,DECIMAL:32,NUMBER:33,"%":34,ERROR:35,$accept:0,$end:1},terminals_:{5:"EOF",8:"STRING",9:"&",10:"=",11:"+",12:"(",13:")",14:"<",15:">",16:"NOT",17:"-",18:"*",19:"/",20:"^",21:"FUNCTION",24:"ABSOLUTE_CELL",25:"RELATIVE_CELL",26:"MIXED_CELL",27:":",28:"ARRAY",29:";",30:",",31:"VARIABLE",32:"DECIMAL",33:"NUMBER",34:"%",35:"ERROR"},productions_:[0,[3,2],[4,1],[4,1],[4,1],[4,3],[4,3],[4,3],[4,3],[4,4],[4,4],[4,4],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,2],[4,2],[4,3],[4,4],[4,1],[4,1],[4,2],[23,1],[23,1],[23,1],[23,3],[23,3],[23,3],[23,3],[23,3],[23,3],[23,3],[23,3],[23,3],[22,1],[22,1],[22,3],[22,3],[6,1],[6,3],[7,1],[7,3],[7,2],[2,1]],performAction:function(e,t,n,o,i,a,r){var l=a.length-1;switch(i){case 1:return a[l-1];case 2:this.$=o.callVariable(a[l][0]);break;case 3:this.$=o.toNumber(a[l]);break;case 4:this.$=o.trimEdges(a[l]);break;case 5:this.$=o.evaluateByOperator("&",[a[l-2],a[l]]);break;case 6:this.$=o.evaluateByOperator("=",[a[l-2],a[l]]);break;case 7:this.$=o.evaluateByOperator("+",[a[l-2],a[l]]);break;case 8:this.$=a[l-1];break;case 9:this.$=o.evaluateByOperator("<=",[a[l-3],a[l]]);break;case 10:this.$=o.evaluateByOperator(">=",[a[l-3],a[l]]);break;case 11:this.$=o.evaluateByOperator("<>",[a[l-3],a[l]]);break;case 12:this.$=o.evaluateByOperator("NOT",[a[l-2],a[l]]);break;case 13:this.$=o.evaluateByOperator(">",[a[l-2],a[l]]);break;case 14:this.$=o.evaluateByOperator("<",[a[l-2],a[l]]);break;case 15:this.$=o.evaluateByOperator("-",[a[l-2],a[l]]);break;case 16:this.$=o.evaluateByOperator("*",[a[l-2],a[l]]);break;case 17:this.$=o.evaluateByOperator("/",[a[l-2],a[l]]);break;case 18:this.$=o.evaluateByOperator("^",[a[l-2],a[l]]);break;case 19:var s=o.invertNumber(a[l]);this.$=s,isNaN(this.$)&&(this.$=0);break;case 20:s=o.toNumber(a[l]);this.$=s,isNaN(this.$)&&(this.$=0);break;case 21:this.$=o.callFunction(a[l-2]);break;case 22:this.$=o.callFunction(a[l-3],a[l-1]);break;case 26:case 27:case 28:this.$=o.cellValue(a[l]);break;case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:this.$=o.rangeValue(a[l-2],a[l]);break;case 38:case 42:this.$=[a[l]];break;case 39:this.$=o.trimEdges(e).split(",");break;case 40:case 41:a[l-2].push(a[l]),this.$=a[l-2];break;case 43:this.$=Array.isArray(a[l-2])?a[l-2]:[a[l-2]],this.$.push(a[l]);break;case 44:this.$=a[l];break;case 45:this.$=1*(a[l-2]+"."+a[l]);break;case 46:this.$=.01*a[l-1];break;case 47:this.$=o.throwError(a[l])}},table:[{2:11,3:1,4:2,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{1:[3]},{5:[1,18],9:kD,10:xD,11:SD,14:TD,15:ED,16:OD,17:DD,18:ID,19:RD,20:MD},dD(PD,[2,2],{32:[1,29]}),dD(PD,[2,3],{34:[1,30]}),dD(PD,[2,4]),{2:11,4:31,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:32,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:33,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{12:[1,34]},dD(PD,[2,23]),dD(PD,[2,24],{2:35,35:CD}),dD(AD,[2,42]),dD(LD,[2,44],{32:[1,36]}),dD(PD,[2,26],{27:[1,37]}),dD(PD,[2,27],{27:[1,38]}),dD(PD,[2,28],{27:[1,39]}),dD([5,9,10,11,13,14,15,16,17,18,19,20,29,30,35],[2,47]),{1:[2,1]},{2:11,4:40,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:41,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:42,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:45,6:3,7:4,8:hD,10:[1,43],11:fD,12:pD,15:[1,44],17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:47,6:3,7:4,8:hD,10:[1,46],11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:48,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:49,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:50,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:51,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:52,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{31:[1,53]},dD(LD,[2,46]),{9:kD,10:xD,11:SD,13:[1,54],14:TD,15:ED,16:OD,17:DD,18:ID,19:RD,20:MD},dD(ND,[2,19],{9:kD,18:ID,19:RD,20:MD}),dD(ND,[2,20],{9:kD,18:ID,19:RD,20:MD}),{2:11,4:57,6:3,7:4,8:hD,11:fD,12:pD,13:[1,55],17:mD,21:vD,22:56,23:10,24:bD,25:yD,26:gD,28:[1,58],31:wD,33:_D,35:CD},dD(PD,[2,25]),{33:[1,59]},{24:[1,60],25:[1,61],26:[1,62]},{24:[1,63],25:[1,64],26:[1,65]},{24:[1,66],25:[1,67],26:[1,68]},dD(PD,[2,5]),dD([5,10,13,29,30],[2,6],{9:kD,11:SD,14:TD,15:ED,16:OD,17:DD,18:ID,19:RD,20:MD}),dD(ND,[2,7],{9:kD,18:ID,19:RD,20:MD}),{2:11,4:69,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:70,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},dD(VD,[2,14],{9:kD,11:SD,17:DD,18:ID,19:RD,20:MD}),{2:11,4:71,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},dD(VD,[2,13],{9:kD,11:SD,17:DD,18:ID,19:RD,20:MD}),dD([5,10,13,16,29,30],[2,12],{9:kD,11:SD,14:TD,15:ED,17:DD,18:ID,19:RD,20:MD}),dD(ND,[2,15],{9:kD,18:ID,19:RD,20:MD}),dD(FD,[2,16],{9:kD,20:MD}),dD(FD,[2,17],{9:kD,20:MD}),dD([5,10,11,13,14,15,16,17,18,19,20,29,30],[2,18],{9:kD}),dD(AD,[2,43]),dD(PD,[2,8]),dD(PD,[2,21]),{13:[1,72],29:[1,73],30:[1,74]},dD(BD,[2,38],{9:kD,10:xD,11:SD,14:TD,15:ED,16:OD,17:DD,18:ID,19:RD,20:MD}),dD(BD,[2,39]),dD(LD,[2,45]),dD(PD,[2,29]),dD(PD,[2,30]),dD(PD,[2,31]),dD(PD,[2,32]),dD(PD,[2,33]),dD(PD,[2,34]),dD(PD,[2,35]),dD(PD,[2,36]),dD(PD,[2,37]),dD(VD,[2,9],{9:kD,11:SD,17:DD,18:ID,19:RD,20:MD}),dD(VD,[2,11],{9:kD,11:SD,17:DD,18:ID,19:RD,20:MD}),dD(VD,[2,10],{9:kD,11:SD,17:DD,18:ID,19:RD,20:MD}),dD(PD,[2,22]),{2:11,4:75,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},{2:11,4:76,6:3,7:4,8:hD,11:fD,12:pD,17:mD,21:vD,23:10,24:bD,25:yD,26:gD,31:wD,33:_D,35:CD},dD(BD,[2,40],{9:kD,10:xD,11:SD,14:TD,15:ED,16:OD,17:DD,18:ID,19:RD,20:MD}),dD(BD,[2,41],{9:kD,10:xD,11:SD,14:TD,15:ED,16:OD,17:DD,18:ID,19:RD,20:MD})],defaultActions:{18:[2,1]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],o=[null],i=[],a=this.table,r="",l=0,s=0,c=0,u=i.slice.call(arguments,1),d=Object.create(this.lexer),h={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(h.yy[f]=this.yy[f]);d.setInput(e,h.yy),h.yy.lexer=d,h.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc;i.push(p);var m=d.options&&d.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,b,y,g,w,_,C,k,x,S,T=function(){var e;return"number"!=typeof(e=d.lex()||1)&&(e=t.symbols_[e]||e),e},E={};;){if(y=n[n.length-1],this.defaultActions[y]?g=this.defaultActions[y]:(null!==v&&void 0!==v||(v=T()),g=a[y]&&a[y][v]),void 0===g||!g.length||!g[0]){var O,D=function(e){for(var t=n.length-1,o=0;;){if(2..toString()in a[e])return o;if(0===e||t<2)return!1;e=n[t-=2],++o}},I="";if(c)1!==b&&(O=D(y));else{for(_ in O=D(y),x=[],a[y])this.terminals_[_]&&_>2&&x.push("'"+this.terminals_[_]+"'");I=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==v?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(I,{text:d.match,token:this.terminals_[v]||v,line:d.yylineno,loc:p,expected:x,recoverable:!1!==O})}if(3==c){if(1===v||1===b)throw new Error(I||"Parsing halted while starting to recover from another error.");s=d.yyleng,r=d.yytext,l=d.yylineno,p=d.yylloc,v=T()}if(!1===O)throw new Error(I||"Parsing halted. No suitable error recovery rule available.");S=O,n.length=n.length-2*S,o.length=o.length-S,i.length=i.length-S,b=2==v?null:v,v=2,y=n[n.length-1],g=a[y]&&a[y][2],c=3}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+v);switch(g[0]){case 1:n.push(v),o.push(d.yytext),i.push(d.yylloc),n.push(g[1]),v=null,b?(v=b,b=null):(s=d.yyleng,r=d.yytext,l=d.yylineno,p=d.yylloc,c>0&&c--);break;case 2:if(C=this.productions_[g[1]][1],E.$=o[o.length-C],E._$={first_line:i[i.length-(C||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(C||1)].first_column,last_column:i[i.length-1].last_column},m&&(E._$.range=[i[i.length-(C||1)].range[0],i[i.length-1].range[1]]),void 0!==(w=this.performAction.apply(E,[r,s,l,h.yy,g[1],o,i].concat(u))))return w;C&&(n=n.slice(0,-1*C*2),o=o.slice(0,-1*C),i=i.slice(0,-1*C)),n.push(this.productions_[g[1]][0]),o.push(E.$),i.push(E._$),k=a[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}},jD={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var o=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===o.length?this.yylloc.first_column:0)+o[o.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,o,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(o=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!t||n[0].length>t[0].length)){if(t=n,o=a,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[a])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[o]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,o){switch(n){case 0:break;case 1:case 2:return 8;case 3:return 21;case 4:return 35;case 5:return 24;case 6:case 7:return 26;case 8:return 25;case 9:return 21;case 10:case 11:return 31;case 12:return 33;case 13:return 28;case 14:return 9;case 15:return" ";case 16:return 32;case 17:return 27;case 18:return 29;case 19:return 30;case 20:return 18;case 21:return 19;case 22:return 17;case 23:return 11;case 24:return 20;case 25:return 12;case 26:return 13;case 27:return 15;case 28:return 14;case 29:return 16;case 30:return'"';case 31:return"'";case 32:return"!";case 33:return 10;case 34:return 34;case 35:return"#";case 36:return 5}},rules:[/^(?:\s+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:[A-Za-z]{1,}[A-Za-z_0-9\.]+(?=[(]))/,/^(?:#[A-Z0-9\/]+(!|\?)?)/,/^(?:\$[A-Za-z]+\$[0-9]+)/,/^(?:\$[A-Za-z]+[0-9]+)/,/^(?:[A-Za-z]+\$[0-9]+)/,/^(?:[A-Za-z]+[0-9]+)/,/^(?:[A-Za-z\.]+(?=[(]))/,/^(?:[A-Za-z]{1,}[A-Za-z_0-9]+)/,/^(?:[A-Za-z_]+)/,/^(?:[0-9]+)/,/^(?:\[(.*)?\])/,/^(?:&)/,/^(?: )/,/^(?:[.])/,/^(?::)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\/)/,/^(?:-)/,/^(?:\+)/,/^(?:\^)/,/^(?:\()/,/^(?:\))/,/^(?:>)/,/^(?:<)/,/^(?:NOT\b)/,/^(?:")/,/^(?:')/,/^(?:!)/,/^(?:=)/,/^(?:%)/,/^(?:[#])/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36],inclusive:!0}}};function $D(){this.yy={}}function UD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e=e.substring(t,e.length-t)}function zD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return WD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}HD.lexer=jD,$D.prototype=HD,HD.Parser=$D;var qD="ABCDEFGHIJKLMNOPQRSTUVWXYZ",KD=qD.length;var GD=/^([$])?([A-Za-z]+)([$])?([0-9]+)$/;function JD(e){if("string"!=typeof e||!GD.test(e))return[];var t=zD(e.toUpperCase().match(GD),5),n=t[1],o=t[2],i=t[3],a=t[4];return[{index:function(e){var t=parseInt(e,10);return t=isNaN(t)?-1:Math.max(t-1,-1)}(a),label:a,isAbsolute:"$"===i},{index:function(e){var t=0;if("string"==typeof e)for(var n=0,o=(e=e.toUpperCase()).length-1;n<e.length;n+=1,o-=1)t+=Math.pow(KD,o)*(qD.indexOf(e[n])+1);return--t}(o),label:o,isAbsolute:"$"===n}]}function YD(e,t){var n=(e.isAbsolute?"$":"")+function(e){var t="";return e>=0&&(t="".concat(e+1)),t}(e.index);return(t.isAbsolute?"$":"")+function(e){for(var t="";e>=0;)t=String.fromCharCode(e%KD+97)+t,e=Math.floor(e/KD)-1;return t.toUpperCase()}(t.index)+n}function XD(e){"@babel/helpers - typeof";return(XD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ZD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function eI(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function tI(e,t){return(tI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=oI(e);if(t){var i=oI(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===XD(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function oI(e){return(oI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var iI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tI(e,t)}(a,LO.a);var t,n,o,i=nI(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).parser=new $D,e.parser.yy={toNumber:NO,trimEdges:UD,invertNumber:VO,throwError:function(t){return e._throwError(t)},callVariable:function(t){return e._callVariable(t)},evaluateByOperator:cD,callFunction:function(t,n){return e._callFunction(t,n)},cellValue:function(t){return e._callCellValue(t)},rangeValue:function(t,n){return e._callRangeValue(t,n)}},e.variables=Object.create(null),e.functions=Object.create(null),e.setVariable("TRUE",!0).setVariable("FALSE",!1).setVariable("NULL",null),e}return t=a,(n=[{key:"parse",value:function(e){var t=null,n=null;try{t=""===e?"":this.parser.parse(e)}catch(e){var o=UO(e.message);n=o||UO("ERROR")}return t instanceof Error&&(n=UO(t.message)||UO("ERROR"),t=null),{error:n,result:t}}},{key:"setVariable",value:function(e,t){return this.variables[e]=t,this}},{key:"getVariable",value:function(e){return this.variables[e]}},{key:"_callVariable",value:function(e){var t=this.getVariable(e);if(this.emit("callVariable",e,function(e){void 0!==e&&(t=e)}),void 0===t)throw Error(HO);return t}},{key:"setFunction",value:function(e,t){return this.functions[e]=t,this}},{key:"getFunction",value:function(e){return this.functions[e]}},{key:"_callFunction",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=this.getFunction(e);return o&&(t=o(n)),this.emit("callFunction",e,n,function(e){void 0!==e&&(t=e)}),void 0===t?cD(e,n):t}},{key:"_callCellValue",value:function(e){var t=QD(JD(e=e.toUpperCase()),2),n=t[0],o=t[1],i=void 0;return this.emit("callCellValue",{label:e,row:n,column:o},function(e){i=e}),i}},{key:"_callRangeValue",value:function(e,t){e=e.toUpperCase(),t=t.toUpperCase();var n=QD(JD(e),2),o=n[0],i=n[1],a=QD(JD(t),2),r=a[0],l=a[1],s={},c={};o.index<=r.index?(s.row=o,c.row=r):(s.row=r,c.row=o),i.index<=l.index?(s.column=i,c.column=l):(s.column=l,c.column=i),s.label=YD(s.row,s.column),c.label=YD(c.row,c.column);var u=[];return this.emit("callRangeValue",s,c,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u=e}),u}},{key:"_throwError",value:function(e){if(function(e){var t=!1;for(var n in $O)if(Object.prototype.hasOwnProperty.call($O,n)&&$O[n]===e){t=!0;break}return t}(e))throw Error(e);throw Error("ERROR")}}])&&eI(t.prototype,n),o&&eI(t,o),a}();function aI(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var rI=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=pe(t),i=pe(n);this._row=o?t.index:t,this.rowAbsolute=!o||t.isAbsolute,this._column=i?n.index:n,this.columnAbsolute=!i||n.isAbsolute,this.rowOffset=0,this.columnOffset=0,Object.defineProperty(this,"row",{get:function(){return this.rowOffset+this._row},set:function(e){this._row=e},enumerable:!0,configurable:!0}),Object.defineProperty(this,"column",{get:function(){return this.columnOffset+this._column},set:function(e){this._column=e},enumerable:!0,configurable:!0})}var t,n,o;return t=e,(n=[{key:"translateTo",value:function(e,t){this.row=this.row+e,this.column=this.column+t}},{key:"isEqual",value:function(e){return e.row===this.row&&e.column===this.column}},{key:"toString",value:function(){return YD({index:this.row,isAbsolute:this.rowAbsolute},{index:this.column,isAbsolute:this.columnAbsolute})}}])&&aI(t.prototype,n),o&&aI(t,o),e}();function lI(e){"@babel/helpers - typeof";return(lI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sI(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function cI(e,t){return(cI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=dI(e);if(t){var i=dI(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===lI(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function dI(e){return(dI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hI=[1,2,3],fI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cI(e,t)}(a,rI);var t,n,o,i=uI(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,t)).precedents=[],n.value=null,n.error=null,n.state=a.STATE_UP_TO_DATE,n}return t=a,o=[{key:"STATE_OUT_OFF_DATE",get:function(){return 1}},{key:"STATE_COMPUTING",get:function(){return 2}},{key:"STATE_UP_TO_DATE",get:function(){return 3}}],(n=[{key:"setValue",value:function(e){this.value=e}},{key:"getValue",value:function(){return this.value}},{key:"setError",value:function(e){this.error=e}},{key:"getError",value:function(){return this.error}},{key:"hasError",value:function(){return null!==this.error}},{key:"setState",value:function(e){if(-1===hI.indexOf(e))throw Error("Unrecognized state: ".concat(e));this.state=e}},{key:"isState",value:function(e){return this.state===e}},{key:"addPrecedent",value:function(e){if(this.isEqual(e))throw Error("REF");this.hasPrecedent(e)||this.precedents.push(e)}},{key:"removePrecedent",value:function(e){if(this.isEqual(e))throw Error("REF");this.precedents=W(this.precedents,function(t){return!t.isEqual(e)})}},{key:"clearPrecedents",value:function(){this.precedents.length=0}},{key:"getPrecedents",value:function(){return this.precedents}},{key:"hasPrecedents",value:function(){return this.precedents.length>0}},{key:"hasPrecedent",value:function(e){return W(this.precedents,function(t){return t.isEqual(e)}).length>0}}])&&sI(t.prototype,n),o&&sI(t,o),a}();function pI(e){"@babel/helpers - typeof";return(pI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mI(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function vI(e,t){return(vI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=yI(e);if(t){var i=yI(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===pI(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yI(e){return(yI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vI(e,t)}(a,rI);var t,n,o,i=bI(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"toString",value:function(){return YD({index:this.row,isAbsolute:!1},{index:this.column,isAbsolute:!1})}}])&&mI(t.prototype,n),o&&mI(t,o),a}();function wI(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var _I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.data=[],this.cellReferences=[]}var t,n,o;return t=e,(n=[{key:"getCellAt",value:function(e,t){var n=null;return K(this.data,function(o){if(o.row===e&&o.column===t)return n=o,!1}),n}},{key:"getOutOfDateCells",value:function(){return W(this.data,function(e){return e.isState(fI.STATE_OUT_OFF_DATE)})}},{key:"add",value:function(e){W(this.data,function(t){return t.isEqual(e)}).length||this.data.push(e)}},{key:"remove",value:function(e){var t=Array.isArray(e);this.data=W(this.data,function(n){return!function(e,n){var o=!1;return t?K(n,function(t){if(e.isEqual(t))return o=!0,!1}):o=e.isEqual(n),o}(n,e)})}},{key:"getDependencies",value:function(e){var t=this,n=function(e){return z(t.data,function(t,n){return n.hasPrecedent(e)&&-1===t.indexOf(n)&&t.push(n),t},[])};return function e(o){var i=n(o);return i.length&&K(i,function(n){n.hasPrecedents()&&(i=i.concat(e({row:t.hot.toVisualRow(n.row),column:t.hot.toVisualColumn(n.column)})))}),i}(e)}},{key:"registerCellRef",value:function(e){W(this.cellReferences,function(t){return t.isEqual(e)}).length||this.cellReferences.push(e)}},{key:"removeCellRefsAtRange",value:function(e,t){var n=e.row,o=e.column,i=t.row,a=t.column,r=[];return this.cellReferences=W(this.cellReferences,function(e){return!function(e){return void 0===n||e.row>=n&&e.row<=i}(e)||!function(e){return void 0===o||e.column>=o&&e.column<=a}(e)||(r.push(e),!1)}),r}},{key:"reset",value:function(){this.data.length=0,this.cellReferences.length=0}}])&&wI(t.prototype,n),o&&wI(t,o),e}();function CI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function xI(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var SI=/^\$?[A-Z]+\$?\d+$/,TI=/\$?[A-Z]+\$?\d+/,EI=/(?:[^0-9A-Z$: ]|^)\s*(\$?[A-Z]+\$?\d+)\s*(?![0-9A-Z_: ])/g,OI=/\$?[A-Z]+\$?\d+\s*:\s*\$?[A-Z]+\$?\d+/g,DI=/((?:[^0-9A-Z$: ]|^)\s*(\$?[A-Z]+\$?\d+)\s*(?![0-9A-Z_: ]))|(\$?[A-Z]+\$?\d+\s*:\s*\$?[A-Z]+\$?\d+)/g,II=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expression="",this.cells=[],this.customModifier=null,"string"==typeof t&&this.setExpression(t)}var t,n,o;return t=e,(n=[{key:"setExpression",value:function(e){return this.cells.length=0,this.expression=RO(e),this._extractCells(),this._extractCellsRange(),this}},{key:"useCustomModifier",value:function(e){this.customModifier=e}},{key:"translate",value:function(e){var t=this,n=e.row,o=e.column,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K(this.cells,function(e){null!==n&&void 0!==n&&t._translateCell(e,"row",n,i.row),null!==o&&void 0!==o&&t._translateCell(e,"column",o,i.column)}),this}},{key:"toString",value:function(){var e=this,t=this.expression.replace(DI,function(t,n,o){var i=-1===t.indexOf(":"),a=t,r=t,l=null;i&&(r=SI.test(n)?n:o);var s=e._searchCell(r);return s&&(l=s.refError?UO("REF"):s.toLabel(),a=i?t.replace(r,l):l),a});return t.startsWith("=")||(t="=".concat(t)),t}},{key:"_translateCell",value:function(e,t,n,o){var i=e.start,a=e.end,r=i[t].index,l=a[t].index,s=n,c=n,u=!1;if(this.customModifier){var d=CI(this.customModifier(e,t,n,o),3);s=d[0],c=d[1],u=d[2]}else i[t].isAbsolute&&(s=0),a[t].isAbsolute&&(c=0);s&&!u&&(r+s<0&&(u=!0),i[t].index=Math.max(r+s,0)),c&&!u&&(l+c<0&&(u=!0),a[t].index=Math.max(l+c,0)),u&&(e.refError=!0)}},{key:"_extractCells",value:function(){var e=this,t=this.expression.match(EI);t&&K(t,function(t){var n=t.match(TI);if(n){var o=CI(JD(n[0]),2),i=o[0],a=o[1];e.cells.push(e._createCell({row:i,column:a},{row:i,column:a},n[0]))}})}},{key:"_extractCellsRange",value:function(){var e=this,t=this.expression.match(OI);t&&K(t,function(t){var n=CI(t.split(":"),2),o=n[0],i=n[1],a=CI(JD(o),2),r=a[0],l=a[1],s=CI(JD(i),2),c={row:r,column:l},u={row:s[0],column:s[1]};e.cells.push(e._createCell(c,u,t))})}},{key:"_searchCell",value:function(e){return CI(W(this.cells,function(t){return t.origLabel===e}),1)[0]||null}},{key:"_createCell",value:function(e,t,n){return{start:e,end:t,origLabel:n,type:-1===n.indexOf(":")?"cell":"range",refError:!1,toLabel:function(){var e=YD(this.start.row,this.start.column);return"range"===this.type&&(e+=":".concat(YD(this.end.row,this.end.column))),e}}}}])&&xI(t.prototype,n),o&&xI(t,o),e}();he(II,cc);var RI,MI=II,PI="column_sorting";function AI(){var e=this.matrix,t=this.hot;RI=new WeakMap,K(e.data,function(e){RI.set(e,t.toVisualRow(e.row))})}function LI(){var e=this.matrix,t=this.dataProvider,n=this.hot;e.cellReferences.length=0,K(e.data,function(e){e.setState(fI.STATE_OUT_OFF_DATE),e.clearPrecedents();var o=e.row,i=e.column,a=t.getSourceDataAtCell(o,i);if(DO(a)){var r=RI.get(e),l=new MI(a);l.translate({row:n.toVisualRow(o)-r}),t.updateSourceData(o,i,l.toString())}}),RI=null}var NI="insert_column";function VI(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.matrix,i=this.dataProvider,a=[0,t];K(o.cellReferences,function(t){t.column>=e&&t.translateTo.apply(t,a)}),K(o.data,function(o){var r=o.row,l=o.column;if(o.column>=e&&(o.translateTo.apply(o,a),o.setState(fI.STATE_OUT_OFF_DATE)),n){var s=o.row,c=o.column,u=i.getSourceDataAtCell(s,c);if(DO(u)){var d=MO("column",e),h=new MI(u);h.useCustomModifier(FI),h.translate({column:t},d({row:r,column:l})),i.updateSourceData(s,c,h.toString())}}})}function FI(e,t,n,o){var i=e.start,a=e.end,r=i[t].index,l=a[t].index,s=n,c=n;return o>r&&(s=0),o>l&&(c=0),[s,c,!1]}var BI="insert_row";function HI(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.matrix,i=this.dataProvider,a=[t,0];K(o.cellReferences,function(t){t.row>=e&&t.translateTo.apply(t,a)}),K(o.data,function(o){var r=o.row,l=o.column;if(o.row>=e&&(o.translateTo.apply(o,a),o.setState(fI.STATE_OUT_OFF_DATE)),n){var s=o.row,c=o.column,u=i.getSourceDataAtCell(s,c);if(DO(u)){var d=MO("row",e),h=new MI(u);h.useCustomModifier(jI),h.translate({row:t},d({row:r,column:l})),i.updateSourceData(s,c,h.toString())}}})}function jI(e,t,n,o){var i=e.start,a=e.end,r=i[t].index,l=a[t].index,s=n,c=n;return o>r&&(s=0),o>l&&(c=0),[s,c,!1]}var $I="remove_column";function UI(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=-t,i=this.matrix,a=this.dataProvider,r=this.sheet,l=[0,o],s=Math.abs(o)-1,c=i.removeCellRefsAtRange({column:e},{column:e+s}),u=[];K(i.data,function(t){K(c,function(e){t.hasPrecedent(e)&&(t.removePrecedent(e),t.setState(fI.STATE_OUT_OFF_DATE),K(r.getCellDependencies(t.row,t.column),function(e){e.setState(fI.STATE_OUT_OFF_DATE)}))}),t.column>=e&&t.column<=e+s&&u.push(t)}),i.remove(u),K(i.cellReferences,function(t){t.column>=e&&t.translateTo.apply(t,l)}),K(i.data,function(t){var i=t.row,r=t.column;if(t.column>=e&&(t.translateTo.apply(t,l),t.setState(fI.STATE_OUT_OFF_DATE)),n){var s=t.row,c=t.column,u=a.getSourceDataAtCell(s,c);if(DO(u)){var d=MO("column",e),h=new MI(u);h.useCustomModifier(zI),h.translate({column:o},d({row:i,column:r})),a.updateSourceData(s,c,h.toString())}}})}function zI(e,t,n,o){var i=e.start,a=e.end,r=e.type,l=i[t].index,s=a[t].index,c=Math.abs(n)-1,u=n,d=n,h=!1;return l>=o&&s<=o+c&&(h=!0),h||"cell"!==r||o>=l&&(u=0,d=0),h||"range"!==r||(o>=l&&(u=0),o>s?d=0:s<=o+c&&(d-=Math.min(s-(o+c),0))),l+u<0&&(u-=l+u),[u,d,h]}var WI="remove_row";function qI(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=-t,i=this.matrix,a=this.dataProvider,r=this.sheet,l=[o,0],s=Math.abs(o)-1,c=i.removeCellRefsAtRange({row:e},{row:e+s}),u=[];K(i.data,function(t){K(c,function(e){t.hasPrecedent(e)&&(t.removePrecedent(e),t.setState(fI.STATE_OUT_OFF_DATE),K(r.getCellDependencies(t.row,t.column),function(e){e.setState(fI.STATE_OUT_OFF_DATE)}))}),t.row>=e&&t.row<=e+s&&u.push(t)}),i.remove(u),K(i.cellReferences,function(t){t.row>=e&&t.translateTo.apply(t,l)}),K(i.data,function(t){var i=t.row,r=t.column;if(t.row>=e&&(t.translateTo.apply(t,l),t.setState(fI.STATE_OUT_OFF_DATE)),n){var s=t.row,c=t.column,u=a.getSourceDataAtCell(s,c);if(DO(u)){var d=MO("row",e),h=new MI(u);h.useCustomModifier(KI),h.translate({row:o},d({row:i,column:r})),a.updateSourceData(s,c,h.toString())}}})}function KI(e,t,n,o){var i=e.start,a=e.end,r=e.type,l=i[t].index,s=a[t].index,c=Math.abs(n)-1,u=n,d=n,h=!1;return l>=o&&s<=o+c&&(h=!0),h||"cell"!==r||o>=l&&(u=0,d=0),h||"range"!==r||(o>=l&&(u=0),o>s?d=0:s<=o+c&&(d-=Math.min(s-(o+c),0))),l+u<0&&(u-=l+u),[u,d,h]}function GI(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var JI=new Map;ZI(PI,y),ZI(NI,g),ZI(BI,w),ZI($I,_),ZI(WI,C);var YI=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sheet=t,this.hot=t.hot,this.dataProvider=t.dataProvider,this.matrix=t.matrix}var t,n,o;return t=e,(n=[{key:"prepareAlter",value:function(e){if(!JI.has(e))throw Error('Alter operation "'.concat(e,'" not exist.'));for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];JI.get(e).prepare.apply(this,n)}},{key:"triggerAlter",value:function(e){if(!JI.has(e))throw Error('Alter operation "'.concat(e,'" not exist.'));for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];JI.get(e).operate.apply(this,n),this.runLocalHooks.apply(this,["afterAlter"].concat(n))}},{key:"destroy",value:function(){this.sheet=null,this.hot=null,this.dataProvider=null,this.matrix=null}}])&&GI(t.prototype,n),o&&GI(t,o),e}();he(YI,cc);var XI=YI,QI=function(){};function ZI(e,t){JI.has(e)||JI.set(e,{prepare:t.prepare||QI,operate:t.operate||QI})}function eR(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var tR=3,nR=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.dataProvider=n,this.parser=new iI,this.matrix=new _I(this.hot),this.alterManager=new XI(this),this._processingCell=null,this._state=tR,this.parser.on("callCellValue",function(){return o._onCallCellValue.apply(o,arguments)}),this.parser.on("callRangeValue",function(){return o._onCallRangeValue.apply(o,arguments)}),this.alterManager.addLocalHook("afterAlter",function(){return o._onAfterAlter.apply(o,arguments)})}var t,n,o;return t=e,(n=[{key:"recalculate",value:function(){switch(this._state){case tR:this.recalculateFull();break;case 2:this.recalculateOptimized()}}},{key:"recalculateOptimized",value:function(){var e=this,t=this.matrix.getOutOfDateCells();K(t,function(t){var n=e.dataProvider.getSourceDataAtCell(t.row,t.column);DO(n)&&e.parseExpression(t,n.substr(1))}),this._state=1,this.runLocalHooks("afterRecalculate",t,"optimized")}},{key:"recalculateFull",value:function(){var e=this,t=this.dataProvider.getSourceDataByRange();this.matrix.reset(),K(t,function(t,n){K(t,function(t,o){DO(t)&&e.parseExpression(new fI(n,o),t.substr(1))})}),this._state=1,this.runLocalHooks("afterRecalculate",t,"full")}},{key:"setVariable",value:function(e,t){this.parser.setVariable(e,t)}},{key:"getVariable",value:function(e){return this.parser.getVariable(e)}},{key:"applyChanges",value:function(e,t,n){this.matrix.remove({row:e,column:t}),DO(n)&&this.parseExpression(new fI(e,t),n.substr(1)),K(this.getCellDependencies(this.hot.toVisualRow(e),this.hot.toVisualColumn(t)),function(e){e.setState(fI.STATE_OUT_OFF_DATE)}),this._state=2}},{key:"parseExpression",value:function(e,t){e.setState(fI.STATE_COMPUTING),this._processingCell=e;var n=this.parser.parse(RO(t)),o=n.error,i=n.result;DO(i)?this.parseExpression(e,i.substr(1)):(e.setValue(i),e.setError(o),e.setState(fI.STATE_UP_TO_DATE)),this.matrix.add(e),this._processingCell=null}},{key:"getCellAt",value:function(e,t){return this.matrix.getCellAt(e,t)}},{key:"getCellDependencies",value:function(e,t){return this.matrix.getDependencies({row:e,column:t})}},{key:"_onCallCellValue",value:function(e,t){var n=e.row,o=e.column,i=new gI(n,o);if(!this.dataProvider.isInDataRange(i.row,i.column))throw Error("REF");this.matrix.registerCellRef(i),this._processingCell.addPrecedent(i);var a=this.dataProvider.getRawDataAtCell(n.index,o.index);if(UO(a)){var r=this.matrix.getCellAt(n.index,o.index);if(r&&r.hasError())throw Error(a)}if(DO(a)){var l=this.parser.parse(a.substr(1)),s=l.error,c=l.result;if(s)throw Error(s);t(c)}else t(a)}},{key:"_onCallRangeValue",value:function(e,t,n){var o=this,i=e.row,a=e.column,r=t.row,l=t.column;n(q(this.dataProvider.getRawDataByRange(i.index,a.index,r.index,l.index),function(e,t){return function(e,t){return q(e,function(e,n){var r=i.index+t,l=a.index+n,s=new gI(r,l);if(!o.dataProvider.isInDataRange(s.row,s.column))throw Error("REF");o.matrix.registerCellRef(s),o._processingCell.addPrecedent(s);var c=e;if(UO(c)){var u=o.matrix.getCellAt(s.row,s.column);if(u&&u.hasError())throw Error(c)}if(DO(c)){var d=o.parser.parse(c.substr(1)),h=d.error,f=d.result;if(h)throw Error(h);c=f}return c})}(e,t)}))}},{key:"_onAfterAlter",value:function(){this.recalculateOptimized()}},{key:"destroy",value:function(){this.hot=null,this.dataProvider.destroy(),this.dataProvider=null,this.alterManager.destroy(),this.alterManager=null,this.parser=null,this.matrix.reset(),this.matrix=null}}])&&eR(t.prototype,n),o&&eR(t,o),e}();he(nR,cc);var oR=nR;function iR(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var aR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.changes={}}var t,n,o;return t=e,(n=[{key:"collectChanges",value:function(e,t,n){this.changes[this._coordId(e,t)]=n}},{key:"clearChanges",value:function(){this.changes={}}},{key:"isInDataRange",value:function(e,t){return e>=0&&e<this.hot.countRows()&&t>=0&&t<this.hot.countCols()}},{key:"getDataAtCell",value:function(e,t){var n=this._coordId(this.hot.toPhysicalRow(e),this.hot.toPhysicalColumn(t));return _e(this.changes,n)?this.changes[n]:this.hot.getDataAtCell(e,t)}},{key:"getDataByRange",value:function(e,t,n,o){var i=this,a=this.hot.getData(e,t,n,o);return K(a,function(n,o){K(n,function(n,r){var l=i._coordId(i.hot.toPhysicalRow(o+e),i.hot.toPhysicalColumn(r+t));_e(i.changes,l)&&(a[o][r]=i.changes[l])})}),a}},{key:"getSourceDataAtCell",value:function(e,t){var n=this._coordId(e,t);return _e(this.changes,n)?this.changes[n]:this.hot.getSourceDataAtCell(e,t)}},{key:"getSourceDataByRange",value:function(e,t,n,o){return this.hot.getSourceDataArray(e,t,n,o)}},{key:"getRawDataAtCell",value:function(e,t){return this.getSourceDataAtCell(this.hot.toPhysicalRow(e),this.hot.toPhysicalColumn(t))}},{key:"getRawDataByRange",value:function(e,t,n,o){var i=this,a=[];return Nl(e,n,function(e){var n=[];Nl(t,o,function(t){var o=[i.hot.toPhysicalRow(e),i.hot.toPhysicalColumn(t)],a=o[0],r=o[1],l=i._coordId(a,r);_e(i.changes,l)?n.push(i.changes[l]):n.push(i.getSourceDataAtCell(a,r))}),a.push(n)}),a}},{key:"updateSourceData",value:function(e,t,n){this.hot.setSourceDataAtCell(e,this.hot.colToProp(t),n)}},{key:"_coordId",value:function(e,t){return"".concat(e,":").concat(t)}},{key:"destroy",value:function(){this.hot=null,this.changes=null}}])&&iR(t.prototype,n),o&&iR(t,o),e}();function rR(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var lR=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t}var t,n,o;return t=e,(n=[{key:"push",value:function(){var e;(e=this.items).push.apply(e,arguments)}},{key:"pop",value:function(){return this.items.pop()}},{key:"peek",value:function(){return this.isEmpty()?void 0:this.items[this.items.length-1]}},{key:"isEmpty",value:function(){return!this.size()}},{key:"size",value:function(){return this.items.length}}])&&rR(t.prototype,n),o&&rR(t,o),e}();function sR(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var cR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sheet=t,this.stack=new lR}var t,n,o;return t=e,(n=[{key:"save",value:function(e,t,n){var o=this.sheet,i=o.matrix,a=o.dataProvider,r=[];K(i.data,function(o){var i=o.row,l=o.column;if(o[e]<t||o[e]>t+(n-1)){var s=a.getSourceDataAtCell(i,l);r.push({row:i,column:l,value:s})}}),this.stack.push({axis:e,index:t,amount:n,changes:r})}},{key:"restore",value:function(){var e=this.sheet,t=e.matrix,n=e.dataProvider,o=this.stack.pop(),i=o.axis,a=o.index,r=o.amount,l=o.changes;l&&K(l,function(e){e[i]>a+(r-1)&&(e[i]-=r);var o=e.row,l=e.column,s=e.value;n.getSourceDataAtCell(o,l)!==s&&(n.updateSourceData(o,l,s),t.getCellAt(o,l).setState(fI.STATE_OUT_OFF_DATE))})}},{key:"destroy",value:function(){this.sheet=null,this.stack=null}}])&&sR(t.prototype,n),o&&sR(t,o),e}();function uR(e){"@babel/helpers - typeof";return(uR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function fR(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pR(e,t,n){return(pR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yR(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mR(e,t){return(mR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=yR(e);if(t){var i=yR(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===uR(t)||"function"==typeof t))return t;return bR(e)}(this,n)}}function bR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yR(e){return(yR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mR(e,t)}(a,Wv);var t,n,o,i=vR(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).eventManager=new Gi(bR(t)),t.dataProvider=new aR(t.hot),t.sheet=new oR(t.hot,t.dataProvider),t.undoRedoSnapshot=new cR(t.sheet),t._skipRendering=!1,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"formulas"}},{key:"PLUGIN_PRIORITY",get:function(){return 260}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().formulas}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var t=this.hot.getSettings().formulas;pe(t)&&pe(t.variables)&&ve(t.variables,function(t,n){return e.setVariable(n,t)}),this.addHook("afterColumnSort",function(){return e.onAfterColumnSort.apply(e,arguments)}),this.addHook("afterCreateCol",function(){return e.onAfterCreateCol.apply(e,arguments)}),this.addHook("afterCreateRow",function(){return e.onAfterCreateRow.apply(e,arguments)}),this.addHook("afterLoadData",function(){return e.onAfterLoadData()}),this.addHook("afterRemoveCol",function(){return e.onAfterRemoveCol.apply(e,arguments)}),this.addHook("afterRemoveRow",function(){return e.onAfterRemoveRow.apply(e,arguments)}),this.addHook("afterSetDataAtCell",function(){return e.onAfterSetDataAtCell.apply(e,arguments)}),this.addHook("afterSetDataAtRowProp",function(){return e.onAfterSetDataAtCell.apply(e,arguments)}),this.addHook("beforeColumnSort",function(){return e.onBeforeColumnSort.apply(e,arguments)}),this.addHook("beforeCreateCol",function(){return e.onBeforeCreateCol.apply(e,arguments)}),this.addHook("beforeCreateRow",function(){return e.onBeforeCreateRow.apply(e,arguments)}),this.addHook("beforeRemoveCol",function(){return e.onBeforeRemoveCol.apply(e,arguments)}),this.addHook("beforeRemoveRow",function(){return e.onBeforeRemoveRow.apply(e,arguments)}),this.addHook("beforeValidate",function(){return e.onBeforeValidate.apply(e,arguments)}),this.addHook("beforeValueRender",function(){return e.onBeforeValueRender.apply(e,arguments)}),this.addHook("modifyData",function(){return e.onModifyData.apply(e,arguments)}),this.sheet.addLocalHook("afterRecalculate",function(){return e.onSheetAfterRecalculate.apply(e,arguments)}),pR(yR(a.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){pR(yR(a.prototype),"disablePlugin",this).call(this)}},{key:"getCellValue",value:function(e,t){var n=this.sheet.getCellAt(e,t);return n?n.getError()||n.getValue():void 0}},{key:"hasComputedCellValue",value:function(e,t){return null!==this.sheet.getCellAt(e,t)}},{key:"recalculate",value:function(){this.sheet.recalculate()}},{key:"recalculateFull",value:function(){this.sheet.recalculateFull()}},{key:"recalculateOptimized",value:function(){this.sheet.recalculateOptimized()}},{key:"setVariable",value:function(e,t){this.sheet.setVariable(e,t)}},{key:"getVariable",value:function(e){return this.sheet.getVariable(e)}},{key:"onSheetAfterRecalculate",value:function(e){if(this._skipRendering)this._skipRendering=!1;else{var t=this.hot;K(e,function(e){if(e instanceof fI){var n=e.row,o=e.column;t.validateCell(t.getDataAtCell(n,o),t.getCellMeta(n,o),function(){})}}),t.render()}}},{key:"onModifyData",value:function(e,t,n,o){"get"===o&&this.hasComputedCellValue(e,t)?n.value=this.getCellValue(e,t):"set"===o&&DO(n.value)&&(n.value=RO(n.value))}},{key:"onBeforeValueRender",value:function(e){var t,n=e;return IO(n)&&(n=IO(t=n)?t.substr(1):t),n}},{key:"onBeforeValidate",value:function(e,t,n){var o=this.hot.propToCol(n),i=e;return this.hasComputedCellValue(t,o)&&(i=this.getCellValue(t,o)),i}},{key:"onAfterSetDataAtCell",value:function(e,t){var n=this;"loadData"!==t&&(this.dataProvider.clearChanges(),K(e,function(e){var t=dR(e,4),o=t[0],i=t[1],a=t[2],r=t[3],l=n.hot.propToCol(i),s=n.hot.toPhysicalRow(o),c=r;DO(c)&&(c=RO(c)),n.dataProvider.collectChanges(s,l,c),a!==c&&n.sheet.applyChanges(s,l,c)}),this.recalculate())}},{key:"onBeforeCreateRow",value:function(e,t,n){"UndoRedo.undo"===n&&this.undoRedoSnapshot.restore()}},{key:"onAfterCreateRow",value:function(e,t,n){this.sheet.alterManager.triggerAlter("insert_row",e,t,"UndoRedo.undo"!==n)}},{key:"onBeforeRemoveRow",value:function(e,t){this.undoRedoSnapshot.save("row",e,t)}},{key:"onAfterRemoveRow",value:function(e,t){this.sheet.alterManager.triggerAlter("remove_row",e,t)}},{key:"onBeforeCreateCol",value:function(e,t,n){"UndoRedo.undo"===n&&this.undoRedoSnapshot.restore()}},{key:"onAfterCreateCol",value:function(e,t,n){this.sheet.alterManager.triggerAlter("insert_column",e,t,"UndoRedo.undo"!==n)}},{key:"onBeforeRemoveCol",value:function(e,t){this.undoRedoSnapshot.save("column",e,t)}},{key:"onAfterRemoveCol",value:function(e,t){this.sheet.alterManager.triggerAlter("remove_column",e,t)}},{key:"onBeforeColumnSort",value:function(e,t){this.sheet.alterManager.prepareAlter("column_sorting",e,t)}},{key:"onAfterColumnSort",value:function(e,t){this.sheet.alterManager.triggerAlter("column_sorting",e,t)}},{key:"onAfterLoadData",value:function(){this._skipRendering=!0,this.recalculateFull()}},{key:"destroy",value:function(){this.dataProvider.destroy(),this.dataProvider=null,this.sheet.destroy(),this.sheet=null,pR(yR(a.prototype),"destroy",this).call(this)}}])&&fR(t.prototype,n),o&&fR(t,o),a}();function wR(e){"@babel/helpers - typeof";return(wR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CR(e,t,n){return(CR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SR(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function kR(e,t){return(kR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=SR(e);if(t){var i=SR(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===wR(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function SR(e){return(SR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var TR=!1,ER=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kR(e,t)}(a,Wv);var t,n,o,i=xR(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).settings=null,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"headerTooltips"}},{key:"PLUGIN_PRIORITY",get:function(){return 270}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().headerTooltips}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(TR||(TR=!0,No("The Header Tooltips plugin is deprecated and will be removed in the next major release")),this.settings=this.hot.getSettings().headerTooltips,this.parseSettings(),this.addHook("afterGetColHeader",function(t,n){return e.onAfterGetHeader(t,n)}),this.addHook("afterGetRowHeader",function(t,n){return e.onAfterGetHeader(t,n)}),CR(SR(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.settings=null,this.clearTitleAttributes(),CR(SR(a.prototype),"disablePlugin",this).call(this)}},{key:"parseSettings",value:function(){"boolean"==typeof this.settings&&(this.settings={rows:!0,columns:!0,onlyTrimmed:!1})}},{key:"clearTitleAttributes",value:function(){var e=this.hot.view.wt.getSetting("columnHeaders").length,t=this.hot.view.wt.wtTable.THEAD,n=this.hot.view.wt.wtOverlays.topOverlay.clone.wtTable.THEAD,o=this.hot.view.wt.wtOverlays.topLeftCornerOverlay,i=o?o.clone.wtTable.THEAD:null;Nl(0,e-1,function(e){var o=t.childNodes[e],a=n.childNodes[e],r=i?i.childNodes[e]:null;Nl(0,o.childNodes.length-1,function(e){o.childNodes[e].removeAttribute("title"),a&&a.childNodes[e]&&a.childNodes[e].removeAttribute("title"),i&&r&&r.childNodes[e]&&r.childNodes[e].removeAttribute("title")})})}},{key:"onAfterGetHeader",value:function(e,t){var n=t.querySelector("span"),o="THEAD"===t.parentNode.parentNode.nodeName;(o&&this.settings.columns||!o&&this.settings.rows)&&(this.settings.onlyTrimmed?un(n)>=un(t)&&0!==un(n)&&t.setAttribute("title",n.textContent):t.setAttribute("title",n.textContent))}},{key:"destroy",value:function(){this.settings=null,CR(SR(a.prototype),"destroy",this).call(this)}}])&&_R(t.prototype,n),o&&_R(t,o),a}();function OR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.label,n=void 0===t?"":t,o=e.colspan,i=void 0===o?1:o,a=e.origColspan,r=void 0===a?1:a,l=e.collapsible,s=void 0!==l&&l,c=e.crossHiddenColumns,u=void 0===c?[]:c,d=e.isCollapsed,h=void 0!==d&&d,f=e.isHidden,p=void 0!==f&&f,m=e.isRoot,v=void 0!==m&&m,b=e.isPlaceholder;return{label:n,colspan:i,origColspan:r,collapsible:s,isCollapsed:h,crossHiddenColumns:u,isHidden:p,isRoot:v,isPlaceholder:void 0!==b&&b}}function DR(e){return function(e){if(Array.isArray(e))return IR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return IR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function RR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function MR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PR(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function AR(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function LR(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,VR(e,t,"get"))}function NR(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,VR(e,t,"set"),n),n}function VR(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var FR=["label","collapsible"],BR=new WeakMap,HR=new WeakMap,jR=new WeakMap,$R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),BR.set(this,{writable:!0,value:[]}),HR.set(this,{writable:!0,value:0}),jR.set(this,{writable:!0,value:1/0})}var t,n,o;return t=e,(n=[{key:"setColumnsLimit",value:function(e){NR(this,jR,e)}},{key:"setData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];NR(this,BR,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=[];if(0===t)return n;K(e,function(e){var o=[],i=0;n.push(o),K(e,function(e){var n=OR();if(pe(e)){var a=e.label,r=e.colspan;n.label=nt(a),"number"==typeof r&&r>1&&(n.colspan=r,n.origColspan=r)}else n.label=nt(e);var l=!1;if((i+=n.origColspan)>=t&&(n.colspan=n.origColspan-(i-t),n.origColspan=n.colspan,l=!0),o.push(n),n.colspan>1)for(var s=0;s<n.colspan-1;s++)o.push({label:"",isPlaceholder:!0});return!l})});var o=Math.max.apply(Math,DR(q(n,function(e){return e.length})));return K(n,function(e){if(e.length<o){var t=q(new Array(o-e.length),function(){return OR()});e.splice.apply(e,[e.length,0].concat(DR(t)))}}),n}(e,LR(this,jR))),NR(this,HR,LR(this,BR).length)}},{key:"getData",value:function(){return LR(this,BR)}},{key:"mergeWith",value:function(e){var t=this;K(e,function(e){var n=e.row,o=e.col,i=PR(e,["row","col"]),a=t.getHeaderSettings(n,o);null!==a&&se(a,i,FR)})}},{key:"map",value:function(e){K(LR(this,BR),function(t){K(t,function(t){var n=e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RR(Object(n),!0).forEach(function(t){MR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t));pe(n)&&se(t,n,FR)})})}},{key:"getHeaderSettings",value:function(e,t){var n;if(e>=LR(this,HR)||e<0)return null;var o=LR(this,BR)[e];return t>=o.length?null:null!==(n=o[t])&&void 0!==n?n:null}},{key:"getHeadersSettings",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=[];if(e>=LR(this,HR)||e<0)return o;for(var i=LR(this,BR)[e],a=0,r=t;r<i.length;r++){var l=i[r];if(l.isPlaceholder)throw new Error("The first column settings cannot overlap the other header layers");if(a+=l.colspan,o.push(l),l.colspan>1&&(r+=l.colspan-1),a===n)break;if(a>n)throw new Error("The last column settings cannot overlap the other header layers")}return o}},{key:"getLayersCount",value:function(){return LR(this,HR)}},{key:"getColumnsCount",value:function(){return LR(this,HR)>0?LR(this,BR)[0].length:0}},{key:"clear",value:function(){NR(this,BR,[]),NR(this,HR,0)}}])&&AR(t.prototype,n),o&&AR(t,o),e}();function UR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function zR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UR(Object(n),!0).forEach(function(t){qR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WR(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KR(e){return function(e){if(Array.isArray(e))return GR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return GR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var JR=new Map([["DF-pre-order",function e(t,n){for(var o=t.call(n,this),i=0;i<this.childs.length;i++){if(!1===o)return!1;o=e.call(this.childs[i],t,n)}return o}],["DF-post-order",function e(t,n){for(var o=0;o<this.childs.length;o++)if(!1===e.call(this.childs[o],t,n))return!1;return t.call(n,this)}],["BF",function(e,t){var n=[this];!function o(){if(0!==n.length){var i=n.shift();n.push.apply(n,KR(i.childs)),!1!==e.call(t,i)&&o()}}()}]]),YR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qR(this,"data",{}),qR(this,"parent",null),qR(this,"childs",[]),this.data=t}var t,n,o;return t=e,(n=[{key:"addChild",value:function(e){e.parent=this,this.childs.push(e)}},{key:"cloneTree",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=new e(zR({},t.data)),o=0;o<t.childs.length;o++)n.addChild(this.cloneTree(t.childs[o]));return n}},{key:"replaceTreeWith",value:function(e){this.data=zR({},e.data),this.childs=[];for(var t=0;t<e.childs.length;t++)this.addChild(e.childs[t])}},{key:"walkDown",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BF";if(!JR.has(t))throw new Error('Traversal strategy "'.concat(t,'" does not exist'));JR.get(t).call(this,e,this)}},{key:"walkUp",value:function(e){var t=this;!function n(o){!1!==e.call(t,o)&&null!==o.parent&&n(o.parent)}(this)}}])&&WR(t.prototype,n),o&&WR(t,o),e}();function XR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function QR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XR(Object(n),!0).forEach(function(t){ZR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ZR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tM(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function nM(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oM(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,aM(e,t,"get"))}function iM(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,aM(e,t,"set"),n),n}function aM(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var rM,lM,sM=new WeakMap,cM=new WeakMap,uM=new WeakMap,dM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),sM.set(this,{writable:!0,value:new Map}),cM.set(this,{writable:!0,value:new Map}),uM.set(this,{writable:!0,value:null}),iM(this,uM,t)}var t,n,o;return t=e,(n=[{key:"getRoots",value:function(){return Array.from(oM(this,sM).values())}},{key:"getRootByColumn",value:function(e){var t;return oM(this,cM).has(e)&&(t=oM(this,sM).get(oM(this,cM).get(e))),t}},{key:"getNode",value:function(e,t){var n=this.getRootByColumn(t);if(n){var o,i=t-oM(this,cM).get(t),a=0;return n.walkDown(function(t){var n=t.data,r=n.origColspan,l=n.headerLevel;if(e===l){if(i>=a&&i<=a+r-1)return o=t,!1;a+=r}}),o}}},{key:"rebuildTreeIndex",value:function(){var e=this,t=0;oM(this,cM).clear(),K(oM(this,sM),function(n){for(var o=eM(n,2)[1].data.colspan,i=t;i<t+o;i++)oM(e,cM).set(i,t);t+=o})}},{key:"buildTree",value:function(){this.clear();for(var e=oM(this,uM).getColumnsCount(),t=0;t<e;){var n=oM(this,uM).getHeaderSettings(0,t),o=new YR;oM(this,sM).set(t,o),this.buildLeaves(o,t,0,n.origColspan),t+=n.origColspan}this.rebuildTreeIndex()}},{key:"buildLeaves",value:function(e,t,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=oM(this,uM).getHeadersSettings(n,t,i);n+=1,K(a,function(i){var a,r=QR(QR({},i),{},{headerLevel:n-1,columnIndex:t});1===n?(e.data=r,a=e):(a=new YR(r),e.addChild(a)),n<oM(o,uM).getLayersCount()&&o.buildLeaves(a,t,n,i.origColspan),t+=i.origColspan})}},{key:"clear",value:function(){oM(this,sM).clear(),oM(this,cM).clear()}}])&&nM(t.prototype,n),o&&nM(t,o),e}();function hM(e,t){e.walkDown(function(e){var n=e.data,o=e.childs;if(!n.isHidden&&(t(n.columnIndex),0===o.length))for(var i=1;i<n.colspan;i++)t(n.columnIndex+i)})}function fM(e,t){var n=e.childs;if(0!==n.length)return n[0].data[t]}function pM(e){return fM(e,"origColspan")===e.data.origColspan}function mM(e){var t=e.data,n=e.childs;if(!t.isCollapsed||t.isHidden||t.origColspan<=1)return{rollbackModification:function(){},affectedColumns:[],colspanCompensation:0};if(pM(e))return mM(n[0]);t.isCollapsed=!1;var o=n.slice(1),i=new Set,a=0;if(o.length>0)K(o,function(e){e.replaceTreeWith(e.data.clonedTree),e.data.clonedTree=null;var t=e.data;a+=t.colspan,hM(e,function(e){i.add(e)})});else{var r=t.colspan,l=t.origColspan,s=t.columnIndex;a=l-r;for(var c=1;c<l;c++)i.add(s+c)}return e.walkUp(function(e){var t=e.data;t.colspan+=a,t.colspan>=t.origColspan?(t.colspan=t.origColspan,t.isCollapsed=!1):pM(e)&&(t.isCollapsed=fM(e,"isCollapsed"))}),{rollbackModification:function(){return vM(e)},affectedColumns:Array.from(i),colspanCompensation:a}}function vM(e){var t,n=e.data,o=e.childs;if(n.isCollapsed||n.isHidden||n.origColspan<=1)return{rollbackModification:function(){},affectedColumns:[],colspanCompensation:0};if(pM(e))return vM(o[0]);n.isCollapsed=!0;var i=o.slice(1),a=new Set;if(i.length>0)K(i,function(e){hM(e,function(e){a.add(e)}),e.data.clonedTree=e.cloneTree(),e.walkDown(function(e){e.data.isHidden=!0})});else for(var r=n.origColspan,l=n.columnIndex,s=1;s<r;s++){var c=l+s;a.add(c)}var u=n.colspan-(null!==(t=fM(e,"colspan"))&&void 0!==t?t:1);return e.walkUp(function(e){var t=e.data;t.colspan-=u,t.colspan<=1?(t.colspan=1,t.isCollapsed=!0):pM(e)&&(t.isCollapsed=fM(e,"isCollapsed"))}),{rollbackModification:function(){return mM(e)},affectedColumns:Array.from(a),colspanCompensation:u}}var bM=new Map([["collapse",vM],["expand",mM],["hide-column",function(e,t){if(!Number.isInteger(t))throw new Error("The passed gridColumnIndex argument has invalid type.");if(e.childs.length>0)throw new Error(Ze(rM||(n=["The passed node is not the last node on the tree. Only for \nthe last node, the hide column modification can be applied."],(o=["The passed node is not the last node on the tree. Only for\\x20\nthe last node, the hide column modification can be applied."])||(o=n.slice(0)),rM=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(o)}})))));var n,o;if(!e.data.crossHiddenColumns.includes(t)){var i=!1;e.walkUp(function(e){if(e.data.collapsible)return i=!0,!1}),i||e.walkUp(function(e){var n=e.data;n.crossHiddenColumns.push(t),n.colspan>1?n.colspan-=1:n.isHidden=!0})}}],["show-column",function(e,t){if(!Number.isInteger(t))throw new Error("The passed gridColumnIndex argument has invalid type.");if(e.childs.length>0)throw new Error(Ze(lM||(n=["The passed node is not the last node on the tree. Only for \nthe last node, the show column modification can be applied."],(o=["The passed node is not the last node on the tree. Only for\\x20\nthe last node, the show column modification can be applied."])||(o=n.slice(0)),lM=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(o)}})))));var n,o;if(e.data.crossHiddenColumns.includes(t)){var i=!1;e.walkUp(function(e){if(e.data.collapsible)return i=!0,!1}),i||e.walkUp(function(e){var n=e.data;n.crossHiddenColumns.splice(n.crossHiddenColumns.indexOf(t),1),!n.isHidden&&n.colspan<n.origColspan&&(n.colspan+=1),n.isHidden=!1})}}]]);function yM(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gM(e){var t=[];return K(e,function(e){e.walkDown(function(e){for(var n=e.data,o=n.origColspan,i=n.columnIndex,a=n.headerLevel,r=n.crossHiddenColumns,l=function(e,t){var n;Array.isArray(e[t])?n=e[t]:(n=[],e[t]=n);return n}(t,a),s=!1,c=i;c<i+o;c++){if(r.includes(c)||s)l.push({label:"",isPlaceholder:!0});else{var u=wM(n);u.isRoot=!0,l.push(u),s=!0}}})}),t}function wM(e){var t=OR(e);t.crossHiddenColumns;return yM(t,["crossHiddenColumns"])}function _M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_M(Object(n),!0).forEach(function(t){kM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xM(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function SM(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function TM(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,OM(e,t,"set"),n),n}function EM(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,OM(e,t,"get"))}function OM(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var DM=new WeakMap,IM=new WeakMap,RM=new WeakMap,MM=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),DM.set(this,{writable:!0,value:new $R}),IM.set(this,{writable:!0,value:new dM(EM(this,DM))}),RM.set(this,{writable:!0,value:[[]]})}var t,n,o;return t=e,(n=[{key:"setState",value:function(e){EM(this,DM).setData(e);var t=!1;try{EM(this,IM).buildTree()}catch(e){EM(this,IM).clear(),EM(this,DM).clear(),t=!0}return TM(this,RM,gM(EM(this,IM).getRoots())),t}},{key:"setColumnsLimit",value:function(e){EM(this,DM).setColumnsLimit(e)}},{key:"mergeStateWith",value:function(e){var t=this,n=q(e,function(e){var n=e.row,o=xM(e,["row"]);return CM({row:n<0?t.rowCoordsToLevel(n):n},o)});EM(this,DM).mergeWith(n),EM(this,IM).buildTree(),TM(this,RM,gM(EM(this,IM).getRoots()))}},{key:"mapState",value:function(e){EM(this,DM).map(e),EM(this,IM).buildTree(),TM(this,RM,gM(EM(this,IM).getRoots()))}},{key:"mapNodes",value:function(e){return z(EM(this,IM).getRoots(),function(t,n){return n.walkDown(function(n){var o=e(n.data);void 0!==o&&t.push(o)}),t},[])}},{key:"triggerNodeModification",value:function(e,t,n){t<0&&(t=this.rowCoordsToLevel(t));var o,i=EM(this,IM).getNode(t,n);return i&&(o=function(e,t,n){if(!bM.has(e))throw new Error('The node modifier action ("'.concat(e,'") does not exist.'));return bM.get(e)(t,n)}(e,i,n),TM(this,RM,gM(EM(this,IM).getRoots()))),o}},{key:"triggerColumnModification",value:function(e,t){return this.triggerNodeModification(e,-1,t)}},{key:"rowCoordsToLevel",value:function(e){var t=Math.max(this.getLayersCount(),1),n=t-1;return Math.min(Math.max(e+t,0),n)}},{key:"levelToRowCoords",value:function(e){var t=Math.max(this.getLayersCount(),1),n=-t;return Math.min(Math.max(e-t,n),-1)}},{key:"getHeaderSettings",value:function(e,t){var n,o;return e<0&&(e=this.rowCoordsToLevel(e)),e>=this.getLayersCount()?null:null!==(n=null===(o=EM(this,RM)[e])||void 0===o?void 0:o[t])&&void 0!==n?n:null}},{key:"getHeaderTreeNodeData",value:function(e,t){e<0&&(e=this.rowCoordsToLevel(e));var n=EM(this,IM).getNode(e,t);return n?CM({},n.data):null}},{key:"findLeftMostColumnIndex",value:function(e,t){var n;if((null!==(n=this.getHeaderSettings(e,t))&&void 0!==n?n:{isRoot:!0}).isRoot)return t;var o=t-1;do{var i;if((null!==(i=this.getHeaderSettings(e,o))&&void 0!==i?i:{isRoot:!0}).isRoot)break;o-=1}while(t>=0);return o}},{key:"getLayersCount",value:function(){return EM(this,DM).getLayersCount()}},{key:"getColumnsCount",value:function(){return EM(this,DM).getColumnsCount()}},{key:"clear",value:function(){TM(this,RM,[]),EM(this,DM).clear(),EM(this,IM).clear()}}])&&SM(t.prototype,n),o&&SM(t,o),e}();function PM(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var AM,LM,NM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nestedHeaders=t,this.container=void 0,this.widthsCache=[]}var t,n,o;return t=e,(n=[{key:"buildWidthsMapper",value:function(){this.container=this.nestedHeaders.hot.rootDocument.createElement("div"),this.buildGhostTable(this.container),this.nestedHeaders.hot.rootElement.appendChild(this.container);var e=this.container.querySelectorAll("tr:last-of-type th"),t=e.length;this.widthsCache.length=0;for(var n=0;n<t;n++)this.widthsCache.push(e[n].offsetWidth);this.container.parentNode.removeChild(this.container),this.container=null,this.nestedHeaders.hot.render()}},{key:"buildGhostTable",value:function(e){for(var t=this.nestedHeaders.hot.rootDocument,n=t.createDocumentFragment(),o=t.createElement("table"),i=!1,a=!!this.nestedHeaders.hot.getSettings().dropdownMenu,r=this.nestedHeaders.getLayersCount(),l=this.nestedHeaders.hot.countCols(),s=r-1,c=0;c<r;c++){var u=t.createElement("tr");i=!1;for(var d=0;d<l;d++){var h=t.createElement("th"),f=de(this.nestedHeaders.getHeaderSettings(c,d));f&&!f.isHidden&&(c===s&&(f.colspan>1&&(i=!0),a&&(f.label+='<button class="changeType"></button>')),Yt(h,f.label),h.colSpan=f.colspan,u.appendChild(h))}o.appendChild(u)}if(i){for(var p=t.createElement("tr"),m=0;m<l;m++){var v=t.createElement("th");p.appendChild(v)}o.appendChild(p)}n.appendChild(o),e.appendChild(n)}},{key:"clear",value:function(){this.container=null,this.widthsCache.length=0}}])&&PM(t.prototype,n),o&&PM(t,o),e}();function VM(e){"@babel/helpers - typeof";return(VM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FM(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function BM(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function HM(e,t,n){return(HM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zM(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function jM(e,t){return(jM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=zM(e);if(t){var i=zM(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===VM(t)||"function"==typeof t))return t;return UM(e)}(this,n)}}function UM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zM(e){return(zM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qM(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,GM(e,t,"set"),n),n}function KM(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,GM(e,t,"get"))}function GM(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var JM=new WeakMap,YM=new WeakMap,XM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jM(e,t)}(a,Wv);var t,n,o,i=$M(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),JM.set(UM(e),{writable:!0,value:new MM}),YM.set(UM(e),{writable:!0,value:null}),WM(UM(e),"ghostTable",new NM(UM(e))),WM(UM(e),"detectedOverlappedHeaders",!1),e}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"nestedHeaders"}},{key:"PLUGIN_PRIORITY",get:function(){return 280}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().nestedHeaders}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var t=this.hot.getSettings().nestedHeaders;Array.isArray(t)&&Array.isArray(t[0])||No(Ze(AM||(AM=FM(["Your Nested Headers plugin configuration is invalid. The settings has to be \n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]"],["Your Nested Headers plugin configuration is invalid. The settings has to be\\x20\n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]"])))),this.addHook("init",function(){return e.onInit()}),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("beforeOnCellMouseDown",function(){return e.onBeforeOnCellMouseDown.apply(e,arguments)}),this.addHook("afterOnCellMouseDown",function(){return e.onAfterOnCellMouseDown.apply(e,arguments)}),this.addHook("beforeOnCellMouseOver",function(){return e.onBeforeOnCellMouseOver.apply(e,arguments)}),this.addHook("afterGetColumnHeaderRenderers",function(t){return e.onAfterGetColumnHeaderRenderers(t)}),this.addHook("modifyColWidth",function(){return e.onModifyColWidth.apply(e,arguments)}),this.addHook("beforeHighlightingColumnHeader",function(){return e.onBeforeHighlightingColumnHeader.apply(e,arguments)}),this.addHook("afterViewportColumnCalculatorOverride",function(){return e.onAfterViewportColumnCalculatorOverride.apply(e,arguments)}),HM(zM(a.prototype),"enablePlugin",this).call(this),this.updatePlugin()}}},{key:"updatePlugin",value:function(){var e=this;if(this.hot.view){var t=this.hot.getSettings().nestedHeaders;KM(this,JM).setColumnsLimit(this.hot.countSourceCols()),Array.isArray(t)&&(this.detectedOverlappedHeaders=KM(this,JM).setState(t)),this.detectedOverlappedHeaders&&No(Ze(LM||(LM=FM(["Your Nested Headers plugin setup contains overlapping headers. This kind of configuration \n                        is currently not supported."],["Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\\x20\n                        is currently not supported."])))),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach(function(t,n){var o=!0===t?"hide-column":"show-column";KM(e,JM).triggerColumnModification(o,n)}),!KM(this,YM)&&this.enabled&&qM(this,YM,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(function(t){t.forEach(function(t){var n=t.op,o=t.index,i=t.newValue;if("replace"===n){var a=!0===i?"hide-column":"show-column";KM(e,JM).triggerColumnModification(a,o)}})})),this.ghostTable.buildWidthsMapper(),HM(zM(a.prototype),"updatePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.clearColspans(),KM(this,JM).clear(),KM(this,YM).unsubscribe(),qM(this,YM,null),this.ghostTable.clear(),HM(zM(a.prototype),"disablePlugin",this).call(this)}},{key:"getStateManager",value:function(){return KM(this,JM)}},{key:"getLayersCount",value:function(){return KM(this,JM).getLayersCount()}},{key:"getHeaderSettings",value:function(e,t){return KM(this,JM).getHeaderSettings(e,t)}},{key:"clearColspans",value:function(){if(this.hot.view)for(var e=this.hot.view.wt,t=e.getSetting("columnHeaders").length,n=e.wtTable.THEAD,o=e.wtOverlays.topOverlay.clone.wtTable.THEAD,i=e.wtOverlays.topLeftCornerOverlay?e.wtOverlays.topLeftCornerOverlay.clone.wtTable.THEAD:null,a=0;a<t;a++){var r=n.childNodes[a];if(!r)break;for(var l=o.childNodes[a],s=i?i.childNodes[a]:null,c=0,u=r.childNodes.length;c<u;c++)r.childNodes[c].removeAttribute("colspan"),Wt(r.childNodes[c],"hiddenHeader"),l&&l.childNodes[c]&&(l.childNodes[c].removeAttribute("colspan"),Wt(l.childNodes[c],"hiddenHeader")),i&&s&&s.childNodes[c]&&(s.childNodes[c].removeAttribute("colspan"),Wt(s.childNodes[c],"hiddenHeader"))}}},{key:"headerRendererFactory",value:function(e){var t=this,n=this.hot.view.wt.getSetting("fixedColumnsLeft");return function(o,i){var a,r=t.hot,l=r.rootDocument,s=r.columnIndexMapper,c=r.view,u=s.getVisualFromRenderableIndex(o);null===u&&(u=o),i.removeAttribute("colspan"),Wt(i,"hiddenHeader");var d=null!==(a=KM(t,JM).getHeaderSettings(e,u))&&void 0!==a?a:{label:""},h=d.colspan,f=d.label,p=d.isHidden;if(d.isPlaceholder||p)zt(i,"hiddenHeader");else if(h>1){var m,v,b=null===(m=c.wt.wtOverlays.topLeftCornerOverlay)||void 0===m?void 0:m.clone.wtTable.THEAD.contains(i),y=null===(v=c.wt.wtOverlays.leftOverlay)||void 0===v?void 0:v.clone.wtTable.THEAD.contains(i),g=b||y?Math.min(h,n-o):h;g>1&&i.setAttribute("colspan",g)}var w=l.createElement("div"),_=l.createElement("span");zt(w,"relative"),zt(_,"colHeader"),Yt(_,f),w.appendChild(_),Kt(i),i.appendChild(w),t.hot.runHooks("afterGetColHeader",u,i)}}},{key:"onBeforeHighlightingColumnHeader",value:function(e,t,n){var o=KM(this,JM).getHeaderTreeNodeData(t,e);if(!o)return e;var i=n.classNames,a=n.columnCursor,r=n.selectionType,l=n.selectionWidth,s=KM(this,JM).getHeaderSettings(t,e),c=s.isRoot,u=s.colspan;if(r===Ph){if(!c)return o.columnIndex}else r===Dh&&(u>l-a||!c)&&(i.length=0);return e}},{key:"onBeforeOnCellMouseDown",value:function(e,t,n,o){this._getHeaderTreeNodeDataByCoords(t)&&(o.column=!0)}},{key:"onAfterOnCellMouseDown",value:function(e,t){var n=this._getHeaderTreeNodeDataByCoords(t);if(n){var o=this.hot.selection,i=o.isSelected()?o.getSelectedRange().current():null,a=[],r=n.columnIndex,l=n.origColspan,s=!o.inInSelection(t);e.shiftKey&&i?t.col<i.from.col?a.push(i.getTopRightCorner().col,r,t.row):t.col>i.from.col?a.push(i.getTopLeftCorner().col,r+l-1,t.row):a.push(r,r+l-1,t.row):(Wi(e)||zi(e)&&s)&&a.push(r,r+l-1,t.row),o.selectColumns.apply(o,a)}}},{key:"onBeforeOnCellMouseOver",value:function(e,t,n,o){var i;if(this.hot.view.isMouseDown()){var a=this._getHeaderTreeNodeDataByCoords(t);if(a){var r=a.columnIndex,l=a.origColspan,s=this.hot.getSelectedRangeLast(),c=s.getTopLeftCorner(),u=s.getBottomRightCorner(),d=s.from;o.column=!0,o.cell=!0;var h=[];t.col<d.col?h.push(u.col,r):t.col>d.col?h.push(c.col,r+l-1):h.push(r,r+l-1),(i=this.hot).selectColumns.apply(i,h)}}}},{key:"onAfterGetColumnHeaderRenderers",value:function(e){if(e){e.length=0;for(var t=0;t<KM(this,JM).getLayersCount();t++)e.push(this.headerRendererFactory(t))}}},{key:"onAfterViewportColumnCalculatorOverride",value:function(e){for(var t=e.startColumn,n=0;n<KM(this,JM).getLayersCount();n++){var o=KM(this,JM).findLeftMostColumnIndex(n,e.startColumn),i=this.hot.columnIndexMapper.getRenderableFromVisualIndex(o);if(i<e.startColumn){t=i;break}}e.startColumn=t}},{key:"onModifyColWidth",value:function(e,t){var n=this.ghostTable.widthsCache[t];return e>n?e:n}},{key:"onInit",value:function(){this.updatePlugin()}},{key:"onAfterLoadData",value:function(e,t){t||this.updatePlugin()}},{key:"destroy",value:function(){qM(this,JM,null),null!==KM(this,YM)&&(KM(this,YM).unsubscribe(),qM(this,YM,null)),HM(zM(a.prototype),"destroy",this).call(this)}},{key:"_getHeaderTreeNodeDataByCoords",value:function(e){if(!(e.row>=0||e.col<0))return KM(this,JM).getHeaderTreeNodeData(e.row,e.col)}}])&&BM(t.prototype,n),o&&BM(t,o),a}();function QM(e){"@babel/helpers - typeof";return(QM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZM(e){return function(e){if(Array.isArray(e))return eP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return eP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eP(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function tP(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function nP(e,t,n){return(nP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rP(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function oP(e,t){return(oP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=rP(e);if(t){var i=rP(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===QM(t)||"function"==typeof t))return t;return aP(e)}(this,n)}}function aP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rP(e){return(rP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sP(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,uP(e,t,"get"))}function cP(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,uP(e,t,"set"),n),n}function uP(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var dP=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]),hP=new WeakMap,fP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oP(e,t)}(a,Wv);var t,n,o,i=iP(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return lP(aP(e=i.call.apply(i,[this].concat(n))),"nestedHeadersPlugin",null),lP(aP(e),"eventManager",new Gi(aP(e))),lP(aP(e),"headerStateManager",null),hP.set(aP(e),{writable:!0,value:null}),e}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"collapsibleColumns"}},{key:"PLUGIN_PRIORITY",get:function(){return 290}},{key:"PLUGIN_DEPS",get:function(){return["plugin:NestedHeaders"]}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().collapsibleColumns}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.hot.getSettings().nestedHeaders||No("You need to configure the Nested Headers plugin in order to use collapsible headers."),cP(this,hP,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",function(){return e.onInit()}),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("afterGetColHeader",function(t,n){return e.onAfterGetColHeader(t,n)}),this.addHook("beforeOnCellMouseDown",function(t,n,o){return e.onBeforeOnCellMouseDown(t,n,o)}),nP(rP(a.prototype),"enablePlugin",this).call(this),this.updatePlugin())}},{key:"updatePlugin",value:function(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){var e=this.hot.getSettings().collapsibleColumns;"boolean"==typeof e?this.headerStateManager.mapState(function(e){return{collapsible:e.origColspan>1}}):Array.isArray(e)&&this.headerStateManager.mergeStateWith(e)}nP(rP(a.prototype),"updatePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),cP(this,hP,null),this.nestedHeadersPlugin=null,this.clearButtons(),nP(rP(a.prototype),"disablePlugin",this).call(this)}},{key:"clearButtons",value:function(){if(this.hot.view){var e=this.hot.view.wt.getSetting("columnHeaders").length,t=this.hot.view.wt.wtTable.THEAD,n=this.hot.view.wt.wtOverlays.topOverlay.clone.wtTable.THEAD,o=this.hot.view.wt.wtOverlays.topLeftCornerOverlay?this.hot.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.THEAD:null,i=function(e){e&&e.parentNode.removeChild(e)};Nl(0,e-1,function(e){var a=t.childNodes[e],r=n.childNodes[e],l=o?o.childNodes[e]:null;Nl(0,a.childNodes.length-1,function(e){var t=a.childNodes[e].querySelector(".collapsibleIndicator");i(t),r&&r.childNodes[e]&&(t=r.childNodes[e].querySelector(".collapsibleIndicator"),i(t)),o&&l&&l.childNodes[e]&&(t=l.childNodes[e].querySelector(".collapsibleIndicator"),i(t))})})}}},{key:"expandSection",value:function(e){this.toggleCollapsibleSection([e],"expand")}},{key:"collapseSection",value:function(e){this.toggleCollapsibleSection([e],"collapse")}},{key:"toggleAllCollapsibleSections",value:function(e){var t=this,n=this.headerStateManager.mapNodes(function(e){var n=e.collapsible,o=e.origColspan,i=e.headerLevel,a=e.columnIndex;if(!0===n&&o>1)return{row:t.headerStateManager.levelToRowCoords(i),col:a}});this.toggleCollapsibleSection(n,e)}},{key:"collapseAll",value:function(){this.toggleAllCollapsibleSections("collapse")}},{key:"expandAll",value:function(){this.toggleAllCollapsibleSections("expand")}},{key:"toggleCollapsibleSection",value:function(e,t){var n=this;if(!dP.has(t))throw new Error("Unsupported action is passed (".concat(t,")."));if(Array.isArray(e)){var o=W(e,function(e){return e.row<0}),i=o.length>0;K(o,function(e){var o,a=e.row,r=e.col,l=null!==(o=n.headerStateManager.getHeaderSettings(a,r))&&void 0!==o?o:{},s=l.collapsible,c=l.isCollapsed;if(!s||c&&"collapse"===t||!c&&"expand"===t)return i=!1,!1});var a=[],r=[];i&&K(o,function(e){var o=e.row,i=e.col,l=n.headerStateManager.triggerNodeModification(t,o,i),s=l.colspanCompensation,c=l.affectedColumns,u=l.rollbackModification;s>0&&(r.push.apply(r,ZM(c)),a.push(u))});var l=this.getCollapsedColumns(),s=[];"collapse"===t?s=Z([].concat(ZM(l),r)):"expand"===t&&(s=W(l,function(e){return!r.includes(e)}));var c=dP.get(t);if(!1!==this.hot.runHooks(c.beforeHook,l,s,i)){this.hot.batchExecution(function(){K(r,function(e){sP(n,hP).setValueAtIndex(n.hot.toPhysicalColumn(e),c.hideColumn)})},!0);var u=this.getCollapsedColumns().length!==l.length;this.hot.runHooks(c.afterHook,l,s,i,u),this.hot.render(),this.hot.view.adjustElementsSize(!0)}else K(a,function(e){e()})}}},{key:"getCollapsedColumns",value:function(){return sP(this,hP).getHiddenIndexes()}},{key:"generateIndicator",value:function(e,t){var n=this.hot.rootDocument.createElement("div"),o=this.headerStateManager.getHeaderSettings(e,t);return zt(n,"collapsibleIndicator"),o.isCollapsed?(zt(n,"collapsed"),Xt(n,"+")):(zt(n,"expanded"),Xt(n,"-")),n}},{key:"onAfterGetColHeader",value:function(e,t){var n,o=t.parentNode,i=o.parentNode,a=-1*i.childNodes.length+Array.prototype.indexOf.call(i.childNodes,o),r=null!==(n=this.headerStateManager.getHeaderSettings(a,e))&&void 0!==n?n:{},l=r.collapsible,s=r.origColspan;if(l&&s>1&&e>=this.hot.getSettings().fixedColumnsLeft){var c=this.generateIndicator(a,e);t.querySelector("div:first-child").appendChild(c)}}},{key:"onBeforeOnCellMouseDown",value:function(e,t){Ut(e.target,"collapsibleIndicator")&&(Ut(e.target,"expanded")?(this.eventManager.fireEvent(e.target,"mouseup"),this.toggleCollapsibleSection([t],"collapse")):Ut(e.target,"collapsed")&&(this.eventManager.fireEvent(e.target,"mouseup"),this.toggleCollapsibleSection([t],"expand")),$i(e))}},{key:"onInit",value:function(){this.updatePlugin()}},{key:"onAfterLoadData",value:function(e,t){t||this.updatePlugin()}},{key:"destroy",value:function(){cP(this,hP,null),nP(rP(a.prototype),"destroy",this).call(this)}}])&&tP(t.prototype,n),o&&tP(t,o),a}();function pP(e){return function(e){if(Array.isArray(e))return mP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return mP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mP(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function vP(e){"@babel/helpers - typeof";return(vP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bP(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var yP=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=n,this.data=null,this.plugin=t,this.parentReference=new WeakMap,this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}}var t,n,o;return t=e,(n=[{key:"setData",value:function(e){this.data=e}},{key:"getData",value:function(){return this.data}},{key:"getRawSourceData",value:function(){var e;return this.plugin.disableCoreAPIModifiers(),e=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),e}},{key:"updateWithData",value:function(e){this.setData(e),this.rewriteCache()}},{key:"rewriteCache",value:function(){var e=this;this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},Nl(0,this.data.length-1,function(t){e.cacheNode(e.data[t],0,null)})}},{key:"cacheNode",value:function(e,t,n){var o=this;this.cache.levels[t]||(this.cache.levels[t]=[],this.cache.levelCount+=1),this.cache.levels[t].push(e),this.cache.rows.push(e),this.cache.nodeInfo.set(e,{parent:n,row:this.cache.rows.length-1,level:t}),this.hasChildren(e)&&K(e.__children,function(n){o.cacheNode(n,t+1,e)})}},{key:"getDataObject",value:function(e){return null===e||void 0===e?null:this.cache.rows[e]}},{key:"readTreeNodes",value:function(e,t,n,o){var i=this,a=!1,r=t;if(isNaN(r)&&r.end)return r;var l=e;return l||(l={__children:this.data},a=!0,r-=1),null!==n&&void 0!==n&&r===n?{result:l,end:!0}:null!==o&&void 0!==o&&l===o?{result:r,end:!0}:(r+=1,l.__children&&K(l.__children,function(e){if(i.parentReference.set(e,a?null:l),r=i.readTreeNodes(e,r,n,o),isNaN(r)&&r.end)return!1}),r)}},{key:"mockParent",value:function(){var e=this.mockNode();return e.__children=this.data,e}},{key:"mockNode",value:function(){var e={};return ve(this.data[0],function(t,n){e[n]=null}),e}},{key:"getRowIndex",value:function(e){return null===e||void 0===e?null:this.cache.nodeInfo.get(e).row}},{key:"getRowIndexWithinParent",value:function(e){var t=null;t=isNaN(e)?e:this.getDataObject(e);var n=this.getRowParent(e);return null===n||void 0===n?this.data.indexOf(t):n.__children.indexOf(t)}},{key:"countAllRows",value:function(){var e={__children:this.data};return this.countChildren(e)}},{key:"countChildren",value:function(e){var t=this,n=0,o=e;return isNaN(o)||(o=this.getDataObject(o)),o&&o.__children?(K(o.__children,function(e){n+=1,e.__children&&(n+=t.countChildren(e))}),n):0}},{key:"getRowParent",value:function(e){var t;return t=isNaN(e)?e:this.getDataObject(e),this.getRowObjectParent(t)}},{key:"getRowObjectParent",value:function(e){return e&&"object"===vP(e)?this.cache.nodeInfo.get(e).parent:null}},{key:"getRowLevel",value:function(e){var t=null;return(t=isNaN(e)?e:this.getDataObject(e))?this.getRowObjectLevel(t):null}},{key:"getRowObjectLevel",value:function(e){return null===e||void 0===e?null:this.cache.nodeInfo.get(e).level}},{key:"hasChildren",value:function(e){var t=e;return isNaN(t)||(t=this.getDataObject(t)),!(!t.__children||!t.__children.length)}},{key:"isChild",value:function(e){return null!==this.getRowParent(e)}},{key:"isRowHighestLevel",value:function(e){return!this.isChild(e)}},{key:"isParent",value:function(e){var t,n=e;return isNaN(n)||(n=this.getDataObject(n)),n&&!!n.__children&&0!==(null===(t=n.__children)||void 0===t?void 0:t.length)}},{key:"addChild",value:function(e,t){var n=t;this.hot.runHooks("beforeAddChild",e,n);var o=null;e&&(o=this.getRowIndex(e)),this.hot.runHooks("beforeCreateRow",o+this.countChildren(e)+1,1);var i=e;e||(i=this.mockParent()),i.__children||(i.__children=[]),n||(n=this.mockNode()),i.__children.push(n),this.rewriteCache();var a=this.getRowIndex(n);this.hot.rowIndexMapper.insertIndexes(a,1),this.hot.runHooks("afterCreateRow",a,1),this.hot.runHooks("afterAddChild",e,n)}},{key:"addChildAtIndex",value:function(e,t,n){var o=n;o||(o=this.mockNode()),this.hot.runHooks("beforeAddChild",e,o,t),e?(this.hot.runHooks("beforeCreateRow",t,1),e.__children.splice(t,null,o),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(e),"__children",e.__children,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",t,1)):(this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row",t,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers()),this.updateWithData(this.getRawSourceData()),o=this.getDataObject(t),this.hot.runHooks("afterAddChild",e,o,t)}},{key:"addSibling",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"below",n=this.translateTrimmedRow(e),o=this.getRowParent(n),i=this.getRowIndexWithinParent(n);switch(t){case"below":this.addChildAtIndex(o,i+1,null);break;case"above":this.addChildAtIndex(o,i,null)}}},{key:"detachFromParent",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=null,i=[];Array.isArray(e)?(Nl(e[0],e[2],function(e){var n=t.translateTrimmedRow(e);i.push(t.getDataObject(n))}),Nl(0,i.length-2,function(e){t.detachFromParent(i[e],!1)}),o=i[i.length-1]):o=e;var a=this.getRowIndex(o),r=this.getRowIndexWithinParent(o),l=this.getRowParent(o),s=this.getRowParent(l),c=this.getRowIndex(s),u=null;this.hot.runHooks("beforeDetachChild",l,o),null!==r&&void 0!==r&&(this.hot.runHooks("beforeRemoveRow",a,1,[a],this.plugin.pluginName),l.__children.splice(r,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",a,1,[a],this.plugin.pluginName),s?(u=c+this.countChildren(s),this.hot.runHooks("beforeCreateRow",u,1,this.plugin.pluginName),s.__children.push(o)):(u=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",u,1,this.plugin.pluginName),this.data.push(o))),this.rewriteCache(),this.hot.runHooks("afterCreateRow",u,1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",l,o),n&&this.hot.render()}},{key:"filterData",value:function(e,t,n){var o=this,i=[];K(n,function(e){i.push(o.getDataObject(e))}),K(i,function(e){var t=o.getRowIndexWithinParent(e),n=o.getRowParent(e);null===n?o.data.splice(t,1):n.__children.splice(t,1)}),this.rewriteCache()}},{key:"spliceData",value:function(e,t,n){var o,i=this.getDataObject(e-1),a=null,r=e;if(i&&i.__children&&0===i.__children.length?(a=i,r=0):e<this.countAllRows()&&(a=this.getRowParent(e),r=this.getRowIndexWithinParent(e)),a)n?(o=a.__children).splice.apply(o,[r,t].concat(pP(n))):a.__children.splice(r,t);else if(n){var l;(l=this.data).splice.apply(l,[r,t].concat(pP(n)))}else this.data.splice(r,t);this.rewriteCache()}},{key:"syncRowWithRawSource",value:function(e){var t=e,n=null;do{null!==(n=this.getRowParent(n))&&(t=n)}while(null!==n);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(t),"__children",t.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}},{key:"moveRow",value:function(e,t,n,o){var i=t===this.hot.countRows(),a=this.getRowParent(e),r=this.getRowIndexWithinParent(e),l=a.__children.slice(r,r+1),s=e>t,c=i?this.getRowParent(t-1):this.getRowParent(t);null!==c&&void 0!==c||(c=this.getRowParent(t-1)),null!==c&&void 0!==c||(c=this.getDataObject(t-1)),c?c.__children||(c.__children=[]):(c=this.getDataObject(t)).__children=[];var u=i||n||o?c.__children.length:this.getRowIndexWithinParent(t),d=a===c;c.__children.splice(u,0,l[0]),a.__children.splice(r+(s&&d?1:0),1),this.syncRowWithRawSource(a),d||this.syncRowWithRawSource(c)}},{key:"translateTrimmedRow",value:function(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(e):e}},{key:"untranslateTrimmedRow",value:function(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(e):e}}])&&bP(t.prototype,n),o&&bP(t,o),e}();var gP=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hot=n,this.plugin=t};function wP(e){"@babel/helpers - typeof";return(wP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CP(e,t){return(CP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=xP(e);if(t){var i=xP(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===wP(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xP(e){return(xP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var SP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CP(e,t)}(a,gP);var t,n,o,i=kP(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,t)).dataManager=n.plugin.dataManager,n.collapsingUI=n.plugin.collapsingUI,n.rowHeaderWidthCache=null,n}return t=a,o=[{key:"CSS_CLASSES",get:function(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}}],(n=[{key:"appendLevelIndicators",value:function(e,t){var n=this.hot.toPhysicalRow(e),o=this.dataManager.getRowLevel(n),i=this.dataManager.getDataObject(n),r=t.getElementsByTagName("DIV")[0],l=r.querySelector("span.rowHeader");if(K(r.querySelectorAll('[class^="ht_nesting"]'),function(e){e&&r.removeChild(e)}),zt(t,a.CSS_CLASSES.indicatorContainer),o){var s=this.hot.rootDocument,c=l.cloneNode(!0);r.innerHTML="",Nl(0,o-1,function(){var e=s.createElement("SPAN");zt(e,a.CSS_CLASSES.emptyIndicator),r.appendChild(e)}),r.appendChild(c)}if(this.dataManager.hasChildren(i)){var u=this.hot.rootDocument.createElement("DIV");zt(t,a.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(n)?zt(u,"".concat(a.CSS_CLASSES.button," ").concat(a.CSS_CLASSES.expandButton)):zt(u,"".concat(a.CSS_CLASSES.button," ").concat(a.CSS_CLASSES.collapseButton)),r.appendChild(u)}}},{key:"updateRowHeaderWidth",value:function(e){var t=e;t||(t=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*t+25),this.hot.render()}}])&&_P(t.prototype,n),o&&_P(t,o),a}();function TP(e){"@babel/helpers - typeof";return(TP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EP(e){return function(e){if(Array.isArray(e))return OP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return OP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OP(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function DP(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function IP(e,t){return(IP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=MP(e);if(t){var i=MP(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===TP(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function MP(e){return(MP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var PP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IP(e,t)}(a,gP);var t,n,o,i=RP(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,t)).dataManager=n.plugin.dataManager,n.collapsedRows=[],n.collapsedRowsStash={stash:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.lastCollapsedRows=n.collapsedRows.slice(0),n.expandMultipleChildren(n.lastCollapsedRows,e)},shiftStash:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;null!==t&&void 0!==t||(t=1/0),K(n.lastCollapsedRows,function(i,a){i>=e&&i<t&&(n.lastCollapsedRows[a]=i+o)})},applyStash:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.collapseMultipleChildren(n.lastCollapsedRows,e),n.lastCollapsedRows=void 0},trimStash:function(e,t){Nl(e,e+t-1,function(e){var t=n.lastCollapsedRows.indexOf(e);t>-1&&n.lastCollapsedRows.splice(t,1)})}},n}return t=a,(n=[{key:"collapseChildren",value:function(e){var t,n=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=[],r=null,l=null;return isNaN(e)?(r=e,l=this.dataManager.getRowIndex(r)):(r=this.dataManager.getDataObject(e),l=e),this.dataManager.hasChildren(r)&&K(r.__children,function(e){a.push(n.dataManager.getRowIndex(e))}),t=this.collapseRows(a,!0,!1),i&&this.trimRows(t),o&&this.renderAndAdjust(),-1===this.collapsedRows.indexOf(l)&&this.collapsedRows.push(l),t}},{key:"collapseMultipleChildren",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];K(e,function(e){i.push.apply(i,EP(t.collapseChildren(e,!1,!1)))}),o&&this.trimRows(i),n&&this.renderAndAdjust()}},{key:"collapseRow",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.collapseRows([e],t)}},{key:"collapseRows",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];return K(e,function(e){i.push(e),n&&t.collapseChildRows(e,i)}),o&&this.trimRows(i),i}},{key:"collapseChildRows",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=(arguments.length>2&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]);this.dataManager.hasChildren(e)&&K(this.dataManager.getDataObject(e).__children,function(e){var o=t.dataManager.getRowIndex(e);n.push(o),t.collapseChildRows(o,n)});o&&this.trimRows(n)}},{key:"expandRow",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.expandRows([e],t)}},{key:"expandRows",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];return K(e,function(e){i.push(e),n&&t.expandChildRows(e,i)}),o&&this.untrimRows(i),i}},{key:"expandChildRows",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=(arguments.length>2&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]);this.dataManager.hasChildren(e)&&K(this.dataManager.getDataObject(e).__children,function(e){if(!t.isAnyParentCollapsed(e)){var o=t.dataManager.getRowIndex(e);n.push(o),t.expandChildRows(o,n)}});o&&this.untrimRows(n)}},{key:"expandChildren",value:function(e){var t,n=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=[],r=null,l=null;return isNaN(e)?(r=e,l=this.dataManager.getRowIndex(e)):(r=this.dataManager.getDataObject(e),l=e),this.collapsedRows.splice(this.collapsedRows.indexOf(l),1),this.dataManager.hasChildren(r)&&K(r.__children,function(e){var t=n.dataManager.getRowIndex(e);a.push(t)}),t=this.expandRows(a,!0,!1),i&&this.untrimRows(t),o&&this.renderAndAdjust(),t}},{key:"expandMultipleChildren",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];K(e,function(e){i.push.apply(i,EP(t.expandChildren(e,!1,!1)))}),o&&this.untrimRows(i),n&&this.renderAndAdjust()}},{key:"collapseAll",value:function(){var e=this,t=[];K(this.dataManager.getData(),function(n){e.dataManager.hasChildren(n)&&t.push(n)}),this.collapseMultipleChildren(t),this.renderAndAdjust()}},{key:"expandAll",value:function(){var e=this,t=[];K(this.dataManager.getData(),function(n){e.dataManager.hasChildren(n)&&t.push(n)}),this.expandMultipleChildren(t),this.renderAndAdjust()}},{key:"trimRows",value:function(e){var t=this;this.hot.batchExecution(function(){K(e,function(e){t.plugin.collapsedRowsMap.setValueAtIndex(e,!0)})},!0)}},{key:"untrimRows",value:function(e){var t=this;this.hot.batchExecution(function(){K(e,function(e){t.plugin.collapsedRowsMap.setValueAtIndex(e,!1)})},!0)}},{key:"areChildrenCollapsed",value:function(e){var t=this,n=isNaN(e)?e:this.dataManager.getDataObject(e),o=!0;return null===n&&(n={__children:this.dataManager.data}),this.dataManager.hasChildren(n)&&K(n.__children,function(e){var n=t.dataManager.getRowIndex(e);if(!t.plugin.collapsedRowsMap.getValueAtIndex(n))return o=!1,!1}),o}},{key:"isAnyParentCollapsed",value:function(e){for(var t=e;null!==t;){t=this.dataManager.getRowParent(t);var n=this.dataManager.getRowIndex(t);if(this.collapsedRows.indexOf(n)>-1)return!0}return!1}},{key:"toggleState",value:function(e,t){if(!(t.col>=0)){var n=this.translateTrimmedRow(t.row);Ut(e.target,SP.CSS_CLASSES.button)&&(this.areChildrenCollapsed(n)?this.expandChildren(n):this.collapseChildren(n),$i(e))}}},{key:"translateTrimmedRow",value:function(e){return this.hot.toPhysicalRow(e)}},{key:"untranslateTrimmedRow",value:function(e){return this.hot.toVisualRow(e)}},{key:"renderAndAdjust",value:function(){this.hot.render(),this.hot.view.adjustElementsSize()}}])&&DP(t.prototype,n),o&&DP(t,o),a}();function AP(e){"@babel/helpers - typeof";return(AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LP(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function NP(e,t){return(NP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=BP(e);if(t){var i=BP(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===AP(t)||"function"==typeof t))return t;return FP(e)}(this,n)}}function FP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BP(e){return(BP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HP,jP=new WeakMap,$P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NP(e,t)}(a,gP);var t,n,o,i=VP(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,t),jP.set(FP(n),{row_above:function(e,t){var o=t[t.length-1];n.dataManager.addSibling(o.start.row,"above")},row_below:function(e,t){var o=t[t.length-1];n.dataManager.addSibling(o.start.row,"below")}}),n.dataManager=n.plugin.dataManager,n}return t=a,(n=[{key:"appendOptions",value:function(e){var t=this,n=[{key:"add_child",name:function(){return this.getTranslatedPhrase(Sd)},callback:function(){var e=t.dataManager.translateTrimmedRow(t.hot.getSelectedLast()[0]),n=t.dataManager.getDataObject(e);t.dataManager.addChild(n)},disabled:function(){var e=t.hot.getSelectedLast();return!e||e[0]<0||t.hot.selection.isSelectedByColumnHeader()||t.hot.countRows()>=t.hot.getSettings().maxRows}},{key:"detach_from_parent",name:function(){return this.getTranslatedPhrase(Td)},callback:function(){t.dataManager.detachFromParent(t.hot.getSelectedLast())},disabled:function(){var e=t.hot.getSelectedLast(),n=t.dataManager.translateTrimmedRow(e[0]);return!t.dataManager.getRowParent(n)||!e||e[0]<0||t.hot.selection.isSelectedByColumnHeader()||t.hot.countRows()>=t.hot.getSettings().maxRows}},{name:"---------"}];return Nl(0,e.items.length-1,function(t){if(0===t)return K(n,function(n,o){e.items.splice(t+o,0,n)}),!1}),this.modifyRowInsertingOptions(e)}},{key:"modifyRowInsertingOptions",value:function(e){var t=jP.get(this);return Nl(0,e.items.length-1,function(n){var o=t[e.items[n].key];null!==o&&void 0!==o&&(e.items[n].callback=o)}),e}}])&&LP(t.prototype,n),o&&LP(t,o),a}();function UP(e){return function(e){if(Array.isArray(e))return zP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return zP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zP(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function WP(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var qP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=t,this.hot=t.hot,this.dataManager=t.dataManager,this.collapsingUI=t.collapsingUI}var t,n,o;return t=e,(n=[{key:"onBeforeRowMove",value:function(e,t,n,o){var i=this;if(this.displayAPICompatibilityWarning({rows:e,finalIndex:t,dropIndex:n,movePossible:o}))return!1;this.movedToCollapsed=!1;var a=n===this.hot.countRows(),r=a?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(n),l=!0,s=e.map(function(e){if(!l)return!1;var t=i.dataManager.translateTrimmedRow(e);return l=i.shouldAllowMoving(t,r),t}),c=-1===s.indexOf(r);if(!l||!c)return!1;var u=this.getBaseParent(s),d=this.getTargetParent(a,r),h=u===d;return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(d),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(s,r,h),this.moveRows(s,r,d),this.dataManager.updateWithData(this.dataManager.getRawSourceData()),this.moveCellsMeta(s,r),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",e,t,n,o,o&&this.isRowOrderChanged(e,t)),this.hot.render(),this.selectCells(e,n),!1}},{key:"displayAPICompatibilityWarning",value:function(e){var t,n,o=e.rows,i=e.finalIndex,a=e.dropIndex,r=e.movePossible,l=!1;return it(a)&&(No(Ze(HP||(t=["Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows \n      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead."],(n=["Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\\x20\n      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead."])||(n=t.slice(0)),HP=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))))),this.hot.runHooks("afterRowMove",o,i,a,r,!1),l=!0),l}},{key:"shouldAllowMoving",value:function(e,t){return!(this.dataManager.isParent(e)||this.dataManager.isRowHighestLevel(e)||e===t||0===t)}},{key:"getBaseParent",value:function(e){return this.dataManager.getRowParent(e[0])}},{key:"getTargetParent",value:function(e,t){var n=this.dataManager.getRowParent(e?t-1:t);return null!==n&&void 0!==n||(n=this.dataManager.getRowParent(t-1)),n}},{key:"shiftCollapsibleParentsLocations",value:function(e,t,n){n||(Math.max.apply(Math,UP(e))<=t?this.collapsingUI.collapsedRowsStash.shiftStash(e[0],t,-1*e.length):this.collapsingUI.collapsedRowsStash.shiftStash(t,e[0],e.length))}},{key:"moveRows",value:function(e,t,n){var o=this,i=t===this.dataManager.getRowIndex(n)+this.dataManager.countChildren(n)+1;this.hot.batchRender(function(){e.forEach(function(e){o.dataManager.moveRow(e,t,o.movedToCollapsed,i)})})}},{key:"moveCellsMeta",value:function(e,t){var n,o=this,i=[],a=Math.max.apply(Math,UP(e))<t;e.forEach(function(e){i.push(o.hot.getCellMetaAtRow(e))}),this.hot.spliceCellsMeta(e[0],e.length),(n=this.hot).spliceCellsMeta.apply(n,[t-(a?i.length:0),0].concat(i))}},{key:"selectCells",value:function(e,t){var n,o=e.length,i=0,a=0,r=null;if(this.movedToCollapsed){var l=null;l=e[o-1]<t?this.dataManager.translateTrimmedRow(t-o):this.dataManager.translateTrimmedRow(t);var s=this.dataManager.getRowParent(null===l?this.hot.countSourceRows()-1:l-1),c=this.dataManager.getRowIndex(s);a=i=this.dataManager.untranslateTrimmedRow(c)}else e[o-1]<t?i=(a=t-1)-o+1:a=(i=t)+o-1;r=this.hot.selection,n=this.hot.countCols()-1,r.setRangeStart(new qn(i,0)),r.setRangeEnd(new qn(a,n),!0)}},{key:"isRowOrderChanged",value:function(e,t){return e.some(function(e,n){return e-n!==t})}}])&&WP(t.prototype,n),o&&WP(t,o),e}();function KP(e){"@babel/helpers - typeof";return(KP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GP(e){return function(e){if(Array.isArray(e))return JP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return JP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JP(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function YP(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function XP(e,t,n){return(XP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tA(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function QP(e,t){return(QP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=tA(e);if(t){var i=tA(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===KP(t)||"function"==typeof t))return t;return eA(e)}(this,n)}}function eA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tA(e){return(tA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nA=new WeakMap,oA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QP(e,t)}(a,Wv);var t,n,o,i=ZP(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).dataManager=null,t.headersUI=null,t.collapsedRowsMap=null,nA.set(eA(t),{movedToCollapsed:!1,skipRender:null,skipCoreAPIModifiers:!1}),t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"nestedRows"}},{key:"PLUGIN_PRIORITY",get:function(){return 300}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().nestedRows}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new Yc),this.dataManager=new yP(this,this.hot),this.collapsingUI=new PP(this,this.hot),this.headersUI=new SP(this,this.hot),this.contextMenuUI=new $P(this,this.hot),this.rowMoveController=new qP(this),this.addHook("afterInit",function(){return e.onAfterInit.apply(e,arguments)}),this.addHook("beforeRender",function(){return e.onBeforeRender.apply(e,arguments)}),this.addHook("modifyRowData",function(){return e.onModifyRowData.apply(e,arguments)}),this.addHook("modifySourceLength",function(){return e.onModifySourceLength.apply(e,arguments)}),this.addHook("beforeDataSplice",function(){return e.onBeforeDataSplice.apply(e,arguments)}),this.addHook("beforeDataFilter",function(){return e.onBeforeDataFilter.apply(e,arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){return e.onAfterContextMenuDefaultOptions.apply(e,arguments)}),this.addHook("afterGetRowHeader",function(){return e.onAfterGetRowHeader.apply(e,arguments)}),this.addHook("beforeOnCellMouseDown",function(){return e.onBeforeOnCellMouseDown.apply(e,arguments)}),this.addHook("beforeRemoveRow",function(){return e.onBeforeRemoveRow.apply(e,arguments)}),this.addHook("afterRemoveRow",function(){return e.onAfterRemoveRow.apply(e,arguments)}),this.addHook("beforeAddChild",function(){return e.onBeforeAddChild.apply(e,arguments)}),this.addHook("afterAddChild",function(){return e.onAfterAddChild.apply(e,arguments)}),this.addHook("beforeDetachChild",function(){return e.onBeforeDetachChild.apply(e,arguments)}),this.addHook("afterDetachChild",function(){return e.onAfterDetachChild.apply(e,arguments)}),this.addHook("modifyRowHeaderWidth",function(){return e.onModifyRowHeaderWidth.apply(e,arguments)}),this.addHook("afterCreateRow",function(){return e.onAfterCreateRow.apply(e,arguments)}),this.addHook("beforeRowMove",function(){return e.onBeforeRowMove.apply(e,arguments)}),this.addHook("beforeLoadData",function(t){return e.onBeforeLoadData(t)}),XP(tA(a.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),XP(tA(a.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin();var e=this.hot.getSourceData();this.enablePlugin(),this.dataManager.updateWithData(e),XP(tA(a.prototype),"updatePlugin",this).call(this)}},{key:"onBeforeRowMove",value:function(e,t,n,o){return this.rowMoveController.onBeforeRowMove(e,t,n,o)}},{key:"disableCoreAPIModifiers",value:function(){nA.get(this).skipCoreAPIModifiers=!0}},{key:"enableCoreAPIModifiers",value:function(){nA.get(this).skipCoreAPIModifiers=!1}},{key:"onBeforeOnCellMouseDown",value:function(e,t,n){this.collapsingUI.toggleState(e,t,n)}},{key:"onModifyRowData",value:function(e){if(!nA.get(this).skipCoreAPIModifiers)return this.dataManager.getDataObject(e)}},{key:"onModifySourceLength",value:function(){if(!nA.get(this).skipCoreAPIModifiers)return this.dataManager.countAllRows()}},{key:"onBeforeDataSplice",value:function(e,t,n){return!(!nA.get(this).skipCoreAPIModifiers&&!this.dataManager.isRowHighestLevel(e))||(this.dataManager.spliceData(e,t,n),!1)}},{key:"onBeforeDataFilter",value:function(e,t,n){var o=nA.get(this);return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(n[0],t),this.collapsingUI.collapsedRowsStash.shiftStash(n[0],null,-1*t),this.dataManager.filterData(e,t,n),o.skipRender=!0,!1}},{key:"onAfterContextMenuDefaultOptions",value:function(e){return this.contextMenuUI.appendOptions(e)}},{key:"onAfterGetRowHeader",value:function(e,t){this.headersUI.appendLevelIndicators(e,t)}},{key:"onModifyRowHeaderWidth",value:function(e){return this.headersUI.rowHeaderWidthCache||e}},{key:"onAfterRemoveRow",value:function(e,t,n,o){var i=this;if(o!==this.pluginName){var a=nA.get(this);setTimeout(function(){a.skipRender=null,i.headersUI.updateRowHeaderWidth(),i.collapsingUI.collapsedRowsStash.applyStash()},0)}}},{key:"onBeforeRemoveRow",value:function(e,t,n){var o=this,i=Array.from(n.reduce(function(e,t){if(o.dataManager.isParent(t)){var n=o.dataManager.getDataObject(t).__children;return e.add(t),Array.isArray(n)&&n.forEach(function(t){return e.add(o.dataManager.getRowIndex(t))}),e}return e.add(t)},new Set));n.length=0,n.push.apply(n,GP(i))}},{key:"onBeforeAddChild",value:function(){this.collapsingUI.collapsedRowsStash.stash()}},{key:"onAfterAddChild",value:function(e,t){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(t)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}},{key:"onBeforeDetachChild",value:function(){this.collapsingUI.collapsedRowsStash.stash()}},{key:"onAfterDetachChild",value:function(e,t){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(t),null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}},{key:"onAfterCreateRow",value:function(e,t,n){n!==this.pluginName&&this.dataManager.updateWithData(this.dataManager.getRawSourceData())}},{key:"onAfterInit",value:function(){var e=Math.max.apply(Math,GP(this.dataManager.cache.levels));e>0&&this.headersUI.updateRowHeaderWidth(e)}},{key:"onBeforeRender",value:function(e,t){nA.get(this).skipRender&&(t.skipRender=!0)}},{key:"destroy",value:function(){XP(tA(a.prototype),"destroy",this).call(this)}},{key:"onBeforeLoadData",value:function(e){this.dataManager.setData(e),this.dataManager.rewriteCache()}}])&&YP(t.prototype,n),o&&YP(t,o),a}();function iA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return aA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function rA(e){return function(e){if(Array.isArray(e))return lA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return lA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lA(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function sA(e){"@babel/helpers - typeof";return(sA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cA(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function uA(e,t,n){return(uA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pA(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function dA(e,t){return(dA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=pA(e);if(t){var i=pA(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===sA(t)||"function"==typeof t))return t;return fA(e)}(this,n)}}function fA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pA(e){return(pA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mA(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,bA(e,t,"get"))}function vA(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,bA(e,t,"set"),n),n}function bA(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}Jr.getSingleton().register("beforeHideColumns"),Jr.getSingleton().register("afterHideColumns"),Jr.getSingleton().register("beforeUnhideColumns"),Jr.getSingleton().register("afterUnhideColumns");var yA=new WeakMap,gA=new WeakMap,wA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dA(e,t)}(a,Wv);var t,n,o,i=hA(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),yA.set(fA(e),{writable:!0,value:{}}),gA.set(fA(e),{writable:!0,value:null}),e}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"hiddenColumns"}},{key:"PLUGIN_PRIORITY",get:function(){return 310}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().hiddenColumns}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var t=this.hot.getSettings().hiddenColumns;pe(t)&&(vA(this,yA,t),it(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),vA(this,gA,new Oc),mA(this,gA).addLocalHook("init",function(){return e.onMapInit()}),this.hot.columnIndexMapper.registerMap(this.pluginName,mA(this,gA)),this.addHook("afterContextMenuDefaultOptions",function(){return e.onAfterContextMenuDefaultOptions.apply(e,arguments)}),this.addHook("afterGetCellMeta",function(t,n,o){return e.onAfterGetCellMeta(t,n,o)}),this.addHook("modifyColWidth",function(t,n){return e.onModifyColWidth(t,n)}),this.addHook("afterGetColHeader",function(){return e.onAfterGetColHeader.apply(e,arguments)}),this.addHook("modifyCopyableRange",function(t){return e.onModifyCopyableRange(t)}),uA(pA(a.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),uA(pA(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),vA(this,yA,{}),uA(pA(a.prototype),"disablePlugin",this).call(this),this.resetCellsMeta()}},{key:"showColumns",value:function(e){var t=this,n=this.getHiddenColumns(),o=this.isValidConfig(e),i=n,a=mA(this,gA).getValues().slice(),r=e.length>0;o&&r&&(K(e.map(function(e){return t.hot.toPhysicalColumn(e)}),function(e){a[e]=!1}),i=z(a,function(e,n,o){return n&&e.push(t.hot.toVisualColumn(o)),e},[]));!1!==this.hot.runHooks("beforeUnhideColumns",n,i,o&&r)&&(o&&r&&mA(this,gA).setValues(a),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",n,i,o&&r,o&&i.length<n.length))}},{key:"showColumn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.showColumns(t)}},{key:"hideColumns",value:function(e){var t=this,n=this.getHiddenColumns(),o=this.isValidConfig(e),i=n;o&&(i=Array.from(new Set(n.concat(e)))),!1!==this.hot.runHooks("beforeHideColumns",n,i,o)&&(o&&this.hot.batchExecution(function(){K(e,function(e){mA(t,gA).setValueAtIndex(t.hot.toPhysicalColumn(e),!0)})},!0),this.hot.runHooks("afterHideColumns",n,i,o,o&&i.length>n.length))}},{key:"hideColumn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.hideColumns(t)}},{key:"getHiddenColumns",value:function(){var e=this;return q(mA(this,gA).getHiddenIndexes(),function(t){return e.hot.toVisualColumn(t)})}},{key:"isHidden",value:function(e){return mA(this,gA).getValueAtIndex(this.hot.toPhysicalColumn(e))||!1}},{key:"isValidConfig",value:function(e){var t=this.hot.countCols();return!!(Array.isArray(e)&&e.length>0)&&e.every(function(e){return Number.isInteger(e)&&e>=0&&e<t})}},{key:"resetCellsMeta",value:function(){K(this.hot.getCellsMeta(),function(e){e&&(e.skipColumnOnPaste=!1)})}},{key:"onModifyColWidth",value:function(e,t){return this.isHidden(t)?0:mA(this,yA).indicators&&(this.isHidden(t+1)||this.isHidden(t-1))&&"number"==typeof e&&this.hot.hasColHeaders()?e+15:void 0}},{key:"onAfterGetCellMeta",value:function(e,t,n){if(!1===mA(this,yA).copyPasteEnabled&&this.isHidden(t)&&(n.skipColumnOnPaste=!0),this.isHidden(t-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenColumn")&&(n.className+=" afterHiddenColumn");else if(n.className){var o=n.className.split(" ");if(o.length>0){var i=o.indexOf("afterHiddenColumn");i>-1&&o.splice(i,1),n.className=o.join(" ")}}}},{key:"onModifyCopyableRange",value:function(e){var t=this;if(mA(this,yA).copyPasteEnabled)return e;var n=[],o=function(e,t,o,i){n.push({startRow:e,endRow:t,startCol:o,endCol:i})};return K(e,function(e){var n=!0,i=0;Nl(e.startCol,e.endCol,function(a){t.isHidden(a)?(n||o(e.startRow,e.endRow,i,a-1),n=!0):(n&&(i=a),a===e.endCol&&o(e.startRow,e.endRow,i,a),n=!1)})}),n}},{key:"onAfterGetColHeader",value:function(e,t){if(mA(this,yA).indicators&&!(e<0)){var n=[];e>=1&&this.isHidden(e-1)&&n.push("afterHiddenColumn"),e<this.hot.countCols()-1&&this.isHidden(e+1)&&n.push("beforeHiddenColumn"),zt(t,n)}}},{key:"onAfterContextMenuDefaultOptions",value:function(e){var t;e.items.push({name:Qy},(t=this,{key:"hidden_columns_hide",name:function(){var e=this.getSelectedLast(),t=0;if(Array.isArray(e)){var n=iA(e,4);n[1]-n[3]!=0&&(t=1)}return this.getTranslatedPhrase(Ed,t)},callback:function(){for(var e=this.getSelectedRangeLast(),n=e.from,o=e.to,i=Math.max(Math.min(n.col,o.col),0),a=Math.max(n.col,o.col),r=[],l=i;l<=a;l+=1)r.push(l);var s=r[0],c=r[r.length-1],u=this.columnIndexMapper.getFirstNotHiddenIndex(c+1,1,!0,s-1);t.hideColumns(r),Number.isInteger(u)&&u>=0?this.selectColumns(u):this.deselectCell(),this.render(),this.view.adjustElementsSize(!0)},disabled:!1,hidden:function(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}),function(e){var t=[];return{key:"hidden_columns_show",name:function(){var e=t.length>1?1:0;return this.getTranslatedPhrase(Od,e)},callback:function(){var n,o;if(0!==t.length){var i=t[0],a=t[t.length-1];i=null!==(n=this.columnIndexMapper.getFirstNotHiddenIndex(i-1,-1))&&void 0!==n?n:0,a=null!==(o=this.columnIndexMapper.getFirstNotHiddenIndex(a+1,1))&&void 0!==o?o:this.countCols()-1,e.showColumns(t),this.render(),this.view.adjustElementsSize(!0),a-i+1===this.countCols()||this.selectColumns(i,a)}},disabled:!1,hidden:function(){var n=this,o=q(e.getHiddenColumns(),function(e){return n.toPhysicalColumn(e)});if(!this.selection.isSelectedByColumnHeader()&&!this.selection.isSelectedByCorner()||o.length<1)return!0;t.length=0;var i=this.getSelectedRangeLast(),a=i.getTopLeftCorner().col,r=i.getBottomRightCorner().col,l=this.columnIndexMapper,s=l.getRenderableFromVisualIndex(a),c=l.getRenderableFromVisualIndex(r),u=l.getNotTrimmedIndexes(),d=[];if(a!==r){if(r-a+1>c-s+1){var h=u.slice(a,r+1);d.push.apply(d,rA(h.filter(function(e){return o.includes(e)})))}}else if(0===s&&s<a)d.push.apply(d,rA(u.slice(0,a)));else if(null===s)d.push.apply(d,rA(u.slice(0,this.countCols())));else{var f=this.countCols()-1;c===l.getRenderableFromVisualIndex(l.getFirstNotHiddenIndex(f,-1))&&f>r&&d.push.apply(d,rA(u.slice(r+1)))}return K(d,function(e){t.push(n.toVisualColumn(e))}),0===t.length}}}(this))}},{key:"onMapInit",value:function(){Array.isArray(mA(this,yA).columns)&&this.hideColumns(mA(this,yA).columns)}},{key:"destroy",value:function(){vA(this,yA,null),vA(this,gA,null),uA(pA(a.prototype),"destroy",this).call(this)}}])&&cA(t.prototype,n),o&&cA(t,o),a}();function _A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var o,i,a=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return CA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function kA(e){return function(e){if(Array.isArray(e))return xA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return xA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xA(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function SA(e){"@babel/helpers - typeof";return(SA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TA(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function EA(e,t,n){return(EA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RA(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function OA(e,t){return(OA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=RA(e);if(t){var i=RA(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===SA(t)||"function"==typeof t))return t;return IA(e)}(this,n)}}function IA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RA(e){return(RA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MA(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,AA(e,t,"get"))}function PA(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,AA(e,t,"set"),n),n}function AA(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}Jr.getSingleton().register("beforeHideRows"),Jr.getSingleton().register("afterHideRows"),Jr.getSingleton().register("beforeUnhideRows"),Jr.getSingleton().register("afterUnhideRows");var LA=new WeakMap,NA=new WeakMap,VA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OA(e,t)}(a,Wv);var t,n,o,i=DA(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),LA.set(IA(e),{writable:!0,value:{}}),NA.set(IA(e),{writable:!0,value:null}),e}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"hiddenRows"}},{key:"PLUGIN_PRIORITY",get:function(){return 320}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().hiddenRows}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var t=this.hot.getSettings().hiddenRows;pe(t)&&(PA(this,LA,t),it(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),PA(this,NA,new Oc),MA(this,NA).addLocalHook("init",function(){return e.onMapInit()}),this.hot.rowIndexMapper.registerMap(this.pluginName,MA(this,NA)),this.addHook("afterContextMenuDefaultOptions",function(){return e.onAfterContextMenuDefaultOptions.apply(e,arguments)}),this.addHook("afterGetCellMeta",function(t,n,o){return e.onAfterGetCellMeta(t,n,o)}),this.addHook("modifyRowHeight",function(t,n){return e.onModifyRowHeight(t,n)}),this.addHook("afterGetRowHeader",function(){return e.onAfterGetRowHeader.apply(e,arguments)}),this.addHook("modifyCopyableRange",function(t){return e.onModifyCopyableRange(t)}),EA(RA(a.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),EA(RA(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),PA(this,LA,{}),EA(RA(a.prototype),"disablePlugin",this).call(this),this.resetCellsMeta()}},{key:"showRows",value:function(e){var t=this,n=this.getHiddenRows(),o=this.isValidConfig(e),i=n,a=MA(this,NA).getValues().slice(),r=e.length>0;o&&r&&(K(e.map(function(e){return t.hot.toPhysicalRow(e)}),function(e){a[e]=!1}),i=z(a,function(e,n,o){return n&&e.push(t.hot.toVisualRow(o)),e},[]));!1!==this.hot.runHooks("beforeUnhideRows",n,i,o&&r)&&(o&&r&&MA(this,NA).setValues(a),this.hot.runHooks("afterUnhideRows",n,i,o&&r,o&&i.length<n.length))}},{key:"showRow",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.showRows(t)}},{key:"hideRows",value:function(e){var t=this,n=this.getHiddenRows(),o=this.isValidConfig(e),i=n;o&&(i=Array.from(new Set(n.concat(e)))),!1!==this.hot.runHooks("beforeHideRows",n,i,o)&&(o&&this.hot.batchExecution(function(){K(e,function(e){MA(t,NA).setValueAtIndex(t.hot.toPhysicalRow(e),!0)})},!0),this.hot.runHooks("afterHideRows",n,i,o,o&&i.length>n.length))}},{key:"hideRow",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.hideRows(t)}},{key:"getHiddenRows",value:function(){var e=this;return q(MA(this,NA).getHiddenIndexes(),function(t){return e.hot.toVisualRow(t)})}},{key:"isHidden",value:function(e){return MA(this,NA).getValueAtIndex(this.hot.toPhysicalRow(e))||!1}},{key:"isValidConfig",value:function(e){var t=this.hot.countRows();return!!(Array.isArray(e)&&e.length>0)&&e.every(function(e){return Number.isInteger(e)&&e>=0&&e<t})}},{key:"resetCellsMeta",value:function(){K(this.hot.getCellsMeta(),function(e){e&&(e.skipRowOnPaste=!1)})}},{key:"onModifyRowHeight",value:function(e,t){return this.isHidden(t)?0:e}},{key:"onAfterGetCellMeta",value:function(e,t,n){if(!1===MA(this,LA).copyPasteEnabled&&this.isHidden(e)&&(n.skipRowOnPaste=!0),this.isHidden(e-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenRow")&&(n.className+=" afterHiddenRow");else if(n.className){var o=n.className.split(" ");if(o.length>0){var i=o.indexOf("afterHiddenRow");i>-1&&o.splice(i,1),n.className=o.join(" ")}}}},{key:"onModifyCopyableRange",value:function(e){var t=this;if(MA(this,LA).copyPasteEnabled)return e;var n=[],o=function(e,t,o,i){n.push({startRow:e,endRow:t,startCol:o,endCol:i})};return K(e,function(e){var n=!0,i=0;Nl(e.startRow,e.endRow,function(a){t.isHidden(a)?(n||o(i,a-1,e.startCol,e.endCol),n=!0):(n&&(i=a),a===e.endRow&&o(i,a,e.startCol,e.endCol),n=!1)})}),n}},{key:"onAfterGetRowHeader",value:function(e,t){if(MA(this,LA).indicators&&!(e<0)){var n=[];e>=1&&this.isHidden(e-1)&&n.push("afterHiddenRow"),e<this.hot.countRows()-1&&this.isHidden(e+1)&&n.push("beforeHiddenRow"),zt(t,n)}}},{key:"onAfterContextMenuDefaultOptions",value:function(e){var t;e.items.push({name:Qy},(t=this,{key:"hidden_rows_hide",name:function(){var e=this.getSelectedLast(),t=0;if(Array.isArray(e)){var n=_A(e,3);n[0]-n[2]!=0&&(t=1)}return this.getTranslatedPhrase(Dd,t)},callback:function(){for(var e=this.getSelectedRangeLast(),n=e.from,o=e.to,i=Math.max(Math.min(n.row,o.row),0),a=Math.max(n.row,o.row),r=[],l=i;l<=a;l+=1)r.push(l);var s=r[0],c=r[r.length-1],u=this.rowIndexMapper.getFirstNotHiddenIndex(c+1,1,!0,s-1);t.hideRows(r),Number.isInteger(u)&&u>=0?this.selectRows(u):this.deselectCell(),this.render(),this.view.adjustElementsSize(!0)},disabled:!1,hidden:function(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}),function(e){var t=[];return{key:"hidden_rows_show",name:function(){var e=t.length>1?1:0;return this.getTranslatedPhrase(Id,e)},callback:function(){var n,o;if(0!==t.length){var i=t[0],a=t[t.length-1];i=null!==(n=this.rowIndexMapper.getFirstNotHiddenIndex(i-1,-1))&&void 0!==n?n:0,a=null!==(o=this.rowIndexMapper.getFirstNotHiddenIndex(a+1,1))&&void 0!==o?o:this.countRows()-1,e.showRows(t),this.render(),this.view.adjustElementsSize(!0),a-i+1===this.countRows()||this.selectRows(i,a)}},disabled:!1,hidden:function(){var n=this,o=q(e.getHiddenRows(),function(e){return n.toPhysicalRow(e)});if(!this.selection.isSelectedByRowHeader()&&!this.selection.isSelectedByCorner()||o.length<1)return!0;t.length=0;var i=this.getSelectedRangeLast(),a=i.getTopLeftCorner().row,r=i.getBottomRightCorner().row,l=this.rowIndexMapper,s=l.getRenderableFromVisualIndex(a),c=l.getRenderableFromVisualIndex(r),u=l.getNotTrimmedIndexes(),d=[];if(a!==r){if(r-a+1>c-s+1){var h=u.slice(a,r+1);d.push.apply(d,kA(h.filter(function(e){return o.includes(e)})))}}else if(0===s&&s<a)d.push.apply(d,kA(u.slice(0,a)));else if(null===s)d.push.apply(d,kA(u.slice(0,this.countRows())));else{var f=this.countRows()-1;c===l.getRenderableFromVisualIndex(l.getFirstNotHiddenIndex(f,-1))&&f>r&&d.push.apply(d,kA(u.slice(r+1)))}return K(d,function(e){t.push(n.toVisualRow(e))}),0===t.length}}}(this))}},{key:"onMapInit",value:function(){Array.isArray(MA(this,LA).rows)&&this.hideRows(MA(this,LA).rows)}},{key:"destroy",value:function(){PA(this,LA,null),PA(this,NA,null),EA(RA(a.prototype),"destroy",this).call(this)}}])&&TA(t.prototype,n),o&&TA(t,o),a}();function FA(e){"@babel/helpers - typeof";return(FA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BA(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function HA(e,t,n){return(HA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=UA(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function jA(e,t){return(jA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=UA(e);if(t){var i=UA(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===FA(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function UA(e){return(UA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jA(e,t)}(a,Wv);var t,n,o,i=$A(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).trimmedRowsMap=null,t}return t=a,o=[{key:"PLUGIN_KEY",get:function(){return"trimRows"}},{key:"PLUGIN_PRIORITY",get:function(){return 330}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings().trimRows}},{key:"enablePlugin",value:function(){var e=this;this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new Yc),this.trimmedRowsMap.addLocalHook("init",function(){return e.onMapInit()}),HA(UA(a.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){var e=this,t=this.hot.getSettings().trimRows;Array.isArray(t)&&this.hot.batchExecution(function(){e.trimmedRowsMap.clear(),K(t,function(t){e.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),HA(UA(a.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("trimRows"),HA(UA(a.prototype),"disablePlugin",this).call(this)}},{key:"getTrimmedRows",value:function(){return this.trimmedRowsMap.getTrimmedIndexes()}},{key:"trimRows",value:function(e){var t=this,n=this.getTrimmedRows(),o=this.isValidConfig(e),i=n;o&&(i=Array.from(new Set(n.concat(e)))),!1!==this.hot.runHooks("beforeTrimRow",n,i,o)&&(o&&this.hot.batchExecution(function(){K(e,function(e){t.trimmedRowsMap.setValueAtIndex(e,!0)})},!0),this.hot.runHooks("afterTrimRow",n,i,o,o&&i.length>n.length))}},{key:"trimRow",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.trimRows(t)}},{key:"untrimRows",value:function(e){var t=this.getTrimmedRows(),n=this.isValidConfig(e),o=t,i=this.trimmedRowsMap.getValues().slice(),a=e.length>0;n&&a&&(K(e,function(e){i[e]=!1}),o=z(i,function(e,t,n){return t&&e.push(n),e},[])),!1!==this.hot.runHooks("beforeUntrimRow",t,o,n&&a)&&(n&&a&&this.trimmedRowsMap.setValues(i),this.hot.runHooks("afterUntrimRow",t,o,n&&a,n&&o.length<t.length))}},{key:"untrimRow",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.untrimRows(t)}},{key:"isTrimmed",value:function(e){return this.trimmedRowsMap.getValueAtIndex(e)||!1}},{key:"untrimAll",value:function(){this.untrimRows(this.getTrimmedRows())}},{key:"isValidConfig",value:function(e){var t=this.hot.countSourceRows();return e.every(function(e){return Number.isInteger(e)&&e>=0&&e<t})}},{key:"onMapInit",value:function(){var e=this,t=this.hot.getSettings().trimRows;Array.isArray(t)&&this.hot.batchExecution(function(){K(t,function(t){e.trimmedRowsMap.setValueAtIndex(t,!0)})},!0)}},{key:"destroy",value:function(){HA(UA(a.prototype),"destroy",this).call(this)}}])&&BA(t.prototype,n),o&&BA(t,o),a}();sl(wl),sl(_m),sl(Em),sl(Vm),sl(zm),sl(hm),sl(Ym),sl(ov),sl(uv),sl(Jp),gs(Yp),gs(hv),gs(yv),gs(dv),gs(Cv),gs(kv),gs(Xp),Ts(xv),Ts(Tv),Ts(Ev),Ts(Dv),Gs(Iv),Gs(Rv),Gs(Mv),Gs(Pv),Gs(Av),Gs(Lv),Gs(Nv),Gs(Vv),Gs(Qp),function(e){var t="undefined"!=typeof window&&window.jQuery;t&&(t.fn.handsontable=function(t){var n,o=this.first(),i=o.data("handsontable");if("string"!=typeof t){var a=t||{};return i?i.updateSettings(a):(i=new e.Core(o[0],a),o.data("handsontable",i),i.init()),o}if(i){if(void 0===i[t])throw new Error("Handsontable do not provide action: ".concat(t));for(var r,l=arguments.length,s=new Array(l>1?l-1:0),c=1;c<l;c++)s[c-1]=arguments[c];n=(r=i[t]).call.apply(r,[i].concat(s)),"destroy"===t&&o.removeData()}return n})}(em),hs(pb),hs(Eb),hs(qb),hs(qx),hs(fP),hs(Jy),hs(nS),hs(_g),hs(rw),hs(Iw),hs(Uw),hs(Xw),hs(uS),hs(AS),hs(OO),hs(gR),hs(ER),hs(wA),hs(VA),hs(u_),hs(N_),hs(W_),hs(_C),hs(Nb),hs(JC),hs(mk),hs(ok),hs(XM),hs(oA),hs(Pk),hs(eb),hs(Wk),hs(Qk),hs(zA),hs(bx),em.__GhostTable=im,em._getListenersCounter=function(){return Ki},em._getRegisteredMapsCounter=function(){return su},em.DefaultSettings=bp(),em.EventManager=Gi,em.hooks=Jr.getSingleton();var WA=[i,r,m,b,o,u,l,p,a,s,h,f],qA=[c,d];em.helper={},em.dom={},K(WA,function(e){K(Object.getOwnPropertyNames(e),function(t){"_"!==t.charAt(0)&&(em.helper[t]=e[t])})}),K(qA,function(e){K(Object.getOwnPropertyNames(e),function(t){"_"!==t.charAt(0)&&(em.dom[t]=e[t])})}),em.cellTypes={},K(qs(),function(e){em.cellTypes[e]=Ks(e)}),em.cellTypes.registerCellType=Gs,em.cellTypes.getCellType=Ks,em.editors={},K(al(),function(e){em.editors["".concat(Ct(e),"Editor")]=ll(e)}),em.editors.registerEditor=sl,em.editors.getEditor=ll,em.renderers={},K(bs(),function(e){var t=ys(e);"base"===e&&(em.renderers.cellDecorator=t),em.renderers["".concat(Ct(e),"Renderer")]=t}),em.renderers.registerRenderer=gs,em.renderers.getRenderer=ys,em.validators={},K(xs(),function(e){em.validators["".concat(Ct(e),"Validator")]=Ss(e)}),em.validators.registerValidator=Ts,em.validators.getValidator=Ss,em.plugins={},K(us(),function(e){em.plugins[e]=ds(e)}),em.plugins["".concat(Ct(Wv.PLUGIN_KEY),"Plugin")]=Wv,em.plugins.registerPlugin=hs,em.plugins.getPlugin=ds;t.a=em},PXCl:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return F});const o="function"==typeof atob,i="function"==typeof btoa,a="function"==typeof e,r="function"==typeof TextDecoder?new TextDecoder:void 0,l="function"==typeof TextEncoder?new TextEncoder:void 0,s=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=(e=>{let t={};return s.forEach((e,n)=>t[e]=n),t})(),u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),h="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),f=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),p=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),m=e=>{let t,n,o,i,a="";const r=e.length%3;for(let r=0;r<e.length;){if((n=e.charCodeAt(r++))>255||(o=e.charCodeAt(r++))>255||(i=e.charCodeAt(r++))>255)throw new TypeError("invalid character found");a+=s[(t=n<<16|o<<8|i)>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}return r?a.slice(0,r-3)+"===".substring(r):a},v=i?e=>btoa(e):a?t=>e.from(t,"binary").toString("base64"):m,b=a?t=>e.from(t).toString("base64"):e=>{let t=[];for(let n=0,o=e.length;n<o;n+=4096)t.push(d.apply(null,e.subarray(n,n+4096)));return v(t.join(""))},y=(e,t=!1)=>t?f(b(e)):b(e),g=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?d(192|t>>>6)+d(128|63&t):d(224|t>>>12&15)+d(128|t>>>6&63)+d(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return d(240|t>>>18&7)+d(128|t>>>12&63)+d(128|t>>>6&63)+d(128|63&t)},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,_=e=>e.replace(w,g),C=a?t=>e.from(t,"utf8").toString("base64"):l?e=>b(l.encode(e)):e=>v(_(e)),k=(e,t=!1)=>t?f(C(e)):C(e),x=e=>k(e,!0),S=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,T=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return d(55296+(t>>>10))+d(56320+(1023&t));case 3:return d((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return d((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},E=e=>e.replace(S,T),O=e=>{if(e=e.replace(/\s+/g,""),!u.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n,o,i="";for(let a=0;a<e.length;)t=c[e.charAt(a++)]<<18|c[e.charAt(a++)]<<12|(n=c[e.charAt(a++)])<<6|(o=c[e.charAt(a++)]),i+=64===n?d(t>>16&255):64===o?d(t>>16&255,t>>8&255):d(t>>16&255,t>>8&255,255&t);return i},D=o?e=>atob(p(e)):a?t=>e.from(t,"base64").toString("binary"):O,I=a?t=>h(e.from(t,"base64")):e=>h(D(e),e=>e.charCodeAt(0)),R=e=>I(P(e)),M=a?t=>e.from(t,"base64").toString("utf8"):r?e=>r.decode(I(e)):e=>E(D(e)),P=e=>p(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),A=e=>M(P(e)),L=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),N=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,L(t));e("fromBase64",function(){return A(this)}),e("toBase64",function(e){return k(this,e)}),e("toBase64URI",function(){return k(this,!0)}),e("toBase64URL",function(){return k(this,!0)}),e("toUint8Array",function(){return R(this)})},V=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,L(t));e("toBase64",function(e){return y(this,e)}),e("toBase64URI",function(){return y(this,!0)}),e("toBase64URL",function(){return y(this,!0)})},F={version:"3.7.3",VERSION:"3.7.3",atob:D,atobPolyfill:O,btoa:v,btoaPolyfill:m,fromBase64:A,toBase64:k,encode:k,encodeURI:x,encodeURL:x,utob:_,btou:E,decode:A,isValid:e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:y,toUint8Array:R,extendString:N,extendUint8Array:V,extendBuiltins:()=>{N(),V()}}}).call(t,n("EuP9").Buffer)},PYVH:function(e,t,n){"use strict";var o=n("M4fF"),i={props:{type:{type:Number,default:2},value:{}},model:{prop:"value",event:"change"},watch:{modelData:{handler:function(e){this.getRealData()},deep:!0,immediate:!0},value:{handler:function(e){},deep:!0,immediate:!0}},mounted:function(){if(this.value){for(var e=[],t=0;t<this.type+1;t++){var n=this.levelMap[t];e.push(this.value[n]?this.value[n]:"")}this.modelData=e}else this.modelData=[];this.type>1&&(this.props.lazy=!0),this.getInitOptions()},data:function(){return{levelMap:{0:"province",1:"city",2:"area",3:"street"},props:{lazy:!1,lazyLoad:this.lazyLoad,value:"id",label:"name"},cascaderOptions:[],modelData:this.value?this.value:[]}},methods:{getInitOptions:function(){var e=this,t=0==this.type?"/location/queryAllProvinceList":"/location/queryAllCityList";this.$http({url:this.$http.adornUrl(t),method:"post",data:{}}).then(function(t){var n=t.data;n.data&&0==n.code?e.cascaderOptions=n.data:e.$message.error(n.msg)})},handleInput:Object(o.debounce)(function(e){},500),getRealData:function(){var e=this,t={province:this.modelData[0]?this.modelData[0]:"",city:this.modelData[1]?this.modelData[1]:"",area:this.modelData[2]?this.modelData[2]:"",street:this.modelData[3]?this.modelData[3]:"",address:""};setTimeout(function(){t.address=e.$refs.cascader.inputValue,console.log(t),e.$emit("change",t)},100)},lazyLoad:function(e,t){var n=this;if(e.children&&e.children.length>0)return t();this.$http({url:this.$http.adornUrl("/location/query"),method:"post",data:{type:this.levelMap[e.level],id:e.value?e.value:""}}).then(function(o){var i=o.data;i.data&&0==i.code?(e.level==n.type&&i.data.forEach(function(e){e.leaf=!0}),n.getRealData(),t(i.data)):n.$message.error(i.msg)})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w100"},[n("el-cascader",{ref:"cascader",staticClass:"w100",attrs:{filterable:"",props:e.props,options:e.cascaderOptions},nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:e.modelData,callback:function(t){e.modelData=t},expression:"modelData"}})],1)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("AlKv")},"data-v-7a09b047",null);t.a=r.exports},PpY9:function(e,t){},Q7M0:function(e,t,n){"use strict";var o=n("7+uW"),i={name:"icon-svg",props:{name:{type:String,required:!0},className:{type:String},width:{type:String},height:{type:String}},computed:{getName:function(){return"#"+this.name},getClassName:function(){return["icon-svg","icon-svg__"+this.name,this.className&&/\S/.test(this.className)?""+this.className:""]}}},a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{class:this.getClassName,attrs:{width:this.width,height:this.height,"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":this.getName}})])},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("GZDk")},"data-v-210a7c9e",null).exports;n("evrY");o.default.component("IconSvg",r);var l=n("eZ11"),s=l.keys().map(function(e){return l(e)}),c=["icon-mail-fill","icon-heart-fill","icon-collection-fill","icon-user-group-fill","icon-userplus-fill","icon-user-fill","icon-cog-fill","icon-clock-fill","icon-calendaralt-fill","icon-exchange-fill","icon-info-circle-fill","icon-WIFI","icon-bug-report","icon-qrcode","icon-cut","icon-gift","icon-link","icon-poweroff","icon-key","icon-safety-certificate","icon-supervise","icon-chart-pie-alt","icon-chart-relation","icon-chart-scatter-plot","icon-chart-area","icon-chart-line","icon-chart-bar","icon-display-code","icon-laptop-check","icon-laptop","icon-mobile-alt","icon-database-set","icon-layer-group","icon-picture","icon-calendar-alt","icon-training","icon-process","icon-news","icon-save","icon-print","icon-release","icon-user-circle","icon-cloud-machine","icon-accesskeys","icon-shoppingcart","icon-structured-data","icon-vector","icon-home","icon-monitoring","icon-diagnose","icon-application","icon-applicationgroup"];console.log(s);t.a={getNameList:function(){return c}}},QkUQ:function(e,t){},QowZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("0xDb"),r={data:function(){return{filterText:"",type:"",visible:!1,dataForm:{id:0,parentId:"",parentName:"",name:"",extContent:{},orderNum:"",delFlag:""},dataRule:{parentId:[{required:!0,message:"上级部门不能为空",trigger:"blur"}],name:[{required:!0,message:"部门名称不能为空",trigger:"blur"}]},deptList:[],deptListTreeProps:{label:"name",children:"children"},extInfo:[]}},watch:{filterText:function(e){this.$refs.deptListTree.filter(e)}},methods:{initExt:function(e){this.extInfo=e},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},init:function(e,t){var n=this;this.type=t,this.dataForm.id=e||0,this.visible=!0,this.$http({url:this.$http.adornUrl("/sys/dept/select/"+this.type),method:"get",params:this.$http.adornParams()}).then(function(e){var t=e.data;n.deptList=Object(a.A)(t.deptList,"id")}).then(function(){n.$nextTick(function(){n.dataForm.id?n.$http({url:n.$http.adornUrl("/sys/dept/info/"+n.dataForm.id+"/"+n.type),method:"get",params:n.$http.adornParams()}).then(function(e){var t=e.data;t&&0===t.code&&(n.dataForm.parentId=t.dept.parentId,n.dataForm.name=t.dept.name,n.dataForm.parentName=t.dept.parentName,n.dataForm.extContent=JSON.parse(t.dept.extContent),n.dataForm.orderNum=t.dept.orderNum,n.dataForm.delFlag=t.dept.delFlag,n.deptListTreeSetCurrentNode())}):n.deptListTreeSetCurrentNode()})})},listTreeCurrentChangeHandle:function(e,t){this.dataForm.parentId=e.id,this.dataForm.parentName=e.name},deptListTreeSetCurrentNode:function(){this.$refs.deptListTree.setCurrentKey(this.dataForm.parentId),this.dataForm.parentName=(this.$refs.deptListTree.getCurrentNode()||{}).name},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$http({url:e.$http.adornUrl("/sys/dept/"+(e.dataForm.id?"update":"save")+"/"+e.type),method:"post",data:e.$http.adornData({id:e.dataForm.id||void 0,parentId:e.dataForm.parentId,name:e.dataForm.name,extContent:i()(e.dataForm.extContent),orderNum:e.dataForm.orderNum})}).then(function(t){var n=t.data;n&&0===n.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}}):e.$message.error(n.msg)})})}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("vxe-modal",{attrs:{width:"500px",title:e.dataForm.id?"修改":"新增"},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",[e._v(e._s(e.dataForm.id?"修改":"新增"))]),e._v(" "),n("el-button",{staticClass:"vxe-win-head-btn",attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")]),e._v(" "),n("el-button",{staticClass:"vxe-win-head-btn",on:{click:function(t){e.visible=!1}}},[e._v("取消")])]},proxy:!0}],null,!1,1877972432),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(" "),n("el-form",{ref:"dataForm",staticClass:"body-padding",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()}}},[n("el-form-item",{attrs:{disabled:e.dataForm.id,label:"上级目录",prop:"parentName"}},[n("el-popover",{ref:"deptListPopover",attrs:{placement:"bottom-start",trigger:"click"}},[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),n("el-tree",{ref:"deptListTree",staticClass:"video-tree",attrs:{data:e.deptList,props:e.deptListTreeProps,"node-key":"id","default-expand-all":!0,"highlight-current":!0,"filter-node-method":e.filterNode,"expand-on-click-node":!1},on:{"current-change":e.listTreeCurrentChangeHandle}})],1),e._v(" "),n("el-input",{directives:[{name:"popover",rawName:"v-popover:deptListPopover",arg:"deptListPopover"}],staticClass:"menu-list__input",attrs:{readonly:!0,placeholder:"点击选择上级部门"},model:{value:e.dataForm.parentName,callback:function(t){e.$set(e.dataForm,"parentName",t)},expression:"dataForm.parentName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序",prop:"orderNum"}},[n("el-input",{attrs:{placeholder:"排序"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1),e._v(" "),e._l(e.extInfo,function(t,o){return n("el-form-item",{key:t.key,attrs:{label:t.name}},["integer"==t.type?n("el-input",{attrs:{type:"number"},model:{value:e.dataForm.extContent[t.key],callback:function(n){e.$set(e.dataForm.extContent,t.key,n)},expression:"dataForm.extContent[value.key]"}}):"select"==t.type?n("el-select",{model:{value:e.dataForm.extContent[t.key],callback:function(n){e.$set(e.dataForm.extContent,t.key,n)},expression:"dataForm.extContent[value.key]"}},e._l(JSON.parse(t.selectItem),function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1):n("el-input",{model:{value:e.dataForm.extContent[t.key],callback:function(n){e.$set(e.dataForm.extContent,t.key,n)},expression:"dataForm.extContent[value.key]"}})],1)})],2)],1):e._e()},staticRenderFns:[]};var s=n("VU/8")(r,l,!1,function(e){n("7aRh")},"data-v-7b7046f0",null);t.default=s.exports},"R/IO":function(e,t){},Rk3H:function(e,t,n){"use strict";var o=n("mvHQ"),i=n.n(o),a=n("//Fk"),r=n.n(a),l=n("7+uW"),s=n("mtWM"),c=n.n(s),u=n("YaEn"),d=n("mw3O"),h=n.n(d),f=n("HN2V"),p=n.n(f),m=n("0xDb"),v=n("fXrb"),b=c.a.create({timeout:3e5,withCredentials:!1,headers:{"Content-Type":"application/json; charset=utf-8"}});function y(){var e=localStorage.getItem("app");return e&&"undefined"!=e?JSON.parse(e).appId:""}b.interceptors.request.use(function(e){var t=null;return null!=(t=null!=l.default.cookie.get("token")?l.default.cookie.get("token"):localStorage.getItem("token"))&&void 0!=t&&"null"!=t||(t=Object(v.a)("token"),l.default.cookie.set("token",t,863999136e5)),e.headers.token=t,e.headers.appId=y(),e},function(e){return r.a.reject(e)}),b.interceptors.response.use(function(e){return e.data&&401===e.data.code&&(Object(m.a)(),u.a.push({name:"login"})),900===e.data.code&&Object(m.b)(e.data),l.default.cookie.set("token",l.default.cookie.get("token"),6048e5),l.default.cookie.set("AUTHORIZATION_TOKEN",l.default.cookie.get("token"),6048e5),e},function(e){return console.log(e),r.a.reject(e)}),b.adornUrl=function(e){return window.SITE_CONFIG.baseUrl+e},b.adornUrlProd=function(e){return window.SITE_CONFIG.baseUrlProd+e},b.biUrl=function(e){return window.SITE_CONFIG.BiUrl+e},b.adornUrlWx=function(e){return window.SITE_CONFIG.baseUrlWx+e},b.goViewUrl=function(e){return window.SITE_CONFIG.goViewServer+e},b.adornParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={t:(new Date).getTime(),appId:localStorage.getItem("app")&&"undefined"!=localStorage.getItem("app")?JSON.parse(localStorage.getItem("app")).appId:""};return t?p()(n,e):e},b.adornData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",o={t:(new Date).getTime(),appId:y()};return e=t?p()(o,e):e,"json"===n?i()(e):h.a.stringify(e)},t.a=b},RoMw:function(e,t,n){var o={"./af":"bCyL","./af.js":"bCyL","./ar":"J50L","./ar-dz":"Pqpw","./ar-dz.js":"Pqpw","./ar-kw":"LWwu","./ar-kw.js":"LWwu","./ar-ly":"8OlW","./ar-ly.js":"8OlW","./ar-ma":"b8eo","./ar-ma.js":"b8eo","./ar-sa":"oMuk","./ar-sa.js":"oMuk","./ar-tn":"suRW","./ar-tn.js":"suRW","./ar.js":"J50L","./az":"qOYa","./az.js":"qOYa","./be":"s8y+","./be.js":"s8y+","./bg":"d3J+","./bg.js":"d3J+","./bm":"Xkw9","./bm.js":"Xkw9","./bn":"DGVM","./bn.js":"DGVM","./bo":"B4Hj","./bo.js":"B4Hj","./br":"KSld","./br.js":"KSld","./bs":"tOe9","./bs.js":"tOe9","./ca":"wrSu","./ca.js":"wrSu","./cs":"4m4r","./cs.js":"4m4r","./cv":"2AxP","./cv.js":"2AxP","./cy":"GjoT","./cy.js":"GjoT","./da":"zT3j","./da.js":"zT3j","./de":"pHm0","./de-at":"pcZm","./de-at.js":"pcZm","./de-ch":"La+0","./de-ch.js":"La+0","./de.js":"pHm0","./dv":"JQCo","./dv.js":"JQCo","./el":"dYFd","./el.js":"dYFd","./en-SG":"ob2m","./en-SG.js":"ob2m","./en-au":"HJaJ","./en-au.js":"HJaJ","./en-ca":"48GV","./en-ca.js":"48GV","./en-gb":"zW8X","./en-gb.js":"zW8X","./en-ie":"zQ+U","./en-ie.js":"zQ+U","./en-il":"/niM","./en-il.js":"/niM","./en-nz":"7Lui","./en-nz.js":"7Lui","./eo":"MLPh","./eo.js":"MLPh","./es":"6aZm","./es-do":"jbUV","./es-do.js":"jbUV","./es-us":"JhzK","./es-us.js":"JhzK","./es.js":"6aZm","./et":"TZFg","./et.js":"TZFg","./eu":"qnhR","./eu.js":"qnhR","./fa":"Jopy","./fa.js":"Jopy","./fi":"UYHY","./fi.js":"UYHY","./fo":"knMo","./fo.js":"knMo","./fr":"k84n","./fr-ca":"Am67","./fr-ca.js":"Am67","./fr-ch":"aTG1","./fr-ch.js":"aTG1","./fr.js":"k84n","./fy":"Yv2t","./fy.js":"Yv2t","./ga":"b0zW","./ga.js":"b0zW","./gd":"Sx+W","./gd.js":"Sx+W","./gl":"ErvK","./gl.js":"ErvK","./gom-latn":"rlRD","./gom-latn.js":"rlRD","./gu":"IKEa","./gu.js":"IKEa","./he":"ZwXy","./he.js":"ZwXy","./hi":"RNj/","./hi.js":"RNj/","./hr":"wFFN","./hr.js":"wFFN","./hu":"ERtV","./hu.js":"ERtV","./hy-am":"qg5G","./hy-am.js":"qg5G","./id":"0ArO","./id.js":"0ArO","./is":"Yw+S","./is.js":"Yw+S","./it":"1WK/","./it-ch":"1WhQ","./it-ch.js":"1WhQ","./it.js":"1WK/","./ja":"DN5T","./ja.js":"DN5T","./jv":"OcrY","./jv.js":"OcrY","./ka":"1kJ4","./ka.js":"1kJ4","./kk":"kQIw","./kk.js":"kQIw","./km":"vj2b","./km.js":"vj2b","./kn":"N2DZ","./kn.js":"N2DZ","./ko":"HIbB","./ko.js":"HIbB","./ku":"nR1x","./ku.js":"nR1x","./ky":"Guwx","./ky.js":"Guwx","./lb":"Xvc2","./lb.js":"Xvc2","./lo":"UAlM","./lo.js":"UAlM","./lt":"NrQj","./lt.js":"NrQj","./lv":"BSTP","./lv.js":"BSTP","./me":"MfUm","./me.js":"MfUm","./mi":"Sc8D","./mi.js":"Sc8D","./mk":"59Tl","./mk.js":"59Tl","./ml":"JmuH","./ml.js":"JmuH","./mn":"bGDR","./mn.js":"bGDR","./mr":"F42r","./mr.js":"F42r","./ms":"VvX4","./ms-my":"ign+","./ms-my.js":"ign+","./ms.js":"VvX4","./mt":"4U5Y","./mt.js":"4U5Y","./my":"5R8g","./my.js":"5R8g","./nb":"Fafe","./nb.js":"Fafe","./ne":"PV4Z","./ne.js":"PV4Z","./nl":"mh1D","./nl-be":"v1fx","./nl-be.js":"v1fx","./nl.js":"mh1D","./nn":"RKYl","./nn.js":"RKYl","./pa-in":"gaSx","./pa-in.js":"gaSx","./pl":"0gSY","./pl.js":"0gSY","./pt":"W4eJ","./pt-br":"cwg8","./pt-br.js":"cwg8","./pt.js":"W4eJ","./ro":"PAan","./ro.js":"PAan","./ru":"GtBM","./ru.js":"GtBM","./sd":"zD7e","./sd.js":"zD7e","./se":"vfkH","./se.js":"vfkH","./si":"XS0Q","./si.js":"XS0Q","./sk":"DZ5i","./sk.js":"DZ5i","./sl":"PI5h","./sl.js":"PI5h","./sq":"jA0+","./sq.js":"jA0+","./sr":"ttU4","./sr-cyrl":"Hp81","./sr-cyrl.js":"Hp81","./sr.js":"ttU4","./ss":"NRLn","./ss.js":"NRLn","./sv":"DJ2B","./sv.js":"DJ2B","./sw":"Jmzz","./sw.js":"Jmzz","./ta":"190Q","./ta.js":"190Q","./te":"qOap","./te.js":"qOap","./tet":"xv0E","./tet.js":"xv0E","./tg":"XFWF","./tg.js":"XFWF","./th":"+z2N","./th.js":"+z2N","./tl-ph":"/JXe","./tl-ph.js":"/JXe","./tlh":"qIiL","./tlh.js":"qIiL","./tr":"4XEh","./tr.js":"4XEh","./tzl":"ujJj","./tzl.js":"ujJj","./tzm":"BxfS","./tzm-latn":"JbJH","./tzm-latn.js":"JbJH","./tzm.js":"BxfS","./ug-cn":"fKRG","./ug-cn.js":"fKRG","./uk":"N3O0","./uk.js":"N3O0","./ur":"Qur/","./ur.js":"Qur/","./uz":"wXmo","./uz-latn":"KyM7","./uz-latn.js":"KyM7","./uz.js":"wXmo","./vi":"vwac","./vi.js":"vwac","./x-pseudo":"7g4Z","./x-pseudo.js":"7g4Z","./yo":"NTGD","./yo.js":"NTGD","./zh-cn":"Z395","./zh-cn.js":"Z395","./zh-hk":"CHDe","./zh-hk.js":"CHDe","./zh-tw":"5rKx","./zh-tw.js":"5rKx"};function i(e){return n(a(e))}function a(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id="RoMw"},RzKZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("0xDb"),i=n("HAP0"),a=n("jB3U"),r={variable:"",field:"",value:""},l={name:"",variable:"",field:"",value:""},s={props:{formMap:{},variableMap:{}},components:{insertVariable:i.default},watch:{variableMap:{handler:function(e){for(var t in console.log("更新",e),this.type=[],e)this.type.push({value:e[t].variableName,label:e[t].itemName});this.type.push({value:"",label:"自定义"})},deep:!0,immediate:!0}},data:function(){return{baseData:{url:[],methods:"",paramsType:"1",params:[],paramsJsonText:""},type:[],noshowlist:["richText"],httpMethods:Object(o.m)("httpMethods"),fieldList:[],initFlist:null}},methods:{addVarBody:function(e){this.baseData.paramsJsonText+="["+e.value+"]"},getFieldText:function(e,t){var n=this.formMap[this.variableMap[e].tableName].templateJson;for(var o in n){var i=n[o];if(i.key==t)return i.name}},deleteItem:function(e,t){this.baseData[e].splice(t,1)},add:function(e,t){this.baseData[e].splice(t+1,0,Object(o.e)("url"==e?r:l))},getMatchingList:function(e){var t=[{key:"id",name:"ID",type:"id"}];return t=t.concat(this.formMap[this.variableMap[e].tableName].templateJson)},initOption:function(e){var t=this,n=[],o=[],i=function(e){var i=t.variableMap[e];if(i.varType==a.g.commonData||i.varType==a.g.commonListData){var r={name:i.itemName,templateJson:[]};t.formMap[i.tableName].templateJson.forEach(function(e){r.templateJson.push({name:""+e.name}),o.push({value:i.itemName+"-"+e.name,key:i.variableName+"@"+e.key,name:i.itemName+"-"+e.name})}),n.push(r)}else if(i.varType==a.g.blocklyVar){var l={value:i.itemName,key:i.variableName,name:i.itemName};n.push(l),o.push(l)}};for(var r in this.variableMap)i(r);if(this.fieldList=n,this.initFlist=o,e){this.initFlist;this.baseData.paramsJsonText&&(this.baseData.paramsJsonText=this.initJsonTextBody(this.baseData.paramsJsonText))}},init:function(e){!e.url&&(e.url=[Object(o.e)(r)]),!e.params&&(e.params=[Object(o.e)(l)]),this.$set(this,"baseData",e),this.initOption(!0)},getJsonTextBody:function(){var e=this.baseData.paramsJsonText;return e&&this.initFlist.forEach(function(t){var n=new RegExp("\\["+t.name+"\\]","g");e=e.replace(n,"["+t.key+"]")}),e},initJsonTextBody:function(e){return this.initFlist.forEach(function(t){var n=new RegExp("\\["+t.key+"\\]","g");e=e.replace(n,"["+t.name+"]")}),e},save:function(){this.baseData.paramsJsonText=this.getJsonTextBody(),this.$emit("saveNode",this.baseData)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("接口地址(以 http://或 https:// 开头)")]),e._v(" "),n("div",{staticStyle:{margin:"15px 0"}},e._l(e.baseData.url,function(t){return n("span",{staticStyle:{"margin-right":"5px"}},[t.variable&&t.field?n("el-tag",[e._v(e._s(e.getFieldText(t.variable,t.field)))]):t.value?n("span",[e._v(e._s(t.value))]):e._e()],1)}),0),e._v(" "),e._l(e.baseData.url,function(t,o){return n("div",{staticStyle:{"margin-bottom":"15px"}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:13}},[t.variable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getMatchingList(t.variable),function(o){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()}),1):n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"拼接"},on:{click:function(t){return e.add("url",o)}}},[n("i",{staticClass:"el-icon-plus"})]),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem("url",o)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)})],2),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("Method")]),e._v(" "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.baseData.methods,callback:function(t){e.$set(e.baseData,"methods",t)},expression:"baseData.methods"}},e._l(e.httpMethods,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("QueryParam")]),e._v(" "),n("div",{staticStyle:{"margin-bottom":"15px"}},[n("el-radio",{attrs:{label:"1"},model:{value:e.baseData.paramsType,callback:function(t){e.$set(e.baseData,"paramsType",t)},expression:"baseData.paramsType"}},[e._v("json")]),e._v(" "),n("el-radio",{attrs:{label:"2"},model:{value:e.baseData.paramsType,callback:function(t){e.$set(e.baseData,"paramsType",t)},expression:"baseData.paramsType"}},[e._v("json文本")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.baseData.paramsType,expression:"baseData.paramsType == '1'"}]},[e._l(e.baseData.params,function(t,o){return n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[n("el-input",{attrs:{placeholder:"请输入字段名"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}})],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:9}},[t.variable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getMatchingList(t.variable),function(o){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()}),1):n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem("params",o)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)}),e._v(" "),n("el-button",{attrs:{title:"添加",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.add("params",e.baseData.params.length)}}},[e._v("添加\n      ")])],2),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.baseData.paramsType,expression:"baseData.paramsType == '2'"}]},[n("insertVariable",{attrs:{fieldList:e.fieldList},on:{clickItem:e.addVarBody}}),e._v(" "),n("el-input",{attrs:{type:"textarea",rows:20,placeholder:"请输入内容"},model:{value:e.baseData.paramsJsonText,callback:function(t){e.$set(e.baseData,"paramsJsonText",t)},expression:"baseData.paramsJsonText"}})],1)])])},staticRenderFns:[]};var u=n("VU/8")(s,c,!1,function(e){n("pTqA")},null,null);t.default=u.exports},S5gw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"common-chart",data:function(){return{myChart:null,seriesType:"line",smooth:!0}},mounted:function(){this.myEcharts(),this.tableName=this.$route.name.split("@")[1]},methods:{dataHaveLoad:function(e,t,n,o){var i=this;if(null!=o&&null!=e){console.log(t,"dataHaveLoad");var a=[],r=[],l=[];null!=o.seriesType&&(this.seriesType=o.seriesType),t.forEach(function(e){e[o.X]?null!=e.relateTableContent&&null!=e.relateTableContent[o.X]?r.push(e.relateTableContent[o.X].YkTzHx):r.push(e[o.X]):r.push("")}),o.Y.forEach(function(e){n.forEach(function(n){if(n.key==e){a.push(n.name);var o={};o.name=n.name,o.type=i.seriesType,o.smooth=i.smooth;var r=[];t.forEach(function(e){e[n.key]?r.push(e[n.key]):r.push(null)}),o.data=r,l.push(o)}})});var s=!1;null!=r&&r.length>2&&(s=parseFloat(r[0].replaceAll("-",""))>parseFloat(r[r.length-1].replaceAll("-","")));var c=0;null!=r[0]&&r[0].length>5&&(c=60);var u={title:{text:""},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},grid:{left:"10%",bottom:"25%"},tooltip:{},legend:{data:a},xAxis:{axisLabel:{rotate:c},data:r,inverse:s},yAxis:{},series:l};this.myChart.setOption(u)}},myEcharts:function(){this.myChart=this.$echarts.init(document.getElementById("main"))}}},i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Echarts"},[t("div",{staticStyle:{width:"1100px",height:"500px"},attrs:{id:"main"}})])}]};var a=n("VU/8")(o,i,!1,function(e){n("WzVY")},"data-v-032fd244",null);t.default=a.exports},S6Bm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("jB3U"),r=n("0xDb"),l={data:function(){return{detailShow:!1,varTypeEnum:a.g,varType:"",localTableDataProp:[],tableName:""}},methods:{init:function(e,t){var n=this;this.detailShow=!0;var o=Object(r.e)(e.value);this.varType=t.varType,this.$nextTick(function(){n.varType==a.g.commonListData?(o.forEach(function(e){console.log(e),(e=i()(e,JSON.parse(e.extContent))).relateTableContent=JSON.parse(e.relateTableContent)}),n.$set(n,"tableName",t.tableName),n.$set(n,"localTableDataProp",o)):n.varType==a.g.commonData&&n.$refs.commonAddOrUpdateView.initByData(t.tableName,o)})}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.detailShow?n("vxe-modal",{attrs:{width:"80%",height:"80%",title:"变量详情"},model:{value:e.detailShow,callback:function(t){e.detailShow=t},expression:"detailShow"}},[e.varType==e.varTypeEnum.commonData?n("common-add-or-update-view",{ref:"commonAddOrUpdateView"}):e._e(),e._v(" "),e.varType==e.varTypeEnum.commonListData?n("common-view",{ref:"tbList",attrs:{localTableDataProp:e.localTableDataProp,noHeadToolBar:"",noHeadOperateBar:"",noOption:"",noDetail:"",tableNameProp:e.tableName}}):e._e()],1):e._e()],1)},staticRenderFns:[]};var c=n("VU/8")(l,s,!1,function(e){n("hRcB")},"data-v-69d02725",null);t.default=c.exports},S7B1:function(e,t){},SL31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{richTextViewContentEdit:"",visible:!1}},components:{Tinymce:n("5aCZ").a},methods:{closeWindow:function(){this.visible=!1},buttonClick:function(){this.$emit("save",this.richTextViewContentEdit),this.closeWindow()},init:function(e){this.richTextViewContentEdit=e||"",this.visible=!0}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:1e3,height:700,resize:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("span",[e._v("编辑富文本")]),e._v(" "),n("div",{staticClass:"col text-center"}),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},on:{click:e.closeWindow}},[e._v("取消")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.buttonClick()}}},[e._v("保存")])],1)]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticStyle:{padding:"15px"}},[n("tinymce",{ref:"tinyDetailView",attrs:{width:800,height:500},model:{value:e.richTextViewContentEdit,callback:function(t){e.richTextViewContentEdit=t},expression:"richTextViewContentEdit"}})],1)])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("l/e0")},null,null);t.default=a.exports},SYAo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("Xxa5"),s=n.n(l),c=n("exGp"),u=n.n(c),d=n("Gfl2"),h=n("0xDb"),f=n("xstH"),p=n("bKCO"),m=n("w/TU"),v=n.n(m),b=n("Gg4Z"),y={components:{selectColor:b.a,draggable:v.a},props:{value:{},ext:{},canAdd:{type:Boolean,default:!1}},watch:{value:{handler:function(e,t){console.log(e),e&&(this.modelData=e)},deep:!0,immediate:!0},modelData:{handler:function(e,t){this.$emit("change",e)},deep:!0}},model:{event:"change",prop:"value"},data:function(){return{modelData:[]}},methods:{addOptions:function(){var e="#2196f3";if(this.modelData.length){var t=this.modelData.length-1;e=this.$refs["selectColor"+t][0].getNextColor()}this.modelData.push({label:"",value:"",color:e})},addSelectSet:function(){var e=this;if(this.modelData.length){for(var t in this.modelData){if(!this.modelData[t].value)return void this.$message.error("第"+(Number(t)+1)+"个选择项不得为空，请填写")}this.$http({url:this.$http.adornUrl("/common/commonselectset/save"),method:"POST",data:{appId:JSON.parse(localStorage.getItem("app")).appId,name:this.ext.name,selectList:r()(this.modelData)}}).then(function(t){var n=t.data;n&&0===n.code?(e.$message.success("添加成功"),e.$emit("saveSuccess",n.id)):e.$message.error(n.msg)})}else this.$message.error("请添加选择项")}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("draggable",{attrs:{handle:".icon-drag"},model:{value:e.modelData,callback:function(t){e.modelData=t},expression:"modelData"}},[n("transition-group",e._l(e.modelData,function(t,o){return n("div",{key:"i"+o,staticClass:"row",staticStyle:{"margin-top":"5px","padding-left":"15px"}},[n("span",{staticClass:"cursor-move icon-drag iconfont",staticStyle:{"font-size":"16px","line-height":"28px","padding-right":"15px"},attrs:{title:"拖动排序"}}),e._v(" "),n("selectColor",{ref:"selectColor"+o,refInFor:!0,model:{value:t.color,callback:function(n){e.$set(t,"color",n)},expression:"options.color"}}),e._v(" "),n("el-input",{staticClass:"col",staticStyle:{"margin-left":"15px"},attrs:{placeholder:"选择项"},on:{input:function(e){t.value=t.label}},model:{value:t.label,callback:function(n){e.$set(t,"label",n)},expression:"options.label"}}),e._v(" "),n("el-button",{staticStyle:{"line-height":"28px",padding:"0",margin:"0 15px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.modelData.splice(o,1)}}},[n("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"16px"}})])],1)}),0)],1),e._v(" "),n("el-button",{staticStyle:{"margin-top":"5px","margin-left":"15px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addOptions()}}},[e._v("增加选择项")]),e._v(" "),e.canAdd?n("el-popconfirm",{attrs:{title:"添加到选项集后，可以使选项在其他工作表中共用，确定要添加吗？"},on:{confirm:function(t){return e.addSelectSet()}}},[n("el-button",{staticStyle:{"margin-top":"5px","margin-left":"15px"},attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v("添加到选项集")])],1):e._e()],1)},staticRenderFns:[]};var w=n("VU/8")(y,g,!1,function(e){n("wrH/")},null,null).exports,_=n("Dg1o"),C=n("5xRT"),k=n("vpfm"),x=n("guyz"),S={components:{selectSet:w},data:function(){return{selectSetDeatil:null,loading:!1,editvisible:!1,selectSetEdit:null}},methods:{save:function(){var e=this,t=this.selectSetEdit.selectList;if(t){for(var n in t){if(!t[n].value)return void this.$message.error("第"+(Number(n)+1)+"个选择项不得为空，请填写")}this.$http({url:this.$http.adornUrl("/common/commonselectset/update"),method:"POST",data:{id:this.selectSetEdit.id,appId:this.selectSetEdit.appId,name:this.selectSetEdit.name,selectList:r()(t)}}).then(function(t){var n=t.data;n&&0===n.code&&(e.$emit("saveSuccess",e.selectSetEdit.id),e.$message.success("更新成功"),e.editvisible=!1)})}else this.$message.error("请添加选择项")},edit:function(){this.selectSetEdit=Object(h.e)(this.selectSetDeatil),this.editvisible=!0},getSelectSetDetail:function(e){var t=this;this.selectSetDeatil=null,e&&(this.loading=!0,this.$http({url:this.$http.adornUrl("/common/commonselectset/info/"+e),method:"GET"}).then(function(e){var n=e.data;t.loading=!1,n&&0===n.code&&(n.commonSelectSet.selectList=JSON.parse(n.commonSelectSet.selectList),t.selectSetDeatil=n.commonSelectSet)}))}}},T={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.selectSetDeatil?n("div",{staticClass:"selectset-box"},[n("div",{staticClass:"row",staticStyle:{padding:"5px 0","font-size":"14px","border-bottom":"1px solid #e0e0e0","margin-bottom":"10px"}},[n("div",{staticClass:"col",staticStyle:{"line-height":"28px"}},[e._v(e._s(e.selectSetDeatil.name)+"（"+e._s(e.selectSetDeatil.selectList.length)+"）")]),e._v(" "),n("div",[n("el-button",{attrs:{type:"text"},on:{click:e.edit}},[e._v("编辑")])],1)]),e._v(" "),e._l(e.selectSetDeatil.selectList,function(t,o){return n("div",{key:"i"+o,staticClass:"row",staticStyle:{"margin-bottom":"5px"}},[n("div",{staticClass:"ext-select-color",staticStyle:{display:"inline-block",margin:"5px 0 0 0"},style:"background-color:"+t.color}),e._v(" "),n("div",{staticStyle:{"line-height":"28px","padding-left":"10px"}},[e._v(e._s(t.value))])])})],2):e._e(),e._v(" "),e.editvisible?n("vxe-modal",{attrs:{width:"400px",title:"编辑选项集"},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("编辑选项集")]),e._v(" "),n("div",[n("el-button",[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)])]},proxy:!0}],null,!1,259083553),model:{value:e.editvisible,callback:function(t){e.editvisible=t},expression:"editvisible"}},[n("div",[n("div",{staticClass:"row",staticStyle:{"margin-bottom":"15px","margin-top":"10px"}},[n("div",{staticStyle:{width:"73px","line-height":"28px"}},[e._v("\r\n                    选项集名称：\r\n                ")]),e._v(" "),n("el-input",{staticStyle:{"margin-left":"9px",width:"245px"},attrs:{placeholder:"名称"},model:{value:e.selectSetEdit.name,callback:function(t){e.$set(e.selectSetEdit,"name",t)},expression:"selectSetEdit.name"}})],1),e._v(" "),n("selectSet",{model:{value:e.selectSetEdit.selectList,callback:function(t){e.$set(e.selectSetEdit,"selectList",t)},expression:"selectSetEdit.selectList"}})],1)]):e._e()],1)},staticRenderFns:[]};var E=n("VU/8")(S,T,!1,function(e){n("ncBr")},"data-v-7d80ab03",null).exports,O=n("kcSy"),D=n("16XU"),I={name:"ext-com",components:{defaultValue:k.default,rulesScreen:d.default,selectStaff:f.a,selectStaffDepRole:p.a,extItem:C.default,formuleWin:_.default,richTextWin:x.a,selectSet:w,selectColor:b.a,selectSetView:E,robotEditDialog:D.default,addOrUpdateWin:function(){return new Promise(function(e){e()}).then(n.bind(null,"LokH"))}},props:{value:{},dataForm:{},exts:{},options:{},noColoumWidth:{}},model:{prop:"value",event:"change"},watch:{ext:{handler:function(e){this.$emit("change",this.ext)},deep:!0,immediate:!0}},data:function(){return{winshow:!1,devModel:"on"==localStorage.getItem("devModel"),dateType:Object(h.m)("dateType"),appList:[],selectsetList:[],selectShowType:Object(h.m)("selectShowType"),selectSetDeatil:null,selectType:Object(h.m)("selectType"),addvisible:!1,addForm:{addName:""},dataRule:{addName:[{required:!0,message:"名称不能为空",trigger:"change"}]},addOrUpdateVisible:!1,isAdd:{},ext:this.value,showDecimalNum:["float","formule"],noMustRequired:["autoSerialNum","childrenTableStatic"],noDefaultValue:["formule","systemCalc","relateTable","multipleRelateTable","relateVirtualTable","childrenTable","childrenTableStatic","propTable","divider","describe","richText","file","picture","video"],relateNoshowlist:["relateTable","multipleRelateTable"],noSort:["formule","childrenTable","childrenTableStatic"],canFormatShow:["formule","integer","float","childrenTableStatic"],definedTableOptions:[],definedTablePropsOptions:[],uniqueKey:"",uniqueKeySet:!1,baseDataOptions:[{value:"dept",label:"组织部门"},{value:"location",label:"厂区位置"},{value:"workcenter",label:"工作中心"}]}},methods:{robotOpen:function(e,t,n){var o=this;return u()(s.a.mark(function i(){return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if("relateTable"!=e.type&&"multipleRelateTable"!=e.type||e.relateTableName){i.next=3;break}return o.$message.error("请先选择关联表单"),i.abrupt("return",!1);case 3:o.winshow=!0,o.$nextTick(function(){o.$refs.robotEdit.init("数据筛选机器人配置",t,2,{name:"数据筛选机器人配置"},o.dataForm.tableName,n)});case 5:case"end":return i.stop()}},i,o)}))()},robotSaved:function(e,t){console.log(e),this.ext[t]=e.robotId,this.winshow=!1},changeMustRequired:function(e){e&&(this.ext.addHidden=!1,this.ext.hidden=!1)},addClose:function(){this.addForm.addName="",this.$refs.addForm.resetFields(),this.addvisible=!1},addOk:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$nextTick(function(){e.$refs.addOrUpdate.init("","",e.addForm.addName),e.addClose()})})},clickAddForm:function(e,t){this.addvisible=!0},init:function(e){var t=this;this.isRelativeTable(e.type)&&this.getTableProps(e.relateTableName),"select"!=e.type&&"multipleSelect"!=e.type||(!e.selectType&&(e.selectType="custom"),!e.selectShowType&&(e.selectShowType="down")),this.$set(this,"ext",e),this.$nextTick(function(){t.$refs.nameInput.focus(),t.initValue()})},uniqueKeyChoosed:function(e){console.log(e,9998),this.uniqueKey=e,Object(O.d)({configInfo:this.uniqueKey,commonDefineId:this.dataForm.id})},cancleUniqueKey:function(){this.uniqueKey="",Object(O.d)({configInfo:"noUniqueKey",commonDefineId:this.dataForm.id})},setUniqueKey:function(e){this.uniqueKey=e},getUniqueKey:function(){return this.uniqueKey},getTableProps:function(e){var t=this;if(!e)return!1;this.$http({url:this.$http.adornUrl("/common/commondefine/infoByTable/"+e),method:"get",params:this.$http.adornParams()}).then(function(n){var o=n.data;if(o&&0===o.code){var i=[];JSON.parse(o.assetExt.template).forEach(function(e){var t={},n={};n.key=e.key,n.name=e.name,t.value=r()(n),t.label=e.name,t.type=e.type,i.push(t)}),t.$set(t.definedTablePropsOptions,e,i)}})},getChildrenTablePropsByField:function(e){var t=void 0,n=[];return this.exts.forEach(function(n){n.key==e&&(t=n.childrenTableName)}),this.definedTableOptions.forEach(function(e){e.value==t&&JSON.parse(e.define.template).forEach(function(e){var t={};t.value=e.key,t.label=e.name,t.type=e.type,n.push(t)});return n}),n},getInputFocus:function(e){e.currentTarget.select()},rulesScreenSave:function(e){this.$set(this.ext,"dataFilterInfo",e)},isRelativeTable:function(e){return-1!=["relateTable","multipleRelateTable"].indexOf(e)},uploadNumChange:function(){this.ext.uploadNum<1?this.ext.uploadNum=1:this.ext.uploadNum=parseInt(this.ext.uploadNum),console.log(this.ext.uploadNum)},describeSet:function(e){this.$refs.richTextWin.init(e.describe?e.describe:"")},saveRichText:function(e){this.$set(this.ext,"describe",e)},formuleSet:function(e){this.$refs.formuleWin.init(this.ext)},saveFormuleWin:function(e){this.$set(this.ext,"formuleContext",e.format),this.$set(this.ext,"formuleFieldList",e.fieldList)},rulesScreenSet:function(e){if(!e.relateTableName)return this.$message.error("请先选择关联表单"),!1;this.$refs.rulesScreenWin.init(e,this.exts)},setCurrentWidget:function(e){var t=this;this.isRelativeTable(e.type)&&this.getTableProps(e.relateTableName),this.$set(this,"ext",e),this.$set(this,"rightBoxShow",!0),this.$nextTick(function(){t.$refs.nameInput.focus()})},removeItem:function(e){this.rightBoxShow=!1,this.ext.key=null,this.exts.splice(e,1)},handleDelect:function(e,t){this.titleKey==e.key&&(this.titleKey=""),this.removeItem(t)},handleCopy:function(e,t){this.insertItem(t,!1,e)},getFormList:function(){var e=this;this.$emit("getFormList"),this.$http({url:this.$http.adornUrl("/common/commondefine/listAll"),method:"post",data:this.$http.adornParams({page:1,limit:999,tableType:"dataTable",appId:JSON.parse(localStorage.getItem("app")).appId})}).then(function(t){var n=t.data;n&&0===n.code&&null!=n.page&&n.page.list.forEach(function(t){var n=[];n.value=t.tableName,n.label=t.fullName,n.define=t,e.definedTableOptions.push(n)}),e.dataListLoading=!1})},getAppList:function(){var e=this;this.$http({url:this.$http.adornUrl("/sys/getAppInfo"),method:"post"}).then(function(t){var n=t.data;n&&0===n.code&&n.apps&&(e.appList=n.apps)})},changeApp:function(e){this.getSelectSetDetail(),this.selectSetDeatil=null,this.getSelectSetList(e)},getSelectSetDetail:function(e){var t=this;this.$nextTick(function(){t.$refs.selectSetView.getSelectSetDetail(e)})},getSelectSetList:function(e){var t=this;this.$http({url:this.$http.adornUrl("/common/commonselectset/list"),method:"POST",data:{appId:e,limit:999,page:1}}).then(function(e){var n=e.data;if(n&&0===n.code&&n.page){t.selectsetList=n.page.list;var o=!1;t.selectsetList.forEach(function(e){e.id==t.ext.selectSet&&(o=!0)}),o||(t.ext.selectSet="")}else t.selectsetList=[],t.ext.selectSet=""})},saveSelectSet:function(e){var t={appId:JSON.parse(localStorage.getItem("app")).appId,selectType:"dictionaries",selectSet:e};this.ext=i()(this.ext,t),this.initValue()},initValue:function(){var e=this.value;"select"!=e.type&&"multipleSelect"!=e.type||"dictionaries"==e.selectType&&(e.appId&&this.getSelectSetList(e.appId),e.selectSet&&this.getSelectSetDetail(e.selectSet)),console.log(this.value)}},mounted:function(){this.getFormList(),this.getAppList()}},R={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",[o("el-form",{staticStyle:{"margin-top":"10px"},attrs:{"label-width":"100px",size:"mini"}},[e.devModel?o("el-form-item",{attrs:{label:"key",required:""}},[o("el-input",{staticClass:"w100",attrs:{placeholder:"key"},model:{value:e.ext.key,callback:function(t){e.$set(e.ext,"key",t)},expression:"ext.key"}})],1):e._e(),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"0px"},attrs:{label:"名称",required:""}},[o("el-input",{ref:"nameInput",staticClass:"w100",attrs:{placeholder:"名称"},on:{focus:e.getInputFocus},model:{value:e.ext.name,callback:function(t){e.$set(e.ext,"name",t)},expression:"ext.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"类型",required:""}},[o("el-select",{staticClass:"w100 w100",attrs:{placeholder:"请选择",disabled:!e.devModel},model:{value:e.ext.type,callback:function(t){e.$set(e.ext,"type",t)},expression:"ext.type"}},e._l(e.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),"describe"==e.ext.type?o("el-form-item",{attrs:{label:"描述文字"}},[o("el-button",{attrs:{type:e.ext.describe?"primary":""},on:{click:function(t){return e.describeSet(e.ext)}}},[e._v("设置描述文字")])],1):e._e(),e._v(" "),"dateTime"==e.ext.type?o("el-form-item",{attrs:{label:"时间格式",required:""}},[o("el-select",{staticClass:"w100",attrs:{placeholder:"请选择"},model:{value:e.ext.dateType,callback:function(t){e.$set(e.ext,"dateType",t)},expression:"ext.dateType"}},e._l(e.dateType,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),"autoSerialNum"==e.ext.type?o("el-form-item",{attrs:{label:"自动编码前缀",required:""}},[o("el-input",{attrs:{placeholder:"前缀"},model:{value:e.ext.autoSerialPrefix,callback:function(t){e.$set(e.ext,"autoSerialPrefix",t)},expression:"ext.autoSerialPrefix"}})],1):e._e(),e._v(" "),"autoSerialNum"==e.ext.type||"button"==e.ext.type?o("el-form-item",{attrs:{label:"自动编码规则"}},[o("el-select",{staticClass:"w100 w100",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.ext.autoSerialTime,callback:function(t){e.$set(e.ext,"autoSerialTime",t)},expression:"ext.autoSerialTime"}},[o("el-option",{attrs:{label:"按日期自增",value:"yyyyMMdd"}}),e._v(" "),o("el-option",{attrs:{label:"按年月自增",value:"yyyyMM"}}),e._v(" "),o("el-option",{attrs:{label:"按年自增",value:"yyyy"}})],1)],1):e._e(),e._v(" "),"childrenTable"==e.ext.type?o("el-form-item",{attrs:{label:"子表格",required:""}},[o("div",{staticClass:"row"},[o("el-select",{staticClass:"w100 w100",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.ext.childrenTableName,callback:function(t){e.$set(e.ext,"childrenTableName",t)},expression:"ext.childrenTableName"}},e._l(e.definedTableOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("div",{staticStyle:{"padding-left":"10px"}},[o("el-button",{attrs:{type:"text"},on:{click:e.clickAddForm}},[e._v("新增")])],1)],1)]):e._e(),e._v(" "),"childrenTable"==e.ext.type?o("el-form-item",{attrs:{label:"在底部分栏显示"}},[o("el-switch",{model:{value:e.ext.positionBottom,callback:function(t){e.$set(e.ext,"positionBottom",t)},expression:"ext.positionBottom"}})],1):e._e(),e._v(" "),e.isRelativeTable(e.ext.type)?o("el-form-item",{attrs:{label:"关联表单",required:""}},[o("div",{staticClass:"row"},[o("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){e.ext.relateTableProps="",e.getTableProps(e.ext.relateTableName)}},model:{value:e.ext.relateTableName,callback:function(t){e.$set(e.ext,"relateTableName",t)},expression:"ext.relateTableName"}},e._l(e.definedTableOptions,function(e,t){return o("el-option",{key:e.value+t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("div",{staticStyle:{"padding-left":"10px"}},[o("el-button",{attrs:{type:"text"},on:{click:e.clickAddForm}},[e._v("新增")])],1)],1)]):e._e(),e._v(" "),e.isRelativeTable(e.ext.type)?o("el-form-item",{attrs:{label:"展示项",required:""}},[o("el-select",{staticClass:"w100",attrs:{multiple:"",filterable:"",placeholder:"请选择要展示的属性"},model:{value:e.ext.relateTableProps,callback:function(t){e.$set(e.ext,"relateTableProps",t)},expression:"ext.relateTableProps"}},e._l(e.definedTablePropsOptions[e.ext.relateTableName],function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),"relateTable"==e.ext.type?o("el-form-item",{attrs:{label:"父表id(脚本)"}},[o("el-input",{attrs:{placeholder:"父表id"},model:{value:e.ext.relateTableExtId,callback:function(t){e.$set(e.ext,"relateTableExtId",t)},expression:"ext.relateTableExtId"}})],1):e._e(),e._v(" "),"relateVirtualTable"==e.ext.type?o("el-form-item",{attrs:{label:"关联虚拟表单"}},[o("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){e.ext.relateTableProps="",e.getTableProps(e.ext.relateTableName)}},model:{value:e.ext.relateTableName,callback:function(t){e.$set(e.ext,"relateTableName",t)},expression:"ext.relateTableName"}},e._l(e.definedTableOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),"relateVirtualTable"==e.ext.type?o("el-form-item",{attrs:{label:"展示项"}},[o("el-select",{staticClass:"w100",attrs:{multiple:"",filterable:"",placeholder:"请选择要展示的属性"},model:{value:e.ext.relateTableProps,callback:function(t){e.$set(e.ext,"relateTableProps",t)},expression:"ext.relateTableProps"}},e._l(e.definedTablePropsOptions[e.ext.relateTableName],function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),"propTable"==e.ext.type?o("el-form-item",{attrs:{label:"属性表单"}},[o("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){e.ext.relateTableProps="",e.getTableProps(e.ext.relateTableName)}},model:{value:e.ext.relateTableName,callback:function(t){e.$set(e.ext,"relateTableName",t)},expression:"ext.relateTableName"}},e._l(e.definedTableOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),"propTable"==e.ext.type?o("el-form-item",{attrs:{label:"展示项"}},[o("el-select",{staticClass:"w100",attrs:{multiple:"",filterable:"",placeholder:"请选择要展示的属性"},model:{value:e.ext.relateTableProps,callback:function(t){e.$set(e.ext,"relateTableProps",t)},expression:"ext.relateTableProps"}},e._l(e.definedTablePropsOptions[e.ext.relateTableName],function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),"propTable"==e.ext.type?o("el-form-item",{attrs:{label:"附带父表的信息"}},[o("el-input",{attrs:{placeholder:"key值，以逗号隔开"},model:{value:e.ext.parentTableInfo,callback:function(t){e.$set(e.ext,"parentTableInfo",t)},expression:"ext.parentTableInfo"}})],1):e._e(),e._v(" "),"select"==e.ext.type||"multipleSelect"==e.ext.type?o("div",{staticStyle:{margin:"5px","padding-bottom":"10px"}},[o("div",{staticStyle:{height:"1px",width:"100%",background:"#e0e0e0","margin-bottom":"10px"}}),e._v(" "),o("el-form-item",{attrs:{label:"展示方式"}},[o("el-select",{staticClass:"w100",attrs:{placeholder:""},model:{value:e.ext.selectShowType,callback:function(t){e.$set(e.ext,"selectShowType",t)},expression:"ext.selectShowType"}},e._l(e.selectShowType,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"15px"}},[o("el-form-item",{attrs:{label:"选择项"}},[o("el-select",{staticClass:"w100",attrs:{placeholder:""},model:{value:e.ext.selectType,callback:function(t){e.$set(e.ext,"selectType",t)},expression:"ext.selectType"}},e._l(e.selectType,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),"custom"==e.ext.selectType?o("div",[o("selectSet",{attrs:{canAdd:"",ext:e.ext},on:{saveSuccess:e.saveSelectSet},model:{value:e.ext.selectItem,callback:function(t){e.$set(e.ext,"selectItem",t)},expression:"ext.selectItem"}})],1):e._e(),e._v(" "),"dictionaries"==e.ext.selectType?o("div",[o("el-form-item",{attrs:{label:"应用"}},[o("el-select",{staticClass:"w100",attrs:{placeholder:""},on:{change:e.changeApp},model:{value:e.ext.appId,callback:function(t){e.$set(e.ext,"appId",t)},expression:"ext.appId"}},e._l(e.appList,function(e){return o("el-option",{key:e.appId,attrs:{label:e.name,value:e.appId}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"选项集"}},[o("el-select",{staticClass:"w100",attrs:{placeholder:""},on:{change:e.getSelectSetDetail},model:{value:e.ext.selectSet,callback:function(t){e.$set(e.ext,"selectSet",t)},expression:"ext.selectSet"}},e._l(e.selectsetList,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),o("selectSetView",{ref:"selectSetView",on:{saveSuccess:function(t){e.getSelectSetDetail(t),e.changeApp(e.ext.appId)}}})],1):e._e(),e._v(" "),o("div",{staticStyle:{height:"1px",width:"100%",background:"#e0e0e0","margin-top":"10px"}})],1):e._e(),e._v(" "),"relateTable"==e.ext.type||"multipleRelateTable"==e.ext.type?o("el-form-item",{attrs:{label:"筛选条件"}},[o("el-button",{attrs:{type:e.ext.dataFilterInfo?"primary":""},on:{click:function(t){return e.rulesScreenSet(e.ext)}}},[e._v("设置筛选条件")])],1):e._e(),e._v(" "),"relateTable"==e.ext.type||"multipleRelateTable"==e.ext.type||"select"==e.ext.type||"multipleSelect"==e.ext.type||"selectStaff"==e.ext.type?o("el-form-item",{attrs:{label:"机器人筛选条件"}},[o("el-button",{attrs:{type:e.ext.dataFilterRobotId?"primary":""},on:{click:function(t){return e.robotOpen(e.ext,e.ext.dataFilterRobotId,"dataFilterRobotId")}}},[e._v("设置筛选机器人")]),e._v(" "),o("el-button",{staticStyle:{color:"#ff2222"},attrs:{type:"text"},on:{click:function(t){e.ext.dataFilterRobotId=null}}},[e._v("删除")])],1):e._e(),e._v(" "),"childrenTableStatic"!=e.ext.type?o("el-form-item",{attrs:{label:"默认内容机器人设置"}},[o("el-button",{attrs:{type:e.ext.defaultVauleRobotId?"primary":""},on:{click:function(t){return e.robotOpen(e.ext,e.ext.defaultVauleRobotId,"defaultVauleRobotId")}}},[e._v("设置默认内容机器人")]),e._v(" "),o("el-button",{staticStyle:{color:"#ff2222"},attrs:{type:"text"},on:{click:function(t){e.ext.defaultVauleRobotId=null}}},[e._v("删除")])],1):e._e(),e._v(" "),-1==e.noDefaultValue.indexOf(e.ext.type)?o("el-form-item",{attrs:{label:"默认内容"}},[o("defaultValue",{attrs:{dataForm:e.dataForm,ext:e.ext,exts:e.exts}})],1):e._e(),e._v(" "),"childrenTableStatic"==e.ext.type?o("el-form-item",{attrs:{label:"统计字段",required:""}},[o("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择统计字段"},on:{change:function(t){e.ext.childrenTableStaticField=null}},model:{value:e.ext.staticField,callback:function(t){e.$set(e.ext,"staticField",t)},expression:"ext.staticField"}},e._l(e.exts,function(t){return t.key!=e.ext.key&&"childrenTable"==t.type?o("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1):e._e(),e._v(" "),"childrenTableStatic"==e.ext.type?o("el-form-item",{attrs:{label:"统计方法",required:""}},[o("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择字表统计方法"},model:{value:e.ext.childrenTableStaticMethod,callback:function(t){e.$set(e.ext,"childrenTableStaticMethod",t)},expression:"ext.childrenTableStaticMethod"}},[o("el-option",{attrs:{label:"统计总数",value:"totalCount"}}),e._v(" "),o("el-option",{attrs:{label:"统计字表字段总和",value:"childrenTableFieldSum"}}),e._v(" "),o("el-option",{attrs:{label:"统计字表字段平均值",value:"childrenTableFieldAve"}})],1)],1):e._e(),e._v(" "),"childrenTableStatic"!=e.ext.type||"childrenTableFieldSum"!=e.ext.childrenTableStaticMethod&&"childrenTableFieldAve"!=e.ext.childrenTableStaticMethod?e._e():o("el-form-item",{attrs:{label:"子表统计字段",required:""}},[o("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择要统计的子表字段"},model:{value:e.ext.childrenTableStaticField,callback:function(t){e.$set(e.ext,"childrenTableStaticField",t)},expression:"ext.childrenTableStaticField"}},e._l(e.getChildrenTablePropsByField(e.ext.staticField),function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),"childrenTableStatic"!=e.ext.type?o("el-form-item",{attrs:{label:"默认值受影响字段"}},[o("el-select",{staticClass:"w100",attrs:{multiple:"",filterable:"",placeholder:"请选择受影响的字段"},model:{value:e.ext.defaultValueRelateFileds,callback:function(t){e.$set(e.ext,"defaultValueRelateFileds",t)},expression:"ext.defaultValueRelateFileds"}},e._l(e.exts,function(e){return o("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1)],1):e._e(),e._v(" "),"selectInterface"==e.ext.type||"selectinterfaceTree"==e.ext.type?o("el-form-item",{attrs:{label:"接口地址",required:""}},[o("el-input",{staticClass:"w1002",attrs:{placeholder:"interfaceAddress"},model:{value:e.ext.interfaceAddress,callback:function(t){e.$set(e.ext,"interfaceAddress",t)},expression:"ext.interfaceAddress"}})],1):e._e(),e._v(" "),"formule"==e.ext.type?o("div",[o("el-form-item",{attrs:{label:"计算公式"}},[o("el-button",{attrs:{type:"text"},on:{click:e.formuleSet}},[e._v("设置计算公式")])],1)],1):e._e(),e._v(" "),"formule"==e.ext.type||"systemCalc"==e.ext.type?o("el-form-item",{attrs:{label:"可手动修正计算值"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.canFixedData,callback:function(t){e.$set(e.ext,"canFixedData",t)},expression:"ext.canFixedData"}})],1):e._e(),e._v(" "),"baseData"==e.ext.type?o("el-form-item",{attrs:{label:"基础数据表"}},[o("el-select",{staticClass:"w100",attrs:{placeholder:"请选择"},model:{value:e.ext.baseDataTable,callback:function(t){e.$set(e.ext,"baseDataTable",t)},expression:"ext.baseDataTable"}},e._l(e.baseDataOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),"qrCode"==e.ext.type?o("el-form-item",{attrs:{label:"二维码内容"}},[o("el-input",{staticClass:"w1002",attrs:{type:"textarea",placeholder:"二维码内容规则"},model:{value:e.ext.qrCode,callback:function(t){e.$set(e.ext,"qrCode",t)},expression:"ext.qrCode"}})],1):e._e(),e._v(" "),"customDialog"==e.ext.type?o("el-form-item",{attrs:{label:"自定义视图"}},[o("el-input",{staticClass:"w1002",attrs:{placeholder:"视图名称"},model:{value:e.ext.customDialog,callback:function(t){e.$set(e.ext,"customDialog",t)},expression:"ext.customDialog"}})],1):e._e(),e._v(" "),-1!=["picture","video","file"].indexOf(e.ext.type)?o("el-form-item",{attrs:{required:"",label:"数量限制"}},[o("el-input",{attrs:{type:"number"},on:{input:e.uploadNumChange},model:{value:e.ext.uploadNum,callback:function(t){e.$set(e.ext,"uploadNum",t)},expression:"ext.uploadNum"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"栏目宽度"}},[o("el-radio-group",{attrs:{disabled:-1!=e.noColoumWidth.indexOf(e.ext.type)},model:{value:e.ext.spanWidth,callback:function(t){e.$set(e.ext,"spanWidth",t)},expression:"ext.spanWidth"}},[o("el-radio-button",{attrs:{label:4}},[e._v("17%")]),e._v(" "),o("el-radio-button",{attrs:{label:6}},[e._v("25%")]),e._v(" "),o("el-radio-button",{attrs:{label:8}},[e._v("33%")]),e._v(" "),o("el-radio-button",{attrs:{label:12}},[e._v("50%")]),e._v(" "),o("el-radio-button",{attrs:{label:24}},[e._v("100%")])],1)],1),e._v(" "),"customFormDetailView"==e.ext.type?o("el-form-item",{attrs:{label:"自定义视图路径"}},[o("el-input",{staticClass:"w100",attrs:{placeholder:"自定义视图路径"},model:{value:e.ext.customFormDetailViewPath,callback:function(t){e.$set(e.ext,"customFormDetailViewPath",t)},expression:"ext.customFormDetailViewPath"}})],1):e._e(),e._v(" "),"customFormDetailView"==e.ext.type?o("el-form-item",{attrs:{label:"自定义视图附加参数"}},[o("el-input",{staticClass:"w100",attrs:{placeholder:"自定义视图附加参数"},model:{value:e.ext.customFormDetailViewExtInfo,callback:function(t){e.$set(e.ext,"customFormDetailViewExtInfo",t)},expression:"ext.customFormDetailViewExtInfo"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"表格最小宽度"}},[o("el-input",{staticClass:"w100",attrs:{placeholder:"最小栏目宽度"},model:{value:e.ext.coloumWidth,callback:function(t){e.$set(e.ext,"coloumWidth",t)},expression:"ext.coloumWidth"}})],1),e._v(" "),"string"==e.ext.type?o("el-form-item",{attrs:{label:"文本行数"}},[o("el-select",{staticClass:"w100",attrs:{placeholder:"请选择文本行数"},model:{value:e.ext.textRow,callback:function(t){e.$set(e.ext,"textRow",t)},expression:"ext.textRow"}},e._l(4,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1):e._e(),e._v(" "),"selectStaff"==e.ext.type?o("el-form-item",{attrs:{label:"是否多选"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.mustMultiple,callback:function(t){e.$set(e.ext,"mustMultiple",t)},expression:"ext.mustMultiple"}})],1):e._e(),e._v(" "),-1==e.noMustRequired.indexOf(e.ext.type)?o("el-form-item",{attrs:{label:"必填"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.changeMustRequired},model:{value:e.ext.mustRequired,callback:function(t){e.$set(e.ext,"mustRequired",t)},expression:"ext.mustRequired"}})],1):e._e(),e._v(" "),e.ext.mustRequired||"childrenTableStatic"==e.ext.type?e._e():o("el-form-item",{attrs:{label:"新增时隐藏"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.addHidden,callback:function(t){e.$set(e.ext,"addHidden",t)},expression:"ext.addHidden"}})],1),e._v(" "),"location"==e.ext.type?o("el-form-item",{attrs:{label:"位置类型"}},[o("el-select",{staticClass:"w100",attrs:{placeholder:"请选择位置类型"},model:{value:e.ext.locationType,callback:function(t){e.$set(e.ext,"locationType",t)},expression:"ext.locationType"}},[o("el-option",{attrs:{label:"省",value:0}}),e._v(" "),o("el-option",{attrs:{label:"市",value:1}}),e._v(" "),o("el-option",{attrs:{label:"区",value:2}}),e._v(" "),o("el-option",{attrs:{label:"街道",value:3}})],1)],1):e._e(),e._v(" "),"link"==e.ext.type?o("el-form-item",{attrs:{label:"链接前缀"}},[o("el-input",{staticClass:"w100",attrs:{type:"textarea",placeholder:"链接前缀"},model:{value:e.ext.linkPrefix,callback:function(t){e.$set(e.ext,"linkPrefix",t)},expression:"ext.linkPrefix"}})],1):e._e(),e._v(" "),-1!=["float","integer"].indexOf(e.ext.type)?o("span",[o("el-form-item",{attrs:{label:"单位"}},[o("el-input",{attrs:{placeholder:"单位"},model:{value:e.ext.numSuffix,callback:function(t){e.$set(e.ext,"numSuffix",t)},expression:"ext.numSuffix"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"数值范围"}},[o("div",{staticClass:"row"},[o("el-input-number",{staticClass:"col",attrs:{label:"最小值"},model:{value:e.ext.numMin,callback:function(t){e.$set(e.ext,"numMin",t)},expression:"ext.numMin"}}),e._v(" "),o("span",[e._v(" ~ ")]),e._v(" "),o("el-input-number",{staticClass:"col",attrs:{label:"最大值"},model:{value:e.ext.numMax,callback:function(t){e.$set(e.ext,"numMax",t)},expression:"ext.numMax"}})],1)])],1):e._e(),e._v(" "),-1!=e.showDecimalNum.indexOf(e.ext.type)?o("el-form-item",{attrs:{label:"显示小数位"}},[o("el-input-number",{attrs:{min:1,max:10},model:{value:e.ext.decimalNum,callback:function(t){e.$set(e.ext,"decimalNum",t)},expression:"ext.decimalNum"}})],1):e._e(),e._v(" "),-1!=e.canFormatShow.indexOf(e.ext.type)?o("el-form-item",{attrs:{label:"显示格式"}},[o("el-select",{staticClass:"w100",attrs:{placeholder:"请选择显示格式"},model:{value:e.ext.showFormatType,callback:function(t){e.$set(e.ext,"showFormatType",t)},expression:"ext.showFormatType"}},[o("el-option",{attrs:{label:"时间格式",value:0}}),e._v(" "),o("el-option",{attrs:{label:"百分数",value:1}}),e._v(" "),o("el-option",{attrs:{label:"人民币大写",value:2}})],1)],1):e._e()],1)],1),e._v(" "),o("div",[o("el-form",{attrs:{"label-width":"100px",size:"mini"}},["string"==e.ext.type||"integer"==e.ext.type?o("el-form-item",{attrs:{label:"二维码"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.qrcode,callback:function(t){e.$set(e.ext,"qrcode",t)},expression:"ext.qrcode"}})],1):e._e(),e._v(" "),"file"!=e.ext.type&&"picture"!=e.ext.type&&"link"!=e.ext.type&&"video"!=e.ext.type&&"childrenTableStatic"!=e.ext.type?o("el-form-item",{attrs:{label:"搜索"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.query,callback:function(t){e.$set(e.ext,"query",t)},expression:"ext.query"}})],1):e._e(),e._v(" "),"childrenTableStatic"!=e.ext.type?o("el-form-item",{attrs:{label:"只读"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.cantEdit,callback:function(t){e.$set(e.ext,"cantEdit",t)},expression:"ext.cantEdit"}})],1):e._e(),e._v(" "),e.ext.mustRequired?e._e():o("el-form-item",{attrs:{label:"隐藏"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.hidden,callback:function(t){e.$set(e.ext,"hidden",t)},expression:"ext.hidden"}})],1),e._v(" "),-1==e.noSort.indexOf(e.ext.type)?o("el-form-item",{attrs:{label:"根据此字段排序"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.sort,callback:function(t){e.$set(e.ext,"sort",t)},expression:"ext.sort"}}),e._v(" "),e.ext.sort?o("div",["relateTable"==e.ext.type?o("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"选择排序的字段"},model:{value:e.ext.orderRelateTableProps,callback:function(t){e.$set(e.ext,"orderRelateTableProps",t)},expression:"ext.orderRelateTableProps"}},[o("el-option",{key:"id",attrs:{label:"id",value:"id"}}),e._v(" "),e._l(e.ext.relateTableProps,function(e){return o("el-option",{key:JSON.parse(e).key,attrs:{label:JSON.parse(e).name,value:JSON.parse(e).key}})})],2):e._e(),e._v(" "),o("el-radio-group",{model:{value:e.ext.sortOrder,callback:function(t){e.$set(e.ext,"sortOrder",t)},expression:"ext.sortOrder"}},[o("el-radio",{attrs:{label:1}},[e._v("正序")]),e._v(" "),o("el-radio",{attrs:{label:2}},[e._v("倒序")])],1)],1):e._e()],1):e._e(),e._v(" "),"childrenTableStatic"!=e.ext.type?o("el-form-item",{attrs:{label:"唯一编号"}},[o("el-radio",{attrs:{label:e.ext.key},on:{change:e.uniqueKeyChoosed},model:{value:e.uniqueKey,callback:function(t){e.uniqueKey=t},expression:"uniqueKey"}},[e._v("唯一编号\n\n          ")]),e._v(" "),e.uniqueKey==e.ext.key?o("el-button",{attrs:{type:"primary"},on:{click:e.cancleUniqueKey}},[e._v("取消")]):e._e()],1):e._e(),e._v(" "),"propTable"==e.ext.type||"relateTable"==e.ext.type?o("el-form-item",{attrs:{label:"不可用条件"}},[o("el-input",{staticClass:"w1002",attrs:{placeholder:"不可用条件"},model:{value:e.ext.disableCondition,callback:function(t){e.$set(e.ext,"disableCondition",t)},expression:"ext.disableCondition"}})],1):e._e(),e._v(" "),"relateTable"==e.ext.type?o("el-form-item",{attrs:{label:"父表关联字段"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.parentTableRelateKey,callback:function(t){e.$set(e.ext,"parentTableRelateKey",t)},expression:"ext.parentTableRelateKey"}}),e._v(" "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"当前表单设置为其他表单的子表格时，此字段类型和父表单的类型一致时，添加数据时自动设置为父表对应数据的子表格数据。",placement:"top"}},[o("img",{attrs:{src:n("2+9l")}})])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"栏目固定"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ext.enableColumnFixed,callback:function(t){e.$set(e.ext,"enableColumnFixed",t)},expression:"ext.enableColumnFixed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置栏目固定时，此栏将固定在表格的左边或右边，左右拖动时不会移动。",placement:"top"}},[o("img",{attrs:{src:n("2+9l")}})]),e._v(" "),e.ext.enableColumnFixed?o("el-radio-group",{model:{value:e.ext.columnFixed,callback:function(t){e.$set(e.ext,"columnFixed",t)},expression:"ext.columnFixed"}},[o("el-radio",{key:1,attrs:{label:"right"}},[e._v("固定在右边")]),e._v(" "),o("el-radio",{key:2,attrs:{label:"left"}},[e._v("固定在左边")])],1):e._e()],1),e._v(" "),o("el-form-item",{attrs:{label:"字段说明"}},[o("el-input",{staticClass:"w1002",attrs:{type:"textarea",placeholder:"字段说明"},model:{value:e.ext.fieldInfo,callback:function(t){e.$set(e.ext,"fieldInfo",t)},expression:"ext.fieldInfo"}})],1)],1)],1),e._v(" "),o("formuleWin",{ref:"formuleWin",attrs:{dataForm:e.dataForm,exts:e.exts},on:{saveData:e.saveFormuleWin}}),e._v(" "),o("rulesScreen",{ref:"rulesScreenWin",on:{save:e.rulesScreenSave}}),e._v(" "),o("richTextWin",{ref:"richTextWin",on:{save:e.saveRichText}}),e._v(" "),o("addOrUpdateWin",{ref:"addOrUpdate",on:{refreshDataList:e.getFormList}}),e._v(" "),o("vxe-modal",{staticClass:"all-box",attrs:{width:"350px",height:"160px",resize:"",title:"新增"},model:{value:e.addvisible,callback:function(t){e.addvisible=t},expression:"addvisible"}},[o("el-form",{ref:"addForm",staticStyle:{"margin-top":"10px"},attrs:{model:e.addForm,rules:e.dataRule,"label-width":"60px",size:"mini"}},[o("el-form-item",{attrs:{label:"名称",prop:"addName"}},[o("el-input",{model:{value:e.addForm.addName,callback:function(t){e.$set(e.addForm,"addName",t)},expression:"addForm.addName"}})],1)],1),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"}),e._v(" "),o("div",[o("el-button",{on:{click:e.addClose}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addOk}},[e._v("确定")])],1)])],1),e._v(" "),e.winshow?o("robotEditDialog",{ref:"robotEdit",on:{robotSaved:e.robotSaved}}):e._e()],1)},staticRenderFns:[]};var M=n("VU/8")(I,R,!1,function(e){n("B+42")},"data-v-42a91348",null);t.default=M.exports},SYqL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("4dYU"),i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column h100"},[e.noPublicTable?n("div",[n("span",{staticStyle:{margin:"20px"}},[e._v("非公开访问")])]):n("div",{staticClass:"column h100",attrs:{id:"bodyBox"}},[e.dashBoardItems.length>0?n("div",[n("CommonGridLayout",{ref:"dashboard",attrs:{list:e.dashBoardItems,isEdit:!1},on:{onTableDataFilter:e.onTableDataFilter}})],1):e._e(),e._v(" "),n("div",{staticClass:"col row",staticStyle:{height:"0"}},[e.tableProp.leftView?n("div",[n("left-view",{ref:"leftView",attrs:{tableProp:e.tableProp},on:{treeClick:e.leftTreeClick}})],1):e._e(),e._v(" "),n("div",{staticClass:"col column h100 w100",staticStyle:{overflow:"hidden"}},[e.noSearchBar||e.localTableDataModule||!(e.showQueryInfo||e.queryInfo.length>0||e.process.processEnable||e.tableProp.seniorSearch)?e._e():n("tableSearch",{attrs:{isOpen:e.isOpen,processCondition:e.processCondition,queryInfo:e.queryInfo,tableDefine:e.tableDefine,fixedData:e.fixedData,process:e.process,relateTaleFilter:e.relateTaleFilter,baseTableFilter:e.baseTableFilter,showFuzzySearch:e.tableProp.fuzzySearch,showSeniorSearch:e.tableProp.seniorSearch,dataForm:e.dataForm},on:{search:e.search,clear:e.clearSearchData,gotoBaseDataTableForFilter:e.gotoBaseDataTableForFilter,showChooseRelateTableForFilter:e.showChooseRelateTableForFilter}}),e._v(" "),e.showChart?n("chart-part",{ref:"chart"}):e._e(),e._v(" "),null!=e.tableProp.canView&&0==e.tableProp.canView?n("span",[e._v("\n          无权限查看")]):e.customView.customListView&&!e.dontShowCustomViewProp?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticClass:"col column",staticStyle:{height:"0"}},[n("div",{staticClass:"row",staticStyle:{"margin-bottom":"5px"}},[n("div",{staticClass:"col"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("\n                  "+e._s(e.tableProp.addBtnText?e.tableProp.addBtnText:"新增")+"\n                ")])],1),e._v(" "),e.isEdit&&e.isNowApp?n("div",{staticClass:"edit-mode-text",on:{click:e.showDefineDialog}},[n("i",{staticClass:"el-icon-edit"}),e._v(" "),n("div",{staticClass:"col text-center"},[e._v("表单设计")])]):e._e()]),e._v(" "),n("div",{staticClass:"col overflow-auto"},[n("customListView",{ref:"customListView",tag:"component",attrs:{tableProp:e.tableProp,parentPoint:e.thisPoint,tableDataProp:e.tableData,customViewOption:e.customView,extInfo:e.extInfo,interfaceMap:e.interfaceMap},on:{clickItem:function(t){e.goDetail(t,e.tableName)},editItem:e.addOrUpdateHandle,delete:e.deleteHandle}})],1)]):null!=e.tableProp.canView&&1!=e.tableProp.canView||null!=e.isHidenTable&&0!=e.isHidenTable||null!=e.customView.customListView&&0!=e.customView.customListView&&1!=e.dontShowCustomViewProp?e._e():n("div",{staticClass:"col",staticStyle:{height:"0"}},[n("div",{style:{minHeight:e.tableHeight||"400px"}},[n("vxe-grid",{ref:"xGrid",attrs:{"auto-resize":"",height:"auto",border:"","highlight-hover-row":"","highlight-current-row":"",align:"center",size:"mini","show-overflow":e.tableShowOverFlow,"show-header-overflow":e.tableShowOverFlow,"header-align":"center","keep-source":"","row-style":e.rowStyle,"cell-style":e.cellStyle,"header-cell-style":e.cellStyle,loading:e.dataListLoading,data:e.tableData,"tree-config":2==e.tableProp.listType?{children:"children",expandAll:!0,indent:30}:null,columns:e.tableColumn,"show-footer":null!=e.footerData&&e.footerData.length>0,"footer-method":e.footerMethod,toolbar:e.getToolbarConfig(),"edit-config":e.isEnableEdit()?{trigger:"click",activeMethod:e.activeMethod,mode:"row",showAsterisk:!0,autoClear:!0,showStatus:!0,icon:"null"}:null,"row-id":"id","radio-config":{highlight:!0,checkRowKey:e.selectRowId},"export-config":{types:["xlsx","csv"],data:e.tableData,modes:["current","selected","all"]}},on:{"edit-actived":e.editActived,"edit-closed":e.editClosed,keydown:e.gridKeydown,"cell-click":e.cellClickEvent,"radio-change":e.radioChangeEvent,"checkbox-change":e.checkboxChangeEvent,custom:e.toolbarCustomEvent,"checkbox-all":e.checkboxChangeEvent},scopedSlots:e._u([{key:"toolbar_buttons",fn:function(){return[n("div",{staticClass:"row"},[e.isSqlTable||e.noHeadOperateBar?e._e():n("div",[e.isOpen?n("div",{staticStyle:{display:"flex"}},[e.tableProp.openOpt.canInsert?n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("\n                          "+e._s(e.tableProp.addBtnText?e.tableProp.addBtnText:"新增")+"\n                        ")]):e._e()],1):n("div",{staticStyle:{display:"flex"}},[2==e.tableProp.listType?n("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$refs.xGrid.setAllTreeExpand(!0)}}},[e._v("展开\n                        ")]):e._e(),e._v(" "),2==e.tableProp.listType?n("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$refs.xGrid.setAllTreeExpand(!1)}}},[e._v("收起\n                        ")]):e._e(),e._v(" "),e.tableProp.canInsert?n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.insertEvent()}}},[e._v("\n                          "+e._s(e.tableProp.addBtnText?e.tableProp.addBtnText:"新增")+"\n                        ")]):e._e(),e._v(" "),e.tableProp.canDelete&&!e.noBatchDelete?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteHandle()}}},[e._v("批量删除("+e._s(e.selectedRows.length)+")\n                        ")]):e._e(),e._v(" "),e.toolsCustomBtn.length>0?n("customButtom",{staticStyle:{"margin-left":"10px"},attrs:{btnStyle:"table",btns:e.toolsCustomBtn,extInfo:{extId:e.extId,extKey:e.extKey},parentPoint:e.thisPoint,tableName:e.tableName},on:{success:e.cuscomBtnSuccess}}):e._e(),e._v(" "),e.tableProp.canEdit&&e.tableProp.canExcelEdit&&!e.tableProp.onlyCreaterCanEdit?n("el-button",{attrs:{type:"primary"},on:{click:e.exceEdit}},[e._v("Excel编辑\n                        ")]):e._e(),e._v(" "),e.tableProp.canEdit&&e.tableProp.canBatchUploadFile&&!e.tableProp.onlyCreaterCanEdit?n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.batchUploadFile()}}},[e._v("批量上传文件\n                        ")]):e._e(),e._v(" "),e.tableProp.batchPrintQrCode?n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.batchPrintQrcode()}}},[e._v("批量打印单据\n                        ")]):e._e(),e._v(" "),e.tableChart&&e.tableChart.length>0?n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.watchChart()}}},[e._v("\n                          数据报表\n                        ")]):e._e(),e._v(" "),e.checkShowHistory()?n("div",{staticStyle:{"margin-left":"15px"}},[e.openHistoryStyle?n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openHistoryDataStyle()}}},[e._v("\n                            "+e._s(e.tableProp.recordUpdateHistoryQueryText||"查询历史数据")+"\n                          ")]):n("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e._v("\n                            "+e._s(e.tableProp.recordUpdateHistoryQueryText||"历史数据")+"：\n                          ")]),e._v(" "),n("el-date-picker",{staticStyle:{width:"130px"},attrs:{align:"right",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":e.historyDataDatePickerOptions},on:{change:function(t){return e.getHistoryData()}},model:{value:e.historyDataDate,callback:function(t){e.historyDataDate=t},expression:"historyDataDate"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},on:{click:function(t){return e.closeHistoryDataStyle()}}},[e._v("\n                              取消\n                            ")])],1)],1):e._e(),e._v(" "),e.process.processEnable?n("el-radio-group",{staticStyle:{"margin-left":"12px"},on:{change:function(t){e.pageIndex=1,e.pageSize=10,e.getDataList()}},model:{value:e.processCondition.type,callback:function(t){e.$set(e.processCondition,"type",t)},expression:"processCondition.type"}},[n("el-radio-button",{attrs:{label:""}},[e._v(e._s("全部"))]),e._v(" "),n("el-radio-button",{attrs:{label:"myStartProcess"}},[e._v(e._s("我发起的("+e.processCount.myStartProcessCount+")")+"\n                          ")]),e._v(" "),n("el-radio-button",{attrs:{label:"myTodoProcess"}},[e._v(e._s("我待办的("+e.processCount.myTodoProcessCount+")")+"\n                          ")]),e._v(" "),n("el-radio-button",{attrs:{label:"myHaveDoneProcess"}},[e._v(e._s("我已审批的("+e.processCount.myHaveDoneProcessCount+")")+"\n                          ")])],1):e._e(),e._v(" "),e.customView.toolbarButtonsExtView?n("toolbarButtonsExtView",{tag:"component",attrs:{parentData:e.$data}}):e._e(),e._v(" "),e.tableProp.fuzzySearch?n("el-input",{staticClass:"fuzzySearch-input",attrs:{placeholder:"输入关键字查询",clearable:""},on:{change:function(t){return e.reGetDataList()}},model:{value:e.fuzzySearch,callback:function(t){e.fuzzySearch=t},expression:"fuzzySearch"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.reGetDataList()}},slot:"append"})],1):e._e()],1)])])]},proxy:!0},{key:"toolbar_tools",fn:function(){return[e.isEdit?n("div",{staticClass:"edit-mode-text",on:{click:e.showDefineDialog}},[n("i",{staticClass:"el-icon-edit"}),e._v(" "),n("div",{staticClass:"col text-center"},[e._v("表单设置")])]):e._e(),e._v(" "),e.tableProp.canExportExcel||e.tableProp.canImportExcel?n("button",{staticClass:"vxe-button type--button size--mini is--circle",staticStyle:{"margin-right":"12px"},attrs:{type:"button",title:"Excel导出导入"},on:{click:e.exportImportExcel}},[n("i",{staticClass:"vxe-button--icon vxe-icon--download"})]):e._e()]},proxy:!0},{key:"noPermEdit",fn:function(t){return t.row,t.column,[n("span",[e._v("无权限编辑")])]}},{key:"defaultEditView",fn:function(t){var o=t.row,i=t.column;return[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):n("vxe-input",{model:{value:o[i.property],callback:function(t){e.$set(o,i.property,t)},expression:"row[column.property]"}})]}},{key:"intEditView",fn:function(t){var o=t.row,i=t.column;return[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):n("vxe-input",{attrs:{placeholder:"整数类型",type:"integer"},model:{value:o[i.property],callback:function(t){e.$set(o,i.property,e._n(t))},expression:"row[column.property]"}})]}},{key:"floatEditView",fn:function(t){var o=t.row,i=t.column;return[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):n("vxe-input",{attrs:{placeholder:"小数类型",type:"float",digits:"4"},model:{value:o[i.property],callback:function(t){e.$set(o,i.property,e._n(t))},expression:"row[column.property]"}})]}},{key:"selectinterface",fn:function(t){var o=t.row,i=t.column;return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:o[i.property],callback:function(t){e.$set(o,i.property,t)},expression:"row[column.property]"}},[n("el-option",{key:1,attrs:{label:1,value:1}})],1)]}},{key:"selectinterfaceTree",fn:function(t){var o=t.row,i=t.column;return[n("my-tree-select-withdata",{attrs:{id:o[i.property],datalist:i.params.datalist,place:"请选择"},model:{value:o[i.property],callback:function(t){e.$set(o,i.property,t)},expression:"row[column.property]"}})]}},{key:"selectStaffView",fn:function(t){var o=t.row,i=t.column;return[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):n("selectStaff",{attrs:{fieldDefine:i.params.fieldDefine,tableItemData:o,single:!i.params.fieldDefine.mustMultiple},model:{value:o[i.property],callback:function(t){e.$set(o,i.property,t)},expression:"row[column.property]"}})]}},{key:"selectView",fn:function(t){var o=t.row,i=t.column;return[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):n("vxe-select",{attrs:{placeholder:"请选择"+i.title,multiple:i.params.multiple},model:{value:o[i.property],callback:function(t){e.$set(o,i.property,t)},expression:"row[column.property]"}},e._l(i.params.selectItems,function(e){return n("vxe-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)]}},{key:"locationView",fn:function(t){var o=t.row,i=t.column;return[n("location",{attrs:{type:e.optionMap[i.property].locationType},model:{value:o[i.property],callback:function(t){e.$set(o,i.property,t)},expression:"row[column.property]"}})]}},{key:"defaultView",fn:function(t){var o=t.row,i=t.column;return[i.params.parentCloumnKey&&"relateTable"==e.optionMap[i.params.parentCloumnKey].type?n("span",[n("relateTableSelectData",{attrs:{refs:"relateTableSelectData",columnData:i,rowData:o},on:{updateRelateItemData:e.updateRelateItemData}})],1):"select"==e.optionMap[i.property].type?n("span",[o[i.property]&&""!=o[i.property]?n("el-tag",{staticClass:"ext-select-show-box",style:"color:"+e.getSelectColor(o[i.property],i.params.selectItems),attrs:{effect:"plain"}},[e._v("\n                      "+e._s(e.getSelectLabel(o[i.property],i.property))+"\n                    ")]):e._e()],1):"multipleSelect"==e.optionMap[i.property].type?n("span",[Array.isArray(o[i.property])?n("div",e._l(o[i.property],function(t){return t&&""!=t?n("el-tag",{staticClass:"ext-select-show-box",staticStyle:{"margin-right":"10px"},style:"color:"+e.getSelectColor(t,i.params.selectItems),attrs:{effect:"plain"}},[e._v("\n                        "+e._s(e.getSelectLabel(t,i.property))+"\n                      ")]):e._e()}),1):e._e()]):"location"==e.optionMap[i.property].type?n("span",[o[i.property]?n("el-button",{attrs:{title:"查看详情",type:"text",size:"small"},on:{click:function(t){return e.goDetail(o.id,e.tableName,o)}}},[e._v("\n                      "+e._s(o[i.property].address)+"\n                    ")]):e._e()],1):"selectStaff"==e.optionMap[i.property].type?n("span",[e._v("\n                    "+e._s(e.checkStaffMultiple(o,i))+"\n                    "),Array.isArray(o[i.property])?n("div",e._l(o[i.property],function(t){return n("staff-tag",{key:t,staticStyle:{"margin-right":"5px"},attrs:{nodetail:"",userId:t}},[e._v(e._s(e.getStaffSpan(t)))])}),1):o[i.property]?n("staff-tag",{attrs:{nodetail:"",userId:o[i.property]}},[e._v(e._s(e.getStaffSpan(o[i.property])))]):e._e()],1):-1!=["video","picture"].indexOf(e.optionMap[i.property].type)?n("span",[n("el-button",{attrs:{title:"查看详情",type:"text",size:"small"},on:{click:function(t){return e.goDetail(o.id,e.tableName,o)}}},[o[i.property]&&Array.isArray(o[i.property])?n("span",[e._v("\n                        "+e._s(e.optionMap[i.property].name)+" "+e._s("(")+e._s(o[i.property].length?o[i.property].length:0)+e._s(")")+"\n                      ")]):o[i.property]?n("span",[e._v("\n                        "+e._s(o[i.property]=[{url:o[i.property],name:""}])+"\n                      ")]):e._e()])],1):"file"==e.optionMap[i.property].type?n("span",[n("el-button",{attrs:{title:"查看详情",type:"text",size:"small"},on:{click:function(t){return e.showFileList(o,i)}}},[Array.isArray(o[i.property])&&1==o[i.property].length?n("span",[e._v("\n                        "+e._s(o[i.property][0].name)+"\n                      ")]):o[i.property]&&0!=o[i.property].length?Array.isArray(o[i.property])?n("span",[e._v("\n                        "+e._s(e.optionMap[i.property].name)+" "+e._s("(")+e._s(o[i.property].length?o[i.property].length:0)+e._s(")")+"\n                      ")]):o[i.property]?n("span",[e._v("\n                        "+e._s(o[i.property]=[{url:o[i.property],name:""}])+"\n                      ")]):n("span",[e._v("\n                        "+e._s(e.optionMap[i.property].name)+"\n                      ")]):n("span",[e._v("\n                        无\n                      ")])])],1):"integer"==e.optionMap[i.property].type||"float"==e.optionMap[i.property].type||"childrenTableStatic"==e.optionMap[i.property].type?n("span",[0==e.optionMap[i.property].showFormatType?n("span",[e._v("\n                    "+e._s(e.formatShowSeconds(o[i.property]))+"\n                  ")]):1==e.optionMap[i.property].showFormatType?n("span",[e._v("\n                    "+e._s(e.formatShowPercent(o[i.property]))+"\n                  ")]):2==e.optionMap[i.property].showFormatType?n("span",[e._v("\n                    "+e._s(e.formatShowRMB(o[i.property]))+"\n                  ")]):n("span",[e._v("\n                    "+e._s(e.dealwithFloat(o,i))+"\n")])]):n("span",[e._v("\n                    "+e._s(e.dealwithFloat(o,i))+"\n")])]}},{key:"selectinterfaceTreeShow",fn:function(e){var t=e.row,o=e.column;return[n("my-tree-show",{attrs:{id:t[o.property],datalist:o.params.datalist,value:t[o.property]}})]}},{key:"richTextView",fn:function(t){var o=t.row,i=t.column;return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showRichtextDialog(o.id,o,i.property,i.title,i.params.fieldCanEdit,i)}}},[e._v("查看\n                  ")])]}},{key:"childrenTableView",fn:function(t){var o=t.row,i=t.column;return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return t.stopPropagation(),e.gotoChildrenTable(i,o.id,i.params.childrenTableName,i.title,i.params.fieldCanEdit,o)}}},[e._v(e._s(i.title)+"\n                  ")])]}},{key:"canFixDataView",fn:function(t){var o=t.row,i=t.column;return[o[i.property+"_haveFixData"]?n("span",{staticStyle:{color:"#ff0000"}},[e._v("\n                    "+e._s(e.dealwithFloat(o,i)))]):n("span",{staticStyle:{color:"#259f3b"}},[e._v("\n                    "+e._s(e.dealwithFloat(o,i)))]),e._v(" "),e.$refs.xGrid.isActiveByRow(o)&&i.params.canFixData&&i.params.fieldCanEdit?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.gotoCanFixDataDialog(o,i.property,o[i.property],i.title)}}},[e._v("\n                    修正\n                  ")]):e._e()]}},{key:"relateTableViewMultiple",fn:function(t){var o=t.row,i=t.column;return[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):n("el-button",{attrs:{title:"查看详情",type:"text",size:"small"},on:{click:function(t){return e.goDetail(o.id,e.tableNam,o)}}},[e._v("\n                    查看详情\n                  ")])]}},{key:"relateTableView",fn:function(t){var o=t.row,i=t.column,a=t.rowIndex;return[e.checkItemDisable(i.params.disableCondition,o)?n("span",[e._v("不可用")]):n("div",{staticClass:"relateTable"},["qrCode"==i.type?n("el-popover",{attrs:{placement:"right",width:"320",height:"320",trigger:"hover"}},[n("qrcode",{attrs:{value:e.getRelateTableText(o,i),options:{size:300}}}),e._v(" "),n("qrcode",{attrs:{slot:"reference",value:e.getRelateTableText(o,i),options:{size:40}},slot:"reference"})],1):n("el-button",{attrs:{title:"查看关联表单",type:"text",size:"small"},on:{click:function(t){return t.stopPropagation(),e.goDetail(o[i.params.parentCloumnKey],i.params.relateTableName,o)}}},[e._v("\n                      "+e._s(e.getRelateTableText(o,i))+"\n                    ")]),e._v(" "),!i.params.cantEdit&&e.checkRowCanEdit(o)&&e.isEnableEdit()?n("el-button",{staticClass:"relateTable-hover-btn",staticStyle:{position:"absolute",right:"0px",top:"0px"},attrs:{type:"text",title:"选择"},on:{click:function(t){return e.showChooseRelateTable(o.id,i.params.relateTableName,i.params.parentCloumnKey,o[i.params.parentCloumnKey],i.params.relateTableExtId,o,a)}}},[n("i",{staticClass:"el-icon-edit-outline"})]):e._e()],1)]}},{key:"relateTableEditView",fn:function(t){var o=t.row,i=t.column;return[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):e.checkItemDisable(i.params.disableCondition,o)?n("span",[e._v("不可用")]):n("div",{staticClass:"relateTable"},[n("relateTableSelectData",{attrs:{refs:"relateTableSelectData",columnData:i,rowData:o,initText:e.getRelateTableText(o,i),initValue:e.getRelateTableValue(o,i)},on:{updateRelateItemData:e.updateRelateItemData}})],1)]}},{key:"propTableView",fn:function(t){var o=t.row,i=t.column;return[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):e.checkItemDisable(i.params.disableCondition,o)?n("span",[e._v("不可用")]):n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.gotoPropTable(o[i.params.parentCloumnKey],i.params.relateTableName,i.params.parentCloumnKey,o[i.params.parentCloumnKey],o.relateTableContent,i.params.fieldCanEdit)}}},[e._v("\n                    "+e._s(o.relateTableContent&&o.relateTableContent[i.params.parentCloumnKey]&&null!=o.relateTableContent[i.params.parentCloumnKey][i.property]?o.relateTableContent[i.params.parentCloumnKey][i.property]:o[i.params.parentCloumnKey]?"-":"编辑")+"\n                  ")])]}},{key:"propTableViewLink",fn:function(t){var o=t.row,i=t.column;return[e.checkItemDisable(i.params.disableCondition,o)?n("span",[e._v("不可用")]):n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.gotoPropTable(o.id,i.params.relateTableName,i.params.parentCloumnKey,o[i.params.parentCloumnKey],o.relateTableContent,i.title,i.params.fieldCanEdit)}}},[e._v("\n                    "+e._s(i.title)+"\n                  ")])]}},{key:"baseDataTableView",fn:function(t){var o=t.row,i=t.column;return[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):e.tableProp.canEdit&&!e.tableProp.onlyCreaterCanEdit?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.gotoBaseDataTable(o.id,i.params.baseDataTable,i.property,o[i.property],i.params.fieldCanEdit)}}},[e._v("\n                    "+e._s(null!=o.baseTableContent&&null!=o.baseTableContent[i.property]&&""!=o.baseTableContent[i.property]?o.baseTableContent[i.property]:"请选择")+"\n                  ")]):n("span",[e._v("\n                    "+e._s(null!=o.baseTableContent&&null!=o.baseTableContent[i.property]&&""!=o.baseTableContent[i.property]?o.baseTableContent[i.property]:"")+"\n                  ")])]}},{key:"customDialogViewSlot",fn:function(t){var o=t.row,i=t.column;return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.gotoCustomDialog(o,i.params.customDialog,i.property)}}},[e._v("\n                    "+e._s(i.title)+"\n                  ")])]}},{key:"fileView",fn:function(t){var o=t.row,i=t.column;return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.showFileList(o.id,o,i.property,i.params.fieldCanEdit)}}},[e._v("\n                    文件\n                  ")])]}},{key:"pictureView",fn:function(t){var o=t.row,i=t.column;return[e.$refs.xGrid.isActiveByRow(o)?n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.baseUrl+"/sys/oss/uploadNoSaveInfo?token="+i.params.token,accept:".jpg,.jpeg,.png,.bmp",data:{token:i.params.token},"on-success":e.uploadImageSuccess}},[null==o[i.property]||""==o[i.property]?n("el-button",{attrs:{slot:"trigger",size:"small",type:"text"},on:{click:function(t){return e.uploadImage(o,i.property)}},slot:"trigger"},[e._v("上传\n                    ")]):n("img",{attrs:{src:o[i.property],height:"30px"},on:{click:function(t){return e.uploadImage(o,i.property)}}}),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n                      只能上传图片文件\n                    ")])],1):n("el-popover",{attrs:{trigger:"click"}},[n("img",{staticStyle:{"text-align":"center"},attrs:{src:o[i.property]}}),e._v(" "),n("img",{attrs:{slot:"reference",src:o[i.property],height:"30px"},slot:"reference"})])]}},{key:"videoView",fn:function(t){var o=t.row,i=t.column;return[e.$refs.xGrid.isActiveByRow(o)?n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.baseUrl+"/sys/oss/uploadNoSaveInfo?token="+i.params.token,accept:".mp4,.avi",data:{token:i.params.token},"on-success":e.uploadImageSuccess}},[n("el-button",{attrs:{slot:"trigger",size:"small",type:"text"},on:{click:function(t){return e.uploadImage(o,i.property)}},slot:"trigger"},[e._v("上传\n                    ")]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n                      只能上传视频文件\n                    ")])],1):n("el-popover",{attrs:{trigger:"click"}},[n("img",{staticStyle:{"text-align":"center",width:"20px",height:"20px"},attrs:{slot:"reference",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAqVJREFUWEfNl79PFEEUx79vIwVW3EpF0EhkSURtBAsbGgtLK6/QEAujcmvhr5gYTfiRYGMUJJE9DmNlbORvsLGxECoBI3tEI8bKrBYmisI+M3O35/3Y3ZnF25yv2mTej8++efPmDaHFQknjm4/dbvzGcRD6wTgk7QkrYKyiDa+8C9anJD61ADqd4oDPfJYJQwQMxAVgYIkYLw2iZ1/s3iUVTCyAOef2w+crAF1UOQpf53kYNOONWKtR9pEApeB4DpTTvDMCYbUCA9koiFCAJgYPsCMhGgBSCB4LUQOQYvBIiFoAZ62w84LTLRKe9+y+S4F2BUAeNfCi0g1hXOowzgHoUeqHKBigweCIVgDMfPEhWBy5ePFsS9pkCuv7aNsfBXBeZdOwTjTj5XqvlnpYWUzHfQPgsMpZABDoZZz1M8T+GAh9Ktuq9WXPto5UADryb/cbvOu9joN6AGHTVfi8e3P7+wMGjej4EDo+bfV8yx38IDNgOu5pQDYdpYQBVLKYd0+CcV8nkwCynm0tlADy7hi4XFyaNRCnlnHcuwTcjnVFGPdy1kSQAfH3IgtKictAtbHpFO8BfDPG4YJnW9n0AGbf3QAZYjuipAqgyVtgOu4EAHFEo6VuC5pShB2P1oaIaJoIR5V7WVOEpSlnQ8MIYTXQPbXR/qP95ygzbun4kDpt2Cump0ojyjjuomraEXb1AHvm3FPsY1Lz6MnYYmr6aluD4vtvJ5x1p0C4pvqDAKDzyccu/rV5hxm2yqZhnTHtXbau1wAkvYyIMczAgcTBAYReRrIhtfI6lgDNmwOjEtMwmv1fI1mAnUIm9IfSFCCSj+W1EC16mFRXkTyihGEwn9BoOMsgemEwnv7z0yyslMvT07Gwx6lPW6/FlJOkN2g9TpM4TKr7B7H+IjDOEGyWAAAAAElFTkSuQmCC"},slot:"reference"}),e._v(" "),null==o[i.property]?n("span",[e._v(" 暂无视频")]):n("video",{staticStyle:{"max-height":"500px","max-width":"500px"},attrs:{src:o[i.property],controls:"controls"}})])]}},{key:"qrCodeView",fn:function(t){var o=t.row,i=t.column;return[n("el-popover",{attrs:{placement:"right",width:"320",height:"320",trigger:"click"}},[n("qrcode",{attrs:{value:o[i.property],options:{size:300}}}),e._v(" "),n("qrcode",{attrs:{slot:"reference",value:o[i.property],options:{size:40}},slot:"reference"})],1)]}},{key:"linkView",fn:function(t){var o=t.row,i=t.column;return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.gotoLink(o,o.id,i)}}},[e._v(e._s(i.title)+"\n                  ")])]}},{key:"propsHeader",fn:function(t){t.row;var n=t.column;return[e._v("\n                  "+e._s(n.title)+"\n                ")]}},{key:"processCloumn",fn:function(t){var o=t.row;return t.column,t.rowIndex,[o.processTaskInfo?n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.processViewEvent(o)}}},[e._v(e._s(o.processTaskInfo.currentTaskName)+"\n                  ")]):e._e(),e._v(" "),2==e.tableProp.listType?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.addTreeNode(o.id)}}},[e._v("新增下级\n                  ")]):e._e()]}},{key:"dateTimePicker",fn:function(t){var o=t.row,i=t.column;return t.rowIndex,[e.checkCellCanNotEdit(o,i)?n("span",[e._v("无权限编辑")]):n("vxe-input",{attrs:{type:i.params.viewType,valueFormat:i.params.viewValueFormat},model:{value:o[i.property],callback:function(t){e.$set(o,i.property,t)},expression:"row[column.property]"}})]}},{key:"operateCloumn",fn:function(t){var o=t.row;return t.column,t.rowIndex,[n("view",{attrs:{slot:"operateButton"},slot:"operateButton"}),e._v(" "),n("el-button",{attrs:{type:"text",size:"small",title:"详情"},on:{click:function(t){return e.goDetail(o.id,e.tableName,o)}}},[e._v("\n                    详情\n                  ")]),e._v(" "),2==e.tableProp.listType?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.addTreeNode(o.id)}}},[e._v("新增下级\n                  ")]):e._e(),e._v(" "),e.isOpen&&e.checkRowCanDelete(o)?n("el-button",{staticStyle:{color:"#ff0000"},attrs:{type:"text",size:"small",title:"删除"},on:{click:function(t){return e.deleteHandle(o)}}},[e._v("\n                    删除\n                  ")]):e._e(),e._v(" "),!e.isOpen&&(e.customView.operatorButtonsExtView||e.operateCustomBtn.length>0||e.tableProp.operateCopyData||e.checkShowHistory()||e.checkRowCanDelete(o))?n("el-popover",{staticStyle:{"margin-left":"25px"},attrs:{placement:"bottom",trigger:"click"},on:{show:function(t){return e.customButtonShow(o)}}},[e.operateCustomBtn.length>0?n("customButtom",{ref:"operateCustomButton"+o.id,attrs:{btnStyle:"list",btns:e.operateCustomBtn,tableName:e.tableName,tableDataId:o.id},on:{success:e.cuscomBtnSuccess}}):e._e(),e._v(" "),n("div",{staticClass:"column"},[e.tableProp.operateCopyData?n("div",{staticClass:"operate-list",on:{click:function(t){return e.copyData(o)}}},[n("i",{staticClass:"el-icon-document-copy"}),e._v(" "),n("span",[e._v(" 复制数据 ")])]):e._e(),e._v(" "),e.tableProp.canPublicShare?n("div",{staticClass:"operate-list",on:{click:function(t){return e.share(o)}}},[n("i",{staticClass:"el-icon-share"}),e._v(" "),n("span",[e._v(" 分享 ")])]):e._e(),e._v(" "),e.checkRowCanDelete(o)?n("div",{staticClass:"operate-list",staticStyle:{color:"#ff0000"},attrs:{size:"small",title:"删除"},on:{click:function(t){return e.deleteHandle(o)}}},[n("i",{staticClass:"el-icon-delete"}),e._v(" "),n("span",[e._v(" 删除 ")])]):e._e(),e._v(" "),e.checkShowHistory()?n("div",{staticClass:"operate-list",attrs:{size:"small",title:"修改历史"},on:{click:function(t){return e.gotoUpdateHistory(o)}}},[n("i",{staticClass:"el-icon-tickets"}),e._v(" "),n("span",[e._v(" 修改历史 ")])]):e._e(),e._v(" "),e.customView.operatorButtonsExtView?n("operatorButtonsExtView",{tag:"component",attrs:{parentData:e.$data,rowData:o,parentPoint:e.thisPoint}}):e._e()],1),e._v(" "),n("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("\n                      更多\n                    ")])],1):e._e()]}}])},[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v("\n\n                //自定义视图\n                "),e._v(" "),e._v("\n\n                //图片\n                "),e._v("\n\n                //视频\n                ")])],1),e._v(" "),e.noPageInfo?e._e():n("div",[0!=e.localTableDataModule||null!=e.tableConfig.isHidePageInfo&&0!=e.tableConfig.isHidePageInfo?e._e():n("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[20,50,100,200,500,1e3,5e3],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)]),e._v(" "),e.excelEditVisible?n("common-excel",{ref:"excelEdit",on:{excelDataSave:e.excelDataSave}}):e._e(),e._v(" "),e.defineAddOrUpdateVisible?n("define-add-or-update",{ref:"defineAddOrUpdate",on:{refreshDataList:e.getExtInfo}}):e._e(),e._v(" "),e.commonPrintQrcodeVisible?n("commonPrintQrcode",{ref:"commonPrintQrcodeView"}):e._e(),e._v(" "),e._l(e.customDialogView,function(t){return n("div",[1==e.customDialogViewVisible[t]?n(t,{ref:t,refInFor:!0,tag:"component"}):e._e()],1)})],2)]),e._v(" "),n("div",[n("vxe-modal",{model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[n("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),n("vxe-modal",{attrs:{width:"50%",title:"Excel文件"},model:{value:e.exceldialogVisible,callback:function(t){e.exceldialogVisible=t},expression:"exceldialogVisible"}},[null==e.tableProp.canExportExcel||1==e.tableProp.canExportExcel?n("div",[n("h4",[e._v("导出")]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"导出的为数据原始数据，导出的文件可进行导入",placement:"bottom"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出Excel(源数据)\n              ")])],1),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"导出的数据为查看的数据，不可再次导入",placement:"bottom"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.exportExcelForView}},[e._v("导出Excel(查看)\n              ")])],1)],1):e._e(),e._v(" "),e.tableProp.canImportExcel&&e.tableProp.canInsert&&!e.tableProp.onlyCreaterCanEdit?n("div",[n("h4",[e._v("导入")]),e._v(" "),n("div",{staticClass:"row"},[n("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"warning"},on:{click:e.modelExcel}},[e._v("下载模板")]),e._v(" "),n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.getUploadUrl(),"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:1,"before-upload":e.beforeUpload,accept:".xls,.xlsx",data:{token:this.$cookie.get("token"),tableName:e.tableName},"on-exceed":e.handleExceed,"file-list":e.excelFileList,"on-success":e.onsuccess}},[n("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("导入Excel\n                ")])],1)],1),e._v(" "),n("div",{staticClass:"el-upload__tip"},[e._v("只能导入Excel文件")])]):e._e()]),e._v(" "),e.shareVisible?n("vxe-modal",{attrs:{width:"500px",title:"分享"},model:{value:e.shareVisible,callback:function(t){e.shareVisible=t},expression:"shareVisible"}},[n("div",[n("div",{staticStyle:{"font-size":"14px","margin-bottom":"10px"}},[e._v("分享链接：")]),e._v(" "),n("div",{staticClass:"url-box",staticStyle:{"margin-bottom":"20px"},on:{click:function(t){return e.copyUrl(e.viewUrl+"/#/open-detail?tb="+e.tableName+"&id="+e.shareRow.id)}}},[e._v("\n              "+e._s(e.viewUrl+"/#/open-detail?tb="+e.tableName+"&id="+e.shareRow.id)+"\n            ")])])]):e._e(),e._v(" "),n("chartView",{ref:"chartView"}),e._v(" "),e.addOrUpdateVisible?n("add-or-update",{ref:"addOrUpdate",attrs:{isChildView:e.isChildView,isOpen:e.isOpen},on:{refreshDataList:e.getDataList,onAddNewData:e.onAddNewData}}):e._e(),e._v(" "),e.fileListVisible?n("file-list",{ref:"fileList",on:{fileListChange:e.fileListChange}}):e._e(),e._v(" "),e.batchUploadFileVisible?n("batch-upload-file",{ref:"batchUploadFile",on:{batchUploadFileSuccess:e.batchUploadFileSuccess}}):e._e(),e._v(" "),e.commonDialogVisible?n("common-dialog",{ref:"commonDialog",on:{hide:function(t){return e.getDataList()},refreshDataList:e.getDataList}}):e._e(),e._v(" "),e.commonRelateTableDialogVisible?n("common-relatetable-dialog",{ref:"commonRelateTableDialog",on:{updateRelateItemData:e.updateRelateItemData,updateRelateFilterData:e.updateRelateFilterData}}):e._e(),e._v(" "),e.commonRelateTableViewVisible?n("common-relatetable-view-dialog",{ref:"commonRelateTableView",attrs:{isOpen:e.isOpen},on:{edit:function(t,n){e.addOrUpdateHandle(t,null,null,n)},showChooseRelateTable:e.showChooseRelateTable}}):e._e(),e._v(" "),e.commonPropTableViewVisible?n("common-proptable-view-dialog",{ref:"commonPropTableView",on:{updatePropItemData:e.updatePropItemData}}):e._e(),e._v(" "),e.baseDataTableViewVisible?n("common-basedata-table-dialog",{ref:"baseDataTableDialog",on:{updateBaseData:e.updateBaseData,updateBaseDataFilterData:e.updateBaseDataFilterData}}):e._e(),e._v(" "),e.richtextViewVisible?n("common-richtext-dialog",{ref:"reichtextDialog",on:{updateBaseData:e.updateRichtext}}):e._e(),e._v(" "),e.fixdataViewVisible?n("common-fixdata-dialog",{ref:"fixdataDialog",on:{fixdata:e.fixdata,cancelFixData:e.cancelFixData}}):e._e(),e._v(" "),e.updateHistoryVisible?n("common-update-history",{ref:"updateHistoryDialog"}):e._e()],1)])])},staticRenderFns:[]};var a=function(e){n("sL9t")},r=n("VU/8")(o.a,i,!1,a,"data-v-69416598",null);t.default=r.exports},SdjN:function(e,t){},T5yT:function(e,t,n){"use strict";var o=n("0xDb"),i=n("jB3U"),a={fieId:"",state:1,variable:""},r={components:{customFromItem:n("9uud").a},props:{editMode:{type:Boolean,default:!1},modelData:{},templateJson:{},formMap:{},variableMap:{},withExtInfo:{}},watch:{variableMap:{handler:function(e){this.getType()},deep:!0,immediate:!0}},data:function(){return{extIdVariable:null,extIdValue:null,extKeyValue:null,dataList:[],type:[],extMap:{},stateEnum:[{value:1,label:"填写"},{value:2,label:"只读"},{value:3,label:"必填"}],tbName:"",selectedExt:[]}},methods:{getSaveData:function(){var e=[];return this.dataList.forEach(function(t){t.fieId&&e.push(t)}),e},getSaveExtData:function(){return{extId:{extIdVariable:this.extIdVariable,extIdValue:this.extIdValue},extKey:this.extKeyValue}},getType:function(){var e=this.variableMap;for(var t in this.type=[],e)e[t].varType!=i.g.commonData&&e[t].varType!=i.g.blocklyVar||this.type.push({value:e[t].variableName,label:e[t].itemName});this.type.push({value:"",label:"自定义"})},checkShow:function(e,t){return!!this.extMap[t]&&("dateTime"==this.extMap[t].type?e.dateType==this.extMap[t].dateType:Object(o.o)(e.type)==Object(o.o)(this.extMap[t].type))},getMatchingList:function(e){var t=[{key:"id",name:"ID",type:"id"}];return t=t.concat(this.formMap[this.variableMap[e].tableName].templateJson)},getVarType:function(e){return this.variableMap[e]?this.variableMap[e].varType:""},isCommonDataType:function(e){return e==i.g.commonData},init:function(e,t,n,o){if(!e)return!1;this.dataList=t||[],this.dataList.length||this.addItem();var i={};e.templateJson.forEach(function(e){i[e.key]=e}),this.$set(this,"extMap",i),n&&(this.extIdVariable=n.extIdVariable,this.extIdValue=n.extIdValue),o&&(this.extKeyValue=o)},selectFieId:function(e,t){var n=this.extMap[t];n.mustRequired?this.dataList[e].state=3:n.cantEdit&&(this.dataList[e].state=2),this.selectedExt[e]=t},stateDisabled:function(e,t){return!1},deleteItem:function(e){this.dataList.splice(e,1),this.selectedExt.splice(e,1)},addItem:function(){this.dataList.push(Object(o.e)(a))}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[e.withExtInfo?n("el-form",[n("el-form-item",{attrs:{label:"父表ID"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"pr-10",staticStyle:{width:"150px"}},[n("el-select",{attrs:{placeholder:""},model:{value:e.extIdVariable,callback:function(t){e.extIdVariable=t},expression:"extIdVariable"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("div",{staticClass:"col"},[e.extIdVariable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:e.extIdValue,callback:function(t){e.extIdValue=t},expression:"extIdValue"}},e._l(e.getMatchingList(e.extIdVariable),function(e){return n("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1):e._e()],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px","margin-left":"10px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(e.index)}}},[n("i",{staticClass:"el-icon-delete"})])],1)]),e._v(" "),n("el-form-item",{attrs:{label:"父表字段key"}},[n("div",{staticClass:"row"},[n("el-input",{model:{value:e.extKeyValue,callback:function(t){e.extKeyValue=t},expression:"extKeyValue"}})],1)])],1):e._e()],1),e._v(" "),n("el-button",{on:{click:function(t){return e.addItem()}}},[n("i",{staticClass:"el-icon-plus"}),e._v("添加字段")]),e._v(" "),e.dataList.length?n("div",{staticClass:"row",staticStyle:{"margin-top":"10px","line-height":"30px"}},[n("div",{staticStyle:{width:"28%"}},[e._v("字段")]),e._v(" "),n("div",{staticStyle:{width:"100px"}},[e._v("属性")]),e._v(" "),e.editMode?e._e():n("div",{},[e._v("默认值")])]):e._e(),e._v(" "),e._l(e.dataList,function(t,o){return n("div",[n("div",{staticClass:"row mb-10"},[n("div",{staticClass:"pr-10",staticStyle:{width:"28%"}},[n("el-select",{attrs:{placeholder:"请选择字段"},on:{change:function(t){return e.selectFieId(o,t)}},model:{value:t.fieId,callback:function(n){e.$set(t,"fieId",n)},expression:"item.fieId"}},e._l(e.extMap,function(t){return-1!=e.selectedExt.indexOf(t.key)||e.extMap[t.key].hidden?e._e():n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}),1)],1),e._v(" "),n("div",{staticClass:"pr-10",staticStyle:{width:"100px"}},[n("el-select",{attrs:{placeholder:""},model:{value:t.state,callback:function(n){e.$set(t,"state",n)},expression:"item.state"}},e._l(e.stateEnum,function(o){return n("el-option",{key:o.value,attrs:{disabled:e.stateDisabled(t,o.value),label:o.label,value:o.value}})}),1)],1),e._v(" "),e.editMode?e._e():n("div",{staticClass:"pr-10",staticStyle:{width:"150px"}},[n("el-select",{attrs:{placeholder:""},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(t){return e.modelData.variableName!=t.value?n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}}):e._e()}),1)],1),e._v(" "),e.editMode?e._e():n("div",{staticClass:"col"},[e.isCommonDataType(e.getVarType(t.variable))?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getMatchingList(t.variable),function(o){return e.checkShow(o,t.fieId)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()}),1):""==t.variable?n("customFromItem",{attrs:{exts:e.extMap[t.fieId]?e.extMap[t.fieId]:null,noClear:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e._e()],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px","margin-left":"10px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(o)}}},[n("i",{staticClass:"el-icon-delete"})])],1)])})],2)},staticRenderFns:[]};var s=n("VU/8")(r,l,!1,function(e){n("cJmb")},"data-v-4862fd34",null);t.a=s.exports},"TN+i":function(e,t,n){"use strict";var o=n("0xDb"),i={formId:"",type:2,field:"",value:""},a={components:{customFromItem:n("9uud").a},props:{value:{},exts:{},formId:{},btnText:{default:"等于"}},model:{prop:"value",event:"change"},watch:{formId:{handler:function(e){this.changeForm()},deep:!0,immediate:!0}},computed:{getTargetList:function(){var e=[],t=[];return this.baseData.forEach(function(t){e.push(t.formId)}),this.targetList.forEach(function(n){-1==e.indexOf(n.key)&&t.push(n)}),t}},data:function(){return{baseData:[],type:Object(o.m)("addRobotRulesEnum"),noshowlist:Object(o.p)(),targetList:[],targetMap:{},first:!0}},methods:{checkShow:function(e,t){return!!this.targetMap[t]&&("dateTime"==this.targetMap[t].type?e.dateType==this.targetMap[t].dateType:e.type==this.targetMap[t].type)},getData:function(){this.first=!0,this.value&&this.value.length?this.$set(this,"baseData",Object(o.e)(this.value)):this.baseData=[Object(o.e)(i)]},saveData:function(){this.$emit("change",this.baseData)},changeFormId:function(e){this.baseData[e].field="",this.baseData[e].value=""},deleteItem:function(e){this.baseData.splice(e,1)},addItem:function(){this.baseData.push(Object(o.e)(i))},changeForm:function(){var e=this;if(!this.formId)return!1;this.$http({url:this.$http.adornUrl("/common/commondefine/infoById/"+this.formId),method:"get"}).then(function(t){var n=t.data;n&&0===n.code&&(e.first||(e.baseData=[Object(o.e)(i)]),e.$set(e,"targetList",n.assetExt.templateJson),e.targetList.forEach(function(t){e.targetMap[t.key]=t}),e.first=!1)})}},created:function(){}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{on:{click:function(t){return e.addItem(!1)}}},[n("i",{staticClass:"el-icon-plus"}),e._v("添加规则")]),e._v(" "),e._l(e.baseData,function(t,o){return n("div",{key:o,staticStyle:{"margin-top":"10px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[n("el-select",{attrs:{placeholder:"目标表单字段"},on:{change:function(t){return e.changeFormId(o)}},model:{value:t.formId,callback:function(n){e.$set(t,"formId",n)},expression:"item.formId"}},[e.targetMap&&t.formId?n("el-option",{key:t.formId,attrs:{label:e.targetMap[t.formId]?e.targetMap[t.formId].name:"",value:t.formId}}):e._e(),e._v(" "),e._l(e.getTargetList,function(t){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()})],2)],1),e._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"symbol-box"},[e._v("\r\n                    "+e._s(e.btnText)+"\r\n                ")])]),e._v(" "),n("el-col",{attrs:{span:5}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"item.type"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:9}},[2==t.type?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.exts,function(o){return e.checkShow(o,t.formId)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()}),1):n("customFromItem",{attrs:{exts:e.targetMap[t.formId]?e.targetMap[t.formId]:null,noClear:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(o)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)})],2)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("XPF6")},"data-v-6d831fa2",null);t.a=l.exports},TfE6:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1__common_filelist__=__webpack_require__("Ozts"),__WEBPACK_IMPORTED_MODULE_2__components_Tinymce__=__webpack_require__("5aCZ"),__WEBPACK_IMPORTED_MODULE_3__components_baseTimePick__=__webpack_require__("G+jI"),__WEBPACK_IMPORTED_MODULE_4__common_dialog__=__webpack_require__("iFqQ"),__WEBPACK_IMPORTED_MODULE_5__common_relatetable_dialog__=__webpack_require__("Lmrr"),__WEBPACK_IMPORTED_MODULE_6__common_relatetable_dialog_multiple__=__webpack_require__("s3ry"),__WEBPACK_IMPORTED_MODULE_7__common_relatetable_view_dialog__=__webpack_require__("eBok"),__WEBPACK_IMPORTED_MODULE_8__common_proptable_view_dialog__=__webpack_require__("JTg7"),__WEBPACK_IMPORTED_MODULE_9__common_basedata_table_dialog__=__webpack_require__("H/gZ"),__WEBPACK_IMPORTED_MODULE_10__components_flow_selectStaff__=__webpack_require__("xstH"),__WEBPACK_IMPORTED_MODULE_11__components_showText__=__webpack_require__("BAPo"),__WEBPACK_IMPORTED_MODULE_12__utils__=__webpack_require__("0xDb"),__WEBPACK_IMPORTED_MODULE_13__components_extForm_filter_js__=__webpack_require__("w4zF"),__WEBPACK_IMPORTED_MODULE_14__components_extForm_uploadForAliyuncs__=__webpack_require__("dTD7"),__WEBPACK_IMPORTED_MODULE_15__components_extForm_filesList__=__webpack_require__("Z5jg"),__WEBPACK_IMPORTED_MODULE_16__components_extForm_location__=__webpack_require__("PYVH"),__WEBPACK_IMPORTED_MODULE_17__components_extForm_tileSelect__=__webpack_require__("r6Ng"),__WEBPACK_IMPORTED_MODULE_18__components_extForm_tileSelectMultiple__=__webpack_require__("vnMc"),__WEBPACK_IMPORTED_MODULE_19__dataProcess_openRobotDialog_openRobotDialog__=__webpack_require__("e4/+"),__WEBPACK_IMPORTED_MODULE_20__xkeshi_vue_qrcode__=__webpack_require__("8Vd+");__webpack_exports__.a={components:{showText:__WEBPACK_IMPORTED_MODULE_11__components_showText__.a,Tinymce:__WEBPACK_IMPORTED_MODULE_2__components_Tinymce__.a,CommonDialog:__WEBPACK_IMPORTED_MODULE_4__common_dialog__.default,CommonProptableViewDialog:__WEBPACK_IMPORTED_MODULE_8__common_proptable_view_dialog__.default,CommonRelatetableViewDialog:__WEBPACK_IMPORTED_MODULE_7__common_relatetable_view_dialog__.default,commonRelateTableDialogMultiple:__WEBPACK_IMPORTED_MODULE_6__common_relatetable_dialog_multiple__.default,CommonRelatetableDialog:__WEBPACK_IMPORTED_MODULE_5__common_relatetable_dialog__.default,CommonBasedataTableDialog:__WEBPACK_IMPORTED_MODULE_9__common_basedata_table_dialog__.default,FileList:__WEBPACK_IMPORTED_MODULE_1__common_filelist__.default,baseTimePick:__WEBPACK_IMPORTED_MODULE_3__components_baseTimePick__.a,selectStaff:__WEBPACK_IMPORTED_MODULE_10__components_flow_selectStaff__.a,uploadForAliyuncs:__WEBPACK_IMPORTED_MODULE_14__components_extForm_uploadForAliyuncs__.a,filesList:__WEBPACK_IMPORTED_MODULE_15__components_extForm_filesList__.a,location:__WEBPACK_IMPORTED_MODULE_16__components_extForm_location__.a,tileSelect:__WEBPACK_IMPORTED_MODULE_17__components_extForm_tileSelect__.a,tileSelectMultiple:__WEBPACK_IMPORTED_MODULE_18__components_extForm_tileSelectMultiple__.a,qrcode:__WEBPACK_IMPORTED_MODULE_20__xkeshi_vue_qrcode__.a},model:{prop:"value",event:"change"},props:{parentPoint:{},clearable:{type:Boolean,default:!1},info:{},value:{},baseData:{},tableProp:{},isView:{},dataForm:{default:function(){return{relateTableContent:null,baseTableContent:null}}},tableName:{},rule:{},nolabel:{type:Boolean,default:!1},tempChildrenTableExtId:null},watch:{value:{handler:function(e,t){this.modelDate=e,this.modelDate||(this.multipleRows=[],this.selectRow=null,this.selectBaseData=null),-1!=["video","picture"].indexOf(this.baseData.type)&&this.value&&!Array.isArray(this.value)&&(this.modelDate=[{name:"",size:100,status:"success",uid:1,url:this.value}])},deep:!0,immediate:!0}},created:function(){var e=this;this.$watch("modelDate",Object(__WEBPACK_IMPORTED_MODULE_12__utils__.d)(function(t){e.$emit("change",e.modelDate,e.info)},400))},data:function(){return{showCustomView:!1,baseUrl:window.SITE_CONFIG.baseUrl,datePickMap:{date:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},dateYear:{type:"year",format:"yyyy"},dateMonth:{type:"month",format:"yyyy-MM"}},uploadLoading:!1,showChildTable:!1,commonDialogVisible:!1,commonRelateTableViewVisible:!1,commonPropTableViewVisible:!1,commonRelateTableDialogVisible:!1,commonRelateTableDialogMultipleVisible:!1,multipleRows:[],multipleRowsLoading:!1,fileListVisible:!1,baseDataTableViewVisible:!1,modelDate:null,token:this.$cookie.get("token"),upload:this.$http.adornUrl("/sys/oss/uploadNoSaveInfo?token="+this.$cookie.get("token")),selectRow:this.dataForm.relateTableContent?this.dataForm.relateTableContent[this.baseData.key]:null,selectBaseData:this.dataForm.baseTableContent?this.dataForm.baseTableContent[this.baseData.key]:null,processMap:{}}},methods:{getRelateTableShowText:function(e,t){return e.relateTableContent&&e.relateTableContent[t]&&e.relateTableContent[t].title?e.relateTableContent[t].title:e[t+"_title"]?e[t+"_title"]:e[t]},formDataChanged:function(e){this.$refs.customFormDetailView&&this.$refs.customFormDetailView.formDataChanged&&this.$refs.customFormDetailView.formDataChanged(e),this.genDefaultVaule()},changeNumber:function(){var e="integer"==this.baseData.type?parseInt(this.modelDate):parseFloat(this.modelDate);"number"==typeof this.baseData.numMin&&e<this.baseData.numMin&&(this.modelDate=this.baseData.numMin),"number"==typeof this.baseData.numMax&&e>this.baseData.numMax&&(this.modelDate=this.baseData.numMax)},updateBaseDataFilterData:function(e,t){this.selectBaseData=t.name,this.modelDate=t.id},updateBaseData:function(e,t,n,o){this.modelDate=n},gotoBaseDataTable:function(e,t,n,o,i){var a=this;this.baseDataTableViewVisible=!0,this.$nextTick(function(){a.$refs.baseDataTableDialog.initForFilter(t,n,o)})},fileListChange:function(e){this.modelDate=e},showFileList:function(e,t,n,o){var i=this;this.fileListVisible=!0,this.$nextTick(function(){console.log(i.modelDate),i.$refs.fileList.init(i.modelDate,!i.isView)})},childrenTableHaveSaveData:function(){console.log("childrenTableHaveSaveData"),this.$emit("setHaveCacheChildrenTableData")},gotoChildrenTable:function(e,t,n,o){var i=this;this.commonDialogVisible=!0;var a=void 0;a=e||this.tempChildrenTableExtId,this.$emit("setHaveCacheChildrenTableData"),this.$nextTick(function(){i.$refs.commonDialog.init(a,t,n,null,!0,o)})},gotoRelateTable:function(e,t,n,o,i){var a=this;this.commonRelateTableViewVisible=!0,this.$nextTick(function(){a.$refs.commonRelateTableView.init(e,t,n,o,i[n])})},updateRelateItemData:function(e,t,n,o){this.modelDate=n,this.selectRow=o},updateRelateItemDataMultiple:function(e,t,n){var o=this;this.modelDate=n||[];var i=this.modelDate.toString();if(!i)return this.multipleRows=[],!1;this.multipleRowsLoading=!0,this.$http({url:this.$http.adornUrl("/common/common/list"),method:"post",data:this.$http.adornParams({page:1,limit:999,condition:[{type:"ids",value:"("+i+")"}],tableName:this.baseData.relateTableName})}).then(function(e){var t=e.data;if(o.multipleRowsLoading=!1,t&&0===t.code){var n=[];t.page.list.forEach(function(e){n.push(JSON.parse(e.extContent))}),o.multipleRows=n}})},showChooseRelateTable:function(e,t,n,o,i,a){var r=this;console.log(this.baseData,this.dataForm,99998),this.baseData.dataFilterRobotId?this.$http({url:this.$http.adornUrl("/robot/commonrobot/robotDoWithTrigeData2"),method:"post",data:this.$http.adornData({tableName:this.tableName,robotId:this.baseData.dataFilterRobotId,trigData:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.dataForm)})}).then(function(l){var s=l.data;if(r.$loading.hide(),s&&0===s.code){var c=JSON.parse(s.data).object;r.showChooseRelateTableDialog(e,t,n,o,i,a,c)}else r.$message.error(s.msg)}):this.showChooseRelateTableDialog(e,t,n,o,i,a)},showChooseRelateTableDialog:function showChooseRelateTableDialog(id,tableName,key,selectedId,relateTableExtId,isMultiple,selectData){var _this8=this,baseData=Object(__WEBPACK_IMPORTED_MODULE_13__components_extForm_filter_js__.b)(this.baseData,this.dataForm.extContent);if(isMultiple){this.commonRelateTableDialogMultipleVisible=!0;var extId=eval(relateTableExtId);this.$nextTick(function(){_this8.$refs.commonRelateTableDialogMultiple.init(id,tableName,key,selectedId,extId,baseData,selectData)})}else{this.commonRelateTableDialogVisible=!0;var _extId=eval(relateTableExtId);this.$nextTick(function(){_this8.$refs.commonRelateTableDialog.init(id,tableName,key,selectedId,_extId,baseData,selectData)})}},uploadImage:function(e,t){this.upImageRow=e,this.upImageRowProprety=t},uploadProcess:function(e){this.$set(this,"processMap",e)},beforeUpload:function(e,t){this.modelDate&&Array.isArray(this.modelDate)?this.modelDate.push(e):this.modelDate=[e],this.$set(this,"processMap",t)},deleteImage:function(e,t){this.modelDate.splice(t,1)},uploadImageSuccess:function(e,t,n,o){for(var i in this.modelDate){var a=this.modelDate[i];a.uid&&a.uid==t.uid&&this.$set(this.modelDate,i,{name:a.name,size:a.size,status:"success",uid:t.uuid,url:o+"/"+e.filename})}}},mounted:function(){var e=this;if(this.baseData.customFormDetailViewPath&&(this.$options.components.customFormDetailView=function(){return __webpack_require__("sZG1")("./"+e.baseData.customFormDetailViewPath+".vue")},this.showCustomView=!0),"multipleRelateTable"==this.baseData.type)this.updateRelateItemDataMultiple("","",this.modelDate);else if("select"==this.baseData.type){var t=this.baseData;"dictionaries"==t.selectType&&t.selectSet&&this.$http({url:this.$http.adornUrl("/common/commonselectset/info/"+t.selectSet),method:"GET"}).then(function(t){var n=t.data;if(n&&0===n.code){var o=JSON.parse(n.commonSelectSet.selectList);e.baseData.selectItem=o}})}}}},TngT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{type:""}},computed:{optionsType:function(){return this.$vptd.state.type},elm:function(){var e=this.$vptd.state.activeElement;return e.resizable?e:""}},methods:{handlemousedown:function(e,t,n,o){e.stopPropagation(),this.type=t,this.$vptd.commit("initmove",{startX:e.pageX,startY:e.pageY,originX:this.elm[n],originY:this.elm[o]}),document.addEventListener("mousemove",this.handlemousemove,!0),document.addEventListener("mouseup",this.handlemouseup,!0)},handlemousemove:function(e){e.stopPropagation(),e.preventDefault(),this.$vptd.commit("resize",{x:e.pageX,y:e.pageY,type:this.type})},handlemouseup:function(){document.removeEventListener("mousemove",this.handlemousemove,!0),document.removeEventListener("mouseup",this.handlemouseup,!0),this.$vptd.commit("stopmove")}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:"page"!==e.optionsType,expression:"optionsType !=='page'"}]},[n("div",{staticClass:"verti",style:{height:e.elm.height+"px",top:e.elm.top+"px",left:e.elm.left+"px"},on:{mousedown:function(t){return e.handlemousedown(t,"left","left","width")}}},[n("div",{staticClass:"square"})]),e._v(" "),n("div",{staticClass:"verti",style:{height:e.elm.height+"px",top:e.elm.top+"px",left:e.elm.left+e.elm.width+"px"},on:{mousedown:function(t){return e.handlemousedown(t,"right","width")}}},[n("div",{staticClass:"square"})]),e._v(" "),n("div",{staticClass:"horiz",style:{width:e.elm.width+"px",top:e.elm.top+"px",left:e.elm.left+"px"},on:{mousedown:function(t){return e.handlemousedown(t,"up","top","height")}}},[n("div",{staticClass:"square"})]),e._v(" "),n("div",{staticClass:"horiz",style:{width:e.elm.width+"px",top:e.elm.top+e.elm.height+"px",left:e.elm.left+"px"},on:{mousedown:function(t){return e.handlemousedown(t,"down","height")}}},[n("div",{staticClass:"square"})])])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("xJHW")},"data-v-131a1c59",null);t.default=a.exports},Tvox:function(e,t){},U0sc:function(e,t){},U5AP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("0xDb"),s=n("jB3U"),c={props:{formMap:{},variableMap:{},formExts:{type:Array,default:function(){return[]}},robotType:{default:0,type:Number}},watch:{robotType:{handler:function(e){},deep:!0,immediate:!0}},data:function(){return{formList:[],formShow:!0,formListShow:!0,coreShow:!0,menu:[{label:"事件",value:0,color:s.a.event,typeList:[]},{label:"动作",value:1,color:s.a.action,typeList:[]},{label:"弹框",value:2,color:s.a.dialog,typeList:[]},{label:"逻辑",value:3,color:s.a.logic,typeList:[]},{label:"循环",value:4,color:s.a.loop,typeList:[]},{label:"计算",value:5,color:s.a.math,typeList:[]},{label:"文本",value:6,color:s.a.text,typeList:[]},{label:"变量",value:7,color:s.a.variable,typeList:[]}],selected:"",openForm:""}},methods:{getMenuSize:function(){return this.menu.length},getTableItemVariableMap:function(){return this.getVariableMapByType("v_type_common_data")},getTableListVariableMap:function(){return this.getVariableMapByType("v_type_common_data_list")},getVariableMapByType:function(e){var t={};if("{}"!=r()(this.variableMap))for(var n in this.variableMap)this.variableMap[n].varType==e&&(t[n]=this.variableMap[n]);return t},close:function(){this.selected=""},updataView:function(){this.$forceUpdate()},selectFormItem:function(e,t){var n=t.item,o=t.table;e==this.selected?this.selected="":this.selected=e,this.$emit("change",{type:"item",info:i()(n,o)},this.selected==e)},selectForm:function(e,t){e==this.selected?this.selected="":this.selected=e,this.$emit("change",{type:"form",info:t},this.selected==e)},selectFormList:function(e,t){e==this.selected?this.selected="":this.selected=e,this.$emit("change",{type:"formList",info:t},this.selected==e)},openFormState:function(e){e.itemName==this.openForm?this.openForm="":this.openForm=e.itemName},getFormList:function(e){return null!=this.formMap[e.tableName]?Object(l.e)(this.formMap[e.tableName].templateJson):[]},open:function(e){this[e]=!this[e]},select:function(e){e.value!==this.selected&&(this.selected=e.value),this.$emit("change",{type:"core",info:e},this.selected==e.value)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column tree-base-box overflow-auto"},[n("div",{staticClass:"treeRow head row ",on:{click:function(t){return e.open("coreShow")}}},[n("span",{staticClass:"col"},[e._v("核心")]),e._v(" "),n("i",{class:e.coreShow?"el-icon-arrow-up":"el-icon-arrow-down"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.coreShow,expression:"coreShow"}]},e._l(e.menu,function(t){return n("div",{staticClass:"treeRow",style:{"border-left":"8px solid "+t.color,"background-color":t.value===e.selected?t.color:"",color:t.value===e.selected?"white":""},on:{click:function(n){return e.select(t)}}},[e._v("\n      "+e._s(t.label)+"\n    ")])}),0),e._v(" "),n("div",[n("div",{staticClass:"treeRow head row ",on:{click:function(t){return e.open("formShow")}}},[n("span",{staticClass:"col"},[e._v("表单数据")]),e._v(" "),n("i",{class:e.formShow?"el-icon-arrow-up":"el-icon-arrow-down"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.formShow,expression:"formShow"}]},[e._l(e.getTableItemVariableMap(),function(t,o){return[n("div",{staticClass:"treeRow row",class:{"row-active":o==e.selected},on:{click:function(){e.selectForm(o,t),e.openFormState(t)}}},[n("span",{staticClass:"col"},[e._v(e._s(t.itemName))]),e._v(" "),n("i",{class:e.openForm==t.itemName?"el-icon-arrow-up":"el-icon-arrow-down"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.openForm==t.itemName,expression:"openForm==i.itemName"}]},e._l(e.getFormList(t),function(i){return n("div",{staticClass:"treeRow formChild",class:{"row-active":""+i.name+o==e.selected},on:{click:function(n){return e.selectFormItem(""+i.name+o,{table:t,item:i})}}},[e._v("\n            "+e._s(i.name)+"\n          ")])}),0)]})],2),e._v(" "),n("div",{staticClass:"treeRow head row ",on:{click:function(t){return e.open("formListShow")}}},[n("span",{staticClass:"col"},[e._v("表单列表数据")]),e._v(" "),n("i",{class:e.formListShow?"el-icon-arrow-up":"el-icon-arrow-down"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.formListShow,expression:"formListShow"}]},[e._l(e.getTableListVariableMap(),function(t,o){return[n("div",{staticClass:"treeRow row",class:{"row-active":o==e.selected},on:{click:function(){e.selectFormList(o,t),e.openFormState(t)}}},[n("span",{staticClass:"col"},[e._v(e._s(t.itemName))])])]})],2)])])},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(e){n("pQ0R")},"data-v-69926b42",null);t.default=d.exports},UEqw:function(e,t,n){"use strict";var o={props:{fieldList:{},methodList:{},isExcelEditor:{},defaultActived:{}},data:function(){return{themeColor:localStorage.getItem("theme"),actived:this.defaultActived?this.defaultActived:0,activedField:null,activedMethod:null}},methods:{study:function(){window.open("https://baijiahao.baidu.com/s?id=1720249423298558187&wfr=spider&for=pc")},selectMethod:function(e){this.activedMethod==e?this.activedMethod=null:this.activedMethod=e},selectField:function(e){this.activedField==e?this.activedField=null:this.activedField=e},clickFieldRelative:function(e,t){var n={value:t.name+"-"+e.name,key:t.key+"@"+e.key,name:t.name+"-"+e.name};this.$emit("click",n,"field")},clickMethod:function(e,t){this.$emit("click",e,t)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h100 column",staticStyle:{"user-select":"none"}},[e.methodList&&e.fieldList?n("div",{staticClass:"row menu"},[e.methodList.length>0?n("div",{staticClass:"menu-item col",style:0==e.actived?"border-bottom:2px solid "+e.themeColor:"",on:{click:function(t){e.actived=0}}},[e._v("常用公式")]):e._e(),e._v(" "),e.fieldList?n("div",{staticClass:"menu-item col",style:1==e.actived?"border-bottom:2px solid "+e.themeColor:"",on:{click:function(t){e.actived=1}}},[e._v("字段")]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"col overflow-auto"},[n("div",{directives:[{name:"show",rawName:"v-show",value:0==e.actived&&e.methodList.length>0,expression:"actived == 0 && methodList.length > 0"}]},e._l(e.methodList,function(t,o){return n("div",{key:o},[n("div",{staticClass:"me-menu",on:{click:function(t){return e.selectMethod(o)}}},[n("i",{class:e.activedMethod===o?"el-icon-arrow-down":"el-icon-arrow-right",staticStyle:{"margin-right":"10px"}}),e._v("\r\n                    "+e._s(t.name)+"\r\n                ")]),e._v(" "),e.activedMethod===o?n("div",e._l(t.list,function(t){return n("div",{staticClass:"me-menu-item",on:{click:function(n){return e.clickMethod(t,"method")}}},[n("div",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),n("div",[e._v(e._s(t.context))])])}),0):e._e()])}),0),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1==e.actived,expression:"actived == 1 "}]},[e._l(e.fieldList,function(t,o){return[t.templateJson?n("div",[n("div",[n("div",{staticClass:"me-menu-item",on:{click:function(t){return e.selectField(o)}}},[n("i",{class:e.activedField===o?"el-icon-arrow-down":"el-icon-arrow-right",staticStyle:{"margin-right":"10px"}}),e._v("\r\n                            "+e._s(t.name)+"\r\n                        ")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.activedField===o,expression:"activedField === index"}]},e._l(t.templateJson,function(o){return n("div",{staticClass:"me-menu-item",staticStyle:{"padding-left":"40px"},on:{click:function(n){return e.clickFieldRelative(o,t)}}},[e._v("\r\n                                "+e._s(""+o.name)+"\r\n                            ")])}),0)])]):n("div",{staticClass:"me-menu-item",on:{click:function(n){return e.clickMethod(t,"field")}}},[e._v(e._s(t.name))])]})],2)]),e._v(" "),e.methodList&&e.fieldList&&e.isExcelEditor?n("div",[n("el-button",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"},attrs:{type:"text"},on:{click:e.study}},[e._v("学习常用公式")])],1):e._e()])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("ogyi")},"data-v-1ddedcbc",null);t.a=a.exports},ULGN:function(e,t,n){"use strict";var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title-base"},[e.addvisible?n("vxe-modal",{attrs:{width:"350px",height:"160px",resize:"",title:"新增"},model:{value:e.addvisible,callback:function(t){e.addvisible=t},expression:"addvisible"}},[n("el-form",{ref:"addForm",staticStyle:{"margin-top":"10px"},attrs:{model:e.addForm,rules:e.dataRule,"label-width":"60px",size:"mini"}},[n("el-form-item",{attrs:{label:"名称",prop:"addName"}},[n("el-input",{model:{value:e.addForm.addName,callback:function(t){e.$set(e.addForm,"addName",t)},expression:"addForm.addName"}})],1)],1),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"}),e._v(" "),n("div",[n("el-button",{on:{click:function(t){e.addvisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.editOk}},[e._v("确定")])],1)])],1):e._e()],1)},staticRenderFns:[]};var i=n("VU/8")({props:{value:{}},model:{value:"value",event:"change"},data:function(){return{addvisible:!1,addForm:{addName:this.value},dataRule:{addName:[{required:!0,message:"名称不能为空",trigger:"change"}]}}},methods:{editOk:function(){var e=this;this.$refs.addForm.validate(function(t){t&&(e.addvisible=!1,e.$emit("change",e.addForm.addName))})},editTitle:function(){var e=this;this.addForm.addName=this.value,this.addvisible=!0,this.$nextTick(function(){e.$refs.addForm.clearValidate()})}}},o,!1,function(e){n("3IMy")},"data-v-4f4abe2a",null);t.a=i.exports},UMWY:function(e,t){},UObw:function(e,t){},UQPm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-shezhi",use:"icon-shezhi-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-shezhi"><defs><style type="text/css"></style></defs><path d="M545.784454 962.539206l-65.943898 0c-29.341259 0-54.624085-25.281803-54.624085-54.615898L425.216471 868.462574c0-9.623171-7.826246-20.911262-16.690124-23.680329l-1.566682-0.611937-55.725162-23.104207-0.880043-0.494257c-8.153704-4.41045-22.017456-2.376117-28.55229 4.187369l-28.17469 28.123524c-9.930163 9.977235-23.239284 15.494902-37.432541 15.494902-14.195304 0-27.507494-5.517667-37.487799-15.541975l-46.682205-46.630017c-20.60427-20.603247-20.6319-54.233182-0.069585-74.974575l28.15013-28.106128c6.637164-6.574742 8.676613-20.599154 4.253884-28.909423l-0.831948-1.768273-23.164582-56.128345-0.26913-0.682545c-2.803859-9.03477-14.279215-17.394159-23.611767-17.394159l-39.631626 0c-29.391401 0-52.861952-24.065092-52.861952-53.193503l0-65.943898c0-28.770254 22.998807-51.754734 52.919257-51.754734l39.575344 0c9.081843 0 20.803815-8.830109 23.666002-18.057261l0.567935-1.476631 23.163559-57.088206 0.505513-0.913812c4.40431-8.220219 2.319835-22.224164-4.2897-28.830629l-28.04166-28.087709c-9.964956-9.921977-15.486716-23.216771-15.502066-37.396725-0.01535-14.201443 5.492084-27.53717 15.507182-37.552268l46.6556-46.614667c9.94142-9.985422 23.248494-15.503089 37.432541-15.503089 0.001023 0 0 0 0.001023 0 14.184047 0 27.490098 5.51869 37.46938 15.540951l28.039613 28.05087c6.557346 6.525624 20.500916 8.596795 28.655643 4.231371l0.893346-0.478907 57.375755-23.64963c8.836249-2.731204 16.634866-14.037714 16.634866-23.719214l0-39.632649c0-28.967752 24.777313-52.095495 54.624085-52.095495L545.784454 64.076364c29.161157 0 52.370765 22.636556 52.370765 52.095495l0 39.632649c0 9.127891 8.709359 20.85498 17.767666 23.674189l1.51654 0.577145 56.639998 23.113417 0.923022 0.509606c8.202822 4.424776 22.184255 2.353604 28.788673-4.254907l28.163433-27.912723c9.895371-9.94142 23.179932-15.33936 37.352723-15.33936 0.019443 0 0.040932 0 0.060375 0 14.18814 0 27.508517 5.375427 37.516452 15.384385l46.709835 46.554292c10.004865 9.960863 15.524578 23.254633 15.524578 37.47552 0 14.18814-5.498224 27.506471-15.479553 37.532825l-28.16855 28.152177c-6.580882 6.610558-8.640798 20.771069-4.204765 29.107945l0.478907 0.896416 23.654746 57.956993c2.902096 9.255805 14.635325 18.114566 23.686469 18.114566l39.132252 0 0-0.573051c27.629267 0 52.188616 22.984481 52.188616 52.327786l0 65.998133c0 29.590945-22.985504 53.138244-51.746548 53.138244l-39.630602 0c-9.337669 0-20.84884 8.372691-23.686469 17.423835l-0.580215 1.51654-23.086811 56.240909-0.468674 0.860601c-4.419659 8.30413-2.393513 22.320355 4.169973 28.855188l28.135804 28.02017c10.031471 10.029424 15.539928 23.350824 15.537881 37.541011-0.004093 14.186094-5.514597 27.505447-15.518438 37.505195l-46.747697 46.682205c-9.920954 9.964956-23.219841 15.506159-37.406958 15.506159-0.019443 0-0.040932 0-0.060375 0-14.192234 0-27.514657-5.514597-37.518498-15.517415l-28.039613-28.095895c-6.490831-6.490831-20.807908-8.575306-28.887934-4.206812l-0.951675 0.514723-57.93755 23.680329c-9.087982 2.859118-17.823947 14.594393-17.823947 23.691585l0 39.460734C598.155219 937.76394 574.45954 962.539206 545.784454 962.539206zM421.86719 806.892287c25.192775 8.370645 44.282552 34.650171 44.282552 61.570287l0 39.460734c0 7.114025 6.569626 13.68365 13.691837 13.68365L545.784454 921.606958c6.496971 0 12.461823-6.043646 12.461823-13.68365L558.246277 868.462574c0-26.273387 19.516496-53.131081 44.901653-61.58052l53.859675-22.062482c23.62814-12.116969 56.342216-7.098675 75.118861 11.6749l28.009937 28.1532c2.432399 2.430352 5.678326 3.837398 9.179057 3.837398 0.00614 0 0.011256 0 0.01535 0 3.482311 0 6.726192-1.39886 9.135054-3.820002l46.780443-46.738487c2.436492-2.436492 3.783163-5.724375 3.78521-9.224082 0-3.495614-1.344624-6.774287-3.787256-9.216919l-28.106128-27.998681c-18.693758-18.609847-23.762193-51.349505-11.773138-75.036997l22.083971-53.603849c8.374738-25.167193 35.224246-44.51382 61.578474-44.51382l39.630602 0c7.745405 0 10.8143-7.086395 10.8143-13.229303l0-65.998133c0-6.862291-5.116531-12.07399-11.256368-12.302187l0 1.479701-39.132252 0c-26.236548 0-53.099359-20.149922-61.585637-45.735647l-22.083971-54.261834c-11.960403-23.654746-6.913457-56.502875 11.728112-75.228355l28.16855-28.192086c2.430352-2.441609 3.78828-5.764284 3.78828-9.295714 0-3.498684-1.334391-6.762007-3.759627-9.17394l-46.741557-46.577828c-2.462075-2.462075-5.736655-3.734044-9.234315-3.734044-0.004093 0-0.010233 0-0.013303 0-3.465938 0-6.700609 1.255597-9.105379 3.671623l-28.198226 28.037567c-18.703991 18.710131-51.417043 23.734564-75.000158 11.69025l-53.865815-22.072715c-25.403576-8.388041-44.934398-35.255968-44.934398-61.60508l0-39.632649c0-7.253194-5.517667-12.186554-12.461823-12.186554l-65.943898 0c-7.517207 0-13.691837 5.51869-13.691837 12.186554l0 39.632649c0 27.027563-19.107173 53.336766-44.325531 61.643965l-53.501518 21.99699c-23.834848 12.168134-55.857169 7.234775-74.878384-11.69639l-28.130687-28.115338c-2.441609-2.451842-5.690606-3.787256-9.152451-3.787256-3.462868-0.001023-6.704702 1.334391-9.117658 3.758604l-46.690392 46.64639c-2.438539 2.438539-3.784186 5.710049-3.781116 9.207709 0.004093 3.474125 1.339508 6.716982 3.762697 9.128915l28.068266 28.121478c18.698874 18.690688 23.782659 51.389414 11.808954 74.973552l-22.124903 54.813397c-8.413624 25.616424-35.281551 45.783743-61.603033 45.783743l-39.575344 0c-6.630001 0-13.010315 3.411703-13.010315 10.822486l0 65.943898c0 6.942109 5.753027 13.284561 12.95301 13.284561l39.631626 0c26.380834 0 53.195549 19.35072 61.524239 44.537356l22.182208 53.629431c12.027941 23.731494 6.918573 56.449663-11.863189 75.05644l-28.022217 27.949562c-5.021364 5.066389-5.048993 13.348006 0.010233 18.409279l46.713928 46.653553c2.452865 2.464121 5.695722 3.794419 9.168824 3.794419 3.472078 0 6.711865-1.336438 9.124821-3.759627l28.181853-28.122501c18.641569-18.730597 51.440579-23.752983 75.011414-11.642155L421.86719 806.892287z" p-id="3003" /><path d="M513.734504 731.880873c-120.639614 0-218.786958-98.147344-218.786958-218.786958s98.147344-218.786958 218.786958-218.786958 218.786958 98.147344 218.786958 218.786958S634.375142 731.880873 513.734504 731.880873zM513.734504 334.324368c-98.573039 0-178.769546 80.195483-178.769546 178.769546s80.195483 178.769546 178.769546 178.769546 178.769546-80.195483 178.769546-178.769546S612.308567 334.324368 513.734504 334.324368z" p-id="3004" /></symbol>'});r.a.add(l);t.default=l},UoV7:function(e,t){},Uvc6:function(e,t){},VGMx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("BO1k"),r=n.n(a),l=n("0xDb"),s=n("w2O1"),c=n("7xC7"),u=n("xea2"),d=n("y01D"),h=n("bvjD"),f={components:{tamplate1:s.default,tamplate2:c.default,tamplate3:u.default,tamplate4:d.default,fieldConfig:h.default},props:{exts:{},dataForm:{}},data:function(){return{tamplateList:[{title:"基础模板",component:s.default,id:1},{title:"相册",component:c.default,id:2},{title:"视频列表",component:u.default,id:3},{title:"列表模板",component:d.default,id:4}],themeColor:localStorage.getItem("theme"),selected:null,option:{},optionFilter:{},optionSelect:"",oldData:null}},methods:{selectOptionKey:function(e,t){var n=this;this.optionSelect=e,null==this.option[e]&&(this.option[e]={}),this.$nextTick(function(){n.$refs["fieldConfig"+e][0].setOptionFilter(t)})},select:function(e){this.selected&&this.selected.id;this.optionSelect="",this.selected=e},init:function(e){if(e&&e.listConfig){var t=e.listConfig,n=!0,o=!1,i=void 0;try{for(var a,l=r()(this.tamplateList);!(n=(a=l.next()).done);n=!0){var s=a.value;s.id==t.templateId&&this.select(s)}}catch(e){o=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw i}}this.option=t.option}this.oldData=this.getSaveData()},contrast:function(){return i()(this.oldData)==i()(this.getSaveData())},save:function(){var e=this;if(this.contrast())this.$emit("saveSuccess");else{var t=this.getSaveData();this.$http({url:this.$http.adornUrl("/common/commondefine/updateMobileDesign"),method:"post",data:this.$http.adornParams({commonDefineId:this.dataForm.id,configInfo:i()(t)})}).then(function(t){var n=t.data;n&&0===n.code?(e.$emit("saveSuccess"),e.oldData=e.getSaveData()):e.$message.error(n.msg)})}},getSaveData:function(){for(var e in this.option)this.option[e]=this.$refs["fieldConfig"+e][0].getSaveData();return this.selected&&this.selected.id?Object(l.e)({listConfig:{templateId:this.selected.id,option:this.option}}):null}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row",staticStyle:{padding:"10px"}},[n("div",{staticClass:"template-col column"},[n("div",{staticClass:"title"},[e._v("\n      模板列表\n    ")]),e._v(" "),n("div",{staticClass:"col overflow-auto"},e._l(e.tamplateList,function(t,o){return n("div",{key:o,staticClass:"template-item",style:"border-color:"+(e.selected&&(t.title==e.selected.title?e.themeColor:"")),on:{click:function(n){return e.select(t)}}},[n("div",{staticClass:"template-title"},[e._v("\n          "+e._s(t.title)+"\n        ")])])}),0)]),e._v(" "),n("div",{staticClass:"col"},[n("div",{staticClass:"phone-col"},[e.selected?n("div",[n(e.selected.component,{ref:"templateCom",tag:"components",attrs:{config:e.option[e.optionSelect]},on:{select:e.selectOptionKey}})],1):e._e()])]),e._v(" "),n("div",{staticClass:"option-col column"},[n("div",{staticClass:"title"},[e._v("\n      配置项\n    ")]),e._v(" "),e._l(e.option,function(t,o,i){return n("fieldConfig",{directives:[{name:"show",rawName:"v-show",value:o==e.optionSelect,expression:"key == optionSelect"}],ref:"fieldConfig"+o,refInFor:!0,attrs:{exts:e.exts,config:t}})})],2)])},staticRenderFns:[]};var m=n("VU/8")(f,p,!1,function(e){n("LuTs")},"data-v-62b2ec36",null);t.default=m.exports},VOTY:function(e,t){},VPP1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"30%",title:e.title+"数据修正"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"修正值"}},[n("vxe-input",{staticStyle:{width:"100px",height:"35px"},model:{value:e.fixValue,callback:function(t){e.fixValue=t},expression:"fixValue"}})],1)],1),e._v(" "),n("el-button",{on:{click:e.cirfirmFixValue}},[e._v("确定修正值")]),e._v(" "),n("el-button",{on:{click:e.returnCalValue}},[e._v("还原计算值")])],1)},staticRenderFns:[]};var i=n("VU/8")({data:function(){return{visible:!1,fixValue:"",row:"",property:"",value:"",title:""}},mounted:function(){},methods:{init:function(e,t,n,o){this.visible=!0,this.row=e,this.property=t,this.fixValue=n,this.title=o},cirfirmFixValue:function(){this.$emit("fixdata",this.row,this.property,this.fixValue),this.visible=!1},returnCalValue:function(){this.$emit("cancelFixData",this.row,this.property),this.visible=!1}}},o,!1,function(e){n("f69W")},"data-v-dbd79e30",null);t.default=i.exports},VSe1:function(e,t){},VSuP:function(e,t){},VfYd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("0xDb"),i=n("9uud"),a=n("jB3U"),r={destField:"",symbol:"=",variable:"",field:"",value:""},l={components:{customFromItem:i.a},props:{modelData:{},value:{},tableName:{},btnText:{default:"等于"},formMap:{},variableMap:{},upDataRuleType:{default:!1,type:Boolean}},model:{prop:"value",event:"change"},watch:{tableName:{handler:function(e){this.changeForm()},deep:!0,immediate:!0},variableMap:{handler:function(e){this.getType()},deep:!0,immediate:!0}},computed:{getTargetList:function(){var e=[],t=[];return this.baseData.forEach(function(t){e.push(t.destField)}),this.targetList.forEach(function(n){-1==e.indexOf(n.key)&&t.push(n)}),t}},data:function(){return{first:!0,baseData:[],type:[],noshowlist:Object(o.p)(),targetList:[],targetMap:{},equalEnum:this.upDataRuleType?Object(o.m)("equalEnum"):[{value:"=",label:"设为"}]}},methods:{getDestType:function(e){var t=Object(o.e)(this.type);return this.targetMap[e.destField]&&"dateTime"==this.targetMap[e.destField].type&&(t.push({value:"currentTime",label:"当前时间"}),t.push({value:"currentDay",label:"当天"})),t},customFromItemChanged:function(e){console.log(e,this.baseData,77779)},getSymbol:function(e){if(!e)return[{value:"=",label:"设为"}];console.log(this.targetMap,e);var t=this.targetMap[e];return t&&["integer","float"].includes(t.type)?Object(o.m)("equalEnum"):[{value:"=",label:"设为"}]},getVarType:function(e){return this.variableMap[e]?this.variableMap[e].varType:""},isCommonDataType:function(e){return e==a.g.commonData},isObjectBlocklyType:function(e){if(""==e)return!1;var t=this.variableMap[e];return!(!t||t.varType!=a.g.blocklyVar||!t.objectDefine)},getObjectBlocklyVarOption:function(e){if(""==e)return[];var t=[],n=this.variableMap[e];if(n.varType==a.g.blocklyVar&&n.objectDefine){for(var o in n.objectDefine)t.push({label:n.objectDefine[o],value:o});return t}return[]},getType:function(){var e=this.variableMap;for(var t in this.type=[],e)e[t].varType!=a.g.commonListData&&this.type.push({value:e[t].variableName,label:e[t].itemName});this.type.push({value:"",label:"自定义"})},getMatchingList:function(e){var t=[{key:"id",name:"ID",type:"id"}];return t=t.concat(this.formMap[this.variableMap[e].tableName].templateJson)},checkShow:function(e,t){return"id"==e.type&&"extId"==t||!!this.targetMap[t]&&("dateTime"==this.targetMap[t].type?e.dateType==this.targetMap[t].dateType:Object(o.o)(e.type)==Object(o.o)(this.targetMap[t].type))},getData:function(){this.getType(),this.value&&this.value.length?this.$set(this,"baseData",Object(o.e)(this.value)):this.baseData=[Object(o.e)(r)]},saveData:function(){this.$emit("change",this.baseData)},changeFormId:function(e){this.baseData[e].field="",this.baseData[e].value=""},deleteItem:function(e){this.baseData.splice(e,1)},addItem:function(){this.baseData.push(Object(o.e)(r))},changeForm:function(){var e=this;if(!this.tableName)return!1;this.first||(this.baseData=[Object(o.e)(r)]),this.first=!1,this.targetMap={},null!=this.formMap[this.tableName]?this.targetList=this.formMap[this.tableName].templateJson:this.targetList=[],this.targetList.forEach(function(t){e.targetMap[t.key]=t})},fresh:function(){this.baseData=[],this.addItem()}},created:function(){}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{on:{click:function(t){return e.addItem(!1)}}},[n("i",{staticClass:"el-icon-plus"}),e._v("添加规则")]),e._v(" "),e._l(e.baseData,function(t,o){return n("div",{key:o,staticStyle:{"margin-top":"10px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[n("el-select",{attrs:{placeholder:"目标字段"},on:{change:function(t){return e.changeFormId(o)}},model:{value:t.destField,callback:function(n){e.$set(t,"destField",n)},expression:"item.destField"}},[e.targetMap&&e.targetMap[t.destField]&&t.destField?n("el-option",{key:t.destField,attrs:{label:e.targetMap[t.destField]?e.targetMap[t.destField].name:"",value:t.destField}}):e._e(),e._v(" "),e._l(e.getTargetList,function(t){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),e._v(" "),n("el-option",{key:"ID",attrs:{label:"ID",value:"id"}}),e._v(" "),n("el-option",{key:"extId",attrs:{label:"父Id",value:"extId"}}),e._v(" "),n("el-option",{key:"extKey",attrs:{label:"父key",value:"extKey"}})],2)],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"判断符"},model:{value:t.symbol,callback:function(n){e.$set(t,"symbol",n)},expression:"item.symbol"}},e._l(e.getSymbol(t.destField),function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{attrs:{span:5}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.getDestType(t),function(t){return e.modelData.variableName!=t.value?n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[e.isCommonDataType(e.getVarType(t.variable))?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getMatchingList(t.variable),function(o){return e.checkShow(o,t.destField)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()}),1):e._e(),e._v(" "),e.isObjectBlocklyType(t.variable)?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getObjectBlocklyVarOption(t.variable),function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):""==t.variable?n("customFromItem",{attrs:{exts:e.targetMap[t.destField]?e.targetMap[t.destField]:null,noClear:""},on:{change:e.customFromItemChanged},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e._e()],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(o)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)})],2)},staticRenderFns:[]};var c=n("VU/8")(l,s,!1,function(e){n("Al5W")},"data-v-45c3a013",null);t.default=c.exports},Vzxs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-sql",use:"icon-sql-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-sql"><defs><style type="text/css"></style></defs><path d="M522.0608 896h-384V128h682.666667v341.333333a21.333333 21.333333 0 1 0 42.666666 0V106.666667a21.333333 21.333333 0 0 0-21.333333-21.333334h-725.333333a21.333333 21.333333 0 0 0-21.333334 21.333334v810.666666a21.333333 21.333333 0 0 0 21.333334 21.333334h405.333333a21.333333 21.333333 0 1 0 0-42.666667z" p-id="6345" /><path d="M322.449067 388.906667c-3.950933 3.524267-8.533333 6.365867-13.6192 8.448a41.3696 41.3696 0 0 1-15.633067 3.089066c-8.96 0-17.314133-1.5616-24.840533-4.6336a120.917333 120.917333 0 0 1-21.649067-11.409066c-4.471467-2.884267-8.772267-4.488533-12.7744-4.770134l-0.938667-0.0256c-3.0208 0-7.466667 1.058133-11.52 6.2208-2.7392 3.797333-5.0176 10.146133-0.290133 18.858667 3.4048 6.2976 10.248533 12.014933 21.0176 17.518933 6.792533 3.2768 14.574933 6.0672 23.133867 8.302934 7.8336 2.039467 15.9232 3.072 24.055466 3.072l2.5344-0.034134c11.349333-0.2304 21.998933-2.2272 31.6416-5.9136 9.7024-3.712 18.158933-8.942933 25.130667-15.5648a70.485333 70.485333 0 0 0 16.349867-23.6032 74.837333 74.837333 0 0 0 5.8112-29.499733c0-9.5488-1.348267-18.082133-4.0192-25.361067a58.871467 58.871467 0 0 0-11.784534-19.498666 81.621333 81.621333 0 0 0-18.363733-14.7712 225.681067 225.681067 0 0 0-23.6544-12.1856c-6.5792-2.935467-12.970667-5.879467-19.208533-8.840534a102.656 102.656 0 0 1-15.889067-9.1648 40.251733 40.251733 0 0 1-10.504533-10.8032c-2.525867-3.882667-3.746133-8.482133-3.746134-14.0544 0-9.105067 2.978133-16.3584 9.088-22.1696 6.1696-5.870933 14.301867-8.721067 25.0112-8.721066l1.2544-0.017067a40.874667 40.874667 0 0 1 17.911467 4.206933c6.5792 3.1744 12.125867 6.331733 16.401067 9.3184a24.149333 24.149333 0 0 0 14.190933 4.7616c5.410133 0 9.719467-2.432 12.509867-7.082666 3.259733-5.614933 3.268267-11.6224 0.0256-17.373867-2.858667-5.051733-7.552-9.591467-13.960534-13.499733-6.0928-3.703467-13.4912-6.8352-22.016-9.326934-17.092267-4.992-36.087467-5.0944-52.548266 0.392534a66.551467 66.551467 0 0 0-22.2208 12.398933 61.841067 61.841067 0 0 0-15.573334 20.138667c-3.925333 7.9616-5.905067 16.9216-5.905066 26.632533 0 10.5984 1.7408 19.746133 5.1712 27.204267 3.413333 7.4752 8.328533 13.994667 14.5664 19.3792 6.050133 5.2224 13.312 9.9072 21.572266 13.917866 8.0384 3.908267 16.878933 7.7568 26.1888 11.374934 4.8128 1.9712 9.7792 4.3776 14.737067 7.125333a61.184 61.184 0 0 1 12.919467 9.565867c3.7376 3.6352 6.775467 7.8336 9.045333 12.475733 2.210133 4.514133 3.328 9.685333 3.328 15.36 0 5.691733-1.186133 11.0336-3.5072 15.906133a40.900267 40.900267 0 0 1-9.429333 12.654934zM607.0528 307.089067c0-16.913067-2.235733-33.28-6.647467-48.631467-4.445867-15.4624-11.178667-29.192533-19.985066-40.823467a97.595733 97.595733 0 0 0-33.536-28.0064c-13.405867-6.8864-29.2864-10.368-47.1808-10.368-18.116267 0-34.158933 3.490133-47.6672 10.359467a97.160533 97.160533 0 0 0-33.723734 28.023467c-8.832 11.656533-15.445333 25.412267-19.6608 40.874666a184.465067 184.465067 0 0 0-6.2976 48.571734c0 17.152 2.244267 33.621333 6.656 48.964266 4.445867 15.445333 11.1616 29.175467 19.985067 40.823467a97.066667 97.066667 0 0 0 33.723733 28.023467c13.508267 6.877867 29.320533 10.359467 46.984534 10.359466 14.5664 0 27.7248-2.286933 39.1168-6.784a104.405333 104.405333 0 0 0 28.987733-17.6128l12.168533 11.886934c6.016 6.024533 11.409067 9.1648 16.477867 9.6 5.435733 0.494933 10.094933-1.6128 13.218133-5.6064 5.486933-5.888 9.079467-15.8464-4.8896-29.815467l-14.788266-14.7968a132.48 132.48 0 0 0 12.8768-34.7136 192 192 0 0 0 4.181333-40.328533z m-71.995733 27.767466c-4.053333 0.981333-7.773867 3.140267-11.204267 6.570667-4.48 4.949333-6.596267 9.762133-6.2976 14.301867 0.256 3.84 2.167467 7.287467 5.418667 10.0096l21.128533 21.12a57.5744 57.5744 0 0 1-18.048 10.948266c-7.7824 2.875733-16.648533 4.343467-26.3424 4.343467-12.6208 0-23.552-2.619733-32.520533-7.799467a65.578667 65.578667 0 0 1-22.280534-20.992c-5.870933-8.9088-10.257067-19.1488-13.073066-30.4384a147.5072 147.5072 0 0 1-4.317867-35.822933c0-12.552533 1.450667-24.789333 4.317867-36.360533 2.816-11.400533 7.261867-21.614933 13.218133-30.370134a68.5056 68.5056 0 0 1 22.331733-20.8896c8.8576-5.162667 19.729067-7.790933 32.324267-7.790933 12.373333 0 23.202133 2.628267 32.1792 7.799467a67.456 67.456 0 0 1 22.485333 21.034666c5.947733 8.874667 10.402133 19.208533 13.226667 30.728534 2.858667 11.665067 4.309333 24.072533 4.309333 36.864 0 10.368-0.776533 19.933867-2.312533 28.424533a132.693333 132.693333 0 0 1-5.2992 19.805867l-15.522133-15.7696c-4.036267-4.932267-8.789333-6.920533-13.7216-5.717334zM667.630933 182.673067c-4.898133 0-9.053867 1.442133-12.3392 4.2752-3.473067 3.003733-5.230933 7.2448-5.230933 12.612266v208.213334c0 6.1952 1.988267 11.246933 5.9136 15.010133 3.874133 3.7376 9.2928 5.640533 16.1024 5.640533h85.333333c4.565333 0 8.541867-1.271467 11.8272-3.7888 3.592533-2.773333 5.410133-6.954667 5.410134-12.424533 0-5.6576-1.7408-9.9328-5.154134-12.6976-3.157333-2.56-7.2192-3.857067-12.074666-3.857067h-71.850667v-196.096c-0.008533-10.7264-6.545067-16.887467-17.937067-16.887466zM704.64 605.038933c-54.5792 0-98.978133 44.407467-98.978133 98.9952s44.398933 98.986667 98.978133 98.986667 98.9952-44.398933 98.9952-98.986667-44.407467-98.9952-98.9952-98.9952z m0 155.3152a56.379733 56.379733 0 0 1-56.311467-56.32c0-31.061333 25.258667-56.328533 56.311467-56.328533a56.388267 56.388267 0 0 1 56.328533 56.328533c0 31.0528-25.2672 56.32-56.328533 56.32z" p-id="6346" /><path d="M927.906133 764.177067a21.2992 21.2992 0 0 0-9.864533-13.0048l-39.714133-23.210667a174.5408 174.5408 0 0 0 0.4608-44.398933l38.8864-23.1424a21.333333 21.333333 0 0 0 7.424-29.243734l-47.650134-80.093866a21.333333 21.333333 0 0 0-29.482666-7.278934l-34.986667 21.469867c-11.972267-8.951467-24.576-15.9488-34.926933-20.9664V507.733333a21.333333 21.333333 0 0 0-21.333334-21.333333h-102.4a21.333333 21.333333 0 0 0-21.333333 21.333333v33.245867c-15.223467 6.024533-26.9056 13.994667-37.794133 23.057067l-31.530667-19.080534a21.316267 21.316267 0 0 0-29.533867 7.620267l-46.250666 80.452267a21.333333 21.333333 0 0 0 7.799466 29.090133l34.670934 20.087467a184.200533 184.200533 0 0 0-1.2544 21.8368c0 9.361067 0.776533 18.7648 2.312533 28.117333l-34.696533 20.676267a21.316267 21.316267 0 0 0-7.415467 29.2352l47.6672 80.085333a21.316267 21.316267 0 0 0 29.7728 7.099733l33.4848-21.2736c9.0624 7.338667 18.901333 14.114133 32.768 19.396267v49.962667a21.333333 21.333333 0 0 0 21.333333 21.333333h102.4a21.333333 21.333333 0 0 0 21.333334-21.333333v-53.384534a203.434667 203.434667 0 0 0 32.256-19.037866l38.9376 23.406933a21.316267 21.316267 0 0 0 29.405866-7.517867l47.0272-80.452266c2.8672-4.8896 3.669333-10.717867 2.2272-16.1792z m-75.170133 56.448l-33.1776-19.9424a21.316267 21.316267 0 0 0-25.1904 2.363733c-11.7504 10.487467-28.305067 20.343467-45.422933 27.0592a21.333333 21.333333 0 0 0-13.550934 19.857067V896h-59.733333v-44.373333a21.333333 21.333333 0 0 0-16.3584-20.744534c-18.807467-4.514133-26.837333-11.3664-40.123733-22.7072l-3.387734-2.884266a21.333333 21.333333 0 0 0-25.233066-1.732267l-28.151467 17.8944-25.5232-42.88 29.474133-17.570133a21.333333 21.333333 0 0 0 9.736534-23.688534 132.181333 132.181333 0 0 1-4.317867-33.271466c0-10.077867 0.964267-19.618133 2.875733-28.356267a21.333333 21.333333 0 0 0-10.146133-23.005867l-29.021867-16.8192 24.772267-43.101866 26.257067 15.880533c8.106667 4.906667 18.4576 3.882667 25.437866-2.5088 15.761067-14.404267 26.845867-23.560533 47.803734-29.064533a21.316267 21.316267 0 0 0 15.914666-20.6336V529.066667h59.733334v29.013333a21.333333 21.333333 0 0 0 13.166933 19.712c19.054933 7.901867 36.565333 18.56 48.017067 29.243733a21.316267 21.316267 0 0 0 25.7024 2.5856l29.568-18.133333 25.685333 43.1872-32.989867 19.6352a21.333333 21.333333 0 0 0-9.984 22.664533 133.290667 133.290667 0 0 1-0.682666 57.053867 21.333333 21.333333 0 0 0 10.018133 23.236267l34.210133 19.9936-25.378133 43.3664z" p-id="6347" /></symbol>'});r.a.add(l);t.default=l},W43c:function(e,t,n){"use strict";var o=n("0xDb"),i={symbol:"",destField:"",variable:"",field:"",value:""},a={components:{customFromItem:n("9uud").a},props:{modelData:{},value:{},tableName:{},templateInfo:{},tableDefine:{}},model:{prop:"value",event:"change"},watch:{},mounted:function(){this.init()},data:function(){return{orList:[],symbolEnum:Object(o.m)("symbolEnum"),valueType:Object(o.m)("addRobotRulesEnum"),noshowlist:Object(o.p)(),targetMap:{},targetList:[],first:!0,type:[{value:"",label:"自定义"},{value:"currentTime",label:"当前时间"},{value:"currentDay",label:"当天"}]}},methods:{getShowVariable:function(e){if(!e)return!1;console.log(this.targetMap,this.targetMap[e],e,8888666);var t=this.targetMap[e].type;return"dateTime"==t||"dateYear"==t||"dateMonth"==t},matchTypeChange:function(e){},init:function(){var e=this;this.targetList=this.tableDefine.templateJson,this.targetList[0]&&"id"!=this.targetList[0].key&&this.targetList.unshift({name:"ID",key:"id",type:"id"}),this.targetList.forEach(function(t){e.targetMap[t.key]=t})},checkShow:function(e,t){return!!this.targetMap[t]&&Object(o.o)(e.type)==Object(o.o)(this.targetMap[t].type)},getMatchingList:function(e){return[]},getShowSymbol:function(e,t,n,i){if(!e||!this.targetMap||!this.targetMap[e])return!1;var a=Object(o.q)(this.targetMap[e].type,t);return-1==a.showList.indexOf(this.orList[n][i].symbol)&&(this.orList[n][i].symbol=""),a.re},deleteItem:function(e,t){this.orList[e].splice(t,1),0==this.orList[e].length&&this.orList.splice(e,1)},addItem:function(e,t){e?this.orList[t].push(Object(o.e)(i)):this.orList.push([Object(o.e)(i)])},getData:function(){for(var e in this.orList){var t=this.orList[e].filter(function(e,t,n){return e.destField&&e.symbol});this.orList[e]=t}return this.orList=this.orList.filter(function(e,t,n){return e.length}),console.log(this.orList,88889),this.orList},fresh:function(){this.orList=[]}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.orList,function(t,o){return n("div",{key:o},[0!=o?n("div",{staticStyle:{padding:"5px 10px","font-weight":"bold"}},[e._v("\n      或\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"or-box"},[e._l(t,function(t,i){return n("div",{key:"or"+i,staticStyle:{"padding-bottom":"3px",width:"400px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:e.getShowVariable(t.destField)?6:8}},[n("el-select",{attrs:{placeholder:"目标字段"},model:{value:t.destField,callback:function(n){e.$set(t,"destField",n)},expression:"item.destField"}},e._l(e.targetList,function(t){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:e.getShowVariable(t.destField)?5:6}},[n("el-select",{attrs:{placeholder:"判断符"},model:{value:t.symbol,callback:function(n){e.$set(t,"symbol",n)},expression:"item.symbol"}},e._l(e.symbolEnum,function(a){return e.getShowSymbol(t.destField,a.value,o,i)?n("el-option",{key:a.value,attrs:{label:a.label,value:a.value}}):e._e()}),1)],1),e._v(" "),e.getShowVariable(t.destField)?n("el-col",{staticStyle:{"padding-right":"5px"},attrs:{span:5}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},on:{change:function(n){return e.matchTypeChange(t)}},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:e.getShowVariable(t.destField)?6:8}},[t.variable&&"currentTime"!=t.variable&&"currentDay"!=t.variable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getMatchingList(t.variable),function(o){return e.checkShow(o,t.destField)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()}),1):n("customFromItem",{attrs:{variable:t.variable,exts:e.targetMap[t.destField]?e.targetMap[t.destField]:null,noClear:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:2}},[n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(o,i)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)],1)}),e._v(" "),n("div",[n("el-button",{on:{click:function(t){return e.addItem(!0,o)}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 且条件")])],1)],2)])}),0)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("ZEmB")},"data-v-59c04af0",null);t.a=l.exports},W5xu:function(e,t,n){"use strict";var o=n("mvHQ"),i=n.n(o),a={data:function(){return{visible:!1,menuList:[],checked:[],menuMap:{},opt:null}},methods:{submit:function(){var e=this;this.checked=this.checked.filter(function(t){return!!e.menuMap[t]});var t=this.opt?"/common/commoncommonusemenu/update":"/common/commoncommonusemenu/save";this.$http({url:this.$http.adornUrl(t),method:"post",data:{appId:JSON.parse(localStorage.getItem("app")).appId,content:i()(this.checked),id:this.opt?this.opt.id:""}}).then(function(t){var n=t.data;n&&0===n.code&&(e.$emit("refresh"),e.closeWindow())})},closeWindow:function(){this.visible=!1},handleCheckedChange:function(e){},delectChecked:function(e){var t=this.checked.indexOf(e);this.checked.splice(t,1)},init:function(e,t,n){this.menuList=t,this.menuMap=n,this.opt=e,this.checked=e?JSON.parse(e.content):[],this.visible=!0}},mounted:function(){}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("vxe-modal",{attrs:{width:"800",height:"500",resize:"",title:"常用管理"},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("span",[e._v("常用管理")]),e._v(" "),n("div",{staticClass:"col text-center"}),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},on:{click:e.closeWindow}},[e._v("取消")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1)]},proxy:!0}],null,!1,862592433),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"w100 h100 row",staticStyle:{padding:"10px"}},[n("div",{staticClass:"col column left-box"},[n("div",{staticClass:"title"},[e._v("\r\n                选择菜单\r\n            ")]),e._v(" "),n("div",{staticClass:"col",staticStyle:{overflow:"auto"}},[n("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.menuList,function(t){return n("div",{key:t.menuId,staticClass:"select"},[n("el-checkbox",{key:t.menuId,attrs:{label:t.menuId}},[n("icon-svg",{staticClass:"menu-icon",attrs:{name:t.icon||""}}),e._v("\r\n                            "+e._s(t.name)+"\r\n                        ")],1)],1)}),0)],1)]),e._v(" "),n("div",{staticClass:"col column right-box "},[n("div",{staticClass:"title"},[e._v("\r\n                已添加\r\n            ")]),e._v(" "),n("div",{staticClass:"col",staticStyle:{overflow:"auto"}},[n("draggable",{attrs:{group:{name:"people",pull:"clone",put:!1},sort:!0},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[n("transition-group",e._l(e.checked,function(t){return e.menuMap[t]?n("div",{key:t,staticClass:"checked row",attrs:{title:t}},[n("div",{staticClass:"col"},[n("icon-svg",{staticClass:"menu-icon",attrs:{name:e.menuMap[t].icon||""}}),e._v("\r\n                            "+e._s(e.menuMap[t].name)+"\r\n                        ")],1),e._v(" "),n("div",[n("i",{staticClass:"el-icon-close",staticStyle:{"padding-right":"10px","font-size":"16px",cursor:"pointer"},attrs:{title:"删除"},on:{click:function(n){return e.delectChecked(t)}}})])]):e._e()}),0)],1)],1)])])]):e._e()},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("eUFb")},"data-v-b256e87e",null);t.a=l.exports},WmNw:function(e,t){},Wncs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("bKCO"),i=n("skRJ"),a=n("xstH"),r={name:"process",components:{addBtn:i.default,selectStaff:a.a,selectStaffDepRole:o.a},props:{d:{},isBranches:{default:!1},staffExtList:{}},watch:{d:{handler:function(e,t){this.$forceUpdate()},deep:!0}},data:function(){return{headColorMap:{approval:"approval-head",write:"write-head",start:"write-head"},themeColor:localStorage.getItem("theme"),visible:!1}},methods:{delItem:function(e){this.$emit("delItem",e)},selectItem:function(e){this.$emit("select",e)},addItem:function(e,t,n,o){this.$emit("addItem",e,t,n,o)}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{h100:!e.d.nextNode&&!e.d.branches&&e.isBranches}},["end"==e.d.type?n("div",{staticClass:"end"},[e._v("\r\n        结束\r\n    ")]):e.d.type?n("div",{staticClass:"base-node",class:{h100:!e.d.nextNode&&!e.d.branches&&e.isBranches}},[n("div",{staticClass:"node-box column"},["start"!=e.d.type&&"end"!=e.d.type?n("el-popconfirm",{staticClass:" del-btn",attrs:{title:"确定删除该节点吗？"},on:{confirm:function(t){return e.delItem(e.d)}}},[n("i",{staticClass:"el-icon-error",attrs:{slot:"reference",title:"删除"},slot:"reference"})]):e._e(),e._v(" "),n("div",{staticClass:"col column",on:{click:function(t){return t.stopPropagation(),e.selectItem(e.d)}}},["branch"!=e.d.type?n("div",{staticClass:"col column"},[n("div",{staticClass:"base-head row",class:e.headColorMap[e.d.type]?e.headColorMap[e.d.type]:"purple-head"},[n("div",{staticClass:"head-text"},[e._v(e._s(e.d.name))])]),e._v(" "),"start"==e.d.type?n("div",{staticClass:"col"}):e._e(),e._v(" "),"approval"==e.d.type?n("div",{staticClass:"col node-body"},[n("div",{staticClass:"row node-body-staff"},[e.d.info.adminId?n("selectStaffDepRole",{attrs:{otherDynamicList:e.staffExtList,readOnly:""},model:{value:e.d.info.adminId,callback:function(t){e.$set(e.d.info,"adminId",t)},expression:"d.info.adminId"}}):n("span",{staticStyle:{padding:"0px 0 10px","font-weight":"bold","font-size":"14px"}},[e._v("未设置负责人")])],1),e._v(" "),n("div",{staticClass:"row",staticStyle:{padding:"10px 0"}},[e._v("\r\n                            审批节点\r\n                        ")])]):e._e(),e._v(" "),"write"==e.d.type?n("div",{staticClass:"col node-body"},[n("div",{staticClass:"row node-body-staff"},[e.d.info.adminId?n("selectStaff",{attrs:{readOnly:""},model:{value:e.d.info.adminId,callback:function(t){e.$set(e.d.info,"adminId",t)},expression:"d.info.adminId"}}):n("span",{staticStyle:{padding:"0px 0 10px","font-weight":"bold","font-size":"14px"}},[e._v("未设置负责人")])],1),e._v(" "),n("div",{staticClass:"row",staticStyle:{padding:"10px 0"}},[e._v("\r\n                            填写节点\r\n                        ")])]):e._e(),e._v(" "),"robot"==e.d.type?n("div",{staticClass:"col node-body"},[n("div",{staticClass:"row node-body-staff"},[e.d.info.adminId?n("selectStaff",{attrs:{readOnly:""},model:{value:e.d.info.adminId,callback:function(t){e.$set(e.d.info,"adminId",t)},expression:"d.info.adminId"}}):n("span",{staticStyle:{padding:"0px 0 10px","font-weight":"bold","font-size":"14px"}},[e._v("未设置负责人")])],1),e._v(" "),n("div",{staticClass:"row",staticStyle:{padding:"10px 0"}},[e._v("\r\n                            设置机器人\r\n                        ")])]):e._e(),e._v(" "),"add"==e.d.robotType?n("div",{staticClass:"col node-body"},[n("div",{staticClass:"row node-body-staff"},[e.d.info.adminId?n("selectStaff",{attrs:{readOnly:""},model:{value:e.d.info.adminId,callback:function(t){e.$set(e.d.info,"adminId",t)},expression:"d.info.adminId"}}):n("span",{staticStyle:{padding:"0px 0 10px","font-weight":"bold","font-size":"14px"}},[e._v("未设置负责人")])],1),e._v(" "),n("div",{staticClass:"row",staticStyle:{padding:"10px 0"}},[e._v("\r\n                            添加数据\r\n                        ")])]):e._e(),e._v(" "),"updata"==e.d.robotType?n("div",{staticClass:"col node-body"},[n("div",{staticClass:"row node-body-staff"},[e.d.info.adminId?n("selectStaff",{attrs:{readOnly:""},model:{value:e.d.info.adminId,callback:function(t){e.$set(e.d.info,"adminId",t)},expression:"d.info.adminId"}}):n("span",{staticStyle:{padding:"0px 0 10px","font-weight":"bold","font-size":"14px"}},[e._v("未设置负责人")])],1),e._v(" "),n("div",{staticClass:"row",staticStyle:{padding:"10px 0"}},[e._v("\r\n                            更新数据\r\n                        ")])]):e._e()]):e._e(),e._v(" "),"branch"==e.d.type?n("div",{staticClass:"column"},[n("div",{staticClass:"branch-head"},[e._v("\r\n                        所有数据可进入该分支\r\n                    ")]),e._v(" "),n("div",{staticClass:"col branch-foot"},[n("el-button",{attrs:{type:"text"}},[e._v("筛选数据")])],1)]):e._e()])],1),e._v(" "),"end"!=e.d.type?n("div",{staticClass:"line-in-middle"},[n("el-popover",{attrs:{placement:"right-start",width:"176",trigger:"hover"}},[n("addBtn",{on:{add:function(t){e.addItem(e.d,!1,!1,t)}}}),e._v(" "),n("el-button",{staticClass:"add-btn",attrs:{slot:"reference",icon:"el-icon-plus",circle:""},slot:"reference"})],1),e._v(" "),n("div",{staticClass:"line"})],1):e._e()]):e._e(),e._v(" "),e.d.branches?n("div",{staticClass:"base-branch"},[n("div",{staticClass:"branch"},[n("div",{staticClass:"branch-box"},[n("el-button",{staticClass:"branch-add-btn",attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.addItem(e.d,!0)}}}),e._v(" "),e._l(e.d.branches,function(t,o){return n("div",{key:o,staticClass:"col-box"},[0==o?n("div",{staticClass:"cover-line top-left"}):e._e(),e._v(" "),o==e.d.branches.length-1?n("div",{staticClass:"cover-line top-right"}):e._e(),e._v(" "),0==o?n("div",{staticClass:"cover-line bt-left"}):e._e(),e._v(" "),o==e.d.branches.length-1?n("div",{staticClass:"cover-line bt-right"}):e._e(),e._v(" "),e._m(0,!0),e._v(" "),n("process",{ref:"process1",refInFor:!0,attrs:{staffExtList:e.staffExtList,d:t,isBranches:!0},on:{select:e.selectItem,delItem:e.delItem,addItem:e.addItem}}),e._v(" "),e._m(1,!0)],1)})],2),e._v(" "),n("div",{staticClass:"line-in-middle"},[n("el-popover",{attrs:{placement:"right-start",width:"176",trigger:"hover"}},[n("addBtn",{on:{add:function(t){e.addItem(e.d,!1,!0,t)}}}),e._v(" "),n("el-button",{staticClass:"add-btn",attrs:{slot:"reference",icon:"el-icon-plus",circle:""},slot:"reference"})],1),e._v(" "),n("div",{staticClass:"line"})],1)])]):e._e(),e._v(" "),e.d.nextNode?n("process",{ref:"process2",attrs:{staffExtList:e.staffExtList,d:e.d.nextNode},on:{select:e.selectItem,delItem:e.delItem,addItem:e.addItem}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"top-line-box"},[t("div",{staticClass:"line"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"line-in-middle",staticStyle:{"min-height":"0px"}},[t("div",{staticClass:"line"})])}]};var s=n("VU/8")(r,l,!1,function(e){n("Mw6F")},"data-v-343c12da",null);t.default=s.exports},WzVY:function(e,t){},X3VA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a={components:{addOrUpdataForm:n("T5yT").a},props:{formMap:{},variableMap:{}},data:function(){return{baseData:{tableName:""},table:null}},methods:{init:function(e){this.$set(this,"baseData",e),this.table=this.formMap[this.baseData.tableName],this.$refs.addOrUpdataForm.init(this.table,this.baseData.rules,this.baseData.extId,this.baseData.extKey)},save:function(){var e=this.$refs.addOrUpdataForm?this.$refs.addOrUpdataForm.getSaveData():null;this.baseData.rules=e;var t=this.$refs.addOrUpdataForm?this.$refs.addOrUpdataForm.getSaveExtData():null;i()(this.baseData,t),this.$emit("saveNode",this.baseData)},fresh:function(){this.table=this.formMap[this.baseData.tableName],this.$refs.addOrUpdataForm.init(this.table)}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"column h100"},["未选择"==this.baseData.tableName?t("div",{staticClass:"text-center row-title",staticStyle:{"padding-top":"20px","font-size":"14px"}},[this._v("\n    请在块中选择表单\n  ")]):t("div",[t("div",{staticClass:"blockly-row-box"},[t("div",{staticClass:"blockly-row-title"},[this._v("创建规则")]),this._v(" "),t("addOrUpdataForm",{ref:"addOrUpdataForm",attrs:{modelData:this.baseData,withExtInfo:!0,formMap:this.formMap,variableMap:this.variableMap}})],1)])])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("F/IF")},null,null);t.default=l.exports},X6Qn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("pwxe"),r=[{type:"braid-txt",isEdit:1,title:"自定义文本",value:"自定义文本",defaultValue:"自定义文本",name:""},{type:"braid-txt",isEdit:0,title:"公司名称",value:"{公司名称}",defaultValue:"某某公司",name:"companyName"},{type:"braid-txt",isEdit:1,title:"出库单号",value:"{出库单号}",defaultValue:"CK-1234567890",name:"stockoutCode"},{type:"bar-code",isEdit:1,title:"单号条码",value:"{单号}",defaultValue:"CK-1234567890",name:"stockoutCode",lodopStyle:{QRCodeVersion:"1",QRCodeErrorLevel:"L"}},{type:"braid-txt",isEdit:1,title:"客户/供应商",value:"{客户/供应商}",defaultValue:"中国苹果",name:"unitName"},{type:"braid-txt",isEdit:1,title:"经办人",value:"{经办人}",defaultValue:"zj001",name:"handlerName"},{type:"braid-txt",isEdit:1,title:"出库类型",value:"{出库类型}",defaultValue:"销售出库",name:"stockoutType"},{type:"braid-txt",isEdit:1,title:"出库仓库",value:"{出库仓库}",defaultValue:"北京仓库",name:"warehouseName"},{type:"braid-txt",isEdit:1,title:"出库时间",value:"{出库时间}",defaultValue:"2020-08-27 12:00:00",name:"businessDate"},{type:"braid-txt",isEdit:1,title:"制单人",value:"{制单人}",defaultValue:"jz002",name:"createUserName"},{type:"braid-txt",isEdit:1,title:"制单时间",value:"{制单时间}",defaultValue:"2020-08-27 12:00:00",name:"created"},{type:"braid-txt",isEdit:1,title:"收货人(销售)",value:"{收货人}",defaultValue:"刘某某",name:"receivePerson"},{type:"braid-txt",isEdit:1,title:"收货电话(销售)",value:"{收货人电话}",defaultValue:"收货人",name:"receivePhone"},{type:"braid-txt",isEdit:1,title:"收货地址(销售)",value:"{收货地址}",defaultValue:"四川成都",name:"address"},{type:"braid-txt",isEdit:1,title:"合计金额",value:"{合计金额}",defaultValue:"123.00",name:"totalPrice"},{type:"braid-txt",isEdit:1,title:"摘要",value:"{摘要}",defaultValue:"北京采购入库成都摘要",name:"remark"},{type:"braid-html",isEdit:1,title:"分页",value:"{第##页/共##页}",defaultValue:"<font><span tdata='pageNO'>第##页</span>/<span tdata='pageCount'>共##页</span></font>",name:""},{type:"braid-table",isEdit:0,title:"出库商品明细",name:"details",value:"{details}",style:{},defaultValue:[{productName:"苹果ipone11pro",skuName:"iphone11pro256g",specModel:"165L",quantity:3,snCode:"[SPP1Y79G1]",price:"23.00"},{productName:"苹果ipone11pro",skuName:"iphone11pro124g",specModel:"165L",quantity:3,snCode:" [SPP1Y79G1]",price:"12.00"}],tabelHtml:"",columnsAttr:[{title:"产品名称",value:"{产品名称}",name:"productName"},{title:"sku名称",value:"{sku名称}",name:"skuName"},{title:"规格型号",value:"{规格型号}",name:"specModel"},{title:"数量",value:"{数量}",name:"quantity"},{title:"单价",value:"{单价}",name:"price"},{title:"产品序列号",value:"产品序列号明细：<br>{产品序列号}",name:"snCode",trSet:{title:"产品序列号明细:",col:5,margin:"50px"}}],columns:[]}],l={components:{krPrintDesigner:n("chHq").default},data:function(){return{visible:!1,listVisible:!1,designerShow:!1,value:{},tempList:[],tableDefineList:[],form:{},rules:{title:{required:!0,message:"请输入模板名称"},type:{required:!0,message:"请选择模板相关联的表"},width:{required:!0,message:"请输入模板宽度"},height:{required:!0,message:"请输入模板高度"},pageWidth:{required:!0,message:"请输入纸张宽度"},pageHeight:{required:!0,message:"请输入纸张高度"}},printForm:{tempIndex:"",data:""},printRules:{tempIndex:{required:!0,message:"请选择模板"},data:{required:!0,message:"请输入模板测试数据"}},tempLateData:{},templateValue:{title:"demo",width:750,height:550,pageWidth:750,pageHeight:550,tempItems:[]},widgets:[]}},created:function(){this.getTableDefineList(),this.tempList=JSON.parse('[{"default":"true","name":"出库单示例","type":1,"templateW":770,"templateH":500,"paperW":215,"paperH":140,"tempItems":[{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":770,"height":25,"left":0,"top":10,"title":"出库单号","value":"{ 出库单号 } ","defaultValue":"CK-1234567890","name":"stockoutCode","style":{"zIndex":0,"FontSize":12,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"center","ItemType":1},"uuid":"7f7b0b45da"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":15,"top":40,"title":"自定义文本","value":"客户/供应商：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":1},"uuid":"54ca3dc671"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":375,"top":40,"title":"自定义文本","value":"业务员：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":1},"uuid":"dae9eb86e4"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":15,"top":60,"title":"自定义文本","value":"发货类型：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":1},"uuid":"317ae87dea"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":375,"top":60,"title":"自定义文本","value":"日期：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":1},"uuid":"d8cf0f23b0"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":268,"height":20,"left":95,"top":40,"title":"客户/供应商","value":"{ 客户/供应商 } ","defaultValue":"中国苹果","name":"unitName","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":1},"uuid":"a77126a142"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":299,"height":20,"left":425,"top":40,"title":"经办人","value":"{ 经办人 } ","defaultValue":"zj001","name":"handlerName","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":1},"uuid":"d8f17a27f5"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":257,"height":20,"left":80,"top":60,"title":"出库类型","value":"{ 出库类型 } ","defaultValue":"销售出库","name":"stockoutType","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":1},"uuid":"4be08abbb3"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":230,"height":20,"left":410,"top":60,"title":"制单时间","value":"{ 制单时间 } ","defaultValue":"2020-08-27 12: 00: 00","name":"created","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"83ef9c90be"},{"type":"braid-table","isEdit":0,"dragable":true,"resizable":true,"width":740,"height":275,"left":15,"top":85,"title":"出库商品明细","value":"{ details } ","defaultValue":[{"productName":"苹果ipone11pro","skuName":"iphone11pro256g","specModel":"165L","quantity":3,"snCode":"[SPP1Y79G1]","price":"23.00"},{"productName":"苹果ipone11pro","skuName":"iphone11pro124g","specModel":"165L","quantity":3,"snCode":"[SPP1Y79G1]","price":"12.00"}],"tabelHtml":"","columnsAttr":[{"title":"产品名称","value":"{ 产品名称 } ","name":"productName"},{"title":"sku名称","value":"{ sku名称 } ","name":"skuName"},{"title":"规格型号","value":"{ 规格型号 } ","name":"specModel"},{"title":"数量","value":"{ 数量 } ","name":"quantity"},{"title":"单价","value":"{ 单价 } ","name":"price"},{"title":"产品序列号","value":"产品序列号明细：<br>{产品序列号}","name":"snCode","trSet":{"title":"产品序列号明细:","col":5,"margin":"50px"}}],"columns":[{"title":"产品名称","value":"{产品名称}","name":"productName"},{"title":"sku名称","value":"{sku名称}","name":"skuName"},{"title":"规格型号","value":"{规格型号}","name":"specModel"},{"title":"数量","value":"{数量}","name":"quantity"},{"title":"单价","value":"{单价}","name":"price"}],"selectCol":["productName","skuName","specModel","quantity","price"],"name":"details","style":{"zIndex":0,"Alignment":"left","FontSize":9,"FontColor":"#000000","BorderColor":"#000000","AutoHeight":true,"BottomMargin":0},"uuid":"8f1ee2cff3"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":15,"top":370,"title":"自定义文本","value":"发货仓库：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"6171703d27"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":495,"top":370,"title":"自定义文本","value":"合计金额：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"15134dd251"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":15,"top":390,"title":"自定义文本","value":"联系人：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"8f53513be0"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":255,"top":390,"title":"自定义文本","value":"电话：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"74dad4adb2"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":15,"top":410,"title":"自定义文本","value":"地址：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"4ed4accd35"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":15,"top":430,"title":"自定义文本","value":"备注：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"6b5f65c726"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":15,"top":450,"title":"自定义文本","value":"库管：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"c71258f82d"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":110,"height":20,"left":375,"top":450,"title":"自定义文本","value":"客户签收：","defaultValue":"自定义文本","name":"","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"648e537904"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":400,"height":20,"left":75,"top":370,"title":"出库仓库","value":"{出库仓库}","defaultValue":"北京仓库","name":"warehouseName","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"10855eefc1"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":180,"height":20,"left":555,"top":370,"title":"合计金额","value":"{合计金额}","defaultValue":"123.00","name":"totalPrice","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"7a425ef108"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":180,"height":20,"left":60,"top":390,"title":"收货人(销售)","value":"{收货人}","defaultValue":"刘某某","name":"receivePerson","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"29a5f24c1b"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":190,"height":20,"left":290,"top":390,"title":"收货电话(销售)","value":"{收货人电话}","defaultValue":"收货人","name":"receivePhone","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"ae0fd46895"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":680,"height":20,"left":50,"top":410,"title":"收货地址(销售)","value":"{收货地址}","defaultValue":"四川成都","name":"address","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"dae1e2cac9"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":660,"height":20,"left":50,"top":430,"title":"摘要","value":"{摘要}","defaultValue":"北京采购入库成都摘要","name":"remark","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"a745e40eae"},{"type":"braid-txt","isEdit":1,"dragable":true,"resizable":true,"width":292,"height":20,"left":50,"top":450,"title":"制单人","value":"{制单人}","defaultValue":"jz002","name":"createUserName","style":{"zIndex":0,"FontSize":9,"FontColor":"#  000000","Bold":false,"Italic":false,"Underline":false,"Alignment":"left","ItemType":0},"uuid":"2d1b141163"}]}]')||[]},methods:{init:function(){this.listVisible=!0},onClose:function(){this.listVisible=!1,this.$emit("close")},getTableName:function(e){var t=void 0;return this.tableDefineList.forEach(function(n){n.id==e&&(t=n.name)}),t},genWidgets:function(e){var t=[];return this.tableDefineList.forEach(function(n){n.id==e&&n.templateJson.forEach(function(e){"qrCode"==e.type?t.push({type:"bar-code",isEdit:0,style:{codeType:"QRCode"},width:120,height:120,title:e.name,value:"{"+e.name+"}",defaultValue:e.name,name:e.key}):"relateTable"==e.type?e.relateTableProps.forEach(function(n){var o=JSON.parse(n);t.push({type:"braid-txt",isEdit:1,title:e.name+"_"+o.name,value:"{"+e.name+"_"+o.name+"}",defaultValue:e.name+"_"+o.name,name:e.key+"_"+o.key})}):t.push({type:"braid-txt",isEdit:1,title:e.name,value:"{"+e.name+"}",defaultValue:e.name,name:e.key})})}),t},getTableDefineList:function(){var e=this;this.$http({url:this.$http.adornUrl("/common/commondefine/list"),method:"post",data:this.$http.adornParams({page:1,limit:999,tableType:"dataTable",appId:144})}).then(function(t){var n=t.data;n&&0===n.code&&n.page&&(e.tableDefineList=n.page.list,e.getTemplateList())})},getTemplateList:function(){var e=this;this.$http({url:this.$http.adornUrl("/print/printtemplate/list"),method:"post",data:this.$http.adornParams({page:1,limit:999,tableType:"dataTable",appId:144})}).then(function(t){var n=t.data;n&&0===n.code&&n.page&&(e.tempList=e.tempList.concat(n.page.list))})},handlePreview:function(e,t){a.a.previewTemp(t)},handleEdit:function(e,t){this.designerShow=!0,this.tempLateData=t,this.templateValue.title=this.tempLateData.name,this.templateValue.width=this.tempLateData.templateW,this.templateValue.height=this.tempLateData.templateH,this.templateValue.pageWidth=this.tempLateData.paperW,this.templateValue.pageHeight=this.tempLateData.paperH,this.templateValue.direction=this.tempLateData.direction,t.default?(this.templateValue.tempItems=t.tempItems,this.widgets=r):(this.templateValue.tempItems=this.tempLateData.template?JSON.parse(this.tempLateData.template):[],this.widgets=this.genWidgets(t.tableId))},cancel:function(){this.designerShow=!1},handleSave:function(e){var t=this;this.$http({url:this.$http.adornUrl("/print/printtemplate/update"),method:"post",data:this.$http.adornParams({id:this.tempLateData.id,template:i()(e.tempItems),templateW:e.width,templateH:e.height,paperW:e.pageWidth,paperH:e.pageHeight,direction:e.direction})}).then(function(e){var n=e.data;n&&0===n.code&&(t.designerShow=!1)})},handleDelete:function(e,t){var n=this;this.$confirm("确认删除该条数据吗？","确认信息").then(function(e){if(e){var o=[];o.push(t.id),n.$http({url:n.$http.adornUrl("/print/printtemplate/delete"),method:"post",data:o}).then(function(e){var t=e.data;t&&0===t.code&&n.getTemplateList()})}}).catch()},handleCopy:function(e){var t=JSON.parse(i()(e));t.title=t.title+"_copy",t.default=!1,this.tempList.push(t),localStorage.setItem("tempList",i()(this.tempList))},openCreate:function(){this.form={},this.visible=!0},savaTemp:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.$http({url:e.$http.adornUrl("/print/printtemplate/save"),method:"post",data:e.$http.adornParams({name:e.form.title,tableId:e.form.type,templateH:e.form.height,templateW:e.form.width,paperH:e.form.pageHeight,paperW:e.form.pageWidth,direction:e.form.direction})}).then(function(t){var n=t.data;n&&0===n.code&&e.getTemplateList()}),e.visible=!1)})},printPreview:function(e){var t=this;this.$refs.printForm.validate(function(n){if(n){var o=void 0;try{o=JSON.parse(t.printForm.data)}catch(e){return t.$message("请输入正确格式的打印数据")}1==e?t.$lodop.preview(t.tempList[t.printForm.tempIndex],o):t.$confirm("确认直接打印吗？","确认信息").then(function(e){e&&t.$lodop.print(t.tempList[t.printForm.tempIndex],o)}).catch(function(e){console.log(e)})}})}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{title:"打印模板设计",width:"100%",height:"100%",resize:"",fullscreen:""},on:{close:e.onClose},model:{value:e.listVisible,callback:function(t){e.listVisible=t},expression:"listVisible"}},[e.designerShow?n("kr-print-designer",{ref:"printDesigner",attrs:{"temp-value":e.templateValue,"widget-options":e.widgets},on:{save:e.handleSave,cancel:e.cancel}}):n("div",{staticClass:"box"},[n("div",{staticClass:"title"},[e._v("打印模板设计器")]),e._v(" "),n("section",[n("div",{staticClass:"section"},[e._v("模板管理")]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tempList,size:"mini",border:""}},[n("el-table-column",{attrs:{label:"模板名称",prop:"name"}}),e._v(" "),n("el-table-column",{attrs:{label:"模板关联表单"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.getTableName(t.row.tableId)))])]}}],null,!1,2924188027)}),e._v(" "),n("el-table-column",{attrs:{label:"模板宽高"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.templateW+" * "+t.row.templateH))])]}}],null,!1,1057907123)}),e._v(" "),n("el-table-column",{attrs:{label:"纸张大小"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.paperW+"mm * "+t.row.paperH+"mm"))])]}}],null,!1,2033276856)}),e._v(" "),n("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("设计\n                        ")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.handlePreview(t.$index,t.row)}}},[e._v("预览\n                        ")]),e._v(" "),t.row.default?e._e():n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.handleCopy(t.row)}}},[e._v("复制新增")]),e._v(" "),t.row.default?e._e():n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                        ")])]}}],null,!1,1072359864)},[n("template",{slot:"header"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.openCreate}},[e._v("创建模板")])],1)],2)],1),e._v(" "),n("el-dialog",{attrs:{title:"添加模板",visible:e.visible,width:"310px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,size:"small",rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"模板名称",prop:"title"}},[n("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"模板类型",prop:"type"}},[n("el-select",{attrs:{filterable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("div",{staticStyle:{"background-color":"#fff"}},e._l(e.tableDefineList,function(e){return n("el-option",{attrs:{label:e.name,value:e.id}})}),1)])],1),e._v(" "),n("el-form-item",{attrs:{label:"模板宽度",prop:"width"}},[n("el-input",{model:{value:e.form.width,callback:function(t){e.$set(e.form,"width",t)},expression:"form.width"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"模板高度",prop:"height"}},[n("el-input",{model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"纸张宽度",prop:"pageWidth"}},[n("el-input",{model:{value:e.form.pageWidth,callback:function(t){e.$set(e.form,"pageWidth",t)},expression:"form.pageWidth"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"纸张高度",prop:"pageHeight"}},[n("el-input",{model:{value:e.form.pageHeight,callback:function(t){e.$set(e.form,"pageHeight",t)},expression:"form.pageHeight"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.savaTemp}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]};var c=n("VU/8")(l,s,!1,function(e){n("zYGc")},"data-v-4204c816",null);t.default=c.exports},X7LF:function(e,t,n){var o={"./appstore-view/index.vue":["nUMR",7],"./bxyz/dashboard/timeStatis.vue":["Kecx",11],"./bxyz/dashboard/timeStatisDetail.vue":["OViX",10],"./bxyz/dashboard/timeStatisDetailDetail.vue":["Vd9n",9],"./bxyz/dashboard/timeStatisRankChart.vue":["PGBO",12],"./common-card-view-zhifu/index.vue":["q4s/",6],"./common-card-view/index.vue":["0a1z",5],"./customFormDetail/bom.vue":["kjcC",4],"./customFormDetail/template.vue":["/954",3],"./douyin/qushitu.vue":["hGwm",8]};function i(e){var t=o[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}i.keys=function(){return Object.keys(o)},i.id="X7LF",e.exports=i},XPF6:function(e,t){},XSpc:function(e,t){},XUmz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),l=n("woOf"),s=n.n(l),c=n("mvHQ"),u=n.n(c),d=n("0xDb"),h=n("kcSy"),f=n("nHdu"),p=n("Gg4Z"),m=n("bKCO"),v={name:"",cover:"",field:[],hasName:!0,hasCover:!0,hasField:!0},b={props:{dataForm:{},exts:{default:function(){return[]}}},inject:["allFormInfo"],components:{SelectColor:p.a,customBtn:f.default,selectStaffDepRole:m.a},mounted:function(){this.leftTabs.push({title:"表格设置",index:"0"}),"on"==localStorage.getItem("devModel")&&this.leftTabs.push({title:"开发配置",index:"1"}),this.leftTabs.push({title:"字段属性",index:"3"}),this.leftTabs.push({title:"公开访问",index:"4"}),this.leftTabs.push({title:"公开填写",index:"5"}),this.leftTabs.push({title:"自定义按钮",index:"6"})},data:function(){return{predefineColors:d.f,isIndeterminate:!0,checkCanNotEditConditionAll:!1,viewUrl:window.origin,noOpenList:["relateTable","multipleRelateTable","childrenTable","relateVirtualTable","dept","workcenter","baseData","propTable","selectStaff"],noshowlist:["multipleRelateTable","file","picture","video","divider","childrenTable","relateVirtualTable","propTable","relateTable"],leftTabs:[],activeLeftTab:"0",dataRule:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}]},tableProp:{editType:2,listType:1,pageSize:20,canEdit:!0,canDelete:!0,showTotalData:!1,canInsert:!0,canExportExcel:!0,canImportExcel:!0,canExcelEdit:!1,fuzzySearch:!1,seniorSearch:!1,operateCopyData:!1,sqlTable:!1,onlyCreaterCanEdit:!1,onlyCreaterCanView:!1,canViewAllDataUsers:null,addBtnText:"新增",canNotEditCondition:!1,canNotEditConditionContent:null,canNotEditConditionFields:[],recordUpdateHistory:!1,batchPrintQrCode:!1,canBatchUploadFile:!1,canPublicShare:!1,openOpt:{privateExts:[],openName:"",canSearch:!1,canEdit:!1,canDelete:!1,canInsert:!1},canPublicAdd:!1,publicAddOpt:{privateExts:[],openName:""},leftView:"",dashboard:null,setTimeTodoRobotId:null,setTimeTodoField:null,setTimeTodo:null},sqlString:"",customView:{},cardView:Object(d.e)(v),fixedData:{selected:{show:!0},seq:{show:!1},id:{show:!1,query:!1},creater:{show:!1,query:!1},createdAt:{show:!1,query:!1},updatedAt:{show:!1,query:!1},operateColumnWidth:{width:120}}}},methods:{handleCanNotEditConditionCheckAllChange:function(e){var t=[];this.exts.forEach(function(e){t.push(e.key)}),this.tableProp.canNotEditConditionFields=e?t:[],this.isIndeterminate=!1,this.changeItem(this.tableProp,"canNotEditConditionFields")},changeItem:function(e,t){Object(h.c)({commonDefineId:this.dataForm.id,propData:e[t],propName:t})},changeCustomCardViewItem:function(e,t){Object(h.b)({commonDefineId:this.dataForm.id,customViewData:e,customViewName:"cardView"})},changeCustomViewItem:function(e,t){Object(h.b)({commonDefineId:this.dataForm.id,customViewData:e,customViewName:t})},changeApiInfo:function(e,t){Object(h.a)({commonDefineId:this.dataForm.id,type:t,value:e})},changeFixedData:function(){this.$http({url:this.$http.adornUrl("/common/commondefine/updateFixedData"),method:"post",data:this.$http.adornParams({commonDefineId:this.dataForm.id,configInfo:u()(this.fixedData)})}).then(function(e){e.data})},copyUrl:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"}),t.remove()},getdataMatchType:function(e){return Object(d.o)(e)},leftTabSelect:function(e){this.activeLeftTab=e},init:function(e){var t=this;if(e.tableProp){var n=JSON.parse(e.tableProp);s()(this.tableProp,n)}var o=JSON.parse(e.fixedData);if(null!=o&&(o.selected&&(this.fixedData.selected=o.selected),o.seq&&(this.fixedData.seq=o.seq),o.id&&(this.fixedData.id=o.id),o.creater&&(this.fixedData.creater=o.creater),o.createdAt&&(this.fixedData.createdAt=o.createdAt),o.updatedAt&&(this.fixedData.updatedAt=o.updatedAt),o.operateColumnWidth&&(this.fixedData.operateColumnWidth=o.operateColumnWidth)),this.customView=JSON.parse(e.customView)||{},3==this.tableProp.listType){var i=s()(this.cardView,this.customView.cardView);this.$set(this,"cardView",i)}this.$nextTick(function(){t.$refs.customBtn.init(t.customView.customBtn)})},getSqlString:function(){var e=this;if(!this.tableProp.sqlId)return this.sqlString="",!1;this.$http({url:this.$http.adornUrl("/sql/sqlapi/info/"+this.tableProp.sqlId),method:"get"}).then(function(t){var n=t.data;n&&0===n.code&&(e.sqlString=n.sqlapi.content)})},saveSqlString:function(){var e=this;this.tableProp.sqlTable&&this.$http({url:this.$http.adornUrl("/sql/sqlapi/"+(null!=this.tableProp.sqlId?"update":"save")),method:"post",data:{content:this.sqlString,id:null!=this.tableProp.sqlId?this.tableProp.sqlId:null}}).then(function(t){var n=t.data;if(!n||0!==n.code)return e.$message({message:n.msg,type:"error",duration:1500}),!1;n.id&&(e.tableProp.sqlId=n.id,e.changeItem(e.tableProp,"sqlId"))})},getSaveData:function(){var e=this;return r()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,e.$refs.dataForm.validate(function(e){n=e}),3==e.tableProp.listType&&(e.customView.cardView=e.cardView,e.customView.customListView="common-card-view"),!e.tableProp.sqlTable){t.next=6;break}return t.next=6,e.$http({url:e.$http.adornUrl("/sql/sqlapi/save"),method:"post",data:{content:e.sqlString}}).then(function(t){var n=t.data;if(!n||0!==n.code)return e.$message({message:n.msg,type:"error",duration:1500}),!1;e.tableProp.sqlId=n.id});case 6:if(!n){t.next=10;break}return t.abrupt("return",{tableProp:e.tableProp,customView:e.customView,fixedData:u()(e.fixedData)});case 10:return e.$message({message:"名称不能为空",type:"error",duration:1500}),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,e)}))()}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h100 row",staticStyle:{padding:"10px"}},[n("el-menu",{attrs:{"default-active":e.activeLeftTab},on:{select:e.leftTabSelect}},[e._l(e.leftTabs,function(t,o){return[n("el-menu-item",{attrs:{index:t.index}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])]})],2),e._v(" "),n("div",{staticClass:"col"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"0"==e.activeLeftTab,expression:"activeLeftTab == '0'"}]},[n("div",{staticClass:"base-padding"},[n("div",{staticClass:"margin-top title"},[e._v("新增数据模式")]),e._v(" "),n("div",{staticClass:"margin-top"},[n("el-radio-group",{on:{change:function(t){return e.changeItem(e.tableProp,"editType")}},model:{value:e.tableProp.editType,callback:function(t){e.$set(e.tableProp,"editType",t)},expression:"tableProp.editType"}},[n("el-radio",{attrs:{label:2}},[e._v("表单编辑")]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v("行内编辑")])],1),e._v(" "),n("div",{staticClass:"margin-top"},[e._v("\n            每页条数\n            "),n("el-input",{attrs:{type:"number"},on:{change:function(t){return e.changeItem(e.tableProp,"pageSize")}},model:{value:e.tableProp.pageSize,callback:function(t){e.$set(e.tableProp,"pageSize",t)},expression:"tableProp.pageSize"}})],1)],1),e._v(" "),n("div",{staticClass:"margin-top title"},[e._v("功能开关")]),e._v(" "),n("div",{staticClass:"margin-top row func-switch"},[n("div",{staticClass:"enable-switch"},[e._v("\n            可新增\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"canInsert")}},model:{value:e.tableProp.canInsert,callback:function(t){e.$set(e.tableProp,"canInsert",t)},expression:"tableProp.canInsert"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            可删除\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"canDelete")}},model:{value:e.tableProp.canDelete,callback:function(t){e.$set(e.tableProp,"canDelete",t)},expression:"tableProp.canDelete"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            可编辑\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"canEdit")}},model:{value:e.tableProp.canEdit,callback:function(t){e.$set(e.tableProp,"canEdit",t)},expression:"tableProp.canEdit"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            可导出Excel\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"canExportExcel")}},model:{value:e.tableProp.canExportExcel,callback:function(t){e.$set(e.tableProp,"canExportExcel",t)},expression:"tableProp.canExportExcel"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            可导入Excel\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"canImportExcel")}},model:{value:e.tableProp.canImportExcel,callback:function(t){e.$set(e.tableProp,"canImportExcel",t)},expression:"tableProp.canImportExcel"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            可Excel编辑\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"canExcelEdit")}},model:{value:e.tableProp.canExcelEdit,callback:function(t){e.$set(e.tableProp,"canExcelEdit",t)},expression:"tableProp.canExcelEdit"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            开启模糊搜索\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"fuzzySearch")}},model:{value:e.tableProp.fuzzySearch,callback:function(t){e.$set(e.tableProp,"fuzzySearch",t)},expression:"tableProp.fuzzySearch"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            开启高级搜索\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"seniorSearch")}},model:{value:e.tableProp.seniorSearch,callback:function(t){e.$set(e.tableProp,"seniorSearch",t)},expression:"tableProp.seniorSearch"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            表单数据只允许创建者自己编辑/删除\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"onlyCreaterCanEdit")}},model:{value:e.tableProp.onlyCreaterCanEdit,callback:function(t){e.$set(e.tableProp,"onlyCreaterCanEdit",t)},expression:"tableProp.onlyCreaterCanEdit"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            表单数据只允许创建者自己查看\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"onlyCreaterCanView")}},model:{value:e.tableProp.onlyCreaterCanView,callback:function(t){e.$set(e.tableProp,"onlyCreaterCanView",t)},expression:"tableProp.onlyCreaterCanView"}})],1),e._v(" "),e.tableProp.onlyCreaterCanView?n("div",{staticClass:"enable-switch"},[e._v("\n            允许查看所有表单的用户\n            "),n("selectStaffDepRole",{attrs:{menuOpt:["userList","deptList","roleList","dynamicList"]},on:{change:function(t){return e.changeItem(e.tableProp,"canViewAllDataUsers")}},model:{value:e.tableProp.canViewAllDataUsers,callback:function(t){e.$set(e.tableProp,"canViewAllDataUsers",t)},expression:"tableProp.canViewAllDataUsers"}})],1):e._e(),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            是否显示表尾合计数据\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"showTotalData")}},model:{value:e.tableProp.showTotalData,callback:function(t){e.$set(e.tableProp,"showTotalData",t)},expression:"tableProp.showTotalData"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            操作栏增加复制行数据\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"operateCopyData")}},model:{value:e.tableProp.operateCopyData,callback:function(t){e.$set(e.tableProp,"operateCopyData",t)},expression:"tableProp.operateCopyData"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            根据ID倒序排列\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"orderByIdDesc")}},model:{value:e.tableProp.orderByIdDesc,callback:function(t){e.$set(e.tableProp,"orderByIdDesc",t)},expression:"tableProp.orderByIdDesc"}})],1),e._v(" "),n("div",{staticClass:"enable-switch"},[e._v("\n            关联表字段多选批量新增\n            "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"batchInsertByMultiSelect")}},model:{value:e.tableProp.batchInsertByMultiSelect,callback:function(t){e.$set(e.tableProp,"batchInsertByMultiSelect",t)},expression:"tableProp.batchInsertByMultiSelect"}})],1)]),e._v(" "),n("div",{staticClass:"margin-top margin-left"},[n("el-checkbox",{on:{change:function(t){return e.changeItem(e.tableProp,"canNotEditCondition")}},model:{value:e.tableProp.canNotEditCondition,callback:function(t){e.$set(e.tableProp,"canNotEditCondition",t)},expression:"tableProp.canNotEditCondition"}},[e._v("\n            根据条件编辑\n          ")]),e._v(" "),e.tableProp.canNotEditCondition?n("div",{staticClass:"margin-top",staticStyle:{"margin-bottom":"40px"}},[e._v("\n            不能编辑的条件脚本  如：row['dkjnxT'] != '未开始'\n            "),n("el-input",{attrs:{placeholder:"请输入条件"},on:{blur:function(t){return e.changeItem(e.tableProp,"canNotEditConditionContent")}},model:{value:e.tableProp.canNotEditConditionContent,callback:function(t){e.$set(e.tableProp,"canNotEditConditionContent",t)},expression:"tableProp.canNotEditConditionContent"}}),e._v("\n\n            不能编辑的字段\n            "),n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCanNotEditConditionCheckAllChange},model:{value:e.checkCanNotEditConditionAll,callback:function(t){e.checkCanNotEditConditionAll=t},expression:"checkCanNotEditConditionAll"}},[e._v("全选")]),e._v(" "),n("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),n("el-checkbox-group",{on:{change:function(t){return e.changeItem(e.tableProp,"canNotEditConditionFields")}},model:{value:e.tableProp.canNotEditConditionFields,callback:function(t){e.$set(e.tableProp,"canNotEditConditionFields",t)},expression:"tableProp.canNotEditConditionFields"}},e._l(e.exts,function(t){return n("el-checkbox",{key:t.key,attrs:{label:t.key}},[e._v(e._s(t.name))])}),1)],1):e._e()],1),e._v(" "),n("div",{staticClass:"margin-top margin-left"},[n("el-checkbox",{on:{change:function(t){return e.changeItem(e.tableProp,"rowBgColorCondition")}},model:{value:e.tableProp.rowBgColorCondition,callback:function(t){e.$set(e.tableProp,"rowBgColorCondition",t)},expression:"tableProp.rowBgColorCondition"}},[e._v("\n            根据条件显示行的背景颜色\n          ")]),e._v(" "),e.tableProp.rowBgColorCondition?n("div",{staticClass:"margin-top",staticStyle:{"margin-bottom":"40px"}},[e._v("\n            不能编辑的条件脚本  如：row['dkjnxT'] != '未开始'\n            "),n("el-input",{attrs:{placeholder:"请输入条件"},on:{blur:function(t){return e.changeItem(e.tableProp,"rowBgColorConditionContent")}},model:{value:e.tableProp.rowBgColorConditionContent,callback:function(t){e.$set(e.tableProp,"rowBgColorConditionContent",t)},expression:"tableProp.rowBgColorConditionContent"}}),e._v("\n            背景颜色\n            "),n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},on:{change:function(t){return e.changeItem(e.tableProp,"rowBgColor")}},model:{value:e.tableProp.rowBgColor,callback:function(t){e.$set(e.tableProp,"rowBgColor",t)},expression:"tableProp.rowBgColor"}})],1):e._e()],1),e._v(" "),n("div",{staticClass:"margin-top margin-left"},[n("el-checkbox",{on:{change:function(t){return e.changeItem(e.tableProp,"canBatchUploadFile")}},model:{value:e.tableProp.canBatchUploadFile,callback:function(t){e.$set(e.tableProp,"canBatchUploadFile",t)},expression:"tableProp.canBatchUploadFile"}},[e._v("\n            可批量上传文件\n          ")]),e._v(" "),e.tableProp.canBatchUploadFile?n("div",{staticClass:"margin-top"},[e._v("\n            批量上传文件文件名称填入字段\n            "),n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.changeItem(e.tableProp,"batchUploadFileNameField")}},model:{value:e.tableProp.batchUploadFileNameField,callback:function(t){e.$set(e.tableProp,"batchUploadFileNameField",t)},expression:"tableProp.batchUploadFileNameField"}},e._l(e.exts,function(t){return"string"==e.getdataMatchType(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1),e._v("\n\n            批量上传文件文件URL下载地址填入字段\n            "),n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.changeItem(e.tableProp,"batchUploadFileUrlField")}},model:{value:e.tableProp.batchUploadFileUrlField,callback:function(t){e.$set(e.tableProp,"batchUploadFileUrlField",t)},expression:"tableProp.batchUploadFileUrlField"}},e._l(e.exts,function(t){return"string"==e.getdataMatchType(t.type)||"picture"==e.getdataMatchType(t.type)||"video"==e.getdataMatchType(t.type)||"link"==e.getdataMatchType(t.type)||"file"==e.getdataMatchType(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1):e._e()],1),e._v(" "),n("div",{staticClass:"margin-top margin-left"},[n("el-checkbox",{on:{change:function(t){return e.changeItem(e.tableProp,"batchPrintQrCode")}},model:{value:e.tableProp.batchPrintQrCode,callback:function(t){e.$set(e.tableProp,"batchPrintQrCode",t)},expression:"tableProp.batchPrintQrCode"}},[e._v("\n            可批量打印单据\n          ")])],1),e._v(" "),n("div",{staticClass:"margin-top margin-left"},[n("el-checkbox",{on:{change:function(t){return e.changeItem(e.tableProp,"recordUpdateHistory")}},model:{value:e.tableProp.recordUpdateHistory,callback:function(t){e.$set(e.tableProp,"recordUpdateHistory",t)},expression:"tableProp.recordUpdateHistory"}},[e._v("\n            记录数据变化流水\n          ")]),e._v(" "),e.tableProp.recordUpdateHistory?n("div",{staticClass:"margin-top"},[e._v("\n            记录流水的字段\n            "),n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.changeItem(e.tableProp,"recordUpdateHistoryField")}},model:{value:e.tableProp.recordUpdateHistoryField,callback:function(t){e.$set(e.tableProp,"recordUpdateHistoryField",t)},expression:"tableProp.recordUpdateHistoryField"}},e._l(e.exts,function(t){return"num"==e.getdataMatchType(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1),e._v("\n\n\n            查询历史数据去重字段\n            "),n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.changeItem(e.tableProp,"recordUpdateHistoryQueryField")}},model:{value:e.tableProp.recordUpdateHistoryQueryField,callback:function(t){e.$set(e.tableProp,"recordUpdateHistoryQueryField",t)},expression:"tableProp.recordUpdateHistoryQueryField"}},e._l(e.exts,function(t){return"string"==e.getdataMatchType(t.type)||"id"==e.getdataMatchType(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1),e._v("\n\n            查询历史数据文案\n            "),n("el-input",{attrs:{placeholder:"请填写"},on:{change:function(t){return e.changeItem(e.tableProp,"recordUpdateHistoryQueryText")}},model:{value:e.tableProp.recordUpdateHistoryQueryText,callback:function(t){e.$set(e.tableProp,"recordUpdateHistoryQueryText",t)},expression:"tableProp.recordUpdateHistoryQueryText"}})],1):e._e()],1),e._v(" "),n("div",{staticClass:"margin-top title"},[e._v("展示样式")]),e._v(" "),n("div",{staticClass:"margin-top margin-left"},[n("el-radio-group",{on:{change:function(t){return e.changeItem(e.tableProp,"listType")}},model:{value:e.tableProp.listType,callback:function(t){e.$set(e.tableProp,"listType",t)},expression:"tableProp.listType"}},[n("el-radio",{attrs:{label:1}},[e._v("普通列表")]),e._v(" "),n("el-radio",{attrs:{label:2}},[e._v("树形列表")]),e._v(" "),n("el-radio",{attrs:{label:3}},[e._v("卡片列表")])],1)],1),e._v(" "),3==e.tableProp.listType?n("div",[n("div",{staticClass:"margin-top title"},[e._v("卡片样式设置")]),e._v(" "),n("el-form",{attrs:{"label-width":"100px"}},[n("div",{staticClass:"row"},[n("el-form-item",{attrs:{label:"是否显示标题",prop:"name"}},[n("el-switch",{on:{change:function(t){return e.changeCustomCardViewItem(e.cardView,"hasName")}},model:{value:e.cardView.hasName,callback:function(t){e.$set(e.cardView,"hasName",t)},expression:"cardView.hasName"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.cardView.hasName,expression:"cardView.hasName"}],staticClass:"col"},[n("el-form-item",{attrs:{label:"标题",prop:"name"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.changeCustomCardViewItem(e.cardView,"name")}},model:{value:e.cardView.name,callback:function(t){e.$set(e.cardView,"name",t)},expression:"cardView.name"}},e._l(e.exts,function(t){return-1!=["string","id"].indexOf(e.getdataMatchType(t.type))&&-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1)],1)],1),e._v(" "),n("div",{staticClass:"row"},[n("el-form-item",{attrs:{label:"是否显示封面",prop:"name"}},[n("el-switch",{on:{change:function(t){return e.changeCustomCardViewItem(e.cardView,"hasCover")}},model:{value:e.cardView.hasCover,callback:function(t){e.$set(e.cardView,"hasCover",t)},expression:"cardView.hasCover"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.cardView.hasCover,expression:"cardView.hasCover"}],staticClass:"col"},[n("el-form-item",{attrs:{label:"封面",prop:"cover"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.changeCustomCardViewItem(e.cardView,"cover")}},model:{value:e.cardView.cover,callback:function(t){e.$set(e.cardView,"cover",t)},expression:"cardView.cover"}},e._l(e.exts,function(t){return"picture"==t.type?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1)],1)],1),e._v(" "),n("div",{staticClass:"row"},[n("el-form-item",{attrs:{label:"是否显示字段",prop:"name"}},[n("el-switch",{on:{change:function(t){return e.changeCustomCardViewItem(e.cardView,"hasField")}},model:{value:e.cardView.hasField,callback:function(t){e.$set(e.cardView,"hasField",t)},expression:"cardView.hasField"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.cardView.hasField,expression:"cardView.hasField"}],staticClass:"col"},[n("el-form-item",{attrs:{label:"字段",prop:"cover"}},[n("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择"},on:{change:function(t){return e.changeCustomCardViewItem(e.cardView,"field")}},model:{value:e.cardView.field,callback:function(t){e.$set(e.cardView,"field",t)},expression:"cardView.field"}},e._l(e.exts,function(t){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1)],1)],1)])],1):e._e(),e._v(" "),n("div",{staticClass:"margin-top title"},[e._v("顶部视图")]),e._v(" "),n("el-input",{attrs:{placeholder:"请输入dasboard ID"},on:{blur:function(t){return e.changeItem(e.tableProp,"dashboard")}},model:{value:e.tableProp.dashboard,callback:function(t){e.$set(e.tableProp,"dashboard",t)},expression:"tableProp.dashboard"}}),e._v(" "),n("div",{staticClass:"margin-top title"},[e._v("左侧视图")]),e._v(" "),n("div",{staticClass:"margin-top margin-left"},[n("el-radio-group",{on:{change:function(t){return e.changeItem(e.tableProp,"leftView")}},model:{value:e.tableProp.leftView,callback:function(t){e.$set(e.tableProp,"leftView",t)},expression:"tableProp.leftView"}},[n("el-radio",{attrs:{label:""}},[e._v("无")]),e._v(" "),n("el-radio",{attrs:{label:"tree"}},[e._v("树形菜单")])],1)],1),e._v(" "),"tree"==e.tableProp.leftView?n("div",[n("div",{staticClass:"margin-top title"},[e._v("树形菜单配置")]),e._v(" "),n("div",{staticClass:"margin-top row"},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"父表",prop:"name"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.changeItem(e.tableProp,"treeTable")}},model:{value:e.tableProp.treeTable,callback:function(t){e.$set(e.tableProp,"treeTable",t)},expression:"tableProp.treeTable"}},e._l(e.allFormInfo.list,function(t){return e.dataForm.id!=t.id?n("el-option",{key:t.tableName,attrs:{label:t.name,value:t.tableName}}):e._e()}),1)],1)],1)],1)]):e._e(),e._v(" "),n("div",{staticClass:"margin-top title"},[e._v("按钮文案")]),e._v(" "),n("div",{staticClass:"margin-top margin-left row"},[n("el-button",{staticClass:"margin-right",attrs:{type:"primary"}},[e._v(e._s(e.tableProp.addBtnText))]),e._v(" "),n("el-input",{staticStyle:{width:"200px"},on:{change:function(t){return e.changeItem(e.tableProp,"addBtnText")}},model:{value:e.tableProp.addBtnText,callback:function(t){e.$set(e.tableProp,"addBtnText",t)},expression:"tableProp.addBtnText"}})],1),e._v(" "),n("div",{staticClass:"margin-top title"},[e._v("定时任务")]),e._v(" "),n("div",{staticClass:"margin-top margin-left row"},[n("el-form",[n("el-form-item",{attrs:{label:"是否开启定时任务",prop:"name"}},[n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"setTimeTodo")}},model:{value:e.tableProp.setTimeTodo,callback:function(t){e.$set(e.tableProp,"setTimeTodo",t)},expression:"tableProp.setTimeTodo"}})],1),e._v(" "),e.tableProp.setTimeTodo?n("el-form-item",{attrs:{label:"根据此时间字段填写的时间自动执行"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.changeItem(e.tableProp,"setTimeTodoField")}},model:{value:e.tableProp.setTimeTodoField,callback:function(t){e.$set(e.tableProp,"setTimeTodoField",t)},expression:"tableProp.setTimeTodoField"}},e._l(e.exts,function(t){return"dateTime"==t.type?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1):e._e(),e._v(" "),e.tableProp.setTimeTodo?n("el-form-item",{attrs:{label:"定时任务机器人ID"}},[n("el-input",{on:{change:function(t){return e.changeItem(e.tableProp,"setTimeTodoRobotId")}},model:{value:e.tableProp.setTimeTodoRobotId,callback:function(t){e.$set(e.tableProp,"setTimeTodoRobotId",t)},expression:"tableProp.setTimeTodoRobotId"}})],1):e._e()],1)],1)],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.activeLeftTab,expression:"activeLeftTab == '1'"}]},[n("div",{staticClass:"base-padding"},[n("div",{staticClass:"margin-top title"},[e._v("表格api")]),e._v(" "),n("el-form",{ref:"dataForm",staticClass:"base-padding",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"180px"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("el-form-item",{attrs:{label:"tableName",prop:"table"}},[n("el-input",{attrs:{disabled:""},model:{value:e.dataForm.tableName,callback:function(t){e.$set(e.dataForm,"tableName",t)},expression:"dataForm.tableName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"dbTableName",prop:"table"}},[n("el-input",{attrs:{disabled:""},model:{value:e.dataForm.dbTableName,callback:function(t){e.$set(e.dataForm,"dbTableName",t)},expression:"dataForm.dbTableName"}})],1)],1)]),e._v(" "),n("el-form-item",{attrs:{label:"读取API",prop:"api"}},[n("el-input",{attrs:{placeholder:"API"},on:{change:function(t){return e.changeApiInfo(e.dataForm.api,"api")}},model:{value:e.dataForm.api,callback:function(t){e.$set(e.dataForm,"api",t)},expression:"dataForm.api"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"保存API",prop:"saveApi"}},[n("el-input",{attrs:{placeholder:"保存API"},on:{change:function(t){return e.changeApiInfo(e.dataForm.saveApi,"saveApi")}},model:{value:e.dataForm.saveApi,callback:function(t){e.$set(e.dataForm,"saveApi",t)},expression:"dataForm.saveApi"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"更新API",prop:"updateApi"}},[n("el-input",{attrs:{placeholder:"更新API"},on:{change:function(t){return e.changeApiInfo(e.dataForm.updateApi,"updateApi")}},model:{value:e.dataForm.updateApi,callback:function(t){e.$set(e.dataForm,"updateApi",t)},expression:"dataForm.updateApi"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"删除API",prop:"deleteApi"}},[n("el-input",{attrs:{placeholder:"删除API"},on:{change:function(t){return e.changeApiInfo(e.dataForm.deleteApi,"deleteApi")}},model:{value:e.dataForm.deleteApi,callback:function(t){e.$set(e.dataForm,"deleteApi",t)},expression:"dataForm.deleteApi"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"自定义工具栏"}},[n("el-input",{attrs:{placeholder:"工具栏"},on:{change:function(t){return e.changeCustomViewItem(e.customView.toolbarButtonsExtView,"toolbarButtonsExtView")}},model:{value:e.customView.toolbarButtonsExtView,callback:function(t){e.$set(e.customView,"toolbarButtonsExtView",t)},expression:"customView.toolbarButtonsExtView"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"自定义操作栏"}},[n("el-input",{attrs:{placeholder:"操作栏"},on:{change:function(t){return e.changeCustomViewItem(e.customView.operatorButtonsExtView,"operatorButtonsExtView")}},model:{value:e.customView.operatorButtonsExtView,callback:function(t){e.$set(e.customView,"operatorButtonsExtView",t)},expression:"customView.operatorButtonsExtView"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"自定义列表视图"}},[n("el-input",{attrs:{placeholder:"视图列表"},on:{change:function(t){return e.changeCustomViewItem(e.customView.customListView,"customListView")}},model:{value:e.customView.customListView,callback:function(t){e.$set(e.customView,"customListView",t)},expression:"customView.customListView"}})],1)],1),e._v(" "),n("div",{staticClass:"margin-top title"},[e._v("数据获取配置")]),e._v(" "),n("div",{staticClass:"margin-top margin-left row form-list"},[n("span",[e._v("移动端读取数据过滤参数")]),e._v(" "),n("el-input",{staticStyle:{width:"80%"},on:{change:function(t){return e.changeItem(e.tableProp,"mobileQueryListParam")}},model:{value:e.tableProp.mobileQueryListParam,callback:function(t){e.$set(e.tableProp,"mobileQueryListParam",t)},expression:"tableProp.mobileQueryListParam"}})],1)],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"3"==e.activeLeftTab,expression:"activeLeftTab == '3'"}]},[n("el-form",{staticClass:"base-padding",attrs:{"label-width":"90px"}},[n("el-form-item",{attrs:{label:"选择"}},[n("el-checkbox",{on:{change:e.changeFixedData},model:{value:e.fixedData.selected.show,callback:function(t){e.$set(e.fixedData.selected,"show",t)},expression:"fixedData.selected.show"}},[e._v("显示选择")])],1),e._v(" "),n("el-form-item",{attrs:{label:"序号"}},[n("el-checkbox",{on:{change:e.changeFixedData},model:{value:e.fixedData.seq.show,callback:function(t){e.$set(e.fixedData.seq,"show",t)},expression:"fixedData.seq.show"}},[e._v("显示序号")])],1),e._v(" "),n("el-form-item",{attrs:{label:"ID"}},[n("el-checkbox",{on:{change:e.changeFixedData},model:{value:e.fixedData.id.show,callback:function(t){e.$set(e.fixedData.id,"show",t)},expression:"fixedData.id.show"}},[e._v("显示ID")])],1),e._v(" "),n("el-form-item",{attrs:{label:"创建人"}},[n("el-checkbox",{on:{change:e.changeFixedData},model:{value:e.fixedData.creater.show,callback:function(t){e.$set(e.fixedData.creater,"show",t)},expression:"fixedData.creater.show"}},[e._v("显示")]),e._v(" "),n("el-checkbox",{on:{change:e.changeFixedData},model:{value:e.fixedData.creater.query,callback:function(t){e.$set(e.fixedData.creater,"query",t)},expression:"fixedData.creater.query"}},[e._v("可搜索")])],1),e._v(" "),n("el-form-item",{attrs:{label:"创建时间"}},[n("el-checkbox",{on:{change:e.changeFixedData},model:{value:e.fixedData.createdAt.show,callback:function(t){e.$set(e.fixedData.createdAt,"show",t)},expression:"fixedData.createdAt.show"}},[e._v("显示")]),e._v(" "),n("el-checkbox",{on:{change:e.changeFixedData},model:{value:e.fixedData.createdAt.query,callback:function(t){e.$set(e.fixedData.createdAt,"query",t)},expression:"fixedData.createdAt.query"}},[e._v("可搜索")])],1),e._v(" "),n("el-form-item",{attrs:{label:"更新时间"}},[n("el-checkbox",{on:{change:e.changeFixedData},model:{value:e.fixedData.updatedAt.show,callback:function(t){e.$set(e.fixedData.updatedAt,"show",t)},expression:"fixedData.updatedAt.show"}},[e._v("显示")]),e._v(" "),n("el-checkbox",{on:{change:e.changeFixedData},model:{value:e.fixedData.updatedAt.query,callback:function(t){e.$set(e.fixedData.updatedAt,"query",t)},expression:"fixedData.updatedAt.query"}},[e._v("可搜索")])],1)],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"4"==e.activeLeftTab,expression:"activeLeftTab == '4'"}]},[n("el-alert",{attrs:{title:"开启公开访问后，应用外的用户可以通过访问公开地址查看该表单，为你的表单收集数据",type:"success"}}),e._v(" "),n("el-form",{staticClass:"base-padding",attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"是否公开访问",prop:""}},[n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"canPublicShare")}},model:{value:e.tableProp.canPublicShare,callback:function(t){e.$set(e.tableProp,"canPublicShare",t)},expression:"tableProp.canPublicShare"}})],1),e._v(" "),e.tableProp.canPublicShare?n("div",[n("el-form-item",{attrs:{label:"公开查询",prop:""}},[n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"openOpt")}},model:{value:e.tableProp.openOpt.canSearch,callback:function(t){e.$set(e.tableProp.openOpt,"canSearch",t)},expression:"tableProp.openOpt.canSearch"}}),e._v(" "),n("el-tooltip",{attrs:{content:"开启后，用户不能看到所有数据，只能通过查询条件来获得表单数据，适用于成绩查询、订单查询等场景",placement:"top"}},[n("i",{staticClass:"el-icon-warning",staticStyle:{position:"relative",top:"3px"}})])],1),e._v(" "),n("el-form-item",{attrs:{required:"",label:"页面标题",prop:""}},[n("el-input",{staticStyle:{width:"340px"},on:{change:function(t){return e.changeItem(e.tableProp,"openOpt")}},model:{value:e.tableProp.openOpt.openName,callback:function(t){e.$set(e.tableProp.openOpt,"openName",t)},expression:"tableProp.openOpt.openName"}})],1),e._v(" "),n("div",{staticClass:"margin-top row func-switch",staticStyle:{"padding-left":"46px"}},[n("div",{staticClass:"el-form-item__label"},[e._v("\n              可新增\n              "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"openOpt")}},model:{value:e.tableProp.openOpt.canInsert,callback:function(t){e.$set(e.tableProp.openOpt,"canInsert",t)},expression:"tableProp.openOpt.canInsert"}})],1),e._v(" "),n("div",{staticClass:"el-form-item__label"},[e._v("\n              可编辑\n              "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"openOpt")}},model:{value:e.tableProp.openOpt.canEdit,callback:function(t){e.$set(e.tableProp.openOpt,"canEdit",t)},expression:"tableProp.openOpt.canEdit"}})],1),e._v(" "),n("div",{staticClass:"el-form-item__label"},[e._v("\n              可删除\n              "),n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"openOpt")}},model:{value:e.tableProp.openOpt.canDelete,callback:function(t){e.$set(e.tableProp.openOpt,"canDelete",t)},expression:"tableProp.openOpt.canDelete"}})],1)]),e._v(" "),n("el-form-item",{attrs:{label:"非公开字段",prop:""}},[n("el-select",{staticStyle:{width:"340px"},attrs:{filterable:"",placeholder:"请选择",multiple:""},on:{change:function(t){return e.changeItem(e.tableProp,"openOpt")}},model:{value:e.tableProp.openOpt.privateExts,callback:function(t){e.$set(e.tableProp.openOpt,"privateExts",t)},expression:"tableProp.openOpt.privateExts"}},e._l(e.exts,function(t){return-1==e.noOpenList.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1),e._v(" "),n("el-tooltip",{attrs:{content:"选中的字段不会被公开(部分跟系统相关的字段默认不公开)",placement:"top"}},[n("i",{staticClass:"el-icon-warning"})])],1),e._v(" "),n("el-form-item",{attrs:{label:"公开地址",prop:""}},[e.dataForm.tableName?n("div",[n("div",{staticClass:"url-box",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.copyUrl(e.viewUrl+"/#/open-common?tb="+e.dataForm.tableName)}}},[e._v("\n                "+e._s(e.viewUrl+"/#/open-common?tb="+e.dataForm.tableName)+"\n              ")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.copyUrl(e.viewUrl+"/#/open-common?tb="+e.dataForm.tableName)}}},[e._v("复制地址\n              ")])],1):n("div",{staticClass:"url-box"},[e._v("请先保存表单，保存表单后会生成地址")])])],1):e._e()],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"5"==e.activeLeftTab,expression:"activeLeftTab == '5'"}]},[n("el-alert",{attrs:{title:"开启公开填写后，应用外的用户可以通过访问公开地址，为你的表单收集数据，适用于问卷调查等场景",type:"success"}}),e._v(" "),n("el-form",{staticClass:"base-padding",attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"是否公开填写",prop:""}},[n("el-switch",{on:{change:function(t){return e.changeItem(e.tableProp,"canPublicAdd")}},model:{value:e.tableProp.canPublicAdd,callback:function(t){e.$set(e.tableProp,"canPublicAdd",t)},expression:"tableProp.canPublicAdd"}})],1),e._v(" "),n("el-form-item",{attrs:{required:"",label:"页面标题",prop:""}},[n("el-input",{staticStyle:{width:"340px"},on:{change:function(t){return e.changeItem(e.tableProp,"publicAddOpt")}},model:{value:e.tableProp.publicAddOpt.openName,callback:function(t){e.$set(e.tableProp.publicAddOpt,"openName",t)},expression:"tableProp.publicAddOpt.openName"}})],1),e._v(" "),e.tableProp.canPublicAdd?n("el-form-item",{attrs:{label:"隐藏字段",prop:""}},[n("el-select",{staticStyle:{width:"340px"},attrs:{filterable:"",placeholder:"请选择",multiple:""},on:{change:function(t){return e.changeItem(e.tableProp,"publicAddOpt")}},model:{value:e.tableProp.publicAddOpt.privateExts,callback:function(t){e.$set(e.tableProp.publicAddOpt,"privateExts",t)},expression:"tableProp.publicAddOpt.privateExts"}},e._l(e.exts,function(t){return-1==e.noOpenList.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1),e._v(" "),n("el-tooltip",{attrs:{content:"用户无法填写选中的字段",placement:"top"}},[n("i",{staticClass:"el-icon-warning"})])],1):e._e(),e._v(" "),e.tableProp.canPublicAdd?n("el-form-item",{attrs:{label:"公开地址",prop:""}},[e.dataForm.tableName?n("div",[n("div",{staticClass:"url-box",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.copyUrl(e.viewUrl+"/#/open-form?tb="+e.dataForm.tableName)}}},[e._v("\n              "+e._s(e.viewUrl+"/#/open-form?tb="+e.dataForm.tableName)+"\n            ")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.copyUrl(e.viewUrl+"/#/open-form?tb="+e.dataForm.tableName)}}},[e._v("\n              复制地址\n            ")])],1):n("div",{staticClass:"url-box"},[e._v("请先保存表单，保存表单后会生成地址")])]):e._e()],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"6"==e.activeLeftTab,expression:"activeLeftTab == '6'"}]},[n("customBtn",{ref:"customBtn",attrs:{dataForm:e.dataForm,exts:e.exts}})],1)])],1)},staticRenderFns:[]};var g=n("VU/8")(b,y,!1,function(e){n("mhAn")},"data-v-48aeed6a",null);t.default=g.exports},Xejj:function(e,t,n){"use strict";var o=n("mvHQ"),i=n.n(o),a=n("fZjL"),r=n.n(a),l=n("0xDb"),s=n("XLwt"),c=(n("7+uW"),{name:"echart",props:{chart:{type:Object,default:function(){return{}}},id:{type:String,default:function(){return"echart_"+Math.floor(9999999*Math.random())}},option:{type:Object,default:function(){return{}}},height:{type:[String,Number],default:"100%"}},data:function(){return{chartEm:""}},watch:{option:{handler:function(e,t){if(this.chartEm){if(this.contrast(e,t))return!1;this.updateChart()}},deep:!0}},methods:{contrast:function(e,t){var n=this.objKeySort(e),o=this.objKeySort(t);return i()(n)===i()(o)},objKeySort:function(e){for(var t=r()(e).sort(),n={},o=0;o<t.length;o++)n[t[o]]=e[t[o]];return n},updateChart:function(){this.chartEm.clear(),this.chartEm.setOption(this.option)},resizeChart:function(){this.chartEm.resize()}},mounted:function(){var e=this,t=this,n=document.getElementById(this.id);n.style.height=this.height,this.chartEm=s.init(n),this.chartEm.on("click",function(t){e.$emit("clickEvent",t.data)}),setTimeout(function(){t.resizeChart(),e.updateChart()},200),window.addEventListener("resize",Object(l.d)(function(){t.resizeChart()},200)),this.chartEm.on("click",function(e){t.$emit("triggerClick",e)})},created:function(){},beforeDestroy:function(){}}),u={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"echarts_box",attrs:{id:this.id}})},staticRenderFns:[]},d=n("VU/8")(c,u,!1,null,null,null).exports,h=(new Date("2020-05-01"),new Date("2020-03-02"),new Date("2020-04-01"),new Date("2020-01-01"),new Date("2020-02-02"),new Date("2020-03-01"),{components:{charts:d},props:{initParamsProp:{},itemOption:{},isEdit:{}},watch:{},data:function(){return{option:{},initParams:{}}},mounted:function(){this.initParamsProp&&(this.initParams=JSON.parse(i()(this.initParamsProp))),this.getData(this.initParams)},methods:{getData:function(e){var t=this;this.itemOption.robotInfo&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.robotInfo),method:"get",params:e}).then(function(e){var n=e.data;0==n.code&&(t.option=JSON.parse(n.data),t.updataEcharts())})},onCtrDataChange:function(e){this.getData(e)},clickEvent:function(e){if(console.log(e,99),e.detailInfo){var t=e.detailInfo,n=this;this.$goDetail(t.id,t.tableName,function(e){n.$emit("refreshChart",t.tableName)}),console.log(e.detailInfo)}},updataEcharts:function(){var e=this;this.$nextTick(function(){e.$refs.Chart.resizeChart()})}}}),f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"grid-card-dashboard h100"},[t("charts",{ref:"Chart",staticClass:"lineChart",attrs:{option:this.option,height:"calc(100%)"},on:{clickEvent:this.clickEvent}})],1)},staticRenderFns:[]};var p=n("VU/8")(h,f,!1,function(e){n("y05Z")},"data-v-5eaef034",null);t.a=p.exports},Xf8N:function(e,t,n){"use strict";var o={props:{value:{type:String}},watch:{value:{handler:function(e){this.text=e},deep:!0,immediate:!0}},model:{prop:"value",event:"change"},data:function(){return{text:"",show:!1}},methods:{showInput:function(){var e=this;this.show=!0,this.$nextTick(function(){e.$refs.input.focus()})}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"title-box",on:{click:function(t){return e.showInput()}}},[e._v("\r\n        "+e._s(e.text)),n("span",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"10px"}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[n("el-input",{ref:"input",attrs:{placeholder:"请输入"},on:{blur:function(t){e.show=!1},change:function(t){return e.$emit("change",e.text)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("R/IO")},"data-v-a093280c",null);t.a=a.exports},Xojz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{title:"",tableDefine:null,dataId:null,tableName:null,dataForm:{key:""},dataList:[],pageIndex:1,pageSize:1e4,totalPage:0,dataListLoading:!1,dataListSelections:[],addOrUpdateVisible:!1,visible:!1,tableColumn:[],timeRange:null,pickerOptions:{shortcuts:[{text:"本月",onClick:function(e){e.$emit("pick",[new Date,new Date])}},{text:"今年至今",onClick:function(e){var t=new Date,n=new Date((new Date).getFullYear(),0);e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setMonth(n.getMonth()-3),e.$emit("pick",[n,t])}},{text:"最近六个月",onClick:function(e){var t=new Date,n=new Date;n.setMonth(n.getMonth()-6),e.$emit("pick",[n,t])}}]}}},computed:{transactionsByMonth:function(){return this.dataList.reduce(function(e,t){var n=t.createdAt.slice(0,7);return e[n]||(e[n]=[]),e[n].push(t),e},{})}},components:{},activated:function(){},mounted:function(){var e=new Date,t=new Date;t.setMonth(t.getMonth()-3),this.timeRange=[t.Format("yyyy-MM"),e.Format("yyyy-MM")]},methods:{init:function(e,t,n){var o=this;this.tableName=e,this.dataId=t,this.tableDefine=n,this.tableDefine.templateJson.forEach(function(e){e.key==n.tablePropJson.recordUpdateHistoryField&&(o.title=e.name)}),this.getDataList()},getDataList:function(){var e=this;this.visible=!0,this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/common/commondatahistory/list"),method:"post",data:this.$http.adornParams({page:this.pageIndex,limit:this.pageSize,tableName:this.tableName,dataId:this.dataId,timeRange:this.timeRange})}).then(function(t){var n=t.data;e.dataListLoading=!1,n&&0===n.code&&null!=n.page?(e.dataList=n.page.list,e.totalPage=n.page.totalCount):(e.dataList=[],e.totalPage=0),e.tableColumn=[];var o=e.tableDefine.templateJson;e.dataList.forEach(function(t){var n=JSON.parse(t.diffData),i=function(i){t.new=n[i].new,t.diff=n[i].new-n[i].old,1==t.effectType?t.effectEvent="手动修改":2==t.effectType&&(t.effectEvent=t.effectRobotName),o.forEach(function(t){if(i==t.key){var n={field:i,title:t.name,resizable:!0},o=!1;e.tableColumn.forEach(function(e){e.field==i&&(o=!0)}),o||e.tableColumn.push(n)}})};for(var a in n)i(a)}),console.log(e.tableColumn,99982)})},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},selectionChangeHandle:function(e){this.dataListSelections=e}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"90%",title:"修改历史",height:"90%",resize:"",remember:""},on:{hide:function(t){return e.$emit("hide")}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"transactions"},[n("div",{staticClass:"row"},[n("h3",[e._v(e._s(e.title)+"修改流水")]),e._v(" "),n("el-date-picker",{staticStyle:{"margin-left":"100px"},attrs:{type:"monthrange",align:"right",clearable:!1,"unlink-panels":"","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份","value-format":"yyyy-MM","picker-options":e.pickerOptions},on:{change:e.getDataList},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1),e._v(" "),e._l(e.transactionsByMonth,function(t,o){return n("div",{key:o},[n("h2",[e._v(e._s(o))]),e._v(" "),n("table",[n("thead",[n("tr",[n("th",[e._v("变化值")]),e._v(" "),n("th",[e._v("变化后值")]),e._v(" "),n("th",[e._v("修改事件")]),e._v(" "),n("th",[e._v("修改时间")]),e._v(" "),n("th",[e._v("修改人")])])]),e._v(" "),n("tbody",e._l(t,function(t){return n("tr",{key:t.id},[t.diff>0?n("td",{staticStyle:{color:"#9C0006"}},[e._v(e._s(t.diff))]):t.diff<0?n("td",{staticStyle:{color:"#18804e"}},[e._v(e._s(t.diff))]):n("td",[e._v(e._s(t.diff))]),e._v(" "),n("td",[e._v(e._s(t.new))]),e._v(" "),n("td",[e._v(e._s(t.effectEvent))]),e._v(" "),n("td",[e._v(e._s(t.createdAt))]),e._v(" "),n("td",[e._v(e._s(t.effectUserName))])])}),0)])])})],2)])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("XyaH")},"data-v-389e739c",null);t.default=a.exports},XyaH:function(e,t){},YBOz:function(e,t,n){"use strict";var o=n("Jc5F"),i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["list"==e.btnStyle?n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},e._l(e.btns,function(t){return n("div",{key:t.id,staticStyle:{width:"100%"}},["alway"==t.openCondition||e.btnShowMap[t.id]?n("div",{staticClass:"operate-list",on:{click:function(n){return e.customBtn(t)}}},[n("i",{staticClass:"el-icon-connection"}),e._v(" "),n("span",[e._v(" "+e._s(t.name)+" ")])]):n("div",{staticClass:"operate-disable"},[n("i",{staticClass:"el-icon-lock"}),e._v(" "),n("span",[e._v(" "+e._s(t.name)+" ")])])])}),0):n("div",{staticClass:"row"},e._l(e.btns,function(t){return n("div",["alway"==t.openCondition||e.btnShowMap[t.id]?n("el-button",{key:t.id,staticClass:"custom-btn",style:"background-color: "+t.color+";border-color: "+t.color+";",attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.customBtnTable(t)}}},[e._v("\n      "+e._s(t.name)+"\n    ")]):n("el-button",{key:t.id,staticClass:"custom-btn",staticStyle:{background:"#999999","border-color":"#999999"},attrs:{type:"info",disabled:"",size:"mini"},on:{click:function(n){return e.customBtnTable(t)}}},[e._v("\n        "+e._s(t.name)+"\n      ")])],1)}),0)])},staticRenderFns:[]};var a=function(e){n("zrCE")},r=n("VU/8")(o.a,i,!1,a,"data-v-245be84a",null);t.a=r.exports},YXyf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-duanxin",use:"icon-duanxin-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-duanxin"><defs><style type="text/css"></style></defs><path d="M958.359001 286.941198c0-64.308655-52.132334-116.440989-116.440989-116.440989L181.453678 170.500209c-64.308655 0-116.440989 52.132334-116.440989 116.440989l0 448.63995c0 64.308655 52.132334 116.440989 116.440989 116.440989l660.464333 0c64.308655 0 116.440989-52.132334 116.440989-116.440989L958.359001 286.941198zM843.814198 212.455763c12.059664 0 23.444968 3.465938 33.519418 8.598842L530.749016 549.347606c-1.227967 1.161453-1.156336 0.916882-1.752924 1.868557-1.426489 1.067308-6.055926 3.922333-15.449877 3.922333-9.397021 0-14.025435-2.75474-15.4509-3.818979-0.676405-1.077541-0.662079-0.716314-1.995447-1.940189l-353.122503-324.412624c11.609409-7.557116 25.445532-12.509918 40.300868-12.509918L843.814198 212.456786zM916.403446 736.484727c0 40.857547-31.730679 73.582879-72.589248 73.582879L183.27721 810.067606c-40.85857 0-75.28566-32.725332-75.28566-73.582879L107.99155 287.657512c0-10.630105 2.860141-20.735253 6.909363-29.882588l351.486236 322.096882c4.91187 5.302773 19.479657 17.676591 47.009663 17.676591 27.799136 0 42.303478-12.618389 47.076178-17.830087l346.800517-328.899822c6.251378 10.860349 9.129938 23.433712 9.129938 36.838L916.403446 736.484727z" p-id="4017" /></symbol>'});r.a.add(l);t.default=l},YaEn:function(e,t,n){"use strict";var o=n("Dd8w"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("7+uW"),s=n("/ocq"),c=n("Rk3H"),u=n("E4LH"),d=n("0xDb"),h=n("rYw1"),f=n("8Qdk");l.default.use(s.a);var p=n("0tMT"),m=[{path:"/common",component:p("modules/common/common"),name:"common",meta:{title:"通用表",isTab:!0}},{path:"/singleCommonView",component:p("modules/singlePage/singleCommonView"),name:"singleCommonView"},{path:"/home",component:p("common/home"),name:"home",meta:{title:"首页",isTab:!1}},{path:"/homeNavi",component:p("common/homeNavi"),name:"homeNavi",meta:{title:"首页",isTab:!0}},{path:"/chat",component:p("modules/chatGpt/chat"),name:"chat"},{path:"/chatBoss",component:p("modules/chatGpt/chatBossZhiPing"),name:"chatBoss"},{path:"/open-common",component:p("modules/common/open-common-view/index"),name:"open-common-view"},{path:"/open-form",component:p("modules/common/open-form-view/index"),name:"open-form-view"},{path:"/open-detail",component:p("modules/common/open-detail-view/index"),name:"open-detail-view"},{path:"/404",component:p("common/404"),name:"404",meta:{title:"404未找到"}},{path:"/login",component:p("common/login"),name:"login",meta:{title:"登录"}},{path:"/policy",component:p("common/policy"),name:"policy",meta:{title:"政策"}},{path:"/register",component:p("common/register"),name:"register",meta:{title:"注册"}},{path:"/ForgotPwd",component:p("common/ForgotPwd"),name:"ForgotPwd",meta:{title:"忘记密码"}},{path:"/createCompany",component:p("common/createCompany"),name:"createCompany",meta:{title:"创建组织"}},{path:"/waitreview",component:p("common/waitreview"),name:"waitreview",meta:{title:"等待审核"}},{path:"/applist",component:p("common/applist"),name:"applist",meta:{title:"应用列表"}},{path:"/addAppView",component:p("common/addAppView"),name:"addAppView",meta:{title:"增加应用"}},{path:"/screen-common@common_table_0_app_store",component:p("modules/common/appstore/index"),name:"screen-common@common_table_0_app_store"},{path:"/pay",component:p("modules/pay/PayBuyMoCoin"),name:"pay"},{path:"/VideoQuChongView",component:p("douyin/VideoQuChongView"),name:"VideoQuChongView"},{path:"/XuanPin",component:p("douyin/XuanPin"),name:"XuanPin"}],v={path:"/",component:p("main"),name:"main",redirect:{name:"home"},meta:{title:"主入口整体布局"},children:[{path:"/homeDouyindianshang",component:p("common/homeDouyindianshang"),name:"homeDouyindianshang",meta:{title:"首页"}},{path:"/homeDouyintuangou",component:p("common/homeDouyintuangou"),name:"homeDouyintuangou",meta:{title:"首页"}},{path:"/homeShipinghao",component:p("common/homeShipinghao"),name:"homeShipinghao",meta:{title:"首页"}},{path:"/homeKuaishou",component:p("common/homeKuaishou"),name:"homeKuaishou",meta:{title:"首页"}},{path:"/homeKuaishouDianshang",component:p("common/homeKuaishouDianshang"),name:"homeKuaishouDianshang",meta:{title:"首页"}},{path:"/homeDouyindianshangAIAudio",component:p("common/homeDouyindianshangAIAudio"),name:"homeDouyindianshangAIAudio",meta:{title:"首页"}},{path:"/homeDouyintuangouAIAudio",component:p("common/homeDouyintuangouAIAudio"),name:"homeDouyintuangouAIAudio",meta:{title:"首页"}},{path:"/theme",component:p("common/theme"),name:"theme",meta:{title:"主题"}},{path:"/oss-oss",component:p("modules/oss/oss"),name:"oss-oss",meta:{title:"文件",isTab:!0}},{path:"/oss-ossmold",component:p("modules/oss/ossmold"),name:"oss-ossmold",meta:{title:"作业文件管理",isTab:!0}},{path:"/sys-menu",component:p("modules/sys/menu"),name:"sys-menu",meta:{title:"菜单管理",isTab:!0}},{path:"/sys-sysext",component:p("modules/sys/sysext"),name:"sys-ext",meta:{title:"扩展信息",isTab:!0}},{path:"/sys-sysext2",component:p("modules/sys/sysext"),name:"sys-ext2",meta:{title:"扩展信息2",isTab:!0}},{path:"/common-chart-config",component:p("modules/common/chart-config"),name:"common-chart-config",meta:{title:"图表配置",isTab:!0}},{path:"/common-define",component:p("modules/common/common-define"),name:"common-define",meta:{title:"表单设计",isTab:!0}},{path:"/common-sys-config",component:p("modules/common/common-sys-config"),name:"common-sys-config",meta:{title:"全局参数",isTab:!0}},{path:"/test",component:p("modules/newCommon/index"),name:"test",meta:{title:"新表单设计",isTab:!0}},{path:"/sys-role",component:p("modules/sys/appRole"),name:"sys-role",meta:{title:"应用权限管理",isTab:!0}},{path:"/process-list",component:p("modules/dataProcess/processList"),name:"process-list",meta:{title:"机器人",isTab:!0}},{path:"/home-list",component:p("common/homeList"),name:"home-list",meta:{title:"门户设计",isTab:!0}},{path:"/iviews",component:p("common/iviews/index"),name:"iviews",meta:{title:"大屏设计",isTab:!0}},{path:"/flowtest",component:p("modules/common/common-define-add-or-update/flowComponent"),name:"flowtest",meta:{title:"测试",isTab:!0}},{path:"/blockly",component:p("modules/dataProcess/blockly"),name:"blockly",meta:{title:"测试",isTab:!0}},{path:"/sysnotify",component:p("modules/sys/sysnotify"),name:"sysnotify",meta:{title:"通知消息",isTab:!0}},{path:"/sysnotifyDetail",component:p("modules/sys/sysnotifyDetail"),name:"sysnotifyDetail",meta:{title:"通知详细",isTab:!0}},{path:"/sendSysnotify",component:p("modules/sys/sendSysnotify"),name:"sendSysnotify",meta:{title:"广播通知",isTab:!0}},{path:"/need",component:p("main-need"),name:"need",meta:{title:"系统问题及需求",isTab:!0}},{path:"/AutoProductWindow",component:p("douyin/AutoProductWindow"),name:"AutoProductWindow",meta:{title:"自动商品弹窗",isTab:!0}},{path:"/AutoProductWindow2",component:p("douyin/AutoProductWindow2"),name:"AutoProductWindow2",meta:{title:"自动商品弹窗",isTab:!0}},{path:"/RandomAudio",component:p("douyin/RandomAudio"),name:"RandomAudio",meta:{title:"随机音频播放",isTab:!0}},{path:"/RandomAudio2",component:p("douyin/RandomAudio2"),name:"RandomAudio2",meta:{title:"随机音频New",isTab:!0}},{path:"/AutoHuakuaiCheck",component:p("douyin/AutoHuakuaiCheck"),name:"AutoHuakuaiCheck",meta:{title:"自动滑块检测",isTab:!0}},{path:"/AutoReplay",component:p("douyin/AutoReplay"),name:"AutoReplay",meta:{title:"自动回复",isTab:!0}},{path:"/AutoYouhuiquan",component:p("douyin/AutoYouhuiquan"),name:"AutoYouhuiquan",meta:{title:"自动发放优惠券",isTab:!0}},{path:"/SetTimeOffLine",component:p("douyin/SetTimeOffLine"),name:"SetTimeOffLine",meta:{title:"定时上下播",isTab:!0}},{path:"/AutoMiaosha",component:p("douyin/AutoMiaosha"),name:"AutoMiaosha",meta:{title:"自动秒杀",isTab:!0}},{path:"/LimitSpeed",component:p("douyin/LimitSpeed"),name:"LimitSpeed",meta:{title:"限速卡屏",isTab:!0}},{path:"/AutoProductWindowDianshang",component:p("douyinDianshang/AutoProductWindowDianshang"),name:"AutoProductWindowDianshang",meta:{title:"自动商品弹窗",isTab:!0}},{path:"/AutoReplayDianshang",component:p("douyinDianshang/AutoReplayDianshang"),name:"AutoReplayDianshang",meta:{title:"自动回复",isTab:!0}},{path:"/SetTimeOffLineDianshang",component:p("douyinDianshang/SetTimeOffLineDianshang"),name:"SetTimeOffLineDianshang",meta:{title:"定时上下播",isTab:!0}},{path:"/Darenquan",component:p("douyinDianshang/Darenquan"),name:"Darenquan",meta:{title:"达人券",isTab:!0}},{path:"/AutoAddLink",component:p("douyinDianshang/AutoAddLink"),name:"AutoAddLink",meta:{title:"自动补链接",isTab:!0}},{path:"/OrderStatistic",component:p("douyinDianshang/OrderStatistic"),name:"OrderStatistic",meta:{title:"订单统计",isTab:!1}},{path:"/AITextToVoice",component:p("douyin/AITextToVoice"),name:"AITextToVoice",meta:{title:"AI自动语音播报",isTab:!0}},{path:"/AutoTextChangkong",component:p("douyin/AutoTextChangkong"),name:"AutoTextChangkong",meta:{title:"自动文字场控",isTab:!0}},{path:"/AutoTextChangkongdianshang",component:p("douyin/AutoTextChangkong"),name:"AutoTextChangkongdianshang",meta:{title:"自动文字场控",isTab:!0}},{path:"/RulerBreakReminder",component:p("douyin/RulerBreakReminder"),name:"RulerBreakReminder",meta:{title:"违规提醒",isTab:!0}},{path:"/AutoFudai",component:p("douyin/AutoFudai"),name:"AutoFudai",meta:{title:"自动发福袋",isTab:!0}},{path:"/AIAudio",component:p("douyin/AIAudio"),name:"AIAudio",meta:{title:"AI音频",isTab:!1}},{path:"/AIAudioMobile",component:p("douyin/AIAudioMobile"),name:"AIAudioMobile",meta:{title:"AI音频",isTab:!1}},{path:"/AIAudioReplay",component:p("douyin/AIAudioReplay"),name:"AIAudioReplay",meta:{title:"自动回复",isTab:!1}},{path:"/PushObs",component:p("douyin/PushObs"),name:"PushObs",meta:{title:"OBS推流",isTab:!1}},{path:"/NoUpdate",component:p("douyin/NoUpdate"),name:"NoUpdate",meta:{title:"阻止更新启动伴侣",isTab:!1}},{path:"/zhibobaobiao",component:p("douyin/zhibobaobiao"),name:"zhibobaobiao",meta:{title:"直播保镖",isTab:!1}},{path:"/ChangeFace",component:p("douyin/ChangeFace"),name:"ChangeFace",meta:{title:"换脸",isTab:!1}},{path:"/VideoQuChong",component:p("douyin/VideoQuChong"),name:"VideoQuChong",meta:{title:"视频去重",isTab:!1}},{path:"/DigitPerson",component:p("douyin/DigitPerson"),name:"DigitPerson",meta:{title:"数字人主播",isTab:!1}},{path:"/AIAudioPC",component:p("douyin/AIAudioPC"),name:"AIAudioPC",meta:{title:"AI音频",isTab:!1}},{path:"/AIAudioPCReplayKs",component:p("douyin/AIAudioPCReplayKs"),name:"AIAudioPCReplayKs",meta:{title:"AI音频",isTab:!1}},{path:"/test",component:p("douyin/test"),name:"test",meta:{title:"测试",isTab:!1}}],beforeEnter:function(e,t,n){var o=l.default.cookie.get("token");o&&/\S/.test(o)||(Object(d.a)(),n({name:"login"})),n()}},b=new s.a({mode:"hash",scrollBehavior:function(){return{y:0}},isAddDynamicMenuRoutes:!1,routes:m.concat(v)});b.beforeEach(function(e,t,n){b.options.isAddDynamicMenuRoutes||"global"===function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var o=[];for(var i=0;i<n.length;i++){if(t.path===n[i].path)return"global";n[i].children&&n[i].children.length>=1&&(o=o.concat(n[i].children))}return o.length>=1?e(t,o):"main"}(e,m)?n():Object(c.a)({url:c.a.adornUrl("/sys/getAppInfo"),method:"post"}).then(function(t){var o=t.data;if(o&&0===o.code){localStorage.setItem("allApp",r()(o.apps));var a=null;null!=localStorage.getItem("app")&&"undefined"!=localStorage.getItem("app")&&(a=JSON.parse(localStorage.getItem("app")));var l=!1,s=-1;null!=a&&o.apps.forEach(function(e,t){e.id==a.id&&(l=!0,s=t)}),0==l?localStorage.setItem("app",r()(o.apps[0])):localStorage.setItem("app",r()(o.apps[s])),0==o.apps.length&&(console.log("no app!"),b.push({name:"addAppView"}))}Object(c.a)({url:c.a.adornUrl("/sys/menu/nav"),method:"get",params:c.a.adornParams({appId:JSON.parse(localStorage.getItem("app")).appId})}).then(function(t){var o=t.data;o&&0===o.code?(!function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var o=[];for(var i=0;i<t.length;i++)if(t[i].list&&t[i].list.length>=1)o=o.concat(t[i].list);else if(t[i].url&&/\S/.test(t[i].url)){t[i].url=t[i].url.replace(/^\//,"");var a={path:t[i].url.replace("/","-"),component:null,name:t[i].url.replace("/","-"),meta:{menuId:t[i].menuId,title:t[i].name,isDynamic:!0,isTab:!0,iframeUrl:""}};if(4==t[i].type)a.meta.iviewUrl=t[i].url,a.component=f.default;else if(Object(u.d)(t[i].url))a.path="i-"+t[i].menuId,a.name="i-"+t[i].menuId,a.meta.iframeUrl=t[i].url;else if(3==t[i].type)a.component=h.default;else try{var l=t[i].url.split("@")[0];a.component=p("modules/"+l)||null}catch(e){}if(n.push(a),1==t[i].type&&-1!=t[i].url.indexOf("?")){var s=t[i].url.replace("/","-").split("?")[0],c={path:s,component:null,name:s,meta:{menuId:t[i].menuId,title:t[i].name,isDynamic:!0,isTab:!0,iframeUrl:""}},d=t[i].url.split("@")[0];c.component=p("modules/"+d)||null,n.push(c)}}o.length>=1?e(o,n):(v.name="main-dynamic",v.children=n,b.addRoutes([v,{path:"*",redirect:{name:"404"}}]),sessionStorage.setItem("dynamicMenuRoutes",r()(v.children||"[]")),console.log("\n"),console.log("%c!<-------------------- 动态(菜单)路由 s --------------------\x3e","color:blue"),console.log(v.children),console.log("%c!<-------------------- 动态(菜单)路由 e --------------------\x3e","color:blue"))}(o.menuList),b.options.isAddDynamicMenuRoutes=!0,sessionStorage.setItem("menuList",r()(o.menuList||"[]")),sessionStorage.setItem("permissions",r()(o.permissions||"[]")),n(i()({},e,{replace:!0}))):(sessionStorage.setItem("menuList","[]"),sessionStorage.setItem("permissions","[]"),n())}).catch(function(e){console.log("%c"+e+" 请求菜单列表和权限失败，跳转至登录页！！","color:blue"),b.push({name:"login"})})})}),t.a=b},YiW1:function(e,t,n){e.exports=n.p+"static/fonts/element-icons.732389d.ttf"},YjV2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={components:{addOrUpdataForm:n("T5yT").a},props:{formMap:{},variableMap:{}},data:function(){return{baseData:{tableName:"",doNotJumpToDetail:!1}}},methods:{init:function(e){this.baseData=e,this.table=this.formMap[this.baseData.tableName],this.$refs.addOrUpdataForm.init(this.table,this.baseData.rules)},save:function(){var e=this.$refs.addOrUpdataForm.getSaveData();this.baseData.rules=e,this.$emit("saveNode",this.baseData)},fresh:function(){this.table=this.formMap[this.baseData.tableName],this.$refs.addOrUpdataForm.init(this.table)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column h100"},["未选择"==e.baseData.tableName?n("div",{staticClass:"text-center row-title",staticStyle:{"padding-top":"20px","font-size":"14px"}},[e._v("\r\n      请在块中插入表单变量\r\n    ")]):n("div",[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("完成后不跳转到查看页面（默认为跳到查看页面）")]),e._v(" "),n("el-switch",{model:{value:e.baseData.doNotJumpToDetail,callback:function(t){e.$set(e.baseData,"doNotJumpToDetail",t)},expression:"baseData.doNotJumpToDetail"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("创建规则")]),e._v(" "),n("addOrUpdataForm",{ref:"addOrUpdataForm",attrs:{editMode:"",modelData:e.baseData,formMap:e.formMap,variableMap:e.variableMap}})],1)])])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("eBdc")},"data-v-407e6c98",null);t.default=a.exports},Z5jg:function(e,t,n){"use strict";var o=n("7tmk"),i=n.n(o),a=n("MT6L"),r=n.n(a),l=n("BYJN"),s=n.n(l),c=["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"],u=["mp4","avi"],d=["xlsx","xls"],h=["doc","docx"];function f(e){if(!e)return"";var t=e.lastIndexOf(".");return e.substring(t+1)}function p(e){var t=f(e);return-1!=u.indexOf(t)?"video":-1!=c.indexOf(t)?"picture":-1!=d.indexOf(t)||-1!=h.indexOf(t)?"office":"file"}var m={props:{modelDate:{},processMap:{},isView:{type:Boolean,default:!1}},computed:{},data:function(){return{}},methods:{getFileType:function(e){return p(e)},getFileIcon:function(e){return n=f(t=e),-1!=u.indexOf(n)?t+"?x-oss-process=video/snapshot,t_0,f_jpg,w_200,h_0,m_fast,ar_auto":-1!=c.indexOf(n)?t+"?x-oss-process=image/resize,w_200,m_lfit/format,webp/quality,q_30":-1!=d.indexOf(n)?i.a:-1!=h.indexOf(n)?r.a:s.a;var t,n},endsWithXLSX:function(e,t){var n=e.length,o=t.length;return n>=o&&e.slice(-o)===t},open:function(e){"office"==p(e.url)?window.open("http://view.officeapps.live.com/op/view.aspx?src="+e.url):window.open(e.url)},handlePreviewFile:function(e){if(e){var t=e.url||e.response.url;if(console.log(t,t.endsWith(".xlsx")||t.endsWith(".xls")||t.endsWith(".doc")||t.endsWith(".docx")||t.endsWith(".pdf"),9909099912312312),t.endsWith(".xlsx")||t.endsWith(".xls")||t.endsWith(".doc")||t.endsWith(".docx")||t.endsWith(".pdf"))window.open("http://view.officeapps.live.com/op/view.aspx?src="+t);else{var n=document.createElement("a");n.style.display="none",n.href=t,n.target="_blank",n.setAttribute("download",e.name),document.body.appendChild(n),n.click(),document.body.removeChild(n)}}}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w100",staticStyle:{display:"flex","flex-wrap":"wrap"}},[e.modelDate&&Array.isArray(e.modelDate)?e._l(e.modelDate,function(t,o){return n("div",{staticClass:"upload-box column"},[n("div",{staticClass:"upload-file-item col column",on:{click:function(n){return n.stopPropagation(),e.open(t)}}},[n("div",{staticClass:"col w100"},["file"==e.getFileType(t.url)?n("div",{staticClass:"h100",staticStyle:{"align-items":"center",display:"flex",flex:"1","justify-content":"center"}},[n("img",{staticStyle:{height:"40px"},attrs:{src:e.getFileIcon(t.url),alt:""}})]):n("img",{staticStyle:{width:"100%",height:"100%","object-fit":"cover"},attrs:{src:e.getFileIcon(t.url),alt:""}})]),e._v(" "),"file"==e.getFileType(t.url)?n("div",{staticClass:"ellipsis w100",staticStyle:{"background-color":"#f5f5f5","text-align":"center",padding:"3px","font-size":"12px","line-height":"12px",height:"20px"}},[e._v("\n          "+e._s(t.name)+"\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"upload-file-btn column"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"}),e._v(" "),n("i",{staticClass:"el-icon-download",on:{click:function(n){return n.stopPropagation(),e.handlePreviewFile(t)}}}),e._v(" "),e.isView?e._e():n("i",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"6px"},on:{click:function(n){return n.stopPropagation(),e.$emit("delete",t,o)}}})]),e._v(" "),n("div",{staticClass:"col"}),e._v(" "),n("div",{staticClass:"ellipsis w100",staticStyle:{"font-size":"14px"}},[e._v("\n            "+e._s(t.name)+"\n          ")])])]),e._v(" "),n("div",[e.processMap&&e.processMap[t.uid]>-1&&e.processMap[t.uid]<100?n("el-progress",{attrs:{type:"line","stroke-width":2,percentage:e.processMap[t.uid]}}):e._e()],1)])}):e._e()],2)},staticRenderFns:[]};var b=n("VU/8")(m,v,!1,function(e){n("UMWY")},"data-v-3dc02f6a",null);t.a=b.exports},ZEmB:function(e,t){},ZTUE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("Xxa5"),s=n.n(l),c=n("exGp"),u=n.n(c),d=n("sCck"),h=n("16XU"),f=n("5xRT"),p=n("Xf8N"),m=n("xstH"),v=n("8skB"),b=n("TN+i"),y=n("9uud"),g=n("0xDb"),w={formId:"",symbol:"",value:""},_={props:{exts:{default:[]}},components:{selectStaff:m.a,clickInput:p.a,selectForm:v.a,rules:b.a,customFromItem:y.a},watch:{exts:{handler:function(e){var t=this;this.extsMap={},e.forEach(function(e){t.extsMap[e.key]=e})},deep:!0,immediate:!0}},data:function(){return{extsMap:{},orList:[],noshowlist:Object(g.p)(),symbolEnum:Object(g.m)("symbolEnum")}},methods:{getShowSymbol:function(e,t,n,o){if(!e||!this.extsMap||!this.extsMap[e])return!1;var i=Object(g.q)(this.extsMap[e].type,t);return-1==i.showList.indexOf(this.orList[n][o].symbol)&&(this.orList[n][o].symbol=""),i.re},deleteItem:function(e,t){this.orList[e].splice(t,1),0==this.orList[e].length&&this.orList.splice(e,1)},save:function(){for(var e in this.orList)for(var t in this.orList[e]){var n=this.orList[e][t];if(!n.formId)return this.$message.error("关联表单字段不能为空"),!1;if(!n.symbol)return this.$message.error("判断符不能为空"),!1}return this.orList},init:function(e){e?this.$set(this,"orList",e):(this.$set(this,"orList",[]),this.orList.push([Object(g.e)(w)]))},addItem:function(e,t){e?this.orList[t].push(Object(g.e)(w)):this.orList.push([Object(g.e)(w)])}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h100"},[e._l(e.orList,function(t,o){return n("div",{key:o},[0!=o?n("div",{staticStyle:{padding:"14px 20px","font-weight":"bold"}},[e._v("\n            或\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"or-box"},[e._l(t,function(t,i){return n("div",{key:"or"+i,staticStyle:{"padding-bottom":"5px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[n("el-select",{attrs:{placeholder:"关联表单字段"},model:{value:t.formId,callback:function(n){e.$set(t,"formId",n)},expression:"item.formId"}},e._l(e.exts,function(t){return-1==e.noshowlist.indexOf(e.extsMap[t.key].type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[n("el-select",{attrs:{placeholder:"判断符"},model:{value:t.symbol,callback:function(n){e.$set(t,"symbol",n)},expression:"item.symbol"}},e._l(e.symbolEnum,function(a){return e.getShowSymbol(t.formId,a.value,o,i)?n("el-option",{key:a.value,attrs:{label:a.label,value:a.value}}):e._e()}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:12}},[n("customFromItem",{attrs:{isRange:"belong"==t.symbol||"notBelong"==t.symbol,symbol:t.symbol,exts:e.extsMap[t.formId]?e.extsMap[t.formId]:null},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(o,i)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)}),e._v(" "),n("el-button",{on:{click:function(t){return e.addItem(!0,o)}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 且条件")])],2)])}),e._v(" "),n("div",{staticStyle:{padding:"10px 20px"}},[n("el-button",{on:{click:function(t){return e.addItem(!1)}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 或条件")])],1)],2)},staticRenderFns:[]};var k=n("VU/8")(_,C,!1,function(e){n("M/w1")},"data-v-0ba77268",null).exports,x=n("BUU0"),S=n("ULGN"),T=n("SL31"),E=(n("Rk3H"),n("yDPf")),O=n("9B1S"),D={components:{extItem:f.default,commonLayout:x.a,leftbox:O.default,richtextDialog:T.default,titleEdit:S.a,dataFilterSingleTable:k,robotEditDialog:h.default,bi:E.default,sqlTableWin:d.default},data:function(){return{canControWidget:["timeController","userController","dataTable","tableController"],weight:[{value:"300",label:"300"},{value:"400",label:"400"},{value:"500",label:"500"},{value:"600",label:"600"}],timeList:["dateTime"],numList:["float","integer"],seriesTypeList:[{label:"折线图",value:"line"},{label:"柱状图",value:"bar"},{label:"饼图",value:"pie"},{label:"甘特图",value:"gant"}],visible:!1,selectItem:null,items:[],commonList:[],commonSelect:[],filterView:!1,templateMap:{},rt:{name:""},robotshow:!1,robotKey:"",imgUpload:!1,predefineColors:g.f}},methods:{selectSqlTable:function(){this.$refs.sqlTableWin.init()},setRobot:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"指标卡机器人配置";this.robotshow=!0,this.robotKey=e,this.$nextTick(function(){t.$refs.robotEdit.init(n,t.selectItem[e]?t.selectItem[e]:null,3,{name:n},null)})},saveRobot:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.selectItem[t.robotKey]=e.robotId,t.robotshow=!1;case 2:case"end":return n.stop()}},n,t)}))()},saveFilter:function(){var e=this.$refs.filter.save();e&&(this.selectItem.filter=r()(e),this.filterView=!1)},setFilter:function(){var e=this;if(!this.selectItem.tableName)return this.$message.error("请选择表单"),!1;this.filterView=!0,this.$nextTick(function(){e.$refs.filter.init(e.selectItem.filter?JSON.parse(e.selectItem.filter):null)})},changeTableClear:function(e){var t=this;e.forEach(function(e){t.$set(t.selectItem,e,"")})},editTitle:function(){this.$refs.titleEdit.editTitle()},richtextSave:function(e){this.$set(this.selectItem,"richtext",e)},richtextDialogEdit:function(){this.$refs.richtextDialog.init(this.selectItem.richtext)},changeTable:function(e){if(!e)return this.commonSelect=[],!1;this.commonSelect=this.templateMap[e]},deleteItem:function(e,t){var n=this;e===this.selectItem&&(this.selectItem=null),this.$nextTick(function(){n.items.splice(t,1)})},select:function(e){this.selectItem=e,this.changeTable(this.selectItem?this.selectItem.tableName:"")},addItem:function(e){var t=this,n=Object(g.e)(this.items),o={id:Object(g.x)(6),x:0,y:0,w:12,h:14,come:"",seriesType:"",sqlTableName:"",itemType:"charts",X:"",Y:"",startTime:"",endTime:"",taskName:""};this.canControWidget.indexOf(e.itemType)>-1&&(o.affectBlock=[]),"customView"==e.itemType&&(o.customViewPath="");var a=0;for(var r in this.items.forEach(function(e){e.y>a&&(a=e.y,console.log(a))}),o.y=a+1,i()(o,e),n.push(o),n)n[r].i=r+"";this.items=n,this.$refs.commonLayout.active(this.items[this.items.length-1]),setTimeout(function(){t.$refs.commonLayout.goScrollBottom()},250)},init:function(e){var t=this;e&&(this.rt=Object(g.e)(e)),this.visible=!0,this.selectItem=null,this.commonSelect=[],e&&(this.items=this.rt.define),this.$http({url:this.$http.adornUrl("/common/commondefine/list"),method:"post",data:this.$http.adornParams({page:1,limit:999,appId:JSON.parse(localStorage.getItem("app")).appId})}).then(function(e){var n=e.data;if(n&&0===n.code&&n.page){t.commonList=n.page.list;var o=Object(g.p)().concat(["selectStaff","richText","relateTable","multipleRelateTable","selectInterface","selectinterfaceTree","childrenTable"]);t.commonList.forEach(function(e){t.templateMap[e.tableName]=e.templateJson.filter(function(e){return-1==o.indexOf(e.type)})})}})},dataFormSubmit:function(){var e=this,t=this.rt&&this.rt.id?"update":"save";Object(g.e)(this.items);this.$http({url:this.$http.adornUrl("/common/commondashboarddefine/"+t),method:"post",data:this.$http.adornData({define:r()(this.items),id:this.rt&&this.rt.id?this.rt.id:"",name:this.rt.name})}).then(function(t){var n=t.data;n&&0===n.code&&(e.$message({message:"操作成功",type:"success",duration:1500}),e.closeWindow())})},closeWindow:function(){this.$emit("close"),this.visible=!1}}},I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("vxe-modal",{staticClass:"base",attrs:{width:"100%",height:"100%",resize:"",title:"首页设计"},on:{close:e.closeWindow},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[e._v("\n      "+e._s(e.rt.name)+"\n      "),n("el-button",{staticStyle:{padding:"0 0 0 10px","font-size":"16px"},attrs:{type:"text",title:"编辑"},on:{click:e.editTitle}},[n("i",{staticClass:"el-icon-edit"})]),e._v(" "),n("div",{staticClass:"col text-center"}),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},on:{click:e.closeWindow}},[e._v("取消")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("保存")])],1)]},proxy:!0}],null,!1,3398941234),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"row h100"},[n("leftbox",{on:{addItem:e.addItem}}),e._v(" "),n("div",{staticClass:"col",staticStyle:{background:"#f5f5f5"}},[n("commonLayout",{ref:"commonLayout",attrs:{list:e.items,isEdit:!0},on:{select:e.select,delete:e.deleteItem}})],1),e._v(" "),n("div",{staticClass:"base-padding right-box",staticStyle:{"flex-wrap":"wrap"}},[e.selectItem?e._e():n("div",[n("el-alert",{attrs:{title:"点击左方图表进行选择",type:"success",center:""}})],1),e._v(" "),e.selectItem&&"bi"==e.selectItem.itemType?n("bi",{model:{value:e.selectItem,callback:function(t){e.selectItem=t},expression:"selectItem"}}):e._e(),e._v(" "),e.selectItem?n("el-form",[n("el-form-item",{attrs:{label:"标题",required:""}},[n("el-input",{model:{value:e.selectItem.name,callback:function(t){e.$set(e.selectItem,"name",t)},expression:"selectItem.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"标题颜色",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.titleColor,callback:function(t){e.$set(e.selectItem,"titleColor",t)},expression:"selectItem.titleColor"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"标题背景",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.titleBackgroundColor,callback:function(t){e.$set(e.selectItem,"titleBackgroundColor",t)},expression:"selectItem.titleBackgroundColor"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"component"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-time"}),e._v("\n          子门户\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"组件id",required:""}},[n("el-input",{model:{value:e.selectItem.componentId,callback:function(t){e.$set(e.selectItem,"componentId",t)},expression:"selectItem.componentId"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"timeController"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-time"}),e._v("\n          时间控制器\n        ")]),e._v(" "),n("el-select",{model:{value:e.selectItem.timeSelectType,callback:function(t){e.$set(e.selectItem,"timeSelectType",t)},expression:"selectItem.timeSelectType"}},[n("el-option",{attrs:{label:"时间范围",value:"timeRank"}}),e._v(" "),n("el-option",{attrs:{label:"日期",value:"datePick"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"userController"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-crop"}),e._v("\n          人员控制器\n        ")]),e._v(" "),n("div",{staticClass:"row",staticStyle:{"margin-bottom":"15px"}},[n("span",[e._v("是否多选")]),e._v(" "),n("el-switch",{staticStyle:{"margin-left":"15px"},model:{value:e.selectItem.isMulti,callback:function(t){e.$set(e.selectItem,"isMulti",t)},expression:"selectItem.isMulti"}})],1)]):e._e(),e._v(" "),e.selectItem&&"tableController"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-crop"}),e._v("\n          表单控制器\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"表单"}},[n("el-select",{staticClass:"col",on:{change:e.changeTable},model:{value:e.selectItem.tableName,callback:function(t){e.$set(e.selectItem,"tableName",t)},expression:"selectItem.tableName"}},e._l(e.commonList,function(e){return n("el-option",{key:e.tableName,attrs:{label:e.name,value:e.tableName}})}),1)],1)],1):e._e(),e._v(" "),e.selectItem&&e.canControWidget.indexOf(e.selectItem.itemType)>-1?n("el-form",[n("div",[e._v("\n          受关联影响的控件\n        ")]),e._v(" "),n("el-checkbox-group",{model:{value:e.selectItem.affectBlock,callback:function(t){e.$set(e.selectItem,"affectBlock",t)},expression:"selectItem.affectBlock"}},e._l(e.items,function(t){return t.id!=e.selectItem.id&&"timeController"!=t.itemType&&"userController"!=t.itemType?n("el-checkbox",{staticStyle:{margin:"7px"},attrs:{label:t.id,border:""}},[e._v(e._s(t.name)+"\n          ")]):e._e()}),1)],1):e._e(),e._v(" "),e.selectItem&&"iframe"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-monitor"}),e._v("\n          网页\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"地址",required:""}},[n("el-input",{model:{value:e.selectItem.url,callback:function(t){e.$set(e.selectItem,"url",t)},expression:"selectItem.url"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"text"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-chat-line-square"}),e._v("\n          文本\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"文本",required:""}},[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.selectItem.text,callback:function(t){e.$set(e.selectItem,"text",t)},expression:"selectItem.text"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"文本来源于机器人",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo?"primary":""},on:{click:function(t){return e.setRobot("robotInfo")}}},[e._v("设置机器人\n          ")])],1),e._v(" "),n("el-form-item",{attrs:{label:"字体大小",required:""}},[n("el-input-number",{attrs:{min:1,max:50,label:"字体大小"},model:{value:e.selectItem.size,callback:function(t){e.$set(e.selectItem,"size",t)},expression:"selectItem.size"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"字体粗细",required:""}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectItem.weight,callback:function(t){e.$set(e.selectItem,"weight",t)},expression:"selectItem.weight"}},e._l(e.weight,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"颜色",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors},model:{value:e.selectItem.color,callback:function(t){e.$set(e.selectItem,"color",t)},expression:"selectItem.color"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"picture"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-picture"}),e._v("\n          图片\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"上传图片",required:""}},[n("extItem",{attrs:{baseData:{type:"picture",uploadNum:1}},model:{value:e.selectItem.img,callback:function(t){e.$set(e.selectItem,"img",t)},expression:"selectItem.img"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"事件"}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo?"primary":""},on:{click:function(t){return e.setRobot("robotInfo","设置点击事件")}}},[e._v("\n            设置事件\n          ")])],1)],1):e._e(),e._v(" "),e.selectItem&&"timeTree"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-crop"}),e._v("\n          时间树\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"标题",required:""}},[n("el-input",{model:{value:e.selectItem.name,callback:function(t){e.$set(e.selectItem,"name",t)},expression:"selectItem.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"数据",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo?"primary":""},on:{click:function(t){return e.setRobot("robotInfo")}}},[e._v("设置机器人\n          ")])],1)],1):e._e(),e._v(" "),e.selectItem&&"customView"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"视图路径",required:""}},[n("el-input",{model:{value:e.selectItem.customViewPath,callback:function(t){e.$set(e.selectItem,"customViewPath",t)},expression:"selectItem.customViewPath"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"数据来源",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo?"primary":""},on:{click:function(t){return e.setRobot("robotInfo")}}},[e._v("设置机器人\n          ")]),e._v(" "),n("el-input",{model:{value:e.selectItem.robotInfo,callback:function(t){e.$set(e.selectItem,"robotInfo",t)},expression:"selectItem.robotInfo"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"numCard"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-crop"}),e._v("\n          指标卡\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"指标",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo?"primary":""},on:{click:function(t){return e.setRobot("robotInfo")}}},[e._v("设置机器人\n          ")])],1),e._v(" "),n("el-form-item",{attrs:{label:"指标颜色",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.numColor,callback:function(t){e.$set(e.selectItem,"numColor",t)},expression:"selectItem.numColor"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标前缀",required:""}},[n("el-input",{model:{value:e.selectItem.numPrefix,callback:function(t){e.$set(e.selectItem,"numPrefix",t)},expression:"selectItem.numPrefix"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标后缀",required:""}},[n("el-input",{model:{value:e.selectItem.numSuffix,callback:function(t){e.$set(e.selectItem,"numSuffix",t)},expression:"selectItem.numSuffix"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标2",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo2?"primary":""},on:{click:function(t){return e.setRobot("robotInfo2")}}},[e._v("设置机器人\n          ")])],1),e._v(" "),n("el-form-item",{attrs:{label:"指标颜色2",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.numColor2,callback:function(t){e.$set(e.selectItem,"numColor2",t)},expression:"selectItem.numColor2"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标前缀2",required:""}},[n("el-input",{model:{value:e.selectItem.numPrefix2,callback:function(t){e.$set(e.selectItem,"numPrefix2",t)},expression:"selectItem.numPrefix2"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标后缀2",required:""}},[n("el-input",{model:{value:e.selectItem.numSuffix2,callback:function(t){e.$set(e.selectItem,"numSuffix2",t)},expression:"selectItem.numSuffix2"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"背景颜色",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.backgroundColor,callback:function(t){e.$set(e.selectItem,"backgroundColor",t)},expression:"selectItem.backgroundColor"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"背景图标",required:""}},[n("el-input",{model:{value:e.selectItem.backgroundIcon,callback:function(t){e.$set(e.selectItem,"backgroundIcon",t)},expression:"selectItem.backgroundIcon"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"numContrastCard"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("\n          对比指标卡\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"指标",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo?"primary":""},on:{click:function(t){return e.setRobot("robotInfo")}}},[e._v("设置机器人\n          ")])],1),e._v(" "),n("el-form-item",{attrs:{label:"对比标题",required:""}},[n("el-input",{model:{value:e.selectItem.name2,callback:function(t){e.$set(e.selectItem,"name2",t)},expression:"selectItem.name2"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"对比指标",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.contrastRobotInfo?"primary":""},on:{click:function(t){return e.setRobot("contrastRobotInfo")}}},[e._v("设置机器人\n          ")])],1)],1):e._e(),e._v(" "),e.selectItem&&"calendar"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-date"}),e._v("\n          日程\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"表单",required:""}},[n("el-select",{staticClass:"w100",on:{change:function(t){return e.changeTableClear(["startDate","endDate","dateName","dateState"])}},model:{value:e.selectItem.tableName,callback:function(t){e.$set(e.selectItem,"tableName",t)},expression:"selectItem.tableName"}},e._l(e.commonList,function(e){return n("el-option",{key:e.tableName,attrs:{label:e.name,value:e.tableName}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"开始时间",required:""}},[n("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请绑定字段"},model:{value:e.selectItem.startDate,callback:function(t){e.$set(e.selectItem,"startDate",t)},expression:"selectItem.startDate"}},e._l(e.templateMap[e.selectItem.tableName],function(t){return"dateTime"==t.type&&"HH:mm:ss"!=t.dateType?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"结束时间",required:""}},[n("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请绑定字段"},model:{value:e.selectItem.endDate,callback:function(t){e.$set(e.selectItem,"endDate",t)},expression:"selectItem.endDate"}},e._l(e.templateMap[e.selectItem.tableName],function(t){return"dateTime"==t.type&&"HH:mm:ss"!=t.dateType?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"事件名称",required:""}},[n("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请绑定字段"},model:{value:e.selectItem.dateName,callback:function(t){e.$set(e.selectItem,"dateName",t)},expression:"selectItem.dateName"}},e._l(e.templateMap[e.selectItem.tableName],function(t){return-1!=["formule","string"].indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"日程状态"}},[n("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请绑定字段"},model:{value:e.selectItem.dateState,callback:function(t){e.$set(e.selectItem,"dateState",t)},expression:"selectItem.dateState"}},e._l(e.templateMap[e.selectItem.tableName],function(t){return-1!=["select"].indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"数据筛选"}},[n("el-button",{attrs:{type:e.selectItem.filter?"primary":""},on:{click:function(t){return e.setFilter()}}},[e._v("设置筛选条件")])],1)],1):e._e(),e._v(" "),e.selectItem&&"richText"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-edit-outline"}),e._v("\n          富文本\n        ")]),e._v(" "),n("el-button",{staticClass:"w100",attrs:{type:"primary"},on:{click:e.richtextDialogEdit}},[e._v("编辑文本")])],1):e._e(),e._v(" "),e.selectItem&&"star"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-star-off"}),e._v("\n          常用\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{model:{value:e.selectItem.name,callback:function(t){e.$set(e.selectItem,"name",t)},expression:"selectItem.name"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"charts"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-data-analysis"}),e._v("\n          图表\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"图表标题"}},[n("el-input",{model:{value:e.selectItem.name,callback:function(t){e.$set(e.selectItem,"name",t)},expression:"selectItem.name"}})],1),e._v(" "),"sql"==e.selectItem.come?n("el-form-item",{attrs:{label:"sql表单"}},[n("div",{staticClass:"row"},[n("el-button",{on:{click:e.selectSqlTable}},[e._v("选择sql表单")]),e._v(" "),n("el-select",{staticClass:"col",model:{value:e.selectItem.sqlTableName,callback:function(t){e.$set(e.selectItem,"sqlTableName",t)},expression:"selectItem.sqlTableName"}},e._l(e.sqlTableList,function(e){return n("el-option",{key:e.tableName,attrs:{label:e.name,value:e.tableName}})}),1)],1)]):n("el-form-item",{attrs:{label:"表单"}},[n("el-select",{staticClass:"col",on:{change:e.changeTable},model:{value:e.selectItem.tableName,callback:function(t){e.$set(e.selectItem,"tableName",t)},expression:"selectItem.tableName"}},e._l(e.commonList,function(e){return n("el-option",{key:e.tableName,attrs:{label:e.name,value:e.tableName}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"图表类型"}},[n("el-select",{staticClass:"w100",model:{value:e.selectItem.seriesType,callback:function(t){e.$set(e.selectItem,"seriesType",t)},expression:"selectItem.seriesType"}},e._l(e.seriesTypeList,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),e.commonSelect.length?n("div",["gant"==e.selectItem.seriesType?n("div",[n("el-form-item",{attrs:{label:"开始时间"}},[n("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.selectItem.startTime,callback:function(t){e.$set(e.selectItem,"startTime",t)},expression:"selectItem.startTime"}},[n("el-option",{key:"createdAt",attrs:{label:"创建时间",value:"createdAt"}}),e._v(" "),n("el-option",{key:"updatedAt",attrs:{label:"更新时间",value:"updatedAt"}}),e._v(" "),e._l(e.commonSelect,function(t){return e.timeList.includes(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:"结束时间"}},[n("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.selectItem.endTime,callback:function(t){e.$set(e.selectItem,"endTime",t)},expression:"selectItem.endTime"}},[n("el-option",{key:"createdAt",attrs:{label:"创建时间",value:"createdAt"}}),e._v(" "),n("el-option",{key:"updatedAt",attrs:{label:"更新时间",value:"updatedAt"}}),e._v(" "),e._l(e.commonSelect,function(t){return e.timeList.includes(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:"任务名称"}},[n("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.selectItem.taskName,callback:function(t){e.$set(e.selectItem,"taskName",t)},expression:"selectItem.taskName"}},e._l(e.commonSelect,function(e){return n("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1)],1)],1):n("div",[n("el-form-item",{attrs:{label:"pie"==e.selectItem.seriesType?"维度":"图表X轴"}},[n("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.selectItem.X,callback:function(t){e.$set(e.selectItem,"X",t)},expression:"selectItem.X"}},[n("el-option",{key:"createdAt",attrs:{label:"创建时间",value:"createdAt"}}),e._v(" "),n("el-option",{key:"updatedAt",attrs:{label:"更新时间",value:"updatedAt"}}),e._v(" "),e._l(e.commonSelect,function(e){return n("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:"pie"==e.selectItem.seriesType?"数值":"图表Y轴"}},[n("el-select",{staticClass:"w100",attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.selectItem.Y,callback:function(t){e.$set(e.selectItem,"Y",t)},expression:"selectItem.Y"}},e._l(e.templateMap[e.selectItem.tableName],function(t){return e.numList.includes(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1)],1)]):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"数据来源",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo?"primary":""},on:{click:function(t){return e.setRobot("robotInfo")}}},[e._v("设置机器人\n          ")]),e._v(" "),n("el-input",{model:{value:e.selectItem.robotInfo,callback:function(t){e.$set(e.selectItem,"robotInfo",t)},expression:"selectItem.robotInfo"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"table"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-data-analysis"}),e._v("\n          表格\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"表格标题"}},[n("el-input",{model:{value:e.selectItem.name,callback:function(t){e.$set(e.selectItem,"name",t)},expression:"selectItem.name"}})],1),e._v(" "),"sql"==e.selectItem.come?n("el-form-item",{attrs:{label:"sql表单"}},[n("div",{staticClass:"row"},[n("el-button",{on:{click:e.selectSqlTable}},[e._v("选择sql表单")]),e._v(" "),n("el-select",{staticClass:"col",model:{value:e.selectItem.sqlTableName,callback:function(t){e.$set(e.selectItem,"sqlTableName",t)},expression:"selectItem.sqlTableName"}},e._l(e.sqlTableList,function(e){return n("el-option",{key:e.tableName,attrs:{label:e.name,value:e.tableName}})}),1)],1)]):n("el-form-item",{attrs:{label:"表单"}},[n("el-select",{staticClass:"col",on:{change:e.changeTable},model:{value:e.selectItem.tableName,callback:function(t){e.$set(e.selectItem,"tableName",t)},expression:"selectItem.tableName"}},e._l(e.commonList,function(e){return n("el-option",{key:e.tableName,attrs:{label:e.name,value:e.tableName}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"表格过滤参数"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.selectItem.tableFilterParams,callback:function(t){e.$set(e.selectItem,"tableFilterParams",t)},expression:"selectItem.tableFilterParams"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"dataTable"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-data-analysis"}),e._v("\n          表格\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"表格标题"}},[n("el-input",{model:{value:e.selectItem.name,callback:function(t){e.$set(e.selectItem,"name",t)},expression:"selectItem.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"表格数据来源",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.dataTableRobotInfo?"primary":""},on:{click:function(t){return e.setRobot("dataTableRobotInfo")}}},[e._v("设置机器人\n          ")]),e._v(" "),n("el-input",{model:{value:e.selectItem.dataTableRobotInfo,callback:function(t){e.$set(e.selectItem,"dataTableRobotInfo",t)},expression:"selectItem.dataTableRobotInfo"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"点击弹出框门户id",required:""}},[n("el-input",{model:{value:e.selectItem.clickDialogDashboard,callback:function(t){e.$set(e.selectItem,"clickDialogDashboard",t)},expression:"selectItem.clickDialogDashboard"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"tableDataFilter"==e.selectItem.itemType?n("el-form",[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-crop"}),e._v("\n          表格数据过滤器\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"指标颜色",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.numColor,callback:function(t){e.$set(e.selectItem,"numColor",t)},expression:"selectItem.numColor"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标前缀"}},[n("el-input",{model:{value:e.selectItem.numPrefix,callback:function(t){e.$set(e.selectItem,"numPrefix",t)},expression:"selectItem.numPrefix"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标后缀"}},[n("el-input",{model:{value:e.selectItem.numsuffix,callback:function(t){e.$set(e.selectItem,"numsuffix",t)},expression:"selectItem.numsuffix"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标2",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo2?"primary":""},on:{click:function(t){return e.setRobot("robotInfo2")}}},[e._v("设置机器人\n          ")])],1),e._v(" "),n("el-form-item",{attrs:{label:"指标颜色2",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.numColor2,callback:function(t){e.$set(e.selectItem,"numColor2",t)},expression:"selectItem.numColor2"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标前缀2",required:""}},[n("el-input",{model:{value:e.selectItem.numPrefix2,callback:function(t){e.$set(e.selectItem,"numPrefix2",t)},expression:"selectItem.numPrefix2"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指标后缀2",required:""}},[n("el-input",{model:{value:e.selectItem.numsuffix2,callback:function(t){e.$set(e.selectItem,"numsuffix2",t)},expression:"selectItem.numsuffix2"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"背景颜色",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.backgroundColor,callback:function(t){e.$set(e.selectItem,"backgroundColor",t)},expression:"selectItem.backgroundColor"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"背景图标",required:""}},[n("el-input",{model:{value:e.selectItem.backgroundIcon,callback:function(t){e.$set(e.selectItem,"backgroundIcon",t)},expression:"selectItem.backgroundIcon"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"表单"}},[n("el-select",{staticClass:"col",on:{change:e.changeTable},model:{value:e.selectItem.tableName,callback:function(t){e.$set(e.selectItem,"tableName",t)},expression:"selectItem.tableName"}},e._l(e.commonList,function(e){return n("el-option",{key:e.tableName,attrs:{label:e.name,value:e.tableName}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"数据过滤参数-用户表格头部做筛序块用时的过滤参数"}},[n("el-input",{model:{value:e.selectItem.tableDataFilter,callback:function(t){e.$set(e.selectItem,"tableDataFilter",t)},expression:"selectItem.tableDataFilter"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"tableDataDetail"==e.selectItem.itemType?n("el-form",[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-crop"}),e._v("\n          表单详情\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"表单"}},[n("el-select",{staticClass:"col",on:{change:e.changeTable},model:{value:e.selectItem.tableName,callback:function(t){e.$set(e.selectItem,"tableName",t)},expression:"selectItem.tableName"}},e._l(e.commonList,function(e){return n("el-option",{key:e.tableName,attrs:{label:e.name,value:e.tableName}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"表单数据id",required:""}},[n("el-button",{staticClass:"w100",attrs:{type:e.selectItem.robotInfo?"primary":""},on:{click:function(t){return e.setRobot("robotInfo")}}},[e._v("设置机器人\n          ")])],1)],1):e._e(),e._v(" "),e.selectItem&&"tableDataForm"==e.selectItem.itemType?n("el-form",[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-crop"}),e._v("\n          填写表单\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"表单"}},[n("el-select",{staticClass:"col",on:{change:e.changeTable},model:{value:e.selectItem.tableName,callback:function(t){e.$set(e.selectItem,"tableName",t)},expression:"selectItem.tableName"}},e._l(e.commonList,function(e){return n("el-option",{key:e.tableName,attrs:{label:e.name,value:e.tableName}})}),1)],1)],1):e._e(),e._v(" "),e.selectItem?n("el-form",[n("el-form-item",{attrs:{label:"链接"}},[n("el-input",{model:{value:e.selectItem.link,callback:function(t){e.$set(e.selectItem,"link",t)},expression:"selectItem.link"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"链接附带参数"}},[n("el-input",{model:{value:e.selectItem.linkParams,callback:function(t){e.$set(e.selectItem,"linkParams",t)},expression:"selectItem.linkParams"}})],1)],1):e._e(),e._v(" "),e.selectItem?n("el-form",[n("el-form-item",{attrs:{label:"X"}},[n("el-input",{model:{value:e.selectItem.x,callback:function(t){e.$set(e.selectItem,"x",t)},expression:"selectItem.x"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Y"}},[n("el-input",{model:{value:e.selectItem.y,callback:function(t){e.$set(e.selectItem,"y",t)},expression:"selectItem.y"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"宽度"}},[n("el-input",{model:{value:e.selectItem.w,callback:function(t){e.$set(e.selectItem,"w",t)},expression:"selectItem.w"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"高度"}},[n("el-input",{model:{value:e.selectItem.h,callback:function(t){e.$set(e.selectItem,"h",t)},expression:"selectItem.h"}})],1)],1):e._e(),e._v(" "),e.selectItem&&"cardLink"==e.selectItem.itemType?n("el-form",{attrs:{"label-width":"80px"}},[n("div",{staticClass:"item-type-title"},[n("i",{staticClass:"el-icon-crop"}),e._v("\n          卡片链接\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"图标",required:""}},[n("el-input",{model:{value:e.selectItem.icon,callback:function(t){e.$set(e.selectItem,"icon",t)},expression:"selectItem.icon"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"卡片文字",required:""}},[n("el-input",{model:{value:e.selectItem.text1,callback:function(t){e.$set(e.selectItem,"text1",t)},expression:"selectItem.text1"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"卡片文字2",required:""}},[n("el-input",{model:{value:e.selectItem.text2,callback:function(t){e.$set(e.selectItem,"text2",t)},expression:"selectItem.text2"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"文字颜色",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.textColor,callback:function(t){e.$set(e.selectItem,"textColor",t)},expression:"selectItem.textColor"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"背景颜色",required:""}},[n("el-color-picker",{attrs:{predefine:e.predefineColors,"show-alpha":""},model:{value:e.selectItem.backgroundColor,callback:function(t){e.$set(e.selectItem,"backgroundColor",t)},expression:"selectItem.backgroundColor"}})],1)],1):e._e()],1)],1),e._v(" "),e._v(" "),e.robotshow?n("robotEditDialog",{ref:"robotEdit",on:{robotSaved:e.saveRobot}}):e._e(),e._v(" "),n("titleEdit",{ref:"titleEdit",model:{value:e.rt.name,callback:function(t){e.$set(e.rt,"name",t)},expression:"rt.name"}}),e._v(" "),n("richtextDialog",{ref:"richtextDialog",on:{save:e.richtextSave}}),e._v(" "),e.filterView?n("vxe-modal",{attrs:{width:"750",height:"80%",title:"筛选条件",resize:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",[e._v("筛选条件")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px",float:"right"},attrs:{type:"primary"},on:{click:e.saveFilter}},[e._v("保存")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px",float:"right"},on:{click:function(t){e.filterView=!1}}},[e._v("取消")])]},proxy:!0}],null,!1,1457199239),model:{value:e.filterView,callback:function(t){e.filterView=t},expression:"filterView"}},[e._v(" "),n("dataFilterSingleTable",{ref:"filter",staticStyle:{padding:"20px"},attrs:{exts:e.templateMap[e.selectItem.tableName]}})],1):e._e(),e._v(" "),n("sqlTableWin",{ref:"sqlTableWin"})],1):e._e()},staticRenderFns:[]};var R=n("VU/8")(D,I,!1,function(e){n("fC2b")},"data-v-ae849e04",null);t.default=R.exports},a8ZZ:function(e,t){},aE7v:function(e,t,n){"use strict";var o=n("woOf"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=(n("0xDb"),n("Ib3M"),n("e4/+"),n("lMLl")),s=n("uXZL"),c=n.n(s),u={components:{titeView:l.a},props:{itemOption:{},isEdit:{},initParamsProp:{}},data:function(){return{dataListLoading:!1,option:{},tableData:[],total:null,tableColumn:[],totalNum:0,gridOptions1:{border:!0,resizable:!0,showOverflow:!0,align:"left"},initParams:{}}},mounted:function(){this.initParamsProp&&(this.initParams=JSON.parse(r()(this.initParamsProp))),this.getData(this.initParams),console.log(this.initParams,this.initParamsProp,33333)},methods:{exportData:function(){var e=this.$refs.xGrid.getTableColumn(),t=this.$refs.xGrid.getTableData();console.log(e,123);var n=[],o=[];e.fullColumn.forEach(function(e){if("checkbox"!=e.type&&"操作"!=e.title){var t={};t.key=e.property,t.title=e.title,t.column=e,o.push(t)}});var i=[];o.forEach(function(e){n.push(e.title)}),i.push(n),t.fullData.forEach(function(e){var t=[];o.forEach(function(n){t.push(e[n.key])}),i.push(t)});var a=c.a.utils.aoa_to_sheet(i),r=c.a.utils.book_new();c.a.utils.book_append_sheet(r,a,"sheet1"),c.a.writeFile(r,"data.xlsx")},cellClickEvent:function(e){if(e.row.userCtrId){var t={userCtrId:e.row.userCtrId,userCtrName:e.row.userCtrName};this.$emit("userCtrChanged",t,this.itemOption.affectBlock),this.itemOption.clickDialogDashboard&&(i()(this.initParams,t),this.$emit("viewDialogDashboard",this.itemOption.clickDialogDashboard,this.initParams))}},goLink:function(){console.log(this.isEdit,this.itemOption,9888938),this.isEdit||this.itemOption.link&&""!=this.itemOption.link&&this.$router.push({name:this.itemOption.link,query:{dataFilterInfo:this.itemOption.linkParams}})},dealWithData:function(){var e=this;if(this.tableColumn=[],this.tableData.length>0){var t=[];this.tableData.forEach(function(n){for(var o in n)-1==t.indexOf(o)&&"userCtrId"!=o&&(t.push(o),e.tableColumn.push({field:o,title:o}))})}},getData:function(e){var t=this;this.itemOption.dataTableRobotInfo&&(this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.dataTableRobotInfo),method:"get",params:e}).then(function(e){var n=e.data;if(t.dataListLoading=!1,0==n.code&&n.data){var o=JSON.parse(n.data);o?(t.tableData=o.list,t.total=o.total,t.dealWithData()):(t.tableData=[],t.total=null)}else t.tableData=[],t.total=null}))},onCtrDataChange:function(e){i()(this.initParams,e),console.log(this.initParams,222234),this.getData(this.initParams)}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("titeView",{attrs:{itemOption:e.itemOption},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"title-top",style:{background:e.itemOption.titleBackgroundColor}},[n("div",{staticStyle:{width:"70%"}},[n("span",{staticClass:"grid-card-dashboard-title",staticStyle:{"margin-left":"30px"},style:{color:e.itemOption.titleColor}},[e._v(" "+e._s(e.itemOption.name))]),e._v(" "),e.total?n("div",{staticClass:"grid-card-dashboard-title",staticStyle:{"margin-left":"20px","font-weight":"bold",display:"flex","flex-direction":"row"}},e._l(e.total,function(t,o){return n("div",{key:o,staticStyle:{"margin-right":"20px"},style:{color:e.itemOption.titleColor}},[e._v("\n            "+e._s(o)+": "+e._s(t)+"\n          ")])}),0):e._e()]),e._v(" "),n("el-button",{staticStyle:{width:"80px",height:"28px","margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.exportData()}}},[e._v("导出数据")])],1)]},proxy:!0},{key:"content",fn:function(){return[n("vxe-grid",e._b({ref:"xGrid",attrs:{data:e.tableData,columns:e.tableColumn,"highlight-hover-row":"","highlight-current-row":"",loading:e.dataListLoading},on:{"cell-click":e.cellClickEvent}},"vxe-grid",e.gridOptions1,!1))]},proxy:!0}])})},staticRenderFns:[]};var h=n("VU/8")(u,d,!1,function(e){n("t602")},"data-v-0d94c234",null);t.a=h.exports},aK36:function(e,t){},aydk:function(e,t){},b2j6:function(e,t,n){"use strict";var o=n("mvHQ"),i=n.n(o),a=n("0xDb"),r={props:{itemOption:{},initParamsProp:{},isEdit:{}},data:function(){return{nums:[{name:this.itemOption.name,value:"-"}],initParams:{}}},mounted:function(){this.isEdit?this.nums=[{name:this.itemOption.name,value:999}]:(this.initParamsProp&&(this.initParams=JSON.parse(i()(this.initParamsProp))),this.getData(this.initParams))},methods:{goLink:function(){console.log(this.isEdit,this.itemOption,9888938),this.isEdit||this.itemOption.link&&""!=this.itemOption.link&&this.$router.push({name:this.itemOption.link,query:{dataFilterInfo:this.itemOption.linkParams}})},getData:function(e){var t=this;this.itemOption.robotInfo&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.robotInfo),method:"get",params:e}).then(function(e){var n=e.data;if(0==n.code){if(t.nums=[],Object(a.u)(n.data))t.nums=JSON.parse(n.data);else{var o={name:t.itemOption.name,value:n.data};t.nums.push(o)}t.itemOption.robotInfo2&&t.getData2()}})},getData2:function(e){var t=this;this.itemOption.robotInfo2&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.robotInfo2),method:"get",params:e}).then(function(e){var n=e.data;if(0==n.code){var o=t.nums[0];o&&t.$set(o,"value2",n.data)}})},onCtrDataChange:function(e){this.getData(e)}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-rows fill-content"},e._l(e.nums,function(t){return n("el-card",{staticClass:"fill-content hover-num",style:{background:e.itemOption.backgroundColor},attrs:{shadow:"hover"},nativeOn:{click:function(t){return e.goLink()}}},[n("i",{class:e.itemOption.backgroundIcon,staticStyle:{color:"#f0f0f0",opacity:"0.2","font-size":"100px",position:"absolute",right:"0px",bottom:"10px"}}),e._v(" "),n("div",{staticClass:"flex-center"},[null!=e.itemOption.name&&""!=e.itemOption.name?n("div",{staticClass:"grid-card-dashboard-title  mar-buttom ",style:{color:e.itemOption.titleColor}},[e._v("\n          "+e._s(t.name)+"\n        ")]):e._e(),e._v(" "),n("div",[n("div",{staticClass:"row"},[e.itemOption.numPrefix?n("span",{staticClass:"prefix"},[e._v(e._s(e.itemOption.numPrefix))]):e._e(),e._v(" "),n("div",{staticClass:"number",style:{color:e.itemOption.numColor}},[e._v("\n              "+e._s(null!=t.value?t.value:"-")+"\n            ")]),e._v(" "),e.itemOption.numSuffix?n("span",[e._v(e._s(e.itemOption.numSuffix))]):e._e()]),e._v(" "),n("div",{staticClass:"row"},[e.itemOption.numPrefix2?n("span",{staticClass:"prefix"},[e._v(e._s(e.itemOption.numPrefix2))]):e._e(),e._v(" "),null!=t.value2?n("div",{staticClass:"number",style:{color:e.itemOption.numColor2}},[e._v("\n              "+e._s(null!=t.value2?t.value2:"-")+"\n            ")]):e._e(),e._v(" "),e.itemOption.numSuffix2?n("span",[e._v(e._s(e.itemOption.numSuffix2))]):e._e()])])])])}),1)},staticRenderFns:[]};var s=n("VU/8")(r,l,!1,function(e){n("UObw")},"data-v-1a062ef6",null);t.a=s.exports},bKCO:function(e,t,n){"use strict";var o=n("0xDb"),i={userList:[],deptList:[],roleList:[],dynamicList:[],extList:[]},a={props:{menuOpt:{type:Array,default:function(){return["userList","deptList","roleList","dynamicList"]}},value:{default:function(){Object(o.e)(i)}},readOnly:{type:Boolean,default:!1},single:{type:Boolean},otherDynamicList:{default:function(){return[]},type:Array},otherExtList:{default:function(){return[]},type:Array}},watch:{filterText:function(e){this.$refs.userList.filter(e)},single:{handler:function(e,t){this.initValue()}},value:{handler:function(e,t){this.initValue(!0)},immediate:!0},otherDynamicList:{handler:function(e,t){this.dynamicList=[];var n=this.single?[{id:1,label:"当前登录用户"}]:[{id:1,label:"当前登录用户"},{id:2,label:"当前表单创建者"},{id:3,label:"非当前表单创建者"}];this.dynamicList=n.concat(this.otherDynamicList),this.getMap(this.dynamicList,"id","label","dynamicMap")},immediate:!0},otherExtList:{handler:function(e,t){this.getMap(this.otherExtList,"id","label","otherExtMap")},immediate:!0}},model:{prop:"value",event:"change"},data:function(){return{optMap:{dynamicList:{},deptList:{},userList:{},roleList:{}},userList:[],userMap:{},roleList:[],roleMap:{},deptList:[],deptMap:{},dynamicList:[],dynamicMap:{1:"当前登录用户",2:"当前表单创建者",3:"非当前表单创建者"},otherExtMap:{},activeName:"userList",filterText:"",loading:!1,selectList:Object(o.e)(i)}},methods:{handleClose:function(e,t){var n=this;this.selectList[t].splice(e,1),this.$refs[t].setCheckedKeys(this.selectList[t]),setTimeout(function(){n.$emit("hide")},100)},filterNode:function(e,t){return!e||-1!==t.realname.indexOf(e)},initValue:function(e){var t=this;this.selectList=this.value?Object(o.e)(this.value):Object(o.e)(i),this.single&&(this.selectList.roleList=[],this.selectList.deptList=[],this.selectList.userList.length&&(this.selectList.userList=[this.selectList.userList[0]],this.selectList.dynamicList=[]),this.selectList.dynamicList.length&&(this.selectList.dynamicList=[this.selectList.dynamicList[0]],this.selectList.userList=[])),this.$nextTick(function(){t.$refs.userList&&t.selectList&&t.selectList.userList&&t.$refs.userList.setCheckedKeys(t.selectList.userList?t.selectList.userList:[]),t.$refs.dynamicList&&t.selectList&&t.selectList.dynamicList&&t.$refs.dynamicList.setCheckedKeys(t.selectList.dynamicList?t.selectList.dynamicList:[]),t.$refs.extList&&t.selectList&&t.selectList.extList&&t.$refs.extList.setCheckedKeys(t.selectList.extList),t.$refs.roleList&&t.selectList&&t.selectList.roleList&&t.$refs.roleList.setCheckedKeys(t.selectList.roleList),t.$refs.deptList&&t.selectList&&t.selectList.deptList&&t.$refs.deptList.setCheckedKeys(t.selectList.deptList),!e&&t.$emit("change",t.selectList)})},getMap:function(e,t,n,o){var i=this;e.forEach(function(e){i[o][e[t]]=e[n]})},initBaseData:function(){var e=this;this.$http({url:this.$http.adornUrl("/sys/user/getUserListDeptListRoleList"),method:"get"}).then(function(t){var n=t.data;n&&0===n.code?(e.single,e.userList=n.userList,e.roleList=n.roleList,e.deptList=n.deptList,e.getMap(e.userList,"userId","realname","userMap"),e.getMap(e.roleList,"roleId","roleName","roleMap"),e.getMap(e.deptList,"id","name","deptMap"),e.initValue(!0)):e.$message.error(re.msg)})},changeNode:function(e,t,n){if(this.single&&t){var o="dynamicList"==n?"userList":"dynamicList";this.$refs[o].setCheckedKeys([]);var i=[e["dynamicList"==n?"id":"userId"]];this.$refs[n].setCheckedKeys(i)}this.$set(this.selectList,n,this.$refs[n].getCheckedKeys()),this.$emit("change",this.selectList)}},mounted:function(){this.initBaseData()}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("el-popover",{directives:[{name:"show",rawName:"v-show",value:!e.readOnly,expression:"!readOnly"}],attrs:{placement:"bottom-start",width:"320",trigger:"click"},on:{hide:function(t){return e.$emit("hide")}}},[n("div",{attrs:{slot:"reference"},slot:"reference"},[n("el-button",{staticStyle:{margin:"0 10px"},attrs:{title:"选择",type:"primary",icon:"el-icon-plus",circle:""}})],1),e._v(" "),n("div",{staticStyle:{padding:"0 10px",height:"350px"}},[n("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[-1!=e.menuOpt.indexOf("userList")?n("el-tab-pane",{attrs:{label:"员工",name:"userList"}},[n("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),n("el-tree",{ref:"userList",staticClass:"filter-tree",attrs:{data:e.userList,"node-key":"userId","show-checkbox":"","highlight-current":"","check-on-click-node":"",props:{children:"children",label:"realname"},"default-expand-all":"","filter-node-method":e.filterNode},on:{"check-change":function(t,n){return e.changeNode(t,n,"userList")}}})],1):e._e(),e._v(" "),e.single||-1==e.menuOpt.indexOf("deptList")?e._e():n("el-tab-pane",{attrs:{label:"部门",name:"deptList"}},[n("el-tree",{ref:"deptList",staticClass:"filter-tree",attrs:{data:e.deptList,"node-key":"id","show-checkbox":"","highlight-current":"","check-on-click-node":"",props:{children:"children",label:"name"},"default-expand-all":""},on:{"check-change":function(t,n){return e.changeNode(t,n,"deptList")}}})],1),e._v(" "),e.single||-1==e.menuOpt.indexOf("roleList")?e._e():n("el-tab-pane",{attrs:{label:"角色",name:"roleList"}},[n("el-tree",{ref:"roleList",staticClass:"filter-tree",attrs:{data:e.roleList,"node-key":"roleId","show-checkbox":"","highlight-current":"","check-on-click-node":"",props:{children:"children",label:"roleName"},"default-expand-all":""},on:{"check-change":function(t,n){return e.changeNode(t,n,"roleList")}}})],1),e._v(" "),-1!=e.menuOpt.indexOf("dynamicList")?n("el-tab-pane",{attrs:{label:"动态",name:"dynamicList"}},[n("el-tree",{ref:"dynamicList",staticClass:"filter-tree",attrs:{data:e.dynamicList,"node-key":"id","show-checkbox":"","highlight-current":"","check-on-click-node":"",props:{children:"children",label:"label"},"default-expand-all":""},on:{"check-change":function(t,n){return e.changeNode(t,n,"dynamicList")}}})],1):e._e(),e._v(" "),-1!=e.menuOpt.indexOf("extList")?n("el-tab-pane",{attrs:{label:"变量",name:"extList"}},[n("el-tree",{ref:"extList",staticClass:"filter-tree",attrs:{data:e.otherExtList,"node-key":"id","show-checkbox":"","highlight-current":"","check-on-click-node":"",props:{children:"children",label:"label"},"default-expand-all":""},on:{"check-change":function(t,n){return e.changeNode(t,n,"extList")}}})],1):e._e()],1)],1)]),e._v(" "),n("div",[e._l(e.selectList.userList,function(t,o){return n("el-tag",{key:"user"+t,staticClass:"tag",attrs:{closable:!e.readOnly,size:"medium",effect:"plain"},on:{close:function(t){return e.handleClose(o,"userList")}}},[e._v("\n        "+e._s(e.userMap[t])+"\n      ")])}),e._v(" "),e._l(e.selectList.deptList,function(t,o){return n("el-tag",{key:"dept"+t,staticClass:"tag",attrs:{closable:!e.readOnly,size:"medium",type:"warning",effect:"plain"},on:{close:function(t){return e.handleClose(o,"deptList")}}},[e._v("\n        "+e._s(e.deptMap[t])+"\n      ")])}),e._v(" "),e._l(e.selectList.roleList,function(t,o){return n("el-tag",{key:"role"+t,staticClass:"tag",attrs:{closable:!e.readOnly,size:"medium",type:"success",effect:"plain"},on:{close:function(t){return e.handleClose(o,"roleList")}}},[e._v("\n        "+e._s(e.roleMap[t])+"\n      ")])}),e._v(" "),e._l(e.selectList.dynamicList,function(t,o){return n("el-tag",{key:"dynamic"+t,staticClass:"tag ",attrs:{closable:!e.readOnly,size:"medium",type:"info",effect:"plain"},on:{close:function(t){return e.handleClose(o,"dynamicList")}}},[e._v("\n        "+e._s(e.dynamicMap[t])+"\n      ")])}),e._v(" "),e._l(e.selectList.extList,function(t,o){return n("el-tag",{key:"extList"+t,staticClass:"tag ",attrs:{closable:!e.readOnly,size:"medium",type:"info",effect:"plain"},on:{close:function(t){return e.handleClose(o,"extList")}}},[e._v("\n        "+e._s(e.otherExtMap[t])+"\n      ")])})],2)],1)])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("QkUQ")},"data-v-63901828",null);t.a=l.exports},bREw:function(e,t,n){"use strict";var o=n("woOf"),i=n.n(o);t.a={namespaced:!0,state:{id:0,name:"",isAdmin:!1,email:"",expireTime:"",integral:0,mobile:"",realname:"",status:1,storageSpaceName:"",tenantId:"",userId:"",username:""},mutations:{setUser:function(e,t){t.id=t.userId,t.name=t.realname,i()(e,t)},updateIsAdmin:function(e,t){e.isAdmin=t},updateId:function(e,t){e.id=t},updateName:function(e,t){e.name=t}}}},bT2Z:function(e,t){},bh2v:function(e,t){},boTX:function(e,t,n){"use strict";t.b=function(e){localStorage.setItem("sidebarLayoutSkin","dark"),1==e?(localStorage.setItem("theme","#3E8EF7"),n.e(113).then(n.bind(null,"1Ov9"))):2==e?(localStorage.setItem("theme","#17B3A3"),n.e(116).then(n.bind(null,"T+sC"))):3==e?(localStorage.setItem("theme","#997B71"),n.e(112).then(n.bind(null,"sMn8"))):4==e?(localStorage.setItem("theme","#0BB2D4"),n.e(117).then(n.bind(null,"94E6"))):5==e?(localStorage.setItem("theme","#20A53A"),n.e(115).then(n.bind(null,"4uKZ"))):(localStorage.setItem("theme","#3278B3"),n.e(114).then(n.bind(null,"HSio")))},t.a=function(){return["#0BB2D4","#3E8EF7","#17B3A3","#997B71","#3278B3"]}},bvjD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col overflow-auto"},[n("div",[n("div",{staticClass:"option-title"},[e._v("展示字段")]),e._v(" "),n("el-select",{staticClass:"item-width w100",attrs:{placeholder:"请选择展示字段"},model:{value:e.fieldConfig.field,callback:function(t){e.$set(e.fieldConfig,"field",t)},expression:"fieldConfig.field"}},e._l(e.exts,function(t){return null==e.optionFilter||-1!=e.optionFilter.indexOf(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1)])},staticRenderFns:[]};var i=n("VU/8")({props:{exts:{},config:{}},data:function(){return{fieldConfig:{},optionFilter:[]}},mounted:function(){"string"==typeof this.config?this.fieldConfig.field=this.config:this.fieldConfig=this.config},methods:{getSaveData:function(){return this.fieldConfig},setOptionFilter:function(e){this.optionFilter=e}}},o,!1,function(e){n("FmGb")},null,null);t.default=i.exports},cFoh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-job",use:"icon-job-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-job"><defs><style type="text/css"></style></defs><path d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512-230.4-512-512-512z m0 960c-249.6 0-448-198.4-448-448s198.4-448 448-448 448 198.4 448 448-198.4 448-448 448z" fill="" p-id="4002" /><path d="M556.8 518.4V339.2c0-19.2-12.8-32-32-32s-32 12.8-32 32v192c0 6.4 0 19.2 6.4 19.2l198.4 204.8c6.4 6.4 12.8 12.8 25.6 12.8 6.4 0 12.8 0 19.2-6.4 12.8-12.8 12.8-32 0-44.8L556.8 518.4z" fill="" p-id="4003" /></symbol>'});r.a.add(l);t.default=l},cJmb:function(e,t){},cPZB:function(e,t){},cTe8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("Xf8N"),r=n("xstH"),l=n("8skB"),s=n("TN+i"),c=n("N2OJ"),u=n("0xDb"),d={components:{selectStaff:r.a,clickInput:a.a,selectForm:l.a,rules:s.a,rulesScreen:c.a},props:{d:{},exts:{},dataForm:{}},model:{prop:"d",event:"change"},watch:{d:{handler:function(e){this.getData()},deep:!0,immediate:!0}},data:function(){return{baseData:{name:""}}},methods:{selectOpt:function(e){this.selectTableName=e},save:function(){if(this.baseData.name){this.$refs.rulesScreen.saveData(),this.$refs.rules.saveData();var e={type:"update",destTableName:this.selectTableName};i()(this.baseData.info,e),this.$set(this.d,"info",this.baseData.info),this.$set(this.d,"name",this.baseData.name),this.$message.success("保存配置成功"),this.$emit("close")}else this.$message.error("请输入节点名称")},getData:function(){var e=this;this.$set(this,"baseData",Object(u.e)(this.d)),this.selectTableName=this.baseData.info.destTableName,this.$nextTick(function(){e.$refs.rulesScreen.getData(),e.$refs.rules.getData()})}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[e._v("\r\n    "+e._s(e.baseData.info)+"\r\n    "),n("div",{staticClass:"col"},[n("div",{staticClass:"top-title"},[n("div",{staticClass:"t-title"},[n("clickInput",{model:{value:e.baseData.name,callback:function(t){e.$set(e.baseData,"name",t)},expression:"baseData.name"}})],1)]),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("负责人")]),e._v(" "),n("selectStaff",{attrs:{single:""},model:{value:e.baseData.info.adminId,callback:function(t){e.$set(e.baseData.info,"adminId",t)},expression:"baseData.info.adminId"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("目标表单")]),e._v(" "),n("selectForm",{attrs:{exts:e.exts,dataForm:e.dataForm},on:{tableName:e.selectOpt},model:{value:e.baseData.info.formId,callback:function(t){e.$set(e.baseData.info,"formId",t)},expression:"baseData.info.formId"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("更新哪些数据")]),e._v(" "),n("rulesScreen",{ref:"rulesScreen",attrs:{exts:e.exts,formId:e.baseData.info.formId},model:{value:e.baseData.info.dataRules,callback:function(t){e.$set(e.baseData.info,"dataRules",t)},expression:"baseData.info.dataRules"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("更新规则")]),e._v(" "),n("rules",{ref:"rules",attrs:{exts:e.exts,formId:e.baseData.info.formId,btnText:"更新为"},model:{value:e.baseData.info.updataRules,callback:function(t){e.$set(e.baseData.info,"updataRules",t)},expression:"baseData.info.updataRules"}})],1)]),e._v(" "),n("div",{staticClass:"foot-box"},[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.save}},[e._v("保存配置")])],1)])},staticRenderFns:[]};var f=n("VU/8")(d,h,!1,function(e){n("y3XI")},"data-v-15a4e56a",null);t.default=f.exports},chHq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Dd8w"),i=n.n(o),a=n("M0rx"),r=n("sg1D"),l=n("kvU2"),s=n.n(l),c=n("//Fk"),u=n.n(c),d=n("Zrlr"),h=n.n(d),f=n("wxAW"),p=n.n(f),m=n("fZjL"),v=n.n(m),b=n("7+uW");function y(e,t){return"function"==typeof t?t:e[t]}function g(e){return Array.isArray(e)?e.map(function(e){return{k:e,v:e}}):v()(e).map(function(t){return{k:t,v:e[t]}})}var w=function(e){return function(t){var n={},o=g(t),i=function(t){var i=o[t];n[t]=function(){var t=e||this.$vptd;return"function"==typeof i?i.call(this,t.state):t.state[i]}};for(var a in o)i(a);return n}},_=function(e,t,n){return function(o){var i={},a=g(o),r=function(o){var r=a[o];i[o]=function(o){var i=n||this.$vptd,a=i[e],l=i[t],s="function"==typeof r?r.call(this,a):r;return l.call(i,s,o)}};for(var l in a)r(l);return i}},C=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.state,i=n.mutations,a=void 0===i?{}:i,r=n.actions,l=void 0===r?{}:r,s=n.plugins,c=n.subscribers,u=void 0===c?[]:c;h()(this,e),this.vm=new b.default({data:{$$state:"function"==typeof o?o():o}}),this.mutations=a,this.actions=l,this.subscribers=u,s&&s.forEach(function(e){return t.use(e)}),this.mapState=w(this),this.mapActions=_("actions","dispatch",this),this.mapMutations=_("mutations","commit",this)}return p()(e,[{key:"$emit",value:function(e){for(var t,n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return(t=this.vm).$emit.apply(t,[e].concat(o))}},{key:"$on",value:function(e,t){return this.vm.$on(e,t)}},{key:"subscribe",value:function(e){var t=this;return this.subscribers.push(e),function(){return t.subscribers.splice(t.subscribers.indexOf(e),1)}}},{key:"commit",value:function(e,t){var n=this;this.subscribers.forEach(function(o){return o({type:e,payload:t},n.state)});var o=y(this.mutations,e);return o&&o(this.state,t)}},{key:"dispatch",value:function(e,t){var n=y(this.actions,e),o={state:this.state,dispatch:this.dispatch.bind(this),commit:this.commit.bind(this),store:this};return u.a.resolve(n&&n(o,t))}},{key:"use",value:function(e){return e(this),this}},{key:"replaceState",value:function(e){return this.vm.$data.$$state=e,this}},{key:"state",get:function(){return this.vm.$data.$$state},set:function(e){0}}]),e}(),k=(w(),_("actions","dispatch"),_("mutations","commit"),n("59rQ")),x=n("bOdI"),S=n.n(x),T=n("jRWI"),E=n("iS5C"),O=n("06zv"),D=n("oh3/"),I=n("hUfn"),R=function(){var e;return e={},S()(e,T.default.name,T.default.setting),S()(e,E.default.name,E.default.setting),S()(e,O.default.name,O.default.setting),S()(e,D.default.name,D.default.setting),S()(e,I.default.name,I.default.setting),e},M={zoom:100,type:"page",index:-1,uuid:-1,originX:0,originY:0,startX:0,startY:0,moving:!1,activeElement:Object(k.b)(),page:{title:"demo",width:750,height:550,pageWidth:750,pageHeight:550,tempItems:[],direction:1},optionItems:[],tempId:"",loading:!1,widgetSetting:R()},P=n("Xxa5"),A=n.n(P),L=n("exGp"),N=n.n(L),V={addTempItem:function(e,t){var n=e.state,o=e.commit;o("addTempItem",t),o("select",{uuid:n.page.tempItems[n.page.tempItems.length-1].uuid})},designerInit:function(e,t){var n=this,o=(e.state,e.commit);return N()(A.a.mark(function e(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o("initOptionItems",t.options),o("initPage",t.tempValue);case 2:case"end":return e.stop()}},e,n)}))()}},F=n("woOf"),B=n.n(F),H=n("mvHQ"),j=n.n(H),$=n("eXoM"),U=new C({state:M,actions:V,mutations:{initPage:function(e,t){e.page=t;var n=t.tempItems?t.tempItems.map(function(t){return i()({},e.widgetSetting[t.type],t,{style:i()({},e.widgetSetting[t.type].style,t.style||{})})}):[];e.page.tempItems=n},initOptionItems:function(e,t){var n=t?t.map(function(t){return i()({},e.widgetSetting[t.type],t,{style:i()({},e.widgetSetting[t.type].style,t.style||{})})}):[];e.optionItems=n},initActive:function(e){e.activeElement=Object(k.b)()},initmove:function(e,t){e.startX=t.startX,e.startY=t.startY,e.originX=t.originX,e.originY=t.originY,e.moving=!0},select:function(e,t){if(e.uuid=t.uuid,-1===t.uuid)e.activeElement=Object(k.b)(),e.type="page";else{var n=e.page.tempItems.find(function(e){return e.uuid===t.uuid});n&&(e.activeElement=n,e.type=n.type)}},stopmove:function(e){e.moving=!1},move:function(e,t){var n=e.activeElement,o=t.x-e.startX,i=t.y-e.startY,a=e.originX+Math.floor(100*o/e.zoom),r=e.originY+Math.floor(100*i/e.zoom);n.left=a>0?a:0,n.top=r>0?r:0},resize:function(e,t){var n,o=t.x-e.startX,i=t.y-e.startY;if("right"===t.type)return n=e.originX+Math.floor(100*o/e.zoom),void(e.activeElement.width=n>10?n:10);if("down"===t.type)return n=e.originX+Math.floor(100*i/e.zoom),void(e.activeElement.height=n>10?n:10);if("left"===t.type){var a=e.originX+Math.floor(100*o/e.zoom),r=e.originY-Math.floor(100*o/e.zoom);return e.activeElement.left=a>0?a:0,void(e.activeElement.width=r>10?r:10)}if("up"===t.type){var l=e.originX+Math.floor(100*i/e.zoom),s=e.originY-Math.floor(100*i/e.zoom);e.activeElement.top=l>0?l:0,e.activeElement.height=s>10?s:10}},updateSrollTop:function(e,t){e.top=t},zoom:function(e,t){e.zoom=t},delete:function(e,t){if("page"!==e.type){var n=0;e.page.tempItems.forEach(function(e,o){e.uuid===t&&(n=o)}),e.page.tempItems.splice(n,1),e.activeElement=Object(k.b)(),e.type="page",e.uuid=-1}},addTempItem:function(e,t){var n={uuid:$("1234567890abcdef",10)},o=JSON.parse(j()(t));e.page.tempItems.push(B()(o,n))},updateData:function(e,t){var n=t.uuid,o=t.value,i=e.page.tempItems.find(function(e){return e.uuid===n});i&&(i.value=o)},setTempId:function(e,t){e.tempId=t},setLoading:function(e,t){e.loading=t},setWidgetSetting:function(e,t){e.widgetSetting=t}}}),z={name:"kr-print-designer",components:{Viewport:a.default,Panel:r.default},data:function(){return{}},props:{widgetOptions:{type:Array,default:function(){return[]}},tempValue:{type:Object,default:function(){return{title:"demo",width:750,height:550,pageWidth:750,pageHeight:550,tempItems:[]}}}},created:function(){b.default.prototype.$vptd=U,this.initTemp(this.tempValue,this.widgetOptions)},methods:{cancel:function(){this.$emit("cancel")},saveTemp:function(){var e=this.$vptd.state.page;this.$emit("save",s()(e))},previewTemp:function(){var e=i()({},this.$vptd.state.page);this.$lodop.previewTemp(s()(e))},initTemp:function(e,t){this.$vptd.dispatch("designerInit",{tempValue:s()(e),options:s()(t)})}}},W={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"kr-designer",attrs:{"data-theme":"kr-designer"}},[n("viewport",{staticClass:"kr-designer-view"}),e._v(" "),n("div",{staticClass:"kr-designer-tool"},[n("div",{staticClass:"kr-designer-tool_con"},[n("panel",{staticClass:"control-panel"})],1),e._v(" "),n("div",{staticClass:"kr-designer-tool_bar"},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.saveTemp}},[e._v("保存")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.previewTemp}},[e._v("预览")])],1)])],1)},staticRenderFns:[]};var q=n("VU/8")(z,W,!1,function(e){n("Fydw")},null,null);t.default=q.exports},coAk:function(e,t){},cpXT:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__=__webpack_require__("woOf"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__=__webpack_require__("//Fk"),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_get_iterator__=__webpack_require__("BO1k"),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_get_iterator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_get_iterator__),__WEBPACK_IMPORTED_MODULE_6__utils__=__webpack_require__("0xDb"),__WEBPACK_IMPORTED_MODULE_7__extComponent_vue__=__webpack_require__("5xRT"),__WEBPACK_IMPORTED_MODULE_8__components_extForm_filter_js__=__webpack_require__("w4zF");__webpack_exports__.a={props:{isOpen:{default:!1,type:Boolean},isChildView:{require:!1}},components:{extItem:__WEBPACK_IMPORTED_MODULE_7__extComponent_vue__.default},data:function(){return{propTableSavedMap:[],activeName:"first",getDataError:!1,thisPoint:this,windowWidth:document.documentElement.clientWidth,noshowList:[],tableName:"",extInfo:[],propTableExt:[],childExt:[],childShow:!0,activeChildKey:"",dataForm:{id:null,extId:"",extContent:{},relateTableContent:{},cteatedAt:"",updatedAt:""},filterMap:null,loading:!1,isView:!1,tableProp:{},tableDefine:{},rules:{},rulesMap:{},foumuleMap:{},tempChildrenTableExtId:2094967295-Object(__WEBPACK_IMPORTED_MODULE_6__utils__.w)(0,1e3),isCachedChildrenTableData:!1,defaultValueFormuleKeyList:[],rtNeedChangeMap:{}}},watch:{dataForm:{handler:function(e,t){for(var n=0;n<this.extInfo.length;n++)this.$refs&&this.$refs["extItem"+n]&&this.$refs["extItem"+n][0]&&this.$refs["extItem"+n][0].formDataChanged(e.extContent)},deep:!0}},methods:{handleClick:function(e){},onPropViewSaved:function(e,t,n){this.dataForm.extContent[n]=e,this.propTableSavedMap.push(n),console.log(e,t,n,this.propTableSavedMap,this.propTableExt,2345566),this.propTableSavedMap.length==this.propTableExt.length&&this.dataFormSubmit()},onPropViewSaveError:function(e){this.$emit("saveError",e),this.activeName=e,this.$message.error("保存错误")},initPropTableView:function(){var e=this;this.$nextTick(function(){e.propTableExt.forEach(function(t){var n=e.dataForm.extContent[t.key];e.$refs[t.key][0].init(n,e.isView,t.relateTableName,null)})})},checkCellCanNotEditDetail:function(e,t){return!this.insertedNewRowState&&null!=t.roleCanEditField&&0==t.roleCanEditField},checkCellCanNotEdit:function checkCellCanNotEdit(define){var row=this.dataForm.extContent;return this.tableProp.canNotEditCondition?!(!this.tableProp.canNotEditConditionContent||!eval(this.tableProp.canNotEditConditionContent))&&this.checkCellCanNotEditDetail(row,define):this.checkCellCanNotEditDetail(row,define)},getCellIsView:function(e){return this.checkCellCanNotEdit(e)||e.cantEdit||this.isView},menuSelect:function(e,t){var n=this;console.log(t),this.activeChildKey=e;var o=function(t){t.key==e&&n.$nextTick(function(){var e=n.$refs.common,o=n.dataForm.id?n.dataForm.id:n.tempChildrenTableExtId;e&&(e.refreshDataAndPage(o,t.childrenTableName,null,t.key),e.addParentTableData(null,null,null))})},i=!0,a=!1,r=void 0;try{for(var l,s=__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_get_iterator___default()(this.childExt);!(i=(l=s.next()).done);i=!0){o(l.value)}}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}},isHidden:function(e){if(-1!=this.noshowList.indexOf(e.key))return!1;if(this.isOpen&&this.tableProp.publicAddOpt&&(console.log(this.tableProp.publicAddOpt,8989898),-1!=(this.tableProp.publicAddOpt.privateExts?this.tableProp.publicAddOpt.privateExts:[]).indexOf(e.key)))return!1;return(null!=this.dataForm.id||!e.addHidden)&&!e.hidden},clearDataFilter:function(e,t){},setHaveCacheChildrenTableData:function(){this.isCachedChildrenTableData=!0},checkDefaultValueFormule:function(e){var t=this;this.defaultValueFormuleKeyList.forEach(function(n){e&&n.key==e.key||t.$http({url:t.$http.adornUrl("/common/common/checkFormula"),method:"POST",data:t.$http.adornParams({formula:"formule"==n.type?n.formuleContext:n.defaultValueFormule.formuleContext,valueMap:t.dataForm.extContent})}).then(function(e){var o=e.data;0==o.code&&t.$set(t.dataForm.extContent,n.key,o.data)})})},checkRtNeedClear:function(e){var t=this;this.rtNeedChangeMap[e]&&this.rtNeedChangeMap[e].forEach(function(e){t.dataForm.extContent[e]&&t.$set(t.dataForm.extContent,e,null)})},change:function(e,t){var n=this;(this.$refs.dataForm.validateField(t.key),this.filterMap&&this.filterMap[t.key])&&this.filterMap[t.key].forEach(function(e){n.$set(n.dataForm.extContent,e,null)});this.checkDefaultValueFormule(t),this.checkRtNeedClear(t.key)},productionRules:function(e){var t=!0,n=!1,o=void 0;try{for(var i,a=__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_get_iterator___default()(e);!(t=(i=a.next()).done);t=!0){var r=i.value;this.$set(this.dataForm.extContent,r.key,""),this.rulesMap[r.key]=r;var l=[];r.mustRequired&&l.push({required:!0,message:r.name+"不能为空",trigger:"change"}),this.$set(this.rules,r.key,l)}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}},getExtInfo:function(e,t,n){var o=this;return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function i(){return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a(function(){var i=__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function i(a,r){var l,s,c,u,d,h,f,p,m,v,b,y,g;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o.queryInfo=[],i.next=3,o.$http({url:o.$http.adornUrl("/common/commondefine/"+(o.isOpen?"infoByTableForPublicShare":"infoByTableWithFieldRules")+"/"+e),method:"post",data:o.$http.adornData({filtFieldRules:t,jsVarMapStr:n?encodeURIComponent(n):null,commonDataId:o.dataForm.id})});case 3:if(l=i.sent,s=l.data,o.tableProp={},!s||0!==s.code){i.next=35;break}for(o.productionRules(s.assetExt.templateJson),c=JSON.parse(s.assetExt.template),u=[],d=[],h=[],f=[],p=!0,m=!1,v=void 0,i.prev=12,b=__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_get_iterator___default()(c);!(p=(y=b.next()).done);p=!0)((g=y.value).defaultValueFormule||"formule"==g.type)&&f.push(g),"childrenTable"==g.type&&g.positionBottom?o.isHidden(g)&&d.push(g):"propTable"==g.type?o.isHidden(g)&&h.push(g):u.push(g);i.next=20;break;case 16:i.prev=16,i.t0=i.catch(12),m=!0,v=i.t0;case 20:i.prev=20,i.prev=21,!p&&b.return&&b.return();case 23:if(i.prev=23,!m){i.next=26;break}throw v;case 26:return i.finish(23);case 27:return i.finish(20);case 28:o.propTableExt=h,o.childExt=d,o.defaultValueFormuleKeyList=f,o.extInfo=u,o.tableProp=JSON.parse(s.assetExt.tableProp),o.tableDefine=s.assetExt,o.$emit("getInfoByTable",s.assetExt);case 35:a();case 36:case"end":return i.stop()}},i,o,[[12,16,20,28],[21,,23,27]])}));return function(e,t){return i.apply(this,arguments)}}()));case 1:case"end":return i.stop()}},i,o)}))()},getDataDo:function(){var e=this;this.childExt.length&&(this.setHaveCacheChildrenTableData(),setTimeout(function(){console.log("menuSelect"),e.menuSelect(e.childExt[0].key)},100))},initExt:function(e,t,n,o,i){var a=this;return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function r(){return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a(function(){var r=__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function r(l,s){return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.getExtInfo(e,o,i);case 2:a.tableName=e,a.extId=t,a.extKey=n,l();case 6:case"end":return r.stop()}},r,a)}));return function(e,t){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}},r,a)}))()},initParentId:function(e){this.parentId=e},initByData:function(e,t){var n=this;return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function o(){return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(e,t),n.isView=!0,o.next=4,n.initExt(e);case 4:t.extContent&&(n.dataForm.extContent=JSON.parse(t.extContent));case 5:case"end":return o.stop()}},o,n)}))()},init:function(e,t,n,o,i,a,r){var l=this;return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function s(){return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l.dataForm.extContent={},l.loading=!0,l.$emit("changeLoading",l.loading),l.dataForm.id=e||null,l.dataForm.extId=o||null,l.dataForm.assetId="",l,l.visible=!0,l.isView=!!t,s.next=11,l.initExt(n,o,i,a,r);case 11:l.$nextTick(function(){if(l.childShow=!1,l.$refs.dataForm.resetFields(),l.dataForm.id)l.$http({url:l.$http.adornUrl("/common/common/"+(l.isOpen?"infoForPublicShare":"info")+"/"+l.tableName+"/"+l.dataForm.id),method:"get",params:l.$http.adornParams()}).then(function(e){var t=e.data;if(l.loading=!1,l.$emit("changeLoading",l.loading),t&&0===t.code){if(l.getDataError=!1,t.asset.extContent){var n=JSON.parse(t.asset.extContent);console.log(l.extInfo),l.extInfo.forEach(function(e){"richText"==e.type&&n[e.key]&&(n[e.key]=decodeURIComponent(n[e.key]))}),l.$set(l.dataForm,"extContent",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()(l.dataForm.extContent,n))}t.asset.relateTableContent&&(l.dataForm.relateTableContent=JSON.parse(t.asset.relateTableContent)),t.asset.baseTableContent&&(l.dataForm.baseTableContent=JSON.parse(t.asset.baseTableContent)),l.filterMap=Object(__WEBPACK_IMPORTED_MODULE_8__components_extForm_filter_js__.c)(l.extInfo),l.$emit("getData",t.asset),l.initPropTableView(),l.getDataDo()}else l.getDataError=!0,l.$message({message:"数据已不存在！",type:"error",duration:1500,onClose:function(){}})});else{l.loading=!1,l.$emit("changeLoading",l.loading);var e={};l.initPropTableView(),l.getDataDo(),l.extInfo.forEach(function(t){e[t.key]=t,"dateTime"==t.type?t.defaultValueIsNow?l.dataForm.extContent[t.key]=(new Date).Format(t.dateType):l.dataForm.extContent[t.key]=t.defaultValue:t.defaultValue&&("selectStaff"==t.type&&(Object(__WEBPACK_IMPORTED_MODULE_6__utils__.u)(t.defaultValue)&&null!=t.defaultValue.userList?l.$http({url:l.$http.adornUrl("/sys/user/queryUserListByUserSelectConfig"),method:"post",data:l.$http.adornParams(t.defaultValue)}).then(function(e){var n=e.data;if(n&&0===n.code&&n.data)if(t.mustMultiple){var o=[];n.data.forEach(function(e){o.push(e.userId)}),l.$set(l.dataForm.extContent,t.key,o)}else{var i=n.data;n.data[0]&&(i=n.data[0].userId),l.$set(l.dataForm.extContent,t.key,i)}}):l.$set(l.dataForm.extContent,t.key,t.defaultValue)),"richText"==t.type?l.dataForm.extContent[t.key]=decodeURIComponent(t.defaultValue):l.dataForm.extContent[t.key]=t.defaultValue);var n=l.$route.name.split("@")[1];"relateTable"==t.type&&t.relateTableName==n&&(l.dataForm.extContent[t.key]=l.extId,!l.dataForm.id&&l.isChildView?l.noshowList=[t.key]:l.$http({url:l.$http.adornUrl("/common/common/"+(l.isOpen?"infoForPublicShare":"info")+"/"+t.relateTableName+"/"+l.extId),method:"get",params:l.$http.adornParams()}).then(function(e){var n=e.data;n&&0===n.code&&l.$set(l.dataForm.relateTableContent,t.key,JSON.parse(n.asset.extContent))}))}),l.setRelateTableCheck(e),l.checkDefaultValueFormule()}});case 12:case"end":return s.stop()}},s,l)}))()},setRelateTableCheck:function(e){var t={};this.extInfo.forEach(function(n){"relateTable"==n.type&&n.dataFilterInfo&&n.dataFilterInfo.length&&n.dataFilterInfo.forEach(function(o){o.forEach(function(o){e[o.field]&&(!t[o.field]&&(t[o.field]=[]),t[o.field].push(n.key)),console.log(o)})})}),this.rtNeedChangeMap=t,console.log(t)},cancle:function(){this.isCachedChildrenTableData&&this.$http({url:this.$http.adornUrl("/common/common/clearCacheData/"+this.tableName),method:"post",data:this.$http.adornData({tempChildrenTableExtId:this.tempChildrenTableExtId})}).then(function(e){var t=e.data;t&&t.code})},save:function(e,t){var n=this;this.propTableExt.length>0?(this.propTableSavedMap=[],this.propTableExt.forEach(function(e){n.$refs[e.key]&&n.$refs[e.key][0]&&(n.dataForm.extContent[e.key]=n.$refs[e.key][0].save(!0,e.key))})):this.dataFormSubmit(e,t)},dataFormSubmit:function(e,t){var n=this;return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function o(){return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a(function(){var o=__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function o(i,a){return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:console.log(n.dataForm.extContent),n.$refs.dataForm.validate(function(){var o=__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function o(a){var r,l,s;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log(a),!a){o.next=13;break}return r=Object(__WEBPACK_IMPORTED_MODULE_6__utils__.e)(n.dataForm.extContent),n.extInfo.forEach(function(e){"richText"==e.type&&r[e.key]&&(r[e.key]=encodeURIComponent(r[e.key])),"integer"==e.type&&r[e.key]&&(r[e.key]=parseInt(r[e.key])),"float"==e.type&&r[e.key]&&(r[e.key]=parseFloat(r[e.key]))}),r.relateTableContent&&delete r.relateTableContent,l={id:n.dataForm.id||(n.isCachedChildrenTableData?n.tempChildrenTableExtId:void 0),extId:null!=n.extId&&""!=n.extId?n.extId:null,extKey:null!=n.extKey&&""!=n.extKey?n.extKey:null,parentId:n.parentId,extContent:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(r)},console.log(n.tableDefine,n.tableName,1123123123),s=void 0,s=null!=n.tableDefine.saveApi&&""!=n.tableDefine.saveApi?n.tableDefine.saveApi+"/"+n.tableName:null!=n.tableDefine.updateApi&&""!=n.tableDefine.updateApi?n.tableDefine.updateApi+"/"+n.tableName:"/common/common/"+(n.dataForm.id?"update":"save")+(n.isOpen?"ForPublicShare":"")+"/"+n.tableName,o.next=11,n.$http({url:n.$http.adornUrl(s),method:"post",data:n.$http.adornData(l)}).then(function(o){var a=o.data;if(a&&0===a.code){n.visible=!1,n.$emit("refreshDataList"),n.$emit("close"),n.dataForm.id||n.$emit("onAddNewData");var r=void 0;n.dataForm.id?(r=n.dataForm.id,n.$emit("updatedData",r,l,t)):(l.id=a.id,r=a.id,n.$emit("savedData",r,l,t)),e||n.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}}),i(r)}else a&&504===a.code?(n.$emit("saveError",t),n.$XModal.alert({message:a.data,title:"保存失败",status:"error"})):(n.$emit("saveError",t),n.$XModal.alert({message:a.msg||"未知错误！",title:"保存失败",status:"error"}))});case 11:o.next=15;break;case 13:n.$emit("saveError",t),n.$XModal.alert({message:"请检查必填项是否都已填写",title:"保存失败",status:"error"});case 15:case"end":return o.stop()}},o,n)}));return function(e){return o.apply(this,arguments)}}());case 2:case"end":return o.stop()}},o,n)}));return function(e,t){return o.apply(this,arguments)}}()));case 1:case"end":return o.stop()}},o,n)}))()}}}},crIV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("BUU0"),r=n("0xDb"),l={props:{exts:{default:[]}},inject:["dataForm"],components:{commonLayout:a.a},data:function(){return{numList:["integer","float"],seriesTypeList:[{label:"折线图",value:"line"},{label:"柱状图",value:"bar"},{label:"饼图",value:"pie"}],selectItem:null,charts:[],oldData:null}},methods:{deleteItem:function(e,t){this.charts.splice(t,1)},select:function(e){this.selectItem=e},addItem:function(){var e=Object(r.e)(this.charts);for(var t in e.push({x:0,y:0,w:5,h:6,seriesType:"",itemType:"charts",X:"",Y:""}),e)e[t].i=t+"";this.charts=e},init:function(e){this.charts=e||[],this.oldData=this.getSaveData()},contrast:function(){return this.oldData==this.getSaveData()},save:function(){var e=this;if(this.contrast())this.$emit("saveSuccess");else{var t=this.getSaveData();this.$http({url:this.$http.adornUrl("/common/commondefine/updateChartDesign"),method:"post",data:this.$http.adornParams({commonDefineId:this.dataForm.id,configInfo:t})}).then(function(t){var n=t.data;n&&0===n.code?(e.$emit("saveSuccess"),e.oldData=e.getSaveData()):e.$message.error(n.msg)})}},updataEcharts:function(){var e=this;this.$nextTick(function(){e.$refs.commonLayout.updataEcharts()})},getSaveData:function(){return i()(this.charts)}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row",staticStyle:{"padding-bottom":"10px"}},[n("div",{staticClass:"left-box"},[n("div",{staticClass:"text-center btn",attrs:{title:"新增"},on:{click:e.addItem}},[n("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"26px"}})])]),e._v(" "),n("div",{staticClass:"col bg"},[n("commonLayout",{ref:"commonLayout",attrs:{list:e.charts,isEdit:!0},on:{select:e.select,delete:e.deleteItem}})],1),e._v(" "),n("div",{staticClass:"base-padding right-box",staticStyle:{"flex-wrap":"wrap"}},[e.selectItem?e._e():n("div",[n("el-alert",{attrs:{title:"点击左方图表进行选择",type:"success",center:""}})],1),e._v(" "),e.selectItem?n("el-form",{staticClass:"chart-card",attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"图表名称"}},[n("el-input",{model:{value:e.selectItem.name,callback:function(t){e.$set(e.selectItem,"name",t)},expression:"selectItem.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"图表类型"}},[n("el-select",{staticClass:"w100",model:{value:e.selectItem.seriesType,callback:function(t){e.$set(e.selectItem,"seriesType",t)},expression:"selectItem.seriesType"}},e._l(e.seriesTypeList,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("div",[n("el-form-item",{attrs:{label:"pie"==e.selectItem.seriesType?"维度":"图表X轴"}},[n("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.selectItem.X,callback:function(t){e.$set(e.selectItem,"X",t)},expression:"selectItem.X"}},[n("el-option",{key:"createdAt",attrs:{label:"创建时间",value:"createdAt"}}),e._v(" "),n("el-option",{key:"updatedAt",attrs:{label:"更新时间",value:"updatedAt"}}),e._v(" "),e._l(e.exts,function(e){return n("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:"pie"==e.selectItem.seriesType?"数值":"图表Y轴"}},[n("el-select",{staticClass:"w100",attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.selectItem.Y,callback:function(t){e.$set(e.selectItem,"Y",t)},expression:"selectItem.Y"}},e._l(e.exts,function(t){return e.numList.includes(t.type)?n("el-option",{key:t.key,attrs:{label:t.name,value:t.key}}):e._e()}),1)],1)],1)],1):e._e()],1)])},staticRenderFns:[]};var c=n("VU/8")(l,s,!1,function(e){n("PpY9")},"data-v-7aae5bea",null);t.default=c.exports},d4tr:function(e,t){},d9tQ:function(e,t){},"dA9+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("LokH"),i=n("KmbY"),a={components:{AddOrUpdate:o.default,AddOrUpdateSqlTable:i.default},methods:{init:function(e,t,n){var o=this;n?this.$nextTick(function(){o.$refs.addOrUpdateSql.init(e,t)}):this.$nextTick(function(){o.$refs.addOrUpdate.init(e,t)}),console.log(e,t,n)},getDataList:function(){this.$emit("refreshDataList")}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:this.getDataList}}),this._v(" "),t("AddOrUpdateSqlTable",{ref:"addOrUpdateSql",on:{refreshDataList:this.getDataList}})],1)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("6f7G")},"data-v-b1214126",null);t.default=l.exports},dGgB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-shanchu",use:"icon-shanchu-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-shanchu"><defs><style type="text/css"></style></defs><path d="M909.050991 169.476903l-217.554898 0 0-31.346939c0-39.5866-32.205493-71.792093-71.793116-71.792093L408.15591 66.337871c-39.5866 0-71.792093 32.205493-71.792093 71.792093l0 31.346939L113.349581 169.476903c-11.013845 0-19.942191 8.940626-19.942191 19.954471s8.928347 19.954471 19.942191 19.954471l84.264149 0 0 640.687918c0 60.479443 49.203632 109.683075 109.683075 109.683075l416.474366 0c60.479443 0 109.683075-49.203632 109.683075-109.683075L833.454246 209.385844l75.595722 0c11.012821 0 19.942191-8.940626 19.942191-19.954471S920.063813 169.476903 909.050991 169.476903zM376.2482 138.130987c0-17.593703 14.314007-31.907711 31.907711-31.907711l211.547067 0c17.593703 0 31.907711 14.314007 31.907711 31.907711l0 31.346939L376.2482 169.477926 376.2482 138.130987zM793.569864 850.074785c0 38.486546-31.312146 69.798692-69.798692 69.798692L307.297828 919.873478c-38.486546 0-69.798692-31.312146-69.798692-69.798692L237.499136 211.042577l556.070728 0L793.569864 850.074785z" p-id="3130" /><path d="M510.662539 861.276918c11.012821 0 19.954471-8.92937 19.954471-19.942191L530.61701 294.912753c0-11.013845-8.94165-19.942191-19.954471-19.942191s-19.954471 8.928347-19.954471 19.942191L490.708068 841.334727C490.708068 852.347548 499.649717 861.276918 510.662539 861.276918z" p-id="3131" /><path d="M374.562814 801.449321c11.012821 0 19.954471-8.92937 19.954471-19.942191L394.517285 354.74035c0-11.013845-8.94165-19.942191-19.954471-19.942191s-19.954471 8.928347-19.954471 19.942191l0 426.76678C354.608344 792.519951 363.549993 801.449321 374.562814 801.449321z" p-id="3132" /><path d="M649.832182 801.449321c11.012821 0 19.954471-8.92937 19.954471-19.942191L669.786653 354.74035c0-11.013845-8.94165-19.942191-19.954471-19.942191s-19.954471 8.928347-19.954471 19.942191l0 426.76678C629.877711 792.519951 638.81936 801.449321 649.832182 801.449321z" p-id="3133" /></symbol>'});r.a.add(l);t.default=l},dLb2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),l=n("N2OJ"),s=n("16XU"),c=n("0xDb"),u={name:"自定义按钮",color:localStorage.getItem("theme"),robotId:null,conditionRuleRobotId:null,openCondition:"alway",clickAction:"now",didAction:"close",follow:!0,tipsText:"你确认对当前数据执行此操作吗？",confirmText:"确认",cancelText:"取消",position:null},d={props:{dataForm:{},exts:{type:Array,default:function(){return[]}}},components:{rulesScreen:l.a,robotEditDialog:s.default},data:function(){return{visible:!1,winshow:!1,form:Object(c.e)(u),nowRobot:null,predefineColors:c.f}},methods:{init:function(e,t){this.visible=!0,e?(this.form=Object(c.e)(e),console.log(e)):(this.form=Object(c.e)(u),this.form.position=t)},save:function(){var e=this;this.$http({url:this.$http.adornUrl("/common/commondefine/"+(this.form.id?"updateCustomBtn":"addCustomBtn")),method:"post",data:this.$http.adornData({customBtnInfo:this.form,commonDefineId:this.dataForm.id,id:this.form.id,robotId:this.form.robotId})}).then(function(t){var n=t.data;n&&0===n.code?(e.$emit("save",n.data),e.visible=!1):e.$message.error(n.msg)})},cancle:function(){this.visible=!1},robotOpen:function(){var e=this;return r()(i.a.mark(function t(){var n,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.winshow=!0,e.nowRobot="robotId",n=e.form.robotId,o=void 0,"operate"==e.form.position||null==e.form.position?o=2:"tools"==e.form.position&&(o=5),e.$nextTick(function(){e.$refs.robotEdit.init("自定义按钮机器人配置",n,o,{name:"自定义按钮机器人配置"},e.dataForm.tableName)});case 6:case"end":return t.stop()}},t,e)}))()},conditionRobotOpen:function(){var e=this;console.log(this.form),this.winshow=!0,this.nowRobot="conditionRuleRobotId";var t=this.form.conditionRuleRobotId;this.$nextTick(function(){e.$refs.robotEdit.init("筛选条件配置",t,4,{name:"筛选条件配置"},e.dataForm.tableName)})},robotCancle:function(){},robotSaved:function(e){console.log(e),this.form[this.nowRobot]=e.robotId,this.winshow=!1}},mounted:function(){}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.visible?n("vxe-modal",{attrs:{resize:"",width:"700px",height:"600px",title:"自定义按钮"},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[e._v("\n                自定义按钮\n                "),n("div",{staticClass:"col"}),e._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},on:{click:e.cancle}},[e._v("取消")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)]},proxy:!0}],null,!1,4093060915),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{padding:"15px 0 0 15px"}},[n("div",{staticClass:"item-box"},[n("div",{staticClass:"title"},[e._v("按钮文案")]),e._v(" "),n("div",[n("el-input",{attrs:{size:"medium"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)]),e._v(" "),n("div",{staticClass:"item-box"},[n("div",{staticClass:"title"},[e._v("按钮颜色")]),e._v(" "),n("div",{staticClass:"row"},[n("el-color-picker",{attrs:{predefine:e.predefineColors,disabled:e.form.follow},model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}}),e._v(" "),n("div",{staticStyle:{"margin-left":"20px","padding-top":"2px"}},[n("el-checkbox",{model:{value:e.form.follow,callback:function(t){e.$set(e.form,"follow",t)},expression:"form.follow"}},[e._v("颜色跟随系统")])],1)],1)])]),e._v(" "),n("div",{staticStyle:{width:"300px",padding:"15px 20px"}},[n("div",{staticClass:"btn-view"},[n("span",{staticClass:"position-absolute",staticStyle:{right:"20px",top:"10px"}},[e._v("预览")]),e._v(" "),n("el-button",{style:"background-color: "+e.form.color+";border-color: "+e.form.color+";",attrs:{type:"primary"}},[e._v(e._s(e.form.name))])],1)])]),e._v(" "),n("div",{staticStyle:{padding:"0 15px"}},[n("div",{staticClass:"item-box"},[n("div",{staticClass:"title"},[e._v("启用按钮")]),e._v(" "),n("div",[n("el-radio",{attrs:{label:"alway"},model:{value:e.form.openCondition,callback:function(t){e.$set(e.form,"openCondition",t)},expression:"form.openCondition"}},[e._v("一直")]),e._v(" "),n("el-radio",{attrs:{label:"condition"},model:{value:e.form.openCondition,callback:function(t){e.$set(e.form,"openCondition",t)},expression:"form.openCondition"}},[e._v("满足筛选条件")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"condition"==e.form.openCondition,expression:"form.openCondition == 'condition'"}],staticClass:"mt-10"},[n("el-button",{attrs:{type:"primary"},on:{click:e.conditionRobotOpen}},[e._v("配置逻辑块")])],1)]),e._v(" "),n("div",{staticClass:"item-box"},[n("div",{staticClass:"title"},[e._v("点击后")]),e._v(" "),n("div",[n("el-radio",{attrs:{label:"now"},model:{value:e.form.clickAction,callback:function(t){e.$set(e.form,"clickAction",t)},expression:"form.clickAction"}},[e._v("立即执行")]),e._v(" "),n("el-radio",{attrs:{label:"confirm"},model:{value:e.form.clickAction,callback:function(t){e.$set(e.form,"clickAction",t)},expression:"form.clickAction"}},[e._v("需要二次确认")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"confirm"==e.form.clickAction,expression:"form.clickAction == 'confirm'"}],staticClass:"or-box mt-10"},[n("div",{staticClass:"item-box row"},[n("div",{staticClass:"title"},[e._v("提示文字:")]),e._v(" "),n("div",{staticClass:"col"},[n("el-input",{attrs:{size:"mini"},model:{value:e.form.tipsText,callback:function(t){e.$set(e.form,"tipsText",t)},expression:"form.tipsText"}})],1)]),e._v(" "),n("div",{staticClass:"item-box row"},[n("div",{staticClass:"title"},[e._v("确认按钮文字:")]),e._v(" "),n("div",{staticClass:"col"},[n("el-input",{attrs:{size:"mini"},model:{value:e.form.confirmText,callback:function(t){e.$set(e.form,"confirmText",t)},expression:"form.confirmText"}})],1)]),e._v(" "),n("div",{staticClass:"item-box row"},[n("div",{staticClass:"title"},[e._v("取消按钮文字:")]),e._v(" "),n("div",{staticClass:"col"},[n("el-input",{attrs:{size:"mini"},model:{value:e.form.cancelText,callback:function(t){e.$set(e.form,"cancelText",t)},expression:"form.cancelText"}})],1)])])]),e._v(" "),n("div",{staticClass:"item-box"},[n("div",{staticClass:"title"},[e._v("执行动作")]),e._v(" "),n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.robotOpen}},[e._v("配置机器人")])],1)]),e._v(" "),n("div",{staticClass:"item-box"},[n("div",{staticClass:"title"},[e._v("执行完成后")]),e._v(" "),n("div",[n("el-radio",{attrs:{label:"close"},model:{value:e.form.didAction,callback:function(t){e.$set(e.form,"didAction",t)},expression:"form.didAction"}},[e._v("关闭")]),e._v(" "),n("el-radio",{attrs:{label:"dontClose"},model:{value:e.form.didAction,callback:function(t){e.$set(e.form,"didAction",t)},expression:"form.didAction"}},[e._v("不关闭")])],1)])])]):e._e(),e._v(" "),e.winshow?n("robotEditDialog",{ref:"robotEdit",on:{robotSaved:e.robotSaved}}):e._e()],1)},staticRenderFns:[]};var f=n("VU/8")(d,h,!1,function(e){n("g5U1")},"data-v-dda23d06",null);t.default=f.exports},dTD7:function(e,t,n){"use strict";var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),l=n("0xDb"),s={props:{modelDate:{},accept:{},limit:{default:1}},watch:{modelDate:{handler:function(e,t){this.fileList=this.modelDate},immediate:!0,deep:!0}},data:function(){return{fileList:[],formData:{},processMap:{},url:""}},methods:{handleExceed:function(e,t){console.log(e,t,this.fileList),this.$message.warning("当前限制选择 "+this.limit+" 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeAvatarUpload:function(e){var t=this;return r()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.modelDate||!Array.isArray(t.modelDate)){n.next=4;break}if(!(t.modelDate.length>t.limit-1)){n.next=4;break}return t.$message.warning("最多只能上传"+t.limit+"个"),n.abrupt("return",!1);case 4:return t.$set(t.processMap,e.uid,1),t.$emit("beforeUpload",e,Object(l.e)(t.processMap)),n.next=8,t.$http({url:t.$http.adornUrl("/sys/oss/getUploadToken"),method:"get",data:{}}).then(function(n){var o=n.data.data;t.url=o.url,t.formData={key:o.dir+"/"+e.name,policy:o.policy,OSSAccessKeyId:o.accessid,signature:o.signature,callback:o.callback}});case 8:case"end":return n.stop()}},n,t)}))()},successHandle:function(e,t,n){"string"==typeof e&&-1!=e.indexOf("Error")?(this.$message.error("上传失败"),this.$emit("onError",e,t,n,this.url)):this.$emit("onSuccess",e,t,n,this.url)},uploadProcess:function(e,t,n){this.$set(this.processMap,t.uid,new Number(e.percent.toFixed(0))),this.$emit("uploadProcess",Object(l.e)(this.processMap))}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-upload",{attrs:{action:e.url,"file-list":e.fileList,multiple:"",limit:e.limit,accept:e.accept,data:e.formData,"show-file-list":!1,"before-upload":e.beforeAvatarUpload,"on-exceed":e.handleExceed,"on-success":e.successHandle,"on-progress":e.uploadProcess}},[e._t("default")],2)],1)},staticRenderFns:[]};var u=n("VU/8")(s,c,!1,function(e){n("wiAh")},"data-v-48101946",null);t.a=u.exports},dUnL:function(e,t){},dVxt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("Xf8N"),r=n("xstH"),l=n("8skB"),s=n("TN+i"),c=n("0xDb"),u={components:{selectStaff:r.a,clickInput:a.a,selectForm:l.a,rules:s.a},props:{d:{},exts:{},dataForm:{}},model:{prop:"d",event:"change"},watch:{d:{handler:function(e){this.getData()},deep:!0,immediate:!0}},data:function(){return{baseData:{name:"",selectTableName:""}}},methods:{selectOpt:function(e){this.selectTableName=e},save:function(){if(this.baseData.name){this.$refs.rules.saveData();var e={type:"add",destTableName:this.selectTableName};i()(this.baseData.info,e),this.$set(this.d,"info",this.baseData.info),this.$set(this.d,"name",this.baseData.name),this.$message.success("保存配置成功"),this.$emit("close")}else this.$message.error("请输入节点名称")},getData:function(){var e=this;this.baseData=Object(c.e)(this.d),this.selectTableName=this.baseData.info.destTableName,this.$nextTick(function(){e.$refs.rules.getData()})}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[n("div",{staticClass:"col"},[n("div",{staticClass:"top-title"},[n("div",{staticClass:"t-title"},[n("clickInput",{model:{value:e.baseData.name,callback:function(t){e.$set(e.baseData,"name",t)},expression:"baseData.name"}})],1)]),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("负责人")]),e._v(" "),n("selectStaff",{attrs:{single:""},model:{value:e.baseData.info.adminId,callback:function(t){e.$set(e.baseData.info,"adminId",t)},expression:"baseData.info.adminId"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("目标表单")]),e._v(" "),n("selectForm",{attrs:{exts:e.exts,dataForm:e.dataForm},on:{tableName:e.selectOpt},model:{value:e.baseData.info.formId,callback:function(t){e.$set(e.baseData.info,"formId",t)},expression:"baseData.info.formId"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("创建规则")]),e._v(" "),n("rules",{ref:"rules",attrs:{exts:e.exts,formId:e.baseData.info.formId},model:{value:e.baseData.info.rules,callback:function(t){e.$set(e.baseData.info,"rules",t)},expression:"baseData.info.rules"}})],1)]),e._v(" "),n("div",{staticClass:"foot-box"},[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.save}},[e._v("保存配置")])],1)])},staticRenderFns:[]};var h=n("VU/8")(u,d,!1,function(e){n("t4PW")},"data-v-a6873df2",null);t.default=h.exports},dcie:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={extends:n("kN15").default,name:"conditionLogic",created:function(){this.title="条件判断",this.tips="设置条件，判断当前块的表单数据是否满足条件，满足则为真，否则为假"}},i=n("VU/8")(o,null,!1,null,null,null);t.default=i.exports},ds3v:function(e,t,n){"use strict";var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),l=n("mvHQ"),s=n.n(l),c={components:{titeView:n("lMLl").a},props:{isEdit:{},itemOption:{}},data:function(){return{opt:null,list:[],menuList:[],menuMap:{},dynamicMenuRoutes:JSON.parse(sessionStorage.getItem("dynamicMenuRoutes")||"[]")}},methods:{onCtrDataChange:function(e){},gotoRouteHandle:function(e){var t=this.dynamicMenuRoutes.filter(function(t){return t.meta.menuId===e.menuId});t.length>=1&&this.$router.push({name:t[0].name})},setting:function(){this.$emit("starSetting",this.opt,this.menuList,this.menuMap)},init:function(){var e=this;this.$http({url:this.$http.adornUrl("/common/commoncommonusemenu/infoByAppId/"+JSON.parse(localStorage.getItem("app")).appId),method:"get"}).then(function(t){var n=t.data;n&&0===n.code&&(e.opt=n.commonCommonUseMenu,e.list=e.opt?JSON.parse(e.opt.content):[],localStorage.setItem("db_cache"+e.itemOption.id,s()(e.list)))})}},mounted:function(){var e=this;return r()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.menuList=JSON.parse(localStorage.getItem("db_cache_menuList")),null!=e.menuList&&e.menuList.forEach(function(t){e.menuMap[t.menuId]=t}),e.list=JSON.parse(localStorage.getItem("db_cache"+e.itemOption.id)),e,t.next=6,e.$http({url:e.$http.adornUrl("/sys/menu/nav"),method:"get",params:e.$http.adornParams({appId:JSON.parse(localStorage.getItem("app")).appId})}).then(function(t){var n=t.data;if(n&&0===n.code){var o=[];n.menuList.forEach(function(e){0==e.type?e.list.forEach(function(e){o.push(e)}):o.push(e)}),e.menuList=o,e.menuMap={},e.menuList.forEach(function(t){e.menuMap[t.menuId]=t}),localStorage.setItem("db_cache_menuList",s()(e.menuList))}});case 6:e.init();case 7:case"end":return t.stop()}},t,e)}))()}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("titeView",{attrs:{itemOption:e.itemOption},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"h100 w100 column",staticStyle:{padding:"15px"}},[e.isEdit?n("div",{staticClass:"col column isedit-box"},[n("div",{staticClass:"col text-center center"},[n("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"36px"}})]),e._v(" "),n("div",{staticClass:"text-center",staticStyle:{"margin-bottom":"20px"}},[e._v("成员可根据使用习惯，将菜单添加至此")])]):n("div",{staticClass:"col column",staticStyle:{overflow:"auto"}},[0==e.list.length?n("div",{staticClass:"col column isedit-box"},[n("div",{staticClass:"col text-center center",staticStyle:{cursor:"pointer"},on:{click:function(t){return t.stopPropagation(),e.setting(t)}}},[n("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"36px"}})]),e._v(" "),n("div",{staticClass:"text-center",staticStyle:{"margin-bottom":"20px"}},[e._v("成员可根据使用习惯，将菜单添加至此")])]):n("div",{staticClass:"row",staticStyle:{"flex-wrap":"wrap"}},e._l(e.list,function(t){return e.menuMap[t]?n("div",{staticClass:"star-item main-color",on:{click:function(n){return e.gotoRouteHandle(e.menuMap[t])}}},[n("div",{},[n("icon-svg",{staticClass:"menu-icon",attrs:{name:e.menuMap[t].icon||""}})],1),e._v(" "),n("p",[e._v(e._s(e.menuMap[t].name))])]):e._e()}),0),e._v(" "),n("div",{staticClass:"btns"},[n("i",{staticClass:"el-icon-edit col",attrs:{title:"常用管理"},on:{click:function(t){return t.stopPropagation(),e.setting(t)}}})])])])]},proxy:!0}])})},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(e){n("Uvc6")},"data-v-57f62b24",null);t.a=d.exports},"e4/+":function(e,t,n){"use strict";t.b=function(e,t,n){e.$http({url:e.$http.adornUrl("/robot/commonrobot/robotDo"),method:"post",data:e.$http.adornData(t)}).then(function(t){var o=t.data;o&&0===o.code?o.data&&o.data.isOpenRobotDialog?r(e,o.data,null,n):n(o):e.$message.error(o.msg)})},t.a=r;var o=n("mvHQ"),i=n.n(o),a=n("Ib3M");function r(e,t,n,o){console.log(t,9e8);var r=JSON.parse(t.openDialogConfig);if(t.openRobotDialogType==a.a.ADD_OR_UPDATE_COMMON_DATA){var s=void 0;if(r.extId&&t.jsVarMap){var c=JSON.parse(t.jsVarMap)[r.extId.extIdVariable];c&&"v_type_common_data"==c.varType&&(s="id"==r.extId.extIdValue?c.object.id:c.object.extContentJson[r.extId.extIdValue])}console.log(s,r.extId,r.extKey,t.jsVarMap,990988),e.$gRobotDialog.show(a.a.ADD_OR_UPDATE_COMMON_DATA,{id:r.tableVarId,isView:!1,tableName:r.tableName,filtFieldRules:r.rules,extId:s,extKey:r.extKey,jsVarMap:t.jsVarMap},function(a){var s={};s[r.variableName]=encodeURIComponent(i()(a)),n?n(!1,s):l(e,t,s,o)})}else if(t.openRobotDialogType==a.a.SELECT_ONE_UPDATE_COMMON_DATA)e.$gRobotDialog.show(a.a.SELECT_ONE_UPDATE_COMMON_DATA,{tableName:r.tableName,filtFieldRules:r.rules},function(i){var a={};a[r.variableName]=i,n?n(!1,a):l(e,t,a,o)});else if(t.openRobotDialogType==a.a.SELECT_ONE_COMMON_DATA)e.$gRobotDialog.show(a.a.SELECT_ONE_COMMON_DATA,{tableName:r.tableName,filtFieldRules:r.rules},function(i){var a={};a[r.variableName]=i,n?n(!1,a):l(e,t,a,o)});else if(t.openRobotDialogType==a.a.SELECT_MULTI_COMMON_DATA)e.$gRobotDialog.show(a.a.SELECT_MULTI_COMMON_DATA,{tableName:r.tableName,filtFieldRules:r.rules},function(i){var a={};a[r.variableName]=i,n?n(!1,a):l(e,t,a,o)});else if(t.openRobotDialogType==a.a.VIEW_COMMON_DATA)e.$gRobotDialog.show(a.a.VIEW_COMMON_DATA,{id:r.tableVarId,isView:!1,tableName:r.tableName,filtFieldRules:r.rules,jsVarMap:t.jsVarMap},function(a){var s={};s[r.variableName]=encodeURIComponent(i()(a)),n?n(!1,s):l(e,t,s,o)});else if(t.openRobotDialogType==a.a.OPEN_MSG_BOX){var u={};n?n(!1,u):l(e,t,u,o),e.$XModal.alert(r.info)}else if(t.openRobotDialogType==a.a.OPEN_CONFIRM_DIALOG)e.$XModal.confirm(r.content,r.title).then(function(i){var a={};"confirm"==i?a[t.robotDialogVarName]="confirm":(i="cancle")&&(a[t.robotDialogVarName]="cancle"),n?n(!1,a):l(e,t,a,o)});else if(t.openRobotDialogType==a.a.SHOW_TOAST){e.$XModal.message(r.info);var d={};n?n(!1,d):l(e,t,d,o)}else t.openRobotDialogType==a.a.OPEN_DASHBOARD&&e.$gRobotDialog.show(a.a.OPEN_DASHBOARD,r,function(i){var a={};n?n(!1,a):l(e,t,a,o)})}function l(e,t,n,o){var i={};i.tempRobotId=t.tempRobotId,i.breakStep=t.breakStep,i.changeVarValue=n,e.$loading.show(),e.$http({url:e.$http.adornUrl("/robot/commonrobot/robotNextDo"),method:"post",data:i}).then(function(t){var n=t.data;0==n.code?n.data.isOpenRobotDialog?r(e,n.data,null,o):(e.$loading.hide(),o(n)):e.$message.error(n.msg)})}},e6aj:function(e,t){},eBdc:function(e,t){},eBok:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("YBOz"),i={props:{isOpen:{default:!1,type:Boolean}},data:function(){return{id:null,createrId:null,tableName:"",key:null,visible:!1,customBtn:[],canEdit:!1,tableProp:{openOpt:{privateExts:[],openName:"",canSearch:!1,canEdit:!1,canDelete:!1,canInsert:!1}}}},components:{customButtom:o.a},computed:{userInfo:{get:function(){return this.$store.state.user}},checkRowCanEdit:function(){return this.isOpen?this.tableProp.openOpt.canEdit:!!this.tableProp&&(this.tableProp.onlyCreaterCanEdit?this.userInfo.id==this.createrId:!!this.tableProp.canEdit)}},mounted:function(){},methods:{getInfoByTable:function(e){var t=this;this.tableProp=JSON.parse(e.tableProp);var n=e.customView?JSON.parse(e.customView):null;n&&(this.customBtn=[],n.customBtn&&n.customBtn.forEach(function(e){"operate"==e.position&&t.customBtn.push(e)}),this.$nextTick(function(){t.$refs.customButtom.getEnableInfo()}))},btnSuccess:function(){this.init(this.id,this.tableName)},goedit:function(){this.visible=!1,this.$emit("edit",this.id,this.tableName)},init:function(e,t,n){var o=this;this.id=e,this.tableName=t,this.createrId=n.createrId,this.visible=!0,this.$nextTick(function(){o.$refs.CommonAddOrUpdateView.init(e,!0,t,null)})},close:function(){this.$emit("close"),this.visible=!1}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("vxe-modal",{attrs:{width:"90%",height:"90%",resize:"",remember:"",title:"查看"},on:{close:e.close},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title",[n("div",{staticClass:"row"},[n("span",[e._v("查看")]),e._v(" "),n("customButtom",{ref:"customButtom",staticStyle:{"margin-left":"15px"},attrs:{btns:e.customBtn,tableName:e.tableName,tableDataId:e.id},on:{success:e.btnSuccess}}),e._v(" "),n("div",{staticClass:"col"}),e._v(" "),e.checkRowCanEdit?n("el-button",{attrs:{type:"primary"},on:{click:e.goedit}},[e._v("\n            编辑\n          ")]):e._e()],1)])]},proxy:!0}],null,!0),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(" "),n("common-add-or-update-view",{ref:"CommonAddOrUpdateView",attrs:{isOpen:e.isOpen},on:{close:e.close,getInfoByTable:e.getInfoByTable}})],1):e._e()},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("prwv")},"data-v-08ce38ec",null);t.default=r.exports},eD0e:function(e,t){},eUFb:function(e,t){},"eVS/":function(e,t){},eZ11:function(e,t,n){var o={"./icon-admin.svg":"6sdf","./icon-bianji.svg":"LlQS","./icon-config.svg":"DsnQ","./icon-dangdifill.svg":"2Cd2","./icon-daohang.svg":"LqJT","./icon-duanxin.svg":"YXyf","./icon-editor.svg":"0TsT","./icon-geren.svg":"P3OB","./icon-jiesuo.svg":"sOwB","./icon-job.svg":"cFoh","./icon-log.svg":"yCXC","./icon-menu.svg":"Og7c","./icon-mudedi.svg":"hhw/","./icon-oss.svg":"EkDd","./icon-pinglun.svg":"+aBt","./icon-role.svg":"kMeK","./icon-shanchu.svg":"dGgB","./icon-shezhi.svg":"UQPm","./icon-shoucang.svg":"ELti","./icon-shoucangfill.svg":"/90L","./icon-shouye.svg":"GIrI","./icon-sousuo.svg":"MSZQ","./icon-sql.svg":"Vzxs","./icon-suoding.svg":"HRKG","./icon-system.svg":"9Rh0","./icon-tixing.svg":"DeBA","./icon-tubiao.svg":"pc3V","./icon-xiangqu.svg":"y3Q9","./icon-xiangqufill.svg":"t+PV","./icon-zhedie.svg":"IeK1","./icon-zonghe.svg":"BClt"};function i(e){return n(a(e))}function a(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id="eZ11"},eoWL:function(e,t){},epNC:function(e,t){},evrY:function(e,t){},f3jY:function(e,t){},f69W:function(e,t){},"fC/n":function(e,t){},fC2b:function(e,t){},fFeC:function(e,t,n){"use strict";var o=n("Xxa5"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("exGp"),s=n.n(l),c=n("HEOI"),u=n("0xDb"),d={components:{tableSearch:c.a},props:{itemOption:{},isEdit:{}},watch:{date:function(e,t){var n=new Date(e),o=new Date(t);n.getMonth()!=o.getMonth()&&this.getDataList()}},data:function(){return{loading:!1,themeColor:localStorage.getItem("theme"),date:new Date,dateMap:{},dataForm:[],queryInfo:[],relateTaleFilter:{},baseTableFilter:{},stateColorMap:null,showQueryInfo:!1,fixedData:{creater:{show:!1,query:!1},createdAt:{show:!1,query:!1},updatedAt:{show:!1,query:!1}}}},methods:{onCtrDataChange:function(e){},goDate:function(e){var t=this.getConditionArr(),n={tableName:this.itemOption.tableName,month:new Date(this.date).Format("yyyy-MM"),startDate:this.itemOption.startDate,endDate:this.itemOption.endDate,condition:t};this.$emit("goDate",{condition:n,date:e})},gotoBaseDataTableForFilter:function(e,t,n){this.$emit("gotoBaseDataTableForFilter",{tableName:e,key:t,selectedId:n})},updateBaseDataFilterData:function(e,t){this.$set(this.baseTableFilter,e,t)},showChooseRelateTableForFilter:function(e,t,n,o){this.$emit("showChooseRelateTableForFilter",{tableName:e,key:t,selectedId:n,relateTableExtId:o})},updateRelateFilterData:function(e,t,n){this.$set(this.relateTaleFilter,e,n)},dealTimeString:function(e){var t=e.split(",");return"'"+t[0]+"' AND '"+t[1]+"'"},search:function(e,t,n){this.$set(this,"queryInfo",Object(u.e)(e));var o=[];n.createdAt&&n.createdAt.length>0&&o.push({key:"createdAt",value:this.dealTimeString(n.createdAt.toString()),type:"createdAt"}),n.updatedAt&&n.updatedAt.length>0&&o.push({key:"updatedAt",value:this.dealTimeString(n.updatedAt.toString()),type:"updatedAt"}),n.creater&&o.push({key:"creater",value:n.creater,type:"creater"}),this.$set(this,"dataForm",Object(u.e)(o)),this.getDataList()},clearSearchData:function(){this.$set(this,"queryInfo",[]),this.$set(this,"dataForm",[]),this.relateTaleFilter={},this.baseTableFilter={},this.getDataList()},getDate:function(e){var t=new Date(e).Format("yyyy-MM-dd");return!!this.dateMap[t]&&this.dateMap[t]},getConditionArr:function(){var e=[];for(var t in this.queryInfo.forEach(function(t){null!==t.value&&""!==t.value&&e.push({key:t.key,value:t.value,type:t.type})}),this.baseTableFilter)e.push({key:t,value:this.baseTableFilter[t].id,type:"integer"});for(var t in this.relateTaleFilter)e.push({key:t,value:this.relateTaleFilter[t].id,type:"integer"});return this.dataForm&&(e=e.concat(this.dataForm)),e},getDataList:function(){var e=this;this.loading=!0;var t=this.getConditionArr();this.$http({url:this.$http.adornUrl("/common/common/listForCalendar"),method:"post",data:{tableName:this.itemOption.tableName,month:new Date(this.date).Format("yyyy-MM"),startDate:this.itemOption.startDate,endDate:this.itemOption.endDate,condition:t,filter:this.itemOption.filter}}).then(function(t){var n=t.data;if(e.loading=!1,n&&n.data&&0===n.code){for(var o in n.data){n.data[o].forEach(function(e){e.extContent=JSON.parse(e.extContent),e.relateTableContent=JSON.parse(e.relateTableContent)})}e.dateMap=n.data}})},getExtInfo:function(){var e,t=this;this.queryInfo=[],this.$http({url:this.$http.adornUrl("/common/commondefine/infoByTable/"+this.itemOption.tableName),method:"get",params:this.$http.adornParams()}).then((e=s()(i.a.mark(function e(n){var o=n.data;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o&&0===o.code&&function(){t.extInfo=JSON.parse(o.assetExt.template);var e=null;for(var n in t.extInfo){var i=t.extInfo[n];i.query&&(i.value=null,t.$set(t.queryInfo,t.queryInfo.length,i)),t.itemOption.dateState&&i.key==t.itemOption.dateState&&(e={},i.selectItem.forEach(function(t){e[t.value]=t.color}))}t.stateColorMap=e,t.fixedData=JSON.parse(o.assetExt.fixedData||r()(t.fixedData)),(t.fixedData.createdAt.query||t.fixedData.creater.query||t.fixedData.id.query||t.fixedData.updatedAt.query)&&(t.showQueryInfo=!0)}();case 1:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}},mounted:function(){this.isEdit||(this.getExtInfo(),this.getDataList())}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"grid-card-dashboard h100 w100 calendar column"},[!e.isEdit&&(e.showQueryInfo||e.queryInfo.length>0)?n("tableSearch",{attrs:{queryInfo:e.queryInfo,relateTaleFilter:e.relateTaleFilter,baseTableFilter:e.baseTableFilter,fixedData:e.fixedData},on:{search:e.search,clear:e.clearSearchData,gotoBaseDataTableForFilter:e.gotoBaseDataTableForFilter,showChooseRelateTableForFilter:e.showChooseRelateTableForFilter}}):e._e(),e._v(" "),n("div",{staticClass:"col",staticStyle:{height:"0"}},[n("el-calendar",{staticClass:"h100 w100",scopedSlots:e._u([{key:"dateCell",fn:function(t){return[n("div",{staticClass:"h100 column"},[n("div",[e._v(e._s(new Date(t.date).Format("yyyy-MM-dd")))]),e._v(" "),e.getDate(t.date)?n("div",{staticClass:"col",staticStyle:{overflow:"auto"}},e._l(e.getDate(t.date),function(o){return n("div",{on:{click:function(n){return e.goDate(t.date)}}},[o.extContent&&e.itemOption.dateName?n("div",{staticClass:"date-card",style:"background-color: "+(e.itemOption.dateState&&e.stateColorMap?e.stateColorMap[o.extContent[e.itemOption.dateState]]:e.themeColor)},[e._v("\n                "+e._s(o.extContent[e.itemOption.dateName])+"\n              ")]):e._e()])}),0):e._e()])]}}]),model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)},staticRenderFns:[]};var f=n("VU/8")(d,h,!1,function(e){n("Tvox")},"data-v-31a242a9",null);t.a=f.exports},fXrb:function(e,t,n){"use strict";t.a=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null}},g5U1:function(e,t){},gVjM:function(e,t){},gf9G:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("0xDb"),r=n("N8cm"),l=n("TQvf"),s=n.n(l),c={components:{sqlComponent:r.default},props:{dataForm:{},value:{}},data:function(){return{exts:[],tableData:[],tableColumn:[],form:{sql:"",isChatPromptModel:!1,chatPrompt:""},pageSize:20,pageIndex:1,totalPage:0,tableList:[],tryLoading:!1,fieldConfig:{}}},methods:{copyText:function(e){var t=this,n=new s.a(e);n.on("success",function(e){t.$message.success("已复制"),n.destroy()}),n.on("error",function(e){t.$message.error("该浏览器不支持复制"),n.destroy()})},openConfig:function(e){this.$refs["xDown"+e].showPanel()},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.tryList()},currentChangeHandle:function(e){this.pageIndex=e,this.tryList()},save:function(){var e=this;if(!this.tableData.length)return this.$message.error("请先测试运行出数据，才能保存"),this.$emit("closeLoading"),!1;var t={commonDefineId:this.dataForm.id,isChatPromptModel:this.form.isChatPromptModel,fieldConfig:i()(this.fieldConfig)};this.form.isChatPromptModel?(t.chatPrompt=encodeURIComponent(this.$refs.sqlComponent.getValue()),t.sql=this.form.sql):t.sql=this.$refs.sqlComponent.getValue(),this.$http({url:this.$http.adornUrl("/common/commondefine/updateFormDesignBySqlSelect"),method:"post",data:this.$http.adornParams(t)}).then(function(t){var n=t.data;n&&0===n.code?e.$emit("saveSuccess"):(e.$emit("closeLoading"),e.$message.error(n.msg))})},init:function(e){var t=this;if(e.tableProp){var n=JSON.parse(e.tableProp);this.form.isChatPromptModel=n.isChatPromptModel,this.form.isChatPromptModel&&this.$nextTick(function(){t.$refs.sqlComponent.setValue(decodeURIComponent(n.chatPrompt))}),console.log(e,888798),e.templateJson.forEach(function(e){t.fieldConfig[e.name]=e}),this.getSqlString(n)}},getSqlString:function(e){var t=this;if(!e.sqlId)return this.form.sql="",!1;this.$http({url:this.$http.adornUrl("/sql/sqlapi/info/"+e.sqlId),method:"get"}).then(function(n){var o=n.data;o&&0===o.code&&(t.form.sql=o.sqlapi.content,e.isChatPromptModel||t.$nextTick(function(){t.$refs.sqlComponent.setValue(t.form.sql)}),t.oldData=Object(a.e)(t.form))})},changeModel:function(e){this.tableData=[],console.log(e)},contrast:function(){return i()(this.oldData)==i()(this.form)},tryListBtn:function(){this.pageIndex=1,this.tryList()},tryList:function(){var e=this,t=this.$refs.sqlComponent.getValue();if(!t)return this.tableData=[],this.pageIndex=1,!1;var n="",o={};this.form.isChatPromptModel?(n="/sql/sqlapi/queryListByChatGPT",o={page:this.pageIndex,limit:this.pageSize,prompt:t}):(n="/sql/sqlapi/queryListByOrgSqlString",o={page:this.pageIndex,limit:this.pageSize,sql:t}),this.tryLoading=!0,this.$http({url:this.$http.adornUrl(n),method:"post",data:this.$http.adornData(o)}).then(function(t){var n=t.data;if(e.tryLoading=!1,console.log(n),e.tableData=[],e.tableColumn=[],0==n.code){if(n.sql&&(e.form.sql=n.sql),n.page.list&&n.page.list.length){var o=n.page.list;e.tableData=o;var i=o[0];for(var a in i)e.tableColumn.push({field:a,title:a,slots:{header:"configHeader"}});e.totalPage=n.page.totalCount}}else e.$message.error(n.msg)})},clickTree:function(e){this.$set(this.tableList[e],"show",!this.tableList[e].show),console.log(e)},getBaseData:function(){var e=this;this.$http({url:this.$http.adornUrl("/common/commondefine/list"),method:"post",data:this.$http.adornParams({page:1,limit:999,tableType:"dataTable",appId:JSON.parse(localStorage.getItem("app")).appId})}).then(function(t){var n=t.data;if(n&&0===n.code&&n.page){e.tableList=n.page.list;var o=[];e.tableData.forEach(function(e){e.templateJson.forEach(function(e){o.push(e.name)})});var i={tableList:e.tableList,fieidList:o};e.$refs.sqlComponent.init(i)}else e.tableList=[]})}},mounted:function(){this.getBaseData()}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"h100 w100 row",staticStyle:{padding:"10px 20px 20px 0","line-height":"30px"}},[n("el-aside",{staticClass:"h100 ",staticStyle:{width:"400px","flex-shrink":"0"}},[n("div",{staticStyle:{"padding-left":"15px"}},[e._v("\n      数据源信息\n    ")]),e._v(" "),e._l(e.tableList,function(t,o){return n("div",{key:o},[n("div",{staticClass:"me-menu"},[n("i",{class:t.show?"el-icon-arrow-down":"el-icon-arrow-right",staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.clickTree(o)}}}),e._v(" "),n("span",[e._v(e._s(t.name))]),e._v(" "),n("el-button",{staticClass:"tag-read",attrs:{type:"text","data-clipboard-text":t.dbTableName},on:{click:function(t){return e.copyText(".tag-read")}}},[e._v("\n          "+e._s(t.dbTableName)+"\n        ")])],1),e._v(" "),t.show?n("div",e._l(t.templateJson,function(t){return n("div",{staticClass:"me-menu-item row"},[n("div",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),n("el-button",{staticClass:"tag-read2",staticStyle:{"margin-left":"15px"},attrs:{type:"text","data-clipboard-text":t.key},on:{click:function(t){return e.copyText(".tag-read2")}}},[e._v("\n            "+e._s(t.key)+"\n          ")])],1)}),0):e._e()])})],2),e._v(" "),n("el-container",[n("div",{staticClass:"col column",staticStyle:{"padding-left":"10px",width:"0"}},[n("div",{staticClass:"row mb-10"},[n("el-radio",{attrs:{label:!0},on:{input:e.changeModel},model:{value:e.form.isChatPromptModel,callback:function(t){e.$set(e.form,"isChatPromptModel",t)},expression:"form.isChatPromptModel"}},[e._v("chatgpt自然语言")]),e._v(" "),n("el-radio",{attrs:{label:!1},on:{input:e.changeModel},model:{value:e.form.isChatPromptModel,callback:function(t){e.$set(e.form,"isChatPromptModel",t)},expression:"form.isChatPromptModel"}},[e._v("sql")])],1),e._v(" "),e.form.isChatPromptModel?e._e():n("el-alert",{staticStyle:{height:"30px","margin-bottom":"10px"},attrs:{title:"系统关键字有  MY_USER_ID：当前用户id  ${condition}:内嵌的查询筛选条件",type:"warning"}}),e._v(" "),n("sqlComponent",{ref:"sqlComponent",staticStyle:{height:"300px"},model:{value:e.form.chatPrompt,callback:function(t){e.$set(e.form,"chatPrompt",t)},expression:"form.chatPrompt"}}),e._v(" "),n("div",{staticClass:"row mt-20 mb-10"},[n("el-button",{attrs:{type:"primary",loading:e.tryLoading},on:{click:e.tryListBtn}},[e._v("测试运行")])],1),e._v(" "),n("div",{staticClass:"col column w100",staticStyle:{overflow:"hidden",height:"0"}},[n("div",{staticClass:"col"},[n("vxe-grid",{attrs:{data:e.tableData,columns:e.tableColumn,height:"auto",border:"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":""},scopedSlots:e._u([{key:"configHeader",fn:function(t){var o=t.column;return[n("vxe-pulldown",{ref:"xDown"+o.title,attrs:{transfer:!0},scopedSlots:e._u([{key:"default",fn:function(){return[n("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.openConfig(o.title)}}},[n("i",{staticClass:"vxe-icon-edit"}),e._v(" "),n("span",[e._v(e._s(o.title))])])]},proxy:!0},{key:"dropdown",fn:function(){return[n("el-card",{staticStyle:{width:"200px",height:"150px"}},[n("div",[n("el-checkbox",{model:{value:e.fieldConfig[o.title].query,callback:function(t){e.$set(e.fieldConfig[o.title],"query",t)},expression:"fieldConfig[column.title].query"}},[e._v("搜索")])],1)])]},proxy:!0}],null,!0)})]}}])})],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[20,50],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)],1)])],1)},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(e){n("EkEb")},"data-v-4c834ac0",null);t.default=d.exports},guyz:function(e,t,n){"use strict";var o={components:{Tinymce:n("5aCZ").a},data:function(){return{richTextVisible:!1,richTextViewContentEdit:""}},methods:{init:function(e){this.richTextViewContentEdit=e,this.richTextVisible=!0},save:function(){this.$emit("save",this.richTextViewContentEdit),this.richTextVisible=!1}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{ref:"richText",attrs:{width:"700",height:"70%",title:"设置描述文字",resize:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",[e._v("设置描述文字")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px",float:"right"},attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px",float:"right"},on:{click:function(t){e.richTextVisible=!1}}},[e._v("取消")])]},proxy:!0}]),model:{value:e.richTextVisible,callback:function(t){e.richTextVisible=t},expression:"richTextVisible"}},[e._v(" "),n("tinymce",{ref:"tinyDetailView",attrs:{width:"600",height:450},model:{value:e.richTextViewContentEdit,callback:function(t){e.richTextViewContentEdit=t},expression:"richTextViewContentEdit"}})],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("f3jY")},null,null);t.a=a.exports},gxOO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("cpXT"),i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"indexbox base-box"},[e.getDataError?n("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-top":"100px"}},[e._v("\n\n      数据已不存在!\n    ")]):n("div",[e.propTableExt.length>0?n("el-tabs",{ref:"tabs",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("el-button",{attrs:{type:"primary"}},[e._v("\n            基本信息\n            ")])],1),e._v(" "),n("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.dataForm.extContent,"label-width":"100px",size:"medium"}},[e.loading?e._e():n("div",{staticClass:"el-row",staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"start"}},[e._l(e.extInfo,function(t,o){return e.isHidden(t)?n("el-col",{key:t.key,attrs:{span:e.windowWidth<1e3?24:t.spanWidth?parseInt(t.spanWidth):24}},[n("extItem",{ref:"extItem"+o,refInFor:!0,attrs:{dataForm:e.dataForm,isView:e.getCellIsView(t),baseData:t,info:{key:t.key},tableName:e.tableName,parentKey:t.key,rule:e.rulesMap[t.key],parentPoint:e.thisPoint,tableProp:e.tableProp,tempChildrenTableExtId:e.tempChildrenTableExtId},on:{change:e.change,clearDataFilter:function(n){e.clearDataFilter(n,t)},setHaveCacheChildrenTableData:function(t){return e.setHaveCacheChildrenTableData()}},model:{value:e.dataForm.extContent[t.key],callback:function(n){e.$set(e.dataForm.extContent,t.key,n)},expression:"dataForm.extContent[value.key]"}})],1):e._e()}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.childExt.length,expression:"childExt.length"}],staticClass:"w100 column",staticStyle:{height:"600px"}},[n("el-col",{attrs:{span:24}},[n("el-menu",{attrs:{"default-active":e.activeChildKey,mode:"horizontal"},on:{select:e.menuSelect}},e._l(e.childExt,function(t){return n("el-menu-item",{key:t.key,attrs:{index:t.key}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),n("el-col",{staticClass:"col",staticStyle:{height:"0","padding-top":"10px"},attrs:{span:24}},[n("common-view",{ref:"common",staticClass:"h100",attrs:{"append-to-body":!0,isChildView:!0,tableConfig:{}}})],1)],1)],2)])],1),e._v(" "),e._l(e.propTableExt,function(t){return n("el-tab-pane",{attrs:{label:t.name,name:t.key}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("el-button",{attrs:{type:"primary"}},[e._v("\n            "+e._s(t.name)+"\n            ")])],1),e._v(" "),n("common-add-or-update-view",{ref:t.key,refInFor:!0,on:{savedData:e.onPropViewSaved,updatedData:e.onPropViewSaved,saveError:e.onPropViewSaveError}})],1)})],2):n("div",[n("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.dataForm.extContent,"label-width":"100px",size:"medium"}},[e.loading?e._e():n("div",{staticClass:"el-row",staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"start"}},[e._l(e.extInfo,function(t,o){return e.isHidden(t)?n("el-col",{key:t.key,attrs:{span:e.windowWidth<1e3?24:t.spanWidth?parseInt(t.spanWidth):24}},[n("extItem",{ref:"extItem"+o,refInFor:!0,attrs:{dataForm:e.dataForm,isView:e.getCellIsView(t),baseData:t,info:{key:t.key},tableName:e.tableName,rule:e.rulesMap[t.key],parentPoint:e.thisPoint,tableProp:e.tableProp,tempChildrenTableExtId:e.tempChildrenTableExtId},on:{change:e.change,clearDataFilter:function(n){e.clearDataFilter(n,t)},setHaveCacheChildrenTableData:function(t){return e.setHaveCacheChildrenTableData()}},model:{value:e.dataForm.extContent[t.key],callback:function(n){e.$set(e.dataForm.extContent,t.key,n)},expression:"dataForm.extContent[value.key]"}})],1):e._e()}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.childExt.length,expression:"childExt.length"}],staticClass:"w100 column",staticStyle:{height:"600px"}},[n("el-col",{attrs:{span:24}},[n("el-menu",{attrs:{"default-active":e.activeChildKey,mode:"horizontal"},on:{select:e.menuSelect}},e._l(e.childExt,function(t){return n("el-menu-item",{key:t.key,attrs:{index:t.key}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),n("el-col",{staticClass:"col",staticStyle:{height:"0","padding-top":"10px"},attrs:{span:24}},[n("common-view",{ref:"common",staticClass:"h100",attrs:{"append-to-body":!0,isChildView:!0,isViewProp:e.isView,noSearchBar:!0,tableConfig:{}}})],1)],1)],2)])],1)],1)])},staticRenderFns:[]};var a=function(e){n("91v6")},r=n("VU/8")(o.a,i,!1,a,"data-v-478af99c",null);t.default=r.exports},h2v7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"common-dialog-view",data:function(){return{visible:!1,tableName:"",tableNameStr:"子表格",ext_id:"",dialogWidth:"90%",dialogHeight:"90%",dataFilterInfoProp:{}}},methods:{init:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"90%",i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"90%",r=arguments[5];this.ext_id=e,this.tableName=t,this.tableNameStr=n,this.visible=!0,this.dialogWidth=o,this.dialogHeight=a,this.dataFilterInfoProp=r,this.$nextTick(function(){i.$refs.common&&i.$refs.common.refreshDataAndPage(i.ext_id,i.tableName)})}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:e.dialogWidth,height:e.dialogHeight,resize:"",remember:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",{staticStyle:{color:"black"}},[e._v(e._s(e.tableNameStr))])]},proxy:!0},{key:"default",fn:function(){return[e.visible?n("common-view",{ref:"common",attrs:{dataFilterInfoProp:e.dataFilterInfoProp,"append-to-body":!0,isChildView:!0}}):e._e()]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}})},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("9Clw")},"data-v-da005650",null);t.default=a.exports},hRcB:function(e,t){},hUfn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"braid-html",setting:{type:"braid-html",isEdit:!1,dragable:!0,resizable:!0,width:120,height:40,left:50,top:0,title:"html",value:"<div>html<div>",defaultValue:"<div>html<div>",name:"",style:{zIndex:0,ItemType:0,AutoHeight:!1,BottomMargin:0}},props:["val"],methods:{updateText:function(e,t){var n=e.target.innerHTML;this.$vptd.commit("updateData",{uuid:t,key:"value",value:n})}}},i={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"widgets",style:{position:"absolute",left:e.val.left+"px",top:e.val.top+"px",width:e.val.width+"px",minHeight:e.val.height+"px",zIndex:e.val.style.zIndex,fontSize:e.val.style.FontSize+"pt",color:e.val.style.FontColor},attrs:{contenteditable:!!e.val.isEdit},domProps:{innerHTML:e._s(e.val.value)},on:{blur:function(t){return e.updateText(t,e.val.uuid)}}})},staticRenderFns:[]},a=n("VU/8")(o,i,!1,null,null,null);t.default=a.exports},hXSF:function(e,t){},"hhw/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-mudedi",use:"icon-mudedi-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-mudedi"><defs><style type="text/css"></style></defs><path d="M954.382433 263.833921l-82.627882-98.120738c-3.925403-4.66116-9.707083-7.351432-15.801894-7.351432L577.082274 158.361751 577.082274 87.082334c0-11.408841-9.248641-20.657482-20.657482-20.657482l-86.759993 0c-11.408841 0-20.657482 9.248641-20.657482 20.657482L449.007317 271.967158 171.158195 271.967158c-6.327102 0-12.305257 2.90005-16.223496 7.868201L70.252017 387.261021c-5.91164 7.500834-5.91164 18.076704 0 25.577538l84.682681 107.423615c3.917216 4.970198 9.895371 7.869225 16.223496 7.869225l277.850146 0 0 299.32218-135.281079 0c-11.408841 0-20.657482 9.248641-20.657482 20.657482l0 86.759993c0 11.408841 9.248641 20.657482 20.657482 20.657482l396.616086 0c11.408841 0 20.657482-9.248641 20.657482-20.657482l0-86.759993c0-11.408841-9.248641-20.657482-20.657482-20.657482L577.082274 827.453578 577.082274 669.675112l159.40757 0c5.16872 0 10.149151-1.936095 13.959943-5.430686l76.081793-69.744457c4.266164-3.911076 6.697539-9.43693 6.697539-15.226796s-2.430352-11.314697-6.699586-15.226796l-76.081793-69.742411c-3.808746-3.493567-8.789177-5.430686-13.957897-5.430686L577.082274 488.87328l0-92.957135 278.869359 0c6.093788 0 11.875468-2.690272 15.801894-7.351432l82.627882-98.120738C960.855868 282.757922 960.855868 271.523043 954.382433 263.833921zM181.178409 486.817458l-68.399833-86.768179 68.399833-86.769202 267.829931 0 0 173.536358L181.178409 486.816434zM689.686888 914.214595l-355.302145 0 0-45.446052 355.302145 0L689.686888 914.214595zM490.322281 827.454602 490.322281 107.738793l45.446052 0 0 719.715809L490.322281 827.454602zM728.454844 530.189268l53.547567 49.084928-53.547567 49.086975L577.082274 628.361171l0-98.171903L728.454844 530.189268zM846.341764 354.60425 577.082274 354.60425l0-154.928558 269.25949 0 65.233724 77.464279L846.341764 354.60425z" p-id="3512" /></symbol>'});r.a.add(l);t.default=l},"i/7v":function(e,t,n){"use strict";n("0xDb");var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[e._v("\r\n      "+e._s(e.placeholder)),n("el-input",{staticClass:"col",staticStyle:{"padding-right":"5px",width:"80px"},attrs:{size:e.size,clearable:!1,placeholder:"低"},on:{change:e.changeData},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),e._v(" "),n("div",{staticStyle:{"line-height":"35px"}},[e._v("\r\n            -\r\n        ")]),e._v(" "),n("el-input",{staticClass:"col",staticStyle:{"padding-left":"5px",width:"80px"},attrs:{size:e.size,clearable:!1,placeholder:"高"},on:{change:e.changeData},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}})],1)])},staticRenderFns:[]};var i=n("VU/8")({props:{baseData:{},value:{},size:{default:"medium"},placeholder:{default:""}},model:{prop:"value",event:"change"},watch:{},data:function(){return{modelDate:this.value,start:null,end:null}},methods:{changeData:function(){if(null!=this.start&&null!=this.end){var e=this.start+" AND "+this.end;this.$emit("change",e)}}}},o,!1,function(e){n("om2J")},"data-v-e4f83612",null);t.a=i.exports},i8PB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a={inject:["isOpen","addOrUpdateHandle"],props:{tableProp:{}},mounted:function(){console.log(this.tableProp,this.isOpen,888)},data:function(){return{defaultProps:{children:"children",label:"title"},treeTableName:"",treeTableProp:null,treeList:[],treeTemplateJson:[],active:null}},methods:{con:function(e){console.log(e)},treeAddOrEdit:function(e){this.addOrUpdateHandle(null,null,e.id,this.treeTableName)},handleNodeClick:function(e){e.tableName=this.treeTableName,this.$emit("treeClick",e),this.active=e,console.log(e)},init:function(){var e=this;this.treeTableName=this.tableProp.treeTable,this.$http({url:this.$http.adornUrl("/common/commondefine/"+(this.isOpen?"infoByTableForPublicShare":"infoByTable")+"/"+this.tableProp.treeTable),method:"get"}).then(function(t){var n=t.data;if(0==n.code){var o=n.assetExt,i=JSON.parse(o.tableProp);e.treeTableProp=i,e.treeTemplateJson=n.assetExt.templateJson,e.getList()}})},getDetail:function(e){return i()(e,JSON.parse(e.extContent))},getList:function(){var e=this,t="/common/common/"+(this.isOpen?"listForPublicShare":"list");this.$http({url:this.$http.adornUrl(t),method:"post",headers:{tableName:this.treeTableName},data:this.$http.adornParams({page:1,limit:1e3,tableName:this.treeTableName})}).then(function(t){var n=t.data;if(0==n.code){var o=n.page.list;e.treeList=o,e.active&&e.$nextTick(function(){e.$refs.eltree.setCurrentKey(e.active.id)})}})}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-base h100 column"},[e.active?n("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("当前选择："+e._s(e.active.title))]):e._e(),e._v(" "),e.treeTemplateJson.length>1?n("div",{staticClass:"row",staticStyle:{"padding-left":"24px","background-color":"#f8f8f9",height:"36px","line-height":"36px","border-bottom":"1px solid #e8eaec"}},e._l(e.treeTemplateJson,function(t,o){return n("div",{key:o,staticClass:"col text-center ellipsis",attrs:{title:t.name}},[e._v(e._s(t.name))])}),0):e._e(),e._v(" "),n("div",{staticClass:"col",staticStyle:{overflow:"auto"}},[n("el-tree",{ref:"eltree",attrs:{data:e.treeList,"node-key":"id",props:e.defaultProps,"highlight-current":"","default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,i=t.data;return n("div",{staticClass:"row w100 tree-row",staticStyle:{"padding-right":"10px"}},[e._l(e.treeTemplateJson,function(t,a){return n("span",{key:a,staticClass:"ellipsis",class:0==a?"":"col",staticStyle:{"padding-left":"10px",overflow:"hidden","text-align":"left"},style:0==a?"padding-left:0px;width:"+(196/e.treeTemplateJson.length-18*(o.level-1))+"px":"",attrs:{title:e.getDetail(i)[e.treeTemplateJson[a].key]}},[e._v(e._s(e.getDetail(i)[e.treeTemplateJson[a].key]))])}),e._v(" "),n("el-button",{staticClass:"btn",attrs:{type:"text",title:"新增下级"},on:{click:function(t){return e.treeAddOrEdit(i)}}},[n("i",{staticClass:"el-icon-plus"})])],2)}}])})],1)])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("BHiT")},"data-v-4861245b",null);t.default=l.exports},iFqQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a={name:"common-dialog-view",data:function(){return{visible:!1,queryIds:"",tableName:"",tableNameStr:"子表格",ext_id:"",ext_key:"",tableConfig:{},parentData:{}}},methods:{init:function(e,t,n,o,i,a,r){var l=this;this.ext_id=e,this.tableName=t,this.tableNameStr=n,this.visible=!0,this.ext_key=a,this.parentData=r,i||(this.tableConfig={canDelete:!1,canInsert:!1,canEdit:!1}),this.$nextTick(function(){l.$refs.common&&(l.$refs.common.refreshDataAndPage(l.ext_id,l.tableName,null,a,r),l.$refs.common.addParentTableData(null,null,o))})},initPropsTable:function(e,t,n,o,i,a){var r=this;this.queryIds=e,this.tableName=t,this.tableNameStr=n,this.visible=!0,this.tableConfig={isHidePageInfo:!0,canDelete:!1,canInsert:!1},this.$nextTick(function(){if(r.$refs.common){var n=r.dealWithParentTableData(o,i),l=r.dealWithParentTableColumns(o);r.$refs.common.refreshData(null,t,null,e),r.$refs.common.addParentTableData(l,n,a)}})},dealWithParentTableData:function(e,t){var n=[];return t.forEach(function(t){var o={},i={};e.forEach(function(e){null!=e.children&&(i["parent_"+e.field]=t.relateTableContent[e.field]),t[e.field]?o["parent_"+e.field]=t[e.field]:o["parent_"+e.field]=""}),o.relateTableContent=i,n.push(o)}),n},dealWithParentTableColumns:function(e){var t=[];return e.forEach(function(e){var n=i()({},e);if(n.field="parent_"+e.field,n.children){var o=[];e.children.forEach(function(e){var t=i()({},e),a=i()({},e.params);t.params=a,t.params.parentCloumnKey=n.field,o.push(t)}),n.children=o}else n.editRender={name:"input",attrs:{disabled:!0}};t.push(n)}),t}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"90%",height:"90%",resize:"",remember:""},on:{hide:function(t){return e.$emit("hide")}},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",{staticStyle:{color:"black"}},[e._v(e._s(e.tableNameStr))])]},proxy:!0},{key:"default",fn:function(){return[e.visible?n("common-view",{ref:"common",attrs:{"append-to-body":!0,isChildView:!0,tableConfig:e.tableConfig}}):e._e()]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}})},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("ydwD")},"data-v-59924b41",null);t.default=l.exports},iPNa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("QowZ"),i=n("7+Dk"),a=n("0xDb"),r=(n("fXrb"),n("8Vd+")),l={data:function(){return{showName:"名称",type:"",extInfoUrl:"/sys/sysext/infoByType/dept_",dataForm:{key:""},dataList:[],noPerm:!1,noPermMsg:"无权限",pageIndex:1,pageSize:1e4,totalPage:0,dataListSelections:[],addOrUpdateVisible:!1,extInfo:[],selectRow:"",selectRowId:"",dataListLoading:!0}},props:{tableNameProp:{require:!1},selectedIdProp:{require:!1},radioChoose:{require:!1}},components:{TableTreeColumn:i.a,AddOrUpdate:o.default,qrcode:r.a},activated:function(){},mounted:function(){this.type="dept",this.getDataList()},methods:{refreshDataAndPage:function(e,t,n){this.dataList=[],this.extInfo=[],this.type=t,this.selectRowId=n,this.type="dept",this.getDataList()},radioChangeEvent:function(e){var t=e.row;this.selectRow=t,this.$emit("selectItem",t)},getExtInfo:function(){var e=this;this.$http({url:this.$http.adornUrl(this.extInfoUrl+this.type),method:"get",params:this.$http.adornParams()}).then(function(t){var n=t.data;n&&0===n.code&&(e.extInfo=JSON.parse(n.data.template),e.getDataList())})},getDataList:function(){var e=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/sys/dept/list/"+this.type),method:"get",params:this.$http.adornParams({page:1,limit:9999})}).then(function(t){var n=t.data;e.dataListLoading=!1,n&&0===n.code?(e.dataList=Object(a.A)(n.page.list,"id"),e.totalPage=n.page.totalCount,n.page.list.forEach(function(t){t.id==e.selectRowId&&e.$refs.xGrid.setRadioRow(t)})):500==n.code?(e.noPerm=!0,e.noPermMsg=n.msg,e.dataList=[],e.totalPage=0):(e.dataList=[],e.totalPage=0)})},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},selectionChangeHandle:function(e){this.dataListSelections=e},addOrUpdateHandle:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){t.$refs.addOrUpdate.initExt(t.extInfo),t.$refs.addOrUpdate.init(e,t.type)})},deleteHandle:function(e){var t=this,n=e?[e]:this.dataListSelections.map(function(e){return e.id});this.$confirm("确定对[id="+n.join(",")+"]进行["+(e?"删除":"批量删除")+"]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:t.$http.adornUrl("/sys/dept/delete/"+t.type),method:"post",data:t.$http.adornData({id:e})}).then(function(e){var n=e.data;n&&0===n.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataList()}}):t.$message.error(n.msg)})})}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mod-config"},[e.radioChoose?e._e():n("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getDataList()}}},[n("el-form-item",[e.isAuth("dept"==e.type?"sys:dept:save":"sys:location:save")?n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("新增")]):e._e()],1)],1),e._v(" "),e.noPerm?n("div",[n("span",{staticStyle:{"font-size":"16px",color:"#f00"}},[e._v(e._s(e.noPermMsg))])]):n("vxe-table",{ref:"xGrid",attrs:{border:"",loading:e.dataListLoading,"show-overflow":"","row-id":"id",data:e.dataList,"max-height":e.radioChoose?565:9999999,"radio-config":{highlight:!0,checkRowKey:e.selectRowId},"tree-config":{children:"children",expandAll:!0}},on:{"radio-change":e.radioChangeEvent}},[e.radioChoose?n("vxe-table-column",{attrs:{type:"radio",width:"100",title:"单选",align:"center"}}):e._e(),e._v(" "),n("vxe-table-column",{attrs:{field:"name",minWidth:"380",title:e.showName,"tree-node":""}}),e._v(" "),n("vxe-table-column",{attrs:{field:"id",width:"100",title:"ID"}}),e._v(" "),n("vxe-table-column",{attrs:{field:"id",width:"100",title:"二维码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"right",width:"300",height:"300",trigger:"click"}},[n("qrcode",{attrs:{value:t.row.id,options:{size:300}}}),e._v(" "),n("qrcode",{attrs:{slot:"reference",value:t.row.id,options:{size:40}},slot:"reference"})],1)]}}])}),e._v(" "),n("vxe-table-column",{attrs:{width:"100",field:"orderNum",title:"排序"}}),e._v(" "),e.isAuth("dept"==e.type?"sys:dept:update":"sys:location:update")||e.isAuth("dept"==e.type?"sys:dept:delete":"sys:location:delete")?n("vxe-table-column",{attrs:{width:"200",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAuth("dept"==e.type?"sys:dept:update":"sys:location:update")?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.addOrUpdateHandle(t.row.id)}}},[e._v("修改")]):e._e(),e._v(" "),e.isAuth("dept"==e.type?"sys:dept:delete":"sys:location:delete")?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteHandle(t.row.id)}}},[e._v("删除")]):e._e()]}}],null,!1,3609380919)}):e._e()],1),e._v(" "),e.addOrUpdateVisible?n("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e()],1)},staticRenderFns:[]};var c=n("VU/8")(l,s,!1,function(e){n("fC/n")},"data-v-809ff1de",null);t.default=c.exports},iS5C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"bar-code",setting:{type:"bar-code",isEdit:!1,dragable:!0,resizable:!0,width:120,height:40,left:50,top:0,title:"条码",value:"1234567890",defaultValue:"1234567890",name:"",style:{zIndex:0,FontSize:9,ShowBarText:!1,codeType:"Code39",ItemType:0}},props:["val"],data:function(){return{}},computed:{codeUrl:function(){return"QRCode"===this.val.style.codeType?n("kWvh"):"PDF417"===this.val.style.codeType?n("zmiB"):n("HwRv")}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bar-code",style:{position:"absolute",width:e.val.width+"px",height:e.val.height+"px",left:e.val.left+"px",top:e.val.top+"px",zIndex:e.val.zIndex}},[n("img",{attrs:{src:e.codeUrl}}),e._v(" "),n("div",{staticClass:"text",style:{display:e.val.style.ShowBarText?"":"none",fontSize:e.val.style.FontSize+"pt",fontWeight:e.val.style.Bold?"bold":"normal"}},[e._v("1234567890")])])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("FkmU")},"data-v-6eded0da",null);t.default=a.exports},imdm:function(e,t){},iruS:function(e,t){},"j0+m":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("0xDb"),i={name:"",variable:"",field:"",value:""},a={props:{formMap:{},variableMap:{}},watch:{variableMap:{handler:function(e){for(var t in console.log("更新",e),this.type=[],e)this.type.push({value:e[t].variableName,label:e[t].itemName});this.type.push({value:"",label:"自定义"})},deep:!0,immediate:!0}},data:function(){return{baseData:{params:[]},type:[],noshowlist:["richText"]}},methods:{getFieldText:function(e,t){var n=this.formMap[this.variableMap[e].tableName].templateJson;for(var o in n){var i=n[o];if(i.key==t)return i.name}},deleteItem:function(e){this.baseData.params.splice(e,1)},add:function(e){this.baseData.params.splice(e+1,0,Object(o.e)(i))},getMatchingList:function(e){return e&&this.variableMap[e]&&this.formMap[this.variableMap[e].tableName]?this.formMap[this.variableMap[e].tableName].templateJson:""},init:function(e){e&&(!e.params&&(e.params=[Object(o.e)(i)]),this.$set(this,"baseData",e))},save:function(){this.$emit("saveNode",this.baseData)}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("参数")]),e._v(" "),e._l(e.baseData.params,function(t,o){return n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[n("el-input",{attrs:{placeholder:"请输入字段名"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}})],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:9}},[t.variable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},[n("el-option",{key:"id",attrs:{label:"ID",value:"id"}}),e._v(" "),e._l(e.getMatchingList(t.variable),function(o){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()})],2):n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem(o)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)}),e._v(" "),n("el-button",{attrs:{title:"添加",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.add(e.baseData.params.length)}}},[e._v("添加")])],2)])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("t0Cm")},null,null);t.default=l.exports},jB3U:function(e,t,n){"use strict";n.d(t,"g",function(){return i}),n.d(t,"h",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"f",function(){return l}),t.e=function(e){return"v"+o.a.encode(e,!0).toString().replace(/=/g,"").replace(/-/g,"")},t.d=function(e,t,n){return null==e?{}:{createBlockId:t,tableName:n,itemName:e.getItemName(),variableName:e.getVariableName(),varType:i.commonData}},t.b=function(e,t,n){return null==e?{}:{createBlockId:t,tableName:n,itemName:e.getItemName(),variableName:e.getVariableName(),varType:i.objectVar}},t.c=function(e,t,n){return null==e?{tableName:n}:{createBlockId:t,tableName:n,itemName:e.getItemName(),variableName:e.getVariableName(),varType:i.commonListData}};var o=n("PXCl"),i={commonData:"v_type_common_data",commonListData:"v_type_common_data_list",blocklyVar:"v_type_blocklyVar",objectVar:"v_type_objectVar"},a={v_type_common_data:"数据变量",v_type_common_data_list:"列表变量",v_type_blocklyVar:"普通变量",v_type_objectVar:"对象变量"},r={event:"rgb(166, 152, 86)",action:"rgb(98, 159, 190)",dialog:"rgb(82, 96, 133)",logic:"rgb(98, 128, 165)",loop:"rgb(91, 165, 91)",math:"#5b67a5",condition:"rgb(118, 175, 201)",text:"rgb(91, 165, 140)",variable:"rgb(165, 91, 128)"},l={0:["normalEvent"],1:["flowEvent"],2:["btnEvent"],3:["getValueEvent"],4:["conditionEvent"],5:["btnTableEvent"]}},jRWI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"braid-txt",setting:{type:"braid-txt",isEdit:!0,dragable:!0,resizable:!0,width:120,height:40,left:50,top:0,title:"自定义文本",value:"自定义文本",defaultValue:"自定义文本",name:"",style:{zIndex:0,FontSize:9,FontColor:"#000000",Bold:!1,Italic:!1,Underline:!1,Alignment:"left",ItemType:0}},props:["val"],methods:{updateText:function(e,t){var n=e.target.innerHTML;this.$vptd.commit("updateData",{uuid:t,key:"value",value:n})}}},i={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"widgets",style:{position:"absolute",left:e.val.left+"px",top:e.val.top+"px",width:e.val.width+"px",minHeight:e.val.height+"px",zIndex:e.val.style.zIndex,fontSize:e.val.style.FontSize+"pt",color:e.val.style.FontColor,textAlign:e.val.style.Alignment,fontWeight:e.val.style.Bold?"bold":"normal"},attrs:{contenteditable:!!e.val.isEdit},domProps:{innerHTML:e._s(e.val.value)},on:{blur:function(t){return e.updateText(t,e.val.uuid)}}})},staticRenderFns:[]},a=n("VU/8")(o,i,!1,null,null,null);t.default=a.exports},jdna:function(e,t){},joBp:function(e,t){},jtbG:function(e,t,n){"use strict";var o=n("mvHQ"),i=n.n(o),a=n("w4zF"),r={name:"relateTableSelectData",data:function(){return{showTitleModel:1,relateTableSearchKey:null,selectedTitle:null,selectedId:null,showTitleText:null,relateTableSelectDataVisible:!1,tableName:"",fieldKey:"",pageIndex:1,pageSize:20,conditionArr:[],dataList:[],tableData:[],totalPage:0,prefixIcon:"el-icon-search",currentRowData:{},loading:!1}},props:{initText:{},initValue:{},columnData:{},rowData:{}},watch:{showTitleModel:{handler:function(e,t){this.showTitleText=1==e?this.selectedTitle:this.relateTableSearchKey}},rowData:{handler:function(e,t){this.currentRowData=e,(this.columnData.params.dataFilterRobotId||this.columnData.params.dataFilterInfo)&&(console.info("value changed 3333",e),this.relateTableSearchKey=null,this.getDataList())},deep:!0}},mounted:function(){this.selectedTitle=this.initText,this.selectedId=this.initValue,this.tableName=this.columnData.params.relateTableName,this.fieldKey=this.columnData.params.parentCloumnKey,this.currentRowData=this.rowData,this.getDataList()},methods:{onBlur:function(){this.showTitleModel=1,this.relateTableSearchKey=null,this.dealWithData(this.dataList),this.totalPage=this.tableData.length},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},selectItem:function(e){var t=void 0;this.dataList.forEach(function(n){n.id==e.id&&(t=n)}),this.$emit("updateRelateItemData",this.rowData.id,this.fieldKey,e.id,t),this.selectedTitle=e.title,this.selectedId=e.id,this.showTitleText=this.selectedTitle,this.prefixIcon=null,this.hideRelateSelectDataView()},change:function(){console.log("change")},searchData:function(){this.relateTableSearchKey=this.showTitleText,this.showRelateSelectDataView(),this.getDataList(!0)},hideRelateSelectDataView:function(){this.relateTableSelectDataVisible=!1,this.$refs.modalView.hidePanel()},showRelateSelectDataView:function(){this.showTitleModel=2,console.log(123123123),0==this.relateTableSelectDataVisible&&(this.relateTableSearchKey=null,this.prefixIcon="el-icon-search",this.relateTableSelectDataVisible=!0),this.$refs.modalView.showPanel(),this.getDataList()},getDataListFromRobot:function(e,t){var n=this;if(t){if(this.dataList)if(null!=this.relateTableSearchKey&&""!=this.relateTableSearchKey){var o=[];this.dataList.forEach(function(e){(e.extContent.indexOf(n.relateTableSearchKey)>-1||e.relateTableContent.indexOf(n.relateTableSearchKey)>-1)&&o.push(e)}),this.dealWithData(o),this.totalPage=this.tableData.length}else this.dealWithData(this.dataList),this.totalPage=this.tableData.length}else this.tableData=[],this.dataList=[],this.loading=!0,this.$http({url:this.$http.adornUrl("/robot/commonrobot/robotDoWithTrigeData2"),method:"post",data:this.$http.adornData({tableName:this.tableName,robotId:e,trigData:i()(this.currentRowData)})}).then(function(e){var t=e.data;n.loading=!1;var o=JSON.parse(t.data),i=void 0;o&&o.object&&(i=o.object),i?(n.dataList=i,n.dealWithData(i),n.totalPage=n.tableData.length):(0!=t.code&&n.$XModal.message({message:t.msg,title:"错误",status:"error"}),n.totalPage=0)})},getDataList:function(e){var t=this,n=this.columnData.params.dataFilterRobotId;if(n)this.getDataListFromRobot(n,e);else{this.conditionArr=[],this.conditionArr.push({type:"fuzzySearch",value:this.relateTableSearchKey});var o=Object(a.a)(this.columnData.params.dataFilterInfo,this.currentRowData);this.tableData=[],this.dataList=[],this.loading=!0,this.$http({url:this.$http.adornUrl("/common/common/list"),method:"post",headers:{tableName:this.tableName},data:this.$http.adornParams({page:this.pageIndex,limit:this.pageSize,tableName:this.tableName,condition:this.conditionArr.length>0?this.conditionArr:null,dataFilterInfo:i()(o)})}).then(function(e){var n=e.data;t.loading=!1,n&&0===n.code&&null!=n.page&&null!=n.page.list?(t.dataList=n.page.list,t.dealWithData(n.page.list),t.totalPage=n.page.totalCount):(0!=n.code&&t.$XModal.message({message:n.msg,title:"错误",status:"error"}),t.totalPage=0)})}},dealWithData:function(e){var t=this;this.tableData=[],e.forEach(function(e){var n={id:e.id,title:"",info:""},o=JSON.parse(e.extContent),i=JSON.parse(e.relateTableContent);if(e.title){n.title=e.title;for(var a in o)null!=i[a]&&""!=i[a].title?n.info+=" | "+i[a].title:n.title!=o[a]&&null!=o[a]&&""!=o[a]&&(n.info+=" | "+o[a]),0}else{var r=0;for(var l in o)0==r?n.title=o[l]:null!=i[l]&&""!=i[l].title?n.info+=" | "+i[l].title:null!=o[l]&&""!=o[l]&&(n.info+=" | "+o[l]),r++}t.tableData.push(n)})}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-pulldown",{ref:"modalView",attrs:{transfer:!0},scopedSlots:e._u([{key:"default",fn:function(){return[n("el-input",{attrs:{placeholder:"搜索",clearable:"","prefix-icon":e.prefixIcon},on:{click:e.showRelateSelectDataView,input:e.searchData,change:e.change,focus:e.showRelateSelectDataView,blur:e.onBlur},model:{value:e.showTitleText,callback:function(t){e.showTitleText=t},expression:"showTitleText"}})]},proxy:!0},{key:"dropdown",fn:function(){return[n("el-card",{attrs:{"body-style":{padding:"10px"}}},[e.loading?n("i",{staticClass:"el-icon-loading",staticStyle:{margin:"20px"}}):n("div",{staticStyle:{"max-height":"300px",overflow:"scroll","max-width":"500px"}},e._l(e.tableData,function(t){return n("div",{staticClass:"item-info",on:{click:function(n){return n.stopPropagation(),e.selectItem(t)}}},[n("div",{staticClass:"title-info"},[n("span",{staticClass:"title",style:{color:e.selectedId==t.id?"#00f":"#333"}},[e._v(e._s(t.title))]),e._v(" "),n("span",{staticClass:"info",style:{color:e.selectedId==t.id?"#00f":"#333"}},[e._v(e._s(t.info))])]),e._v(" "),n("div",{staticStyle:{height:"1px",color:"#333333"}})])}),0),e._v(" "),n("el-pagination",{attrs:{"current-page":e.pageIndex,"page-size":e.pageSize,total:e.totalPage,layout:"total,  prev, pager, next"},on:{"current-change":e.currentChangeHandle}})],1)]},proxy:!0}]),model:{value:e.relateTableSelectDataVisible,callback:function(t){e.relateTableSelectDataVisible=t},expression:"relateTableSelectDataVisible"}})},staticRenderFns:[]};var s=n("VU/8")(r,l,!1,function(e){n("v/RY")},"data-v-37ef5e5c",null);t.a=s.exports},kMeK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-role",use:"icon-role-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-role"><defs><style type="text/css"></style></defs><path d="M902.068357 744.573319c0-60.965821-71.69129-136.044101-128.705623-144.511577l77.336273-127.576626L671.753032 472.485116c32.176406-46.288864 53.627343-107.254686 53.627343-174.994487 0-5.080485 0-10.725469 0-15.805954 69.433297-12.418964 114.593164-32.176406 114.593164-51.933848 0-21.450937-50.240353-41.208379-127.012128-53.627343-3.38699-18.063947-55.320838-164.269019-116.286659-164.269019-27.095921 0-48.546858 14.112459-62.659316 35.563396l0 0c0 10.725469-10.725469 21.450937-24.837927 21.450937-12.418964 0-23.144432-9.031974-24.837927-19.757442l0 0C471.920617 27.660419 448.776185 11.289967 421.680265 11.289967 362.407938 11.289967 307.0871 145.640573 294.668137 179.510474 228.62183 191.929438 185.719956 209.993385 185.719956 231.444322s44.595369 39.514884 114.593164 51.933848c0 5.080485 0 10.725469 0 15.805954 0 67.739802 19.757442 128.705623 53.627343 174.994487L174.994487 474.178611l76.771775 125.318633c-57.014333 0-132.092613 78.46527-132.092613 146.76957l1.693495 205.477398c0 33.869901 26.531422 60.965821 60.965821 60.965821l661.027563 0c33.869901 0 60.965821-27.095921 60.965821-60.965821L902.068357 744.573319zM711.267916 176.123484 711.267916 176.123484 711.267916 176.123484 711.267916 176.123484zM464.582139 962.46968l-28.789416 0-53.627343-395.148842 112.335171 98.222712L464.582139 962.46968zM587.642778 962.46968 558.853363 962.46968l-30.482911-296.92613 112.899669-99.916207L587.642778 962.46968zM655.38258 338.699008l0 12.418964-14.112459 0c0 0-9.031974 76.771775-57.014333 76.771775-48.546858 0-57.578831-76.771775-57.578831-76.771775l-32.176406 0c-7.338479 62.659316-39.514884 76.771775-57.014333 76.771775-42.901874 0-55.320838-57.014333-57.014333-76.771775l-14.676957 0L365.794928 338.699008l0-12.418964 107.254686 0L473.049614 338.699008l71.69129 0 0-12.418964 107.254686 0L651.99559 338.699008 655.38258 338.699008z" p-id="2163" /></symbol>'});r.a.add(l);t.default=l},kN15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("JC7v"),i=(n("0xDb"),{components:{rulesScreen:o.default},props:{formMap:{},variableMap:{}},data:function(){return{baseData:{},title:"筛选数据",tips:"设置筛选条件，从表单列表中筛选出需要处理的列表数据."}},methods:{save:function(){this.$refs.rulesScreen.saveData(),this.$emit("saveNode",this.baseData)},init:function(e){var t=this;console.log(e,27777),this.baseData=e,this.$nextTick(function(){t.$refs.rulesScreen&&t.$refs.rulesScreen.getData()})},fresh:function(){var e=this;this.$nextTick(function(){e.$refs.rulesScreen&&e.$refs.rulesScreen.fresh()})}}}),a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[n("div",[n("div",{staticClass:"top-title"},[n("div",{staticClass:"t-title"},[e._v("\r\n                "+e._s(e.title)+"\r\n            ")])]),e._v(" "),"未选择"==e.baseData.tableName?n("div",[n("span",{staticClass:"error-info"},[e._v("未选择或设置表单类型")])]):n("div",[n("div",{staticClass:"tips"},[n("div",[e._v(e._s(e.tips))])]),e._v(" "),n("div",[n("rulesScreen",{ref:"rulesScreen",attrs:{modelData:e.baseData,formMap:e.formMap,tableName:e.baseData.tableName,variableMap:e.variableMap},model:{value:e.baseData.dataRules,callback:function(t){e.$set(e.baseData,"dataRules",t)},expression:"baseData.dataRules"}})],1)])])])},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("VSuP")},"data-v-f00ed1b8",null);t.default=r.exports},kWvh:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAEECAAAAADrYxXWAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAFxEAABcRAcom8z8AAARGSURBVHja7d3RbtwoFIDhb1b75O2L9c2yF0ku3DAYPK7aVf9zE80YE/KJ6AgM+PGm+Od3N+BPiBCEgBAQAkJACAgBISAEhIAQEAL49/jxsXv/bBD6mJR8TL702rX9VtcThIAQEAJCQAh4hvB2Gt+ONzzeY1bLsMjjEB8lh3XOrl1t9RzhL4sQhIAQEAJCwJdR5DGGo7O3yZePyZez8ebbeWULtWy3+jPqCUJACAgBISAEnKTIq7GQ4xamXYcZdjbfejnqCUJACAgBISAE3JYiZ08DX8xjvzI3fkQ9QQgIASEgBISAkxS5nojuSVmzydRjplwouRH1BCEgBISAEPAsO3w/ve/H7274na1+3LM29PEnfNpu9Wf07yAEhIAQEAJCwJcU+Wpt7z9mmevFbR49i/xVEYIQEAJCQAh4NorcHscdbz/G+lDvngU6s5aNb68nCAEhIASEgBDwZbb56tPH7Y0ds/sWNotcXR40rrOeIASEgBAQAkLAldN1bj0zZ5YN17dVrjd3HPUEISAEhIAQEAKejSKHOxqHJddjfRS5nYRnda5M89YThIAQEAJCQAh4tqz36rPI9ceHV2dmj7cPbxg2cJop6wlCQAgIASEgBDxLkVdz4/DTrbG96WNlnraeIASEgBAQAkLAs00f28PA9f0d24tpXnwnyDBarvM1QhACQkAICAHPluts7wQx+nJhSeqLJ5bP5lQX/rDPqCcIASEgBISAELD2po/t3Lg+UtweDS4sJBpGE61nEYIQEAJCQAg4OYBue/WN5ZIv/tr2Rd4eIQgBISAEhICTowO2k9SLZ6Zu7/Z48ZCBz6gnCAEhIASEgBCwdnTAwpPJYSxk0Vkt618Or822gPwU9QQhIASEgBAQAk6OMV8fKa4fnTqsZWFd7D0raJtofRohCAEhIASEgLV9kccvHa49JtcW7hsWsXxtFhuTvvUEISAEhIAQEAK23vRxLHKM9cHdsJara3GulmwU+TVCEAJCQAgIAWtntA6LHGNhpHgsuTAIXT8zZ3sS9qeoJwgBISAEhIAQcOV9kS/G+mPH4TWTIgu/r+U6TyMEISAEhIAQcLJcZ6Oa9x/bLzxemNjd/n37LwqpJwgBISAEhIAQcOV9kccYHvp29Rnm1cNg1986Mo56ghAQAkJACAgBzxDeTuPb8L7He3yU+fh0rPNYcnbtWNmw5OzL2Z+yhPCXRQhCQAgIASFg7YzWY6wfK/c2uX3/dRzLDRw2qWeRZxGCEBACQkAIOEmR67F+AM89zz73z2GdXasnCAEhIASEgBBwW4qcpcHtw9C33zO50LLp4LWeIASEgBAQAkLASYpcT0vbJ4hvL2zdnpltonUvQhACQkAIeJYdvp/e9+N3N/zOeFzdb/gRV7cybr/wav1Qg/XT8z6jfwchIASEgBAQAm7bF/n/jnqCEBACQkAICAEhIASEgBAQAkJACAgB/AcNv7/8P9p8EAAAAABJRU5ErkJggg=="},kcSy:function(e,t,n){"use strict";t.d=function(e,t){Object(o.a)({url:o.a.adornUrl("/common/commondefine/updateUniqueCode"),method:"post",data:o.a.adornParams(e)}).then(function(e){var n=e.data;n&&0===n.code?t&&t(n):i.default.$message.error(n.msg)})},t.c=function(e,t){Object(o.a)({url:o.a.adornUrl("/common/commondefine/updateTablePropItem"),method:"post",data:o.a.adornParams(e)}).then(function(e){var n=e.data;n&&0===n.code?t&&t(n):i.default.$message.error(n.msg)})},t.b=function(e,t){Object(o.a)({url:o.a.adornUrl("/common/commondefine/updateCustomViewItem"),method:"post",data:o.a.adornParams(e)}).then(function(e){var n=e.data;n&&0===n.code?t&&t(n):i.default.$message.error(n.msg)})},t.a=function(e,t){Object(o.a)({url:o.a.adornUrl("/common/commondefine/updateApi"),method:"post",data:o.a.adornParams(e)}).then(function(e){var n=e.data;n&&0===n.code?t&&t(n):i.default.$message.error(n.msg)})};var o=n("Rk3H"),i=n("NHnr")},"kf/f":function(e,t){},"kp+h":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("JC7v"),i=n("VfYd"),a=(n("0xDb"),{components:{rules:i.default,rulesScreen:o.default},props:{formMap:{},variableMap:{}},data:function(){return{test:"123",baseData:{name:"",selectTableName:""}}},methods:{selectOpt:function(e){this.selectTableName=e},save:function(){this.$refs.rulesScreen.saveData(),this.$emit("saveNode",this.baseData)},init:function(e){var t=this;this.baseData=e,this.$nextTick(function(){t.$refs.rulesScreen.getData()})},fresh:function(){this.$refs.rulesScreen.fresh()}}}),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[n("div",{staticClass:"col"},[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("目标表单")]),e._v("\r\n            "+e._s(e.formMap[e.baseData.tableName]?e.formMap[e.baseData.tableName].name:"")+"\r\n            ")]),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("删除哪些数据")]),e._v(" "),n("rulesScreen",{ref:"rulesScreen",attrs:{modelData:e.baseData,formMap:e.formMap,tableName:e.baseData.tableName,variableMap:e.variableMap},model:{value:e.baseData.dataRules,callback:function(t){e.$set(e.baseData,"dataRules",t)},expression:"baseData.dataRules"}})],1)])])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("coAk")},"data-v-dcfe8902",null);t.default=l.exports},ksld:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return customBtnClick});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_2__views_modules_dataProcess_openRobotDialog_openRobotDialog__=__webpack_require__("e4/+"),customBtnClick=(_ref=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function e(t,n){var o;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("confirm"!=t.clickAction){e.next=6;break}return o=!1,e.next=4,n.$confirm(t.tipsText,"提示",{confirmButtonText:t.confirmText,cancelButtonText:t.cancelText,type:"warning"}).then(function(){o=!0}).catch(function(){});case 4:if(o){e.next=6;break}return e.abrupt("return");case 6:n.$loading.show(),n.$http({url:n.$http.adornUrl("/robot/commonrobot/robotDo"),method:"post",data:n.$http.adornData({customBtnKey:t.id,tableName:n.tableName,tableDataId:n.tableDataId,robotId:t.robotId})}).then(function(e){var t=e.data;n.$loading.hide(),t&&0===t.code?t.data.isOpenRobotDialog?Object(__WEBPACK_IMPORTED_MODULE_2__views_modules_dataProcess_openRobotDialog_openRobotDialog__.a)(n,t.data,null,robotDoFinish):robotDoFinish(t):n.$message.error(t.msg)});case 8:case"end":return e.stop()}},e,this)})),function(e,t){return _ref.apply(this,arguments)}),_ref;function robotDoFinish(data){console.log(data,8888881234),data.jsScript&&eval(data.jsScript),context.$emit("success"),context.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}})}function test(){}},"l/e0":function(e,t){},lMLl:function(e,t,n){"use strict";var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"parent"},[n("div",{staticClass:"child1"},[e._t("title",[n("div",{staticClass:"flex-center",staticStyle:{height:"42px","margin-bottom":"2px","border-radius":"4px 4px 0px 0px"},style:{background:e.itemOption.titleBackgroundColor}},[n("span",{staticClass:"grid-card-dashboard-title",staticStyle:{"margin-left":"20px"},style:{color:e.itemOption.titleColor}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "+e._s(e.itemOption.name))])])]),e._v(" "),n("div",{staticClass:"child2"},[e._t("content")],2)],2)])},staticRenderFns:[]};var i=n("VU/8")({name:"titeView",props:{itemOption:{}}},o,!1,function(e){n("jdna")},"data-v-06ac9176",null);t.a=i.exports},lYQe:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o,i=n("Xxa5"),a=n.n(i),r=n("mvHQ"),l=n.n(r),s=n("exGp"),c=n.n(s),u=(o=c()(a.a.mark(function e(t,n){var o,i,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("loginActicon_111"),n.$cookie.set("token",t.token,6048e5),n.$cookie.set("AUTHORIZATION_TOKEN",t.token,6048e5),n.$cookie.set("userId",t.userId),n.$cookie.set("tenantId",t.tenantId),o={token:t.token},window.boundAsync&&null!=window.boundAsync.login&&window.boundAsync.login(o),localStorage.setItem("allApp",l()(t.apps)),localStorage.setItem("companyName",t.companyName),localStorage.setItem("companyId",t.companyId),localStorage.setItem("token",t.token),localStorage.setItem("loginInfo",l()(t)),window.boundAsync&&null!=window.boundAsync.onLoginSuccess&&window.boundAsync.onLoginSuccess(),0==t.apps.length?n.$router.replace({name:"addAppView"}):1==t.apps.length?(localStorage.setItem("app",l()(t.apps[0])),n.$router.replace({name:"home"})):(i=!1,r=void 0,localStorage.getItem("app")&&(r=JSON.parse(localStorage.getItem("app"))),null!=r&&t.apps.forEach(function(e){e.id==r.id&&(i=!0)}),i||localStorage.setItem("app",l()(t.apps[0])),n.$router.replace({name:"home"}));case 14:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},le4f:function(e,t){},llCV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("0xDb"),i={name:"",variable:"",field:"",value:""},a={components:{},props:{formMap:{},variableMap:{}},watch:{variableMap:{handler:function(e){for(var t in console.log("更新",e),this.type=[],e)this.type.push({value:e[t].variableName,label:e[t].itemName});this.type.push({value:"",label:"自定义"})},deep:!0,immediate:!0}},data:function(){return{dashBoardList:[],noshowlist:["richText"],type:[],baseData:{dashboardDefineId:null,params:[],width:60,height:60}}},mounted:function(){this.getDashBoardList()},methods:{getDashBoardList:function(){var e=this;this.$http({url:this.$http.adornUrl("/common/commondashboarddefine/list"),method:"post",data:this.$http.adornParams({page:1,limit:999})}).then(function(t){var n=t.data;if(n&&0===n.code&&n.page){var o=n.page.list;o.length&&(e.dashBoardList=o)}})},deleteItem:function(e,t){this.baseData.params.splice(t,1),this.$forceUpdate()},add:function(e,t){this.baseData.params.splice(t+1,0,Object(o.e)(i)),this.$forceUpdate()},getMatchingList:function(e){return e&&this.variableMap[e]&&this.formMap[this.variableMap[e].tableName]?this.formMap[this.variableMap[e].tableName].templateJson:""},save:function(){this.$emit("saveNode",this.baseData)},init:function(e){e&&(this.baseData=e,null==this.baseData.params&&(this.baseData.params=[]))},fresh:function(){this.$forceUpdate()}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("窗口大小")]),e._v(" "),n("div",{staticClass:"row",staticStyle:{"align-items":"center"}},[n("span",{staticStyle:{margin:"10px"}},[e._v("高度:")]),e._v(" "),n("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",min:"10",max:"100"},model:{value:e.baseData.height,callback:function(t){e.$set(e.baseData,"height",t)},expression:"baseData.height"}},[n("template",{slot:"append"},[e._v("%")])],2),e._v(" "),n("span",{staticStyle:{margin:"10px"}},[e._v("宽度:")]),e._v(" "),n("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",min:"10",max:"100"},model:{value:e.baseData.width,callback:function(t){e.$set(e.baseData,"width",t)},expression:"baseData.width"}},[n("template",{slot:"append"},[e._v("%")])],2)],1)]),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("选择门户")]),e._v(" "),n("el-select",{model:{value:e.baseData.dashboardDefineId,callback:function(t){e.$set(e.baseData,"dashboardDefineId",t)},expression:"baseData.dashboardDefineId"}},e._l(e.dashBoardList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("初始参数")]),e._v(" "),e._l(e.baseData.params,function(t,o){return n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-row",[n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[n("el-input",{attrs:{placeholder:"请输入字段名"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}})],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:9}},[t.variable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},[n("el-option",{key:"id",attrs:{label:"id",value:"id"}}),e._v(" "),e._l(e.getMatchingList(t.variable),function(o){return-1==e.noshowlist.indexOf(t.type)?n("el-option",{key:o.key,attrs:{label:o.name,value:o.key}}):e._e()})],2):n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),e._v(" "),n("el-button",{staticStyle:{"font-size":"16px",padding:"0","line-height":"30px"},attrs:{type:"text",title:"删除"},on:{click:function(t){return e.deleteItem("params",o)}}},[n("i",{staticClass:"el-icon-delete"})])],1)],1)}),e._v(" "),n("el-button",{attrs:{title:"添加",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.add("params",e.baseData.params.length)}}},[e._v("添加\n    ")])],2)])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("BVIN")},"data-v-2c0b713b",null);t.default=l.exports},lqTw:function(e,t){},m3Uq:function(e,t,n){"use strict";var o={props:{itemOption:{},isEdit:{}},components:{selectStaffDepRole:n("bKCO").a},data:function(){return{staffList:[],multiSelectUserList:[],value:null,multiSelectConfig:null}},mounted:function(){this.getUserList()},methods:{getMultiSelectUsers:function(){var e=this;this.$http({url:this.$http.adornUrl("/sys/user/queryUserListByUserSelectConfig"),method:"post",data:this.multiSelectConfig}).then(function(t){var n=t.data;n&&0===n.code?e.multiSelectUserList=n.data:e.multiSelectUserList=[],e.$emit("userCtrChanged",e.multiSelectUserList,e.itemOption.affectBlock)})},getUserList:function(){var e=this;this.$http({url:this.$http.adornUrl("/sys/user/list"),method:"post",data:this.$http.adornParams({page:1,limit:9999})}).then(function(t){var n=t.data;n&&0===n.code?e.staffList=n.page.list:e.staffList=[]})},userSelectChanged:function(e){var t=void 0;this.staffList.forEach(function(n){n.userId==e&&(t={userCtrName:n.realname,userCtrId:n.userId})}),this.$emit("userCtrChanged",t,this.itemOption.affectBlock)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid-card-dashboard row"},[n("span",{staticClass:"grid-card-dashboard-title",staticStyle:{"margin-right":"15px"}},[e._v(e._s(e.itemOption.name||"人员选择"))]),e._v(" "),e.itemOption.isMulti?n("selectStaffDepRole",{attrs:{menuOpt:["userList","deptList","roleList"]},on:{hide:function(t){return e.getMultiSelectUsers()}},model:{value:e.multiSelectConfig,callback:function(t){e.multiSelectConfig=t},expression:"multiSelectConfig"}}):n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:e.userSelectChanged},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.staffList,function(e){return n("el-option",{key:e.userId,attrs:{label:e.realname,value:e.userId}})}),1)],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("FCXA")},"data-v-202f09ba",null);t.a=a.exports},m6A7:function(e,t){},mFfN:function(e,t){},mdla:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={extends:n("kN15").default,name:"conditionGetOneData",created:function(){this.title="获取一条表单数据的条件",this.tips="设置条件，获取一条表单数据的条件，如果满足条件的有多条，只返回第一条"}},i=n("VU/8")(o,null,!1,null,null,null);t.default=i.exports},mhAn:function(e,t){},mozX:function(e,t){},"n/8v":function(e,t){},n0Sp:function(e,t){},nHdu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a={components:{customBtnWin:n("dLb2").default},props:{dataForm:{},exts:{type:Array,default:function(){return[]}}},data:function(){return{customBtn:[],customBtnOperate:[],customBtnTools:[]}},methods:{saveBtn:function(e){var t=!1;this.customBtn.forEach(function(n){n.id==e.id&&(i()(n,e),t=!0)}),t||this.customBtn.push(e),this.initBtnByPosition()},addCustomBtn:function(e,t){this.$refs.customBtnWin.init(e,t)},delBtn:function(e){var t=this;this.$confirm("删除操作无法撤回，确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.$http({url:t.$http.adornUrl("/common/commondefine/deleteCustomBtn"),method:"post",data:t.$http.adornData({commonDefineId:t.dataForm.id,customBtnInfo:e})}).then(function(n){var o=n.data;if(o&&0===o.code){for(var i=void 0,a=0;a<t.customBtn.length;a++)if(t.customBtn[a].id==e.id){i=a;break}null!=i&&(t.customBtn.splice(i,1),t.initBtnByPosition())}else t.$message.error(o.msg)})})},init:function(e){this.$set(this,"customBtn",e),this.initBtnByPosition()},initBtnByPosition:function(){var e=this;this.customBtnOperate=[],this.customBtnTools=[],this.customBtn&&this.customBtn.forEach(function(t){"operate"==t.position||null==t.position?e.customBtnOperate.push(t):"tools"==t.position&&e.customBtnTools.push(t)})}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"base-padding"},[n("el-card",[n("div",{staticClass:"margin-top title"},[e._v("操作栏自定义按钮")]),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addCustomBtn(null,"operate")}}},[e._v("新增按钮")]),e._v(" "),n("div",{staticClass:"btn-box"},e._l(e.customBtnOperate,function(t,o){return n("span",{key:t.id,staticClass:"position-relative d-btn",staticStyle:{"margin-right":"15px"}},[n("div",{staticClass:"btns",on:{click:function(n){return e.delBtn(t)}}},[n("i",{staticClass:"el-icon-close"})]),e._v(" "),n("el-button",{style:"background-color: "+t.color+";border-color: "+t.color+";",attrs:{type:"primary",size:"small"},on:{click:function(n){return e.addCustomBtn(t)}}},[e._v(e._s(t.name))])],1)}),0),e._v(" "),n("customBtnWin",{ref:"customBtnWin",attrs:{dataForm:e.dataForm,exts:e.exts},on:{save:e.saveBtn}})],1),e._v(" "),n("el-card",{staticStyle:{"margin-top":"15px"}},[n("div",{staticClass:"margin-top title"},[e._v("工具栏自定义按钮")]),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addCustomBtn(null,"tools")}}},[e._v("新增按钮")]),e._v(" "),n("div",{staticClass:"btn-box"},e._l(e.customBtnTools,function(t,o){return n("span",{key:t.id,staticClass:"position-relative d-btn",staticStyle:{"margin-right":"15px"}},[n("div",{staticClass:"btns",on:{click:function(n){return e.delBtn(t)}}},[n("i",{staticClass:"el-icon-close"})]),e._v(" "),n("el-button",{style:"background-color: "+t.color+";border-color: "+t.color+";",attrs:{type:"primary",size:"small"},on:{click:function(n){return e.addCustomBtn(t)}}},[e._v(e._s(t.name))])],1)}),0),e._v(" "),n("customBtnWin",{ref:"customBtnWin",attrs:{dataForm:e.dataForm,exts:e.exts},on:{save:e.saveBtn}})],1)],1)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("JD0x")},"data-v-7b3be6f7",null);t.default=l.exports},nKSZ:function(e,t,n){"use strict";var o=n("8U58");n("4/hK"),n("tPrY"),n("epNC"),n("/TiH"),n("zdrL");var i={data:function(){return{CodeMirrorEditor:null,theme:"night",activeIndex:0,posLeft:0,posTop:0,tipShow:!1,tipShowType:null,dropList:[],blurFlag:!1,fieldList:[],methodList:[],errorList:[],normalList:[]}},methods:{setValue:function(e){var t=this;this.$nextTick(function(){t.CodeMirrorEditor.setValue(e||"")})},getValue:function(){return this.CodeMirrorEditor.getValue()},setData:function(e){var t=e;this.fieldList.forEach(function(e){var n=new RegExp("\\["+e.key+"\\]","g");t=t.replace(n,"["+e.name+"]")}),this.errorList.forEach(function(e){var n=new RegExp("\\["+e.key+"\\]","g");t=t.replace(n,"["+e.name+"]")}),this.setValue(t)},getData:function(){var e=this.CodeMirrorEditor.getValue(),t=[];return this.fieldList.forEach(function(n){var o=new RegExp("\\["+n.name+"\\]","g");e.match(o)&&t.push(n),e=e.replace(o,"["+n.key+"]")}),{format:e,fieldList:t,str:this.CodeMirrorEditor.getValue()}},getArrTypeData:function(e,t){var n=[];for(var o in e){var i=e[o];n.push("@"==t?"["+i.name+"]":i.name)}return n.sort(function(e,t){return t.length-e.length}),n},init:function(e,t){var n=this;this.setState(e);var i={codemirrorFieldList:this.getArrTypeData(this.fieldList?this.fieldList:[],"@"),codemirrorMethodList:this.getArrTypeData(this.methodList?this.methodList:[],"#"),codemirrorErrorList:this.getArrTypeData(this.errorList?this.errorList:[],"@")};this.fieldList.sort(function(e,t){return t.name.length-e.name.length}),function(e){o.defineMode("defineScript",function(){var t=[">=","<=","!=","=",">","<","+","-","*","/","(",")",";",",",":","{","}"];return{token:function(n){if(n.eatSpace())return null;if(n.match("//"))return n.skipToEnd(),"comment";for(var o=0;o<t.length;o++)if(n.match(t[o]))return"mark-keyword";if(n.match("true")||n.match("false"))return"boolean-keyword";if(n.match(/^[0-9\.+-]/,!1)){if(n.match(/^[+-]?0x[0-9a-fA-F]+/))return"number";if(n.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?/))return"number";if(n.match(/^[+-]?\d+([EeDd][+-]?\d+)?/))return"number"}if(n.match(/^"([^"]|(""))*"/))return"string";if(n.match(/^'([^']|(''))*'/))return"string";if(e.codemirrorErrorList)for(var i=e.codemirrorErrorList,a=0;a<i.length;a++)if(n.match(i[a]))return"field-error";for(var r=e.codemirrorFieldList,l=0;l<r.length;l++)if(n.match(r[l]))return"field-keyword";for(var s=e.codemirrorMethodList,c=0;c<s.length;c++)if(n.match(s[c]))return"function-keyword";return n.next(),"nomal-keyword"}}}),o.defineMIME("text/x-defineScript","defineScript")}(i),this.CodeMirrorEditor=o.fromTextArea(this.$refs.codemirror,{mode:"defineScript",theme:"3024-day",lineNumbers:!1,lineWrapping:!0}),this.CodeMirrorEditor.setSize("auto","100%"),this.setData(t),this.CodeMirrorEditor.on("cursorActivity",function(e){n.cursorActivity(e)}),this.CodeMirrorEditor.on("changes",function(e){}),this.CodeMirrorEditor.addKeyMap({Up:function(e){n.tipShow?n.enterFuc("up"):e.execCommand("goLineUp")},Down:function(e){n.tipShow?n.enterFuc("down"):e.execCommand("goLineDown")},Enter:function(e){n.tipShow?n.enterFuc("enter"):e.execCommand("newlineAndIndent")},Esc:function(){},F9:function(){}})},handleClick:function(e,t){var n=this,o=this.CodeMirrorEditor.getCursor(),i=this.CodeMirrorEditor.getLine(o.line).substring(0,o.ch);if(t){if("#"==t){var a=i.lastIndexOf(" ",o.ch);this.CodeMirrorEditor.setSelection({line:o.line,ch:a+1},{line:o.line,ch:o.ch});var r=e.value;this.CodeMirrorEditor.replaceSelection(r),this.CodeMirrorEditor.setCursor(o.line,a+1+r.length)}else if("@"==t){var l=i.lastIndexOf("[",o.ch);this.CodeMirrorEditor.setSelection({line:o.line,ch:l},{line:o.line,ch:o.ch});var s="["+e.value+"]";this.CodeMirrorEditor.replaceSelection(s),this.CodeMirrorEditor.setCursor(o.line,l+s.length+1)}}else{var c=e.value;this.CodeMirrorEditor.setSelection({line:o.line,ch:o.ch},{line:o.line,ch:o.ch}),-1!=c.indexOf("[")&&-1!=c.indexOf("]")&&(c=c),this.CodeMirrorEditor.replaceSelection(c)}this.CodeMirrorEditor.focus(),setTimeout(function(){n.setState({tipShow:!1,tipShowType:null})},100)},enterFuc:function(e){if("up"===e)0!=this.activeIndex&&this.activeIndex--;else if("down"===e)this.activeIndex!=this.dropList.length-1&&this.activeIndex++;else if("enter"===e){var t=this.dropList[this.activeIndex];this.handleClick({name:t.name,value:t.value},this.tipShowType)}},setState:function(e){for(var t in e)this.$set(this,t,e[t])},search:function(e,t){var n=[];("@"===t?this.fieldList:this.methodList).forEach(function(t){var o=new RegExp(e,"i");t.name.match(o)&&n.push(t)}),this.setState({dropList:n,activeIndex:0})},hasSpecialStr:function(e){for(var t="~·`!！@#$￥%^…&*()（）—-_=+[]{}【】、|\\;:；：'\"“‘,./<>《》?？，。",n=t.length,o=0;o<n;o++)if(-1!=e.indexOf(t.substring(o,o+1)))return!0;return!1},cursorActivity:function(e){var t=this.fieldList,n=this.methodList,o=e.getCursor(),i=e.cursorCoords(o),a=e.getLine(o.line).substring(0,o.ch),r=a.lastIndexOf(" ",o.ch),l=a.lastIndexOf("[",o.ch);if(t.length>0&&-1!==l&&l>r){var s=a.substring(l+1,o.ch);t.find(function(e){return e.name.includes(s)})?(this.setState({posLeft:i.left,posTop:i.top+20,tipShow:!0,tipShowType:"@"}),this.search(s,"@")):this.setState({tipShow:!1,tipShowType:null})}else if(n.length>0){var c="";if((c=r?a.substring(r+1,o.ch):a.substring(0,o.ch))&&!this.hasSpecialStr(c))n.find(function(e){var t=new RegExp(c,"i");return!!e.name.match(t)})?(this.setState({posLeft:i.left,posTop:i.top+20,tipShow:!0,tipShowType:"#"}),this.search(c,"#")):this.setState({tipShow:!1,tipShowType:null});else this.setState({tipShow:!1,tipShowType:null})}}},mounted:function(){}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-codemirror",on:{click:function(t){return e.setState({tipShow:!1,tipShowType:null})}}},[n("textarea",{ref:"codemirror",staticClass:"h100"}),e._v(" "),n("div",{class:"codemirror-tip-"+e.theme,style:{left:e.posLeft+"px",top:e.posTop+"px",display:e.tipShow?"inline-block":"none"}},[n("ul",{staticClass:"cm-field-ul"},e._l(e.dropList,function(t,o){return n("li",{class:{"cm-active":o==e.activeIndex},on:{click:function(n){return e.handleClick({name:t.name,value:t.value},e.tipShowType)}}},[e._v("\r\n                "+e._s(t.name)+"\r\n            ")])}),0)])])},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("Lf8v")},"data-v-21297dce",null);t.a=r.exports},ncBr:function(e,t){},nqSO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={components:{commonLayout:n("BUU0").a},data:function(){return{visible:!1,charts:[]}},methods:{init:function(e,t){var n=this;this.visible=!0,this.$nextTick(function(){n.$refs.layout.init(e,t)})}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.visible?n("vxe-modal",{attrs:{width:"100%",height:"100%",resize:"",title:"数据报表"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("commonLayout",{ref:"layout",attrs:{list:e.charts,isEdit:!1},on:{change:function(t){e.charts=t}}})],1):e._e()],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("le4f")},"data-v-bdab9ffe",null);t.default=a.exports},nwQu:function(e,t){},ogyi:function(e,t){},"oh3/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"braid-image",setting:{type:"braid-image",title:"图片",isEdit:!1,dragable:!0,resizable:!0,width:120,height:40,left:50,top:0,value:"",defaultValue:"",name:"",style:{zIndex:0,ItemType:0}},props:["val"],data:function(){return{}},computed:{imageUrl:function(){return this.val.value}},watch:{val:function(e){this.imageUrl=e.value}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"widgets",style:{position:"absolute",width:e.val.width+"px",height:e.val.height+"px",left:e.val.left+"px",top:e.val.top+"px",zIndex:e.val.zIndex}},[n("img",{staticClass:"braid-image",attrs:{title:e.val.title,src:e.val.value||e.val.defaultValue}})])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("GZwR")},"data-v-57b1dd6c",null);t.default=a.exports},om2J:function(e,t){},pODJ:function(e,t){},pQ0R:function(e,t){},pSZb:function(e,t){},pTqA:function(e,t){},pc3V:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-tubiao",use:"icon-tubiao-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-tubiao"><defs><style type="text/css"></style></defs><path d="M896 928 768 928C732.656 928 704 899.344 704 864L704 416C704 380.656 732.656 352 768 352L896 352C931.344 352 960 380.656 960 416L960 864C960 899.344 931.344 928 896 928ZM896 416 768 416 768 864 896 864 896 416ZM576 928 448 928C412.656 928 384 899.344 384 864L384 160C384 124.656 412.656 96 448 96L576 96C611.344 96 640 124.656 640 160L640 864C640 899.344 611.344 928 576 928ZM576 160 448 160 448 864 576 864 576 160ZM256 928 128 928C92.656 928 64 899.344 64 864L64 544C64 508.656 92.656 480 128 480L256 480C291.344 480 320 508.656 320 544L320 864C320 899.344 291.344 928 256 928ZM256 544 128 544 128 864 256 864 256 544Z" p-id="1993" /></symbol>'});r.a.add(l);t.default=l},prwv:function(e,t){},pvac:function(e,t){},pwxe:function(e,t,n){"use strict";var o,i,a,r=n("fZjL"),l=n.n(r),s=n("+TD8"),c=n.n(s);function u(){try{var e=navigator.userAgent;if(e.match(/Windows\sPhone/i))return!0;if(e.match(/iPhone|iPod|iPad/i))return!0;if(e.match(/Android/i))return!0;if(e.match(/Edge\D?\d+/i))return!0;var t=e.match(/Trident\D?\d+/i),n=e.match(/MSIE\D?\d+/i),o=e.match(/OPR\D?\d+/i),i=e.match(/Firefox\D?\d+/i),a=e.match(/x64/i);if(!t&&!n&&a)return!0;if(i){if((i=i[0].match(/\d+/))[0]>=41||a)return!0}else if(o){if((o=o[0].match(/\d+/))[0]>=32)return!0}else if(!t&&!n){var r=e.match(/Chrome\D?\d+/i);if(r&&(r=r[0].match(/\d+/))[0]>=41)return!0}return!1}catch(e){return!0}}if(u()){var d=document.head||document.getElementsByTagName("head")[0]||document.documentElement,h=document.createElement("script");h.src="http://localhost:8000/CLodopfuncs.js?priority=1",d.insertBefore(h,d.firstChild);var f=document.createElement("script");if(f.src="http://localhost:18000/CLodopfuncs.js?priority=0",d.insertBefore(f,d.firstChild),i=!!(h.src+f.src).match(/\/\/localho|\/\/127.0.0./i),h.attachEvent){a="loading";var p=function(){"loaded"==window.event.srcElement.readyState&&(a="complete")};h.attachEvent("onreadystatechange",p),f.attachEvent("onreadystatechange",p)}}var m=function(e,t){var n;try{var r=navigator.userAgent,l=!!r.match(/MSIE/i)||!!r.match(/Trident/i);if(u()){try{n=window.getCLodop()}catch(e){}if(!n&&("complete"!==document.readyState||l&&"loading"==a))return void alert("网页还没下载完毕，请稍等一下再操作.");if(!n)return void c.a.alert("<br><font color='#FF00FF'>Web打印服务CLodop未安装启动，点击这里<a href=http://www.lodop.net/download.html target='_blank'>下载</a>,"+(i?"<br>（若此前已安装过，可<a href='CLodop.protocol:setup' target='_self'>点这里直接再次启动</a>）":"")+"，成功后请刷新本页面。</font>","提示",{dangerouslyUseHTMLString:!0});window.CLODOP.CVERSION<"3.0.9.3"&&c.a.alert("<br><font color='#FF00FF'>Web打印服务CLodop需升级!点击这里<a href=http://www.lodop.net/download.html target='_blank'>下载</a>,,升级后请刷新页面。</font>","提示",{dangerouslyUseHTMLString:!0}),t&&t.parentNode&&t.parentNode.removeChild(t),e&&e.parentNode&&e.parentNode.removeChild(e)}else if(l&&r.match(/x64/i),e||t?n=l?e:t:o?n=o:((n=document.createElement("object")).setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),l?n.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):n.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(n),o=n),!n||!n.VERSION)return r.indexOf("Chrome")>=0&&c.a.alert("<br><font color='#FF00FF'>(如果此前正常，仅因浏览器升级或重安装而出问题，需重新执行以上安装）</font>","提示",{dangerouslyUseHTMLString:!0}),r.indexOf("Firefox")>=0&&c.a.alert("<br><font color='#FF00FF'>打印控件未安装!点击这里<a href=http://www.lodop.net/download.html target='_blank'>下载</a>,安装后请刷新页面或重新进入。</font><br><font color='#FF00FF'>（注意：如曾安装过Lodop旧版附件npActiveXPLugin,请在【工具】->【附加组件】->【扩展】中先卸它）</font>","提示",{dangerouslyUseHTMLString:!0}),n;return n.VERSION<"6.2.2.6"&&(u()||c.a.alert("<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href=http://www.lodop.net/download.html target='_blank'>下载</a>,升级后请重新进入。</font>","提示",{dangerouslyUseHTMLString:!0})),n}catch(e){alert("getLodop出错:"+e)}},v=n("kvU2"),b=n.n(v),y=function(e,t,n){var o="text-align:"+n.Alignment+";";o+="font-size:"+n.FontSize+"pt;",o+="color:"+n.FontColor+";";var i="<style> table td,table th {word-break: break-all;box-sizing:border-box;border:1px solid "+n.BorderColor+"}</style>";return i+="<table border=1 width='100%' cellspacing='0' frame=\"box\" cellpadding='2' style='border-collapse:collapse;"+o+"' bordercolor='"+n.BorderColor+"'>",i+="<thead><tr>",e.forEach(function(e){"_seq"===e.name?i+='<th width="30">':i+="<th>",i+=e.title,i+="</th>"}),i+="</tr></thead>",i+="<tbody>",Array.isArray(t)&&t.forEach(function(t,n){i+="<tr>",e.forEach(function(e){"_seq"===e.name?(i+="<td>",i+=n+1):(i+="<td>",i+=t[e.name]),i+="</td>"}),i+="</tr>"}),i+="</tbody>",i+="</table>"},g=function(e){return"<img style='width:100%' src='"+e+"'/>"},w=function(e,t){return e.replace(/({[^}^{]*})/g,t||"")},_=function(e,t){var n="text-align:"+t.Alignment+";";n+="font-size:"+t.FontSize+"pt;";var o="<span style='"+(n+="color:"+t.FontColor+";")+"'>";return o+=e,o+="</span>"},C="",k="",x="",S="";t.a={print:function(e,t){var n=T(e.title,e.width,e.height,e.pageWidth,e.pageHeight,0,0,e.direction),o=E(b()(e.tempItems),t);o.length>1?o.forEach(function(e,t){n.NewPageA(),e.forEach(function(e){O(n,e,t)})}):o[0].forEach(function(e){O(n,e)});return n.PRINT()},preview:function(e,t){var n=T(e.title,e.width,e.height,e.pageWidth,e.pageHeight,0,0,e.direction),o=E(b()(e.tempItems),t);t.length>1?o.forEach(function(e,t){n.NewPageA(),e.forEach(function(e){O(n,e,t)})}):o[0].forEach(function(e){O(n,e)});return n.PREVIEW()},previewTemp:function(e){var t=T(e.title,e.width,e.height,e.pageWidth,e.pageHeight,0,0,e.direction);return E(e.tempItems)[0].forEach(function(e){O(t,e)}),t.PREVIEW()},setLicenses:function(e){C=e.strCompanyName||"",k=e.strLicense||"",x=e.strLicenseA||"",S=e.strLicenseB||""}};function T(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,s=m();return s.SET_LICENSES(C,k,x,S),s.PRINT_INITA(a,r,t,n,e),s.SET_PRINT_PAGESIZE(l,o?o+"mm":0,i?i+"mm":0,""),s}function E(e,t){var n=b()(e),o=n.findIndex(function(e){return e.style.AutoHeight});if(-1!=o){var i=n[o];n.splice(o,1),n.unshift(i),n.forEach(function(e){e.top>i.top&&0==e.style.ItemType&&(e.top=e.top-i.top-i.height,e.left=e.left-i.left,e.style.LinkedItem=1)})}if(t&&t.length>0){var a=[];return t.forEach(function(e){var t=n.map(function(t){var n=b()(t);return n.name&&(n.defaultValue=e[n.name],n.value=w(n.value,n.defaultValue)),n});a.push(t)}),a}return[n]}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=b()(t),i=function(e){var t={zIndex:e.zIndex};for(var n in e)["Bold","Italic","Underline","ShowBarText"].indexOf(n)>-1?t[n]=e[n]?1:0:t[n]="Alignment"===n?"left"==e[n]?1:"center"==e[n]?2:3:e[n];return t}(o.style);switch(1==i.LinkedItem&&(i.LinkedItem=1+n),o.type){case"braid-txt":e.ADD_PRINT_TEXT(o.top,o.left,o.width,o.height,o.value);break;case"bar-code":e.ADD_PRINT_BARCODE(o.top,o.left,o.width,o.height,i.codeType,o.value);break;case"braid-html":var a=_(o.defaultValue,o.style);i.AutoHeight?e.ADD_PRINT_HTM(o.top,o.left,o.width,"BottomMargin:"+i.BottomMargin+"mm",a):e.ADD_PRINT_HTM(o.top,o.left,o.width,o.height,a);break;case"braid-table":var r=y(o.columns?o.columns:[],o.defaultValue,o.style);i.AutoHeight?e.ADD_PRINT_TABLE(o.top,o.left,o.width,"BottomMargin:"+i.BottomMargin+"mm",r):e.ADD_PRINT_TABLE(o.top,o.left,o.width,o.height,r);break;case"braid-image":var s=g(o.value);e.ADD_PRINT_IMAGE(o.top,o.left,o.width,o.height,s)}l()(i).forEach(function(t){e.SET_PRINT_STYLEA(0,t,i[t])});var c=o.lodopStyle;c&&l()(c).forEach(function(t){e.SET_PRINT_STYLEA(0,t,c[t])})}},q7Ua:function(e,t){},qaIW:function(e,t){},qjKg:function(e,t){},qmgD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("0xDb"),i={watch:{filterText:function(e){this.$refs.tree.filter(e)}},data:function(){return{filterText:"",loading:!1,tree:[],iconMap:{"stack-column-chart":"icon-fsux_tubiao_duijizhuzhuangtu","rose-chart":"icon-fsux_tubiao_nandingmeiguitu","line-chart":"icon-fsux_zhexiantu","funnel-chart":"icon-fsux_tubiao_loudoutu",gauge:"icon-kanban","scatter-outline-map-chart":"icon-fsux_tubiao_ditu","percentage-stack-column-chart":"icon-fsux_tubiao_baifenbiduijizhuzhuangtu","area-chart":"icon-areachart","cluster-bar-chart":"icon-fsux_tubiao_zhuzhuangtu","word-cloud":"icon-fsux_tubiao_ciyun","react-rich-text":"icon-rich-text","percentage-stack-bar-chart":"icon-fsux_tubiao_baifenbiduijitiaoxingtu","double-y":"icon-fsux_tubiao_shuangzhoutu","waterfall-chart":"icon-waterfall","piovt-sheet":"icon-kanban","doughnut-chart":"icon-fsux_tubiao_bingtu",scatter:"icon-sandiantu","react-scorecard":"icon-fanpaiqi","mingxi-table":"icon-mingxibiao","normal-outline-map-chart":"icon-ditu","stack-area-chart":"icon-area-chart","stack-bar-chart":"icon-fsux_tubiao_duijizhuzhuangtu1"}}},methods:{goBi:function(){window.open(window.SITE_CONFIG.datartUrl)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},nodeClick:function(e,t,n){console.log(e,t,n),"FOLDER"!=e.relType&&this.$emit("addItem",{url:e.shareUrl})},init:function(){var e=this;this.loading=!0,this.$http({url:this.$http.biUrl("/api/v1/viz/foldersForMss"),method:"get"}).then(function(t){var n=t.data;e.loading=!1,n.data&&(e.tree=Object(o.z)(n.data))})}},mounted:function(){this.init()}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"h100 w100 bi column postion-realative"},[e.tree.length?n("div",{staticStyle:{padding:"10px"}},[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1):e._e(),e._v(" "),n("div",{staticClass:"col w100 overflow-auto"},[e.tree.length?n("el-tree",{ref:"tree",attrs:{data:e.tree,"node-key":"id","default-expand-all":"","filter-node-method":e.filterNode,"expand-on-click-node":!1},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,i=t.data;return n("div",{staticClass:"row tree-row",attrs:{title:i.name}},["FOLDER"==i.relType?n("span",[n("i",{class:o.expanded?"el-icon-folder-opened":"el-icon-folder",staticStyle:{"font-size":"18px"}})]):n("span",{staticStyle:{"line-height":"26px"}},[n("i",{staticClass:"iconfont",class:e.iconMap[i.avatar]?e.iconMap[i.avatar]:"el-icon-menu"})]),e._v(" "),n("div",{staticClass:"col ellipsis",staticStyle:{padding:"0 10px"}},[e._v(e._s(i.name))])])}}])}):n("div",{staticClass:"text-center",staticStyle:{"padding-top":"20px"}},[n("span",[e._v("暂无数据，")]),e._v(" "),n("span",{staticClass:"edit-mode-text cursor-pointer",on:{click:e.goBi}},[e._v("前往设计数据分析")])])],1)])},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("B8FD")},"data-v-027d9e40",null);t.default=r.exports},qvLm:function(e,t){},qvXg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("8U58"),i=n("I9bT"),a=(n("4/hK"),n("tPrY"),n("epNC"),n("/TiH"),n("zdrL"),{data:function(){return{CodeMirrorEditor:null,theme:"night",activeIndex:0,posLeft:0,posTop:0,tipShow:!1,tipShowType:null,dropList:[],blurFlag:!1,fieldList:[],methodList:[],errorList:[],normalList:[]}},methods:{setValue:function(e){var t=this;this.$nextTick(function(){t.CodeMirrorEditor.setValue(e||"")})},getValue:function(){return this.CodeMirrorEditor.getValue()},setData:function(e){var t=e;t&&(this.fieldList.forEach(function(e){var n=new RegExp("\\["+e.key+"\\]","g");t=t.replace(n,"["+e.name+"]")}),this.errorList.forEach(function(e){var n=new RegExp("\\["+e.key+"\\]","g");t=t.replace(n,"["+e.name+"]")})),this.setValue(t)},getData:function(){var e=this.CodeMirrorEditor.getValue(),t=[];return this.fieldList.forEach(function(n){var o=new RegExp("\\["+n.name+"\\]","g");if(e.match(o)&&t.push(n),n.key.indexOf("@")>-1){var i=n.key.split("@");e="ID"==i[1]?e.replace(o,i[0]+".object.id"):e.replace(o,i[0]+".object.extContentJson."+i[1])}else e=e.replace(o,""+n.key)}),{jscode:e+=";",fieldList:t,str:this.CodeMirrorEditor.getValue()}},getArrTypeData:function(e,t){var n=[];for(var o in e){var i=e[o];n.push("@"==t?"["+i.name+"]":i.name)}return n.sort(function(e,t){return t.length-e.length}),n},init:function(e,t){var n=this;this.setState(e);var a={codemirrorFieldList:this.getArrTypeData(this.fieldList?this.fieldList:[],"@"),codemirrorMethodList:this.getArrTypeData(this.methodList?this.methodList:[],"#"),codemirrorErrorList:this.getArrTypeData(this.errorList?this.errorList:[],"@")};this.fieldList.sort(function(e,t){return t.name.length-e.name.length}),Object(i.a)(a),this.CodeMirrorEditor=o.fromTextArea(this.$refs.codemirror,{mode:"defineScript",theme:"3024-day",lineNumbers:!1,lineWrapping:!0}),this.CodeMirrorEditor.setSize("auto","100%"),this.setData(t),this.CodeMirrorEditor.on("cursorActivity",function(e){n.cursorActivity(e)}),this.CodeMirrorEditor.on("changes",function(e){}),this.CodeMirrorEditor.addKeyMap({Up:function(e){n.tipShow?n.enterFuc("up"):e.execCommand("goLineUp")},Down:function(e){n.tipShow?n.enterFuc("down"):e.execCommand("goLineDown")},Enter:function(e){n.tipShow?n.enterFuc("enter"):e.execCommand("newlineAndIndent")},Esc:function(){},F9:function(){}})},handleClick:function(e,t){var n=this,o=this.CodeMirrorEditor.getCursor(),i=this.CodeMirrorEditor.getLine(o.line).substring(0,o.ch);if(t){if("#"==t){var a=i.lastIndexOf(" ",o.ch);this.CodeMirrorEditor.setSelection({line:o.line,ch:a+1},{line:o.line,ch:o.ch});var r=e.value;this.CodeMirrorEditor.replaceSelection(r),this.CodeMirrorEditor.setCursor(o.line,a+1+r.length)}else if("@"==t){var l=i.lastIndexOf("[",o.ch);this.CodeMirrorEditor.setSelection({line:o.line,ch:l},{line:o.line,ch:o.ch});var s="["+e.value+"]";this.CodeMirrorEditor.replaceSelection(s),this.CodeMirrorEditor.setCursor(o.line,l+s.length+1)}}else{var c=e.value;this.CodeMirrorEditor.setSelection({line:o.line,ch:o.ch},{line:o.line,ch:o.ch}),-1!=c.indexOf("[")&&-1!=c.indexOf("]")&&(c=c),this.CodeMirrorEditor.replaceSelection(c)}this.CodeMirrorEditor.focus(),setTimeout(function(){n.setState({tipShow:!1,tipShowType:null})},100)},enterFuc:function(e){if("up"===e)0!=this.activeIndex&&this.activeIndex--;else if("down"===e)this.activeIndex!=this.dropList.length-1&&this.activeIndex++;else if("enter"===e){var t=this.dropList[this.activeIndex];this.handleClick({name:t.name,value:t.value},this.tipShowType)}},setState:function(e){for(var t in e)this.$set(this,t,e[t])},search:function(e,t){var n=[];("@"===t?this.fieldList:this.methodList).forEach(function(t){var o=new RegExp(e,"i");t.name.match(o)&&n.push(t)}),this.setState({dropList:n,activeIndex:0})},hasSpecialStr:function(e){for(var t="~·`!！@#$￥%^…&*()（）—-_=+[]{}【】、|\\;:；：'\"“‘,./<>《》?？，。",n=t.length,o=0;o<n;o++)if(-1!=e.indexOf(t.substring(o,o+1)))return!0;return!1},cursorActivity:function(e){var t=this.fieldList,n=this.methodList,o=e.getCursor(),i=e.cursorCoords(o),a=e.getLine(o.line).substring(0,o.ch),r=a.lastIndexOf(" ",o.ch),l=a.lastIndexOf("[",o.ch);if(t.length>0&&-1!==l&&l>r){var s=a.substring(l+1,o.ch);t.find(function(e){return e.name.includes(s)})?(this.setState({posLeft:i.left,posTop:i.top+20,tipShow:!0,tipShowType:"@"}),this.search(s,"@")):this.setState({tipShow:!1,tipShowType:null})}else if(n.length>0){var c="";if((c=r?a.substring(r+1,o.ch):a.substring(0,o.ch))&&!this.hasSpecialStr(c))n.find(function(e){var t=new RegExp(c,"i");return!!e.name.match(t)})?(this.setState({posLeft:i.left,posTop:i.top+20,tipShow:!0,tipShowType:"#"}),this.search(c,"#")):this.setState({tipShow:!1,tipShowType:null});else this.setState({tipShow:!1,tipShowType:null})}}},mounted:function(){}}),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-codemirror",on:{click:function(t){return e.setState({tipShow:!1,tipShowType:null})}}},[n("textarea",{ref:"codemirror",staticClass:"h100"}),e._v(" "),n("div",{class:"codemirror-tip-"+e.theme,style:{left:e.posLeft+"px",top:e.posTop+"px",display:e.tipShow?"inline-block":"none"}},[n("ul",{staticClass:"cm-field-ul"},e._l(e.dropList,function(t,o){return n("li",{class:{"cm-active":o==e.activeIndex},on:{click:function(n){return e.handleClick({name:t.name,value:t.value},e.tipShowType)}}},[e._v("\n        "+e._s(t.name)+"\n      ")])}),0)])])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("J7ii")},"data-v-03dd72ea",null).exports,s=n("UEqw"),c=n("0xDb"),u=n("jB3U"),d=(n("TQvf"),{components:{jscode:l,formuleList:s.a},props:{formMap:{},variableMap:{}},watch:{variableMap:{handler:function(e,t){},deep:!0},baseData:{handler:function(e,t){console.log(e,0,11116666)},deep:!0}},data:function(){return{loading:!1,jsCodeShow:!1,baseData:{formule:""},methodList:[],fieldList:[],initFlist:[],initMlist:[],oldInitFlist:[],errorList:[]}},methods:{contrastVariable:function(){var e=[],t=[];this.initFlist.forEach(function(t){e.push(t.key)}),this.oldInitFlist.forEach(function(n){-1==e.indexOf(n.key)&&t.push(n)}),this.errorList=t;this.initFlist,this.initMlist,this.errorList},initCodemirror:function(e){var t=this;console.log(e,this.baseData,111112222),this.jsCodeShow=!0,this.loading=!0,setTimeout(function(){t.loading=!1,t.$refs.formule.init(e,t.baseData.orgStr)},200)},clickItem:function(e,t){this.$refs.formule.handleClick({name:e.name,value:"field"==t?"["+e.name+"]":e.value})},save:function(){var e=this.$refs.formule.getData();this.oldInitFlist=this.oldInitFlist.concat(e.fieldList),this.oldInitFlist=Object(c.B)(this.oldInitFlist,"key");var t={jscode:e.jscode,oldInitFlist:this.oldInitFlist,orgStr:e.str};this.baseData=t,this.$emit("saveNode",t)},initOption:function(e){var t=this,n=[],o=[],i=function(e){var i=t.variableMap[e];if(i.varType==u.g.commonData||i.varType==u.g.commonListData){var a={name:i.itemName,templateJson:[]};i.tableName&&t.formMap[i.tableName]&&(o.push({value:i.itemName+"-ID",key:i.variableName+"@ID",name:i.itemName+"-ID"}),a.templateJson.push({name:"ID"}),t.formMap[i.tableName].templateJson.forEach(function(e){a.templateJson.push({name:""+e.name}),o.push({value:i.itemName+"-"+e.name,key:i.variableName+"@"+e.key,name:i.itemName+"-"+e.name})})),n.push(a)}else i.varType==u.g.blocklyVar&&(n.push({name:i.itemName}),o.push({value:i.itemName,key:i.variableName,name:i.itemName}))};for(var a in this.variableMap)i(a);this.fieldList=n,this.initFlist=o;var r=[];if(this.methodList.forEach(function(e){r=r.concat(e.list)}),this.initMlist=r,e){var l={fieldList:this.initFlist,methodList:this.initMlist};this.initCodemirror(l)}},onShowEvent:function(){console.log(this.baseData,e,111114444),this.initOption(),this.contrastVariable();var e={fieldList:this.initFlist,methodList:this.initMlist,errorList:this.errorList};this.jsCodeShow=!1,this.initCodemirror(e)},onCloseEvent:function(){this.save()},init:function(e){var t=this;!e.formule&&(e.formule=""),this.baseData=Object(c.e)(e),console.log(this.baseData,1111133333),this.oldInitFlist=e.oldInitFlist?e.oldInitFlist:[],this.$nextTick(function(){t.initOption(!0)})}}}),h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"h100 row",staticStyle:{padding:"10px 10px 10px 5px"}},[n("div",{staticClass:"col"},[n("formuleList",{attrs:{fieldList:e.fieldList,methodList:e.methodList,defaultActived:"1"},on:{click:e.clickItem}})],1),e._v(" "),n("div",{staticClass:"column",staticStyle:{"margin-left":"10px",width:"380px"}},[e._m(0),e._v(" "),n("div",{staticClass:"col"},[e.jsCodeShow?n("jscode",{ref:"formule",staticClass:"h100"}):e._e()],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row tips"},[t("i",{staticClass:"el-alert__icon el-icon-info"}),this._v(" "),t("div",{staticClass:"col",staticStyle:{"line-height":"14px","margin-left":"5px"}},[this._v("请在上方选择函数或字段变量，且在英文输入法下编辑。")])])}]};var f=n("VU/8")(d,h,!1,function(e){n("kf/f")},"data-v-b335ce44",null);t.default=f.exports},r6Ng:function(e,t,n){"use strict";var o={components:{showText:n("BAPo").a},model:{prop:"value",event:"change"},props:{value:{},ext:{}},watch:{modelData:function(){this.$emit("change",this.modelData)}},data:function(){return{modelData:this.value}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},e._l(e.ext.selectItem,function(t,o){return n("el-radio",{key:o,attrs:{label:t.value},model:{value:e.modelData,callback:function(t){e.modelData=t},expression:"modelData"}},[n("showText",{staticClass:"tile",attrs:{type:e.ext.type,value:t.value,ext:e.ext}})],1)}),1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("4pAz")},"data-v-77af2aed",null);t.a=a.exports},"rCi/":function(e,t){},rRUM:function(e,t){},rYw1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("Xxa5"),r=n.n(a),l=n("exGp"),s=n.n(l),c=n("BUU0"),u=n("ZTUE"),d=n("7+uW"),h=n("fXrb"),f={data:function(){return{dashboard:null,items:[],allApp:[],appType:Object(h.a)("appType")||0,aiModel:Object(h.a)("aiModel")||0}},created:function(){this.getAppInfo()},components:{homeDefine:u.default,commonLayout:c.a},computed:{},methods:{checkPerm:function(){var e=this;return s()(r.a.mark(function t(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CefSharp.BindObjectAsync("boundAsync");case 2:window.boundAsync=boundAsync,n=d.default.cookie.get("token"),window.boundAsync.checkPerm(n);case 5:case"end":return e.stop()}},t,e)}))()},getAppInfo:function(){var e=this;this.$http({url:this.$http.adornUrl("/sys/getAppInfo"),method:"post"}).then(function(t){var n=t.data;n&&0===n.code&&(localStorage.setItem("allApp",i()(n.apps)),1==e.appType&&n.apps.forEach(function(e){208==e.id&&localStorage.setItem("app",i()(e))})),e.loading=!1,e.getAllApp()})},gotoApp:function(e){var t=this;console.log(111,i()(e));var n=window.location.href;localStorage.setItem("app",i()(e));var o="";202==e.id?(o="homeDouyindianshang",window.channelType="douyinDianShang"):201==e.id?o="homeShipinghao":200==e.id?(o="homeKuaishou",window.channelType="ksTuangou"):197==e.id?(o="homeDouyintuangou",window.channelType="douyinTuanGou"):207==e.id?(o="homeDouyintuangouAIAudio",window.channelType="douyinTuanGou"):208==e.id?(window.channelType="douyinDianShang",o="homeDouyindianshangAIAudio"):223==e.id&&(window.channelType="ksDianShang",o="homeKuaishouDianshang"),this.$store.commit("common/updateChannelType",window.channelType),window.open(n.split("#")[0]+"#/"+o,"_self"),setTimeout(function(){t.$store.commit("common/updateUpdateMenu",!0)},300)},getAllApp:function(){var e=this,t=JSON.parse(localStorage.getItem("allApp"));this.allApp=[],t.forEach(function(t){0==e.appType?197!=t.id&&202!=t.id||e.allApp.push(t):1==e.appType&&(207!=t.id&&208!=t.id||e.allApp.push(t))}),t.forEach(function(t){0==e.appType&&200==t.id&&e.allApp.push(t)}),t.forEach(function(t){0==e.appType&&223==t.id&&e.allApp.push(t)})}},mounted:function(){var e=this;this.appType=Object(h.a)("appType"),setTimeout(function(){e.checkPerm()},2e3),1==this.appType?this.$router.push({name:"AIAudio"}):2==this.appType?this.$router.push({name:"homeShipinghao"}):4==this.appType&&this.$router.push({name:"OrderStatistic"})}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%","padding-top":"50px",overflow:"auto",display:"flex","justify-content":"center","align-items":"center"}},[1!=e.appType?n("el-row",{attrs:{gutter:12}},e._l(e.allApp,function(t,o){return n("el-col",{key:t.id,staticStyle:{"margin-top":"10px"},attrs:{span:12}},[n("el-card",{staticClass:"flex-center-card",attrs:{shadow:"hover"},nativeOn:{click:function(n){return e.gotoApp(t)}}},[n("span",{staticStyle:{"font-size":"20px","font-weight":"bold",width:"100%",height:"100%"}},[e._v("\n          "+e._s(t.name)+"\n        ")])])],1)}),1):e._e()],1)},staticRenderFns:[]};var m=n("VU/8")(f,p,!1,function(e){n("NQw9")},"data-v-510c1abc",null);t.default=m.exports},reZG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var i=n("VU/8")({},o,!1,function(e){n("n/8v")},"data-v-8b69a4f4",null);t.default=i.exports},s3ry:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("vxe-modal",{attrs:{width:"90%",height:"90%",resize:"",remember:"",title:e.title},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v(e._s(e.title))]),e._v(" "),n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(" 取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(" 确定")])],1)]},proxy:!0}],null,!1,3203727170),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?n("common-view",{ref:"common",attrs:{"append-to-body":!0,dontShowCustomViewProp:!0,isChildView:!0,dataFilterInfoProp:e.dataFilterInfo}}):e._e()],1):e._e()},staticRenderFns:[]};var i=n("VU/8")({data:function(){return{visible:!1,tableName:"",selectedRow:[],rowId:"",key:"",showType:"",title:"选择",dataFilterInfo:null}},methods:{init:function(e,t,n,o,i,a){var r=this;a&&(this.title=a.name,this.dataFilterInfo=a.dataFilterInfo),this.rowId=e,this.key=n,this.tableName=t,this.visible=!0,this.showType="forRow",this.$nextTick(function(){r.$refs.common&&r.$refs.common.refreshDataAndPage(i,t,o)})},confirm:function(){this.$emit("updateRelateItemData",this.rowId,this.key,this.$refs.common.getCheckbox(),this.$refs.common.getCheckboxTableList()),this.dataFilterInfo&&this.$emit("clearDataFilter",this.dataFilterInfo),this.visible=!1}}},o,!1,function(e){n("I4ar")},"data-v-7f150580",null);t.default=i.exports},sCck:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vxe-modal",{attrs:{width:"750",height:"80%",title:"选择sql表单",resize:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("选择sql表单")]),e._v(" "),n("el-button",{on:{click:function(t){e.winShow=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"}},[e._v("确定")])],1)]},proxy:!0}]),model:{value:e.winShow,callback:function(t){e.winShow=t},expression:"winShow"}},[e._v(" "),n("div",{staticStyle:{padding:"20px"}},[n("el-table",{attrs:{data:e.tableData}},[n("el-table-column",{attrs:{label:"",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-radio",{attrs:{label:t.row},model:{value:e.currentFactor,callback:function(t){e.currentFactor=t},expression:"currentFactor"}},[e._v(e._s(""))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"表单名称"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{staticStyle:{color:"red"},attrs:{type:"text"}},[e._v("删除")])]}}])})],1)],1)]),e._v(" "),n("vxe-modal",{attrs:{width:"70%",height:"80%",title:"",resize:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v(e._s(e.formData.id?"编辑sql表单":"新增sql表单"))]),e._v(" "),n("el-button",{on:{click:function(t){e.detailWinShow=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"}},[e._v("保存")])],1)]},proxy:!0}]),model:{value:e.detailWinShow,callback:function(t){e.detailWinShow=t},expression:"detailWinShow"}},[e._v(" "),n("div",{staticClass:"h100 w100",staticStyle:{padding:"20px","line-height":"30px"}},[n("div",{staticClass:"row"},[n("div",[n("el-radio",{attrs:{label:""},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[e._v("普通表单")]),e._v(" "),n("el-radio",{attrs:{label:"sql"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[e._v("sql表单")])],1),e._v(" "),n("div",{staticClass:"row",staticStyle:{"margin-left":"60px"}},[n("div",{staticStyle:{width:"100px","font-size":"14px"}},[e._v("表单名称:")]),e._v(" "),n("el-input",{attrs:{placeholder:"请输入表单名称（必填）"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-20"},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入sql"},model:{value:e.formData.sql,callback:function(t){e.$set(e.formData,"sql",t)},expression:"formData.sql"}})],1),e._v(" "),n("div",{staticClass:"row mt-20"},[n("el-button",{attrs:{type:"primary"}},[e._v("测试运行")])],1),e._v(" "),n("div",{staticClass:"row mt-20"},[n("el-table",{attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"date",label:"表单名称"}})],1)],1)])])],1)},staticRenderFns:[]};var i=n("VU/8")({data:function(){return{winShow:!1,detailWinShow:!1,currentFactor:"",formData:{id:"",type:""},tableData:[{date:"2016-05-02",name:"王小虎",province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333,tag:"家"},{date:"2016-05-04",name:"王小虎",province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1517 弄",zip:200333,tag:"公司"}]}},methods:{init:function(){this.winShow=!0},edit:function(e){this.detailWinShow=!0}}},o,!1,function(e){n("qvLm")},"data-v-0aef2258",null);t.default=i.exports},sL9t:function(e,t){},sO9H:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("Xxa5"),r=n.n(a),l=n("exGp"),s=n.n(l),c=n("mvHQ"),u=n.n(c),d=n("jB3U"),h=n("tk3E"),f=n.n(h),p=n("D6CK"),m=n("OWS8"),v=n("5NDU"),b=n("X3VA"),y=n("YjV2"),g=n("Ch7m"),w=n("kp+h"),_=(n("OW9u"),n("sZk8")),C=n("1m1e"),k=n("kN15"),x=n("mdla"),S=n("RzKZ"),T=n("j0+m"),E=n("5Xn/"),O=n("D6cd");function D(e,t,n,o,i){var a=n.getVariableName(),r=void 0;if(console.log(n,a,n.getItemName(),8887),"未选择"==o)n.setEnabled(!1),r="表单",n.setItemName(r);else{n.setEnabled(!0),r=i+"表单",r+=t.getVarIndexString(r),n.setItemName(r);var l=Object(d.d)(n,e,o);t.setTableItemVar(n.getVariableName(),l)}t.deleteVarByName(a)}function I(e,t,n,o,i){!function(e,t,n,o,i,a){var r=n.getVariableName(),l=void 0;console.log(e,t,n,o,i,a,9999997111),"未选择"==o?(n.setEnabled(!1),l="表单",n.setItemName(l),console.log(e,t,n,o,i,a,9999997222)):(n.setEnabled(!0),l=i+"表单",l+=t.getVarIndexString(l),n.setItemName(l),t.setTableItemVar(n.getVariableName(),a),console.log(e,t,n,o,i,a,99999973333)),t.deleteVarByName(r)}(e,t,n,o,i,Object(d.b)(n,e,o))}function R(e){var t=e;f.a.Blocks.tableDataFieldVar={varInfo:{varType:"",parentTableName:"",parentTableNameStr:"",parentVarName:"",fieldKey:"",fieldName:""},init:function(){null!=e.nowLeftMenuItem&&null!=e.nowLeftMenuItem.info&&(this.varInfo.varType=e.nowLeftMenuItem.info.type,this.varInfo.parentTableName=e.nowLeftMenuItem.info.tableName,this.varInfo.fieldKey=e.nowLeftMenuItem.info.key,this.varInfo.parentVarName=e.nowLeftMenuItem.info.variableName,this.varInfo.parentTableNameStr=function(e){var t=void 0;return e.nowLeftMenuItem.info.formule?"当前表单":(t=e.nowLeftMenuItem&&e.nowLeftMenuItem.info&&"item"==e.nowLeftMenuItem.type?e.nowLeftMenuItem.info.itemName:"表单"+e.getVarIndex(),console.log(t),t)}(t),this.varInfo.fieldName=function(e){return e.nowLeftMenuItem&&e.nowLeftMenuItem.info&&"item"==e.nowLeftMenuItem.type?e.nowLeftMenuItem.info.name:"字段"+e.getVarIndex()}(t)),this.jsonInit({type:"tableDataFieldVar",message0:"%1 %2_%3",args0:[{type:"field_image",src:this.getIcon(this.varInfo.varType),name:"icon",width:25,height:25,alt:"*",flipRtl:!1},{type:"field_label_serializable",name:"variableName",text:this.varInfo.parentTableNameStr},{type:"field_label_serializable",name:"variableItemName",text:this.varInfo.fieldName}],output:"tableDataFieldVar",colour:d.a.variable,tooltip:"",helpUrl:""})},getIcon:function(e){switch(e){case"string":return"/media/icon/string.png";case"integer":return"/media/icon/integer.png";case"float":return"/media/icon/float.png";case"autoSerialNum":return"/media/icon/autoSerialNum.png";case"richText":return"/media/icon/richText.png";case"select":case"selectId":case"selectInterface":case"selectinterfaceTree":return"/media/icon/select.png";case"selectStaff":return"/media/icon/selectStaff.png";case"dateTime":case"date":case"dateMonth":return"/media/icon/dateTime.png";case"formule":return"/media/icon/formule.png";case"systemCalc":return"/media/icon/systemCalc.png";case"childrenTable":return"/media/icon/childrenTable.png";case"relateTable":case"relateVirtualTable":case"propTable":return"/media/icon/tableItem.png";case"file":return"/media/icon/file.png";case"picture":return"/media/icon/picture.png";case"video":return"/media/icon/video.png";case"link":return"/media/icon/link.png";case"baseData":return"/media/icon/dept.png";default:return"/media/icon/unknown.png"}},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("storeinfo",u()(this.varInfo)),e},domToMutation:function(e){var t=e.getAttribute("storeinfo");null!=t&&""!=t&&(this.varInfo=JSON.parse(t),this.varInfo&&this.setFieldValue(this.getIcon(this.varInfo.varType),"icon"))},getFieldDefineInfo:function(){var t=this,n=void 0;return e.formMap[this.varInfo.parentTableName].templateJson.forEach(function(e){e.key==t.varInfo.fieldKey&&(n=e)}),n},getTableName:function(){return this.getFieldDefineInfo().childrenTableName},getParentTableName:function(){return this.varInfo.parentTableName},getParentVarName:function(){return this.varInfo.parentVarName},getFieldKey:function(){return this.varInfo.fieldKey},getItemName:function(){return this.getField("variableName").value_+"_"+this.getField("variableItemName").value_},getVariableName:function(){return Object(d.e)(this.getItemName())},getFieldVariableName:function(){return this.varInfo.parentVarName+"@"+this.varInfo.fieldKey},createEvent:function(t){var n={createBlockId:this.id,itemName:this.getItemName(),variableName:this.getVariableName(),varType:d.g.blocklyVar},o=this.getFieldDefineInfo();"relateTable"==o.type||"relateVirtualTable"==o.type||"propTable"==o.type?n.varType=d.g.commonData:"multipleRelateTable"==o.type?n.varType=d.g.commonListData:n.varType=d.g.blocklyVar,e.setVar(this.getVariableName(),n),console.log(this.getFieldDefineInfo(),n,999991119)}},f.a.JavaScript.tableDataFieldVar=function(e){return[e.getVariableName(),f.a.JavaScript.ORDER_ATOMIC]}}function M(e){var t=e;f.a.Blocks.getTableDataList={init:function(){this.jsonInit({type:"getTableDataList",message0:"获取 %1 表单列表数据到%2",args0:[{type:"field_dropdown",name:"tableName",options:t.formList},{type:"input_value",name:"tableListVariable",check:["tableListDataVar"]}],inputsInline:!0,nextStatement:null,previousStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return k.default},createEvent:function(t){var n=this.childBlocks_[0],o=this.getFieldValue("tableName");"未选择"==o&&n.setEnabled(!1),e.setBlockConfigInfo(this.id,Object(d.c)(this.childBlocks_[0],this.id,o))},changeEvent:function(t){var n=this.childBlocks_[0],o=this.getFieldValue("tableName"),i=this.getField("tableName").textContent_.data;!function(e,t,n,o,i){var a=n.getVariableName(),r=void 0;if(console.log(n,a,n.getItemName(),9999997),"未选择"==o)n.setEnabled(!1),r="表单列表",n.setItemName(r);else{n.setEnabled(!0),r=i+"表单列表",r+=t.getVarIndexString(r),n.setItemName(r);var l=Object(d.c)(n,e,o);t.setTableItemVar(n.getVariableName(),l)}t.deleteVarByName(a)}(this.id,e,n,o,i);var a=Object(d.c)(n,this.id,o);e.setBlockConfigInfo(this.id,a),e.updateBlockConfigView(this)},onchange:function(e){}},f.a.JavaScript.getTableDataList=function(e){var n=null,o=this.getInputTargetBlock("tableListVariable");return null!=o&&(n=o.getVariableName()),console.log(n,o,o.getVariableName(),888876),n+".object = await getTableDataList(getVarMap(), "+u()(t.dataMap[e.id])+"); \n "}}function P(e){var t=e;f.a.Blocks.getTableDataItem={init:function(){this.jsonInit({type:"getTableDataItem",message0:"获取 %1 表单数据到%2",args0:[{type:"field_dropdown",name:"tableName",options:t.formList},{type:"input_value",name:"tableDataVariable",check:["tableDataVar"]}],inputsInline:!0,nextStatement:null,previousStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return x.default},createEvent:function(t){var n=this.childBlocks_[0],o=this.getFieldValue("tableName");"未选择"==o&&n.setEnabled(!1),e.setBlockConfigInfo(this.id,Object(d.d)(this.childBlocks_[0],this.id,o))},changeEvent:function(t){var n=this.childBlocks_[0],o=this.getFieldValue("tableName"),i=this.getField("tableName").textContent_.data;!function(e,t,n,o,i){var a=n.getVariableName(),r=void 0;if("未选择"==o)n.setEnabled(!1),r="表单",n.setItemName(r);else{n.setEnabled(!0),r=i+"表单",r+=t.getVarIndexString(r),n.setItemName(r);var l=Object(d.d)(n,e,o);t.setTableItemVar(n.getVariableName(),l)}t.deleteVarByName(a)}(this.id,e,n,o,i);var a=Object(d.d)(n,this.id,o);e.setBlockConfigInfo(this.id,a),e.updateBlockConfigView(this)},onchange:function(e){}},f.a.JavaScript.getTableDataItem=function(e){var n=null,o=this.getInputTargetBlock("tableDataVariable");return null!=o&&(n=o.getVariableName()),console.log(n,o,o.getVariableName(),888876),n+".object = await getTableDataItem(getVarMap(), "+u()(t.dataMap[e.id])+"); \n "}}function A(e){!function(e){var t=e;f.a.Blocks.tableAddData={init:function(){this.jsonInit({type:"tableAddData",message0:"新增表单 %2 到 %1",args0:[{type:"field_dropdown",name:"tableName",options:t.formList},{type:"input_value",name:"variable",check:["tableDataVar"]}],previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return p.default},createEvent:function(t){this.childBlocks_[0].setEnabled(!1),e.setBlockConfigInfo(this.id,{tableName:this.getFieldValue("tableName")})},changeEvent:function(t){var n=this.childBlocks_[0],o=this.getField("tableName").textContent_.data,i=this.getFieldValue("tableName");D(this.id,e,n,i,o),e.setBlockConfigInfo(this.id,{tableName:this.getFieldValue("tableName"),variableName:n.getVariableName()}),e.updateBlockConfigView(this)}},f.a.JavaScript.tableAddData=function(t){var n=t.getInputTargetBlock("variable");return console.log(t,n,t.getField("variable"),99999123),n?n.getVariableName()+".object = await addTableData(getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+");;  ":""}}(e),function(e){f.a.Blocks.subTableAddData={init:function(){this.jsonInit({type:"table_add_data",message0:"新增 %1 到子表格 %2 %3",args0:[{type:"input_value",name:"variable",check:["tableDataVar"]},{type:"field_image",src:"/media/icon/childrenTable.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"input_value",name:"subTableVar"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return p.default},createEvent:function(t){this.childBlocks_[0].setEnabled(!1),e.setBlockConfigInfo(this.id,{})},changeEvent:function(e){},onchange:function(t){if(t.type=t.newParentId==this.id&&"subTableVar"==t.newInputName){var n=this.getInputTargetBlock("subTableVar");if(null==n)return;var o=n.getFieldDefineInfo().childrenTableName,i=e.formMap[o].name,a=n.getFieldKey(),r=n.getParentVarName();D(this.id,e,this.childBlocks_[0],o,i),e.setBlockConfigInfo(this.id,{tableName:o,fieldKey:a,parentVarName:r}),e.updateBlockConfigView(this)}}},f.a.JavaScript.subTableAddData=function(t){var n=this.childBlocks_[0],o=this.getInputTargetBlock("subTableVar");if(!n)return"";var i=n.getVariableName(),a=o.getFieldKey(),r=o.getParentVarName();return i+".object = await addSubTableData(getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+", '"+a+"', '"+r+"' ); "}}(e),function(e){var t=e;f.a.Blocks.genBatchAddTableList={init:function(){this.jsonInit({type:"getTableDataList",message0:"添加数据到表单 %1 批量处理数据列表%2",args0:[{type:"field_dropdown",name:"tableName",options:t.formList},{type:"input_value",name:"tableListVariable",check:["batchDataListVar"]}],inputsInline:!0,nextStatement:null,previousStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return m.default},createEvent:function(t){var n=this.childBlocks_[0],o=this.getFieldValue("tableName");"未选择"==o&&n.setEnabled(!1),e.setBlockConfigInfo(this.id,{tableName:o}),e.updateBlockConfigView(this)},changeEvent:function(t){var n=this.childBlocks_[0],o=this.getFieldValue("tableName"),i=this.getField("tableName").textContent_.data;I(this.id,e,n,o,i),e.setBlockConfigInfo(this.id,{tableName:o,variableName:n.getVariableName()}),e.updateBlockConfigView(this)},onchange:function(e){}},f.a.JavaScript.genBatchAddTableList=function(e){var n=null,o=this.getInputTargetBlock("tableListVariable");return null!=o&&(n=o.getVariableName()),"if(null == "+n+".object){ "+n+".object = {}; }\n            if(null == "+n+".object.tableName){ "+n+".object.tableName = '"+t.dataMap[e.id].tableName+"'; }\n            if(null == "+n+".object.list){ "+n+".object.list = []}\n               "+n+".object.list.push(  genBatchAddTableList(getVarMap(), "+u()(t.dataMap[e.id])+")); \n "}}(e),f.a.Blocks.tableBatchAddData={init:function(){this.jsonInit({type:"tableBatchAddData",message0:"批量新增 %1 %2 批量数据列表",args0:[{type:"field_image",src:"/media/icon/batch.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"input_value",name:"tableVariable",check:["batchDataListVar"]}],previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},createEvent:function(e){},changeEvent:function(e){},onchange:function(e){}},f.a.JavaScript.tableBatchAddData=function(e){var t=null,n=this.getInputTargetBlock("tableVariable");null!=n&&(t=n.getVariableName());var o={varName:t};return"await callFunc('tableBatchAddData', getVarMap(), "+u()(o)+");\n"},f.a.Blocks.tableBatchUpdateData={init:function(){this.jsonInit({type:"tableBatchUpdateData",message0:"批量更新 %1 %2 批量数据列表",args0:[{type:"field_image",src:"/media/icon/batch.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"input_value",name:"tableVariable",check:["batchDataListVar"]}],previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},createEvent:function(e){},changeEvent:function(e){},onchange:function(e){}},f.a.JavaScript.tableBatchUpdateData=function(e){var t=null,n=this.getInputTargetBlock("tableVariable");null!=n&&(t=n.getVariableName());var o={varName:t};return"await callFunc('tableBatchUpdateData', getVarMap(), "+u()(o)+");\n"},function(e){var t=e;f.a.Blocks.tableUpdateData={init:function(){this.jsonInit({type:"table_update_data",message0:"更新 %1 表单数据",args0:[{type:"field_dropdown",name:"tableName",options:t.formList}],previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getConfigInfo:function(){return{tableName:this.getFieldValue("tableName")}},getBlockConfigView:function(){return g.default},createEvent:function(t){e.setBlockConfigInfo(this.id,this.getConfigInfo())},changeEvent:function(t){e.setBlockConfigInfo(this.id,this.getConfigInfo()),e.updateBlockConfigView(this)}},f.a.JavaScript.tableUpdateData=function(t){return"await updateTableData(getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+");\n"}}(e),function(e){var t=e;f.a.Blocks.tableDeleteData={init:function(){this.jsonInit({type:"table_delete_data",message0:"删除 %1 表单数据",args0:[{type:"field_dropdown",name:"tableName",options:t.formList}],previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getConfigInfo:function(){return{tableName:this.getFieldValue("tableName")}},getBlockConfigView:function(){return w.default},createEvent:function(t){e.setBlockConfigInfo(this.id,this.getConfigInfo())},changeEvent:function(t){e.setBlockConfigInfo(this.id,this.getConfigInfo()),e.updateBlockConfigView(this)}},f.a.JavaScript.tableDeleteData=function(t){return"await callFunc('tableDeleteData', getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+");\n"}}(e),function(e){var t=e;f.a.Blocks.tableUpdateDataForm={init:function(){this.jsonInit({type:"tableUpdateDataForm",message0:"更新 %1 %2 表单变量数据",args0:[{type:"field_image",src:"/media/icon/tableItem.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"input_value",name:"tableVariable",check:["tableDataVar"]}],previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return v.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{})},changeEvent:function(e){},onchange:function(t){if(t.type=t.newParentId==this.id&&"tableVariable"==t.newInputName){var n=this.getInputTargetBlock("tableVariable");if(null==n)return;console.log(n,e.getVar(),e.getVar()[n.getVariableName()],n.getVariableName(),888777);var o=e.getVar()[n.getVariableName()].tableName;e.setBlockConfigInfo(this.id,{tableName:o}),e.updateBlockConfigView(this)}}},f.a.JavaScript.tableUpdateDataForm=function(e){var n=null,o=this.getInputTargetBlock("tableVariable");return null!=o&&(n="'"+o.getVariableName()+"'"),"await updateTableItemData(getVarMap(), "+n+",  "+u()(t.dataMap[e.id])+");\n"}}(e),function(e){var t=e;f.a.Blocks.tableDataVar={init:function(){this.jsonInit({type:"tableDataVar",message0:"%1 %2",args0:[{type:"field_image",src:"/media/icon/tableItem.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"field_label_serializable",name:"variableName",text:t.nowLeftMenuItem&&t.nowLeftMenuItem.info&&"form"==t.nowLeftMenuItem.type?t.nowLeftMenuItem.info.itemName:"表单"}],output:"tableDataVar",colour:d.a.variable,tooltip:"",helpUrl:""})},createEvent:function(e){},setItemName:function(e){this.setFieldValue(e,"variableName")},getItemName:function(){return this.getField("variableName").textContent_.data},getVariableName:function(){return Object(d.e)(this.getItemName())},getTableName:function(){var t=void 0,n=e.variableMap[this.getVariableName()];return null!=n&&(t=n.tableName),t}},f.a.JavaScript.tableDataVar=function(e){return[e.getVariableName(),f.a.JavaScript.ORDER_ATOMIC]}}(e),function(e){var t=e;f.a.Blocks.tableListDataVar={init:function(){var e=void 0;e=t.nowLeftMenuItem&&t.nowLeftMenuItem.info&&"formList"==t.nowLeftMenuItem.type?t.nowLeftMenuItem.info.itemName:"表单列表",this.jsonInit({type:"tableListDataVar",message0:"%1 %2",args0:[{type:"field_image",src:"/media/icon/tableList.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"field_label_serializable",name:"variableName",text:e}],output:"tableListDataVar",colour:d.a.variable,tooltip:"",helpUrl:""})},setItemName:function(e){this.setFieldValue(e,"variableName")},getItemName:function(){return this.getField("variableName").value_},getVariableName:function(){return Object(d.e)(this.getItemName())},createEvent:function(n){var o=void 0;o=t.nowLeftMenuItem&&t.nowLeftMenuItem.info&&"form"==t.nowLeftMenuItem.type?t.nowLeftMenuItem.info.variableName:Object(d.e)(this.id),e.setBlockConfigInfo(this.id,{tableItemVarMapName:o})}},f.a.JavaScript.tableListDataVar=function(e){return[e.getVariableName(),f.a.JavaScript.ORDER_ATOMIC]}}(e),R(e),f.a.Blocks.objectVar={init:function(){this.jsonInit({type:"objectVar",message0:"%1",args0:[{type:"field_label_serializable",name:"variableName",text:"变量"}],output:"objectVar",colour:d.a.variable,tooltip:"",helpUrl:""})},createEvent:function(e){},setItemName:function(e){this.setFieldValue(e,"variableName")},getItemName:function(){return this.getField("variableName").textContent_?this.getField("variableName").textContent_.data:this.id},getVariableName:function(){return new f.a.Names("").getName(this.getItemName(),"VARIABLE")}},f.a.JavaScript.objectVar=function(e){return[e.getVariableName()+".object",f.a.JavaScript.ORDER_ATOMIC]},f.a.Blocks.blocklyVar={init:function(){this.jsonInit({type:"blocklyVar",message0:"%1",args0:[{type:"field_label_serializable",name:"variableName",text:"变量"}],output:"blocklyVar",colour:d.a.variable,tooltip:"",helpUrl:""})},createEvent:function(e){},setItemName:function(e){this.setFieldValue(e,"variableName")},getItemName:function(){return this.getField("variableName").textContent_?this.getField("variableName").textContent_.data:this.id},getVariableName:function(){return new f.a.Names("").getName(this.getItemName(),"VARIABLE")}},f.a.JavaScript.blocklyVar=function(e){return[e.getVariableName()+".object",f.a.JavaScript.ORDER_ATOMIC]},function(e){var t=e;f.a.Blocks.batchDataListVar={init:function(){var e=void 0;e=t.nowLeftMenuItem&&t.nowLeftMenuItem.info&&"formList"==t.nowLeftMenuItem.type?t.nowLeftMenuItem.info.itemName:"批量数据列表",this.jsonInit({type:"batchDataListVar",message0:"%1 %2",args0:[{type:"field_image",src:"/media/icon/batch.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"field_label_serializable",name:"variableName",text:e}],output:"batchDataListVar",colour:d.a.variable,tooltip:"",helpUrl:""})},setItemName:function(e){this.setFieldValue(e,"variableName")},getItemName:function(){return this.getField("variableName").value_},getVariableName:function(){return Object(d.e)(this.getItemName())},createEvent:function(n){var o=void 0;o=t.nowLeftMenuItem&&t.nowLeftMenuItem.info&&"form"==t.nowLeftMenuItem.type?t.nowLeftMenuItem.info.variableName:Object(d.e)(this.id),e.setBlockConfigInfo(this.id,{tableItemVarMapName:o})}},f.a.JavaScript.batchDataListVar=function(e){return[e.getVariableName(),f.a.JavaScript.ORDER_ATOMIC]}}(e),function(e){f.a.Blocks.sendMessageEvent={init:function(){this.jsonInit({type:"sendMessageEvent",message0:"发送短信",previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return _.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{})}},f.a.JavaScript.sendMessageEvent=function(t){return"sendSmsMessage(getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")"}}(e),function(e){f.a.Blocks.sendNotifyEvent={init:function(){this.jsonInit({type:"sendNotifyEvent",message0:"发送系统通知",previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return O.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{})}},f.a.JavaScript.sendNotifyEvent=function(t){return"await callFunc( 'sendNotify',getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+");"}}(e),function(e){f.a.Blocks.sendMailEvent={init:function(){this.jsonInit({type:"sendMailEvent",message0:"发送邮件",previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return C.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{})}},f.a.JavaScript.sendMailEvent=function(t){return"sendEmail(getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")"}}(e),function(e){f.a.Blocks.httpEvent={init:function(){this.jsonInit({type:"httpEvent",message0:"接口动作",colour:d.a.action,output:"httpEvent",tooltip:"",helpUrl:""})},getBlockConfigView:function(){return S.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{})}},f.a.JavaScript.httpEvent=function(t){return["await callFunc('httpEvent', getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")",f.a.JavaScript.ORDER_FUNCTION_CALL]}}(e),f.a.Blocks.returnVarData={init:function(){this.jsonInit({type:"returnVarData",message0:"返回变量数据%1",args0:[{type:"input_value",name:"varName"}],inputsInline:!0,previousStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},createEvent:function(e){},changeEvent:function(e){},onchange:function(e){}},f.a.JavaScript.returnVarData=function(e){return"return "+f.a.JavaScript.valueToCode(e,"varName",1)+";"},f.a.Blocks.returnMsgSuccess={init:function(){this.jsonInit({type:"returnVarData",message0:"返回 成功 ",args0:[],inputsInline:!0,previousStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},createEvent:function(e){},changeEvent:function(e){},onchange:function(e){}},f.a.JavaScript.returnMsgSuccess=function(e){return"return {isPass:true} ;"},f.a.Blocks.returnMsgFail={init:function(){this.jsonInit({type:"returnVarData",message0:"返回 失败 附加信息（选填）%1",args0:[{type:"input_value",name:"varName"}],inputsInline:!0,previousStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},createEvent:function(e){},changeEvent:function(e){},onchange:function(e){}},f.a.JavaScript.returnMsgFail=function(e){var t=f.a.JavaScript.valueToCode(e,"varName",1);return"return {isPass:false, msg:"+(""==t?"无信息":t)+" } ;"},M(e),function(e){var t=e;f.a.Blocks.getTableDataListCount={init:function(){this.jsonInit({type:"getTableDataListCount",message0:"获取 %1 表单列表数据条数",args0:[{type:"field_dropdown",name:"tableName",options:t.formList}],output:"getTableDataListCount",colour:d.a.action,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return k.default},createEvent:function(t){var n=this.getFieldValue("tableName");e.setBlockConfigInfo(this.id,Object(d.c)(this.childBlocks_[0],this.id,n))},changeEvent:function(t){var n=this.getFieldValue("tableName"),o=(this.getField("tableName").textContent_.data,{createBlockId:this.id,tableName:n,itemName:"",variableName:"",varType:""});e.setBlockConfigInfo(this.id,o),e.updateBlockConfigView(this)},onchange:function(e){}},f.a.JavaScript.getTableDataListCount=function(e){return["await getTableDataListCount(getVarMap(), "+u()(t.dataMap[e.id])+")",f.a.JavaScript.ORDER_FUNCTION_CALL]}}(e),P(e),f.a.Blocks.outLog={init:function(){this.jsonInit({type:"outLog",message0:"输出log 标识：%1  变量：%2 ",args0:[{type:"field_input",name:"id"},{type:"input_value",name:"varName"}],previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},createEvent:function(e){},changeEvent:function(e){},onchange:function(e){}},f.a.JavaScript.outLog=function(e){var t=e.getFieldValue("id"),n=f.a.JavaScript.valueToCode(e,"varName",1);return"outLog("+t+",'"+n+"', "+n+");\n"},function(e){var t=e;f.a.Blocks.setTimeFunctionCall={init:function(){this.jsonInit({type:"setTimeFunctionCall",message0:"定时%1调用机器人方法%2",args0:[{type:"input_value",name:"time",check:["tableDataFieldVar","variables_get"]},{type:"field_dropdown",name:"functionId",options:t.robotFunctionList}],previousStatement:null,nextStatement:null,colour:d.a.action,tooltip:"",helpUrl:""})},createEvent:function(e){},getBlockConfigView:function(){return T.default},changeEvent:function(e){},onchange:function(e){}},f.a.JavaScript.setTimeFunctionCall=function(t){var n=t.getFieldValue("functionId"),o=this.getInputTargetBlock("time");console.log(o,e.variableMap,9998);var i=void 0;o&&o.type&&("tableDataFieldVar"==o.type?i=o.getFieldVariableName():"variables_get"==o.type&&(i=f.a.JavaScript.valueToCode(t,"time",1),console.log(i,999978888)));var a=e.getBlockConfigInfo(t.id),r={time:i,timeTodoRobotId:n,params:a?u()(a.params):""};return"await callFunc( 'robotSetTimeFunctionCall',getVarMap(), "+u()(r)+");"}}(e)}var L=n("PXCl");function N(e,t,n){return null==e?{}:{createBlockId:t,tableName:n,itemName:e.getItemName(),variableName:e.getVariableName(),varType:d.g.commonData}}function V(e,t,n,o,i){var a=n.getVariableName(),r=void 0;if(console.log(n,a,n.getItemName(),8887),"未选择"==o)n.setEnabled(!1),r="表单",n.setItemName(r);else{n.setEnabled(!0),r=i+"表单",r+=t.getVarIndexString(r),n.setItemName(r);var l=N(n,e,o);t.setTableItemVar(n.getVariableName(),l)}t.deleteVarByName(a)}function F(e){!function(e){f.a.Blocks.btn_data_event={init:function(){this.jsonInit({type:"btn_data_event",message0:"当在 %1 点击该按钮时  ",args0:[{type:"input_value",name:"variable",check:["tableDataVar"]}],inputsInline:!0,nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},createEvent:function(t){var n=N(this.childBlocks_[0],this.id,e.flowTableName);e.createTableItemVar(n.variableName,n),e.setTrigger({createBlockId:this.id,triggerType:"custom_button_click",tableName:e.flowTableName,customBtnKey:e.flowTableName,processPointId:e.flowProp?e.flowProp.id:0,variableName:n.variableName,triggerVariable:{variableName:n.variableName,varType:n.varType}})||this.setEnabled(!1)}},f.a.JavaScript.btn_data_event=function(e){return""}}(e),function(e){f.a.Blocks.btn_table_event={init:function(){this.jsonInit({type:"btn_table_event",message0:"当在 %1 列表界面中点击该按钮时  ",args0:[{type:"input_value",name:"variable"}],inputsInline:!0,nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},createEvent:function(t){var n={itemName:"表信息",variableName:new f.a.Names("").getName("表信息","VARIABLE"),varType:d.g.blocklyVar,objectDefine:{extId:"父Id",extKey:"父key"}};e.setVar(n.variableName,n),e.setTrigger({createBlockId:this.id,triggerType:"btn_table_event",tableName:e.flowTableName,customBtnKey:e.flowTableName,processPointId:e.flowProp?e.flowProp.id:0,variableName:n.variableName,triggerVariable:{variableName:n.variableName,varType:n.varType}})||this.setEnabled(!1)}},f.a.JavaScript.btn_table_event=function(e){return""}}(e),function(e){f.a.Blocks.condition_event={init:function(){this.jsonInit({type:"condition_event",message0:"当前数据 %1 判断条件",args0:[{type:"input_value",name:"variable",check:["tableDataVar"]}],inputsInline:!0,nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},createEvent:function(t){var n=N(this.childBlocks_[0],this.id,e.flowTableName);e.createTableItemVar(n.variableName,n),e.setTrigger({createBlockId:this.id,triggerType:"condition_event",tableName:e.flowTableName,customBtnKey:e.flowTableName,processPointId:e.flowProp?e.flowProp.id:0,variableName:n.variableName,triggerVariable:{variableName:n.variableName,varType:n.varType}})||this.setEnabled(!1)}},f.a.JavaScript.condition_event=function(e){return""}}(e),function(e){f.a.Blocks.flow_data_event={init:function(){this.jsonInit({type:"flow_data_event",message0:"当表单数据 %1 流程节点到达时 ",args0:[{type:"input_value",name:"variable",check:["tableDataVar"]}],inputsInline:!0,nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},createEvent:function(t){var n=N(this.childBlocks_[0],this.id,e.flowTableName);e.createTableItemVar(n.variableName,n),e.setTrigger({createBlockId:this.id,triggerType:"process_arrive",tableName:e.flowTableName,processPointId:e.flowProp?e.flowProp.id:0,variableName:n.variableName,triggerVariable:{variableName:n.variableName,varType:n.varType}})||this.setEnabled(!1)}},f.a.JavaScript.flow_data_event=function(e){return""}}(e),function(e){f.a.Blocks.action_event={init:function(){this.jsonInit({type:"action_event",message0:"当获取数据时 ",inputsInline:!0,nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},createEvent:function(t){e.setTrigger({createBlockId:this.id,triggerType:"action_event"})}},f.a.JavaScript.action_event=function(e){return""}}(e),function(e){var t=e;f.a.Blocks.table_data_event={init:function(){this.jsonInit({type:"table_data_event",message0:"当表单 %1 %2 %3 完成时  ",args0:[{type:"field_dropdown",name:"tableName",options:t.formList},{type:"field_dropdown",name:"action",options:[["新增","add"],["修改","update"],["新增或修改","add_or_update"],["删除","delete"]]},{type:"input_value",name:"variable",check:["tableDataVar"]}],inputsInline:!0,nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},createEvent:function(e){var t=this.childBlocks_[0];"未选择"==this.getFieldValue("tableName")&&t.setEnabled(!1)},changeEvent:function(t){var n=this.childBlocks_[0],o=this.getField("tableName").textContent_.data,i=this.getFieldValue("tableName");"tableName"==t.name&&(this.createEvent(),V(this.id,e,n,i,o));var a=N(n,this.id,i);e.setTrigger({createBlockId:this.id,triggerType:"table_data_"+this.getFieldValue("action"),tableName:this.getFieldValue("tableName"),tableAction:this.getFieldValue("action"),triggerVariable:{variableName:a.variableName,varType:a.varType}})||this.setEnabled(!1)}},f.a.JavaScript.table_data_event=function(e){return""}}(e),function(e){var t=e;f.a.Blocks.table_data_before_do_event={init:function(){this.jsonInit({type:"table_data_before_do_event",message0:"当表单 %1 %2 %3 之前（常用来检测是否合法）  ",args0:[{type:"field_dropdown",name:"tableName",options:t.formList},{type:"field_dropdown",name:"action",options:[["新增","add"],["修改","update"],["新增或修改","add_or_update"],["删除","delete"]]},{type:"input_value",name:"variable",check:["tableDataVar"]}],inputsInline:!0,nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},createEvent:function(e){var t=this.childBlocks_[0];"未选择"==this.getFieldValue("tableName")&&t.setEnabled(!1)},changeEvent:function(t){var n=this.childBlocks_[0],o=this.getField("tableName").textContent_.data,i=this.getFieldValue("tableName");"tableName"==t.name&&(this.createEvent(),V(this.id,e,n,i,o));var a=N(n,this.id,i);e.setTrigger({createBlockId:this.id,triggerType:"table_data_"+this.getFieldValue("action")+"_before_do",tableName:this.getFieldValue("tableName"),tableAction:this.getFieldValue("action"),triggerVariable:{variableName:a.variableName,varType:a.varType}})||this.setEnabled(!1)}},f.a.JavaScript.table_data_before_do_event=function(e){return""}}(e),function(e){var t=e;f.a.Blocks.time_arrive_event={init:function(){this.jsonInit({type:"time_arrive_event",message0:"当固定时间 %1 等于 %2 日 %3 时 %4 分",args0:[{type:"field_variable",name:"time",variable:"时间"+t.itemNum},{type:"field_date",name:"date",date:"2022-08-01"},{type:"field_number",name:"hour",value:0,min:0,max:23},{type:"field_number",name:"min",value:0,min:0,max:59}],nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},getTime:function(){return{date:this.getField("date").value_,hour:this.getField("hour").value_,min:this.getField("min").value_}},setTimeTrigger:function(){var t={variableName:Object(d.e)(this.id),varType:"v_type_time"},n=this.getTime();e.setTrigger({createBlockId:this.id,triggerType:"time_arrive",triggerTime:n.date+" "+n.hour+":"+n.min,triggerVariable:{variableName:t.variableName,varType:t.varType}})||this.setEnabled(!1)},createEvent:function(t){var n={variableName:Object(d.e)(this.id),varType:"v_type_time"};e.setVar(n.variableName,n),this.setTimeTrigger()},changeEvent:function(e){this.setTimeTrigger()}},f.a.JavaScript.time_arrive_event=function(e){return""}}(e),function(e){var t=e;f.a.Blocks.time_table_time_field_arrive_event={init:function(){var e=this;this.jsonInit({type:"time_table_time_field_arrive_event",message0:"当时间 %1 等于表单 %2 日期时间字段 %3 时",args0:[{type:"field_variable",name:"tableFieldTime",variable:"时间"+t.itemNum},{type:"field_dropdown",name:"tableName",options:t.formList},{type:"field_dropdown",name:"fieldName",options:function(){if(!e.getField("tableName"))return[["空",""]];var n=e.getField("tableName").value_,o=t.formMap[n],i=["yyyy-MM-dd","yyyy-MM","yyyy","yyyy-MM-dd HH:mm:ss"],a=[["空",""]];for(var r in o.templateJson){var l=o.templateJson[r];-1!=i.indexOf(l.dateType)&&a.push([l.name,l.key])}return a}}],nextStatement:null,colour:20,tooltip:"",helpUrl:""})},setTimeTrigger:function(){var t=Object(d.e)(this.id);e.setTrigger({createBlockId:this.id,triggerType:"time_table_time_field_arrive",tableName:this.getField("tableName").value_,triggerTableTimeField:this.getField("fieldName").value_,triggerVariable:{variableName:t,varType:"v_type_table_data_field_time"}})||this.setEnabled(!1)},createEvent:function(t){var n={variableName:Object(d.e)(this.id),varType:"v_type_table_data_field_time"};e.setVar(n.variableName,n),this.setTimeTrigger()},changeEvent:function(e){"tableName"==e.name&&this.getField("fieldName").setValue(""),this.setTimeTrigger()}},f.a.JavaScript.time_table_time_field_arrive_event=function(e){return""}}(e),function(e){f.a.Blocks.qrcode_event={init:function(){this.jsonInit({type:"qrcode_event",message0:"当扫码触发当前机器人获得变量 %1",args0:[{type:"field_variable",name:"qrCodeString",variable:"扫码结果"}],inputsInline:!0,nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},createEvent:function(t){var n=this.getField("qrCodeString"),o=new f.a.Names("").getName(n.defaultVariableName,"VARIABLE");console.log(n,o,99999),e.setTrigger({createBlockId:this.id,triggerType:"qrcode_event",triggerVariable:{variableName:o,varType:d.g.blocklyVar}})}},f.a.JavaScript.qrcode_event=function(e){var t=this.getField("qrCodeString"),n=new f.a.Names("").getName(t.defaultVariableName,"VARIABLE");return n+" = jsVarMap['"+n+"'].object;\n"}}(e),function(e){f.a.Blocks.functioncall_event={init:function(){this.jsonInit({type:"functioncall_event",message0:"当函数调用时。参数 %1",args0:[{type:"field_variable",name:"paramString",variable:"调用参数"}],inputsInline:!0,nextStatement:null,colour:d.a.event,tooltip:"",helpUrl:""})},createEvent:function(t){var n=this.getField("paramString"),o=new f.a.Names("").getName(n.defaultVariableName,"VARIABLE");console.log(n,o,99999),e.setTrigger({createBlockId:this.id,triggerType:"functioncall_event",triggerVariable:{variableName:o,varType:d.g.objectVar}})}},f.a.JavaScript.functioncall_event=function(e){var t=this.getField("paramString"),n=new f.a.Names("").getName(t.defaultVariableName,"VARIABLE");return n+" = jsVarMap['"+n+"'].object;\n"}}(e)}var B=n("dcie");function H(e){!function(e){f.a.Blocks.forEachTableDataList={init:function(){this.jsonInit({type:"forEachTableDataList",message0:"循环获取表单数据到%2从表单列表 %1中  执行 %3",args0:[{type:"input_value",name:"tableList",check:["tableListDataVar"]},{type:"input_value",name:"tableData",check:["tableDataVar"]},{type:"input_statement",name:"doLoop"}],inputsInline:!0,nextStatement:null,previousStatement:null,colour:d.a.loop,tooltip:"",helpUrl:""})},createEvent:function(e){},changeEvent:function(e){},onchange:function(t){if(t.type=t.newParentId==this.id&&"tableList"==t.newInputName){var n=this.getInputTargetBlock("tableList"),o=this.getInputTargetBlock("tableData");if(null==n)return;var i=e.getVar()[n.getVariableName()].tableName,a="临时表单数据";a+=e.getVarIndexString(a),o.setItemName(a);var r=e.getVar()[o.getVariableName()];if(null!=r)r.tableName=i,e.setTableItemVar(o.getVariableName(),r);else{var l={createBlockId:this.id,tableName:i,itemName:a,variableName:Object(d.e)(a),varType:d.g.commonData};e.setTableItemVar(o.getVariableName(),l)}o.setEnabled(!0)}else if(t.type=t.oldParentId==this.id&&"tableList"==t.oldInputName){var s=this.getInputTargetBlock("tableData");e.deleteVarByName(s.getVariableName()),s.setItemName("表单"),s.setEnabled(!1)}}},f.a.JavaScript.forEachTableDataList=function(e){var t=e.getInputTargetBlock("tableList"),n=e.getInputTargetBlock("tableData"),o=f.a.JavaScript.statementToCode(e,"doLoop");return o=f.a.JavaScript.addLoopTrap(o,e),t?"if("+t.getVariableName()+".object){\n    for(let i=0; i< "+t.getVariableName()+".object.length; i++){\n      "+n.getVariableName()+".object = "+t.getVariableName()+".object[i];\n\n      "+o+"\n    }};\n":""}}(e),function(e){f.a.Blocks.forEachTableDataChildrenTableList={init:function(){this.jsonInit({type:"forEachTableDataList",message0:"循环获取表单数据到%2从表单子表格 %1中  执行 %3",args0:[{type:"input_value",name:"tableList",check:["tableDataFieldVar"]},{type:"input_value",name:"tableData",check:["tableDataVar"]},{type:"input_statement",name:"doLoop"}],inputsInline:!0,nextStatement:null,previousStatement:null,colour:d.a.loop,tooltip:"",helpUrl:""})},createEvent:function(e){},changeEvent:function(e){},onchange:function(t){if(t.type=t.newParentId==this.id&&"tableList"==t.newInputName){var n=this.getInputTargetBlock("tableList"),o=this.getInputTargetBlock("tableData");if(null==n)return;var i=n.getTableName(),a="临时表单数据";a+=e.getVarIndexString(a),o.setItemName(a);var r=e.getVar()[o.getVariableName()];if(null!=r)r.tableName=i,e.setTableItemVar(o.getVariableName(),r);else{var l={createBlockId:this.id,tableName:i,itemName:a,variableName:Object(d.e)(a),varType:d.g.commonData};e.setTableItemVar(o.getVariableName(),l)}o.setEnabled(!0);var s={createBlockId:this.id,tableName:n.getTableName(),itemName:n.getItemName(),variableName:n.getVariableName(),varType:d.g.commonListData};e.setTableItemVar(n.getVariableName(),s),n.setEnabled(!0)}else if(t.type=t.oldParentId==this.id&&"tableList"==t.oldInputName){var c=this.getInputTargetBlock("tableData");e.deleteVarByName(c.getVariableName()),c.setItemName("表单"),c.setEnabled(!1);var u=this.getInputTargetBlock("tableList");console.log(u.getItemName(),u,e.getVar(),998),u.setEnabled(!1)}}},f.a.JavaScript.forEachTableDataChildrenTableList=function(e){var t=e.getInputTargetBlock("tableList"),n=e.getInputTargetBlock("tableData"),o=f.a.JavaScript.statementToCode(e,"doLoop");return o=f.a.JavaScript.addLoopTrap(o,e),t?"\n      "+t.getVariableName()+".object = await getChildrenTableList(getVarMap(), '"+t.getParentVarName()+"', '"+t.getFieldKey()+"','"+t.getTableName()+"');\n\n      if("+t.getVariableName()+".object){\n        for(let i=0; i< "+t.getVariableName()+".object.length; i++){\n          "+n.getVariableName()+".object = "+t.getVariableName()+".object[i];\n\n          "+o+"\n        }\n      }\n    ":""}}(e)}var j=n("qvXg"),$=n("0xDb"),U=n("42jU"),z=n("9Gyk");function W(e){!function(e){f.a.Blocks.formuleData={init:function(){this.jsonInit({type:"formuleData",message0:"类Excel公式计算",args0:[],output:"formuleData",colour:d.a.math,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return E.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{})}},f.a.JavaScript.formuleData=function(t){return["await formuleCal(getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")",f.a.JavaScript.ORDER_FUNCTION_CALL]}}(e),function(e){f.a.Blocks.jsCodeBlock={init:function(){this.jsonInit({type:"jsCodeBlock",message0:"JS代码块",args0:[],previousStatement:null,nextStatement:null,colour:d.a.math,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return j.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{})}},f.a.JavaScript.jsCodeBlock=function(t){return console.log(e.getBlockConfigInfo(t.id),88887666),""+e.getBlockConfigInfo(t.id).jscode}}(e),function(e){f.a.Blocks.getUserList={init:function(){this.jsonInit({type:"getUserList",message0:"获取系统用户",args0:[],output:"getUserList",colour:d.a.math,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return U.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{})}},f.a.JavaScript.getUserList=function(t){return["await getUserList(getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")",f.a.JavaScript.ORDER_FUNCTION_CALL]}}(e),function(e){f.a.Blocks.execSql={init:function(){this.jsonInit({type:"execSql",message0:"SQL查询",args0:[],output:"execSql",colour:d.a.math,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return z.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{})}},f.a.JavaScript.execSql=function(t){return["await execSql(getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")",f.a.JavaScript.ORDER_FUNCTION_CALL]}}(e),function(e){f.a.Blocks.tableListCount={init:function(){this.jsonInit({type:"tableListCount",message0:"获取表单列表%1 %2的条数",args0:[{type:"field_image",src:"/media/icon/tableList.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"input_value",name:"tableList",check:["tableListDataVar"]}],output:"formuleData",colour:d.a.math,tooltip:"",helpUrl:""})},createEvent:function(e){},onchange:function(t){if(t.type=t.newParentId==this.id&&"tableList"==t.newInputName){var n=this.getInputTargetBlock("tableList"),o=this.getInputTargetBlock("tableData");if(null==n)return;var i=e.getVar()[n.getVariableName()].tableName,a="临时表单数据";a+=e.getVarIndexString(a),o.setItemName(a);var r=e.getVar()[o.getVariableName()];if(null!=r)r.tableName=i,e.setTableItemVar(o.getVariableName(),r);else{var l={createBlockId:this.id,tableName:i,itemName:a,variableName:Object(d.e)(a),varType:d.g.commonData};e.setTableItemVar(o.getVariableName(),l)}o.setEnabled(!0)}else if(t.type=t.oldParentId==this.id&&"tableList"==t.oldInputName){var s=this.getInputTargetBlock("tableData");e.deleteVarByName(s.getVariableName()),s.setItemName("表单"),s.setEnabled(!1)}}},f.a.JavaScript.tableListCount=function(e){var t=e.getInputTargetBlock("tableList");return["("+t.getVariableName()+" && "+t.getVariableName()+".object) ? "+t.getVariableName()+".object.length : 0",f.a.JavaScript.ORDER_FUNCTION_CALL]}}(e),f.a.Blocks.timeDiff={init:function(){this.jsonInit({type:"timeDiff",message0:"获取时间%1 - %2的时间差",args0:[{type:"input_value",name:"timeData1"},{type:"input_value",name:"timeData2"}],output:"formuleData",colour:d.a.math,tooltip:"",helpUrl:""})},createEvent:function(e){},onchange:function(e){}},f.a.JavaScript.timeDiff=function(e){var t=e.getInputTargetBlock("timeData1"),n=e.getInputTargetBlock("timeData1");return console.log(t,n,999e6),n.getVariableName(),["timeDiff(getVarMap(),"+t.getVariableName()+", '"+n.getVariableName()+"')",f.a.JavaScript.ORDER_FUNCTION_CALL]},function(e){var t=e;f.a.Blocks.functionCall={init:function(){this.jsonInit({type:"functionCall",message0:"调用机器人方法%1",args0:[{type:"field_dropdown",name:"functionId",options:t.robotFunctionList}],output:"functionCall",colour:d.a.math,tooltip:"",helpUrl:""})},createEvent:function(e){},getBlockConfigView:function(){return T.default},changeEvent:function(e){},onchange:function(e){}},f.a.JavaScript.functionCall=function(t){var n=t.getFieldValue("functionId"),o=e.getBlockConfigInfo(t.id),i={robotId:n,params:o?u()(o.params):""};return["await callFunc('robotFunctionCall', getVarMap(), "+u()(i)+");",f.a.JavaScript.ORDER_FUNCTION_CALL]}}(e)}function q(e){!function(e){var t=e;f.a.Blocks.tableDataCondition={init:function(){this.jsonInit({type:"tableDataCondition",message0:"表单数据 %1 %2 满足条件",args0:[{type:"field_image",src:"/media/icon/tableItem.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"input_value",name:"tableVariable",check:["tableDataVar"]}],inputsInline:!0,output:null,colour:d.a.logic,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return B.default},createEvent:function(t){console.log(t,this,777),e.setBlockConfigInfo(this.id,{tableName:"未选择"})},changeEvent:function(e){},onchange:function(t){if(t.type=t.newParentId==this.id&&"tableVariable"==t.newInputName){var n=this.getInputTargetBlock("tableVariable");if(null==n)return;console.log(n,e.getVar(),e.getVar()[n.getVariableName()],n.getVariableName(),888777),e.getVar()[n.getVariableName()].tableName,e.setBlockConfigInfo(this.id,Object(d.d)(n,this.id,n.getTableName())),e.updateBlockConfigView(this)}else(t.type=t.oldParentId==this.id&&"tableVariable"==t.oldInputName)&&(e.setBlockConfigInfo(this.id,{tableName:"未选择"}),e.updateBlockConfigView(this))}},f.a.JavaScript.tableDataCondition=function(e){return[" await tableDataCondition(getVarMap(),'"+e.getInputTargetBlock("tableVariable").getVariableName()+"', "+u()(t.dataMap[e.id])+") ",f.a.JavaScript.ORDER_ATOMIC]}}(e)}var K=n("llCV");function G(e){var t=e;f.a.Blocks.formAddData={init:function(){this.jsonInit({type:"formAddData",message0:"打开弹窗填写表单 %2 到 %1",args0:[{type:"field_dropdown",name:"tableName",options:t.formList},{type:"input_value",name:"variable",check:["tableDataVar"]}],previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return b.default},createEvent:function(t){this.childBlocks_[0].setEnabled(!1),e.setBlockConfigInfo(this.id,{tableName:this.getFieldValue("tableName")})},changeEvent:function(t){var n=this.childBlocks_[0],o=this.getField("tableName").textContent_.data,i=this.getFieldValue("tableName");!function(e,t,n,o,i){var a=n.getVariableName(),r=void 0;if(console.log(n,a,n.getItemName(),8887),"未选择"==o)n.setEnabled(!1),r="表单",n.setItemName(r);else{n.setEnabled(!0),r=i+"表单",r+=t.getVarIndexString(r),n.setItemName(r);var l=Object(d.d)(n,e,o);t.setTableItemVar(n.getVariableName(),l)}t.deleteVarByName(a)}(this.id,e,n,i,o),console.log(n.getVariableName(),6667),e.setBlockConfigInfo(this.id,{tableName:this.getFieldValue("tableName"),variableName:n.getVariableName()}),e.updateBlockConfigView(this)}},f.a.JavaScript.formAddData=function(t){var n=t.childBlocks_[0];if(!n)return"";var o=n.getVariableName();return'if(checkBreak("'+t.id+"\")){ return openAddDataDialog('"+o+"', getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")}\n\n    changeVarMapValue('"+o+"', "+o+");"}}function J(e,t,n){if(t.type=t.newParentId==n.id&&"tableVariable"==t.newInputName){var o=n.getInputTargetBlock("tableVariable");if(null==o)return;console.log(o,e.getVar(),e.getVar()[o.getVariableName()],o.getVariableName(),888777);e.getVar()[o.getVariableName()].tableName;e.setBlockConfigInfo(n.id,Object(d.d)(o,n.id,o.getTableName())),e.updateBlockConfigView(n)}else(t.type=t.oldParentId==n.id&&"tableVariable"==t.oldInputName)&&(e.setBlockConfigInfo(n.id,{tableName:"未选择"}),e.updateBlockConfigView(n))}function Y(e){var t=e;f.a.Blocks.selectTableDataList={init:function(){this.jsonInit({type:"selectTableDataList",message0:"从表单 %1 选择数据到 %2",args0:[{type:"field_dropdown",name:"tableName",options:t.formList},{type:"input_value",name:"variable",check:["tableListDataVar"]}],previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},createEvent:function(t){this.childBlocks_[0].setEnabled(!1),e.setBlockConfigInfo(this.id,{tableName:this.getFieldValue("tableName")})},changeEvent:function(t){var n=this.childBlocks_[0],o=this.getField("tableName").textContent_.data,i=this.getFieldValue("tableName");!function(e,t,n,o,i){var a=n.getVariableName(),r=void 0;if(console.log(n,a,n.getItemName(),8887),"未选择"==o)n.setEnabled(!1),r="表单列表",n.setItemName(r);else{n.setEnabled(!0),r=i+"表单列表",r+=t.getVarIndexString(r),n.setItemName(r);var l=Object(d.c)(n,e,o);t.setTableItemVar(n.getVariableName(),l)}t.deleteVarByName(a)}(this.id,e,n,i,o),console.log(n.getVariableName(),n,o,i,6667123),e.setBlockConfigInfo(this.id,{tableName:this.getFieldValue("tableName"),variableName:n.getVariableName(),variableType:""}),e.updateBlockConfigView(this)}},f.a.JavaScript.selectTableDataList=function(t){var n=t.childBlocks_[0];if(!n)return"";var o=n.getVariableName();return'if(checkBreak("'+t.id+"\")){ return openDialog('SELECT_MULTI_COMMON_DATA', '"+o+"', getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")}\n\n    changeVarMapValue('"+o+"', "+o+");"}}var X=function(e){return/^\s*'([^']|\\')*'\s*$/.test(e),[e,f.a.JavaScript.ORDER_ATOMIC]};function Q(e){G(e),function(e){f.a.Blocks.formEditData={init:function(){this.jsonInit({type:"table_add_data",message0:"打开弹窗编辑表单变量 %1 %2",args0:[{type:"field_image",src:"/media/icon/tableItem.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"input_value",name:"tableVariable",check:["tableDataVar"]}],previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return y.default},createEvent:function(t){e.setBlockConfigInfo(this.id,{tableName:"未选择"})},onchange:function(t){J(e,t,this)}},f.a.JavaScript.formEditData=function(t){var n=t.getInputTargetBlock("tableVariable");if(!n)return"";var o=n.getVariableName();return'if(checkBreak("'+t.id+"\")){ return openEditDataDialog('"+o+"', getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")}\n\n    changeVarMapValue('"+o+"', "+o+");"}}(e),function(e){f.a.Blocks.formDetailData={init:function(){this.jsonInit({type:"table_add_data",message0:"打开弹窗查看表单变量 %1 %2",args0:[{type:"field_image",src:"/media/icon/tableItem.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"input_value",name:"tableVariable",check:["tableDataVar"]}],previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},createEvent:function(t){e.setBlockConfigInfo(this.id,{tableName:"未选择"})},onchange:function(t){J(e,t,this)}},f.a.JavaScript.formDetailData=function(t){var n=t.childBlocks_[0];if(!n)return"";var o=n.getVariableName();return'if(checkBreak("'+t.id+"\")){ return openViewDataDialog('"+o+"', getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")}"}}(e),Y(e),function(e){f.a.Blocks.openQrcodeScan={init:function(){this.jsonInit({type:"openQrcodeScan",message0:"打开二维码扫描窗口得到数据 %1",args0:[{type:"input_value",name:"qrCodeString",check:["objectVar"]}],previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},createEvent:function(t){var n=this.getInputTargetBlock("qrCodeString"),o="扫码结果";o+=e.getVarIndexString(o),console.log(n,90909090),n.setItemName(o);var i={createBlockId:this.id,itemName:o,variableName:n.getVariableName(),varType:d.g.objectVar};e.createTableItemVar(n.getVariableName(),i)}},f.a.JavaScript.openQrcodeScan=function(e){var t=e.getInputTargetBlock("qrCodeString");if(!t)return"";var n=t.getVariableName();return'if(checkBreak("'+e.id+"\")){ return openDialog('QRCODE_SCAN', '"+n+"', getVarMap())}\n\n    changeVarMapValue('"+n+"', "+n+");"}}(e),function(e){f.a.Blocks.openConfirmDialog={init:function(){this.jsonInit({type:"openConfirmDialog",message0:"打开确认对话框 标题 %1  内容 %2",args0:[{type:"field_input",name:"title",text:""},{type:"field_input",name:"content",text:""}],message1:"点击确认 %1",args1:[{type:"input_statement",name:"ok"}],message2:"点击取消 %1",args2:[{type:"input_statement",name:"cancle"}],previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},createEvent:function(t){var n=Object(d.e)(this.id),o={createBlockId:this.id,itemName:"",variableName:n,varType:d.g.objectVar};e.createTableItemVar(n,o)}},f.a.JavaScript.openConfirmDialog=function(e){var t="";f.a.JavaScript.STATEMENT_PREFIX&&(t+=f.a.JavaScript.injectId(JavaScript.STATEMENT_PREFIX,e));var n=Object(d.e)(e.id),o={title:e.getFieldValue("title"),content:e.getFieldValue("content")};t+='if(checkBreak("'+e.id+"\")){ return openDialog('OPEN_CONFIRM_DIALOG', '"+n+"', getVarMap(), '"+u()(o)+"')}\n\n    changeVarMapValue('"+n+"', "+n+");\n";var i=f.a.JavaScript.statementToCode(e,"ok");if(f.a.JavaScript.STATEMENT_SUFFIX&&(i=f.a.JavaScript.prefixLines(f.a.JavaScript.injectId(JavaScript.STATEMENT_SUFFIX,e),f.a.JavaScript.INDENT)+i),t+="if ("+n+'.object == "confirm") {\n'+i+"}",e.getInput("cancle")||f.a.JavaScript.STATEMENT_SUFFIX){var a=f.a.JavaScript.statementToCode(e,"cancle");f.a.JavaScript.STATEMENT_SUFFIX&&(a=f.a.JavaScript.prefixLines(f.a.JavaScript.injectId(f.a.JavaScript.STATEMENT_SUFFIX,e),f.a.JavaScript.INDENT)+a),t+=" else {\n"+a+"}"}return t+"\n"}}(e),f.a.Blocks.openMsgBox={init:function(){this.jsonInit({type:"openMsgBox",message0:"打开消息框（按确认才消失） 提示内容 %1 ",args0:[{type:"input_value",name:"info",text:""}],previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},createEvent:function(e){}},f.a.JavaScript.openMsgBox=function(e){var t=f.a.JavaScript.valueToCode(e,"info",f.a.JavaScript.ORDER_NONE)||"''",n=X(t)[0];return' if(checkBreak("'+e.id+'")){\n         let config = {info:'+n+"}\n         return openDialog('OPEN_MSG_BOX', '', getVarMap(), JSON.stringify(config))}\n"},f.a.Blocks.openToast={init:function(){this.jsonInit({type:"openToast",message0:"弹出信息框（自动消失） 提示内容 %1",args0:[{type:"input_value",name:"info"}],previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},createEvent:function(e){}},f.a.JavaScript.openToast=function(e){if(!e.childBlocks_[0])return"";var t="",n=f.a.JavaScript.valueToCode(e,"info",f.a.JavaScript.ORDER_NONE)||"''",o=X(n)[0];return console.log(n,o,o.substring(0,1),909090909),(t+='if(checkBreak("'+e.id+'")){\n        let config = {info:'+o+"}\n        return openDialog('SHOW_TOAST', '', getVarMap(), JSON.stringify(config))}\n")+"\n"},function(e){f.a.Blocks.openDashBoard={init:function(){this.jsonInit({type:"openDashBoard",message0:"弹出自定义门户",previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},getBlockConfigView:function(){return K.default},createEvent:function(e){}},f.a.JavaScript.openDashBoard=function(t){return'if(checkBreak("'+t.id+"\")){\n        return openDialog('OPEN_DASHBOARD', '', getVarMap(), "+u()(e.getBlockConfigInfo(t.id))+")}\n"}}(e),f.a.Blocks.mobileNavigateTo={init:function(){this.jsonInit({type:"mobileNavigateTo",message0:"移动端跳转页面 跳转参数 %1",args0:[{type:"input_value",name:"info"}],previousStatement:null,nextStatement:null,colour:d.a.dialog,tooltip:"",helpUrl:""})},createEvent:function(e){}},f.a.JavaScript.mobileNavigateTo=function(e){if(!e.childBlocks_[0])return"";var t="",n=f.a.JavaScript.valueToCode(e,"info",f.a.JavaScript.ORDER_NONE)||"''",o=X(n)[0];return console.log(n,o,o.substring(0,1),909090909),(t+='if(checkBreak("'+e.id+'")){\n        let config = {info:'+o+"}\n        return openDialog('MOBILE_NAVIGATE_TO', '', getVarMap(), JSON.stringify(config))}\n")+"\n"}}function Z(e){f.a.Blocks.timestampToTime={init:function(){this.jsonInit({type:"timestampToTime",message0:"时间戳%1转化为年月日的格式",args0:[{type:"input_value",name:"item",check:["variables_get"]}],output:"timestampToTime",colour:d.a.text,tooltip:"",helpUrl:""})},createEvent:function(e){},onchange:function(e){}},f.a.JavaScript.timestampToTime=function(e){return["timestampToTime("+(f.a.JavaScript.valueToCode(e,"item",f.a.JavaScript.ORDER_NONE)||"0")+")",f.a.JavaScript.ORDER_FUNCTION_CALL]},f.a.Blocks.formatTimeText={init:function(){this.jsonInit({type:"formatTimeText",message0:"秒数%1 转化为为时分秒的文字",args0:[{type:"input_value",name:"item",check:["variables_get"]}],output:"formatTimeText",colour:d.a.text,tooltip:"",helpUrl:""})},createEvent:function(e){},onchange:function(e){}},f.a.JavaScript.formatTimeText=function(e){return["formatTimeText("+(f.a.JavaScript.valueToCode(e,"item",f.a.JavaScript.ORDER_NONE)||"0")+")",f.a.JavaScript.ORDER_FUNCTION_CALL]},f.a.Blocks.timeTextToTimestamp={init:function(){this.jsonInit({type:"timeTextToTimestamp",message0:"年月日的格式时间文字%1转化为时间戳",args0:[{type:"input_value",name:"item",check:["variables_get"]}],output:"timeTextToTimestamp",colour:d.a.text,tooltip:"",helpUrl:""})},createEvent:function(e){},onchange:function(e){}},f.a.JavaScript.timeTextToTimestamp=function(e){return["timeTextToTimestamp("+(f.a.JavaScript.valueToCode(e,"item",f.a.JavaScript.ORDER_NONE)||"0")+")",f.a.JavaScript.ORDER_FUNCTION_CALL]}}n("zFrf"),n("Cr6W");var ee=n("IDSB"),te=n("7+uW"),ne=n("U5AP"),oe=n("Ib3M"),ie=n("e4/+"),ae=n("JRhF"),re=n("HCHy");f.a.setLocale(ee),te.default.config.ignoredElements.push("xml"),te.default.config.ignoredElements.push("block"),te.default.config.ignoredElements.push("field"),te.default.config.ignoredElements.push("category"),te.default.config.ignoredElements.push("sep"),te.default.config.ignoredElements.push("value"),te.default.config.ignoredElements.push("statement"),te.default.config.ignoredElements.push("mutation");var le={name:"blockly",props:{robotType:{default:0,type:Number},robotName:{},flowProp:{},flowTableName:"",formExts:{type:Array,default:function(){return[]}},needSave:{type:Boolean,default:!1}},components:{leftMenu:ne.default,blocklyXML:ae.default,blocklyDebugger:re.default},watch:{robotType:{handler:function(e){this.hasRobotType=d.f[e]},deep:!0,immediate:!0}},data:function(){return{loading:!1,robotFormRule:{name:[{required:!0,message:"请输入机器人名称",trigger:"change"}]},rightBox:!1,formList:[],formMap:{},dataMap:{},itemNum:1,nowLeftMenuItem:null,variableMap:{},trigger:null,initrow:null,configViewList:[],currentConfigViewId:null,hasRobotType:[],isAsync:!1,enable:!0,isCrossApp:!1,isDebug:!1,debugTempRobotId:null,debugBreakStep:null,debugJsVarMap:null,debugList:[],debuggerQrCodeView:!1,qrcode:"",oldHighLightBlockId:null,oldHighLightBlockColour:null,currentSelectedBlockId:null,robotFunctionList:[],chieldBlockIds:[]}},methods:{changeToolbox:function(e,t){if(t){var n=this.$refs.leftMenu.getMenuSize();"core"==e.type?this.clickMenu(e.info.value):"form"==e.type?this.clickMenu(n):"item"==e.type?this.clickMenu(n+1):"formList"==e.type&&this.clickMenu(n+2),this.nowLeftMenuItem=e}else this.workspace.updateToolbox(document.getElementById("toolbox")),this.nowLeftMenuItem=null},clickMenu:function(e){this.workspace.updateToolbox(document.getElementById("toolbox")),this.$nextTick(function(){document.getElementsByClassName("blocklyTreeRow")[e].click(),document.getElementsByClassName("blocklyFlyout")[1].style.transform="translate(0px, 0px)"})},getToolBox:function(){return this.workspace.getToolbox()},checkValidate:function(){var e={result:!0,msg:""};return null==this.trigger&&(e.result=!1,e.msg="机器人需要一个事件来触发操作！请添加一个事件"),e},blockToCode:function(e,t){if(!1===f.a.JavaScript.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var n=f.a.JavaScript[e.type];if("function"!=typeof n)throw Error('Language "'+f.a.JavaScript.name_+'" does not know how to generate code for block type "'+e.type+'".');var o=n.call(e,e);if(Array.isArray(o)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[f.a.JavaScript.scrub_(e,o[0],t),o[1]]}if("string"==typeof o){f.a.JavaScript.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(o=f.a.JavaScript.injectId(f.a.JavaScript.STATEMENT_PREFIX,e)+o),f.a.JavaScript.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(o+=f.a.JavaScript.injectId(f.a.JavaScript.STATEMENT_SUFFIX,e));return-1==["tableDataVar","math_number"].concat(["forEachTableDataList","forEachTableDataChildrenTableList","controls_repeat_ext","controls_repeat","controls_whileUntil","controls_for","controls_forEach"]).indexOf(e.type)&&(o='if(checkBreak("'+e.id+'")){ return breakPoint("'+e.id+'", getVarMap())}\n'+o),f.a.JavaScript.scrub_(e,o,t)}if(null===o)return"";throw SyntaxError("Invalid code generated: "+o)},workspaceToCodeWithDebugInfo:function(e){var t=f.a.JavaScript.blockToCode;f.a.JavaScript.blockToCode=this.blockToCode,e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=common.getMainWorkspace());var n=[];f.a.JavaScript.init(e);for(var o,i=e.getTopBlocks(!0),a=0;o=i[a];a++){var r=this.blockToCode(o);Array.isArray(r)&&(r=r[0]),r&&(o.outputConnection&&(r=f.a.JavaScript.scrubNakedValue(r),f.a.JavaScript.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(r=f.a.JavaScript.injectId(f.a.JavaScript.STATEMENT_PREFIX,o)+r),f.a.JavaScript.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(r+=f.a.JavaScript.injectId(f.a.JavaScript.STATEMENT_SUFFIX,o))),n.push(r))}var l=n.join("\n");return l=(l=(l=(l=f.a.JavaScript.finish(l)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n"),f.a.JavaScript.blockToCode=t,l},getRobotData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.checkValidate();if(n.result){this.configViewList.forEach(function(t){t.isDelete||e.$refs["formWin"+t.id][0].save()});var o=f.a.Xml.workspaceToDom(this.workspace),i=f.a.Xml.domToText(o),a=void 0;a=t?this.workspaceToCodeWithDebugInfo(this.workspace):f.a.JavaScript.workspaceToCode(this.workspace),a=f.a.JavaScript.scrubNakedValue(a);var r=u()({itemNum:this.itemNum});return{async:this.isAsync,enable:!!t||this.enable,name:this.needSave?this.robotName:this.flowProp.name,trigger:u()(this.trigger),content:a,dataMap:u()(this.dataMap),variableMap:u()(this.variableMap),contentXml:i,extInfo:r,appId:JSON.parse(localStorage.getItem("app")).appId}}this.$message.error(n.msg)},cancle:function(){this.isDebug&&this.doDebugFinish()},setAsync:function(e){this.isAsync=e},setRobotEnable:function(e){this.enable=e},setCrossApp:function(e){this.isCrossApp=e},saveToProd:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.save(!0);case 1:case"end":return t.stop()}},t,e)}))()},save:function(e){var t=this;return s()(r.a.mark(function n(){var o,i,a,l;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.isDebug&&t.doDebugFinish(),o=t.getRobotData(),t.needSave){n.next=4;break}return n.abrupt("return",o);case 4:return i=t.initrow?t.initrow.id:"",a=i||"",o.id=i,l=void 0,l=e?t.$http.adornUrlProd("/robot/commonrobot/"+(i?"update":"save")):t.$http.adornUrl("/robot/commonrobot/"+(i?"update":"save")),n.next=11,t.$http({url:l,method:"post",data:t.$http.adornData(o)}).then(function(e){var n=e.data;n&&0===n.code?(t.$message({message:"操作成功",type:"success",duration:1500}),t.visible=!1,t.$emit("refreshDataList"),a?n.robotId=a:a=n.robotId,t.$emit("robotSaved",n)):t.$message.error(n.msg)});case 11:return n.abrupt("return",a);case 12:case"end":return n.stop()}},n,t)}))()},getTableItemVarList:function(){if("{}"!=u()(this.variableMap)){var e=[];for(var t in this.variableMap){var n=this.variableMap[t];"v_type_common_data"==n.varType&&e.push([n.itemName,n.variableName])}return e}return[["空",""]]},templateJsonToObtion:function(e){if(!e||!e.length)return[["空",""]];var t=[];return e.forEach(function(e){t.push([e.name,e.key])}),t},createTableItemVar:function(e,t){this.setTableItemVar(e,t),this.itemNum++},setTableItemVar:function(e,t){this.setVar(e,t),this.$refs.leftMenu.updataView()},setVar:function(e,t){this.$set(this.variableMap,e,t)},getVar:function(){return this.variableMap},getVarItemByCreateBlockId:function(e){for(var t in this.variableMap)if(this.variableMap[t].createBlockId==e)return this.variableMap[t]},deleteVarByName:function(e){var t=null;for(var n in this.variableMap)n==e&&(t=n);null!=t&&delete this.variableMap[t],this.$refs.leftMenu.updataView(),this.checkCanotUsedBlocks()},deleteVarByBlockIds:function(e){var t=this;e.forEach(function(e){var n=null;for(var o in t.variableMap)t.variableMap[o].createBlockId==e&&(n=o);null!=n&&delete t.variableMap[n]}),this.$refs.leftMenu.updataView(),this.checkCanotUsedBlocks()},checkCanotUsedBlocks:function(){var e=this;this.workspace.getAllBlocks().forEach(function(t){if("tableDataVar"==t.type||"tableListDataVar"==t.type){var n=!1;for(var o in e.variableMap)o==t.getVariableName()&&(n=!0);n?t.setEnabled(!0):t.setEnabled(!1)}if("tableDataFieldVar"==t.type){var i=!1;for(var a in e.variableMap)a==t.getParentVarName()&&(i=!0);i?t.setEnabled(!0):t.setEnabled(!1)}})},getVarIndexString:function(e){var t=0;for(var n in this.variableMap){var o=void 0,i=this.variableMap[n].itemName;if(null!=i){if(i.indexOf(-1!=e)){var a=i.replace(e,"");o=""==a?1:parseInt(a)}o&&o>t&&(t=o)}}return 0==t?"":t+1},setTrigger:function(e){return this.trigger&&this.trigger.createBlockId!=e.createBlockId?(this.$message.error("一个机器人只能同时存在一个触发事件！"),!1):(this.trigger=e,!0)},deleteTrigger:function(e){var t=this;e.forEach(function(e){null!=e&&null!=t.trigger&&e==t.trigger.createBlockId&&(t.trigger=null)})},setBlockConfigInfo:function(e,t){if(!t)return this.dataMap[e]=null,!1;this.dataMap[e]||(this.dataMap[e]={}),t.tableId&&(t.tableName=this.formMap[t.tableId].tableName),i()(this.dataMap[e],t)},getBlockConfigInfo:function(e){return this.dataMap[e]},deleteBlockConfigInfo:function(e){var t=this;e.forEach(function(e){null!=e&&delete t.dataMap[e]})},closeRightBox:function(){this.currentConfigViewId=null,setTimeout(function(){window.dispatchEvent(new Event("resize"))},50)},showBlockConfigView:function(e,t){var n=this;if(console.log("showBlockConfigView"),null!=e){if(e.getBlockConfigView){this.currentConfigViewId=e.id;var o=!1;this.configViewList.forEach(function(t){t.id==e.id&&(o=!0)}),console.log(this.dataMap,"77iiiiww"),o?this.$nextTick(function(){t.newElementId&&(console.log(e,"选中事件"),n.$refs["formWin"+e.id][0].onShowEvent&&n.$refs["formWin"+e.id][0].onShowEvent(n.dataMap[e.id]))}):(console.log(this.dataMap[e.id],"iiii"),te.default.set(this.configViewList,this.configViewList.length,{id:e.id,viewComponent:e.getBlockConfigView()}),this.$nextTick(function(){n.$refs["formWin"+e.id][0].init(n.dataMap[e.id])}))}}else this.closeRightBox()},hideBlockConfigView:function(e){var t=this;console.log("hideBlockConfigView");var n=e||this.currentConfigViewId;n&&this.$refs["formWin"+n]&&(console.log(n,"关闭事件"),this.$refs["formWin"+n][0]&&this.$refs["formWin"+n][0].onCloseEvent&&this.$refs["formWin"+n][0].onCloseEvent(this.dataMap[n])),this.$nextTick(function(){t.closeRightBox()})},updateBlockConfigView:function(e){var t=this;this.$nextTick(function(){null!=t.$refs["formWin"+e.id]&&t.$refs["formWin"+e.id][0].fresh()})},deleteBlockConfigView:function(e){var t=this;e.forEach(function(e){t.configViewList.forEach(function(e,t){e.isDelete=!0})})},initBlock:function(){var e;A(e=this),F(e),H(e),W(e),q(e),Q(e),Z()},myUpdateFunction:function(e){if(console.log(e),"toolbox_item_select"!=e.type&&this.$refs.leftMenu&&this.$refs.leftMenu.close(),"var_create"==e.type){var t=new f.a.Names("").getName(e.varName,"VARIABLE");this.setVar(t,{createBlockId:e.varId,itemName:e.varName,variableName:t,varType:d.g.blocklyVar})}if("var_rename"==e.type){var n=new f.a.Names(""),o=n.getName(e.oldName,"VARIABLE"),i=n.getName(e.newName,"VARIABLE");delete this.variableMap[o],this.setVar(e.varName,{createBlockId:e.varId,itemName:e.newName,variableName:i,varType:d.g.blocklyVar})}if("var_delete"==e.type){var a=new f.a.Names("").getName(e.varName,"VARIABLE");delete this.variableMap[a]}if("selected"==e.type&&(this.currentSelectedBlockId=e.newElementId,e.newElementId?e.newElementId!=e.oldElementId&&this.hideBlockConfigView(e.oldElementId):this.hideBlockConfigView()),null!=e.blockId){var r=this.workspace.getBlockById(e.blockId);"move"!=e.type&&this.showBlockConfigView(r,e),"create"==e.type?r.createEvent&&r.createEvent(e):"change"==e.type?r.changeEvent&&r.changeEvent(e):"delete"==e.type&&(this.deleteBlockConfigInfo(e.ids),this.deleteVarByBlockIds(e.ids),this.deleteBlockConfigView(e.ids),this.deleteTrigger(e.ids))}else if(e.newElementId&&e.isUiEvent){var l=this.workspace.getBlockById(e.newElementId);l&&this.showBlockConfigView(l,e)}},getBlockData:function(){f.a.JavaScript.workspaceToCode(this.workspace);var e=f.a.Xml.workspaceToDom(this.workspace);f.a.Xml.domToText(e)},setBlockData:function(e){this.clearBlockData();var t=f.a.Xml.textToDom(e);f.a.Xml.domToWorkspace(t,this.workspace)},clearBlockData:function(){this.workspace.clear()},saveNode:function(e,t){this.dataMap[t]=e},isEventInEditWorkSpace:function(e){return e.workspaceId==this.workspace.id},getVarIndex:function(){return this.itemNum},initById:function(e){var t=this;e?(this.loading=!0,this.$http({url:this.$http.adornUrl("/robot/commonrobot/info/"+e),method:"get"}).then(function(e){var n=e.data;t.loading=!1,0==n.code&&t.init(n.commonRobot)})):this.init(null)},init:function(e){var t=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e,7777),e&&(t.isAsync=e.async,t.enable=e.enable,t.$emit("getRobotIsAsync",t.isAsync),t.$emit("getRobotIsEnable",t.enable)),t.initrow=e,e&&e.extInfo&&(t.itemNum=JSON.parse(e.extInfo).itemNum),t.initBlock(),t.workspace=f.a.inject("blocklyDiv",{toolbox:document.getElementById("toolbox"),grid:{spacing:20,length:3,colour:"#ccc",snap:!0},media:"./media/",trashcan:!0}),t.workspace.addChangeListener(t.myUpdateFunction),document.getElementsByClassName("blocklyToolboxDiv")[0].style.display="none",n.next=10,t.initRobotFuncList();case 10:t.initList();case 11:case"end":return n.stop()}},n,t)}))()},initRobotFuncList:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http({url:e.$http.adornUrl("/robot/commonrobot/getRobotFuncList"),method:"get"}).then(function(t){var n=t.data;if(0==n.code&&n.data){var o=[];for(var i in n.data){var a=n.data[i];o.push([a.name,a.id+""])}0==o.length&&(o=[["空",""]]),e.$set(e,"robotFunctionList",o),e.robotFunctionList.unshift(["请选择机器人方法","未选择"]),console.log(e.robotFunctionList,8889889)}else e.$message.error(n.msg)});case 2:case"end":return t.stop()}},t,e)}))()},initData:function(){var e=this.initrow,t="";if(console.log(e,777,e?1:2),e)e.trigger&&(this.trigger=JSON.parse(e.trigger)),this.dataMap=JSON.parse(e.dataMap),this.variableMap=JSON.parse(e.variableMap),t=e.contentXml;else if(3==this.robotType)t='<xml xmlns="https://developers.google.com/blockly/xml"><block type="action_event" id="3]8Y?;MzY5ku3Ls=vnEb" x="210" y="110"><next><block type="returnVarData" id="FBdVJ2})}M|`JDl13`L3"></block></next></block></xml>';else if(4==this.robotType)this.dataMap={"npS%r-=n2;:NCfq//V;]":{tableName:this.flowTableName,createBlockId:"npS%r-=n2;:NCfq//V;]",itemName:"表单数据1",variableName:"v6KGo5Y2V5pWw5o2uMQ",varType:"v_type_common_data",dataRules:[]}},t='<xml xmlns="https://developers.google.com/blockly/xml"><block type="condition_event" id=")Mce$%S}$#{re^YSkV!J" x="10" y="10"><value name="variable"><block type="tableDataVar" id="vD5{Hzd(E}EJchP$l{ZV"><field name="variableName">表单数据1</field></block></value><next><block type="returnVarData" id="k4URTSKR6;@8FY,j=)RR"><value name="varName"><block type="tableDataCondition" id="npS%r-=n2;:NCfq//V;]"><value name="tableVariable"><block type="tableDataVar" id="mzBm?L*U5q|Td+=mP(vh"><field name="variableName">表单数据1</field></block></value></block></value></block></next></block></xml>';else if(5==this.robotType)t='<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id=".wTh*H:Jo6T^.7Z7|$w-">表信息</variable></variables><block type="btn_table_event" id=")Mce$%S}$#{re^YSkV!J" x="10" y="10"><value name="variable"><block type="variables_get" id="-F8z!1~|,~0YK=HKE~t" x="70" y="70"><field name="VAR" id=".wTh*H:Jo6T^.7Z7|$w-">表信息</field></block></value></block></xml>';else if(this.robotType){t='<xml xmlns="https://developers.google.com/blockly/xml"><block type="'+{1:"flow_data_event",2:"btn_data_event",4:"condition_event"}[this.robotType]+'" id=")Mce$%S}$#{re^YSkV!J" x="10" y="10"><value name="variable"><block type="tableDataVar" id="vD5{Hzd(E}EJchP$l{ZV"><field name="variableName">表单数据1</field></block></value></block></xml>'}""!=t&&f.a.Xml.domToWorkspace(f.a.Xml.textToDom(t),this.workspace)},initList:function(){var e=this;this.$loading.show(),this.$http({url:this.$http.adornUrl("/common/commondefine/listAll"),method:"post",data:this.$http.adornParams({page:1,limit:999,tableType:"dataTable",appId:JSON.parse(localStorage.getItem("app")).appId})}).then(function(t){var n=t.data;if(e.$loading.hide(),n&&0===n.code&&n.page){var o=[];for(var i in n.page.list){var a=n.page.list[i];e.formMap[a.tableName]=a,o.push([a.fullName,a.tableName+""])}0==o.length&&(o=[["空",""]]),e.$set(e,"formList",o),e.formList.unshift(["请选择表单","未选择"]),e.initData()}})},idToName:function(e){return"v"+L.a.encode(e,!0).toString().replace("=","")},debugRun:function(){var e=this;console.log(this.trigger,2342),"table_data_add"==this.trigger.triggerType||"table_data_add_or_update"==this.trigger.triggerType?(this.$emit("debugRunGo"),this.$gRobotDialog.show(oe.a.ADD_OR_UPDATE_COMMON_DATA,{id:null,isView:!1,tableName:this.trigger.tableName},function(t){e.debugRunDo({triggerCommonData:t})})):"table_data_update"==this.trigger.triggerType||"custom_button_click"==this.trigger.triggerType?(this.$emit("debugRunGo"),this.$gRobotDialog.show(oe.a.SELECT_ONE_UPDATE_COMMON_DATA,{tableName:this.trigger.tableName},function(t){e.debugRunDo({triggerCommonData:t})})):"table_data_delete"==this.trigger.triggerType?(this.$emit("debugRunGo"),this.$gRobotDialog.show(oe.a.SELECT_ONE_COMMON_DATA,{tableName:this.trigger.tableName},function(t){e.debugRunDo({triggerCommonData:t})})):"qrcode_event"==this.trigger.triggerType?this.debuggerQrCodeView=!0:(this.$emit("debugRunGo"),this.debugRunDo())},debugRunWithTriggerData:function(e,t){this.$emit("debugRunGo"),this.debugRunDo({triggerCommonData:e,initParams:t})},qrcodeDebug:function(){this.debugRunDo({extInfo:u()({qrCodeString:this.qrcode})}),this.debuggerQrCodeView=!1,this.$emit("debugRunGo")},debugRunDo:function(e){var t=this,n={commonRobotData:this.getRobotData(!0)};i()(n,e),console.log(n,e,222187),this.$http({url:this.$http.adornUrl("/robot/commonrobot/robotDebugRun"),data:n,method:"post"}).then(function(e){var n=e.data;0==n.code?(n.data.isBreakPointRunFinished?n.data.isBreakPointRunFinished&&t.$message.info("代码块已全部执行完,调试已结束"):t.isDebug=!0,t.doDebugResult(n.data)):t.$message.error(n.msg)})},debugNextRun:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments[1],o={};if(o.tempRobotId=this.debugTempRobotId,o.breakStep=this.debugBreakStep,o.changeVarValue=n,t){if(null==this.currentSelectedBlockId)return void this.$message.error("请选择一个块");o.isRunToSelectBlock=!0,o.selectBlockId=this.currentSelectedBlockId}this.$http({url:this.$http.adornUrl("/robot/commonrobot/robotNextDo"),method:"post",data:o}).then(function(t){var n=t.data;0==n.code?e.doDebugResult(n.data):e.$message.error(n.msg)})},doDebugResult:function(e){Object($.u)(e)?e.isOpenRobotDialog?(this.doDebugBreak(e),Object(ie.a)(this,e,this.debugNextRun)):e.isBreakPointRunFinished?(this.doDebugBreak(e),this.doDebugFinish(e)):this.doDebugBreak(e):this.doDebugFinish()},doDebugBreak:function(e){this.highLightBlock(e.breakBlock),this.debugTempRobotId=e.tempRobotId,this.debugBreakStep=e.breakStep,this.debugJsVarMap=JSON.parse(e.jsVarMap),this.debugList.push(e)},stopDebug:function(){this.isDebug=!1,this.debugList=[],this.doDebugFinish(),this.$emit("debugRunStop")},doDebugFinish:function(e){var t=this;null!=this.oldHighLightBlockId&&this.workspace.getBlockById(this.oldHighLightBlockId).setColour(this.oldHighLightBlockColour);e&&(this.debugJsVarMap=JSON.parse(e.jsVarMap)),this.$emit("onDebugFinish"),null!=this.debugTempRobotId&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/robotDebugFinish"),data:{tempRobotId:this.debugTempRobotId},method:"post"}).then(function(n){var o=n.data;0==o.code?e?t.$message.info({duration:1e3,message:"代码块已全部运行结束"}):t.$message.info({duration:1e3,message:"调试已结束"}):t.$message.error(o.msg)})},highLightBlock:function(e){var t=this.workspace.getBlockById(e);if(null!=t){if(null!=this.oldHighLightBlockId)this.workspace.getBlockById(this.oldHighLightBlockId).setColour(this.oldHighLightBlockColour);this.oldHighLightBlockId=e,this.oldHighLightBlockColour=t.getColour(),t.setColour("#ff0000")}}},mounted:function(){}},se={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"column",staticStyle:{height:"100%",width:"100%"}},[n("div",{staticClass:"col row",staticStyle:{height:"0"}},[e.isDebug?e._e():n("leftMenu",{ref:"leftMenu",attrs:{variableMap:e.variableMap,formMap:e.formMap,robotType:e.robotType,formExts:e.formExts,hasRobotType:e.hasRobotType},on:{change:e.changeToolbox}}),e._v(" "),e.isDebug?n("blocklyDebugger",{ref:"debug",staticStyle:{width:"400px"},attrs:{debugList:e.debugList,variableMap:e.variableMap,id:"debug"}}):e._e(),e._v(" "),n("div",{staticClass:"col column",staticStyle:{"border-right":"1px solid #e3e3e3"},attrs:{id:"blocklyDiv"}}),e._v(" "),e._l(e.configViewList,function(t){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.currentConfigViewId&&e.currentConfigViewId==t.id,expression:"currentConfigViewId&&currentConfigViewId == item.id "}],staticClass:"right-box"},[n(t.viewComponent,{ref:"formWin"+t.id,refInFor:!0,tag:"component",attrs:{formMap:e.formMap,variableMap:e.variableMap},on:{saveNode:function(n){return e.saveNode(n,t.id)}}})],1)})],2),e._v(" "),n("blocklyXML",{attrs:{hasRobotType:e.hasRobotType}}),e._v(" "),e.debuggerQrCodeView?n("vxe-modal",{attrs:{width:"400",height:"160",title:"模拟二维码解析结果"},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("模拟二维码解析结果")]),e._v(" "),n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.qrcodeDebug}},[e._v("确定")])],1)])]},proxy:!0}],null,!1,3366407950),model:{value:e.debuggerQrCodeView,callback:function(t){e.debuggerQrCodeView=t},expression:"debuggerQrCodeView"}},[e._v(" "),n("div",{staticStyle:{margin:"10px 0"}},[e._v("\n      请输入二维码解析结果 用于调试\n    ")]),e._v(" "),n("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.qrcode,callback:function(t){e.qrcode=t},expression:"qrcode"}})],1):e._e()],1)},staticRenderFns:[]};var ce=n("VU/8")(le,se,!1,function(e){n("imdm")},"data-v-2a5acfb1",null);t.default=ce.exports},sORg:function(e,t,n){"use strict";var o={props:{itemOption:{},isEdit:{}},data:function(){return{timeValue:"",pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var t=new Date,n=new Date;n.setHours(0,0,0,0),t.setTime(n.getTime()+864e5),e.$emit("pick",[n,t])}},{text:"昨天",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-864e5),n.setHours(0,0,0,0),t.setHours(0,0,0,0),e.$emit("pick",[n,t])}},{text:"最近三天",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e5),e.$emit("pick",[n,t])}},{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},pickerOptions2:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"前天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-1728e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},mounted:function(){},methods:{timeSelectChanged:function(e){var t=e;if("datePick"==this.itemOption.timeSelectType){var n=new Date(e);n.setTime(n.getTime()+864e5),t=[e,n.Format("yyyy-MM-dd HH:mm:ss")]}console.log(t,9901123),this.$emit("timeCtrChanged",t,this.itemOption.affectBlock)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid-card-dashboard row"},[n("span",{staticClass:"grid-card-dashboard-title",staticStyle:{"margin-right":"15px"}},[e._v(e._s(e.itemOption.name||"时间选择"))]),e._v(" "),null==e.itemOption.timeSelectType||"timeRank"==e.itemOption.timeSelectType?n("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},on:{change:e.timeSelectChanged},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}}):"datePick"==e.itemOption.timeSelectType?n("el-date-picker",{attrs:{align:"right",width:"600",type:"date",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":e.pickerOptions2},on:{change:e.timeSelectChanged},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}}):e._e()],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("OjW8")},"data-v-6028be7b",null);t.a=a.exports},sOwB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-jiesuo",use:"icon-jiesuo-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-jiesuo"><defs><style type="text/css"></style></defs><path d="M753.845117 371.674021l-17.46272 0 0-83.669608c0-59.275012-22.62837-115.203812-63.715137-157.482731-42.170448-43.394323-99.369172-67.291592-161.058163-67.291592-126.040624 0-224.772276 98.731652-224.772276 224.7733l0 83.669608-16.680914 0c-62.788022 0-113.688295 50.900274-113.688295 113.688295L156.467611 842.961784c0 62.788022 50.900274 113.688295 113.688295 113.688295l483.690234 0c62.788022 0 113.688295-50.900274 113.688295-113.688295L867.534436 485.362316C867.532389 422.574295 816.633139 371.674021 753.845117 371.674021zM328.176344 288.005436c0-102.858646 80.573083-183.432753 183.431729-183.432753 50.423413 0 97.093339 19.447934 131.410935 54.762231 33.547047 34.519188 52.021817 80.214926 52.021817 128.670521l0 83.669608L328.176344 371.675044 328.176344 288.005436zM826.191842 842.961784c0 39.956014-32.390711 72.346725-72.346725 72.346725L270.154883 915.308509c-39.956014 0-72.346725-32.390711-72.346725-72.346725L197.808158 485.362316c0-39.956014 32.390711-72.346725 72.346725-72.346725l483.690234 0c39.956014 0 72.346725 32.390711 72.346725 72.346725L826.191842 842.961784z" p-id="3259" /><path d="M509.932921 580.446905c-11.416004 0-20.670785 9.254781-20.670785 20.670785l0 109.554138c0 11.414981 9.254781 20.670785 20.670785 20.670785 11.416004 0 20.670785-9.254781 20.670785-20.670785L530.603707 601.116667C530.602683 589.701686 521.348925 580.446905 509.932921 580.446905z" p-id="3260" /></symbol>'});r.a.add(l);t.default=l},sZG1:function(e,t,n){var o={"./bom.vue":["kjcC",4],"./template.vue":["/954",3]};function i(e){var t=o[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}i.keys=function(){return Object.keys(o)},i.id="sZG1",e.exports=i},sZk8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("xstH"),i=n("bKCO"),a={components:{selectStaff:o.a,selectStaffDepRole:i.a},props:{formMap:{},variableMap:{}},watch:{variableMap:{handler:function(e){for(var t in this.type=[],e)this.type.push({value:e[t].variableName,label:e[t].itemName});this.type.push({value:"",label:"自定义"})},deep:!0,immediate:!0}},data:function(){return{formVisible:!1,baseData:{staff:null,phone:[],rules:null},type:[],selectedId:"",selectedRow:{smsTemplate:""},showList:[]}},methods:{selectItem:function(e){this.selectedId=e.id,this.selectedRow=e},selectOk:function(){this.baseData.smsTemplate=this.selectedRow.smsTemplate,this.baseData.templateId=this.selectedRow.templateId,this.baseData.signName=this.selectedRow.signName;var e=this.selectedRow.smsTemplate,t=new RegExp("(?<=\\${)(.+?)(?=\\})","g");for(var n in this.baseData.rules=[],e.match(t)){var o=e.match(t)[n];this.baseData.rules.push({variable:"",field:"",value:"",label:o})}this.splicLabel(e),this.formVisible=!1},addPhone:function(){this.baseData.phone.push({variable:"",field:"",value:""})},splicLabel:function(e){var t=this.baseData.smsTemplate;if(!t)return!1;var n=new RegExp("\\${(.+?)\\}","g"),o=t.match(n),i=[],a=0;for(var r in o){var l=o[r];console.log(a,t.indexOf(l)),0==a&&i.push({label:t.slice(a,t.indexOf(l)),isLabel:!0}),i.push({label:l.slice(2,l.length-1),isLabel:!1}),a=t.indexOf(l)+l.length,i.push({label:t.slice(a,o[parseInt(r)+1]?t.indexOf(o[parseInt(r)+1]):t.length),isLabel:!0})}this.showList=i},msgTem:function(){this.formVisible=!0},getMatchingList:function(e){return this.formMap[this.variableMap[e].tableName].templateJson},init:function(e){var t=this;!e.staff&&(e.staff=null),!e.rules&&(e.rules=[]),!e.phone&&(e.phone=[]),this.$nextTick(function(){t.$set(t,"baseData",e),t.splicLabel(t.baseData.smsTemplate)})},save:function(){console.log(this.baseData),this.$emit("saveNode",this.baseData)}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("收件人")]),e._v(" "),n("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{"line-height":"30px"}},[e._v("系统成员:")]),e._v(" "),n("div",{staticClass:"col"},[n("selectStaffDepRole",{model:{value:e.baseData.staff,callback:function(t){e.$set(e.baseData,"staff",t)},expression:"baseData.staff"}})],1)]),e._v(" "),n("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{"line-height":"30px"}},[e._v("手机号码:")]),e._v(" "),n("div",{staticClass:"col"},[n("el-button",{staticStyle:{margin:"0 10px"},attrs:{title:"增加手机号码",type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.addPhone}})],1)]),e._v(" "),e._l(e.baseData.phone,function(t,o){return n("el-row",{key:o,staticStyle:{"margin-top":"10px"}},[n("el-col",{staticStyle:{"padding-right":"10px","line-height":"36px"},attrs:{span:6}},[n("div",{staticClass:"symbol-box"},[e._v("\r\n                手机号码\r\n              ")])]),e._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"symbol-box"},[e._v("\r\n                    等于\r\n                ")])]),e._v(" "),n("el-col",{attrs:{span:5}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:10}},[t.variable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getMatchingList(t.variable),function(e){return n("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1):n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)})],2),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("短信内容"),n("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:e.msgTem}},[e._v(e._s((e.selectedId?"更换":"选择")+"短信模板"))])],1),e._v(" "),n("div",{staticClass:"row",staticStyle:{padding:"20px 0"}},e._l(e.showList,function(t){return n("div",[t.isLabel?n("div",{staticStyle:{"line-height":"28px"}},[e._v("\r\n                    "+e._s(t.label)+"\r\n                ")]):n("div",{staticStyle:{margin:"0 5px"}},[n("el-tag",[e._v(e._s(t.label))])],1)])}),0),e._v(" "),e._l(e.baseData.rules,function(t){return n("div",[n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-col",{staticStyle:{"padding-right":"10px","line-height":"36px"},attrs:{span:6}},[n("el-tag",{staticClass:"text-center",staticStyle:{width:"100%"}},[e._v(e._s(t.label))])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"symbol-box"},[e._v("\r\n                        等于\r\n                    ")])]),e._v(" "),n("el-col",{attrs:{span:5}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:""},model:{value:t.variable,callback:function(n){e.$set(t,"variable",n)},expression:"item.variable"}},e._l(e.type,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:10}},[t.variable?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择匹配字段"},model:{value:t.field,callback:function(n){e.$set(t,"field",n)},expression:"item.field"}},e._l(e.getMatchingList(t.variable),function(e){return n("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1):n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)],1)})],2),e._v(" "),e.formVisible?n("vxe-modal",{staticClass:"all-box",attrs:{width:"75%",height:"80%"},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",[e._v("选择短信模板")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px",float:"right"},attrs:{type:"primary"},on:{click:e.selectOk}},[e._v("确定")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px",float:"right"},on:{click:function(t){e.formVisible=!1}}},[e._v("取消")])]},proxy:!0}],null,!1,3658324761),model:{value:e.formVisible,callback:function(t){e.formVisible=t},expression:"formVisible"}},[e._v(" "),n("common-view",{ref:"common",attrs:{tableNameProp:"common_table_0_sms_template",radioChoose:!0},on:{selectItem:e.selectItem}})],1):e._e()],1)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("OMzG")},"data-v-eb5d12fe",null);t.default=l.exports},sg1D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("uBQ/"),i=n("JbnW"),a=n("t4jf"),r=n("stQF"),l={components:{page:o.default,appearance:i.default,options:a.default,layers:r.default},data:function(){return{activeNames:["1","2","3","4"]}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"kr-collapse"},[n("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{attrs:{title:"",name:"1"}},[n("template",{slot:"title"},[n("span",[e._v("页面参数")])]),e._v(" "),n("page")],2),e._v(" "),n("el-collapse-item",{attrs:{name:"2"}},[n("template",{slot:"title"},[n("span",[e._v("样式")])]),e._v(" "),n("appearance",{staticClass:"pd-l-10"})],2),e._v(" "),n("el-collapse-item",{attrs:{name:"3"}},[n("template",{slot:"title"},[n("span",[e._v("组件")])]),e._v(" "),n("options")],2),e._v(" "),n("el-collapse-item",{attrs:{name:"4"}},[n("template",{slot:"title"},[n("span",[e._v("已加组件")])]),e._v(" "),n("layers")],2)],1)],1)},staticRenderFns:[]},c=n("VU/8")(l,s,!1,null,null,null);t.default=c.exports},skRJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("0xDb"),i={name:""},a={data:function(){return{dataForm:{name:""},rules:{name:[{required:!0,message:"请输入节点名称",trigger:"change"}]},winVisible:!1,list:[{title:"审批节点",type:"approval",icon:"el-icon-s-check"},{title:"填写节点",type:"write",icon:"el-icon-edit-outline"},{title:"添加机器人",type:"robot",icon:"el-icon-coordinate"},{title:"添加子分支",type:"branch",icon:"el-icon-position"}],robotType:[{title:"添加数据",type:"add",icon:"el-icon-plus"},{title:"更新数据",type:"updata",icon:"el-icon-upload2"},{title:"发送邮件",type:"email",icon:"el-icon-s-comment"},{title:"发送短信",type:"message",icon:"el-icon-s-promotion"}],selectType:null,selectRobot:!1}},methods:{addBtn:function(){var e=this;this.$refs.dataForm.validate(function(t){if(!t)return!1;e.dataForm.type=e.selectType.type,e.$emit("add",e.dataForm),e.winVisible=!1})},robotSelect:function(e){this.dataForm=Object(o.e)(i),this.dataForm.robotType=e.type,this.winVisible=!0},add:function(e){this.selectType=e,"branch"==e.type?this.$emit("add",{type:e.type}):(this.dataForm=Object(o.e)(i),this.winVisible=!0)}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.list,function(t){return n("div",{staticClass:"action-list",on:{click:function(n){return e.add(t)}}},[n("span",{staticClass:"action-icon",class:t.icon}),e._v(e._s(t.title))])}),e._v(" "),n("el-dialog",{attrs:{width:"40%",title:"节点信息",visible:e.winVisible,"append-to-body":!0},on:{"update:visible":function(t){e.winVisible=t}}},[n("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.rules}},[n("el-form-item",{attrs:{label:"节点名称",prop:"name",required:""}},[n("el-input",{model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.winVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addBtn}},[e._v("确定")])],1)],1)],2)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("pvac")},"data-v-54054c8f",null);t.default=l.exports},stQF:function(e,t,n){"use strict";function o(e){return{top:el.offsetTop,left:el.offsetLeft}}Object.defineProperty(t,"__esModule",{value:!0});var i={computed:{layers:function(){return this.$vptd.state.page.tempItems},activeElement:function(){return this.$vptd.state.activeElement}},methods:{activeLayer:function(e,t){this.$vptd.commit("select",{uuid:t.uuid});var n,i=document.querySelector("#viewport");if(i){var a=i.querySelector("[data-uuid='"+t.uuid+"']");!a||(n=a.getBoundingClientRect()).top>0&&n.top<window.innerHeight&&n.left<window.innerWidth&&n.right>0||(i.scrollTop=o().top-50)}else console.error('未找到 "#viewport" 的节点')},dele:function(e,t){this.$vptd.commit("delete",t.uuid)}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tag-box"},e._l(e.layers,function(t,o){return n("el-tag",{key:o,attrs:{closable:t===e.activeElement,size:"small",type:t===e.activeElement?"":"info"},on:{click:function(n){e.activeLayer(n,t)},close:function(n){e.dele(n,t)}}},[e._v(e._s(t.title))])}),1)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("yYqw")},"data-v-493c16b6",null);t.default=r.exports},"t+PV":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-xiangqufill",use:"icon-xiangqufill-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-xiangqufill"><defs><style type="text/css"></style></defs><path d="M512.693802 923.653571c-0.002047 0-0.00307 0-0.005117 0-5.334495 0-10.44591-1.889023-14.201443-5.676279L371.4755 790.006711c-1.623987-1.632173-165.076686-165.854399-188.502212-189.280948C113.996311 531.748786 73.487711 454.399117 65.827241 376.98191c-7.621585-77.016071 19.012006-150.243863 74.992995-206.225875 54.854329-54.853305 121.683387-77.840856 193.253422-66.48318 59.696614 9.471722 121.131825 42.556235 178.620144 96.012727 57.488319-53.456492 118.92353-86.535889 178.620144-96.007611 71.573105-11.350512 138.399093 11.639085 193.253422 66.49239 55.980989 55.980989 82.613556 129.225153 74.992995 206.241224-7.66047 77.417207-48.169069 154.797575-117.146047 223.775576-51.150984 51.14996-312.884057 314.541813-315.52214 317.199339C523.137665 921.770687 518.02625 923.653571 512.693802 923.653571z" p-id="1987" /></symbol>'});r.a.add(l);t.default=l},t0Cm:function(e,t){},t4PW:function(e,t){},t4jf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"options-box"},[e._l(e.optionItems,function(t,o){return["braid-table"==t.type?n("el-popover",{key:o,attrs:{placement:"top",width:"200"},model:{value:e.tablePopover,callback:function(t){e.tablePopover=t},expression:"tablePopover"}},[n("div",[n("el-checkbox-group",{model:{value:t.selectCol,callback:function(n){e.$set(t,"selectCol",n)},expression:"item.selectCol"}},[n("el-row",e._l(t.columnsAttr,function(t){return n("el-col",{key:t.name,attrs:{span:12}},[n("el-checkbox",{attrs:{label:t.name}},[e._v(e._s(t.title))])],1)}),1)],1),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){e.addTempItem(n,t)}}},[e._v("确定")])],1),e._v(" "),n("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v(e._s(t.title))])],1):n("el-button",{key:o,attrs:{size:"mini"},on:{click:function(n){e.addTempItem(n,t)}}},[e._v(e._s(t.title))])]})],2)},staticRenderFns:[]};var i=n("VU/8")({data:function(){return{tablePopover:!1}},computed:{optionItems:function(){return this.$vptd.state.optionItems}},methods:{addTempItem:function(e,t){switch(t.type){case"braid-table":var n=[];t.selectCol.forEach(function(e){var o=t.columnsAttr.find(function(t){return t.name===e});o&&n.push(o)}),t.columns=n,this.$vptd.dispatch("addTempItem",t),this.tablePopover=!1;break;default:this.$vptd.dispatch("addTempItem",t)}}}},o,!1,function(e){n("vw/c")},"data-v-3e6947de",null);t.default=i.exports},t602:function(e,t){},tPrY:function(e,t){},tzKF:function(e,t){},u6HO:function(e,t){},"uBQ/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{staticClass:"kr-form",attrs:{"label-width":"80px",model:e.pageInfo,size:"mini"}},[n("el-row",[n("el-form-item",{attrs:{label:"模板名称"}},[n("el-input",{staticClass:"full-w",model:{value:e.pageInfo.title,callback:function(t){e.$set(e.pageInfo,"title",t)},expression:"pageInfo.title"}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"模板宽度"}},[n("el-input-number",{staticClass:"min-input",attrs:{"controls-position":"right",min:0},model:{value:e.pageInfo.width,callback:function(t){e.$set(e.pageInfo,"width",t)},expression:"pageInfo.width"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"模板高度"}},[n("el-input-number",{staticClass:"min-input",attrs:{"controls-position":"right",min:0},model:{value:e.pageInfo.height,callback:function(t){e.$set(e.pageInfo,"height",t)},expression:"pageInfo.height"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-form-item",{attrs:{label:"纸张宽度"}},[n("el-input-number",{staticClass:"min-input",attrs:{"controls-position":"right",min:0},model:{value:e.pageInfo.pageWidth,callback:function(t){e.$set(e.pageInfo,"pageWidth",t)},expression:"pageInfo.pageWidth"}}),e._v(" "),n("span",{staticClass:"unit-text"},[e._v("(mm)")])],1)],1),e._v(" "),n("el-row",[n("el-form-item",{attrs:{label:"纸张高度"}},[n("el-input-number",{staticClass:"min-input",attrs:{"controls-position":"right",min:0},model:{value:e.pageInfo.pageHeight,callback:function(t){e.$set(e.pageInfo,"pageHeight",t)},expression:"pageInfo.pageHeight"}}),e._v(" "),n("span",{staticClass:"unit-text"},[e._v("(mm)")])],1)],1),e._v(" "),n("el-row",[n("el-form-item",{attrs:{label:"纸张打印方向"}},[n("el-radio-group",{model:{value:e.pageInfo.direction,callback:function(t){e.$set(e.pageInfo,"direction",t)},expression:"pageInfo.direction"}},[n("el-radio",{attrs:{label:1}},[e._v("纵向")]),e._v(" "),n("el-radio",{attrs:{label:2}},[e._v("横向")])],1)],1)],1)],1)],1)},staticRenderFns:[]},i=n("VU/8")({computed:{pageInfo:function(){return this.$vptd.state.page}}},o,!1,null,null,null);t.default=i.exports},uFDB:function(e,t){},uM2P:function(e,t,n){"use strict";var o=n("woOf"),i=n.n(o),a={props:{title:""},data:function(){return{tableListVisible:!1,localTableDataProp:[],loading:!1,condition:null,tableName:""}},methods:{init:function(e){var t=this;console.log(e),this.condition=e,this.tableName=e.condition.tableName,this.tableListVisible=!0,this.loading=!0,this.$http({url:this.$http.adornUrl("/common/common/listForCalendar"),method:"post",data:e.condition}).then(function(n){var o=n.data;if(t.loading=!1,o&&o.data&&0===o.code){var a=new Date(e.date).Format("yyyy-MM-dd"),r=o.data[a];r?(r.forEach(function(e){console.log(e),e=i()(e,JSON.parse(e.extContent))}),t.$set(t,"localTableDataProp",r)):t.localTableDataProp=[]}})},getDataList:function(){this.init(this.condition),this.$emit("getDataList")}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{width:"90%",height:"90%",resize:"",remember:"",title:e.title},model:{value:e.tableListVisible,callback:function(t){e.tableListVisible=t},expression:"tableListVisible"}},[e.tableListVisible?n("common-view",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tbList",attrs:{localTableDataProp:e.localTableDataProp,tableNameProp:e.tableName},on:{getDataList:e.getDataList}}):e._e()],1)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("H1qO")},null,null);t.a=l.exports},uslO:function(e,t,n){var o={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn-bd":"1C9R","./bn-bd.js":"1C9R","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-in":"yJfC","./en-in.js":"yJfC","./en-nz":"dyB6","./en-nz.js":"dyB6","./en-sg":"NYST","./en-sg.js":"NYST","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-mx":"USNP","./es-mx.js":"USNP","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fil":"rMbQ","./fil.js":"rMbQ","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-deva":"VGQH","./gom-deva.js":"VGQH","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./oc-lnc":"KOFO","./oc-lnc.js":"KOFO","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tk":"+WRH","./tk.js":"+WRH","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-mo":"+WA1","./zh-mo.js":"+WA1","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(e){return n(a(e))}function a(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id="uslO"},"v/RY":function(e,t){},vL2Z:function(e,t,n){"use strict";n("0xDb");var o=n("Ib3M"),i=(n("e4/+"),{components:{},props:{itemOption:{},isEdit:{}},data:function(){return{option:{},tableData:[],totalNum:0}},mounted:function(){var e=this;console.log(this.itemOption,90999),this.$nextTick(function(){e.$refs.common&&e.$refs.common.refreshDataAndPage(null,e.itemOption.tableName)})},methods:{onCtrDataChange:function(e){},clickEvent:function(e){},onGetData:function(e){console.log(e,999),this.totalNum=e.totalCount},gotoAllList:function(){this.$gRobotDialog.show(o.a.VIEW_COMMON_LIST_DATA,{tableName:this.itemOption.tableName,dataFilterInfo:this.itemOption.tableFilterParams?JSON.parse(this.itemOption.tableFilterParams):[],title:this.itemOption.name})}}}),a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h100"},[n("div",{staticStyle:{"margin-bottom":"8px","margin-left":"10px"}},[n("span",{staticClass:"grid-card-dashboard-title"},[e._v(e._s(this.itemOption.name))]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text"},on:{click:e.gotoAllList}},[e._v("查看所有（"+e._s(e.totalNum)+"）条")])],1),e._v(" "),n("common-view",{ref:"common",attrs:{dontShowCustomViewProp:!0,isChildView:!0,tableConfig:{canEdit:!1,canDelete:!1},dataFilterInfoProp:e.itemOption.tableFilterParams&&""!=e.itemOption.tableFilterParams?JSON.parse(e.itemOption.tableFilterParams):null,noHeadBar:"",noPageInfo:""},on:{onGetData:e.onGetData}})],1)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("1TYV")},"data-v-e61ad80a",null);t.a=r.exports},veIK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),l=n("Xf8N"),s=n("bKCO"),c=n("8skB"),u=n("TN+i"),d=n("0xDb"),h=n("16XU"),f={components:{selectStaffDepRole:s.a,clickInput:l.a,selectForm:c.a,rules:u.a,robotEditDialog:h.default},props:{d:{},exts:{},tableName:{}},model:{prop:"d",event:"change"},watch:{d:{handler:function(e){this.getData()},deep:!0,immediate:!0}},data:function(){return{adminType:Object(d.m)("approvalAdminTypeEnum"),approvalType:Object(d.m)("approvalTypeEnum"),baseData:{name:"",info:{adminId:[],formId:"",agreeIsCanExecRobotId:null,rejectIsCanExecRobotId:null,agreeFillTableRobotId:null,rejectFillTableRobotId:null,afterAgreeRobotId:null,afterRejectRobotId:null}},dynamicList:[],robotshow:!1,robotType:null}},beforeDestroy:function(){this.save()},methods:{setRobot:function(e){var t=this;this.robotshow=!0,this.robotType=e,this.$nextTick(function(){t.$refs.robotEdit.init("流程机器人配置","number"==typeof t.baseData.info[e]?t.baseData.info[e]:null,2,t.d,t.tableName)})},saveRobot:function(e){var t=this;return r()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.$set(t.baseData.info,t.robotType,e.robotId),t.robotshow=!1;case 2:case"end":return n.stop()}},n,t)}))()},deleteRobot:function(e){this.baseData.info[e]=null},save:function(){this.$set(this.d,"info",this.baseData.info),this.$set(this.d,"name",this.baseData.name),this.$emit("close")},getData:function(){var e=[];this.exts.forEach(function(t){"selectStaff"==t.type&&e.push({id:t.key,label:t.name})}),this.$set(this,"dynamicList",e),this.baseData=Object(d.e)(this.d)}},mounted:function(){}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column",staticStyle:{height:"100%"}},[n("div",{staticClass:"col"},[n("div",{staticClass:"top-title approval-head"},[n("div",{staticClass:"t-title"},[n("clickInput",{model:{value:e.baseData.name,callback:function(t){e.$set(e.baseData,"name",t)},expression:"baseData.name"}})],1)]),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("负责人")]),e._v(" "),n("selectStaffDepRole",{staticStyle:{"margin-top":"10px"},attrs:{otherDynamicList:e.dynamicList},model:{value:e.baseData.info.adminId,callback:function(t){e.$set(e.baseData.info,"adminId",t)},expression:"baseData.info.adminId"}})],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("审批类型")]),e._v(" "),n("el-select",{attrs:{size:"medium",placeholder:"请选择"},model:{value:e.baseData.info.approvalType,callback:function(t){e.$set(e.baseData.info,"approvalType",t)},expression:"baseData.info.approvalType"}},e._l(e.approvalType,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("同意操作前监测是否可执行表单机器人")]),e._v(" "),n("el-button",{attrs:{type:e.baseData.info.agreeIsCanExecRobotId?"primary":""},on:{click:function(t){return e.setRobot("agreeIsCanExecRobotId")}}},[e._v("设置机器人\n      ")]),e._v(" "),e.baseData.info.agreeIsCanExecRobotId?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteRobot("agreeIsCanExecRobotId")}}},[e._v("删除\n      ")]):e._e()],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("拒绝操作前监测是否可执行表单机器人")]),e._v(" "),n("el-button",{attrs:{type:e.baseData.info.rejectIsCanExecRobotId?"primary":""},on:{click:function(t){return e.setRobot("rejectIsCanExecRobotId")}}},[e._v("设置机器人\n      ")]),e._v(" "),e.baseData.info.rejectIsCanExecRobotId?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteRobot("rejectIsCanExecRobotId")}}},[e._v("删除\n      ")]):e._e()],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("同意操作填写表单机器人")]),e._v(" "),n("el-button",{attrs:{type:e.baseData.info.agreeFillTableRobotId?"primary":""},on:{click:function(t){return e.setRobot("agreeFillTableRobotId")}}},[e._v("设置机器人\n      ")]),e._v(" "),e.baseData.info.agreeFillTableRobotId?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteRobot("agreeFillTableRobotId")}}},[e._v("删除\n      ")]):e._e()],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("拒绝操作填写表单机器人")]),e._v(" "),n("el-button",{attrs:{type:e.baseData.info.rejectFillTableRobotId?"primary":""},on:{click:function(t){return e.setRobot("rejectFillTableRobotId")}}},[e._v("设置机器人\n      ")]),e._v(" "),e.baseData.info.rejectFillTableRobotId?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteRobot("rejectFillTableRobotId")}}},[e._v("删除\n      ")]):e._e()],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("设置同意操作后执行机器人")]),e._v(" "),n("el-button",{attrs:{type:e.baseData.info.afterAgreeRobotId?"primary":""},on:{click:function(t){return e.setRobot("afterAgreeRobotId")}}},[e._v("设置机器人\n      ")]),e._v(" "),e.baseData.info.afterAgreeRobotId?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteRobot("afterAgreeRobotId")}}},[e._v("删除\n      ")]):e._e()],1),e._v(" "),n("div",{staticClass:"blockly-row-box"},[n("div",{staticClass:"blockly-row-title"},[e._v("设置拒绝操作后执行机器人")]),e._v(" "),n("el-button",{attrs:{type:e.baseData.info.afterRejectRobotId?"primary":""},on:{click:function(t){return e.setRobot("afterRejectRobotId")}}},[e._v("设置机器人\n      ")]),e._v(" "),e.baseData.info.afterRejectRobotId?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteRobot("afterRejectRobotId")}}},[e._v("删除\n      ")]):e._e()],1)]),e._v(" "),e.robotshow?n("robotEditDialog",{ref:"robotEdit",on:{robotSaved:e.saveRobot}}):e._e()],1)},staticRenderFns:[]};var m=n("VU/8")(f,p,!1,function(e){n("27uN")},"data-v-e950b4ba",null);t.default=m.exports},vnMc:function(e,t,n){"use strict";var o={components:{showText:n("BAPo").a},model:{prop:"value",event:"change"},props:{value:{},ext:{}},watch:{modelData:function(){this.$emit("change",this.modelData)}},data:function(){return{modelData:this.value}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("el-checkbox-group",{model:{value:e.modelData,callback:function(t){e.modelData=t},expression:"modelData"}},e._l(e.ext.selectItem,function(t,o){return n("el-checkbox",{key:o,attrs:{label:t.value}},[n("showText",{staticClass:"tile",attrs:{type:"select",value:t.value,ext:e.ext}})],1)}),1)],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("XSpc")},"data-v-b61aac4c",null);t.a=a.exports},vpfm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Dg1o"),i=n("5xRT"),a=n("bKCO"),r={components:{extItem:i.default,formuleWin:o.default,selectStaffDepRole:a.a},props:{dataForm:{},ext:{},exts:{}},data:function(){return{popoverShow:!1}},methods:{formuleSet:function(e){this.popoverShow=!1,this.$refs.formuleWin.init(this.ext.defaultValueFormule?this.ext.defaultValueFormule:{})},clearFormuleAndNow:function(){this.$set(this.ext,"defaultValueIsNow",!1),this.$set(this.ext,"defaultValueFormule",null)},dateTimeNow:function(){this.$set(this.ext,"defaultValueIsNow",!0),this.$set(this.ext,"defaultValueFormule",null),this.$set(this.ext,"defaultValue","")},saveFormuleWin:function(e){this.$set(this.ext,"defaultValueIsNow",!1),this.$set(this.ext,"defaultValue",""),this.$set(this.ext,"defaultValueFormule",{formuleContext:e.format,formuleFieldList:e.fieldList})}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row base"},[e.ext.defaultValueFormule||e.ext.defaultValueIsNow?n("div",{staticClass:"col"},[n("div",{staticClass:" el-input__inner",staticStyle:{display:"flex"}},[n("div",{staticClass:"col"},[e.ext.defaultValueFormule?n("div",{staticClass:"tag"},[n("i",{staticClass:"iconfont icon-gongshi"}),e._v("公式计算\n              ")]):e._e(),e._v(" "),e.ext.defaultValueIsNow?n("div",{staticClass:"tag"},[n("i",{staticClass:"iconfont icon-calendar-alt"}),e._v("此刻\n              ")]):e._e()]),e._v(" "),n("div",{staticClass:"cursor-pointer",staticStyle:{"line-height":"27px",color:"#c3c5c9"},on:{click:e.clearFormuleAndNow}},[n("i",{staticClass:"el-icon-circle-close"})])])]):n("div",{staticClass:"col"},["selectStaff"==e.ext.type?n("selectStaffDepRole",{attrs:{single:!e.ext.mustMultiple},model:{value:e.ext.defaultValue,callback:function(t){e.$set(e.ext,"defaultValue",t)},expression:"ext.defaultValue"}}):n("extItem",{staticClass:"col",attrs:{dataForm:e.dataForm,baseData:e.ext,nolabel:""},model:{value:e.ext.defaultValue,callback:function(t){e.$set(e.ext,"defaultValue",t)},expression:"ext.defaultValue"}})],1),e._v(" "),n("el-popover",{attrs:{placement:"bottom-end",title:"",width:"240",trigger:"click",content:""},model:{value:e.popoverShow,callback:function(t){e.popoverShow=t},expression:"popoverShow"}},[n("div",["dateTime"==e.ext.type?n("div",{staticClass:"option",on:{click:e.dateTimeNow}},[n("i",{staticClass:"iconfont icon-calendar-alt"}),e._v("此刻")]):e._e(),e._v(" "),n("div",{staticClass:"option",on:{click:e.formuleSet}},[n("i",{staticClass:"iconfont icon-gongshi"}),e._v("公式计算")])]),e._v(" "),n("el-button",{attrs:{slot:"reference",title:"设置动态数据"},slot:"reference"},[n("i",{staticClass:"el-icon-setting"})])],1),e._v(" "),n("formuleWin",{ref:"formuleWin",attrs:{dataForm:e.dataForm,exts:e.exts},on:{saveData:e.saveFormuleWin}})],1)},staticRenderFns:[]};var s=n("VU/8")(r,l,!1,function(e){n("q7Ua")},"data-v-612a488e",null);t.default=s.exports},"vw/c":function(e,t){},vzP8:function(e,t,n){"use strict";var o={props:{itemOption:{},isEdit:{}},data:function(){return{}},mounted:function(){},methods:{goLink:function(){console.log(this.isEdit,this.itemOption,9888938),this.isEdit||this.itemOption.link&&""!=this.itemOption.link&&(this.itemOption.link.indexOf("http")>-1?window.open(this.itemOption.link,"_blank"):this.itemOption.link.indexOf("common-common")>-1?this.$router.push({name:this.itemOption.link,query:{dataFilterInfo:this.itemOption.linkParams}}):this.itemOption.link.indexOf("home@")>-1&&this.$router.push({name:this.itemOption.link}))}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"fill-content",style:{background:e.itemOption.backgroundColor},attrs:{shadow:"hover"},nativeOn:{click:function(t){return e.goLink()}}},[n("div",{staticClass:"flex-center  fill-content"},[n("i",{staticClass:"main-color",class:e.itemOption.icon,staticStyle:{"font-size":"40px","margin-top":"20px"}}),e._v(" "),null!=e.itemOption.text1&&""!=e.itemOption.text1?n("div",{staticClass:"card-text",style:{color:e.itemOption.titleColor}},[e._v("\n        "+e._s(e.itemOption.text1)+"\n      ")]):e._e()])])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("aydk")},"data-v-938e72f6",null);t.a=a.exports},"w+Zr":function(e,t){},w2O1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("KPhi"),i={props:{data:{},config:{}},data:function(){return{option:{mainTitle:"",secondaryTitle:""},optionFilter:{mainTitle:[],secondaryTitle:[]},infoItemNum:1,selected:""}},methods:{addInfoItem:function(){this.infoItemNum++},getOption:function(){return{option:this.option,optionFilter:this.optionFilter}},click:function(e){this.selected=e,this.$emit("select",e,Object(o.a)())},clickInfoItem:function(e){this.selected="secondaryTitle"+e,this.$emit("select",this.selected)}},created:function(){this.infoItemNum=this.config?this.config.length-1:1}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(3,function(t,o){return n("div",{key:o,staticClass:"base-box"},[n("div",{staticClass:"main-title cursor-pointer",class:"mainTitle"==e.selected?"selected-box":"normal-box",on:{click:function(t){return e.click("mainTitle")}}},[e._v("\r\n            这里是主标题\r\n        ")]),e._v(" "),e._l(e.infoItemNum,function(t,o){return n("div",{staticClass:"secondary-title cursor-pointer",class:e.selected=="secondaryTitle"+o?"selected-box":"normal-box",on:{click:function(t){return e.clickInfoItem(o)}}},[e._v("\r\n            这里是字段信息\r\n            "),n("i",{staticClass:"el-icon-circle-plus",on:{click:e.addInfoItem}})])}),e._v(" "),n("i",{staticClass:"el-icon-circle-plus",on:{click:e.addInfoItem}})],2)}),e._v(" "),n("div",{staticClass:"text-center"},[e._v("\r\n        暂无更多\r\n    ")])],2)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("WmNw")},"data-v-69272833",null);t.default=r.exports},w4zF:function(e,t,n){"use strict";t.c=function(e){if(console.log(e),-1!=i()(e).indexOf("dataFilterInfo")){var t={};return e.forEach(function(e){e.dataFilterInfo&&e.dataFilterInfo.forEach(function(n){n.forEach(function(n){2==n.valueType&&n.field&&(!t[n.field]&&(t[n.field]=[]),t[n.field].push(e.key))})})}),t}return null},t.b=function(e,t){console.log(e,t),e.dataFilterInfo&&e.dataFilterInfo.forEach(function(e){e.forEach(function(e){2==e.valueType&&t[e.field]&&(e.valueType=1,e.value=t[e.field])})});return e},t.a=function(e,t){e&&e.forEach(function(e){e.forEach(function(e){t[e.field]&&(e.valueType=1,e.value=t[e.field])})});return e};var o=n("mvHQ"),i=n.n(o)},wFR5:function(e,t){},wiAh:function(e,t){},"wrH/":function(e,t){},x0LR:function(e,t,n){"use strict";var o={props:{itemOption:{},isEdit:{}},data:function(){return{num1:0,num2:0}},mounted:function(){var e=this;this.isEdit?(this.num1=999,this.num2=666):(this.itemOption.robotInfo&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.robotInfo),method:"get"}).then(function(t){var n=t.data;0==n.code&&(e.num1=Number(n.data))}),this.itemOption.contrastRobotInfo&&this.$http({url:this.$http.adornUrl("/robot/commonrobot/getValueByRobotId/"+this.itemOption.contrastRobotInfo),method:"get"}).then(function(t){var n=t.data;0==n.code&&(e.num2=Number(n.data))}))},methods:{onCtrDataChange:function(e){}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"fill-content",attrs:{shadow:"hover"}},[n("div",{staticClass:"fill-content flex-center"},[n("div",{staticClass:"grid-card-dashboard-title row"},[n("div",{staticClass:"col"},[e._v("\n            "+e._s(e.itemOption.name)+"\n        ")])]),e._v(" "),n("div",{staticClass:"col column"},[n("div",{staticClass:"col number"},[n("span",[e._v(e._s(e.num1))])]),e._v(" "),e.num2>-1?n("div",{staticClass:"row",staticStyle:{height:"20px","line-height":"20px","font-size":"14px"}},[n("div",{staticClass:"col"}),e._v(" "),n("span",[e._v(e._s(e.itemOption.name2)+":")]),e._v(" "),n("span",{staticStyle:{padding:"0 10px 0 5px"}},[e._v(e._s(e.num2))]),e._v(" "),e.num2?n("div",{staticClass:"row",style:e.num1>e.num2?"color:red":"color:#67C23A"},[e.num1>e.num2?n("div",[e._v("+")]):e._e(),e._v(" "),n("div",[e._v(e._s(e.num1-e.num2))]),e._v(" "),n("div",[e._v(e._s("(")+e._s(e.num1>e.num2?"+":"")+e._s(((e.num1-e.num2)/e.num2*100).toFixed(1)+"%")+e._s(")"))]),e._v(" "),n("div",{},[e.num1>e.num2?n("i",{staticClass:"el-icon-top"}):e._e(),e._v(" "),e.num1<e.num2?n("i",{staticClass:"el-icon-bottom"}):e._e()])]):e._e()]):e._e()])])])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("eD0e")},"data-v-7408a66f",null);t.a=a.exports},x9xu:function(e,t){},xDEe:function(e,t){},xJHW:function(e,t){},xQlF:function(e,t){},xVjb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("pwxe"),i={computed:{isAdmin:{get:function(){return this.$store.state.user.isAdmin},set:function(e){this.$store.commit("user/updateIsAdmin",e)}}},components:{printTemplates:n("X6Qn").default},data:function(){return{visible:!0,printTemplatesVisable:!1,tempIndex:0,tempList:[],tableName:"common_table_20_144_eewnha",printData:null}},created:function(){},methods:{init:function(e){this.visible=!0,this.printData=e,this.getTemplateList()},onPrintTemplatesClose:function(){this.printTemplatesVisable=!1,this.getTemplateList()},getTemplateList:function(){var e=this;this.$http({url:this.$http.adornUrl("/print/printtemplate/list"),method:"post",data:this.$http.adornParams({page:1,limit:999,tableType:"dataTable"})}).then(function(t){var n=t.data;n&&0===n.code&&n.page&&(e.tempList=n.page.list)})},getPrintData:function(){var e=this,t=[];t.push({key:"ids",value:this.ids,type:"ids"}),this.$http({url:this.$http.adornUrl("/common/common/list"),method:"post",headers:{tableName:this.tableName},data:this.$http.adornParams({page:1,limit:9999,tableName:this.tableName,condition:t})}).then(function(t){var n=t.data;n&&0===n.code&&null!=n.page&&null!=n.page.list&&(e.printData=[],n.page.list.forEach(function(t){e.printData.push(JSON.parse(t.extContent))}))})},changeData:function(e){var t={};return t.title=e.name,t.width=e.templateW,t.height=e.templateH,t.pageHeight=e.paperH,t.pageWidth=e.paperW,t.direction=e.direction,t.tempItems=JSON.parse(e.template),t},dealWithRelateTableData:function(e){e.forEach(function(e){for(var t in e.relateTableContent)for(var n in e.relateTableContent[t])e[t+"_"+n]=e.relateTableContent[t][n]})},printPreview:function(e){var t=this;if(null==this.printData)return this.$message("请输入正确格式的打印数据");this.dealWithRelateTableData(this.printData),console.log(this.tempList,this.tempIndex,this.printData,9998),1==e?o.a.preview(this.changeData(this.tempList[this.tempIndex]),this.printData):this.$confirm("确认直接打印吗？","确认信息").then(function(e){e&&o.a.print(t.changeData(t.tempList[t.tempIndex]),t.printData)}).catch(function(e){console.log(e)})},printDesign:function(){var e=this;this.printTemplatesVisable=!0,this.$nextTick(function(){e.$refs.printTemplatesView.init()})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{title:"打印单据",width:"400px",height:"300px",resize:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticStyle:{"margin-top":"20px"}},[e.tempList.length>1?n("div",[n("span",[e._v("选择打印模板")]),e._v(" "),n("el-select",{model:{value:e.tempIndex,callback:function(t){e.tempIndex=t},expression:"tempIndex"}},e._l(e.tempList,function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:t}})}),1)],1):e._e(),e._v(" "),n("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[n("div",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.printPreview(2)}}},[e._v("直接打印")])],1),e._v(" "),n("div",{staticStyle:{"margin-left":"10px"}},[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.printPreview(1)}}},[e._v("打印预览")])],1),e._v(" "),n("div",{staticStyle:{"margin-left":"10px"}},[n("el-button",{staticClass:"edit-mode-btn",attrs:{size:"mini",type:"success"},on:{click:function(t){return e.printDesign()}}},[e._v("打印模板设计")])],1),e._v(" "),e.printTemplatesVisable?n("printTemplates",{ref:"printTemplatesView",on:{close:e.onPrintTemplatesClose}}):e._e()],1)])])])},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("0g9E")},"data-v-0c4983ea",null);t.default=r.exports},xea2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("KPhi"),i={props:{data:{}},data:function(){return{option:{mainTitle:"",video:""},optionFilter:{mainTitle:[],video:["video"]},selected:""}},methods:{getOption:function(){return{option:this.option,optionFilter:this.optionFilter}},click:function(e){this.selected=e,this.$emit("select",e)}},created:function(){this.optionFilter.mainTitle=Object(o.a)()}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(2,function(t,o){return n("div",{key:o,staticClass:"base-box"},[n("div",{staticClass:"main-title cursor-pointer",class:"mainTitle"==e.selected?"selected-box":"normal-box",on:{click:function(t){return e.click("mainTitle")}}},[e._v("\r\n            主标题\r\n        ")]),e._v(" "),n("div",{staticClass:"secondary-title cursor-pointer video",class:"video"==e.selected?"selected-box":"normal-box",on:{click:function(t){return e.click("video")}}},[e._m(0,!0)])])}),e._v(" "),n("div",{staticClass:"text-center"},[e._v("\r\n        暂无更多\r\n    ")])],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"context"},[t("i",{staticClass:"el-icon-video-play"})])}]};var r=n("VU/8")(i,a,!1,function(e){n("pSZb")},"data-v-d3e4f856",null);t.default=r.exports},xstH:function(e,t,n){"use strict";var o=n("mvHQ"),i=n.n(o),a={props:{value:{type:null|Array|String,default:function(){return[]}},single:{type:Boolean},readOnly:{type:Boolean},fieldDefine:{},parentPoint:{},tableItemData:{}},watch:{filterText:function(e){this.$refs.tree.filter(e)},value:{handler:function(e){this.initValue()},deep:!0,immediate:!1}},model:{prop:"value",event:"change"},data:function(){return{loading:!1,filterText:"",themeColor:localStorage.getItem("theme"),staffList:[],defaultProps:{children:"children",label:"realname"},selectList:[],initSelectIds:[],isLoading:!1}},computed:{fullStaffList:{get:function(){return this.$store.state.userInterface.staffList}}},mounted:function(){var e=this;this.staffList=[],this.fullStaffList.forEach(function(t){e.staffList.push(t)}),this.initValue()},methods:{onInput:function(e){var t=e.target.value;this.$emit("input",t)},getButtonIcon:function(){return this.selectList.length?"el-icon-refresh":"el-icon-plus"},showPanel:function(){this.$refs.modalView.showPanel(),this.onShow()},onShow:function(){var e=this;if(this.fieldDefine&&this.fieldDefine.dataFilterRobotId){this.staffList=[];var t=void 0;this.parentPoint?t=this.parentPoint.dataForm:this.tableItemData&&(t=this.tableItemData),this.isLoading=!0,this.$http({url:this.$http.adornUrl("/robot/commonrobot/robotDoWithTrigeData2"),method:"post",data:this.$http.adornData({tableName:this.tableName,robotId:this.fieldDefine.dataFilterRobotId,trigData:i()(t)})}).then(function(t){var n=t.data;if(e.isLoading=!1,n&&0===n.code){var o=JSON.parse(n.data);o&&o.forEach(function(t){e.fullStaffList.forEach(function(n){t==n.userId&&e.staffList.push(n)})}),e.initValue()}else e.$message.error(n.msg)})}else this.staffList=[],this.fullStaffList.forEach(function(t){e.staffList.push(t)}),this.initValue()},initValue:function(){var e=this,t=this.value;Array.isArray(t)||(t=t?[t]:[]),this.selectList=[],this.initSelectIds=[],this.staffList.forEach(function(n){t.forEach(function(t){t==n.userId&&(e.selectList.push(n),e.initSelectIds.push(t))})}),this.$nextTick(function(){e.$refs.tree&&t&&e.$refs.tree.setCheckedKeys(t)})},handleClose:function(e){this.selectList.splice(e,1);var t=[];for(var n in this.selectList)t.push(this.selectList[n].userId);this.$emit("input",t),this.$emit("close"),this.initSelectIds=t,this.$refs.tree&&this.$refs.tree.setCheckedKeys(t)},getCheckedNodes:function(){},changeNode:function(e,t){this.single&&t&&this.$refs.tree.setCheckedKeys([e.userId]),this.selectList=this.$refs.tree.getCheckedNodes();var n=this.$refs.tree.getCheckedKeys(),o=null;o=this.single?n.length?n[0]:"":n,this.$emit("change",o)},filterNode:function(e,t){return!e||-1!==t.realname.indexOf(e)}},created:function(){}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("vxe-pulldown",{ref:"modalView",attrs:{transfer:!0},on:{"hide-panel":function(t){return e.$emit("hide")}},scopedSlots:e._u([{key:"default",fn:function(){return[n("el-button",{staticStyle:{margin:"0 10px"},attrs:{title:"选择员工",type:"primary",icon:e.getButtonIcon(),circle:""},on:{click:function(t){return e.showPanel()}}})]},proxy:!0},{key:"dropdown",fn:function(){return[n("el-card",{attrs:{"body-style":{padding:"10px"}}},[n("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),e.isLoading?n("i",{staticClass:"el-icon-loading"}):n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",staticClass:"filter-tree",attrs:{data:e.staffList,"node-key":"userId","show-checkbox":"","highlight-current":"","check-on-click-node":"",props:e.defaultProps,"default-checked-keys":e.initSelectIds,"default-expand-all":"","filter-node-method":e.filterNode},on:{"check-change":e.changeNode}})],1)]},proxy:!0}])}),e._v(" "),n("div",e._l(e.selectList,function(t,o){return n("staff-tag",{key:t.userId,staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{closable:!e.readOnly,userId:t.userId},on:{close:function(t){return e.handleClose(o)}}},[e._v(e._s(t.realname)+"\n        ")])}),1)],1)])},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("CiIj")},"data-v-d303fcce",null);t.a=l.exports},y01D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("KPhi"),i={props:{data:{}},data:function(){return{option:{mainTitle:"",secondaryTitle:""},optionFilter:{mainTitle:[],secondaryTitle:[]},infoItemBum:1,selected:""}},methods:{getOption:function(){return{option:this.option,optionFilter:this.optionFilter}},click:function(e){this.selected=e,this.$emit("select",e)}},created:function(){this.optionFilter.mainTitle=Object(o.a)();this.optionFilter.secondaryTitle=["selectStaff"].concat(Object(o.a)())}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(3,function(t,o){return n("div",{key:o,staticClass:"base-box"},[n("div",{staticClass:"main-title cursor-pointer",class:"mainTitle"==e.selected?"selected-box":"normal-box",on:{click:function(t){return e.click("mainTitle")}}},[e._v("\n      这里是主标题\n    ")]),e._v(" "),n("div",{staticClass:"secondary-title cursor-pointer",class:"secondaryTitle"==e.selected?"selected-box":"normal-box",on:{click:function(t){return e.click("secondaryTitle")}}},[e._v("\n      这里是副标题\n    ")]),e._v(" "),n("button",{on:{click:e.addInfoItem}},[e._v("增加")])])}),e._v(" "),n("div",{staticClass:"text-center"},[e._v("\n    暂无更多\n  ")])],2)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("VSe1")},"data-v-6ae22c8c",null);t.default=r.exports},y05Z:function(e,t){},y3Q9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-xiangqu",use:"icon-xiangqu-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-xiangqu"><defs><style type="text/css"></style></defs><path d="M512 922.110425c-0.002047 0-0.004093 0-0.00614 0-5.574972-0.002047-10.916631-2.229784-14.84101-6.186909L370.833887 788.530081c-1.613754-1.622964-164.173107-165.007101-187.469696-188.304713C114.596991 531.459191 74.209142 454.2886 66.567092 377.057635c-7.609305-76.902484 18.981307-150.036132 74.874291-205.929116 54.793954-54.79293 121.562637-77.752852 193.072297-66.412572 59.33027 9.41237 120.361275 42.176588 177.48632 95.104031 57.122999-52.92642 118.155027-85.690638 177.485297-95.104031 71.513754-11.351536 138.279367 11.616572 193.072297 66.412572 55.891961 55.892985 82.482573 129.026632 74.874291 205.929116-7.643074 77.230965-48.0299 154.400532-116.7971 223.167732-50.870598 50.868551-311.172065 313.063135-313.795822 315.705312C522.914584 919.886781 517.572926 922.110425 512 922.110425zM298.928207 143.679353c-47.080272 0-89.998757 19.104103-127.914298 57.020668-47.547923 47.547923-69.27476 107.107413-62.829977 172.238806 6.67912 67.496254 42.902112 135.863341 104.751762 197.714014 23.334451 23.334451 185.92962 186.758498 187.568956 188.406021l111.505583 112.451118c56.269561-56.671721 255.224846-257.029958 299.05305-300.858162 61.850673-61.850673 98.073666-130.216737 104.750739-197.714014 6.446829-65.131393-15.280008-124.690884-62.828954-172.238806-45.573965-45.574988-98.377588-63.974034-156.947542-54.680367-55.707766 8.838296-114.234741 42.590004-169.251775 97.609085-3.922333 3.921309-9.240455 6.125511-14.785751 6.125511s-10.863419-2.203178-14.785751-6.124488c-55.020104-55.020104-113.546056-88.772836-169.252799-97.610108C318.119291 144.458089 308.437791 143.679353 298.928207 143.679353z" p-id="3891" /></symbol>'});r.a.add(l);t.default=l},y3XI:function(e,t){},yCXC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Wc9H"),i=n.n(o),a=n("IaZV"),r=n.n(a),l=new i.a({id:"icon-log",use:"icon-log-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-log"><defs><style type="text/css"></style></defs><path d="M904 238.5L746.2 84.2c-13.1-13.1-31-20-48.9-20H195.8c-53.7 0-97.1 44.1-97.1 97.8v700c0 53.7 43.4 97.8 97.1 97.8h631.7c53.7 0 97.8-44.1 97.8-97.8V288.8c0-18.6-8.2-37.2-21.3-50.3zM856.4 862c0 15.8-13.1 28.9-28.9 28.9H195.8c-15.8 0-28.2-13.1-28.2-28.9V162c0-15.8 12.4-28.9 28.2-28.9l454 0.7v121.9c0 57.2 46.2 103.3 103.3 103.3h103.3v503z m0-571.8H753.1c-19.3 0-34.4-15.2-34.4-34.4v-102l137.8 135v1.4z" p-id="4866" /><path d="M684 475.2H339.5c-19 0-34.4 15.4-34.4 34.4s15.4 34.4 34.4 34.4H684c19 0 34.4-15.4 34.4-34.4S703 475.2 684 475.2zM684 681.9H339.5c-19 0-34.4 15.4-34.4 34.4s15.4 34.4 34.4 34.4H684c19 0 34.4-15.4 34.4-34.4S703 681.9 684 681.9z" p-id="4867" /></symbol>'});r.a.add(l);t.default=l},yDPf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("0xDb");var o={model:{prop:"value",event:"change"},props:{value:null},data:function(){return{tree:[]}},methods:{g:function(e){console.log(e)}},mounted:function(){}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-form",{attrs:{"label-width":"80px"}},[t("div",{staticClass:"item-type-title"},[t("i",{staticClass:"el-icon-s-data"}),this._v("\r\n            数据分析\r\n        ")])])],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("Lj8k")},null,null);t.default=a.exports},yYqw:function(e,t){},ydwD:function(e,t){},ygPG:function(e,t){},ykAp:function(e,t){},yy7n:function(e,t,n){"use strict";var o=n("lMLl"),i=(n("qvXg"),{name:"subGridLayout",props:{itemOption:{},isEdit:{}},components:{titeView:o.a},data:function(){return{items:[],multiItems:{},activeName2:"",dashboard:null,isMulti:!1,componentItems:[]}},mounted:function(){this.init()},methods:{handleClick:function(e){},init:function(){var e=this,t=JSON.parse(this.itemOption.componentId);t.length>1?(this.isMulti=!0,this.componentItems=t,t.forEach(function(t){e.getData(t.id)})):this.getData(this.itemOption.componentId)},getData:function(e){var t=this;e&&this.$http({url:this.$http.adornUrl("/common/commondashboarddefine/info/"+e),method:"get"}).then(function(n){var o=n.data;o&&0===o.code&&(t.dashboard=o.commonDashboardDefine,t.dashboard.define=JSON.parse(o.commonDashboardDefine.define),t.isMulti?t.$set(t.multiItems,e,t.dashboard.define):t.items=t.dashboard.define,t.$nextTick(function(){t.isMulti?t.$refs["layout"+e][0].homeInit():t.$refs.layout.homeInit()}))})}}}),a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("titeView",{attrs:{itemOption:e.itemOption},scopedSlots:e._u([{key:"content",fn:function(){return[e.isMulti?n("div",{staticStyle:{padding:"15px"}},[n("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},e._l(e.componentItems,function(t){return n("el-tab-pane",{attrs:{label:t.name}},[e.multiItems[t.id]&&e.multiItems[t.id].length>0?n("CommonGridLayout",{ref:"layout"+t.id,refInFor:!0,attrs:{list:e.multiItems[t.id],isEdit:!1}}):e._e()],1)}),1)],1):e._e(),e._v(" "),e.items.length>0?n("CommonGridLayout",{directives:[{name:"else",rawName:"v-else"}],ref:"layout",attrs:{list:e.items,isEdit:!1}}):e._e()]},proxy:!0}])})},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("zW/T")},"data-v-05175635",null);t.a=r.exports},"z+ZM":function(e,t){},z5rG:function(e,t,n){"use strict";var o={props:{itemOption:{},isEdit:{}},data:function(){return{url:""}},mounted:function(){this.itemOption.url&&(-1!=this.itemOption.url.indexOf("/shareDashboard")?this.url=window.SITE_CONFIG.datartUrl+"shareDashboard.html#":-1!=this.itemOption.url.indexOf("/shareChart")&&(this.url=window.SITE_CONFIG.datartUrl+"shareChart.html#"))}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"h100 w100"},[this.itemOption.url?t("iframe",{staticClass:"h100 w100",attrs:{src:this.url+this.itemOption.url,frameborder:"0"}}):this._e()])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("O9QA")},"data-v-16eec154",null);t.a=a.exports},zMFD:function(e,t){},zU7u:function(e,t){},"zW/T":function(e,t){},zYGc:function(e,t){},zeMX:function(e,t){},zhSc:function(e,t){},zmiB:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAugAAACGAQMAAAC19e3QAAAABlBMVEX///8AAABVwtN+AAAAAXRSTlMAQObYZgAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAbJJREFUaIHtmlFqxDAMRAU+QI7kq/tIPoBBlWbktPRnA21T2IwJS2JbT/mRRlbWTON/xuE5Zm+zm3X3sY7R3JdZ3MRKbpjWfMRqzKw0ifl89DLxsG0JMbAGbdsUXXTR/5DuvIkdiQhQoEFPl/C3DvjGhjDETBC76KKLfh89fxH6VvaZCYhudEYfM1dj8kwPjuQhuuiif4vVCr8U2MG4ja1bXcPS26wZ0vkSGbqiiy76PfS161tkgu0vM8Gg8SIduSGFdGYlXCnhZSYQXfQn0XesUjnDWZgZJg2q+1Vp6aDjEAopPq5mAtFFF/2ndGhpdXxQ5SaFN1y18yrf6AEdecy8pKuiiy76r9Cx1rGAoA/hxr7du03HuIaXUveqma/1lkQX/Ul050GyQVeplnyk2CKSYU/b2fdh00UXXfT76Ax6nD8N3zfSH9u0sYclsdWXyjMTbNW90AcWXfTn0KtKZfcHSzGPKpXKmdG7C1IWsLtKFV100W+m48BY9qvuHeIJ4WWXJ797dN8tobabuKKLLvpN9LYNzvMqG7cNku2f/9EZ1ffhCzFJvOz+iC76e9M13m98ACkZcs36ACChAAAAAElFTkSuQmCC"},zrCE:function(e,t){}},[1]);